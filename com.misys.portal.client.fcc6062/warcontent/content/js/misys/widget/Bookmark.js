/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.widget.Bookmark"]){dojo._hasResource["misys.widget.Bookmark"]=true;dojo.provide("misys.widget.Bookmark");fncSaveBookmarkAction=function(_1,_2,_3){var _4="";var _5=["<?xml version=\"1.0\" encoding=\"UTF-8\"?><bookmark>"];var _6=dijit.byId("sendBookmark");dojo.forEach(_6.getDescendants(),function(_7){_5.push("<",_7.get("name"),">",_7.get("value"),"</",_7.get("name"),">");});_5.push("<bookmark_id>",_1,"</bookmark_id>");_5.push("<action>",_1,"</action></bookmark>");var _8=misys.xhrPost({url:misys.getServletURL("/screen/BookmarkScreen?currentActionCode="+_2+"&currentScreen="+_3),postData:_5.join(""),load:function(_9){_4=_9;}});_8.then(function(){var _a=dojo.byId("favorites");if(!dijit.byId("sendBookmark")){dojo.parser.parse(dojo.byId("favorites"));}misys.animate("wipeOut",_a,function(){dijit.byId("sendBookmark").destroyRecursive(true);_a.innerHTML=_4.substring(20,_4.length-6);misys.animate("wipeIn",_a);});});return _8;};fncDeleteBookmarkAction=function(id,_b,_c,_d){var _e=["<?xml version=\"1.0\" encoding=\"UTF-8\"?><bookmark>"];var _f=dijit.byId("sendBookmark");dojo.forEach(_f.getDescendants(),function(_10){if(_10.id!="bookmark_"+id){_e.push("<",_10.get("name"),">",_10.get("value"),"</",_10.get("name"),">");}});_e.push("<action>",_b,"</action></bookmark>");var _11="";var _12=misys.xhrPost({url:misys.getServletURL("/screen/BookmarkScreen?currentActionCode="+_c+"&currentScreen="+_d),postData:_e.join(""),load:function(_13){_11=_13;}});_12.then(function(){var _14=dojo.byId("favorites");if(!dijit.byId("sendBookmark")){dojo.parser.parse(dojo.byId("favorites"));}misys.animate("wipeOut",_14,function(){dijit.byId("sendBookmark").destroyRecursive(true);_14.innerHTML=_11.substring(20,_11.length-6);misys.animate("wipeIn",_14);});});return _12;};fncDoBookmarkAction=function(_15,_16,id,_17,_18){if(!dijit.byId("sendBookmark")){dojo.parser.parse("favorites");}if(_15=="SAVE"){fncSaveBookmarkAction(_16,_17,_18);}else{fncDeleteBookmarkAction(id,_16,_17,_18);}};}