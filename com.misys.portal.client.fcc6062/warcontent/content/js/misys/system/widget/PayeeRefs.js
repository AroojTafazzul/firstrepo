/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.system.widget.PayeeRefs"]){dojo._hasResource["misys.system.widget.PayeeRefs"]=true;dojo.provide("misys.system.widget.PayeeRefs");dojo.experimental("misys.system.widget.PayeeRefs");dojo.require("misys.grid.GridMultipleItems");dojo.require("misys.system.widget.PayeeRef");dojo.declare("misys.system.widget.PayeeRefs",[misys.grid.GridMultipleItems],{data:{identifier:"store_id",label:"store_id",items:[]},templatePath:null,templateString:dojo.byId("payeerefs-template").innerHTML,dialogId:"payeref-dialog-template",xmlTagName:"master_payee_refs",xmlSubTagName:"master_payee_ref",viewMode:"edit",gridColumns:["reference_id","label","local_label","help_message","local_help_message","optional","validation_format","external_validation","input_in_type","field_type"],propertiesMap:{reference_id:{_fieldName:"reference_id"},label:{_fieldName:"label"},local_label:{_fieldName:"local_label"},help_message:{_fieldName:"help_message"},local_help_message:{_fieldName:"local_help_message"},optional:{_fieldName:"optional"},validation_format:{_fieldName:"validation_format"},external_validation:{_fieldName:"external_validation"},input_in_type:{_fieldName:"input_in_type"},field_type:{_fieldName:"field_type"}},maxBillRefs:0,startup:function(){this.dataList=[];this.layout=[{name:"Reference ID",field:"reference_id",width:"10%",noresize:true},{name:"Bill Reference Label",field:"label",width:"30%",noresize:true},{name:"Local Label",field:"local_label",width:"30%",noresize:true},{name:"V",field:"optional",width:"5%",noresize:true},{name:"C",field:"external_validation",width:"5%",noresize:true},{name:"R",field:"input_in_type",width:"5%",noresize:true},{name:"T",field:"field_type",width:"5%",noresize:true},{name:"",field:"actions",formatter:misys.grid.formatReportActions,width:"10%",noresize:true},{name:"Id",field:"store_id",headerStyles:"display:none",cellStyles:"display:none",noresize:true}];if(this.viewMode==="view"){this.layout=[{name:"Reference ID",field:"reference_id",width:"10%",noresize:true},{name:"Bill Reference Label",field:"label",width:"30%",noresize:true},{name:"Local Label",field:"local_label",width:"30%",noresize:true},{name:"V",field:"optional",width:"5%",noresize:true},{name:"C",field:"external_validation",width:"5%",noresize:true},{name:"R",field:"input_in_type",width:"5%",noresize:true},{name:"T",field:"field_type",width:"5%",noresize:true},{name:"Id",field:"store_id",headerStyles:"display:none",cellStyles:"display:none",noresize:true}];}if(this.hasChildren()){dojo.forEach(this.getChildren(),function(_1){var _2={reference_id:_1.get("reference_id"),label:_1.get("label"),local_label:_1.get("local_label"),help_message:_1.get("help_message"),local_help_message:_1.get("local_help_message"),optional:_1.get("optional"),validation_format:_1.get("validation_format"),external_validation:_1.get("external_validation"),input_in_type:_1.get("input_in_type"),field_type:_1.get("field_type")};this.dataList.push(_2);},this);}this.inherited(arguments);},resetDialog:function(_3,_4){this.inherited(arguments);if(dijit.byId("reg_required").get("value")=="N"){dijit.byId("input_in_type_1").set("disabled",true);}else{dijit.byId("input_in_type_1").set("disabled",false);}if(dijit.byId("input_in_type_2")){dijit.byId("input_in_type_2").set("checked","checked");}if(dijit.byId("field_type_2")){dijit.byId("field_type_2").set("checked","checked");}},openDialogFromExistingItem:function(_5,_6){this.inherited(arguments);},addItem:function(_7){var _8=this;var _9=false;if(_8.grid&&_8.grid.store&&_8.maxBillRefs!==0){_8.grid.store.fetch({onBegin:function(_a){if(_a<_8.maxBillRefs){_9=true;}else{misys.dialog.show("ERROR",misys.getLocalization("maxBillReferenceReached"));}}});}else{_9=true;}if(_9){_8.inherited(arguments);}}});}