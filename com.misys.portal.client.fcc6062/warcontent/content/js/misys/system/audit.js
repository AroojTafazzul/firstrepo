/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.system.audit"]){dojo._hasResource["misys.system.audit"]=true;dojo.provide("misys.system.audit");(function(d,dj,m){function _1(_2,_3){_4();m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/AuditDialogAction"),handleAs:"json",content:{option:_3,auditId:_2},sync:true,load:function(_5,_6){var _7=_5.date,_8=_5.action,_9=_5.user,_a=_5.company,_b=_5.result,_c=_5.ip_address,_d=_5.context,_e=_5.items;if(_7){d.style(d.byId("dateDiv"),"display","block");d.byId("dateSpan").innerHTML=_7;}if(_8){d.style(d.byId("actionDiv"),"display","block");d.byId("actionSpan").innerHTML=_8;}if(_9){d.style(d.byId("userDiv"),"display","block");d.byId("userSpan").innerHTML=_9;}if(_a){d.style(d.byId("companyDiv"),"display","block");d.byId("companySpan").innerHTML=_a;}if(_b){d.style(d.byId("resultDiv"),"display","block");d.byId("resultSpan").innerHTML=_b;}if(_c){d.style(d.byId("ipaddressDiv"),"display","block");d.byId("ipaddressSpan").innerHTML=_c;}if(_e){dojo.empty("itemsDiv");dojo.place(_e,"itemsDiv");}},error:function(_f,_10){console.error("[audit] Technical error while fetching audit details");console.error(_f);}});};function _4(){d.byId("dateSpan").innerHTML="";d.byId("actionSpan").innerHTML="";d.byId("userSpan").innerHTML="";d.byId("companySpan").innerHTML="";d.byId("resultSpan").innerHTML="";if(d.byId("ipaddressSpan")){d.byId("ipaddressSpan").innerHTML="";}d.byId("contextSpan").innerHTML="";d.byId("productSpan").innerHTML="";d.style(d.byId("dateDiv"),"display","none");d.style(d.byId("actionDiv"),"display","none");d.style(d.byId("userDiv"),"display","none");d.style(d.byId("companyDiv"),"display","none");d.style(d.byId("resultDiv"),"display","none");if(d.byId("ipaddressDiv")){d.style(d.byId("ipaddressDiv"),"display","none");}d.style(d.byId("contextDiv"),"display","none");d.style(d.byId("productDiv"),"display","none");};d.mixin(m,{showAuditDialog:function(_11,_12){_1(_11,_12);m.dialog.show("HTML",d.byId("auditContainer").innerHTML,m.getLocalization("auditDialogTitle"),_4);},bind:function(){m.connect("dttm_begin","onChange",function(){dj.byId("dttm_end").focus();});m.connect("dttm_end","onChange",function(){dj.byId("dttm_begin").focus();});}});})(dojo,dijit,misys);dojo.require("misys.client.system.audit_client");}