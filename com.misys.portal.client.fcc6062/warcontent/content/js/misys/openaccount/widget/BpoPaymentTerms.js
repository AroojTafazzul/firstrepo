/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.openaccount.widget.BpoPaymentTerms"]){dojo._hasResource["misys.openaccount.widget.BpoPaymentTerms"]=true;dojo.provide("misys.openaccount.widget.BpoPaymentTerms");dojo.experimental("misys.openaccount.widget.BpoPaymentTerms");dojo.require("misys.grid.GridMultipleItems");dojo.require("misys.openaccount.widget.BpoPaymentTerm");dojo.declare("misys.openaccount.widget.BpoPaymentTerms",[misys.grid.GridMultipleItems],{data:{identifier:"store_id",label:"store_id",items:[]},templatePath:null,templateString:dojo.byId("bpo-payment-terms-template")?dojo.byId("bpo-payment-terms-template").innerHTML:"",dialogId:"bpo-payment-terms-dialog-template",xmlTagName:"",xmlSubTagName:"",gridColumns:["pmt_code","pmt_other_term_code","payment_code","payment_nb_days","payment_other_term","payment_amount","payment_percent"],propertiesMap:{Cd:{_fieldName:"payment_code"},NbOfDays:{_fieldName:"payment_nb_days"},Amt:{_fieldName:"payment_amount"},Pctg:{_fieldName:"payment_percent"},OthrPmtTerms:{_fieldName:"payment_other_term"},pmt_code:{_fieldName:"pmt_code"},pmt_other_term_code:{_fieldName:"pmt_other_term_code"}},layout:[{name:"Payment Code",get:misys.getPaymentDisplayedValue,width:"35%"},{name:" ",field:"actions",formatter:misys.grid.formatReportActions,width:"10%"}],getMandatoryProperties:function(_1){var _2=[];_2.push(_1.Amt==""?"Pctg":"Amt");_2.push(_1.Cd==""?"OthrPmtTerms":"Cd");return _2;},startup:function(){this.dataList=[];if(this.hasChildren()){dojo.forEach(this.getChildren(),function(_3){if(_3.createItem){var _4=_3.createItem();this.dataList.push(_4);}},this);}this.inherited(arguments);},openDialogFromExistingItem:function(_5,_6){this.inherited(arguments);if(dijit.byId("payment_code")&&dijit.byId("payment_code").get("value")!==""&&dijit.byId("pmt_code")){dijit.byId("payment_code").set("disabled",false);dijit.byId("payment_code").set("required",true);dijit.byId("payment_nb_days").set("disabled",false);dijit.byId("pmt_code").set("checked",true);}else{if(dijit.byId("payment_code")&&dijit.byId("payment_nb_days")&&dijit.byId("pmt_code")){dijit.byId("payment_code").set("disabled",true);dijit.byId("payment_code").set("required",false);dijit.byId("payment_nb_days").set("disabled",true);dijit.byId("pmt_code").set("checked",false);}}if(dijit.byId("payment_other_term")&&dijit.byId("pmt_other_term_code")&&dijit.byId("payment_other_term").get("value")!==""){dijit.byId("payment_other_term").set("disabled",false);dijit.byId("payment_other_term").set("required",true);dijit.byId("pmt_other_term_code").set("checked",true);}else{if(dijit.byId("payment_other_term")&&dijit.byId("pmt_other_term_code")){dijit.byId("payment_other_term").set("disabled",true);dijit.byId("payment_other_term").set("required",false);dijit.byId("pmt_other_term_code").set("checked",false);}}if(dijit.byId("payment_amount")&&dijit.byId("payment_amount").get("value")!==""){dijit.byId("payment_amount").set("disabled",false);}else{if(dijit.byId("payment_amount")){dijit.byId("payment_amount").set("disabled",true);}}if(dijit.byId("payment_percent")&&dijit.byId("payment_percent").get("value")!==""){dijit.byId("payment_percent").set("disabled",false);}else{if(dijit.byId("payment_percent")){dijit.byId("payment_percent").set("disabled",true);}}if(dijit.byId("pmt_code")&&dijit.byId("pmt_code").get("checked")!==true&&dojo.byId("paymentCode")){dojo.style(dojo.byId("paymentCode"),"display","none");}else{if(dojo.byId("paymentCode")){dojo.style(dojo.byId("paymentCode"),"display","block");}}if(dijit.byId("pmt_other_term_code")&&dijit.byId("pmt_other_term_code").get("checked")!==true&&dojo.byId("payment_other_term_row")){dojo.style(dojo.byId("payment_other_term_row"),"display","none");}else{if(dojo.byId("payment_other_term_row")){dojo.style(dojo.byId("payment_other_term_row"),"display","block");}}},resetDialog:function(_7,_8){this.inherited(arguments);if(dijit.byId("payment_amount")){dijit.byId("payment_amount").set("disabled",false);}if(dijit.byId("payment_percent")){dijit.byId("payment_percent").set("disabled",false);}if(dijit.byId("pmt_code")&&dijit.byId("pmt_code").get("checked")===true&&dojo.byId("paymentCode")){dojo.style(dojo.byId("paymentCode"),"display","block");}else{if(dojo.byId("paymentCode")){dojo.style(dojo.byId("paymentCode"),"display","none");}}if(dijit.byId("pmt_other_term_code")&&dijit.byId("pmt_other_term_code").get("checked")===true&&dojo.byId("payment_other_term_row")){dojo.style(dojo.byId("payment_other_term_row"),"display","block");}else{if(dojo.byId("payment_other_term_row")){dojo.style(dojo.byId("payment_other_term_row"),"display","none");}}},addItem:function(_9){this.inherited(arguments);if(dijit.byId("payment_amount")){dijit.byId("payment_amount").set("disabled",false);}if(dijit.byId("payment_percent")){dijit.byId("payment_percent").set("disabled",false);}if(dijit.byId("pmt_code")&&dijit.byId("pmt_code").get("checked")===true){dojo.style(dojo.byId("paymentCode"),"display","block");dijit.byId("payment_code").set("required",true);dojo.style(dojo.byId("payment_other_term_row"),"display","none");}else{dojo.style(dojo.byId("paymentCode"),"display","none");dijit.byId("payment_code").set("required",false);}if(dijit.byId("pmt_other_term_code")&&dijit.byId("pmt_other_term_code").get("checked")===true){dojo.style(dojo.byId("paymentCode"),"display","none");dojo.style(dojo.byId("payment_other_term_row"),"display","block");dijit.byId("payment_other_term").set("required",true);}else{dojo.style(dojo.byId("payment_other_term_row"),"display","none");dijit.byId("payment_other_term").set("required",false);}},createItem:function(){if(this.hasChildren&&this.hasChildren()){var _a="misys.openaccount.widget.BpoPaymentTerms";var _b=[];dojo.forEach(this.getChildren(),function(_c){if(_c.createItem){_b.push(_c.createItem());}},this);var _d={_value:_b,_type:_a};var _e={};_e["payment_obligations_paymnt_terms"]=_d;return _e;}return null;},createItemsFromJson:function(_f){this.inherited(arguments);},performValidation:function(){if(this.validateDialog(true)){if((dijit.byId("payment_percent")&&dijit.byId("payment_percent").get("value")==="")&&(dijit.byId("payment_amount")&&isNaN(dijit.byId("payment_amount").get("value")))){misys.dialog.show("ERROR",misys.getLocalization("addAmtOrPercentage"));}else{if((dijit.byId("payment_code")&&dijit.byId("payment_code").get("value")==="")&&(dijit.byId("payment_other_term")&&dijit.byId("payment_other_term").get("value")==="")){misys.dialog.show("ERROR",misys.getLocalization("addPaymentTermCode"));}else{this.inherited(arguments);}}}}});}