/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.openaccount.widget.ShipmentSubSchedules"]){dojo._hasResource["misys.openaccount.widget.ShipmentSubSchedules"]=true;dojo.provide("misys.openaccount.widget.ShipmentSubSchedules");dojo.experimental("misys.openaccount.widget.ShipmentSubSchedules");dojo.require("misys.openaccount.FormOpenAccountEvents");dojo.require("misys.grid.GridMultipleItems");dojo.require("misys.openaccount.widget.ShipmentSubSchedule");dojo.declare("misys.openaccount.widget.ShipmentSubSchedules",[misys.grid.GridMultipleItems],{data:{identifier:"store_id",label:"store_id",items:[]},templatePath:null,templateString:dojo.byId("sub-shipment-schedule-template")?dojo.byId("sub-shipment-schedule-template").innerHTML:"",dialogId:"sub-shipment-schedule-dialog-template",xmlTagName:"shipmentSchedules",xmlSubTagName:"shipmentSchedule",gridColumns:["sub_shipment_quantity_value","schedule_earliest_ship_date","schedule_latest_ship_date"],propertiesMap:{ref_id:{_fieldName:"ref_id"},tnx_id:{_fieldName:"tnx_id"},shipment_id:{_fieldName:"shipment_id"},sub_shipment_quantity_value:{_fieldName:"sub_shipment_quantity_value"},schedule_earliest_ship_date:{_fieldName:"schedule_earliest_ship_date"},schedule_latest_ship_date:{_fieldName:"schedule_latest_ship_date"}},layout:[{name:"Sub Quantity Value",field:"sub_shipment_quantity_value",width:"35%"},{name:"Earliest Shipment Date",field:"schedule_earliest_ship_date",width:"15%"},{name:"Latest Shipment Date",field:"schedule_latest_ship_date",width:"15%"},{name:" ",field:"actions",formatter:misys.grid.formatReportActions,width:"10%"}],getMandatoryProperties:function(_1){var _2=[];_2.push("sub_shipment_quantity_value");return _2;},startup:function(){this.dataList=[];if(this.hasChildren()){dojo.forEach(this.getChildren(),function(_3){if(_3.createItem){var _4=_3.createItem();this.dataList.push(_4);}},this);}this.inherited(arguments);},openDialogFromExistingItem:function(_5,_6){this.inherited(arguments);},resetDialog:function(_7,_8){this.inherited(arguments);},addItem:function(_9){this.inherited(arguments);},createDataGrid:function(){this.inherited(arguments);var _a=this.grid;var _b=dijit.byId("line_item_shipment_schedules");misys.connect(_a,"onDelete",function(){misys.dialog.connect(dijit.byId("okButton"),"onMouseUp",function(){_b.addButtonNode.set("disabled",false);},"alertDialog");});},performValidation:function(){if(this.validateDialog(true)){this.inherited(arguments);}},updateData:function(_c){this.inherited(arguments);if(dijit.byId("tran_ship_2")&&dijit.byId("tran_ship_2").get("checked")===true){var _d=dijit.byId("line_item_shipment_schedules");if(_d&&_d.store&&_d.store._arrayOfTopLevelItems.length>0){_d.addButtonNode.set("disabled",true);}}if(dijit.byId("line_item_shipment_schedules")&&dijit.byId("line_item_shipment_schedules").store&&dijit.byId("line_item_shipment_schedules").store._arrayOfTopLevelItems.length>0){dijit.byId("line_item_last_ship_date").set("disabled",true);dijit.byId("line_item_earliest_ship_date").set("disabled",true);}else{if(dijit.byId("line_item_last_ship_date")&&dijit.byId("line_item_earliest_ship_date")){dijit.byId("line_item_last_ship_date").set("disabled",false);dijit.byId("line_item_earliest_ship_date").set("disabled",false);}}},renderSections:function(){this.inherited(arguments);if(this.itemsNode&&!(this.grid&&this.grid.rowCount>0)&&(dijit.byId("part_ship_2")&&dijit.byId("part_ship_2").get("checked")!==true)&&!((dijit.byId("last_ship_date")&&dijit.byId("last_ship_date").get("value")!==null)||(dijit.byId("earliest_ship_date")&&dijit.byId("earliest_ship_date").get("value")!==null))){if(dijit.byId("line_item_last_ship_date")){dijit.byId("line_item_last_ship_date").set("disabled",false);}if(dijit.byId("line_item_earliest_ship_date")){dijit.byId("line_item_earliest_ship_date").set("disabled",false);}}}});}