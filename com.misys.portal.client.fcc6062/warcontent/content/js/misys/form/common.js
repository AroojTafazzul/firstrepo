/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.form.common"]){dojo._hasResource["misys.form.common"]=true;dojo.provide("misys.form.common");dojo.require("dojo.data.ItemFileWriteStore");dojo.require("misys.form.SortedFilteringSelect");(function(d,dj,m){var _1="tab title:";var _2="label[for=tenor_period_label]";var _3="Advising Bank";var _4="requested-conf-party-bank-details";var _5="view-narrative-swift";var _6="&productcode=";var _7="[misys.form.common] Opening a child dialog at URL";var _8="/screen/AjaxScreen/action/";var _9="AjaxScreen/action/GetStaticDataPopup";var _a="[misys.form.common] Retrieving grid content from URL";var _b="excluded-value";var _c="attachment-file";var _d="13",_e="40",_f="300",_10=0,_11=0,_12=0,_13=0,_14=true,_15=true;function _16(msg){var re=new RegExp(/^[a-zA-Z]{1}[).#+-]|^[1-9]{1,2}[).#+-]|^[\+#-]/);var _17=msg.split(/\n/);var _18="<pre style=\"background-color:#ffffff;border-width:0px; white-space: pre-wrap;\">";for(var i=0;i<_17.length;i++){_17[i]=_17[i]+"\n";var len=_17[i].length;var _19="";if(_17[i][len-1]==="\n"&&_17[i+1]!=undefined&&(re.test(_17[i+1].trim())||_17[i+1].trim()===""||_17[i+1].trim()==="\n")){_19=_17[i].replace(/\n/g,"");_19=_19+"<br/>";}else{_19=_17[i].replace(/\n/g," ");}_18+=_19;}_18+="</pre>";return _18;};function _1a(msg){var _1b=msg;_1b=_1b.replace(/&#xa;/g,"\n");_1b=_1b.replace(/&#xa;/g,"\t");_1b=_1b.replace(/&#x29;/g,")");_1b=_1b.replace(/&#x2b;/g,"+");_1b=_1b.replace(/&#x23;/g,"#");_1b=_1b.replace(/&#x2d;/g,"-");_1b=_1b.replace(/&#x3e;/g,">");_1b=_1b.replace(/&#x3c;/g,"<");_1b=_1b.replace(/&#x2f;/g,"/");_1b=_1b.replace(/&#x9;/g,"");_1b=_1b.replace(/&#x26;nbsp&#x3b;/g," ");_1b=_1b.replace(/&#x26;amp&#x3b;/g,"&");return _16(_1b);};function _1c(_1d){var _1e=m._config.productCode.toLowerCase(),_1f=dj.byId(_1e+"_amt"),_20=dj.byId("org_"+_1e+"_amt"),_21=d.number.parse(_20.get("displayedValue")),_22=d.number.parse(_1d.get("displayedValue"));_21=!isNaN(_21)?_21:0;_22=!isNaN(_22)?_22:null;if(_1d.id==="inc_amt"||_1d.id==="inc_amt_value"){_1f.set("value",_21+_22);m.setTnxAmt(_22);}else{if(_22<=_21){_1f.set("value",_21-_22);m.setTnxAmt(_22);}else{m.setFieldState(_1d,false);}}};function _23(_24){m.setTnxAmt("");var _25=_24.get("value");dj.byId("ft_cur_code").set("value",_25);dj.byId("counterparty_details_ft_cur_code_nosend").set("value",_25);m.setCurrency(_24,["ft_amt","counterparty_details_ft_amt_nosend"]);d.query(".widgetContainer #counterparty_fields "+"[id^='counterparty_details_document_id_']").forEach(function(_26){if(_26.id.indexOf("nosend")===-1){var w=dj.byId(_26.id);if(w){m.deleteTransactionAddon("counterparty",w.get("value"));}}});};function _27(_28,_29){var _2a=dj.byId("drawee_details_bank_name");var _2b=(dj.byId("tnxtype")&&dj.byId("tnxtype").get("value")==="03")||(dj.byId("tnx_type_code")&&dj.byId("tnx_type_code").get("value")==="03")||(dj.byId("prod_stat_code")&&(dj.byId("prod_stat_code").get("value")==="08"||dj.byId("prod_stat_code").get("value")==="31"));if(!(_2b)){switch(_29){case m._config.issuingBank:_2a.set("value",m._config.issuingBank);break;case m._config.advisingBank:if(_28!=="03"){_2a.set("value",m._config.advisingBank);}else{_2a.set("value",m._config.issuingBank);}break;case m._config.anyBank:_2a.set("value",m._config.issuingBank);break;default:if(_28==="01"||_28==="02"||_28==="04"||_28==="05"||_28==="03"){}else{_2a.set("value",m._config.issuingBank);}break;}}};function _2c(url,_2d){var _2e=[{field:"REFIDLINK",name:"ref_id",width:"100px",styles:"text-align: center;",formatter:m.grid.formatHTML},{field:"CURCODE",name:"cur_code",width:"auto"},{field:"TNXID",name:"tnx_id",width:"auto"},{field:"TYPE",name:"type",width:"auto",formatter:m.grid.formatHTML},{field:"STATUS",name:"status",width:"auto"},{field:"AMOUNT",name:"tnx_amt",width:"auto"}],_2f="items: ''",_30=new dojo.data.ItemFileReadStore({data:_2f}),_31=new dojox.grid.DataGrid({query:{id:"*"},id:"transaction_Grid",structure:_2e,height:"100px",noDataMessage:m.getLocalization("noTransactionsFound"),onSelected:function(_32){_33(_32);},selectionMode:"single"},document.createElement("div"));d.byId(_2d).appendChild(_31.domNode);_31.startup();_30.url=url;_31.setStore(_30);};function _33(_34){var _35=dj.byId("transaction_Grid").get("store")._arrayOfAllItems[_34];dj.byId("imp_bill_ref_id").set("value",_35.TNXID);d.byId("TransactionLink").innerHTML="<a id='javascriptLink' href='javascript:void(0)'>"+m.getLocalization("TransactionLink")+"</a>";d.attr("javascriptLink","onclick","misys.popup.showReporting('FULL','"+_35.PRODUCTCODE+"','"+_35.REFID+"','"+_35.TNXID+"');");dj.byId("linkedTransaction_dialog").hide();};function _36(){var _37=m._config.limitFieldIdCollection;d.forEach(_37,function(id,_38){var obj=dj.byId(id);if(obj){obj.set("displayedValue","");}});};function _39(_3a){m._config.limitFieldIdCollection=_3a.fields;m._config.limitCollection=_3a.items;m._config.limitStore=_3a.store;var _3b=dj.byId("limit_id");if(_3b){_3b.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:m._config.limitStore}});}};function _3c(_3d){var _3e;if(_3d.items!==""){_3e=_3d.items.widget;var _3f=dj.byId(_3e);var _40=_3f.get("value");if(_40===""){_3f.set("value",_40+_3d.items.text);}else{_3f.set("value",_40+"\n"+_3d.items.text);}}dj.byId("xhrDialog")?dj.byId("xhrDialog").hide():"";};function _41(_42){if(_42.message!==""){var _43=dj.byId("first_name"),_44=dj.byId("last_name"),_45=dj.byId("legal_country"),_46=dj.byId("legal_type"),_47=dj.byId("legal_no"),_48=dj.byId("address_line_1"),_49=dj.byId("address_line_2"),_4a=dj.byId("country_sub_div"),_4b=dj.byId("county"),_4c=dj.byId("country_name"),_4d=dj.byId("phone"),fax=dj.byId("fax"),_4e=dj.byId("email"),dom=dj.byId("dom"),_4f=dj.byId("time_zone"),_50=dj.byId("correspondence_language"),_51=dj.byId("actv_flag"),_52=dj.byId("base_cur_code"),_53=dj.byId("employee_department");var _54=_42.message.static_user.group_record.length;var _55;var _56;var _57=_42.message.static_user.first_name,_58=_42.message.static_user.last_name,_59=_42.message.static_user.address_line_1,_5a=_42.message.static_user.address_line_2,_5b=_42.message.static_user.country_sub_div,_5c=_42.message.static_user.county,_5d=_42.message.static_user.country_name,_5e=_42.message.static_user.phone,_5f=_42.message.static_user.fax,_60=_42.message.static_user.email,_61=_42.message.static_user.dom,_62=_42.message.static_user.time_zone,_63=_42.message.static_user.correspondence_language,_64=_42.message.static_user.cur_code;if(_42.message.static_user.company_type=="03"){_55=dojo.byId("company_role_list");_56=dojo.byId("company_avail_list_nosend");var _65=_42.message.static_user.pending_trans_notify,_66=_42.message.static_user.legal_country,_67=_42.message.static_user.legal_type,_68=_42.message.static_user.legal_no;_45.set("value",_66);_46.set("value",_67);_47.set("value",_68);if(_65=="Y"){dj.byId("pending_trans_notify").set("checked",true);dj.byId("email").set("required",true);}if(_42.message.static_user.group_record.length>0){for(var m=1;m<=_54-1;m++){dj.byId("company_auth_level_"+m).set("value","");dj.byId("company_limit_amt_"+m).set("value","");dj.byId("company_limit_cur_code_"+m).set("value","");if(_42.message.static_user.group_record[m-1].existing_roles){var _69=_42.message.static_user.group_record[m-1].existing_roles.role.name;var _6a=_42.message.static_user.group_record[m-1].existing_roles.role.limit_amt;var _6b=_42.message.static_user.group_record[m-1].existing_roles.role.limit_cur_code;dj.byId("company_auth_level_"+m).set("value",_69);dj.byId("company_limit_amt_"+m).set("value",_6a);dj.byId("company_limit_cur_code_"+m).set("value",_6b);misys.animate("wipeIn","grp_rec_"+_42.message.static_user.group_record[m-1].group_abbv_name);}}}}if(_42.message.static_user.company_type=="01"||_42.message.static_user.company_type=="02"){_55=dojo.byId("bank_role_list");_56=dojo.byId("bank_avail_list_nosend");var _6c;if(_42.message.static_user.group_record.existing_roles!=""){var _6d=null;if(_42.message.static_user.group_record.existing_roles.role.length>0){for(var x=0;x<_42.message.static_user.group_record.existing_roles.role.length;x++){if(_42.message.static_user.group_record.existing_roles.role[x].roletype=="02"){_6d=_42.message.static_user.group_record.existing_roles.role[x].role_description;_6c=document.createElement("OPTION");_6c.innerHTML=_6d;_6c.value=_42.message.static_user.group_record.existing_roles.role[x].name;dj.byId("bank_auth_level_1").set("item",_6c);}}}else{if(_42.message.static_user.group_record.existing_roles.role.roletype=="02"){_6d=_42.message.static_user.group_record.existing_roles.role.role_description;_6c=document.createElement("OPTION");_6c.innerHTML=_6d;_6c.value=_42.message.static_user.group_record.existing_roles.role[x].name;dj.byId("bank_auth_level_1").set("item",_6c);}}}var _6e=_42.message.static_user.employee_department;_53.set("value",_6e);}_43.set("value",_57);_44.set("value",_58);_48.set("value",_59);_49.set("value",_5a);_4a.set("value",_5b);_4b.set("value",_5c);_4c.set("value",_5d);_4d.set("value",_5e);fax.set("value",_5f);_4e.set("value",_60);dom.set("value",_61);_4f.set("value",_62);_50.set("value",_63);_52.set("value",_64);var _6f;var _70;if(_56){_56.innerHTML="";}if(_55){_55.innerHTML="";}if(_42.message.static_user.company_type=="03"&&_42.message.static_user.static_company.owner_id!="2"&&_42.message.static_user.group_record[1].group_abbv_name=="global"){if(_42.message.static_user.group_record[1].existing_roles){if(_42.message.static_user.group_record[1].existing_roles.role.length>0){for(var j=0;j<_42.message.static_user.group_record[1].existing_roles.role.length;j++){_6f=_42.message.static_user.group_record[1].existing_roles.role[j].role_description;_70=_42.message.static_user.group_record[1].existing_roles.role[j].name;dojo.create("option",{text:_6f,value:_70,innerHTML:_6f,textValue:_6f},_55);}}else{dojo.byId("company_role_list").add(dojo.create("option",{text:_42.message.static_user.group_record[1].existing_roles.role.role_description,innerHTML:_42.message.static_user.group_record[1].existing_roles.role.role_description,value:_42.message.static_user.group_record[1].existing_roles.role.name}));}}}var _71;var _72;if(_42.message.static_user.company_type=="01"||_42.message.static_user.company_type=="02"){if(_42.message.static_user.group_record.existing_roles){if(_42.message.static_user.group_record.existing_roles.role.length>0){for(var y=0;y<_42.message.static_user.group_record.existing_roles.role.length;y++){if(_42.message.static_user.group_record.existing_roles.role[y].roletype=="01"){_71=_42.message.static_user.group_record.existing_roles.role[y].role_description;_72=_42.message.static_user.group_record.existing_roles.role[y].name;dojo.create("option",{text:_71,value:_72,innerHTML:_71,textValue:_71},_55);}}}else{if(_42.message.static_user.group_record.existing_roles.role.roletype=="01"){dojo.byId("bank_role_list").add(dojo.create("option",{text:_42.message.static_user.group_record.existing_roles.role.role_description,innerHTML:_42.message.static_user.group_record.existing_roles.role.role_description,value:_42.message.static_user.group_record.existing_roles.role.name}));}}}}if(_42.message.static_user.company_type=="03"&&_42.message.static_user.static_company.owner_id=="2"){var len=_42.message.static_user.group_record.length;if(_42.message.static_user.group_record.length>0){if(_42.message.static_user.group_record[len-1].existing_roles){if(_42.message.static_user.group_record[len-1].existing_roles.role.length>0){for(var z=0;z<_42.message.static_user.group_record[len-1].existing_roles.role.length;z++){_6f=_42.message.static_user.group_record[len-1].existing_roles.role[z].role_description;_70=_42.message.static_user.group_record[len-1].existing_roles.role[z].name;dojo.create("option",{text:_6f,value:_70,innerHTML:_6f,textValue:_6f},_55);}}else{dojo.byId("company_role_list").add(dojo.create("option",{text:_42.message.static_user.group_record[len-1].existing_roles.role.role_description,innerHTML:_42.message.static_user.group_record.existing_roles.role.role_description,value:_42.message.static_user.group_record.existing_roles.role.name}));}}}else{if(_42.message.static_user.group_record.existing_roles){if(_42.message.static_user.group_record.existing_roles.role.length>0){for(var zn=0;zn<_42.message.static_user.group_record.existing_roles.role.length;zn++){_6f=_42.message.static_user.group_record.existing_roles.role[zn].role_description;_70=_42.message.static_user.group_record.existing_roles.role[zn].name;dojo.create("option",{text:_6f,value:_70,innerHTML:_6f,textValue:_6f},_55);}}else{dojo.byId("company_role_list").add(dojo.create("option",{text:_42.message.static_user.group_record.existing_roles.role.role_description,innerHTML:_42.message.static_user.group_record.existing_roles.role.role_description,value:_42.message.static_user.group_record.existing_roles.role.name}));}}}}var _73;var _74;if(_42.message.static_user.company_type=="03"&&_42.message.static_user.static_company.owner_id!="2"&&_42.message.static_user.group_record[1].group_abbv_name=="global"){if(_42.message.static_user.group_record[1].avail_roles!=""){if(_42.message.static_user.group_record[1].avail_roles.role.length>0){_42.message.static_user.group_record[1].avail_roles.role.sort(_75("role_description"));for(var k=0;k<_42.message.static_user.group_record[1].avail_roles.role.length;k++){if(_42.message.static_user.group_record[1].avail_roles.role[k].roledest=="03"&&_42.message.static_user.group_record[1].avail_roles.role[k].roletype=="01"){_73=_42.message.static_user.group_record[1].avail_roles.role[k].role_description;_74=_42.message.static_user.group_record[1].avail_roles.role[k].name;dojo.create("option",{text:_73,value:_74,innerHTML:_73,textValue:_73},_56);}}}else{if(_42.message.static_user.group_record[1].avail_roles.role.roledest=="03"&&_42.message.static_user.group_record[1].avail_roles.role.roletype=="01"){dojo.byId("company_avail_list_nosend").add(dojo.create("option",{text:_42.message.static_user.group_record[1].avail_roles.role.role_description,innerHTML:_42.message.static_user.group_record[1].avail_roles.role.role_description,value:_42.message.static_user.group_record[1].avail_roles.role.name}));}}}}if(_42.message.static_user.company_type=="03"&&_42.message.static_user.static_company.owner_id=="2"){var ln=_42.message.static_user.group_record.length;if(_42.message.static_user.group_record.length>0){if(_42.message.static_user.group_record[ln-1].avail_roles!=""){if(_42.message.static_user.group_record[ln-1].avail_roles.role.length>0){_42.message.static_user.group_record[ln-1].avail_roles.role.sort(_75("role_description"));for(var mor=0;mor<_42.message.static_user.group_record[ln-1].avail_roles.role.length;mor++){if(_42.message.static_user.group_record[ln-1].avail_roles.role[mor].roledest=="03"&&_42.message.static_user.group_record[ln-1].avail_roles.role[mor].roletype=="01"){_73=_42.message.static_user.group_record[ln-1].avail_roles.role[mor].role_description;_74=_42.message.static_user.group_record[ln-1].avail_roles.role[mor].name;dojo.create("option",{value:_74,innerHTML:_73},_56);}}}else{if(_42.message.static_user.group_record[ln-1].avail_roles.role.roledest=="03"&&_42.message.static_user.group_record[ln-1].avail_roles.role.roletype=="01"){dojo.byId("company_avail_list_nosend").add(dojo.create("option",{innerHTML:_42.message.static_user.group_record[ln-1].avail_roles.role.role_description,value:_42.message.static_user.group_record[ln-1].avail_roles.role.name}));}}}}else{if(_42.message.static_user.group_record.avail_roles!=""){if(_42.message.static_user.group_record.avail_roles.role.length>0){_42.message.static_user.group_record.avail_roles.role.sort(_75("role_description"));for(var mr=0;mr<_42.message.static_user.group_record.avail_roles.role.length;mr++){if(_42.message.static_user.group_record.avail_roles.role[mr].roledest=="03"&&_42.message.static_user.group_record.avail_roles.role[mr].roletype=="01"){_73=_42.message.static_user.group_record.avail_roles.role[mr].role_description;_74=_42.message.static_user.group_record.avail_roles.role[mr].name;dojo.create("option",{value:_74,innerHTML:_73},_56);}}}else{if(_42.message.static_user.group_record.avail_roles.role.roledest=="03"&&_42.message.static_user.group_record.avail_roles.role.roletype=="01"){dojo.byId("company_avail_list_nosend").add(dojo.create("option",{innerHTML:_42.message.static_user.group_record.avail_roles.role.role_description,value:_42.message.static_user.group_record.avail_roles.role.name}));}}}}}if(_42.message.static_user.company_type=="02"){if(_42.message.static_user.group_record.avail_roles){if(_42.message.static_user.group_record.avail_roles.role.length>0){_42.message.static_user.group_record.avail_roles.role.sort(_75("role_description"));for(var n=0;n<_42.message.static_user.group_record.avail_roles.role.length;n++){if(_42.message.static_user.group_record.avail_roles.role[n].roledest=="02"&&_42.message.static_user.group_record.avail_roles.role[n].roletype=="01"){_73=_42.message.static_user.group_record.avail_roles.role[n].role_description;_74=_42.message.static_user.group_record.avail_roles.role[n].name;dojo.create("option",{text:_73,value:_74,innerHTML:_73,textValue:_73},_56);}}}else{if(_42.message.static_user.group_record.avail_roles.role[n].roledest=="02"&&_42.message.static_user.group_record.avail_roles.role.roletype=="01"){dojo.byId("company_avail_list_nosend").add(dojo.create("option",{text:_42.message.static_user.group_record[i].avail_roles.role.role_description,innerHTML:_42.message.static_user.group_record.avail_roles.role.role_description,value:_42.message.static_user.group_record.avail_roles.role.name}));}}}}if(_42.message.static_user.company_type=="01"){if(_42.message.static_user.group_record.avail_roles){if(_42.message.static_user.group_record.avail_roles.role.length>0){_42.message.static_user.group_record.avail_roles.role.sort(_75("role_description"));for(var p=0;p<_42.message.static_user.group_record.avail_roles.role.length;p++){if(_42.message.static_user.group_record.avail_roles.role[p].roledest=="01"&&_42.message.static_user.group_record.avail_roles.role[p].roletype=="01"){_73=_42.message.static_user.group_record.avail_roles.role[p].role_description;_74=_42.message.static_user.group_record.avail_roles.role[p].name;dojo.create("option",{text:_73,value:_74,innerHTML:_73,textValue:_73},_56);}}}else{if(_42.message.static_user.group_record.avail_roles.role[p].roledest=="01"&&_42.message.static_user.group_record.avail_roles.role.roletype=="01"){dojo.byId("company_avail_list_nosend").add(dojo.create("option",{text:_42.message.static_user.group_record[i].avail_roles.role.role_description,innerHTML:_42.message.static_user.group_record.avail_roles.role.role_description,value:_42.message.static_user.group_record.avail_roles.role.name}));}}}}if(_42.message.static_user.company_type=="03"){if(_42.message.static_user.entity_record){var _76,_77,_78,_79,_7a,_7b,_7c=dj.byId("default_entity");var _7d=document.createElement("OPTION");_7d.innerHTML="";_7d.value="";if(_7c){_7c.set("item",_7d);}if(_42.message.static_user.entity_record.length>0){for(var x1 in _42.message.static_user.entity_record){if(_42.message.static_user.entity_record[x1].default_entity=="Y"){var _7e=_42.message.static_user.entity_record[x1].entity_name;var opt=document.createElement("OPTION");opt.innerHTML=_7e;opt.value=_7e;_7c.set("item",opt);break;}}for(var a=0;a<_42.message.static_user.entity_record.length;a++){_78=_42.message.static_user.entity_record[a].entity_id;_79=dijit.byId("entity_flag_nosend_"+_78);_7a=dojo.byId("entity_roles_exist_nosend_"+_78);_7a.innerHTML="";_7b=_42.message.static_user.entity_record[a].entity_flag;_79.set("value",_7b);if(_7b=="Y"){if(_42.message.static_user.entity_record[a].existing_roles){if(_42.message.static_user.entity_record[a].existing_roles.role.length>0){for(var q=0;q<_42.message.static_user.entity_record[a].existing_roles.role.length;q++){_76=_42.message.static_user.entity_record[a].existing_roles.role[q].role_description;_77=_42.message.static_user.entity_record[a].existing_roles.role[q].name;dojo.create("option",{text:_76,value:_77,innerHTML:_76,textValue:_76},_7a);}}else{dojo.byId("entity_roles_exist_nosend_"+_78).add(dojo.create("option",{text:_42.message.static_user.entity_record[a].existing_roles.role.role_description,innerHTML:_42.message.static_user.entity_record[a].existing_roles.role.role_description,value:_42.message.static_user.entity_record[a].existing_roles.role.name}));}dj.byId("entity_flag_nosend_"+_78).set("checked",true);misys.animate("wipeIn","entity_roles_div_"+_78);}}else{dj.byId("entity_flag_nosend_"+_78).set("checked",false);misys.animate("wipeOut","entity_roles_div_"+_78);}}}else{if(_42.message.static_user.entity_record.default_entity=="Y"){var _7f=_42.message.static_user.entity_record.entity_name;var _80=document.createElement("OPTION");_80.innerHTML=_7f;_80.value=_7f;_7c.set("item",_80);}_78=_42.message.static_user.entity_record.entity_id;_7a=dojo.byId("entity_roles_exist_nosend_"+_78);_7a.innerHTML="";_7b=_42.message.static_user.entity_record.entity_flag;if(_7b=="Y"){if(_42.message.static_user.entity_record.existing_roles){if(_42.message.static_user.entity_record.existing_roles.role.length>0){for(var r=0;r<_42.message.static_user.entity_record.existing_roles.role.length;r++){_76=_42.message.static_user.entity_record.existing_roles.role[r].role_description;_77=_42.message.static_user.entity_record.existing_roles.role[r].name;dojo.create("option",{text:_76,value:_77,innerHTML:_76,textValue:_76},_7a);}dj.byId("entity_flag_nosend_"+_78).set("checked",true);misys.animate("wipeIn","entity_roles_div_"+_78);}else{dojo.byId("entity_roles_exist_nosend_"+_78).add(dojo.create("option",{text:_42.message.static_user.entity_record.existing_roles.role.role_description,innerHTML:_42.message.static_user.entity_record.existing_roles.role.role_description,value:_42.message.static_user.entity_record.existing_roles.role.name}));}}}else{dj.byId("entity_flag_nosend_"+_78).set("checked",false);misys.animate("wipeOut","entity_roles_div_"+_78);}}var _81,_82,_83,_84,_85=dj.byId("default_entity");if(_42.message.static_user.entity_record.length>0){for(var b=0;b<_42.message.static_user.entity_record.length;b++){_78=_42.message.static_user.entity_record[b].entity_id;_79=dijit.byId("entity_flag_nosend_"+_78);_83=dojo.byId("entity_roles_avail_nosend_"+_78);_84=_42.message.static_user.entity_record[b].entity_flag;_79.set("value",_84);if(_84=="Y"){_83.innerHTML="";if(_42.message.static_user.entity_record[b].avail_roles){if(_42.message.static_user.entity_record[b].avail_roles.role.length>0){_42.message.static_user.entity_record[b].avail_roles.role.sort(_75("role_description"));for(var s=0;s<_42.message.static_user.entity_record[b].avail_roles.role.length;s++){_81=_42.message.static_user.entity_record[b].avail_roles.role[s].role_description;_82=_42.message.static_user.entity_record[b].avail_roles.role[s].name;dojo.create("option",{text:_81,value:_82,innerHTML:_81,textValue:_81},_83);}}else{dojo.byId("entity_roles_avail_nosend_"+_78).add(dojo.create("option",{text:_42.message.static_user.entity_record[b].avail_roles.role.role_description,innerHTML:_42.message.static_user.entity_record[b].avail_roles.role.role_description,value:_42.message.static_user.entity_record[b].avail_roles.role.name}));}dj.byId("entity_flag_nosend_"+_78).set("checked",true);misys.animate("wipeIn","entity_roles_div_"+_78);}}else{dj.byId("entity_flag_nosend_"+_78).set("checked",false);misys.animate("wipeOut","entity_roles_div_"+_78);}}}else{if(_42.message.static_user.entity_record.default_entity=="Y"){var tmp=_42.message.static_user.entity_record.entity_name;var op=document.createElement("OPTION");op.innerHTML=tmp;op.value=tmp;_85.set("item",op);}_78=_42.message.static_user.entity_record.entity_id;_83=dojo.byId("entity_roles_avail_nosend_"+_78);_84=_42.message.static_user.entity_record.entity_flag;if(_84=="Y"){_83.innerHTML="";if(_42.message.static_user.entity_record.avail_roles){if(_42.message.static_user.entity_record.avail_roles.role.length>0){_42.message.static_user.entity_record.avail_roles.role.sort(_75("role_description"));for(var t=0;t<_42.message.static_user.entity_record.avail_roles.role.length;t++){_81=_42.message.static_user.entity_record.avail_roles.role[t].role_description;_82=_42.message.static_user.entity_record.avail_roles.role[t].name;dojo.create("option",{text:_81,value:_82,innerHTML:_81,textValue:_81},_83);}dj.byId("entity_flag_nosend_"+_78).set("checked",true);}else{dojo.byId("entity_roles_avail_nosend_"+_78).add(dojo.create("option",{text:_42.message.static_user.entity_record.avail_roles.role.role_description,innerHTML:_42.message.static_user.entity_record.avail_roles.role.role_description,value:_42.message.static_user.entity_record.avail_roles.role.name}));}}}else{dj.byId("entity_flag_nosend_"+_78).set("checked",false);misys.animate("wipeOut","entity_roles_div_"+_78);}}}}if(_42.message.static_user.company_type=="03"){if(_42.message.static_user.entitlement_record){var _86;var _87=false;for(var t2=0;t2<_42.message.static_user.entitlement_record.length;t2++){_86=_42.message.static_user.entitlement_record[t2].entitlement_id;if(_42.message.static_user.entitlement_code!==null&&_42.message.static_user.entitlement_code!==undefined&&_42.message.static_user.entitlement_code===_42.message.static_user.entitlement_record[t2].entitlement_code&&dj.byId("entitlement_flag_nosend_"+_86)!==null&&dj.byId("entitlement_flag_nosend_"+_86)!==undefined){_87=true;}}for(var t1=0;t1<_42.message.static_user.entitlement_record.length;t1++){_86=_42.message.static_user.entitlement_record[t1].entitlement_id;var _88;var _89=_42.message.static_user.entitlement_record[t1].entitlement_code;var _8a=_42.message.static_user.entitlement_record[t1].default_subsidiary;var _8b=_42.message.static_user.entitlement_record[t1].subsidiary_List;if(_8b!==undefined&&_8b.length>0){_88=_8b.substring(1,_8b.length-1);}if(_42.message.static_user.entitlement_code!==null&&_42.message.static_user.entitlement_code!==undefined&&_42.message.static_user.entitlement_code===_42.message.static_user.entitlement_record[t1].entitlement_code&&dj.byId("entitlement_flag_nosend_"+_86)!==null&&dj.byId("entitlement_flag_nosend_"+_86)!==undefined){dj.byId("entitlement_flag_nosend_"+_86).set("checked",true);misys.animate("wipeIn","userSubsidiaryTable_"+_86);if(_88!==""&&_88!==undefined){if(dijit.byId("subsidiary_flag_nosend_".concat(_88))){dijit.byId("subsidiary_flag_nosend_".concat(_88)).set("checked",true);dijit.byId("subsidiary_radio_flag_nosend_".concat(_88)).set("checked",true);dijit.byId("default_subsidiary").set("value",_8a);}dijit.byId("entitlement_code").set("value",_89);}}else{if(_42.message.static_user.entitlement_code===""){dj.byId("entitlement_flag_nosend_"+_86).set("checked",false);dj.byId("entitlement_flag_nosend_"+_86).set("disabled",false);misys.animate("wipeOut","userSubsidiaryTable_"+_86);if(_88!==""&&_88!==undefined){dijit.byId("subsidiary_flag_nosend_".concat(_88)).set("checked",false);dijit.byId("subsidiary_radio_flag_nosend_".concat(_88)).set("checked",false);}}else{if(_42.message.static_user.entitlement_code!==_42.message.static_user.entitlement_record[t1].entitlement_code&&!_87){dj.byId("entitlement_flag_nosend_"+_86).set("disabled",false);}else{if(dj.byId("entitlement_flag_nosend_"+_86)!==null&&dj.byId("entitlement_flag_nosend_"+_86)){dj.byId("entitlement_flag_nosend_"+_86).set("disabled",true);}}}}}}}}dj.byId("xhrDialog")?dj.byId("xhrDialog").hide():"";};function _75(_8c){return function(a,b){if(a[_8c]>b[_8c]){return 1;}else{if(a[_8c]<b[_8c]){return -1;}}return 0;};};function _8d(_8e){if(_8e&&_8e.items!==""){var _8f=_8e.store_id;var _90=dj.byId(_8f);if(_90&&_90.store){var _91=new dojo.data.ItemFileWriteStore({data:{"identifier":"id","items":[]}});var ctr=0;dojo.forEach(_8e.items,function(_92){var _93=_92;_93.id=ctr++;_91.newItem(_93);});_90.setStore(_91);_90.resize();}}};d.mixin(m,{selectEntityBeforeBank:function(){if(dj.byId("entity")&&dj.byId("entity").get("value")==""&&Object.keys(misys._config.entityBankMap).length>1){var id=this.id;var _94=function(){dj.byId(id).set("value","");dojox.fx.smoothScroll({node:document.getElementById("entity"),win:window}).play();};m.dialog.show("ERROR",m.getLocalization("selectEntityBeforeBank"),"",_94);}},populateBankAsPerEntity:function(_95){var _96=dj.byId(_95);var _97=Object.keys(misys._config.entityBankMap).map(function(itm){return misys._config.entityBankMap[itm];});var _98={"identifier":"value","items":[]},_99=new d.data.ItemFileWriteStore({data:_98});if(_96){_96.store=null;for(var i=0;i<_97.length;i++){if(dj.byId("entity")&&_97[i].indexOf(dj.byId("entity").get("value"))>-1){_99.newItem({"value":Object.keys(misys._config.entityBankMap).map(function(itm){return misys._config.entityBankMap[itm];})[i][0],"name":Object.keys(misys._config.entityBankMap)[i]});}}}_96.store=_99;var _9a=dj.byId(_95)?dj.byId(_95).get("value"):"";var _9b=_96.store._arrayOfAllItems;var _9c=false;for(i=0;i<_9b.length;i++){if(_9b[i]&&_9b[i].value!=""&&_9b[i].value==_9a){_9c=true;break;}}if(!_9c){dj.byId(_95).set("value","");}},populateReferences:function(){var _9d=this.get("displayedValue"),_9e="_",_9f=this.id.split(_9e),_a0=_9f[0]+_9e+_9f[1],_a1=dj.byId(_a0+"_customer_reference"),_a2=dj.byId("applicant_reference")||dj.byId("applicant_reference_hidden")||dj.byId("seller_reference")||dj.byId("drawer_reference")||dj.byId("buyer_reference"),_a3=dj.byId("entity")?dj.byId("entity").get("value"):"",_a4=this.get("value")+"_"+_a3,_a5=(m._config.customerReferences&&m._config.customerReferences[_a4])?m._config.customerReferences[_a4]:"",_a6={"identifier":"id","items":[]},_a7=new d.data.ItemFileWriteStore({data:_a6});if(dj.byId(_a0+"_name")){dj.byId(_a0+"_name").set("value",_9d);}if(_a1){_a1.store=null;if(_a5&&_a5.length!==0){for(var i=0,_10=(_a5.length)/2;i<_10;i++){_a7.newItem({"id":_a5[2*i+1],"name":_a5[2*i]});}}_a1.store=_a7;if(_a7._arrayOfAllItems.length===1){_a1.set("displayedValue",_a7._arrayOfAllItems[0].name[0]);}else{if(_a2){if(_a2.get("value")!==""&&_a5.indexOf(_a2.get("value"))!==-1){_a1.set("value",_a2.get("value"));}else{_a1.item=null;_a2.set("value","");_a1.set("displayedValue","");}}}}if(dj.byId("product_code")&&dj.byId("product_code").get("value")==="IO"&&dj.byId("buyer_bank_bic")){dj.byId("buyer_bank_bic").set("value",m._config.isoCodes[this.get("value")]);}if(dj.byId("product_code")&&dj.byId("product_code").get("value")==="EA"&&dj.byId("seller_bank_bic")){dj.byId("seller_bank_bic").set("value",m._config.isoCodes[this.get("value")]);}},updateBusinessDate:function(){var _a8=m._config.bankBusinessDate;var _a9;var _aa;if(this.get("value")!=""){var _ab=parseInt(misys._config.businessDateForBank[this.get("value")][0].value.substring(0,4),10);var _ac=parseInt(misys._config.businessDateForBank[this.get("value")][0].value.substring(5,7),10);var _ad=parseInt(misys._config.businessDateForBank[this.get("value")][0].value.substring(8,10),10);_aa=new Date(_ab,_ac-1,_ad);_a9=d.date.locale.format((_aa),{selector:"date"});m._config.bankBusinessDate=misys._config.businessDateForBank[this.get("value")][0].name;if(m._config.bankBusinessDate!=_a8){m.dialog.show("CUSTOM-NO-CANCEL",m.getLocalization("changeInBusinessDates"),"Warning",function(){});if(dj.byId("appl_date")){dj.byId("appl_date").set("value",_a9);dojo.byId("appl_date_view_row").childNodes[1].innerHTML=dj.byId("appl_date").get("value");}}}},checkBeneficiaryNicknameDiv:function(){if(misys._config.beneficiarynickname==="true"){if(dj.byId("beneficiary_nickname")&&dj.byId("beneficiary_nickname").get("value")!==""&&d.byId("beneficiarynickname")&&d.byId("beneficiary_nickname_row")){d.style("ben_label","display","inline-block");d.byId("beneficiarynickname").innerHTML=dj.byId("beneficiary_nickname").get("value");d.byId("beneficiarynickname").value=dj.byId("beneficiary_nickname").get("value");d.style("beneficiarynickname","display","inline");m.animate("fadeIn",d.byId("beneficiary_nickname_row"));}else{if(d.byId("beneficiarynickname")){d.style("beneficiarynickname","display","none");m.animate("fadeOut",d.byId("beneficiary_nickname_row"));}}}},checkBeneficiaryNicknameOnFormLoad:function(){if(misys._config.beneficiarynickname==="true"&&dj.byId("beneficiary_nickname")&&dj.byId("beneficiary_nickname").get("value")!==""&&dj.byId("beneficiary_nickname").get("value")!=="null"&&d.byId("beneficiarynickname")){m.animate("fadeIn",d.byId("beneficiarynickname"));d.style("beneficiarynickname","display","inline");d.byId("beneficiarynickname").innerHTML=dj.byId("beneficiary_nickname").get("value");}else{m.animate("wipeOut",d.byId("beneficiary_nickname_row"));}},setCurrency:function(_ae,arr,_af){var _b0=dj.byId(_ae),_b1=d.isArray(arr)?arr:[arr],_b2,_b3,_b4;if(_b0&&_b0.get("value")!==""&&_b0.state!=="Error"){_b2=_b0.get("value");d.forEach(_b1,function(id){_b3=dj.byId(id);if(_b3){_b4=d.cldr.monetary.getData(_b2);if(dj.byId("product_code")&&((dj.byId("product_code").get("value")==="IP")||(dj.byId("product_code").get("value")==="IN")||(dj.byId("product_code").get("value")==="PO")||(dj.byId("product_code").get("value")==="SO"))){_b0.set("readOnly",true);}var _b5={round:_b4.round,places:_b4.places,max:999999999999.99,min:0.01};if(_b4.places===2){_b5={round:_b4.round,places:_b4.places,min:0,max:999999999999.99};}else{if(_b4.places===3){_b5={round:_b4.round,places:_b4.places,min:0,max:99999999999.999};}else{if(_b4.places===0){_b5={round:_b4.round,places:_b4.places,min:0,max:999999999999};}}}d.mixin(_b5,_af);_b3.set("constraints",_b5);_b3.set("value",_b3.get("value"));}});}},setTnxAmt:function(amt){var _b6=dj.byId("tnx_amt");if(_b6){_b6.set("value",amt);}},setTnxCurCode:function(_b7){var _b8=dj.byId("tnx_cur_code");if(_b8){_b8.set("value",_b7);}},amendTransaction:function(){var _b9=("inc_amt"===this.get("id"))?dj.byId("dec_amt"):dj.byId("inc_amt");if(!isNaN(this.get("value"))){_b9.set("disabled",true);}else{this.set("disabled",false);_b9.set("disabled",false);}_1c(this);},amendTransactionBank:function(){var _ba=("inc_amt_value"===this.get("id"))?dj.byId("dec_amt_value"):dj.byId("inc_amt_value");if(!isNaN(this.get("value"))){_ba.set("disabled",true);}else{this.set("disabled",false);_ba.set("disabled",false);}_1c(this);},amendTransactionLiabAmt:function(){dj.byId("lc_liab_amt").set("value",dj.byId("org_lc_cur_code_liab_amt").value);},setPaymentDescriptionForCAD:function(){if(dojo.byId("date-value_description").innerHTML!==""&&dojo.byId("request_value_code").value==="SPOT"&&dojo.byId("payment_cur_code").value==="CAD"&&dojo.byId("applicant_cur_code").value==="USD"){dojo.byId("date-value_description").innerText=m.getLocalization("valueOneBusinessDayCADdeal");}else{if(dojo.byId("date-value_description").innerHTML!==""&&dojo.byId("request_value_code").value==="SPOT"&&(dojo.byId("payment_cur_code").value!=="CAD"||dojo.byId("applicant_cur_code").value!=="USD")){dojo.byId("date-value_description").innerText=m.getLocalization("valueTwoBusinessDay");}}},toggleAmendmentFields:function(){var _bb=dj.byId("inc_amt"),_bc=dj.byId("dec_amt");if(this.get("checked")){_bb.set("value","");_bb.set("disabled",true);_bc.set("disabled",false);_1c(_bc);}else{_bb.onBlur();_bc.onBlur();}},updateSubTnxTypeCode:function(){var _bd=misys._config.productCode.toLowerCase(),_be=dj.byId("inc_amt"),_bf=dj.byId("dec_amt"),_c0=dj.byId(_bd+"_release_flag"),_c1=dj.byId("sub_tnx_type_code"),_c2="03",_c3=_be?dojo.number.parse(_be.get("value")):"",_c4=_bf?dojo.number.parse(_bf.get("value")):"";if(_c0&&_c0.get("checked")){_c2="05";}else{if(_be&&!isNaN(_c3)&&_c3!==""){_c2="01";}else{if(_bf&&!isNaN(_c4)&&_c4!==""){_c2="02";}}}if(_c1){_c1.set("value",_c2);}},enableBeneficiaryFields:function(){var ids=["beneficiary_address_line_1","beneficiary_address_line_2","beneficiary_dom","beneficiary_address_line_4"];d.forEach(ids,function(id){var _c5=dj.byId(id);if(_c5){_c5.set("disabled",false);_c5.set("readOnly",false);}});},toggleProdStatCodeFields:function(){var _c6=dj.byId("prod_stat_code").get("value"),_c7=dj.byId("action_req_code"),_c8=["tnx_amt"],_c9=["tnx_amt","latest_answer_date"];if(_c7){if(_c6==="01"||_c6==="18"){_c7.set("readOnly",true);_c7.reset();}else{if(_c6==="12"){_c7.set("value","12");_c7.set("readOnly",true);m.toggleFields(false,["latest_answer_date"],_c8,true);_c8=["tnx_amt"];}else{if(_c6==="26"){_c7.set("value","26");_c7.set("readOnly",true);m.toggleFields(false,["latest_answer_date"],_c8,true);_c8=["tnx_amt"];}else{if(_c6==="78"||_c6==="79"||(_c6==="98"&&dj.byId("product_code")&&dj.byId("product_code").get("value")==="TF")){_c7.set("value","07");_c7.set("readOnly",true);}else{if(_c6==="A9"){_c7.reset();_c7.set("readOnly",false);_c9=["tnx_amt"];_c8=[];}else{if(_c6==="31"){var _ca=dj.byId("product_code").get("value");if(dj.byId("product_code")&&(_ca==="LC"||_ca==="SI"||_ca==="BG"||_ca==="SG")){_c7.set("value","");_c7.set("readOnly",true);}else{_c7.set("value","03");_c7.set("readOnly",true);}}else{if(_c6==="81"){_c7.set("value","05");_c7.set("readOnly",true);}else{_c7.set("readOnly",false);_c9=["latest_answer_date"];}}}}}}}}var _cb=(_c6==="08"&&dj.byId("tnx_type_code")&&dj.byId("tnx_type_code").get("value")==="03")?true:!(_c6!=="01"&&_c6!=="07"&&_c6!=="04"&&_c6!=="05"&&_c6!=="12"&&_c6!=="26"&&_c6!=="13"&&_c6!=="14"&&_c6!=="15"&&_c6!=="A9");m.toggleFields(_cb,_c9,_c8);},toggleGuaranteeText:function(){var _cc=this.get("value"),_cd=d.byId("document-editor"),_ce=dj.byId("bg_document");m.toggleFields(_cc==="03",null,["bg_text_type_details"]);if(_cc==="04"){m.animate("fadeIn",_cd,function(){if(!_ce){var _cf=d.byId("bg_document");_ce=new dj.Editor({id:"bg_document",name:"bg_document",rows:_d,cols:_e,maxSize:_f,plugins:["undo","redo","|","bold","italic","underline","strikethrough","|","insertOrderedList","insertUnorderedList","|","indent","outdent","|","justifyLeft","justifyRight","justifyCenter","justifyFull","||",{name:"dijit._editor.plugins.FontChoice",command:"fontName"},{name:"m.editor.plugins.ProductFieldChoice",command:"misysEditorPluginsProductFieldChoice",product:"BG"}]},_cf);var _d0=d.byId("rteContent");var _d1=_d0.innerHTML;_d1.replaceAll("&lt;","<");_d1.replaceAll("&gt;",">");_d1.replaceAll("&amp;","&");_ce.set("value",(_d1||""));}});}else{m.animate("fadeOut",_cd,function(){if(_ce){_ce.set("value","");}});}},setBuyerReference:function(){var _d2=dj.byId("buyer_reference")||dj.byId("buyer_reference_hidden");if(_d2){_d2.set("value",this.get("value"));}},setSellerReference:function(){var _d3=dj.byId("seller_reference")||dj.byId("seller_reference_hidden");if(_d3){_d3.set("value",this.get("value"));}},setApplicantReference:function(){var _d4=dj.byId("applicant_reference")||dj.byId("applicant_reference_hidden");if(_d4){_d4.set("value",this.get("value"));}},getMaturityDate:function(){var _d5=dj.byId("tenor"),_d6=_d5.get("value"),_d7=dj.byId("iss_date").get("value"),_d8=dj.byId("maturity_date"),_d9="";if(this.id==="maturity_date"){_d9=_d7?d.date.difference(_d7,this.get("value"),"day"):_d6;_d5.set("value",_d9);}else{if(_d6!==""&&_d7){_d8.set("value",d.date.add(_d7,"day",_d6));}}},initFTCounterparties:function(){var _da=this.get("value"),_db;if(_da!==dj.byId("ft_cur_code").get("value")){if(d.query(".widgetContainer *[id^='counterparty_details_document_id_']").length>0){_db=this;m.dialog.show("CONFIRMATION",m.getLocalization("modifyFundTransferCurrencyConfirmation"),"",function(){_23(_db);});}else{_23(this);}}},disableNonAcceptanceFields:function(){if(dj.byId("term_code").get("value")==="01"){this.set("checked",false);}},setCreditAvailBy:function(){var _dc=this.get("value"),_dd=dj.byId("credit_available_with_bank_name"),_de=dj.byId("fakeform1").get("value").cr_avl_by_code,_df,_e0,_e1=dj.byId("credit_available_with_bank_address_line_1");m.toggleFields(_dc===m._config.other,["credit_available_with_bank_address_line_1","credit_available_with_bank_address_line_2","credit_available_with_bank_dom","credit_available_with_bank_address_line_4"]);_df=_dd.get("value");_e0=_e1.get("value");if((!(_df!=""&&_e0!="")&&(dj.byId("formLoad")&&dj.byId("formLoad").get("value")==="false")||!dj.byId("formLoad"))||(dj.byId("template_id")&&dj.byId("template_id").getValue()!=="")){_dd.set("value",this.get("displayedValue"));}var _e2=(!_df&&!dj.byId("tenor_maturity_date").get("value")&&!dj.byId("tenor_days").get("value")&&!dj.byId("tenor_period").get("value")&&!dj.byId("tenor_from_after").get("value")&&!dj.byId("tenor_days_type").get("value")&&!m._config.firstPageLoad);if(_e2){if(_de){_27(_de,_dc);}}},getSwiftBankDetails:function(_e3,_e4,_e5,_e6,_e7,_e8,_e9,_ea,_eb,_ec){var _ed=false;if(!_ec){_ec="";}if(!_e6){_e6=[_e8+"name",_e8+"address_line_1",_e8+"address_line_2",_e8+"dom",_e8+"contact_name",_e8+"phone",_e8+"country"];}if(!_e7){_e7=[_e8+"name",_e8+"address_line_1",_e8+"country"];}var _ee=dj.byId(_e4);var _ef=dj.byId(_e5);if(_ee&&(_ee.get("value")!=="")){d.forEach(_e6,function(_f0){if(dj.byId(_f0)){if(_e9){dj.byId(_f0).set("value","",false);}if(_eb){dj.byId(_f0).set("readOnly",true);}}});if(_ea){d.forEach(_e7,function(_f1){if(dj.byId(_f1)){m.toggleRequired(_f1,true);}});}if(_e9&&(_ee.validate())){var _f2="";var _f3="";if(_ee.get("value")){_f2=_ee.get("value");}if(_ef&&(_ef.get("value"))){_f3=_ef.get("value");}m.xhrPost({url:misys.getServletURL("/screen/AjaxScreen/action/GetSwiftBankDetails"),content:{bicCode:_f2,brchCode:_f3,country:_ec,customerBanks:_e3},sync:true,handleAs:"json",load:function(_f4,_f5){var _f6=_f4;_ed=_f4.valid;if(_ed){var _f7=[_f6.bankName,_f6.bankAddressLine1,_f6.bankAddressLine2,_f6.bankDom,_f6.bankContactName,_f6.bankPhone,_f6.bankCountry];d.forEach(_e6,function(_f8,i){if(dj.byId(_f8)){if(i<7){dj.byId(_f8).set("value",_f7[i],false);}}});}else{var _f9="";if((_ee&&(_ee.get("value")!==""))){_ee.focus();_f9=m.getLocalization("swiftValidationFailed",[_ee.get("value")]);_ee.set("value","");_ee.set("state","Error");dijit.hideTooltip(_ee.domNode);dijit.showTooltip(_f9,_ee.domNode,0);}}},customError:function(_fa,_fb){console.warn("getSwiftBankDetails error");}});}else{if(dijit.byId("bank_iso_code")){setTimeout(function(){dijit.byId("bank_iso_code").set("readOnly",false);},600);}}}else{d.forEach(_e6,function(_fc){if(dj.byId(_fc)){if(_eb){dj.byId(_fc).set("readOnly",false);}}});if(_ea){d.forEach(_e7,function(_fd){if(dj.byId(_fd)){m.toggleRequired(_fd,false);}});}if(d.byId(_e8+"iso_code_row")&&d.byId(_e8+"iso_code_row").parentNode&&d.byId(_e8+"iso_code_row").parentNode.id){var _fe=d.byId(_e8+"iso_code_row").parentNode.id;if(dj.byId(_fe)){var _ff=dj.byId(_fe).get("title");if(_ff.indexOf("*")!==-1){_ff=_ff.substring(_ff.indexOf(">")+1,_ff.lastIndexOf("<"));if(_ff.indexOf("*")!==-1){_ff=_ff.substring(_ff.indexOf("*")+1);dj.byId(_fe).set("title",_ff);}else{dj.byId(_fe).set("title",_ff);}}}}}},getIFSCCodeDetails:function(_100,_101,_102,_103,_104,_105,_106){var _107=false;if(!_101){_101=[_103+"ifsc_name",_103+"ifsc_address_line_1",_103+"ifsc_address_line_2",_103+"ifsc_city"];}if(!_102){_102=[_103+"ifsc_code",_103+"ifsc_name"];}var _108=dj.byId(_100);if(_108&&(_108.get("value")!=="")){d.forEach(_101,function(node){if(dj.byId(node)){if(_104){dj.byId(node).set("value","",false);}if(_106){dj.byId(node).set("readOnly",true);}}});if(_105){d.forEach(_102,function(node){if(dj.byId(node)){m.toggleRequired(node,true);}});}if(_104&&(_108.validate())){var _109="";if(_108.get("value")){_109=_108.get("value");}m.xhrPost({url:misys.getServletURL("/screen/AjaxScreen/action/GetIFSCCodeDetails"),content:{ifscCode:_109,paramId:"P701"},sync:true,handleAs:"json",load:function(_10a,args){var _10b=_10a;_107=_10a.valid;if(_107){var _10c=[_10b.bankName,_10b.bankAddressLine1,_10b.bankAddressLine2,_10b.city];d.forEach(_101,function(node,i){if(dj.byId(node)){if(i<7){dj.byId(node).set("value",_10c[i],false);}}});_108.set("value",_10b.bankIFSCCode);}else{var _10d="";if((_108&&(_108.get("value")!==""))){_108.focus();_10d=m.getLocalization("ifscCodeValidationFailed",[_108.get("value")]);_108.set("value","");_108.set("state","Error");dijit.hideTooltip(_108.domNode);dijit.showTooltip(_10d,_108.domNode,0);}}},customError:function(_10e,args){console.warn("getSwiftBankDetails error");}});}else{setTimeout(function(){dijit.byId("bank_iso_code").set("readOnly",false);},600);}}else{d.forEach(_101,function(node){if(dj.byId(node)){if(_106){dj.byId(node).set("readOnly",false);}}});if(_105){d.forEach(_102,function(node){if(dj.byId(node)){m.toggleRequired(node,false);}});}if(d.byId(_103+"ifsc_code_row")&&d.byId(_103+"ifsc_code_row").parentNode&&d.byId(_103+"ifsc_code_row").parentNode.id){var _10f=d.byId(_103+"ifsc_code_row").parentNode.id;if(dj.byId(_10f)){var _110=dj.byId(_10f).get("title");if(_110.indexOf("*")!==-1){_110=_110.substring(_110.indexOf(">")+1,_110.lastIndexOf("<"));if(_110.indexOf("*")!==-1){_110=_110.substring(_110.indexOf("*")+1);dj.byId(_10f).set("title",_110);}else{dj.byId(_10f).set("title",_110);}}}}}},setSwiftBankDetailsForOnBlurEvent:function(_111,_112,_113,_114,_115,_116,_117,_118,_119,_11a){if(m._config.isBankDetailsPopulated){m.getSwiftBankDetails(_111,_112,_113,_114,_115,_116,false,_118,_119,_11a);}else{m.getSwiftBankDetails(_111,_112,_113,_114,_115,_116,_117,_118,_119,_11a);}m._config.isBankDetailsPopulated=false;},setIFSCCodeDetailsForOnBlurEvent:function(_11b,_11c,_11d,_11e,_11f,_120,_121){m.getIFSCCodeDetails(_11b,_11c,_11d,_11e,_11f,_120,_121);},toggleDraftTerm:function(_122){var _123=(!dj.byId("tenor_maturity_date").get("value")&&!dj.byId("tenor_days").get("value")&&!dj.byId("tenor_period").get("value")&&!dj.byId("tenor_from_after").get("value")&&!dj.byId("tenor_days_type").get("value")&&!m._config.firstPageLoad);if(!d.isString(_122)){_122=this.get("value");}m.toggleFields(_122==="02",null,["tenor_maturity_date"],_123);m.toggleFields(_122==="03",null,["tenor_days","tenor_period","tenor_from_after","tenor_days_type"],_123);m.toggleFields(_122==="05",null,["draft_term"],_123);if(dj.byId("tenor_days_type").get("value")!=="99"){dj.byId("tenor_type_details").set("value","");}if(dj.byId("tenor_days_type")){var _124=dj.byId("tenor_days_type").get("value")==="99";m.toggleFields((_124),null,["tenor_type_details"]);}},initDraweeFields:function(){var _125=false;if(dj.byId("cr_avl_by_code_2")){_125=dj.byId("cr_avl_by_code_2").get("checked");}var _126=false;if(dj.byId("cr_avl_by_code_3")){_126=dj.byId("cr_avl_by_code_3").get("checked");}if(!_125&&!_126){dj.byId("drawee_details_bank_name").set("value","");if(dj.byId("drawee_details_bank_iso_code")){dj.byId("drawee_details_bank_iso_code").set("value","");}if(dj.byId("drawee_details_bank_address_line_1")){dj.byId("drawee_details_bank_address_line_1").set("value","");dj.byId("drawee_details_bank_address_line_2").set("value","");dj.byId("drawee_details_bank_dom").set("value","");dj.byId("drawee_details_bank_address_line_4").set("value","");}if(d.byId("drawee_details_bank_img")){m.animate("fadeOut","drawee_details_bank_img");}}else{if(d.byId("drawee_details_bank_img")){m.animate("fadeIn","drawee_details_bank_img");}}m.toggleFields(_125||_126,["drawee_details_bank_address_line_2","drawee_details_bank_dom","drawee_details_bank_address_line_4"],["drawee_details_bank_name","drawee_details_bank_address_line_1","drawee_details_bank_iso_code"],true);if(dj.byId("mode")&&dj.byId("mode").get("value")==="RELEASE"){m.toggleRequired("drawee_details_bank_address_line_1",false);}var _127=dj.byId("product_code").get("value");if(dj.byId("product_code")&&(_127==="LC"||_127==="SI")&&(_125||_126)){if(dj.byId("drawee_details_bank_iso_code")&&dj.byId("drawee_details_bank_name")&&dj.byId("drawee_details_bank_address_line_1")){m.toggleRequired("drawee_details_bank_iso_code",false);m.toggleRequired("drawee_details_bank_name",false);m.toggleRequired("drawee_details_bank_address_line_1",false);}}},togglePaymentDraftAt:function(){var _128=dj.byId("tenor_type_1"),_129=dj.byId("tenor_type_2"),_12a=dj.byId("tenor_type_3"),_12b=dj.byId("draft_term"),_12c=this.get("value"),_12d=d.byId("payment-draft"),_12e=d.byId("draft-term"),_12f=dj.byId("credit_available_with_bank_type");if(!_128||!_129||!_12a){return;}_128.set("disabled",true);_129.set("disabled",true);_12a.set("disabled",true);if(m._config.firstPageLoad&&_12c!=="05"){_12b.set("value","");}if(_12c!=="05"&&d.style(_12d,"opacity")!==1){m.animate("fadeOut",_12e);m.animate("fadeIn",_12d);}switch(_12c){case "01":_128.set("disabled",false);_128.set("checked",true);m.toggleDraftTerm("01");break;case "02":_129.set("disabled",false);_12a.set("disabled",false);if(dj.byId("tenor_maturity_date").get("displayedValue")!==""){_129.set("checked",true);m.toggleDraftTerm("02");_12b.set("value",dj.byId("tenor_maturity_date").get("displayedValue"));break;}else{_12a.set("checked",true);m.toggleDraftTerm("03");break;}break;case "03":_128.set("disabled",false);_129.set("disabled",false);_12a.set("disabled",false);if(_128.get("checked")){_128.set("checked",true);m.toggleDraftTerm("01");break;}else{if(dj.byId("tenor_maturity_date").get("displayedValue")!==""){_129.set("checked",true);m.toggleDraftTerm("02");break;}else{_12a.set("checked",true);m.toggleDraftTerm("03");break;}}break;case "06":_128.set("disabled",true);_129.set("disabled",true);_12a.set("disabled",true);m.toggleDraftTerm("01");break;case "04":_129.set("disabled",false);_12a.set("disabled",false);if(dj.byId("tenor_maturity_date").get("displayedValue")!==""){_129.set("checked",true);m.toggleDraftTerm("02");break;}else{_12a.set("checked",true);m.toggleDraftTerm("03");break;}break;case "05":m.animate("fadeOut",_12d);m.animate("fadeIn",_12e);_128.set("checked",false);_129.set("checked",false);_12a.set("checked",false);m.toggleDraftTerm("05");break;default:break;}var _130="01";if(dj.byId("tnx_type_code")){_130=dj.byId("tnx_type_code").get("value");}if(_12f&&!(_130==="03")){_27(_12c,_12f.get("value"));}m.initDraweeFields();},calcMaturityDate:function(){if(dj.byId("tenor_days").get("value")!==""&&!isNaN(dj.byId("tenor_days").get("value"))&&dj.byId("tenor_period").get("value")!==""&&dj.byId("tenor_from_after").get("value")!==""){var _131=dj.byId("tenor_base_date").get("value");var _132=dj.byId("tenor_days").get("value");var _133=dj.byId("tenor_period").get("value");var _134,_135=null;var _136;switch(_133){case "D":_134="day";break;case "W":_134="week";break;case "M":_134="month";break;case "Y":_134="year";break;default:break;}var _137=dj.byId("tenor_from_after").get("value");if(dj.byId("tenor_base_date").get("displayedValue")!==""){_135=d.date.add(_131,_134,_132);if(_137==="F"){_135=d.date.add(_135,"day",-1);}_136=new Date(_135.getTime());_136=d.date.locale.format(_136,{selector:"date"});dj.byId("tenor_maturity_date").set("displayedValue",_136);dj.byId("tenor_maturity_date").set("disabled",true);}else{dj.byId("tenor_maturity_date").set("displayedValue","");}}},toggleAllTenorFields:function(){var _138=["tenor_days","tenor_period","tenor_from_after","tenor_base_date","tenor_maturity_date","tenor_days_type"];if(m._config.isBank){_138=["tenor_days","tenor_period","tenor_from_after","tenor_base_date","tenor_maturity_date","tenor_days_type"];}var _139=dj.byId("tenor_type_2").get("checked");var _13a=dj.byId("tenor_type_3").get("checked");var _13b=dj.byId("term_code")?dj.byId("term_code").get("value"):"";if(_139){m.toggleFields(_139,["tenor_days_type"],_138,_139,_139);if(dojo.query(_2)[0].innerHTML.indexOf("*")===-1){dojo.query(_2)[0].innerHTML="<span class='required-field-symbol'>*</span>"+dojo.query(_2)[0].innerHTML;}m.toggleRequired("tenor_days_type",true);m.toggleRequired("tenor_days",true);m.toggleRequired("tenor_period",true);m.toggleRequired("tenor_from_after",true);m.toggleRequired("tenor_maturity_date",true);m.toggleRequired("tenor_maturity_date",false);m.toggleRequired("tenor_base_date",false);if(_13b==="03"){m.animate("fadeIn",d.byId("boe"));}}else{if(_13a){m.toggleFields(_13a,["tenor_days_type"],_138,_13a,_13a);if(dojo.query(_2)[0].innerHTML.indexOf("*")===-1){dojo.query(_2)[0].innerHTML="<span class='required-field-symbol'>*</span>"+dojo.query(_2)[0].innerHTML;}m.toggleRequired("tenor_days_type",true);m.toggleRequired("tenor_days",true);m.toggleRequired("tenor_period",true);m.toggleRequired("tenor_from_after",true);if(dj.byId("tenor_type_2").get("checked")){m.toggleRequired("tenor_base_date",false);m.toggleRequired("tenor_maturity_date",false);}else{m.toggleRequired("tenor_base_date",true);m.toggleRequired("tenor_maturity_date",true);}if(_13b==="03"){m.animate("fadeIn",d.byId("boe"));}}else{dojo.query(_2)[0].innerHTML=m.getLocalization("tenorPeriod");m.toggleRequired("tenor_days_type",false);m.toggleRequired("tenor_days",false);m.toggleRequired("tenor_period",false);m.toggleRequired("tenor_from_after",false);m.toggleRequired("tenor_maturity_date",false);dj.byId("tenor_type_details").set("displayedValue","");dj.byId("tenor_type_details").set("disabled",true);dj.byId("tenor_maturity_date").set("displayedValue","");dj.byId("tenor_days").set("displayedValue","");dj.byId("tenor_days").set("disabled",true);dj.byId("tenor_period").set("displayedValue","");dj.byId("tenor_period").set("disabled",true);dj.byId("tenor_from_after").set("displayedValue","");dj.byId("tenor_from_after").set("disabled",true);dj.byId("tenor_days_type").set("displayedValue","");dj.byId("tenor_days_type").set("disabled",true);dj.byId("tenor_base_date").set("displayedValue","");dj.byId("tenor_base_date").set("disabled",true);if(_13b==="03"){m.animate("fadeOut",d.byId("boe"));dj.byId("boe_flag").set("checked",false);}}}},toggleBankPaymentDraftAt:function(){var _13c,_13d=["draft_term","drawee_details_bank_name","drawee_details_bank_address_line_1","drawee_details_bank_address_line_2","drawee_details_bank_dom","drawee_details_bank_address_line_4","drawee_details_bank_iso_code","drawee_details_bank_reference"];d.forEach(_13d,function(id){_13c=dj.byId(id);if(_13c){_13c.reset();}});},setDraftTerm:function(){var _13e=dj.byId("draft_term"),_13f=misys._config.tenorPeriodLabels,_140=misys._config.tenorFromAfterLabels,_141=misys._config.tenorDaysTypeLabels,_142,_143,days,_144;if(_13e){if(!(dj.byId("cr_avl_by_code_5")&&dj.byId("cr_avl_by_code_5").get("checked"))){_13e.set("value","");}if(dj.byId("tenor_type_1")&&dj.byId("tenor_type_1").get("checked")){_13e.set("value",m.getLocalization("tenorSight"));}else{if((dj.byId("tenor_type_2")&&dj.byId("tenor_type_2").get("checked"))&&dj.byId("tenor_maturity_date").get("displayedValue")!==""){_13e.set("value",dj.byId("tenor_maturity_date").get("displayedValue"));}else{_142=dj.byId("tenor_period").get("value");_143=dj.byId("tenor_from_after").get("value");days=dj.byId("tenor_days").get("value");_144=dj.byId("tenor_days_type").get("value");if(!isNaN(days)&&days!==0||(days===0&&_144==="07")){if(_144!=="99"){_13e.set("value",days+" "+_13f[_142]+" "+_140[_143]+" "+_141[_144]);}else{_13e.set("value",days+" "+_13f[_142]+" "+_140[_143]+" "+dj.byId("tenor_type_details").get("value"));}}}}}},setDraftDaysReadOnly:function(){this.set("readOnly",!dj.byId("tenor_type_3").get("checked"));},checkIrrevocableFlag:function(){var _145=dj.byId("ntrf_flag"),_146=dj.byId("stnd_by_lc_flag");if(!this.get("checked")&&_145&&_146&&!_145.get("checked")&&_146.get("checked")){this.set("checked",true);m.showTooltip(m.getLocalization("irrevocableStandByError"),this.domNode,["before"]);}},checkNonTransferableFlag:function(){var _147=dj.byId("irv_flag"),_148=dj.byId("stnd_by_lc_flag");if(!this.get("checked")&&_147&&_148&&!_147.get("checked")&&_148.get("checked")){this.set("checked",false);_147.set("checked",true);m.showTooltip(m.getLocalization("irrevocableStandByError"),_147.domNode,["before"]);}},checkStandByFlag:function(){var _149=dj.byId("irv_flag"),_14a=dj.byId("ntrf_flag");if(this.get("checked")&&_14a&&_149&&!_14a.get("checked")&&!_149.get("checked")){_149.set("checked",true);m.showTooltip(m.getLocalization("irrevocableStandByError"),_149.domNode,["before"]);}},resetConfirmationCharges:function(){if(m._config.charge_splitting_lc){if(dj.byId("open_chrg_brn_by_code_3")){if(!dj.byId("cfm_chrg_brn_by_code_3").get("checked")){dj.byId("cfm_chrg_brn_by_code_1").set("checked",false);dj.byId("cfm_chrg_brn_by_code_2").set("checked",this.get("value")!=="03");dj.byId("cfm_chrg_brn_by_code_3").set("checked",false);}if(dj.byId("cfm_inst_code_3").get("checked")){dj.byId("cfm_chrg_brn_by_code_1").set("checked",false);dj.byId("cfm_chrg_brn_by_code_2").set("checked",this.get("value")!=="03");dj.byId("cfm_chrg_brn_by_code_3").set("checked",false);dj.byId("cfm_chrg_applicant").set("disabled",true).set("value","").set("required",false);dj.byId("cfm_chrg_beneficiary").set("disabled",true).set("value","").set("required",false);}}}else{if(dj.byId("cfm_chrg_brn_by_code_1")){dj.byId("cfm_chrg_brn_by_code_1").set("checked",false);}if(dj.byId("cfm_chrg_brn_by_code_2")){dj.byId("cfm_chrg_brn_by_code_2").set("checked",this.get("value")!=="03");}}var _14b=(this.get("value")==="01")?"fadeIn":"fadeOut";m.animate(_14b,d.byId("confirmation-charges"));if(m._config.swift2018Enabled){if(this.get("value")==="01"||this.get("value")==="02"){m.animate("fadeIn",d.byId("requested-conf-party"));m.toggleFields(true,["req_conf_party_flag"],null,null,true);dj.byId("req_conf_party_flag").set("value",_3);}else{m.animate("fadeOut",d.byId("requested-conf-party"));m.toggleFields(false,["req_conf_party_flag","requested_confirmation_party_name","requested_confirmation_party_address_line_1","requested_confirmation_party_address_line_2","requested_confirmation_party_dom","requested_confirmation_party_address_line_4","requested_confirmation_party_iso_code"],null,null,false);}}},resetConfirmationChargesLC:function(){var _14c;var _14d;if(document.getElementById("_userType")){_14c=document.getElementById("_userType").getAttribute("value");}var _14e=(_14c!=="03"&&_14c!=="06")?"bank":"customer";if(dj.byId("cfm_chrg_brn_by_code_1")){dj.byId("cfm_chrg_brn_by_code_1").set("checked",false);}if(dj.byId("cfm_chrg_brn_by_code_2")){dj.byId("cfm_chrg_brn_by_code_2").set("checked",this.get("value")!=="03");}var _14f=(this.get("value")==="01")?"fadeIn":"fadeOut";m.animate(_14f,d.byId("confirmation-charges"));var _150=dj.byId("req_conf_party_flag");var _151=dj.byId("req_conf_party_flag_filtered");var _152="01";if(dj.byId("tnx_type_code")){_152=dj.byId("tnx_type_code").get("value");}var _153="01";if(dj.byId("prod_stat_code")){_153=dj.byId("prod_stat_code").get("value");}if(_151&&((_152==="15"&&_153==="08")||_152==="03")){_150=_151;}if(this.get("value")==="01"||this.get("value")==="02"){_150.set("disabled",false);_150.set("value","");}else{if(_14e==="bank"){m.toggleRequired(_150,false);if((_152==="15"&&_153==="08")||_152==="03"){var _154=dj.byId("req_conf_party_flag");m.toggleRequired(_154,false);}_14d=dj.byId("req_conf_party_flag").parentTab;m.resetTabState(dijit.byId(_14d));}_150.set("disabled",true);_150.set("value","");d.byId(_4).style.display="none";}},validateBankEntry:function(_155){var _156=dj.byId(_155+"_name");var _157=dj.byId(_155+"_address_line_1");var _158=dj.byId(_155+"_iso_code");if(_156.get("value")==""&&_158.get("value")==""&&_157.get("value")==""){m.setRequiredFields([_156,_157],true);_156.focus();_157.focus();return false;}else{if(_158.get("value")==""&&(_156.get("value")==""||_157.get("value")=="")){var _159=_156.get("value")==""?_156:_157;m.setRequiredFields([_159],true);_159.focus();return false;}else{return true;}}},resetBankRequiredFields:function(){var _15a=this.get("value");var _15b;var _15c;if(_15a==="Other"){_15b=dj.byId("advising_bank_name").parentTab;m.resetTabState(dijit.byId(_15b));_15b=dj.byId("advise_thru_bank_name").parentTab;m.resetTabState(dijit.byId(_15b));m.setRequiredFields(["advising_bank_name","advising_bank_address_line_1","advise_thru_bank_name","advise_thru_bank_address_line_1"],false);d.byId(_4).style.display="block";m.toggleFields(true,["requested_confirmation_party_name","requested_confirmation_party_address_line_1","requested_confirmation_party_address_line_2","requested_confirmation_party_dom","requested_confirmation_party_address_line_4","requested_confirmation_party_iso_code"],null,null,true);}else{if(_15a===_3){_15c=dj.byId("advising_bank_iso_code").get("value");_15b=dj.byId("advise_thru_bank_name").parentTab;m.resetTabState(dijit.byId(_15b));if(_15c!=="null"&&_15c.length>0){m.setRequiredFields(["advising_bank_name","advising_bank_address_line_1"],false);}else{m.setRequiredFields(["advising_bank_name","advising_bank_address_line_1"],true);}m.setRequiredFields(["advise_thru_bank_name","advise_thru_bank_address_line_1"],false);d.byId(_4).style.display="none";m.toggleFields(false,["requested_confirmation_party_name","requested_confirmation_party_address_line_1","requested_confirmation_party_address_line_2","requested_confirmation_party_dom","requested_confirmation_party_address_line_4","requested_confirmation_party_iso_code"],null,null,false);}else{if(_15a==="Advise Thru Bank"){_15c=dj.byId("advise_thru_bank_iso_code").get("value");_15b=dj.byId("advising_bank_name").parentTab;m.resetTabState(dijit.byId(_15b));if(_15c!=="null"&&_15c.length>0){m.setRequiredFields(["advise_thru_bank_name","advise_thru_bank_address_line_1"],false);}else{m.setRequiredFields(["advise_thru_bank_name","advise_thru_bank_address_line_1"],true);}m.setRequiredFields(["advising_bank_name","advising_bank_address_line_1"],false);d.byId(_4).style.display="none";m.toggleFields(false,["requested_confirmation_party_name","requested_confirmation_party_address_line_1","requested_confirmation_party_address_line_2","requested_confirmation_party_dom","requested_confirmation_party_address_line_4","requested_confirmation_party_iso_code"],null,null,false);}else{_15b=dj.byId("advising_bank_name").parentTab;m.resetTabState(dijit.byId(_15b));_15b=dj.byId("advise_thru_bank_name").parentTab;m.resetTabState(dijit.byId(_15b));m.setRequiredFields(["advising_bank_name","advising_bank_address_line_1","advise_thru_bank_name","advise_thru_bank_address_line_1"],false);d.byId(_4).style.display="none";m.toggleFields(false,["requested_confirmation_party_name","requested_confirmation_party_address_line_1","requested_confirmation_party_address_line_2","requested_confirmation_party_dom","requested_confirmation_party_address_line_4","requested_confirmation_party_iso_code"],null,null,false);}}}},resetTabState:function(tab){if(tab){var _15d=tab.get("title");if(_15d.indexOf("<img")!==-1&&_15d.indexOf("*")!==-1){_15d=_15d.replace("*","");_15d=_15d.substring(0,_15d.indexOf("<img"));}else{if(_15d.indexOf("*")!==-1){_15d=_15d.replace("*","");}}tab.set("title",_15d);}},resetRequestedConfirmationParty:function(){var _15e;var _15f;if(document.getElementById("_userType")){_15e=document.getElementById("_userType").getAttribute("value");}var _160=(_15e!=="03"&&_15e!=="06")?"bank":"customer";if(dijit.byId("cfm_inst_code_1")&&!dijit.byId("cfm_inst_code_1").get("value")&&!dijit.byId("cfm_inst_code_2").get("value")){dj.byId("req_conf_party_flag").set("disabled",true);if(dj.byId("req_conf_party_flag_filtered")){dj.byId("req_conf_party_flag_filtered").set("disabled",true);m.toggleRequired(dj.byId("req_conf_party_flag_filtered"),false);_15f=dj.byId("req_conf_party_flag_filtered").parentTab;m.resetTabState(dijit.byId(_15f));}if(_160==="bank"){m.toggleRequired(dj.byId("req_conf_party_flag"),false);_15f=dj.byId("req_conf_party_flag").parentTab;m.resetTabState(dijit.byId(_15f));}}else{if(dj.byId("req_conf_party_flag")){dj.byId("req_conf_party_flag").set("disabled",false);}if(dj.byId("req_conf_party_flag_filtered")){dj.byId("req_conf_party_flag_filtered").set("disabled",false);}}},refreshUIforBGAmendment:function(){var _161=dj.byId("prod_stat_code").get("value");var _162=dj.byId("tnx_type_code").get("value");if((_162==="15"&&_161==="08")||(_162==="15"&&_161==="31")||_162==="03"){if(_162==="03"){if(d.byId("amd_no_date_display_div")){d.byId("amd_no_date_display_div").style.display="none";dj.byId("amd_date").set("disabled",false);}}if((_162==="15"&&_161==="08")||(_162==="15"&&_161==="31")||(_162==="03"&&_161==="08")){if(d.byId("amd_no_date_display_div")){d.byId("amd_no_date_display_div").style.display="block";dj.byId("amd_date").set("disabled",false);}if(d.byId("amd_no_date_bg_display_div")){d.byId("amd_no_date_bg_display_div").style.display="block";dj.byId("amd_date").set("disabled",false);}}}else{if(d.byId("amd_no_date_bg_display_div")){d.byId("amd_no_date_bg_display_div").style.display="none";dj.byId("amd_date").set("disabled",false);}}},refreshUIforAmendment:function(){var _163=dj.byId("prod_stat_code").get("value");var _164=dj.byId("tnx_type_code").get("value");var _165=dj.byId("sub_tnx_type_code")?dj.byId("sub_tnx_type_code").get("value"):"";if((_164==="15"&&_163==="08")||(_164==="15"&&_163==="31")||_164==="03"){if(d.byId("amd_chrg_brn_by_code_div")){d.byId("amd_chrg_brn_by_code_div").style.display="block";}if(d.byId("cfm_chrg_brn_by_code_div")){d.byId("cfm_chrg_brn_by_code_div").style.display="block";}if(_164==="03"){if(d.byId("amd_no_date_display_div")){d.byId("amd_no_date_display_div").style.display="none";dj.byId("amd_date").set("disabled",false);}}if((_164==="15"&&_163==="08")||(_164==="15"&&_163==="31")||(_164==="03"&&_163==="08")){if(d.byId("amd_no_date_display_div")){d.byId("amd_no_date_display_div").style.display="block";dj.byId("amd_date").set("disabled",false);}}m.toggleFields(false,["advising_bank_name","advising_bank_address_line_1","advising_bank_address_line_2","advising_bank_dom","advising_bank_address_line_4","advising_bank_iso_code","advising_bank_reference"],null,true,null);m.toggleFields(false,["advise_thru_bank_name","advise_thru_bank_address_line_1","advise_thru_bank_address_line_2","advise_thru_bank_dom","advise_thru_bank_address_line_4","advise_thru_bank_iso_code","advise_thru_bank_reference"],null,true,null);if(d.byId("req_conf_party_flag_filtered_div")){d.byId("req_conf_party_flag_filtered_div").style.display="block";}if(dj.byId("req_conf_party_flag_filtered")){dj.byId("req_conf_party_flag_filtered").set("value",dj.byId("req_conf_party_flag").getValue());}if(d.byId("req_conf_party_flag_div")){d.byId("req_conf_party_flag_div").style.display="none";}m.resetRequestedConfirmationParty();if(dj.byId("req_conf_party_flag_filtered")){m.setRequiredFields(["req_conf_party_flag_filtered"],true);}if(dj.byId("amd_chrg_brn_by_code_1")&&!dj.byId("amd_chrg_brn_by_code_1").get("value")&&!dj.byId("amd_chrg_brn_by_code_2").get("value")&&!dj.byId("amd_chrg_brn_by_code_4").get("value")&&(dj.byId("amd_chrg_brn_by_code_5")&&!dj.byId("amd_chrg_brn_by_code_5").get("value"))&&!dj.byId("amd_chrg_brn_by_code_9").get("value")){dj.byId("amd_chrg_brn_by_code_2").set("checked",true);}if(d.byId("advising_bank_name_img")){m.animate("wipeOut",d.byId("advising_bank_name_img"));}if(d.byId("advise_thru_bank_name_img")){m.animate("wipeOut",d.byId("advise_thru_bank_name_img"));}m.resetFormFields(["advising_bank_name","advising_bank_address_line_1","advising_bank_address_line_2","advising_bank_dom","advising_bank_address_line_4","advising_bank_iso_code","advising_bank_reference"]);m.resetFormFields(["advise_thru_bank_name","advise_thru_bank_address_line_1","advise_thru_bank_address_line_2","advise_thru_bank_dom","advise_thru_bank_address_line_4","advise_thru_bank_iso_code","advise_thru_bank_reference"]);if(m._config.narrativeDescGoodsDataStore||m._config.narrativeDocsReqDataStore||m._config.narrativeAddInstrDataStore||m._config.narrativeSpBeneDataStore||m._config.narrativeSpRecvbankDataStore){m._config.currentNarrativeDescGoodsDataStore=m._config.narrativeDescGoodsDataStore;m._config.currentNarrativeDocsReqDataStore=m._config.narrativeDocsReqDataStore;m._config.currentNarrativeAddInstrDataStore=m._config.narrativeAddInstrDataStore;m._config.currentNarrativeSpBeneDataStore=m._config.narrativeSpBeneDataStore;m._config.currentNarrativeSpRecvbankDataStore=m._config.narrativeSpRecvbankDataStore;}if(d.byId("amend_narratives_display")){d.byId("amend_narratives_display").style.display="block";}if(d.byId(_5)){d.byId(_5).style.display="none";}}else{if(_164==="15"){if(d.byId("amd_chrg_brn_by_code_div")){d.byId("amd_chrg_brn_by_code_div").style.display="none";}if(d.byId("cfm_chrg_brn_by_code_div")){d.byId("cfm_chrg_brn_by_code_div").style.display="none";}if(d.byId("amd_no_date_display_div")){dj.byId("amd_date").set("disabled",true);d.byId("amd_no_date_display_div").style.display="none";}m.toggleFields(true,["advising_bank_name","advising_bank_address_line_1","advising_bank_address_line_2","advising_bank_dom","advising_bank_address_line_4","advising_bank_iso_code","advising_bank_reference"],null,true,null);m.toggleFields(true,["advise_thru_bank_name","advise_thru_bank_address_line_1","advise_thru_bank_address_line_2","advise_thru_bank_dom","advise_thru_bank_address_line_4","advise_thru_bank_iso_code","advise_thru_bank_reference"],null,true,null);if(d.byId("req_conf_party_flag_filtered_div")){d.byId("req_conf_party_flag_filtered_div").style.display="none";}if(d.byId("req_conf_party_flag_div")){d.byId("req_conf_party_flag_div").style.display="block";}if(d.byId("advising_bank_name_img")){m.animate("wipeIn",d.byId("advising_bank_name_img"));}if(d.byId("advise_thru_bank_name_img")){m.animate("wipeIn",d.byId("advise_thru_bank_name_img"));}m.resetRequestedConfirmationParty();if(dj.byId("req_conf_party_flag_filtered")){m.setRequiredFields(["req_conf_party_flag_filtered"],false);}if(d.byId("amend_narratives_display")){d.byId("amend_narratives_display").style.display="none";}if(d.byId(_5)){d.byId(_5).style.display="block";}if(m._config.currentNarrativeDescGoodsDataStore){m._config.narrativeDescGoodsDataStore=m._config.currentNarrativeDescGoodsDataStore;m._config.narrativeDocsReqDataStore=m._config.currentNarrativeDocsReqDataStore;m._config.narrativeAddInstrDataStore=m._config.currentNarrativeAddInstrDataStore;m._config.narrativeSpBeneDataStore=m._config.currentNarrativeSpBeneDataStore;m._config.narrativeSpRecvbankDataStore=m._config.currentNarrativeSpRecvbankDataStore;}else{m._config.narrativeDescGoodsDataStore="";m._config.narrativeDocsReqDataStore="";m._config.narrativeAddInstrDataStore="";m._config.narrativeSpBeneDataStore="";m._config.narrativeSpRecvbankDataStore="";if(document.getElementById("narrativeDescriptionGoods")){document.getElementById("narrativeDescriptionGoods").innerHTML="";}if(document.getElementById("narrativeDocumentsRequired")){document.getElementById("narrativeDocumentsRequired").innerHTML="";}if(document.getElementById("narrativeAdditionalInstructions")){document.getElementById("narrativeAdditionalInstructions").innerHTML="";}if(document.getElementById("narrativeSpecialBeneficiary")){document.getElementById("narrativeSpecialBeneficiary").innerHTML="";}if(document.getElementById("narrativeSpecialReceivingBank")){document.getElementById("narrativeSpecialReceivingBank").innerHTML="";}}}else{if((_164==="13"&&!(_165==="12"||_165==="19"))||_164!=="13"){if(d.byId("amend_narratives_display")){d.byId("amend_narratives_display").style.display="none";}if(d.byId(_5)){d.byId(_5).style.display="block";}}}}},refreshUIforAmendmentMO:function(){var _166=dj.byId("prod_stat_code")?dj.byId("prod_stat_code").get("value"):null;var _167=dj.byId("tnx_type_code")?dj.byId("tnx_type_code").get("value"):null;if((_167==="15"&&_166==="08")||(_167==="15"&&_166==="31")||_167==="03"){if(d.byId("amd_chrg_brn_by_code_div")){d.byId("amd_chrg_brn_by_code_div").style.display="block";}if(d.byId("cfm_chrg_brn_by_code_div")){d.byId("cfm_chrg_brn_by_code_div").style.display="block";}if(d.byId("amd_no_date_display_mo_div")){d.byId("amd_no_date_display_mo_div").style.display="block";}if(d.byId("amd_date_display_mo_div")){d.byId("amd_date_display_mo_div").style.display="block";}if(dj.byId("amd_chrg_brn_by_code_1")&&!dj.byId("amd_chrg_brn_by_code_1").get("value")&&!dj.byId("amd_chrg_brn_by_code_2").get("value")&&!dj.byId("amd_chrg_brn_by_code_4").get("value")&&(dj.byId("amd_chrg_brn_by_code_5")&&!dj.byId("amd_chrg_brn_by_code_5").get("value"))&&!dj.byId("amd_chrg_brn_by_code_9").get("value")){dj.byId("amd_chrg_brn_by_code_2").set("checked",true);}if(m._config.narrativeDescGoodsDataStore||m._config.narrativeDocsReqDataStore||m._config.narrativeAddInstrDataStore||m._config.narrativeSpBeneDataStore||m._config.narrativeSpRecvbankDataStore){m._config.currentNarrativeDescGoodsDataStore=m._config.narrativeDescGoodsDataStore;m._config.currentNarrativeDocsReqDataStore=m._config.narrativeDocsReqDataStore;m._config.currentNarrativeAddInstrDataStore=m._config.narrativeAddInstrDataStore;m._config.currentNarrativeSpBeneDataStore=m._config.narrativeSpBeneDataStore;m._config.currentNarrativeSpRecvbankDataStore=m._config.narrativeSpRecvbankDataStore;}if(document.getElementById("amd_no")){document.getElementById("amd_no").value=m._config.amendmentNumber;}if(d.byId("amend_narratives_display")){d.byId("amend_narratives_display").style.display="block";}if(d.byId(_5)){d.byId(_5).style.display="none";}}else{if(_167==="15"||_167==="13"){if(d.byId("amd_chrg_brn_by_code_div")){d.byId("amd_chrg_brn_by_code_div").style.display="none";}if(d.byId("cfm_chrg_brn_by_code_div")){d.byId("cfm_chrg_brn_by_code_div").style.display="none";}if(d.byId("amd_no_date_display_mo_div")){d.byId("amd_no_date_display_mo_div").style.display="none";}if(d.byId("amd_date_display_mo_div")){d.byId("amd_date_display_mo_div").style.display="none";}if(d.byId("amend_narratives_display")){d.byId("amend_narratives_display").style.display="none";}if(d.byId(_5)){d.byId(_5).style.display="block";}if(document.getElementById("amd_no")){document.getElementById("amd_no").value="";}if(m._config.currentNarrativeDescGoodsDataStore){m._config.narrativeDescGoodsDataStore=m._config.currentNarrativeDescGoodsDataStore;m._config.narrativeDocsReqDataStore=m._config.currentNarrativeDocsReqDataStore;m._config.narrativeAddInstrDataStore=m._config.currentNarrativeAddInstrDataStore;m._config.narrativeSpBeneDataStore=m._config.currentNarrativeSpBeneDataStore;m._config.narrativeSpRecvbankDataStore=m._config.currentNarrativeSpRecvbankDataStore;}else{m._config.narrativeDescGoodsDataStore="";m._config.narrativeDocsReqDataStore="";m._config.narrativeAddInstrDataStore="";m._config.narrativeSpBeneDataStore="";m._config.narrativeSpRecvbankDataStore="";if(document.getElementById("narrativeDescriptionGoods")){document.getElementById("narrativeDescriptionGoods").innerHTML="";}if(document.getElementById("narrativeDocumentsRequired")){document.getElementById("narrativeDocumentsRequired").innerHTML="";}if(document.getElementById("narrativeAdditionalInstructions")){document.getElementById("narrativeAdditionalInstructions").innerHTML="";}if(document.getElementById("narrativeSpecialBeneficiary")){document.getElementById("narrativeSpecialBeneficiary").innerHTML="";}if(document.getElementById("narrativeSpecialReceivingBank")){document.getElementById("narrativeSpecialReceivingBank").innerHTML="";}}}}},resetFormFields:function(_168){d.forEach(_168,function(id,_169){var item=dj.byId(id);if(item){item.reset();}});},setRequiredFields:function(_16a,_16b){d.forEach(_16a,function(id,_16c){var item=dj.byId(id);item.set("required",_16b);});},compareTransactionMaster:function(_16d,type){var _16e=false;for(var i=0;i<_16d.length;i++){var _16f=dj.byId(_16d[i]);var _170=dj.byId("org_"+_16d[i]);if((_170&&!_16f)||(_16f&&!_170)){_16e=true;break;}else{if(type==="TXT"){if(m.trim(_170.get("value"))!==m.trim(_16f.get("value"))){_16e=true;break;}}else{if(type==="CHECK"){var _171=(_16f.get("checked")===true)?"Y":"N";if(_170.get("value")!==_171){_16e=true;break;}}}}}return _16e;},compareTransactionMasterRadio:function(_172){var _173=false;for(var i=0;i<_172.length;i++){var _174=dj.byId(_172[i]);if(_174&&_174.get("value")!==false){var _175=dj.byId("org_"+_172[i]);if(!_175||(_175.get("value")!==_174.get("value"))){_173=true;break;}}}return _173;},amendChargesLC:function(){var _176=dj.byId("narrative_amend_charges_other");var _177=this.get("id");if(_176){if(_177==="amd_chrg_brn_by_code_4"||_177==="amd_chrg_brn_by_code_5"){_176.set("value","");_176.set("disabled",false);}else{_176.set("value","");_176.set("disabled",true);}}},calculateAmendTransactionAmount:function(){var _178=(dj.byId("tnxtype")&&dj.byId("tnxtype").get("value")==="03")||(dj.byId("tnx_type_code")&&dj.byId("tnx_type_code").get("value")==="03")||(dj.byId("prod_stat_code")&&(dj.byId("prod_stat_code").get("value")==="08"||dj.byId("prod_stat_code").get("value")==="31"));var _179=dj.byId("tnx_amt");if(_178){var _17a=dj.byId("inc_amt");if(_17a){_17a.set("value","");}var _17b=dj.byId("dec_amt");if(_17b){_17b.set("value","");}var _17c=dj.byId("lc_amt"),_17d=dj.byId("org_lc_amt"),_17e=d.number.parse(_17d.get("displayedValue")),_17f=d.number.parse(_17c.get("displayedValue"));_17e=!isNaN(_17e)?_17e:0;_17f=!isNaN(_17f)?_17f:0;var _180=_17f-_17e;if(_180>0){if(_179){_179.set("value",_180);}if(_17a){_17a.set("value",_180);}}else{if(_180<0){if(_179){_179.set("value",(-1*_180));}if(_17b){_17b.set("value",(-1*_180));}}}}else{_179.set("value",d.number.parse(dj.byId("lc_amt").get("value")));}},checkConfirmationCharges:function(){if(dj.byId("cfm_inst_code_3").get("checked")){this.set("checked",false);m.showTooltip(m.getLocalization("confirmationInstructionsError"),d.byId("cfm_chrg_brn_by_code_1"),["before"]);}if(m._config.charge_splitting_lc){if(dj.byId("open_chrg_brn_by_code_3")){if(dj.byId("cfm_chrg_brn_by_code_3").get("checked")){dj.byId("cfm_chrg_applicant").set("disabled",false).set("required",true);dj.byId("cfm_chrg_beneficiary").set("disabled",false).set("required",true);}else{dj.byId("cfm_chrg_applicant").set("disabled",true).set("value","").set("required",false);dj.byId("cfm_chrg_beneficiary").set("disabled",true).set("value","").set("required",false);}}}},checkApplBeneCharges:function(){if(dj.byId("open_chrg_brn_by_code_3")){if(dj.byId("open_chrg_brn_by_code_3").get("checked")){dj.byId("open_chrg_applicant").set("disabled",false).set("required",true);dj.byId("open_chrg_beneficiary").set("disabled",false).set("required",true);}else{dj.byId("open_chrg_applicant").set("disabled",true).set("value","").set("required",false);dj.byId("open_chrg_beneficiary").set("disabled",true).set("value","").set("required",false);}}if(dj.byId("corr_chrg_brn_by_code_3")){if(dj.byId("corr_chrg_brn_by_code_3").get("checked")){dj.byId("corr_chrg_applicant").set("disabled",false).set("required",true);dj.byId("corr_chrg_beneficiary").set("disabled",false).set("required",true);}else{dj.byId("corr_chrg_applicant").set("disabled",true).set("value","").set("required",false);dj.byId("corr_chrg_beneficiary").set("disabled",true).set("value","").set("required",false);}}},toggleRenewalDetails:function(_181){if(dj.byId("is_bank")&&dj.byId("is_bank").get("value")==="N"){m.toggleFields(this.get("checked"),["advise_renewal_flag","rolling_renewal_flag","renew_amt_code_1","renew_amt_code_2","final_expiry_date"],["renew_on_code","renew_for_nb","renew_for_period"],_181);}else{m.toggleFields(this.get("checked"),["advise_renewal_flag","rolling_renewal_flag","renew_amt_code_1","renew_amt_code_2","projected_expiry_date","final_expiry_date"],["renew_on_code","renew_for_nb","renew_for_period"],_181);}if(!this.get("checked")){dj.byId("renew_on_code").set("value","");dj.byId("renew_for_nb").set("value","");dj.byId("renew_for_period").set("value","");dj.byId("advise_renewal_flag").set("checked",false);dj.byId("rolling_renewal_flag").set("checked",false);dj.byId("renew_amt_code_1").set("checked",false);dj.byId("renew_amt_code_2").set("checked",false);if(dj.byId("projected_expiry_date")){dj.byId("projected_expiry_date").set("value",null);}dj.byId("final_expiry_date").set("value",null);}},resetRenewalDetails:function(_182,node){if(dj.byId("is_bank")&&dj.byId("is_bank").get("value")==="N"){m.toggleFields(node.get("checked"),["advise_renewal_flag","rolling_renewal_flag","renew_amt_code_1","renew_amt_code_2","final_expiry_date"],["renew_on_code","renew_for_nb","renew_for_period"],_182);}else{m.toggleFields(node.get("checked"),["advise_renewal_flag","rolling_renewal_flag","renew_amt_code_1","renew_amt_code_2","projected_expiry_date","final_expiry_date"],["renew_on_code","renew_for_nb","renew_for_period"],_182);}if(!node.get("checked")){dj.byId("renew_on_code").set("value","");dj.byId("renew_for_nb").set("value","");dj.byId("renew_for_period").set("value","");dj.byId("advise_renewal_flag").set("checked",false);dj.byId("rolling_renewal_flag").set("checked",false);dj.byId("renew_amt_code_2").set("checked",true);if(dj.byId("projected_expiry_date")){dj.byId("projected_expiry_date").set("value",null);}dj.byId("final_expiry_date").set("value",null);}},toggleDependentFields:function(node,_183,_184){var _185=dj.byId(node),_186=dj.byId(_183);if(_186.get("displayedValue")!==""&&_185.get("displayedValue")!==""){_185.set("displayedValue","");_185.set("readOnly",true);if(_184){m.setFieldState(_185,false);m.showTooltip(_184,_185.domNode);}}else{_185.set("readOnly",false);_186.set("readOnly",false);}},updateOutstandingAmount:function(_187,_188,_189){var _18a=dj.byId("prod_stat_code").get("value");if(_189==null){var _18b=dj.byId("product_code").get("value").toLowerCase();_189=dj.byId(_18b+"_amt");}var _18c=dojo.number.parse(_188.get("value"))||_189.get("value");var _18d;if(dj.byId("tnx_amt")&&dj.byId("tnx_amt").get("value")){_18d=isNaN(dojo.number.parse(dj.byId("tnx_amt").get("value")))?0:dj.byId("tnx_amt").get("value");}else{_18d=0;}var _18e,_18f=dj.byId("tnx_type_code"),_190=dj.byId("sub_tnx_type_code");if(_18a==="04"||_18a==="14"||_18a==="15"||_18a==="13"||_18a==="05"){_18e=_18c-_18d;_18e=(_18e>0)?_18e:0;_187.set("value",_18e);}else{if(_18f&&_190&&_18f.get("value")!="03"&&_190.get("value")!="05"&&isNaN(_187.get("value"))){_187.set("value",_18c);}else{if((_18a=="07"||_18a==="03")&&!isNaN(_187.get("value"))){}else{_187.set("value",_18c);}}}},confirmAccountDelete:function(_191,url,type){var mess=(type==="bill")?"deleteBillPayeeConfirmation":"deleteTransactionConfirmation";m.dialog.show("CONFIRMATION",m.getLocalization(mess,[_191]),"",function(){document.location.href=url;});},populateStaticDataDialog:function(_192,_193,_194,_195,_196){var url="/screen/AjaxScreen/action/GetStaticDataPopup",_197={};_197.option=_192;_197.operation=_193;_197.fields=_194;_197.popupType="ADD_DATA";if(_196){_197.productcode=_196;}m.dialog.populate(_192,m.getServletURL(url),null,_197);},getStaticDataURL:function(_198,_199,_19a,_19b,_19c,_19d){var url=["/screen/"],_19e=_19c||"StaticDataListPopup";url.push(_19e,"?option=",_198,"&operation=",_199,"&fields=",_19b,"&formname=",_19a);if(_19d){url.push(_6,_19d);}return m.getServletURL(url.join(""));},showEntityDialog:function(_19f,_1a0,_1a1,_1a2,_1a3,_1a4,_1a5,_1a6,_1a7,_1a8,_1a9,_1aa,_1ab,_1ac){var url="/screen/EntityListPopup",_1ad={},_1ae="/screen/AjaxScreen/action/GetEntities",_1af={},grid,_1b0,_1b1,_1b2;if(_1aa){_1af.closeParent=_1aa;_1ad.closeParent=_1aa;}if(_1ac){_1ad.wildcard=_1ac;_1af.wildcard=_1ac;}if(_1a0){_1af.fields=_1a0;_1ad.fields=_1a0;}if(_1a1){_1ad.productcode=_1a1;_1af.productcode=_1a1;}else{_1ad.productcode="*";_1af.productcode=_1a1;}if(_1a8){_1ad.subproductcode=_1a8;_1af.subproductcode=_1a8;}if(_1a3){_1ad.company=_1a3;_1af.company=_1a3;}if(_1a2){_1ad.entitycontext=_1a2;_1af.entitycontext=_1a2;}if(_1a4){_1ad.featureid=_1a4;_1af.featureid=_1a4;}if(_1a5){_1ad.option=_1a5;_1af.option=_1a5;}if(_1ab){_1ad.popupPrefix=_1ab;_1af.popupPrefix=_1ab;}_1ad.dimensions=_1a6;_1b0=_1a2+"entities_grid";_1b2=function(){if(_1ab){_1b0=_1ab+_1b0;}grid=dj.byId(_1b0);grid.showMessage(grid.loadingMessage);if(!_1a2||_1a2!=="CUSTOMER"){m.grid.setStoreURL(grid,m.getServletURL(_1ae),_1af);}m.connect("sy_name","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("USERentities_grid"),["NAME"],["sy_name"]);}});m.connect("sy_abbvname","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("USERentities_grid"),["ABBVNAME"],["sy_abbvname"]);}});m.connect("sy_name","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("USER_WITH_ENTITY_WILDCARDentities_grid"),["NAME"],["sy_name"]);}});m.connect("sy_abbvname","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("USER_WITH_ENTITY_WILDCARDentities_grid"),["ABBVNAME"],["sy_abbvname"]);}});m.connect("sy_abbvname","onKeyPress",function(evnt){if(evnt.keyCode==dojo.keys.ENTER){m.grid.filter(dj.byId("CUSTOMERentities_grid"),["ABBVNAME"],["sy_abbvname"]);}});m.connect("sy_name","onKeyPress",function(evnt){if(evnt.keyCode==dojo.keys.ENTER){m.grid.filter(dj.byId("CUSTOMERentities_grid"),["NAME"],["sy_name"]);}});m.connect("sy_prefixentity","onKeyPress",function(evnt){if(evnt.keyCode==dojo.keys.ENTER){m.grid.filter(dj.byId("prefixCUSTOMERentities_grid"),["ENTITY_ABBV_NAME"],["sy_prefixentity"]);}});m.connect("sy_prefixname","onKeyPress",function(evnt){if(evnt.keyCode==dojo.keys.ENTER){m.grid.filter(dj.byId("prefixCUSTOMERentities_grid"),["NAME"],["sy_prefixname"]);}});};if(_1a9){_1b1=dj.byId("childXhrDialog")||new dj.Dialog({title:_1a7,id:"childXhrDialog",href:m.getServletURL(url),ioMethod:misys.xhrPost,ioArgs:{content:_1ad}});m.dialog.connect(_1b1,"onLoad",_1b2);m.dialog.connect(_1b1,"onHide",function(){setTimeout(function(){m.dialog.disconnect(_1b1);_1b1.destroyRecursive();},2000);});var co=d.coords("xhrDialog");_1b1._relativePosition={x:co.x+30,y:co.y+30};_1b1.show();}else{m.dialog.show("URL","",_1a7,null,_1b2,m.getServletURL(url),null,null,_1ad);}},showBankTypeDialog:function(type,_1b3,_1b4,_1b5,_1b6){if(dj.byId("credit_available_with_bank_type").get("value")==="Other"){m.showSearchDialog(type,_1b3,"","",_1b4,_1b5,_1b6);}},showDraweeDialog:function(type,_1b7,_1b8,_1b9){if((dj.byId("cr_avl_by_code_1")&&dj.byId("cr_avl_by_code_1").get("checked"))||(dj.byId("cr_avl_by_code_2")&&dj.byId("cr_avl_by_code_2").get("checked"))||(dj.byId("cr_avl_by_code_3")&&dj.byId("cr_avl_by_code_3").get("checked"))){m.showSearchDialog(type,_1b8,"","","EL","width:580px;height:auto;",_1b9);}},showUsersDialog:function(type,_1ba,_1bb,_1bc,_1bd,_1be,_1bf,_1c0,_1c1,_1c2,_1c3,_1c4){var url=[],_1c5={},_1c6=[_8],_1c7={},_1c8=_1c2||"GetStaticData",_1c9=_1be||_9,_1ca,_1cb;if(_1bf.slice(_1bf.length-1)!==";"){_1bf+=";";}_1c6.push(_1c8);_1c7.option=type;_1c7.fields=_1ba;_1c7.companyName=_1bb;_1c7.userId=_1bc;_1c7.entity=_1ca;_1c7.user_action=_1c4;d.mixin(_1c7,_1bd);url.push("/screen/",_1c9);_1c5.option=type;_1c5.fields=_1ba;_1c5.companyName=_1bb;_1c5.userId=_1bc;_1c5.companyId=_1c1;_1c5.dimensions=_1bf;d.mixin(_1c5,_1bd);_1c5.popupType="LIST_DATA";if(_1c1){_1c5.companyid=_1c1;_1c7.companyid=_1c1;}_1cb=function(){var grid=dj.byId(type+"data_grid");grid.showMessage(grid.loadingMessage);m.grid.setStoreURL(grid,m.getServletURL(_1c6.join("")),_1c7);};m.dialog.show("URL","",_1c0,null,_1cb,m.getServletURL(url.join("")),null,null,_1c5);m.connect("lastname","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("userdata_grid"),["LAST_NAME"],["last_name"]);}});m.connect("firstname","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("userdata_grid"),["FIRST_NAME"],["first_name"]);}});m.connect("loginId","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("userdata_grid"),["LOGIN_ID"],["login_id"]);}});},showSearchExtAccountDialog:function(type,_1cc,_1cd,_1ce,_1cf,_1d0,_1d1,_1d2,_1d3,_1d4,_1d5,_1d6){var url=[],_1d7={},_1d8=[_8],_1d9={},_1da=_1d4||"GetStaticData",_1db=_1ce||_9,_1dc,_1dd;if(_1d0.slice(_1d0.length-1)!==";"){_1d0+=";";}if(dj.byId(_1d2)){_1dc=dj.byId(_1d2).get("value");}_1d8.push(_1da);_1d9.option=type;_1d9.fields=_1cc;_1d9.entity=_1dc;_1d9.user_action=_1d6;d.mixin(_1d9,_1cd);url.push("/screen/",_1db);_1d7.option=type;_1d7.fields=_1cc;_1d7.dimensions=_1d0;d.mixin(_1d7,_1cd);_1d7.popupType="LIST_DATA";if(_1cf){_1d7.productcode=_1cf;_1d9.productcode=_1cf;}if(_1d3){_1d7.companyid=_1d3;_1d9.companyid=_1d3;}if(!_1d5){_1dd=function(){var grid=dj.byId(type+"data_grid");if(grid){grid.showMessage(grid.loadingMessage);m.grid.setStoreURL(grid,m.getServletURL(_1d8.join("")),_1d9);}};}m.dialog.show("URL","",_1d1,null,_1dd,m.getServletURL(url.join("")),null,null,_1d7);},showSearchDialog:function(type,_1de,_1df,_1e0,_1e1,_1e2,_1e3,_1e4,_1e5,_1e6,_1e7,_1e8,_1e9){var url=[],_1ea={},_1eb=[_8],_1ec={},_1ed=_1e5||"GetStaticData",_1ee=_1e0||_9,_1ef,_1f0,_1f1,_1f2=dj.byId("product_type")?dj.byId("product_type").get("value"):"",_1f3=dj.byId("customer_bank")?dj.byId("customer_bank").get("value"):"",_1f4=dijit.byId("issuing_bank_abbv_name")?dijit.byId("issuing_bank_abbv_name").get("value"):"";var _1f5=dj.byId("program_id");if(dj.byId(_1e8)){_1ef=dj.byId(_1e8).get("value");if(_1ef===""){return;}}if(_1e2.slice(_1e2.length-1)!==";"){_1e2+=";";}_1eb.push(_1ed);_1ec.option=type;_1ec.fields=_1de;_1ec.user_action=_1e7;_1ec[_b]=_1ef;d.mixin(_1ec,_1df);url.push("/screen/",_1ee);_1ea.option=type;_1ea.fields=_1de;_1ea.dimensions=_1e2;d.mixin(_1ea,_1df);_1ea.popupType="LIST_DATA";if(_1e1){_1ea.productcode=_1e1;_1ec.productcode=_1e1;}if(_1e4){_1ea.companyid=_1e4;_1ec.companyid=_1e4;}if(_1df&&_1df.entity_name===""){_1ec.entity_name=dj.byId("entity")?dj.byId("entity").get("value"):"";_1ea.entity_name=dj.byId("entity")?dj.byId("entity").get("value"):"";}if(_1f3){_1f1=_1f3;}else{if(dj.byId("bank_abbv_name")&&dj.byId("bank_abbv_name").get("value")!==""){_1f1=dj.byId("bank_abbv_name").get("value");}else{if(_1f4){_1f1=_1f4;}}}_1ec.bank_abbv_name=_1f1;if(_1f5){_1ea.fcmPgmId=_1f5.get("value");_1ec.fcmPgmId=_1f5.get("value");}if(_1f2){_1ea.product_type=_1f2;_1ec.product_type=_1f2;}if(_1e9){_1ea.subproductcode=_1e9;_1ec.subproductcode=_1e9;}if(!_1e6){_1f0=function(){var grid=dj.byId(type+"data_grid");if(grid){grid.showMessage(grid.loadingMessage);m.grid.setStoreURL(grid,m.getServletURL(_1eb.join("")),_1ec);m.connect("CurrencyName","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("currencydata_grid"),["NAME"],["CurrencyName"]);}});m.connect("ISOCode","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("currencydata_grid"),["ISOCODE"],["ISOCode"]);}});m.connect("abbv_name","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("beneficiarydata_grid"),["ABBVNAME"],["abbv_name"]);}});m.connect("name","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("beneficiarydata_grid"),["NAME"],["name"]);}});m.connect("abbv_name","onKeyPress",function(evnt){if(evnt.keyCode==dojo.keys.ENTER){m.grid.filter(dj.byId("bankdata_grid"),["ABBVNAME"],["abbv_name"]);}});m.connect("name","onKeyPress",function(evnt){if(evnt.keyCode==dojo.keys.ENTER){m.grid.filter(dj.byId("bankdata_grid"),["NAME"],["name"]);}});m.connect("abbv_name","onKeyPress",function(evnt){if(evnt.keyCode==dojo.keys.ENTER){m.grid.filter(dj.byId("phrasedata_grid"),["ABBVNAME"],["abbv_name"]);}});m.connect("descriptionField","onKeyPress",function(evnt){if(evnt.keyCode==dojo.keys.ENTER){m.grid.filter(dj.byId("phrasedata_grid"),["DESCRIPTION"],["descriptionField"]);}});m.connect("description","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("accountdata_grid"),["DESCRIPTION"],["description"]);}});m.connect("account_no","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("accountdata_grid"),["ACCOUNTNO"],["account_no"]);}});}};}m.dialog.show("URL","",_1e3,null,_1f0,m.getServletURL(url.join("")),null,null,_1ea);},showProgramCptyDialog:function(type,_1f6,_1f7,_1f8,_1f9,_1fa,_1fb){var _1fc="";if(dj.byId("gridPC")&&dj.byId("gridPC").store&&dj.byId("gridPC").store._arrayOfAllItems&&dj.byId("gridPC").store._arrayOfAllItems.length){var _1fd=dj.byId("gridPC").store._arrayOfAllItems;for(var i=0;i<_1fd.length;i++){if(_1fd[i]&&_1fd[i]["ABBVNAME"]){_1fc=_1fc+_1fd[i]["ABBVNAME"]+",";}}}var url=[],_1fe={},_1ff=_8,_200={},_201="GetStaticData",_202=_1f8||_9,_203,_204;if(_1f9.slice(_1f9.length-1)!==";"){_1f9+=";";}_1ff+=_201;_200.option=type;_200.fields=_1f6;_200.benAbbvNameList=_1fc;url.push("/screen/",_202);_1fe.option=type;_1fe.fields=_1f6;if(_1f7){_1fe.program_id=_1f7;_200.program_id=_1f7;}_1fe.dimensions=_1f9;_1fe.popupType="LIST_DATA";_203=function(){var grid=dj.byId(type+"data_grid");grid.showMessage(grid.loadingMessage);m.grid.setStoreURL(grid,m.getServletURL(_1ff),_200);m.connect("prgm_cpty_popup","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("programCounterpartydata_grid"),["ABBVNAME"],["prgm_cpty_popup"]);}});};if(_1fb){_204=dj.byId("childXhrDialog")||new dj.Dialog({title:_1fa,id:"childXhrDialog",href:m.getServletURL(url.join("")),ioMethod:misys.xhrPost,ioArgs:{content:_1fe}});m.dialog.connect(_204,"onLoad",_203);m.dialog.connect(_204,"onHide",function(){setTimeout(function(){m.dialog.disconnect(_204);_204.destroyRecursive();},2000);});var co=d.coords("xhrDialog");_204._relativePosition={x:co.x+30,y:co.y+30};_204.show();}else{m.dialog.show("URL","",_1fa,null,_203,m.getServletURL(url.join("")),null,null,_1fe);}},showBankBranchCodeDialog:function(type,_205,_206,_207,_208,_209,_20a,_20b,_20c){var url=[],_20d={},_20e=_8,_20f={},_210="GetStaticData",_211=_209||_9,_212,_213,co;if(_20a.slice(_20a.length-1)!==";"){_20a+=";";}_20e+=_210;_20f.option=type;_20f.fields=_205;_20f.parameter=_206;_20f.branchindicators=_207;_20f.internal=_208;url.push("/screen/",_211);_20d.option=type;_20d.fields=_205;_20d.parameter=_206;_20d.branchindicators=_207;_20d.internal=_208;_20d.dimensions=_20a;_20d.popupType="LIST_DATA";_212=function(){var grid=dj.byId(type+"data_grid");grid.showMessage(grid.loadingMessage);m.grid.setStoreURL(grid,m.getServletURL(_20e),_20f);};if(_20c){_213=dj.byId("childXhrDialog")||new dj.Dialog({title:_20b,id:"childXhrDialog",href:m.getServletURL(url.join("")),ioMethod:misys.xhrPost,ioArgs:{content:_20d}});m.dialog.connect(_213,"onLoad",_212);m.dialog.connect(_213,"onHide",function(){setTimeout(function(){m.dialog.disconnect(_213);_213.destroyRecursive();},2000);});co=d.coords("xhrDialog");_213._relativePosition={x:co.x+30,y:co.y+30};_213.show();}else{m.dialog.show("URL","",_20b,null,_212,m.getServletURL(url.join("")),null,null,_20d);}},showSearchUserAccountsDialog:function(type,_214,_215,_216,drCr,_217,_218,_219,_21a,_21b,_21c,_21d,_21e,_21f,_220,_221,_222){var url=[],_223={},_224=_8,_225={},_226="GetStaticData",_227=_9,_228,_229,_22a,_22b;if(dj.byId(_216)){_229=dj.byId(_216).get("value");if(_229===""){if(dj.byId("applicant_abbv_name")){var _22c=dj.byId("applicant_abbv_name").get("value");if(_22c===""){m.showTooltip(m.getLocalization("entitynotselected"),document.activeElement,["after"]);return;}}else{if(_222&&_222===true){}else{m.showTooltip(m.getLocalization("entitynotselected"),document.activeElement,["after"]);return;}}}}else{if(misys._config.isEntityRequired){m.showTooltip(m.getLocalization("entitynotselected"),document.activeElement,["after"]);return;}}if(dj.byId(_215)){_22b=dj.byId(_215).get("value");if(_22b===""){return;}}var _22d=[];if(_21f){var _22e=_21f.split(",");for(var i in _22e){if(dj.byId(_22e[i])){_22d.push(dj.byId(_22e[i]).get("value"));}}}if(dj.byId("customer_bank")&&dj.byId("customer_bank").get("value")!==""){_22a=dj.byId("customer_bank").get("value");}else{if(dj.byId("bank_abbv_name")&&dj.byId("bank_abbv_name").get("value")!==""){_22a=dj.byId("bank_abbv_name").get("value");}else{if(dj.byId("issuing_bank")&&dj.byId("issuing_bank").get("value")!==""){_22a=dj.byId("issuing_bank").get("value");}}}if(_218.slice(_218.length-1)!==";"){_218+=";";}_224+=_226;_225.option=type;_225.user_action=_21e;_225.fields=_214;_225.entity=_229;_225.bank_abbv_name=_22a;_225[_b]=_22b;_225["dr-cr"]=drCr;_225["product-types"]=_217;_225.parameter=_21a;_225.companyId=_21b;_225.accountType=_220;_225.isSearchScreen=_222;if(dj.byId("issuing_bank_customer_reference")&&dj.byId("issuing_bank_customer_reference").get("value")!==""&&_217.length>0&&(("FT:TRTPT"===_217)||("FT:TRINT"===_217))){_225["issuing_bank_customer_reference"]=dj.byId("issuing_bank_customer_reference").get("value");}if(_217.length>0&&"FX"===_217&&_21a.indexOf("ownerType:")>-1){_225.ownerType=_21a.substring(10);}if(_22d.length>0){_225.ccy_codes=_22d.join(",");}url.push("/screen/",_227);_223.option=type;_223.dimensions=_218;_223.bank_abbv_name=_22a;_223.entity=_229;_223.popupType="LIST_DATA";_223.pageType=_21a;if(_21b){_223.companyid=_21b;}if(!_21d){_228=function(){var grid=dj.byId(type+"data_grid");grid.showMessage(grid.loadingMessage);m.grid.setStoreURL(grid,m.getServletURL(_224),_225);};}m.dialog.show("URL","",_219,null,_228,m.getServletURL(url.join("")),null,null,_223);m.connect("accountNo","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("useraccountdata_grid"),["ACCOUNTNOTEMP"],["accountNo"]);}});m.connect("curCode","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("useraccountdata_grid"),["CURCODE"],["curCode"]);}});m.connect("descriptionDialog","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("useraccountdata_grid"),["DESCRIPTION"],["descriptionDialog"]);}});if(_22a!==""){m.connect("bankName","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("useraccountdata_grid"),["BANKNAME"],["bankName"]);}});}},showSearchFSCMProgramDialog:function(type,_22f,_230,_231,_232,_233,_234){var url=[],_235={},_236=_8,_237={},_238="GetStaticData",_239=_9,_23a,_23b,_23c;if(_230.slice(_230.length-1)!==";"){_230+=";";}_236+=_238;_237.option=type;_237.user_action=_234;_237.fields=_22f;_237.entity=_23b;_237[_b]=_23c;d.mixin(_237,_232);url.push("/screen/",_239);_235.option=type;_235.dimensions=_230;d.mixin(_235,_232);_235.popupType="LIST_DATA";if(!_233){_23a=function(){var grid=dj.byId(type+"data_grid");grid.showMessage(grid.loadingMessage);m.grid.setStoreURL(grid,m.getServletURL(_236),_237);};}m.dialog.show("URL","",_231,null,_23a,m.getServletURL(url.join("")),null,null,_235);m.connect("programCode","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("fscmprogramdata_grid"),["PROGRAM_CODE"],["programCode"]);}});m.connect("programName","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("fscmprogramdata_grid"),["PROGRAM_NAME"],["programName"]);}});m.connect("programId","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("fscmprogramdata_grid"),["PROGRAM_ID"],["programId"]);}});},showFSCMProgramFinanceRequestDialog:function(type,_23d,_23e,_23f,_240,_241,_242){var url=[],_243={},_244=_8,_245={},_246="GetStaticData",_247=_23f||_9,_248,_249;if(_240.slice(_240.length-1)!==";"){_240+=";";}_244+=_246;_245.option=type;_245.fields=_23d;d.mixin(_245,_23e);url.push("/screen/",_247);_243.option=type;_243.fields=_23d;d.mixin(_243,_23e);_243.dimensions=_240;_243.popupType="LIST_DATA";_248=function(){var grid=dj.byId(type+"data_grid");grid.showMessage(grid.loadingMessage);m.grid.setStoreURL(grid,m.getServletURL(_244),_245);m.connect("CurrencyName","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("currencydata_grid"),["NAME"],["CurrencyName"]);}});};if(_242){_249=dj.byId("childXhrDialog")||new dj.Dialog({title:_241,id:"childXhrDialog",href:m.getServletURL(url.join("")),ioMethod:misys.xhrPost,ioArgs:{content:_243}});m.dialog.connect(_249,"onLoad",_248);m.dialog.connect(_249,"onHide",function(){setTimeout(function(){m.dialog.disconnect(_249);_249.destroyRecursive();},2000);});var co=d.coords("xhrDialog");_249._relativePosition={x:co.x+30,y:co.y+30};_249.show();}else{m.dialog.show("URL","",_241,null,_248,m.getServletURL(url.join("")),null,null,_243);}},showCountryCodeDialog:function(type,_24a,_24b,_24c,_24d,_24e,_24f,_250,_251){var url=[],_252={},_253=_8,_254={},_255="GetStaticData",_256=_24c||_9,_257,_258;if(_24f.slice(_24f.length-1)!==";"){_24f+=";";}_253+=_255;_254.option=type;_254.fields=_24a;_254.parameter=_24b;url.push("/screen/",_256);_252.option=type;_252.fields=_24a;_252.parameter=_24b;_252.dimensions=_24f;_252.popupType="LIST_DATA";if(_24d){_252.productcode=_24d;_254.productcode=_24d;}if(_24e){_252.subproductcode=_24e;_254.subproductcode=_24e;}_257=function(){var grid=dj.byId(type+"data_grid");grid.showMessage(grid.loadingMessage);m.grid.setStoreURL(grid,m.getServletURL(_253),_254);m.connect("country_name_popup","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("codevaluedata_grid"),["DESCRIPTION"],["country_name_popup"]);}});};if(_251){_258=dj.byId("childXhrDialog")||new dj.Dialog({title:_250,id:"childXhrDialog",href:m.getServletURL(url.join("")),ioMethod:misys.xhrPost,ioArgs:{content:_252}});m.dialog.connect(_258,"onLoad",_257);m.dialog.connect(_258,"onHide",function(){setTimeout(function(){m.dialog.disconnect(_258);_258.destroyRecursive();},200);});var co=d.coords("xhrDialog");_258._relativePosition={x:co.x+30,y:co.y+30};_258.show();}else{m.dialog.show("URL","",_250,null,_257,m.getServletURL(url.join("")),null,null,_252);}},showCurrencyCodeDialog:function(type,_259,_25a,_25b,_25c,_25d,_25e,_25f,_260){var url=[],_261={},_262=_8,_263={},_264="GetStaticData",_265=_25b||_9,_266,_267;if(_25e.slice(_25e.length-1)!==";"){_25e+=";";}_262+=_264;_263.option=type;_263.fields=_259;_263.parameter=_25a;url.push("/screen/",_265);_261.option=type;_261.fields=_259;_261.parameter=_25a;_261.dimensions=_25e;_261.popupType="LIST_DATA";if(_25c){_261.productcode=_25c;_262.push(_6,_25c);}if(_25d){_261.subproductcode=_25d;_262.push("&subproductcode=",_25d);}_266=function(){var grid=dj.byId(type+"data_grid");grid.showMessage(grid.loadingMessage);m.grid.setStoreURL(grid,m.getServletURL(_262),_263);m.connect("CurrencyName","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("currencydata_grid"),["NAME"],["CurrencyName"]);}});};if(_260){_267=dj.byId("childXhrDialog")||new dj.Dialog({title:_25f,id:"childXhrDialog",href:m.getServletURL(url.join("")),ioMethod:misys.xhrPost,ioArgs:{content:_261}});m.dialog.connect(_267,"onLoad",_266);m.dialog.connect(_267,"onHide",function(){setTimeout(function(){m.dialog.disconnect(_267);_267.destroyRecursive();},200);});var co=d.coords("xhrDialog");_267._relativePosition={x:co.x+30,y:co.y+30};_267.show();}else{m.dialog.show("URL","",_25f,null,_266,m.getServletURL(url.join("")),null,null,_261);}},isGridEmpty:function(){var _268=true;if(dijit.byId("amendments").store){for(var i=0;i<dijit.byId("amendments").store._arrayOfAllItems.length;i++){if(dijit.byId("amendments").store._arrayOfAllItems[i]!=null){_268=false;}}}return _268;},toggleADR:function(){if(dj.byId("adr_1").get("value")||dj.byId("adr_2").get("value")){var adr3=dj.byId("adr_3");if(!m.isGridEmpty()){adr3.set("disabled",true);}dj.byId("narrative_description_goods_popup").set("value","");if(dj.byId("adr_1").get("value")){dj.byId("narrative_description_goods_popup").set("value","/ADD/");}else{if(dj.byId("adr_2").get("value")){dj.byId("narrative_description_goods_popup").set("value","/DELETE/");}}}if(dj.byId("adr_3").get("value")){dj.byId("narrative_description_goods_popup").set("value","");if(!m.isGridEmpty()&&dijit.byId("amendments").store._arrayOfAllItems[0].verb[0]!="REPALL"){dj.byId("adr_3").set("disabled",true);dj.byId("narrative_description_goods_popup").set("disabled",true);dj.byId("adr_3").set("value",false);}dj.byId("narrative_description_goods_popup").set("value","/REPALL/");}if(dj.byId("adr_1").get("value")==="ADD"||dj.byId("adr_2").get("value")==="DELETE"||dj.byId("adr_3").get("value")==="REPALL"){dj.byId("narrative_description_goods_popup").set("disabled",false);}if(!m.isGridEmpty()&&dijit.byId("amendments").store._arrayOfAllItems[0].verb[0]=="REPALL"){dj.byId("adr_1").set("disabled",true);dj.byId("adr_2").set("disabled",true);dj.byId("adr_3").set("disabled",false);dj.byId("adr_3").set("value","REPALL");dj.byId("narrative_description_goods_popup").set("disabled",true);}},consolidateGridData:function(){var _269;var verb,text;if(m.isGridEmpty()){m.dialog.show("CONFIRMATION",m.getLocalization("saveEmptyDataConfirmation"),"",_26a);_269="<table><tr><span style='height: 1px;'></span></tr>";}else{if(!m.isGridEmpty()&&dijit.byId("amendments").store._arrayOfAllItems){_269="<table><tr><b><span style='color: blue;' class='indented-header;'>Current Amendment</span></b></tr>";for(var u=0;u<dijit.byId("amendments").store._arrayOfAllItems.length;u++){if(dijit.byId("amendments").store._arrayOfAllItems[u]!=null){_269+="<tr><td style='white-space: pre-wrap;'>";var _26b=dijit.byId("amendments").store._arrayOfAllItems[u].verb[0];var _26c="";if(_26b==="ADD"){_26c=misys.getLocalization("add");}else{if(_26b==="DELETE"){_26c=misys.getLocalization("delete");}else{if(_26b==="REPALL"){_26c=misys.getLocalization("repall");}}}verb="<b>/"+_26c+"/</b>";text=dijit.byId("amendments").store._arrayOfAllItems[u].content[0];_269+=verb+" "+text;_269+="</td></tr>";}}}}_269+="</table>";var _26a=function(){var _26d;if(dijit.byId("amendments").store&&!m.isGridEmpty()){_26d=dijit.byId("amendments").store._arrayOfAllItems;if(m._config.narrativeId==="narrative_amend_goods"){m._config.narrativeDescGoodsDataStore=_26d;document.getElementById("narrativeDescriptionGoods").innerHTML=_269;}if(m._config.narrativeId==="narrative_amend_docs"){m._config.narrativeDocsReqDataStore=_26d;document.getElementById("narrativeDocumentsRequired").innerHTML=_269;}if(m._config.narrativeId==="narrative_amend_instructions"){m._config.narrativeAddInstrDataStore=_26d;document.getElementById("narrativeAdditionalInstructions").innerHTML=_269;}if(m._config.narrativeId==="narrative_amend_sp_beneficiary"){m._config.narrativeSpBeneDataStore=_26d;document.getElementById("narrativeSpecialBeneficiary").innerHTML=_269;}if(m._config.narrativeId==="narrative_amend_sp_recvbank"){m._config.narrativeSpRecvbankDataStore=_26d;document.getElementById("narrativeSpecialReceivingBank").innerHTML=_269;}}else{if(m.isGridEmpty()){if(m._config.narrativeId==="narrative_amend_goods"){m._config.narrativeDescGoodsDataStore.length=0;document.getElementById("narrativeDescriptionGoods").innerHTML=_269;}if(m._config.narrativeId==="narrative_amend_docs"){m._config.narrativeDocsReqDataStore.length=0;document.getElementById("narrativeDocumentsRequired").innerHTML=_269;}if(m._config.narrativeId==="narrative_amend_instructions"){m._config.narrativeAddInstrDataStore.length=0;document.getElementById("narrativeAdditionalInstructions").innerHTML=_269;}if(m._config.narrativeId==="narrative_amend_sp_beneficiary"){m._config.narrativeSpBeneDataStore.length=0;document.getElementById("narrativeSpecialBeneficiary").innerHTML=_269;}if(m._config.narrativeId==="narrative_amend_sp_recvbank"){m._config.narrativeSpRecvbankDataStore.length=0;document.getElementById("narrativeSpecialReceivingBank").innerHTML=_269;}}}if(dj.byId("narrative_description_goods_popup").state===""&&!dj.byId("narrative_description_goods_popup").disabled){m.toggleNarrativeDivStatus(true);}m.dialog.hide();m.initDivMouseOver();};if(!m.isGridEmpty()){if(m.hasTextBoxLogicalValue()){m.dialog.show("CONFIRMATION",m.getLocalization("unsavedDataExistInTextBox"),"",_26a);}else{m.dialog.show("CONFIRMATION",m.getLocalization("saveDataConfirmation"),"",_26a);}}else{m.dialog.show("CONFIRMATION",m.getLocalization("saveEmptyDataConfirmation"),"",_26a);}},closeAmendmentPopup:function(){var _26e=function(){m._config.narrativeId="";var _26f=[m._config.narrativeDescGoodsDataStore,m._config.narrativeDocsReqDataStore,m._config.narrativeAddInstrDataStore,m._config.narrativeSpBeneDataStore,m._config.narrativeSpRecvbankDataStore];var i=0,_270=0,_271=0;for(var itr=0;itr<5;itr++){if(_26f[itr]){d.forEach(_26f[itr],function(){if(_26f[itr][i]&&_26f[itr][i]!==null){_26f[itr][i].content[0].replace(/&#xa;/g,"\n");_271+=_26f[itr][i].content[0].length;_270+=_26f[itr][i].text_size[0];}i++;});}}if(_270<=(misys._config.is798=="Y"?792:800)){m.toggleNarrativeDivStatus(true);}else{m.initDivMouseOver();}m.dialog.hide();};if(!m.hasTextBoxLogicalValue()){m.dialog.show("CONFIRMATION",m.getLocalization("cancelTransactionConfirmation"),"",_26e);}else{if(dj.byId("narrative_description_goods_popup").get("value")!="/ADD/"&&dj.byId("narrative_description_goods_popup").get("value")!="/DELETE/"&&dj.byId("narrative_description_goods_popup").get("value")!="/REPALL/"){m.dialog.show("CONFIRMATION",m.getLocalization("unsavedDataExistInTextBox"),"",_26e);}}},viewNarrativeInPopUp:function(type,_272,_273,_274,_275,_276,_277){var url=[],_278={},_279=[_8],_27a="GetStaticData",_27b=_9,_27c;if(_275.slice(_275.length-1)!==";"){_275+=";";}var _27d;m._config.amendmentNumber=_277;m._config.narrativeId=_273;if(_273==="narrative_amend_goods"){if(dj.byId("org_narrative_description_goods")&&dj.byId("org_narrative_description_goods").get("value")!=""){_27d=dj.byId("org_narrative_description_goods").get("value");}else{_27d=dj.byId("original_narrative_description_goods")?dj.byId("original_narrative_description_goods").get("value"):"";}if(dj.byId("tnx_type_code")&&dj.byId("tnx_type_code").get("value")=="03"&&misys._config.narrativeDescGoodsDataStore&&misys._config.narrativeDescGoodsDataStore.length!=0){_27d=_27d.concat(m.customXMLForCurrentAmend(misys._config.narrativeDescGoodsDataStore));}}else{if(_273==="narrative_amend_docs"){if(dj.byId("org_narrative_documents_required")&&dj.byId("org_narrative_documents_required").get("value")!=""){_27d=dj.byId("org_narrative_documents_required").get("value");}else{_27d=dj.byId("original_narrative_documents_required")?dj.byId("original_narrative_documents_required").get("value"):"";}if(dj.byId("tnx_type_code")&&dj.byId("tnx_type_code").get("value")=="03"&&misys._config.narrativeDocsReqDataStore&&misys._config.narrativeDocsReqDataStore.length!=0){_27d=_27d.concat(m.customXMLForCurrentAmend(misys._config.narrativeDocsReqDataStore));}}else{if(_273==="narrative_amend_instructions"){if(dj.byId("org_narrative_additional_instructions")&&dj.byId("org_narrative_additional_instructions").get("value")!=""){_27d=dj.byId("org_narrative_additional_instructions").get("value");}else{_27d=dj.byId("original_narrative_additional_instructions")?dj.byId("original_narrative_additional_instructions").get("value"):"";}if(dj.byId("tnx_type_code")&&dj.byId("tnx_type_code").get("value")=="03"&&misys._config.narrativeAddInstrDataStore&&misys._config.narrativeAddInstrDataStore.length!=0){_27d=_27d.concat(m.customXMLForCurrentAmend(misys._config.narrativeAddInstrDataStore));}}else{if(_273==="narrative_amend_sp_beneficiary"){if(dj.byId("org_narrative_special_beneficiary")&&dj.byId("org_narrative_special_beneficiary").get("value")!=""){_27d=dj.byId("org_narrative_special_beneficiary").get("value");}else{_27d=dj.byId("original_narrative_special_beneficiary")?dj.byId("original_narrative_special_beneficiary").get("value"):"";}if(dj.byId("tnx_type_code")&&dj.byId("tnx_type_code").get("value")=="03"&&misys._config.narrativeSpBeneDataStore&&misys._config.narrativeSpBeneDataStore.length!=0){_27d=_27d.concat(m.customXMLForCurrentAmend(misys._config.narrativeSpBeneDataStore));}}else{if(_273==="narrative_amend_sp_recvbank"){if(dj.byId("org_narrative_special_recvbank")&&dj.byId("org_narrative_special_recvbank").get("value")!=""){_27d=dj.byId("org_narrative_special_recvbank").get("value");}else{_27d=dj.byId("original_narrative_special_recvbank")?dj.byId("original_narrative_special_recvbank").get("value"):"";}if(dj.byId("tnx_type_code")&&dj.byId("tnx_type_code").get("value")=="03"&&misys._config.narrativeSpRecvbankDataStore&&misys._config.narrativeSpRecvbankDataStore.length!=0){_27d=_27d.concat(m.customXMLForCurrentAmend(misys._config.narrativeSpRecvbankDataStore));}}}}}}_279.push(_27a);_278.option=type;_278.dimensions=_275;_278.messageValue=_272;_278.node=type;_278.rundataXML=_27d;url.push("/screen/",_27b);m.dialog.show("URL","",_276,null,_27c,m.getServletURL(url.join("")),null,null,_278);},customXMLForCurrentAmend:function(_27e){var i=0;var _27f="<amendments>";_27f=_27f.concat("<amendment>");_27f=_27f.concat("<sequence>");_27f=_27f.concat(m._config.amendmentNumber);_27f=_27f.concat("</sequence>");_27f=_27f.concat("<data>");for(i=0;i<_27e.length;i++){if(_27e[i]!=null){_27f=_27f.concat("<datum>");_27f=_27f.concat("<id>");_27f=_27f.concat(i);_27f=_27f.concat("</id>");_27f=_27f.concat("<verb>");_27f=_27f.concat(_27e[i].verb[0]);_27f=_27f.concat("</verb>");_27f=_27f.concat("<text>");_27f=_27f.concat(dojox.html.entities.encode(_27e[i].content[0],dojox.html.entities.html));_27f=_27f.concat("</text>");_27f=_27f.concat("</datum>");}}_27f=_27f.concat("</data>");_27f=_27f.concat("</amendment>");_27f=_27f.concat("</amendments>");return _27f;},initDivMouseOver:function(){var _280=document.getElementById("tabNarrativeDescriptionGoods");var _281=dj.byId("adv_send_mode")?dj.byId("adv_send_mode").get("value"):"";_280.onmouseover=function(){if((dj.byId("narrative_description_goods_popup")&&dj.byId("narrative_description_goods_popup").state=="Error")||(document.getElementById("tabNarrativeDescriptionGoods").status==false)&&(_281==="01")&&m._config.isZCharValid&&m._config.isSingleNarrativeValid[0]){_15?dijit.showTooltip(m.getLocalization("invalidFieldSizeError",[_10,_12]),_280,["after"]):dijit.showTooltip(m.getLocalization("invalidSingleFieldLength",[_11,_13]),_280,["after"]);}else{if(m._config.isNarrativeZCharValidArray&&!m._config.isNarrativeZCharValidArray[0]&&document.getElementById("tabNarrativeDescriptionGoods").status==false){dijit.showTooltip(m.getLocalization("invalidSWIFTTransactionValidValuesWithExtBank"),_280,["after"]);}else{if(m._config.isSingleNarrativeValid&&!m._config.isSingleNarrativeValid[0]&&document.getElementById("tabNarrativeDescriptionGoods").status==false){dijit.showTooltip(m.getLocalization("invalidSingleFieldLength",[_11,_13]),_280,["after"]);}}}};_280.onmouseout=function(){dijit.hideTooltip(_280);};var _282=document.getElementById("tabNarrativeDocumentsRequired");_282.onmouseover=function(){if((dj.byId("narrative_description_goods_popup")&&dj.byId("narrative_description_goods_popup").state=="Error")||(document.getElementById("tabNarrativeDescriptionGoods").status==false)&&_282.status==false&&(_281==="01")&&m._config.isZCharValid&&m._config.isSingleNarrativeValid[1]){_15?dijit.showTooltip(m.getLocalization("invalidFieldSizeError",[_10,_12]),_282,["after"]):dijit.showTooltip(m.getLocalization("invalidSingleFieldLength",[_11,_13]),_282,["after"]);}else{if(m._config.isNarrativeZCharValidArray&&!m._config.isNarrativeZCharValidArray[1]&&document.getElementById("tabNarrativeDocumentsRequired").status==false){dijit.showTooltip(m.getLocalization("invalidSWIFTTransactionValidValuesWithExtBank"),_282,["after"]);}else{if(m._config.isSingleNarrativeValid&&!m._config.isSingleNarrativeValid[1]&&document.getElementById("tabNarrativeDescriptionGoods").status==false){dijit.showTooltip(m.getLocalization("invalidSingleFieldLength",[_11,_13]),_280,["after"]);}}}};_282.onmouseout=function(){dijit.hideTooltip(_282);};var _283=document.getElementById("tabNarrativeAdditionalInstructions");_283.onmouseover=function(){if((dj.byId("narrative_description_goods_popup")&&dj.byId("narrative_description_goods_popup").state=="Error")||(document.getElementById("tabNarrativeDescriptionGoods").status==false)&&_283.status==false&&(_281==="01")&&m._config.isZCharValid&&m._config.isSingleNarrativeValid[2]){_15?dijit.showTooltip(m.getLocalization("invalidFieldSizeError",[_10,_12]),_283,["after"]):dijit.showTooltip(m.getLocalization("invalidSingleFieldLength",[_11,_13]),_283,["after"]);}else{if(m._config.isNarrativeZCharValidArray&&!m._config.isNarrativeZCharValidArray[2]&&document.getElementById("tabNarrativeAdditionalInstructions").status==false){dijit.showTooltip(m.getLocalization("invalidSWIFTTransactionValidValuesWithExtBank"),_283,["after"]);}else{if(m._config.isSingleNarrativeValid&&!m._config.isSingleNarrativeValid[2]&&document.getElementById("tabNarrativeDescriptionGoods").status==false){dijit.showTooltip(m.getLocalization("invalidSingleFieldLength",[_11,_13]),_280,["after"]);}}}};_283.onmouseout=function(){dijit.hideTooltip(_283);};var _284=document.getElementById("tabNarrativeSpecialBeneficiary");_284.onmouseover=function(){if((dj.byId("narrative_description_goods_popup")&&dj.byId("narrative_description_goods_popup").state=="Error")||(document.getElementById("tabNarrativeDescriptionGoods").status==false)&&_284==false&&(_281==="01")&&m._config.isZCharValid&&m._config.isSingleNarrativeValid[3]){_15?dijit.showTooltip(m.getLocalization("invalidFieldSizeError",[_10,_12]),_284,["after"]):dijit.showTooltip(m.getLocalization("invalidSingleFieldLength",[_11,_13]),_284,["after"]);}else{if(m._config.isNarrativeZCharValidArray&&!m._config.isNarrativeZCharValidArray[3]&&document.getElementById("tabNarrativeSpecialBeneficiary").status==false){dijit.showTooltip(m.getLocalization("invalidSWIFTTransactionValidValuesWithExtBank"),_284,["after"]);}else{if(m._config.isSingleNarrativeValid&&!m._config.isSingleNarrativeValid[3]&&document.getElementById("tabNarrativeDescriptionGoods").status==false){dijit.showTooltip(m.getLocalization("invalidSingleFieldLength",[_11,enteredtSingle]),_280,["after"]);}}}};_284.onmouseout=function(){dijit.hideTooltip(_284);};if(document.getElementById("tabNarrativeSpecialReceivingBank")){var _285=document.getElementById("tabNarrativeSpecialReceivingBank");_285.onmouseover=function(){if((dj.byId("narrative_description_goods_popup")&&dj.byId("narrative_description_goods_popup").state=="Error")||(document.getElementById("tabNarrativeDescriptionGoods").status==false)&&_285.status==false&&(_281==="01")&&m._config.isZCharValid&&m._config.isSingleNarrativeValid[4]){_15?dijit.showTooltip(m.getLocalization("invalidFieldSizeError",[_10,_12]),_285,["after"]):dijit.showTooltip(m.getLocalization("invalidSingleFieldLength",[_11,_13]),_285,["after"]);}else{if(m._config.isNarrativeZCharValidArray&&!m._config.isNarrativeZCharValidArray[4]&&document.getElementById("tabNarrativeSpecialReceivingBank").status==false){dijit.showTooltip(m.getLocalization("invalidSWIFTTransactionValidValuesWithExtBank"),_285,["after"]);}else{if(m._config.isSingleNarrativeValid&&!m._config.isSingleNarrativeValid[4]&&document.getElementById("tabNarrativeDescriptionGoods").status==false){dijit.showTooltip(m.getLocalization("invalidSingleFieldLength",[_11,_13]),_280,["after"]);}}}};_284.onmouseout=function(){dijit.hideTooltip(_284);};}},editNarrativeInPopUp:function(type,_286,_287,_288,_289,_28a,_28b){var url=[],_28c={},_28d=[_8],_28e="GetStaticData",_28f=_9,_290;if(_289.slice(_289.length-1)!==";"){_289+=";";}var _291,_292=dj.byId("is798")?dj.byId("is798").get("value"):(dj.byId("issuing_bank_abbv_name")?(m._config.customerBanksMT798Channel[dj.byId("issuing_bank_abbv_name").get("value")]==true?"Y":"N"):(dj.byId("advising_bank_abbv_name")?(m._config.customerBanksMT798Channel[dj.byId("advising_bank_abbv_name").get("value")]==true?"Y":"N"):"N"));m._config.is798=_292;m._config.amendmentNumber=_28b;m._config.narrativeId=_287;if(_287==="narrative_amend_goods"){_291=dj.byId("org_narrative_description_goods")?dj.byId("org_narrative_description_goods").get("value"):"";}else{if(_287==="narrative_amend_docs"){_291=dj.byId("org_narrative_documents_required")?dj.byId("org_narrative_documents_required").get("value"):"";}else{if(_287==="narrative_amend_instructions"){_291=dj.byId("org_narrative_additional_instructions")?dj.byId("org_narrative_additional_instructions").get("value"):"";}else{if(_287==="narrative_amend_sp_beneficiary"){_291=dj.byId("org_narrative_special_beneficiary")?dj.byId("org_narrative_special_beneficiary").get("value"):"";}else{if(_287==="narrative_amend_sp_recvbank"){_291=dj.byId("org_narrative_special_recvbank")?dj.byId("org_narrative_special_recvbank").get("value"):"";}}}}}_28d.push(_28e);_28c.option=type;_28c.dimensions=_289;_28c.messageValue=_286;_28c.node=type;_28c.rundataXML=_291;_28c.is798=_292;url.push("/screen/",_28f);var _293="";_290=function(){if(m._config.codeword_enabled==true){dj.byId("narrative_description_goods_popup").set("disabled",true);var _294=function(){m.toggleADR();};var _295=function(){dj.byId(_293).set("value",true);};m.connect("adr_1","onClick",function(){if(!m.hasTextBoxLogicalValue()){m.toggleADR();}else{m.dialog.show("Warning",m.getLocalization("textboxDataLossOnToggle"),"","","","",_294,_295);}});m.connect("adr_1","onChange",function(){_293="adr_1";});m.connect("adr_2","onClick",function(){if(!m.hasTextBoxLogicalValue()){m.toggleADR();}else{m.dialog.show("Warning",m.getLocalization("textboxDataLossOnToggle"),"","","","",_294,_295);}});m.connect("adr_2","onChange",function(){_293="adr_2";});m.connect("adr_3","onClick",function(){if(!m.hasTextBoxLogicalValue()){m.toggleADR();}else{m.dialog.show("Warning",m.getLocalization("textboxDataLossOnToggle"),"","","","",_294,_295);}});m.connect("adr_3","onChange",function(){_293="adr_3";});m.connect("narrative_description_goods_popup","onKeyPress",function(evnt){var _296;_296=dj.byId("adr_1").get("value")=="ADD"?5:8;if((evnt.keyCode!==dojo.keys.LEFT_ARROW&&(evnt.keyCode!==dojo.keys.RIGHT_ARROW))&&((this.domNode.selectionStart<_296)||((this.domNode.selectionEnd==_296)&&(evnt.keyCode===dojo.keys.BACKSPACE)))){evnt.preventDefault();}});}if(misys._config.swiftExtendedNarrativeEnabled){m.setValidation("narrative_description_goods_popup",m.validatePopupDataLength);}else{m.setValidation("narrative_description_goods_popup",m.validatePopupData);}m.connect("addAmendmentButton","onClick",function(){if(m.hasTextBoxLogicalValue()){m.onSaveSizeAndSwiftValidation();}});};m.dialog.show("URL","",_28a,null,_290,m.getServletURL(url.join("")),null,null,_28c);},hasTextBoxLogicalValue:function(){if(dj.byId("narrative_description_goods_popup").disabled||dj.byId("narrative_description_goods_popup").get("value")==="/ADD/"||dj.byId("narrative_description_goods_popup").get("value")==="/DELETE/"||dj.byId("narrative_description_goods_popup").get("value")==="/REPALL/"){return false;}return true;},onSaveSizeAndSwiftValidation:function(){var _297=dj.byId("narrative_description_goods_popup").get("value");var _298="";if(dj.byId("adv_send_mode")){_298=dj.byId("adv_send_mode").get("value");}var _299=dj.byId("swiftregexzcharValue").get("value");if(_298!=="01"||_297===null||_297===""){m._config.isZCharValid=true;m.toggleNarrativeDivStatus(true);}else{var _29a=_297;var _29b=new RegExp(_299);m._config.isZCharValid=_29b.test(_29a);}dj.byId("narrative_description_goods_popup").set("value",dojox.html.entities.encode(dj.byId("narrative_description_goods_popup").get("value"),dojox.html.entities.html));var _29c=function(){dj.byId("amendments").createDataGrid();if(m._config.codeword_enabled==true){m.toggleADR();}else{if(!m.isGridEmpty()&&dijit.byId("amendments").store._arrayOfAllItems[0].verb[0]=="REPALL"){dj.byId("narrative_description_goods_popup").set("disabled",true);}}};var _29d=function(){var _29e=dj.byId("narrative_description_goods_popup").get("value");if(m.validatePopupData()){dj.byId("amendments").createDataGrid();}if(m._config.codeword_enabled==true){m.toggleADR();m._config.swiftExtendedNarrativeEnabled?"":dj.byId("narrative_description_goods_popup").set("value",_29e);}else{if(!m.isGridEmpty()&&dijit.byId("amendments").store._arrayOfAllItems[0].verb[0]=="REPALL"){dj.byId("narrative_description_goods_popup").set("disabled",true);}}};if(!m._config.isZCharValid){if(m.validatePopupData()){var _29f;if(document.getElementById("_userType")){_29f=document.getElementById("_userType").getAttribute("value");}if(_29f=="03"||_29f=="06"){m.dialog.show("CONFIRMATION",m.getLocalization("invalidSWIFTTransactionValidValuesWithExt"),"","","","",_29c);}else{m.dialog.show("Warning",m.getLocalization("invalidSWIFTTransactionValidValuesWithExtBank"),"","","","",_29c);}m.toggleNarrativeDivStatus(true);}else{m.dialog.show("ERROR",m.getLocalization("invalidSWIFTTPopupValueLength"),"","","","",_29d);}}else{if(m._config.isZCharValid){if(dj.byId("narrative_description_goods_popup").state==="Error"){m.toggleNarrativeDivStatus(false);if(m._config.swiftExtendedNarrativeEnabled){m.dialog.show("Warning",m.getLocalization("invalidSWIFTTPopupValueSize"),"","","","",_29c);}else{m.dialog.show("ERROR",m.getLocalization("invalidSWIFTTPopupValueLength"),"","","","",_29d);}}else{dj.byId("amendments").createDataGrid();if(m._config.codeword_enabled==true){m.toggleADR();}else{if(!m.isGridEmpty()&&dijit.byId("amendments").store._arrayOfAllItems[0].verb[0]=="REPALL"){dj.byId("narrative_description_goods_popup").set("disabled",true);}}m.toggleNarrativeDivStatus(true);}}}},toggleNarrativeDivStatus:function(_2a0,_2a1){var _2a2=["tabNarrativeDescriptionGoods","tabNarrativeDocumentsRequired","tabNarrativeAdditionalInstructions","tabNarrativeSpecialBeneficiary","tabNarrativeSpecialReceivingBank"];var _2a3=_2a0?"solid 1px #B8B8B8":"solid 1px #d46464";if(_2a1==""||_2a1==undefined){for(var itr=0;itr<_2a2.length;itr++){if(document.getElementById(_2a2[itr])!=null){document.getElementById(_2a2[itr]).status=_2a0;document.getElementById(_2a2[itr]).style.border=_2a3;}}}else{document.getElementById(_2a1).status=_2a0;document.getElementById(_2a1).style.border=_2a3;}if(document.getElementById("tabNarrativeDescriptionGoods")!=null||document.getElementById("tabNarrativeDocumentsRequired")!=null||document.getElementById("tabNarrativeAdditionalInstructions")!=null||document.getElementById("tabNarrativeSpecialBeneficiary")!=null||document.getElementById("tabNarrativeSpecialReceivingBank")!=null){m.initDivMouseOver();}},validatePopupDataLength:function(){var _2a4=0,_2a5=0,_2a6=0,i=0,_2a7=0,_2a8=0;var _2a9=[m._config.narrativeDescGoodsDataStore,m._config.narrativeDocsReqDataStore,m._config.narrativeAddInstrDataStore,m._config.narrativeSpBeneDataStore,m._config.narrativeSpRecvbankDataStore];var _2aa=["narrative_amend_goods","narrative_amend_docs","narrative_amend_instructions","narrative_amend_sp_beneficiary","narrative_amend_sp_recvbank"];var _2ab=_2aa.indexOf(m._config.narrativeId);var _2ac=dj.byId("adv_send_mode")?dj.byId("adv_send_mode").get("value"):"";if(_2ac!=="01"){return true;}for(var itr=0;itr<5;itr++){if(_2a9[itr]&&(itr!=_2ab&&_2ab!=-1)){i=0;d.forEach(_2a9[itr],function(){if(_2a9[itr][i]&&_2a9[itr][i]!==null){_2a9[itr][i].content[0].replace(/&#xa;/g,"\n");_2a5+=_2a9[itr][i].content[0].length;_2a7+=_2a9[itr][i].text_size[0];}i++;});}}if(dijit.byId("amendments")&&!m.isGridEmpty()&&dijit.byId("amendments").store._arrayOfAllItems){for(var v=0;v<dijit.byId("amendments").store._arrayOfAllItems.length;v++){if(dijit.byId("amendments").store._arrayOfAllItems[v]!==null){_2a6+=dijit.byId("amendments").store._arrayOfAllItems[v].content?dijit.byId("amendments").store._arrayOfAllItems[v].content[0].length:0;_2a6+=dijit.byId("amendments").store._arrayOfAllItems[v].verb?("/"+dijit.byId("amendments").store._arrayOfAllItems[v].verb[0]+"/").length:0;_2a8+=dijit.byId("amendments").store._arrayOfAllItems[v].text_size[0];}}}if(dj.byId("narrative_description_goods_popup")){_2a4=(!m.hasTextBoxLogicalValue())?0:dj.byId("narrative_description_goods_popup").get("value").length;_11=(misys._config.is798=="Y"?792:800)*65;_13=_2a6+_2a4;_15=m.validateExtendedNarrativeSwift2018(dj.byId("narrative_description_goods_popup").get("value"),_2a8,misys._config.is798,true);}_14=m.validateExtendedNarrativeSwift2018(dj.byId("narrative_description_goods_popup").get("value"),(_2a8+_2a7),misys._config.is798,false);_10=(misys._config.is798=="Y"?992:1000)*65;_12=(_2a6+_2a5+_2a4);if(!_15){this.invalidMessage=m.getLocalization("invalidSingleFieldLength",[_11,_13]);}else{this.invalidMessage=m.getLocalization("invalidFieldSizeError",[_10,_12]);}return _15&&_14;},validatePopupData:function(){var _2ad=true;if(m._config.swiftExtendedNarrativeEnabled){return _2ad;}var _2ae=0,_2af=0,_2b0=0;if(dijit.byId("amendments")&&!m.isGridEmpty()&&dijit.byId("amendments").store._arrayOfAllItems){for(var w=0;w<dijit.byId("amendments").store._arrayOfAllItems.length;w++){if(dijit.byId("amendments").store._arrayOfAllItems[w]!==null){_2af+=dijit.byId("amendments").store._arrayOfAllItems[w].content?dijit.byId("amendments").store._arrayOfAllItems[w].content[0].length:0;_2af+=dijit.byId("amendments").store._arrayOfAllItems[w].verb?("/"+dijit.byId("amendments").store._arrayOfAllItems[w].verb[0]+"/").length:0;_2b0+=dijit.byId("amendments").store._arrayOfAllItems[w].text_size[0];}}}if(dj.byId("narrative_description_goods_popup")){_2ae=(!m.hasTextBoxLogicalValue())?0:dj.byId("narrative_description_goods_popup").get("value").length;}_10=100*65;_12=_2ae+_2af;this.invalidMessage=m.getLocalization("invalidFieldSizeError",[_10,_12]);return m.validateExtendedNarrativeSwift2018(dj.byId("narrative_description_goods_popup").get("value"),_2b0,false);},showTruncatedGridData:function(_2b1,_2b2){var _2b3=null;if(_2b1!==""&&_2b1!==null){_2b3="<p style=\"white-space: pre-wrap;\">";var _2b4=_2b1.split(/\n/);var _2b5=_2b4.length>_2b2?_2b2:_2b4.length;for(var i=0;i<_2b5;i++){_2b3=_2b3+_2b4[i]+"\n";}if(_2b4.length>_2b2){var tail=".....";_2b3=_2b3.trim()+tail;}_2b3+="</p>";}return _2b3;},showExtendedNarrativeView:function(type,_2b6,_2b7,_2b8,_2b9){if(dj.byId(_2b9)){var msg=dojox.html.entities.encode(dj.byId(_2b9).get("value"),dojox.html.entities.html);msg=_16(msg);msg="<div style='width: auto; height: 400px;  overflow:auto'>"+msg+"</div>";}else{if(_2b8!="gridPreviewOverlay"){msg=_2b8;msg=_1a(msg);msg="<div style='height: 400px;width: auto; overflow:auto'>"+msg+"</div>";}else{if(_2b8=="gridPreviewOverlay"){msg="";_2b7="Current Amendment";if(dijit.byId("amendments").store){for(var i=0;i<dijit.byId("amendments").store._arrayOfAllItems.length;i++){if(dijit.byId("amendments").store._arrayOfAllItems[i]){var _2ba=dijit.byId("amendments").store._arrayOfAllItems[i].verb[0];var _2bb="";if(_2ba==="ADD"){_2bb=misys.getLocalization("add");}else{if(_2ba==="DELETE"){_2bb=misys.getLocalization("delete");}else{if(_2ba==="REPALL"){_2bb=misys.getLocalization("repall");}}}msg+="<b>"+"/"+_2bb+"/"+"</b>";msg+=_1a(dijit.byId("amendments").store._arrayOfAllItems[i].content[0]);}msg+="<div style='height: 8px; background-color: #FFFFFF'><div style='height: 1px; background-color: ##808080'></div></div>";}}else{msg=m.getLocalization("emptyAmendmentGrid");}msg="<div style='width: auto; height: 400px; overflow:auto'>"+msg+"</div>";}}}m.dialog.show("EXTENDED-VIEW",msg,_2b7);},showLocalizationDialog:function(id,_2bc){dj.byId("xsl_name").value=id;dj.byId("new_title").set("value",_2bc);dj.byId("localizationDialog").show();},undoLocalization:function(){dj.byId("new_title").set("value","");m.submitLocalization();},submitLocalization:function(){var _2bd=dj.byId("xsl_name").value;var _2be=dj.byId("new_title").value;m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/UpdateLocalizationAction"),sync:true,handleAs:"json",content:{XSLNAME:_2bd,NEWNAME:_2be},load:function(_2bf,args){},error:function(_2c0,args){console.error("[misys.grid._base] Country Validation error",_2c0);}});dj.byId("localizationDialog").hide();location.reload();},showSearchTransactionsDialog:function(_2c1,_2c2,_2c3){var url=[m.getServletURL("/screen/AjaxScreen/action/ListOfTransactionsAction")];url.push("?companyid=",_2c1,_6,_2c2,"&referenceid=",_2c3);d.style("linkedTransaction_dialog","width","650px");d.create("div",{id:"transaction_div"},"linkedTransaction_div");if(!dj.byId("transaction_Grid")){_2c(url.join(""),"transaction_div");}dj.byId("linkedTransaction_dialog").show();d.style("linkedTransaction_dialog","height","225px");},deleteTransactions:function(){dj.byId("imp_bill_ref_id").set("value","");dj.byId("transaction_Grid").selection.clear();d.byId("TransactionLink").innerHTML=m.getLocalization("NoTransactionLink");},createRteEditor:function(_2c4,_2c5){var _2c6=dj.byId(_2c5);if(!_2c6){var _2c7=d.byId(_2c5);var _2c8=d.byId("rteContent").innerHTML;_2c6=new dj.Editor({id:_2c5,name:_2c5,rows:"13",cols:"40",maxSize:"300",plugins:["undo","redo","|","bold","italic","underline","strikethrough","|","insertOrderedList","insertUnorderedList","|","indent","outdent","|","justifyLeft","justifyRight","justifyCenter","justifyFull","||",{name:"dijit._editor.plugins.FontChoice",command:"fontName"},{name:"misys.editor.plugins.ProductFieldChoice",command:"misysEditorPluginsProductFieldChoice",product:_2c4}]},_2c7);_2c8=_2c8.replace(/&lt;/g,"<");_2c8=_2c8.replace(/&gt;/g,">");_2c8=_2c8.replace(/&amp;/g,"&");_2c8=_2c8.replace(/&quot;/g,"\"");_2c6.set("value",_2c8?_2c8:"");}},toggleBankGrids:function(){var _2c9=dj.byId("bankRadioId");if(_2c9.checked){m.animate("wipeOut",d.byId("bank_swift_data"),function(){m.animate("wipeIn",d.byId("bankdata"));dijit.byId("bankdata_grid").resize();});}else{m.animate("wipeOut",d.byId("bankdata"),function(){m.animate("wipeOut",d.byId("contentPaneContainer"));m.animate("wipeIn",d.byId("bank_swift_data"));d.query("#bankTypeContainer .dojoxGrid").forEach(function(grid){var _2ca=dj.byId(grid.id);if(_2ca){_2ca.resize();}});});}},toggleFieldSetContent:function(_2cb,_2cc,_2cd){var _2ce=d.byId(_2cc+"_img_down");var _2cf=d.byId(_2cc+"_img_up");if(_2cd==="down"){m.animate("wipeIn",_2cb);d.style(_2ce,"display","none");d.style(_2cf,"display","block");d.style(_2cf,"cursor","pointer");}else{m.animate("wipeOut",_2cb);d.style(_2cf,"display","none");d.style(_2ce,"display","block");d.style(_2ce,"cursor","pointer");}},toggleEyeSetContent:function(_2d0,_2d1,_2d2,_2d3,_2d4){var _2d5=d.byId(_2d1+"_eye_down");var _2d6=d.byId(_2d1+"_eye_up");if(_2d2==="down"){d.style(_2d5,"display","none");d.style(_2d6,"display","inline");d.style(_2d6,"cursor","pointer");document.getElementById(_2d4).getElementsByClassName("content")[0].innerHTML=_2d3;}else{d.style(_2d6,"display","none");d.style(_2d5,"display","inline");d.style(_2d5,"cursor","pointer");document.getElementById(_2d4).getElementsByClassName("content")[0].innerHTML="************";}},toggleClassInlineBlock:function(_2d7,show){if(show===true){d.removeClass(_2d7,"hide");d.addClass(_2d7,"inlineBlock");}else{d.removeClass(_2d7,"inlineBlock");d.addClass(_2d7,"hide");}},toggleFieldsReadOnly:function(_2d8,_2d9,_2da){d.forEach(_2d8,function(node){if(dj.byId(node)){if(_2da){dj.byId(node).set("value","");}dj.byId(node).set("readOnly",_2d9);}});},disableFields:function(_2db,_2dc){d.forEach(_2db,function(node){if(dj.byId(node)){dj.byId(node).set("disabled",_2dc);}});},generateEsignRequestTransaction:function(_2dd,_2de){var _2df=function(){_2de=_2de+"&prodCode="+m._config.productCode;dj.byId("realform_operation").set("value",_2dd);dj.byId("option").set("value","");dj.byId("tnxtype").set("value","");dj.byId("realform").set("action",_2de);dj.byId("realform").submit();};m.dialog.show("CONFIRMATION",m.getLocalization("generateEsignRequest"),"",_2df);},proxyAuthoriseTransaction:function(_2e0,_2e1){var _2e2=function(){_2e1=_2e1+"&prodCode="+m._config.productCode;dj.byId("realform_operation").set("value",_2e0);dj.byId("option").set("value","");dj.byId("tnxtype").set("value","");dj.byId("realform").set("action",_2e1);dj.byId("realform").submit();};m.dialog.show("CONFIRMATION",m.getLocalization("proxyAuthorise"),"",_2e2);},toggleGuaranteeType:function(){var _2e3=d.byId("bgtypedetails-editor");if(this.get("value")==="99"){m.animate("fadeIn",_2e3);}else{m.animate("fadeOut",_2e3);}},getIncoYear:function(){var _2e4=null;var _2e5=dj.byId("inco_term_year");var _2e6=dj.byId("issuing_bank_abbv_name")?dj.byId("issuing_bank_abbv_name").get("value"):"";var _2e7=dj.byId("remitting_bank_abbv_name")?dj.byId("remitting_bank_abbv_name").get("value"):"";var _2e8=dj.byId("advising_bank_abbv_name")?dj.byId("advising_bank_abbv_name").get("value"):"";if(_2e6!=""){_2e4=misys._config.incoTermYearMap[_2e6];}else{if(_2e7!=""){_2e4=misys._config.incoTermYearMap[_2e7];}else{if(_2e8!=""){_2e4=misys._config.incoTermYearMap[_2e8];}else{_2e4=misys._config.incoTermYearMap[misys._config.bankAbbvNamePrefix];}}}var _2e9={"identifier":"id","items":[]};var _2ea=new dojo.data.ItemFileWriteStore({data:_2e9});if(_2e4!=undefined&&_2e4!=""){for(var j=0;j<_2e4.length;j++){_2ea.newItem({"id":_2e4[j].value,"name":_2e4[j].name});}if(_2e5){_2e5.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_2ea}});_2e5.store=_2ea;_2e5.set("disabled",false);_2e5.fetchProperties={sort:[{attribute:"name"}]};}}else{_2e5.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_2ea}});}var _2eb=dijit.byId("inco_term_year")?dijit.byId("inco_term_year").get("value"):"";var _2ec=_2e5.store._arrayOfAllItems;var flag=false;for(var i=0;i<_2ec.length;i++){if(_2ec[i]&&_2ec[i].name!=""&&_2ec[i].name==_2eb){flag=true;break;}}if(!flag){dijit.byId("inco_term_year").set("value","");dj.byId("inco_term").set("value","");}},getDeliveryTo:function(){var _2ed=null;var _2ee=dj.byId("delivery_to");var _2ef=dj.byId("issuing_bank_abbv_name")?dj.byId("issuing_bank_abbv_name").get("value"):"";var _2f0=dj.byId("remitting_bank_abbv_name")?dj.byId("remitting_bank_abbv_name").get("value"):"";var _2f1=dj.byId("advising_bank_abbv_name")?dj.byId("advising_bank_abbv_name").get("value"):"";if(_2ef!=""){_2ed=misys._config.deliveryToMap[_2ef];}else{if(_2f0!=""){_2ed=misys._config.deliveryToMap[_2f0];}else{if(_2f1!=""){_2ed=misys._config.deliveryToMap[_2f1];}else{_2ed=misys._config.deliveryToMap[misys._config.bankAbbvNamePrefix];}}}var _2f2={"identifier":"id","items":[]};var _2f3=new dojo.data.ItemFileWriteStore({data:_2f2});if(_2ed!=undefined&&_2ed!=""){for(var j=0;j<_2ed.length;j++){_2f3.newItem({"id":_2ed[j].value,"name":_2ed[j].name});}if(_2ee){_2ee.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_2f3}});_2ee.store=_2f3;_2ee.set("disabled",false);_2ee.fetchProperties={sort:[{attribute:"name"}]};}}else{_2ee.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_2f3}});}var _2f4=dijit.byId("delivery_to")?dijit.byId("delivery_to").get("value"):"";var _2f5=_2ee.store._arrayOfAllItems;var flag=false;for(var i=0;i<_2f5.length;i++){if(_2f5[i]&&_2f5[i].id!=""&&_2f5[i].id==_2f4){flag=true;break;}}if(!flag){dijit.byId("delivery_to").set("value","");dj.byId("delivery_to").set("value","");}},getIncoTerm:function(){var _2f6=null;var _2f7=dj.byId("inco_term");var _2f8;var _2f9=dj.byId("issuing_bank_abbv_name")?dj.byId("issuing_bank_abbv_name").get("value"):"";var _2fa=dj.byId("remitting_bank_abbv_name")?dj.byId("remitting_bank_abbv_name").get("value"):"";var _2fb=dj.byId("advising_bank_abbv_name")?dj.byId("advising_bank_abbv_name").get("value"):"";if(_2f9!=""){_2f8=_2f9+":"+dj.byId("inco_term_year").get("value");}else{if(_2fa!=""){_2f8=_2fa+":"+dj.byId("inco_term_year").get("value");}else{if(_2fb!=""){_2f8=_2fb+":"+dj.byId("inco_term_year").get("value");}else{_2f8=misys._config.bankAbbvNamePrefix+":"+dj.byId("inco_term_year").get("value");}}}_2f6=misys._config.incoTermProductMap[_2f8];var _2fc={"identifier":"id","items":[]};var _2fd=new dojo.data.ItemFileWriteStore({data:_2fc});if(_2f6!=undefined&&_2f6!=""){for(var j=0;j<_2f6.length;j++){_2fd.newItem({"id":_2f6[j].value,"name":_2f6[j].name});}_2f7.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_2fd}});if(_2f7){_2f7.store=_2fd;}_2f7.set("disabled",false);_2f7.fetchProperties={sort:[{attribute:"name"}]};}else{_2f7.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_2fd}});}if(dj.byId("inco_term_year").get("value")!==dj.byId("org_term_year").get("value")){dj.byId("inco_term").set("value","");dj.byId("org_term_year").set("value",dj.byId("inco_term_year").get("value"));}},checkForAttachments:function(){var _2fe=dj.byId("attIds");var _2ff=false;var _300=0;if(_2fe){var _301=[dj.byId(_c)];d.forEach(_301,function(_302){if(_302&&_302.grid){var arr=_302.grid.store._arrayOfAllItems;d.forEach(arr,function(_303,i){if(_303!=null){_2ff=true;_300++;}});}});}if(dj.byId(_c)&&dj.byId(_c).store){if(dj.byId(_c).store._arrayOfAllItems.length>0){return true;}}m._config.onSubmitErrorMsg=m.getLocalization("mandatoryMinimumFileUploadTypeError");return _2ff;},hasAttachments:function(){var _304=dj.byId("attIds");var _305=false;var _306=0;if(_304){var _307=[dj.byId(_c)];d.forEach(_307,function(_308){if(_308&&_308.grid){var arr=_308.grid.store._arrayOfAllItems;d.forEach(arr,function(_309,i){if(_309!=null){_305=true;_306++;}});}});}return _305;},toggleMT798Fields:function(_30a){var _30b=dj.byId(_30a).get("value");var _30c="";if(dj.byId("adv_send_mode")){_30c=dj.byId("adv_send_mode").get("value");}var _30d=m._config.customerBanksMT798Channel[_30b]===true&&_30c==="01";m.toggleFields(_30d,["delivery_channel","transport_mode_nosend","transport_mode"],null,false,false);m.toggleFields(_30d&&m.hasAttachments(),null,["delivery_channel"],false,false);if(_30d){if(dj.byId("delivery_channel")){m.animate("fadeIn","delivery_channel_row");m.connect("delivery_channel","onChange",function(){if(dj.byId(_c)){if(dj.byId("delivery_channel").get("value")==="FACT"){dj.byId(_c).displayFileAct(true);}else{dj.byId(_c).displayFileAct(false);}}});dj.byId("delivery_channel").onChange();}if(dj.byId("transport_mode")){m.animate("fadeIn","transport_mode_nosend_row");m.animate("fadeIn","transport_mode_text_nosend_row");}}else{if(dj.byId("delivery_channel")){m.animate("fadeOut","delivery_channel_row");}if(dj.byId("transport_mode")){m.animate("fadeOut","transport_mode_nosend_row");m.animate("fadeOut","transport_mode_text_nosend_row");}}},setRenewalFinalExpiryDate:function(){var _30e=calculateRenewalFinalExpiryDate();if(_30e){dj.byId("final_expiry_date").set("value",_30e);}if(!isPreCondStsfd){var _30f=dj.byId("final_expiry_date");if(_30f&&_30f.get("value")!==""){_30f.set("value",new Date().getHours());}}},calculateRenewalFinalExpiryDate:function(){var _310=dj.byId("renew_on_code")?dj.byId("renew_on_code").get("value"):"";var _311=dj.byId("renewal_calendar_date")?dj.byId("renewal_calendar_date").get("value"):"";var _312=dj.byId("renew_for_nb")?dj.byId("renew_for_nb").get("value"):"";var _313=dj.byId("renew_for_period")?dj.byId("renew_for_period").get("value"):"";var _314=dj.byId("rolling_renewal_nb")?dj.byId("rolling_renewal_nb").get("value"):"";var _315=null;var _316=null;var _317=true;var _318=null;if(_310==="01"){_316=dj.byId("exp_date")?dj.byId("exp_date").get("value"):"";var _319=dj.byId("org_exp_date")?dj.byId("org_exp_date"):"";if(!_316&&_319){_316=dojo.date.locale.parse(_319.get("value"),{locale:dojo.config.locale,formatLength:"short",selector:"date"});}if(_316==null){_317=false;}}else{if(_310==="02"){_316=_311;if(_316==null){_317=false;}}else{_317=false;}}if(_312==null||_312===""||isNaN(_312)){_317=false;}if(_313==null||_313===""){_317=false;}if(_314==null||_314===""||isNaN(_314)){_317=false;}if(_317&&_314){switch(_313){case "D":_315=d.date.add(_316,"day",_314*_312);break;case "W":_315=d.date.add(_316,"week",_314*_312);break;case "M":_315=d.date.add(_316,"month",_314*_312);break;case "Y":_315=d.date.add(_316,"year",_314*_312);break;default:break;}if(_315){_318=new Date(_315.getTime());_318=_318.getDate()+"/"+(_318.getMonth()+1)+"/"+_318.getFullYear();var _31a=new Date(_315.getTime());dj.byId("final_expiry_date").set("value",_31a);}}return _318;},calculateFinalExpiryDate:function(){var _31b=dj.byId("renew_on_code")?dj.byId("renew_on_code").get("value"):"";var _31c=dj.byId("renewal_calendar_date")?dj.byId("renewal_calendar_date").get("value"):"";var _31d=dj.byId("renew_for_nb")?dj.byId("renew_for_nb").get("value"):"";var _31e=dj.byId("renew_for_period")?dj.byId("renew_for_period").get("value"):"";var _31f=dj.byId("rolling_renewal_nb")?dj.byId("rolling_renewal_nb").get("value"):"";var _320=null;var _321=null;var _322=true;if(_31b==="01"){_321=dj.byId("exp_date")?dj.byId("exp_date").get("value"):"";var _323=dj.byId("org_exp_date")?dj.byId("org_exp_date"):"";if(!_321&&_323){_321=dojo.date.locale.parse(_323.get("value"),{locale:dojo.config.locale,formatLength:"short",selector:"date"});}if(_321==null){_322=false;}}else{if(_31b==="02"){_321=_31c;if(_321==null){_322=false;}}else{_322=false;}}if(_31d==null||_31d===""||isNaN(_31d)){_322=false;}if(_31e==null||_31e===""){_322=false;}if(_31f==null||_31f===""||isNaN(_31f)){_322=false;}if(_322&&_31f){switch(_31e){case "D":_320=d.date.add(_321,"day",_31f*_31d);break;case "W":_320=d.date.add(_321,"week",_31f*_31d);break;case "M":_320=d.date.add(_321,"month",_31f*_31d);break;case "Y":_320=d.date.add(_321,"year",_31f*_31d);break;default:break;}if(_320){var _324=new Date(_320.getTime());}}return _324;},markWidgetAsLoading:function(_325,_326){var _327=_325+"_id_loading_span";if(dj.byId(_325)){var _328;if(_326){if(!d.byId(_327)){dj.byId(_325).set("disabled",true);var _329="<img src=\""+m._config["context"]+m._config["imagesSrc"]+"loading.gif\"/>";_328=d.create("span",{innerHTML:_329,id:_327},dj.byId(_325).domNode,"after");dj.byId(_325).set("loadingIconDomNode",_328);}}else{_328=dj.byId(_325).get("loadingIconDomNode");dj.byId(_325).set("loadingIconDomNode",null);d.destroy(_328);dj.byId(_325).set("disabled",false);}}},populateFacilityReference:function(_32a){var _32b=_32a.get("value"),_32c="_",_32d=_32a.id.split(_32c),_32e=_32d[0]+_32c+_32d[1],_32f=dj.byId(_32e+"_abbv_name")?dj.byId(_32e+"_abbv_name").get("value"):"",_330=dj.byId("entity")?dj.byId("entity").get("value"):"",_331=dj.byId("facility_id"),_332=[],_333=d.byId("facilityLimitDetail");if(_32b+"S"!=="S"&&m._config.facilityReferenceCollection&&m._config.facilityReferenceCollection[_32b]&&_331&&_333&&m._config.facilityReferenceCollection[_32b][_32f+"_"+_330]){_331.set("displayedValue","");_332=m._config.facilityReferenceCollection[_32b][_32f+"_"+_330];if(_332){_331.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_332}});m.animate("wipeIn",_333);if(dj.byId("facility_mandatory")&&dj.byId("facility_mandatory").get("value")==="true"){m.toggleRequired("facility_id",true);}if(m._config.limitFieldIdCollection){_36();dj.byId("limit_id").set("displayedValue","");if(!m._config.isLoading&&dj.byId("limit_reference")&&dj.byId("limit_reference").get("value")+"S"!=="S"){dj.byId("limit_reference").set("value","");}}}}else{m.animate("wipeOut",_333);m.toggleRequired("facility_id",false);}},getLimitDetails:function(_334){var _335=dj.byId("facility_date"),_336=dj.byId("facility_reference"),_337=dj.byId("facility_id");if(_335&&_337){if(m._config.facilityReviewDateCollection&&m._config.facilityReviewDateCollection[_337.get("displayedValue")]){_335.set("displayedValue",m._config.facilityReviewDateCollection[_337.get("displayedValue")]);}else{_335.set("displayedValue","");}}if(_336){_336.set("value",dj.byId("facility_id").get("displayedValue"));}var _338=dj.byId("entity")?dj.byId("entity").get("value"):"",_339=m._config.productCode.toLowerCase()+"_type_code",_33a=_337?_337.get("value"):"",_33b=_336?_336.get("displayedValue"):"",_33c=dj.byId(_339)?dj.byId(_339).get("value"):"",_33d=dj.byId("beneficiary_country")?dj.byId("beneficiary_country").get("value"):"";if(_334||(_33d!=="")){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetLimitsJSONDataAction"),handleAs:"json",sync:true,content:{facility:_33b,facilityId:_33a,productCode:m._config.productCode,entity:_338,subProduct:"",productTypeCode:_33c,beneficiary:"",beneficiaryCountry:_33d},load:_39});var _33e=dj.byId("limit_id"),_33f=dj.byId("limit_reference");if(_33f&&_33e&&_33e.get("value")+"S"==="S"){_33e.set("displayedValue",_33f.get("value"));}else{if(_33e){_33e.set("displayedValue","");}}_36();}},setLimitFieldsValue:function(){var _340=this.get("displayedValue"),_341=m._config.limitFieldIdCollection,_342=m._config.limitCollection[_340];if(dj.byId("limit_reference")){dj.byId("limit_reference").set("value",this.get("displayedValue"));}d.forEach(_341,function(id,_343){var obj=dj.byId(id);if(obj&&_342){if(obj.declaredClass==="dijit.form.DateTextBox"){obj.set("displayedValue",_342[_343]);}else{obj.set("value",_342[_343]);}}else{if(obj){obj.set("displayedValue","");}}});},validateLimitBookingAmount:function(_344){var _345=dj.byId(m._config.productCode.toLowerCase()+"_amt"),_346=dj.byId(m._config.productCode.toLocaleLowerCase()+"_cur_code"),_347=dj.byId("limit_outstanding_cur_code"),_348=dj.byId("limit_outstanding_amount"),_349=dj.byId("facility_outstanding_cur_code"),_34a=dj.byId("facility_outstanding_amount"),_34b=dj.byId("booking_amt"),_34c="";if(!m._config.isLoading){if(this.id&&this.id!=="booking_amt"&&_34b){_34b.set("value","");}if(_345&&_346&&_347&&_348&&_349&&_34a&&_34b){var _34d=_345.get("value"),_34e=_348.get("value"),_34f=_34a.get("value"),_350=_347.get("value"),_351=_346.get("value"),_352=_349.get("value"),_353=_34b.get("value"),_354=true,_355=true,_356="";if(_350!==""&&_351!==""&&_352!==""){if(_350!==_351){_34c=_351+"_"+_350+"_limit,";}if(_352!==_350){_34c=_34c+_352+"_"+_350+"_facility";}if(_34c+"S"!=="S"){m.getCurrencyRateForFacility(_34c);if(isNaN(_353)||_353===""||(_344!==undefined&&_344==="true")){if(m._config.limitRate){_353=_34d*m._config.limitRate;_34b.attr("value",_353,false);dj.byId("tol_booking_amt").attr("value",_353,false);}if(isNaN(_353)||_353===""||(_344!==undefined&&_344==="true"&&_34d<_353)){_34b.attr("value",_353,false);dj.byId("tol_booking_amt").attr("value",_353,false);}if(dj.byId("pstv_tol_pct")&&(!isNaN(dj.byId("pstv_tol_pct").get("value")))){_353=_353+_353*(dj.byId("pstv_tol_pct").get("value")/100);_34b.attr("value",_353,false);dj.byId("tol_booking_amt").attr("value",_353,false);}}if(_353>dj.byId("tol_booking_amt")?dj.byId("tol_booking_amt").get("value"):0){_354=false;_356=m.getLocalization("invalidBookingAmountTnx");}if(_354&&_353>_34e){_354=false;if(m._config.limitRate!==1){_356=m.getLocalization("invalidBookingAmountCurrency",["Limit",_351+"/"+_350]);}else{_356=m.getLocalization("invalidBookingAmount",["Limit"]);}}if(_354&&_353>_34f*m._config.facilityRate){_354=false;if(m._config.facilityRate!==1){_356=m.getLocalization("invalidBookingAmountCurrency",["Facility",_352+"/"+_350]);}else{_356=m.getLocalization("invalidBookingAmount",["Limit"]);}}if(m._config.validate_tnxamt_with_limit_outstanding){if(_354&&dj.byId("tol_booking_amt").get("value")>_34e){_354=false;_355=false;_356=m.getLocalization("invalidTnxAmount");}}}else{if(isNaN(_353)||_353===""||(_344!==undefined&&_344==="true")){if(isNaN(_353)||_353===""||(_344!==undefined&&_344==="true"&&_34d<_353)){_353=_34d;if(dj.byId("pstv_tol_pct")&&(!isNaN(dj.byId("pstv_tol_pct").get("value")))){_353=_353+_353*(dj.byId("pstv_tol_pct").get("value")/100);}_34b.attr("value",_353,false);dj.byId("tol_booking_amt").attr("value",_353,false);}if(dj.byId("pstv_tol_pct")&&(!isNaN(dj.byId("pstv_tol_pct").get("value")))){_353=_34d;_353=_353+_353*(dj.byId("pstv_tol_pct").get("value")/100);_34b.attr("value",_353,false);dj.byId("tol_booking_amt").attr("value",_353,false);}}if(_353>dj.byId("tol_booking_amt")?dj.byId("tol_booking_amt").get("value"):0){_354=false;_356=m.getLocalization("invalidBookingAmountTnx");}if(_354&&_353>_34e){_354=false;_356=m.getLocalization("invalidBookingAmount",["Limit"]);}if(_354&&_353>_34f){_354=false;_356=m.getLocalization("invalidBookingAmount",["Facility"]);}if(m._config.validate_tnxamt_with_limit_outstanding){if(_354&&dj.byId("tol_booking_amt").get("value")>_34e){_354=false;_355=false;_356=m.getLocalization("invalidTnxAmount");}}}}if(!_354){var _357;if(!_355){dj.hideTooltip(_345.domNode);_357=function(){_345.focus();_345.set("state","Error");dj.showTooltip(_356,_345.domNode,0);};}else{dj.hideTooltip(_34b.domNode);_357=function(){_34b.focus();_34b.set("state","Error");dj.showTooltip(_356,_34b.domNode,0);};}m.dialog.show("ERROR",_356,"",_357);return false;}}}else{if(this.id==="limit_id"){m._config.isLoading=false;}}return true;},getCurrencyRateForFacility:function(_358){var _359=dijit.byId("recipient_bank_abbv_name");m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetMidRateForLimitAction"),handleAs:"json",sync:true,content:{currency:_358,bank_abbv_name:_359},load:function(_35a,args){m._config.limitRate=_35a.limit?_35a.limit:1;m._config.facilityRate=_35a.facility?_35a.facility:1;m._config.rateType=_35a.rateType?_35a.rateType:1;}});},getUserDetails:function(_35b,_35c){var _35d=m.formToXML({selector:".validate",xmlRoot:m._config.xmlTagName,ignoreDisabled:true});m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetUserDetails"),handleAs:"json",sync:true,content:{login_id:_35b,user_id:_35c,xmlString:_35d},load:_41});},getDynamicNarrativeText:function(_35e,_35f){var _360=m.formToXML({selector:".validate",xmlRoot:m._config.xmlTagName,ignoreDisabled:true});var _361=dijit.byId("product_code")?dijit.byId("product_code").get("value"):"";m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetDynamicNarrativeText"),handleAs:"json",sync:true,content:{phrase_id:_35f,field:_35e,xmlString:_360,product_code:_361},load:_3c});},togglePhraseProducts:function(){var _362=dj.byId("phrase_type")?dj.byId("phrase_type").get("value"):dj.byId("type").get("value"),_363=dj.byId("productcode")?dj.byId("productcode"):dj.byId("product"),_364=m._config.phraseTypesProductMap[_362];if(!misys._config.isModified){_363.set("value","");}if(_364){_363.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_364}});_363.fetchProperties={sort:[{attribute:"name"}]};_363.set("value","");_363.focus();}},togglePhraseCategory:function(){var _365=dj.byId("productcode")?dj.byId("productcode").get("value"):dj.byId("product").get("value"),_366=dj.byId("category"),_367=m._config.productCategoryMap[_365];if(_365!==""){if(_367){_366.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_367}});_366.fetchProperties={sort:[{attribute:"value"}]};_366.set("value","");_366.focus();_366.set("state","Error");}else{_367=m._config.productCategoryMap["ALL"];_366.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_367}});_366.fetchProperties={sort:[{attribute:"value"}]};}}},getAjaxSearchData:function(id,_368,opt,_369){var _36a=0;var _36b=dijit.byId("product_code")?dijit.byId("product_code").get("value"):"";var _36c="[";dojo.forEach(_368,function(_36d){var _36e=dj.byId(_36d);if(_36e&&_36e.state==="Error"){return;}if(_36a!==0){_36c=_36c+",";}_36a++;if(_36e){_36c=_36c+"'"+_36e.get("value")+"'";}else{_36c=_36c+"''";}});_36c=_36c+"]";var _36f="[";_36a=0;while(_36a!=(_369.length-1)){_36f=_36f+"'"+_369[_36a]+"',";_36a++;}_36f=_36f+"'"+_369[_36a]+"']";m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetStaticDataSearchAction"),handleAs:"json",sync:true,content:{option:opt,store_id:id,"widget[]":_36f,productcode:_36b,"fields[]":_36c},load:_8d});},toggleMutuallyExclusiveFields:function(_370){var _371=true;var _372=false;dojo.forEach(_370,function(_373){var _374=dj.byId(_373);if((_374.declaredClass==="dijit.form.NumberTextBox")||(_374.declaredClass==="misys.form.CurrencyTextBox")){if(_374&&!_372&&_374.get("value")+""!=="NaN"){_374.set("disabled",false);_372=true;_371=false;}else{_374.set("disabled",true);}}else{if(_374&&!_372&&_374.get("value")!==""){_374.set("disabled",false);_372=true;_371=false;}else{_374.set("disabled",true);}}});if(_371){dojo.forEach(_370,function(_375){var _376=dj.byId(_375);if(_376){_376.set("disabled",false);}});}},toggleMutuallyExclusiveMandatoryFields:function(_377){var _378=true;var _379=false;dojo.forEach(_377,function(_37a){var _37b=dj.byId(_37a);if((_37b.declaredClass==="dijit.form.NumberTextBox")||(_37b.declaredClass==="misys.form.CurrencyTextBox")){if(_37b&&!_379&&_37b.get("value")+""!=="NaN"){_37b.set("disabled",false);_37b.set("required",true);_379=true;_378=false;}else{_37b.set("disabled",true);_37b.set("required",false);}}else{if(_37b&&!_379&&_37b.get("value")!==""){_37b.set("disabled",false);_37b.set("required",true);_379=true;_378=false;}else{_37b.set("disabled",true);_37b.set("required",false);}}});if(_378){dojo.forEach(_377,function(_37c){var _37d=dj.byId(_37c);if(_37d){_37d.set("disabled",false);_37d.set("required",true);}});}},getPrgmCpty:function(_37e){misys.showProgramCptyDialog("programCounterparty","['abbv_name','name']",_37e,"","width:400px;height:400px",m.getLocalization("TABLE_PROGRAM_CPTY_LIST"),"legal"==="popup");},toggleMutuallyInclusiveFields:function(_37f,_380,_381){var _382=dj.byId(_37f);var _383=dj.byId(_380);if(_381==="required"){if(_382&&_382.value!==""&&_383){_383.set("required",true);}else{if(_382&&_382.value===""&&_383){_383.set("required",false);}}}else{if(_381==="disabled"){if(_382&&_382.disabled===true){_383.set("disabled",true);_383.set("value","");}else{if(_382&&_382.disabled===false){_383.set("disabled",false);}}}}},toggleTransferIndicatorFlag:function(_384){if(dj.byId("ntrf_flag").get("checked")){dj.byId("narrative_transfer_conditions").set("disabled",true);dj.byId("narrative_transfer_conditions").set("value","");document.getElementById("narrative_transfer_conditions_img").style.display="none";}else{dj.byId("narrative_transfer_conditions").set("disabled",false);dj.byId("narrative_transfer_conditions").set("value","");document.getElementById("narrative_transfer_conditions_img").style.display="block";}},toggleDeliverMode:function(_385){if(dj.byId("delv_org").get("value")==="99"){dj.byId("delv_org_text").set("disabled",false);}else{dj.byId("delv_org_text").set("disabled",true);dj.byId("delv_org_text").set("value","");}},clearDateCache:function(){misys._config.dateCache=[];},setDraweeDetailBankName:function(){if((dj.byId("cr_avl_by_code_2")&&dj.byId("cr_avl_by_code_2").get("checked"))||(dj.byId("cr_avl_by_code_3")&&dj.byId("cr_avl_by_code_3").get("checked"))){dj.byId("drawee_details_bank_name").set("value",dj.byId("drawee_details_bank_name")._resetValue);}},escapeHtml:function(str){return str.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;").replace(/'/gm,"&#39;");},showFSCMProgramIPCollectionDialog:function(type,_386,_387,_388,_389,_38a,_38b){var url=[],_38c={},_38d=_8,_38e={},_38f="GetStaticData",_390=_388||_9,_391,_392;if(_389.slice(_389.length-1)!==";"){_389+=";";}_38d+=_38f;_38e.option=type;_38e.fields=_386;d.mixin(_38e,_387);url.push("/screen/",_390);_38c.option=type;_38c.fields=_386;d.mixin(_38c,_387);_38c.dimensions=_389;_38c.popupType="LIST_DATA";_391=function(){var grid=dj.byId(type+"data_grid");grid.showMessage(grid.loadingMessage);m.grid.setStoreURL(grid,m.getServletURL(_38d),_38e);m.connect("CurrencyName","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("currencydata_grid"),["NAME"],["CurrencyName"]);}});};if(_38b){_392=dj.byId("childXhrDialog")||new dj.Dialog({title:_38a,id:"childXhrDialog",href:m.getServletURL(url.join("")),ioMethod:misys.xhrPost,ioArgs:{content:_38c}});m.dialog.connect(_392,"onLoad",_391);m.dialog.connect(_392,"onHide",function(){setTimeout(function(){m.dialog.disconnect(_392);_392.destroyRecursive();},2000);});var co=d.coords("xhrDialog");_392._relativePosition={x:co.x+30,y:co.y+30};_392.show();}else{m.dialog.show("URL","",_38a,null,_391,m.getServletURL(url.join("")),null,null,_38c);}},clearDataOnclicTenortype2or3:function(){dj.byId("tenor_maturity_date").set("displayedValue","");dj.byId("tenor_days").set("value","");dj.byId("tenor_period").set("value","");dj.byId("tenor_from_after").set("value","");dj.byId("tenor_days_type").set("value","");dj.byId("tenor_type_details").set("value","");dj.byId("tenor_base_date").set("displayedValue","");}});d.ready(function(){d.mixin(m._config,{advisingBank:_3,anyBank:"Any Bank",issuingBank:"Issuing Bank",other:"Other",namedBank:"Named Bank",firstPageLoad:false});});})(dojo,dijit,misys);dojo.require("misys.client.form.common_client");}