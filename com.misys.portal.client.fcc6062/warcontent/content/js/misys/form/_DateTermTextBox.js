/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.form._DateTermTextBox"]){dojo._hasResource["misys.form._DateTermTextBox"]=true;dojo.provide("misys.form._DateTermTextBox");dojo.require("dijit.form.DateTextBox");dojo.declare("misys.form._DateTermTextBox",[dijit.form.DateTextBox],{_parent:"",constructor:function(_1,_2){this.inherited(arguments);},postCreate:function(){this._resetValue=null;this.inherited(arguments);},validator:function(_3,_4){return true;},_setBlurValue:function(){this.inherited(arguments);if(this.isValidNumber()){this._parent._setNumberValue(this.get("displayedValue"));}},validate:function(_5){var _6="";var _7=this.disabled||(this.isValid(_5)&&this.dateTermValidator());if(_7){this._maskValidSubsetError=true;}var _8=this._isEmpty(this.textbox.value);var _9=!_7&&!_8&&_5&&this._isValidSubset();this.state=((_7||((!this._hasBeenBlurred||_5)&&_8)||_9)&&this._maskValidSubsetError)?"":"Error";if(this.state=="Error"){this._maskValidSubsetError=_5;}this._setStateClass();dijit.setWaiState(this.focusNode,"invalid",_7?"false":"true");if(_5){if(this.state=="Error"){_6=this.getErrorMessage(true);}else{_6=this.getPromptMessage(true);}this._maskValidSubsetError=true;}this.displayMessage(_6);return _7;},dateTermValidator:function(){if(this._parent.isStaticCodeSelected()){return true;}else{if(this._parent.isTermCodeSelected()){return this.isValidNumber();}else{if(this._parent.isBlankSelected()){return this.isValidNumber()||this.isValidDate();}else{return this.isValidDate();}}}},isValidDate:function(_a){enteredValue=this.textbox.value;constraints={"fullYear":true,"selector":"date"};return (new RegExp("^(?:"+this.regExpGen(constraints)+")"+(this.required?"":"?")+"$")).test(enteredValue)&&(!this.required||!this._isEmpty(enteredValue))&&(this._isEmpty(enteredValue)||this.parse(enteredValue,constraints)!==undefined);},isValidNumber:function(_b){enteredValue=this.textbox.value;return (new RegExp("^[0-9]*$")).test(enteredValue)&&(!this.required||!this._isEmpty(enteredValue));},toXML:function(){return this.displayedValue;}});}