/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.bank.user_feedback"]){dojo._hasResource["misys.binding.bank.user_feedback"]=true;dojo.provide("misys.binding.bank.user_feedback");dojo.require("dijit.layout.TabContainer");dojo.require("misys.form.common");dojo.require("misys.validation.common");dojo.require("dijit.form.Form");dojo.require("dijit.layout.ContentPane");dojo.require("misys.common");(function(d,dj,m){function _1(_2,_3,_4,_5,_6){if(_2.get("value")==null){return true;}m._config=m._config||{};m._config.effFromDateValidationInprocess=false;var _7;var _8=dj.byId(_3);var _9=new Date();var _a=_2.get("value");var _b=function(){dj.hideTooltip(_2.domNode);};if(!m._config.effToDateValidationInprocess){if(!m.compareDateFields(_2,_8)){m._config.effFromDateValidationInprocess=true;_7=misys.getLocalization(_4,[_5,_c(_2),_c(_8)]);_2.focus();_2.set("displayedValue","");_2.set("state","Error");dj.showTooltip(_7,_2.domNode,0);m._config.effFromDateValidationInprocess=false;setTimeout(_b,5000);return false;}if(_a>_9){m._config.effFromDateValidationInprocess=true;_7=misys.getLocalization(_6,[_5,_c(_2)]);_2.focus();_2.set("displayedValue","");_2.set("state","Error");dj.showTooltip(_7,_2.domNode,0);setTimeout(_b,5000);m._config.effFromDateValidationInprocess=false;return false;}}m._config.effFromDateValidationInprocess=false;return true;};function _c(_d){if(_d.get("type")==="hidden"){return d.date.locale.format(m.localizeDate(_d),{selector:"date"});}return _d.get("displayedValue");};function _e(_f,_10,_11,_12,_13){var _14;m._config=m._config||{};m._config.effToDateValidationInprocess=false;var _15=dj.byId(_10);var _16=new Date();var _17=_f.get("value");var _18=function(){dj.hideTooltip(_f.domNode);};if(!m._config.effFromDateValidationInprocess){if(!m.compareDateFields(_15,_f)){m._config.effToDateValidationInprocess=true;_14=misys.getLocalization(_11,[_12,_c(_f),_c(_15)]);_f.focus();_f.set("displayedValue","");_f.set("state","Error");dj.showTooltip(_14,_f.domNode,0);setTimeout(_18,5000);m._config.effToDateValidationInprocess=false;return false;}if(_17>_16){m._config.effToDateValidationInprocess=true;_14=misys.getLocalization(_13,[_12,_c(_f)]);_f.focus();_f.set("displayedValue","");_f.set("state","Error");dj.showTooltip(_14,_f.domNode,0);setTimeout(_18,5000);m._config.effToDateValidationInprocess=false;return false;}}m._config.effToDateValidationInprocess=false;return true;};d.mixin(m,{bind:function(){m.connect("feedback_time","onBlur",function(){var _19=this;_1(_19,"feedback_time2","generalFromDateGreaterThanToDate",misys.getLocalization("CreatedDate"),"thisDateGreaterThanCurrentDateFrom");});m.connect("feedback_time2","onBlur",function(){var _1a=this;_e(_1a,"feedback_time","generalToDateGreaterThanFromDate",misys.getLocalization("CreatedDate"),"thisDateGreaterThanCurrentDateTo");});}});})(dojo,dijit,misys);dojo.require("misys.client.binding.bank.user_feedback_client");}