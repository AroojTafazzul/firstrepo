/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.bank.report_ir"]){dojo._hasResource["misys.binding.bank.report_ir"]=true;dojo.provide("misys.binding.bank.report_ir");dojo.require("misys.form.common");dojo.require("misys.validation.common");dojo.require("misys.form.file");dojo.require("dijit.form.Form");dojo.require("dijit.form.Button");dojo.require("dijit.form.TextBox");dojo.require("misys.widget.Dialog");dojo.require("dijit.ProgressBar");dojo.require("dijit.form.ValidationTextBox");dojo.require("dijit.form.CheckBox");dojo.require("dijit.layout.ContentPane");dojo.require("dijit.layout.TabContainer");dojo.require("dijit.form.DateTextBox");dojo.require("misys.form.CurrencyTextBox");dojo.require("dijit.form.NumberTextBox");dojo.require("dijit.form.FilteringSelect");dojo.require("misys.form.addons");dojo.require("misys.form.SimpleTextarea");dojo.require("dojo.data.ItemFileReadStore");dojo.require("misys.widget.Collaboration");(function(d,dj,m){d.mixin(m,{bind:function(){m.setValidation("ir_cur_code",m.validateCurrency);m.connect("prod_stat_code","onChange",m.validateOutstandingAmount);m.setValidation("remittance_date",m.validateRemittanceDate);m.connect("ir_cur_code","onChange",function(){m.setCurrency(this,["ir_amt","ir_liab_amt"]);});m.connect("ir_amt","onBlur",function(){m.setTnxAmt(this.get("value"));});m.connect("ir_liab_amt","onBlur",function(){if(dj.byId("ir_amt")&&(dj.byId("ir_amt").get("value")<dj.byId("ir_liab_amt").get("value"))){var _1=function(){var _2=dijit.byId("ir_liab_amt");_2.set("state","Error");};m.dialog.show("ERROR",m.getLocalization("IRLiabilityAmountCanNotBeGreaterThanIRTotalAmount"),"",function(){setTimeout(_1,500);});}});m.connect("beneficiary_abbv_name","onFocus",m.enableBeneficiaryFields);m.connect("beneficiary_name","onFocus",m.enableBeneficiaryFields);m.connect("beneficiary_address_line_1","onFocus",m.enableBeneficiaryFields);m.connect("beneficiary_address_line_2","onFocus",m.enableBeneficiaryFields);m.connect("beneficiary_dom","onFocus",m.enableBeneficiaryFields);m.connect("prod_stat_code","onChange",m.toggleProdStatCodeFields);m.connect("prod_stat_code","onChange",function(){var _3=this.get("value");m.toggleFields(_3&&_3!=="01"&&_3!=="18",null,["iss_date","bo_ref_id"]);});m.connect("prod_stat_code","onChange",function(){m.toggleFields(this.get("value")!=="01",["action_req_code"],null,false,false);});m.connect("prod_stat_code","onChange",function(){var _4=dj.byId("prod_stat_code").get("value"),_5=dj.byId("ir_liab_amt");if(_5&&(_4==="01"||_4==="10"||_4==="06")){_5.set("readOnly",true);_5.set("disabled",true);}else{if(_5){_5.set("readOnly",false);_5.set("disabled",false);}}});},onFormLoad:function(){m.setCurrency(dj.byId("ir_cur_code"),["tnx_amt","ir_amt","ir_liab_amt"]);var _6=dj.byId("prod_stat_code"),_7=dj.byId("ir_liab_amt");if(_7&&_6&&(_6.get("value")==="01"||_6.get("value")==="10"||_6.get("value")==="06")){_7.set("readOnly",true);_7.set("disabled",true);}else{if(_7){_7.set("readOnly",false);_7.set("disabled",false);}}if(dj.byId("tnx_type_code")&&(dj.byId("tnx_type_code").get("value")==="15"||(dj.byId("tnx_type_code").get("value")==="13"))&&(m._config.enable_to_edit_customer_details_bank_side=="false")){dojo.style("transactionDetails","display","none");}else{if(m._config.enable_to_edit_customer_details_bank_side=="false"&&dojo.byId("release_dttm_view_row")){dojo.style("transactionDetails","display","none");}}},beforeSubmitValidations:function(){if(dj.byId("ir_amt")){if(!m.validateAmount((dj.byId("ir_amt"))?dj.byId("ir_amt"):0)){m._config.onSubmitErrorMsg=m.getLocalization("amountcannotzero");dj.byId("ir_amt").set("value","");return false;}}if(dj.byId("ir_amt")&&dj.byId("ir_liab_amt")&&(dj.byId("ir_amt").get("value")<dj.byId("ir_liab_amt").get("value"))){m._config.onSubmitErrorMsg=m.getLocalization("IRLiabilityAmountCanNotBeGreaterThanIRTotalAmount");dj.byId("ir_liab_amt").set("value","");return false;}return true;}});})(dojo,dijit,misys);dojo.require("misys.client.binding.bank.report_ir_client");}