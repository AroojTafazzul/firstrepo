/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.bank.report_ip"]){dojo._hasResource["misys.binding.bank.report_ip"]=true;dojo.provide("misys.binding.bank.report_ip");dojo.require("dijit.form.Form");dojo.require("dijit.form.Button");dojo.require("dijit.form.TextBox");dojo.require("misys.widget.Dialog");dojo.require("dijit.ProgressBar");dojo.require("dijit.form.ValidationTextBox");dojo.require("dijit.form.CheckBox");dojo.require("dijit.layout.ContentPane");dojo.require("dijit.form.DateTextBox");dojo.require("misys.form.CurrencyTextBox");dojo.require("dijit.form.FilteringSelect");dojo.require("dijit.layout.TabContainer");dojo.require("misys.form.SimpleTextarea");dojo.require("misys.widget.Collaboration");dojo.require("misys.form.addons");dojo.require("misys.form.common");dojo.require("misys.form.file");dojo.require("misys.validation.common");dojo.require("misys.openaccount.FormOpenAccountEvents");dojo.require("misys.grid.DataGrid");dojo.require("misys.form.SimpleTextarea");dojo.require("misys.form.common");dojo.require("misys.form.file");dojo.require("misys.validation.common");dojo.require("misys.layout.FloatingPane");dojo.require("dojo.data.ItemFileWriteStore");dojo.require("misys.openaccount.widget.LineItems");dojo.require("misys.openaccount.widget.LineItem");dojo.require("misys.openaccount.widget.ProductIdentifiers");dojo.require("misys.openaccount.widget.ProductIdentifier");dojo.require("misys.openaccount.widget.ProductCategories");dojo.require("misys.openaccount.widget.ProductCategory");dojo.require("misys.openaccount.widget.ProductCharacteristics");dojo.require("misys.openaccount.widget.ProductCharacteristic");dojo.require("misys.openaccount.widget.Adjustments");dojo.require("misys.openaccount.widget.Adjustment");dojo.require("misys.openaccount.widget.Payments");dojo.require("misys.openaccount.widget.Payment");dojo.require("misys.openaccount.widget.Taxes");dojo.require("misys.openaccount.widget.Tax");dojo.require("misys.openaccount.widget.AirTransports");dojo.require("misys.openaccount.widget.SeaTransports");dojo.require("misys.openaccount.widget.RoadTransports");dojo.require("misys.openaccount.widget.RailTransports");dojo.require("misys.openaccount.widget.TakingInTransports");dojo.require("misys.openaccount.widget.PlaceTransports");dojo.require("misys.openaccount.widget.FinalDestinationTransports");dojo.require("misys.openaccount.widget.Transport");dojo.require("misys.openaccount.widget.FreightCharges");dojo.require("misys.openaccount.widget.FreightCharge");dojo.require("misys.openaccount.widget.Incoterms");dojo.require("misys.openaccount.widget.Incoterm");dojo.require("misys.openaccount.widget.ContactDetails");dojo.require("misys.openaccount.widget.ContactDetail");dojo.require("misys.openaccount.widget.SUserInformations");dojo.require("misys.openaccount.widget.SUserInformation");dojo.require("misys.openaccount.widget.BUserInformations");dojo.require("misys.openaccount.widget.BUserInformation");(function(d,dj,m){d.mixin(m._config,{initReAuthParams:function(){var _1={productCode:dj.byId("product_code").get("value"),subProductCode:"",transactionTypeCode:"15",entity:dj.byId("entity")?dj.byId("entity").get("value"):"",currency:"",amount:"",es_field1:"",es_field2:""};return _1;},_hasLineItemShipmentDate:function(){var _2=dj.byId("line-items");if(_2&&_2.store!=null){var _3=_2.store._arrayOfAllItems;for(var i=0;i<_3.length;i++){if(_3[i]&&_3[i].last_ship_date!=""){dj.byId("last_ship_date").set("value",null);dj.byId("last_ship_date").set("disabled",true);break;}else{dj.byId("last_ship_date").set("disabled",false);}}}}});d.mixin(m,{bind:function(){var _4=dj.byId("tnx_cur_code"),_5=dj.byId("total_net_cur_code"),_6=dj.byId("liab_total_cur_code"),_7=dj.byId("finance_cur_code"),_8=dj.byId("inv_eligible_cur_code"),_9=dj.byId("total_net_amt"),_a=dj.byId("inv_eligible_amt"),_b=dj.byId("liab_total_amt"),_c=dj.byId("tnx_amt"),_d=dj.byId("finance_amt");m.setCurrency(_4,["tnx_amt"]);m.setCurrency(_5,["total_net_amt"]);m.setCurrency(_6,["liab_total_amt"]);if(_7){m.setCurrency(_7,["finance_amt"]);}if(_8){m.setCurrency(_8,["inv_eligible_amt"]);}m.connect("prod_stat_code","onChange",_e);if(dj.byId("inv_eligible_amt")){if(dj.byId("full_finance_accepted_flag")){m.connect("full_finance_accepted_flag","onChange",m.handleFullFinancingFlag);}m.connect("inv_eligible_amt","onChange",_f);m.connect("finance_amt","onChange",_10);m.connect("finance_cur_code","onChange",_10);if(_a.get("value")&&_b){_b.set("value",_9.get("value")-_a.get("value"));}else{if(_b){_b.set("value",_9.get("value"));}}}else{if(_c){m.connect("tnx_amt","onChange",_11);if(_c&&_c.get("value")&&_b){_b.set("value",_9.get("value")-_c.get("value"));}else{if(_b){_b.set("value",_9.get("value"));}}}}if(_9){m.connect("total_net_amt","onChange",_11);}m.setValidation("iss_date",m.validateIPInvoiceDate);m.setValidation("due_date",m.validateIPDueDate);m.setValidation("contact_email",m.validateEmailAddr);m.setValidation("buyer_bei",m.validateBEIFormat);m.setValidation("seller_bei",m.validateBEIFormat);m.setValidation("fin_inst_bic",m.validateBICFormat);m.setValidation("total_cur_code",m.validateCurrency);m.setValidation("fake_total_cur_code",m.validateCurrency);m.setValidation("total_net_cur_code",m.validateCurrency);m.setValidation("line_item_price_cur_code",m.validateCurrency);m.setValidation("line_item_total_net_cur_code",m.validateCurrency);m.setValidation("adjustment_cur_code",m.validateCurrency);m.setValidation("details_cur_code",m.validateCurrency);m.setValidation("tax_cur_code",m.validateCurrency);m.setValidation("freight_charge_cur_code",m.validateCurrency);m.setValidation("buyer_country",m.validateCountry);m.setValidation("seller_country",m.validateCountry);m.setValidation("bill_to_country",m.validateCountry);m.setValidation("ship_to_country",m.validateCountry);m.setValidation("consgn_country",m.validateCountry);m.setValidation("line_item_product_orgn_country",m.validateCountry);m.connect("total_cur_code","onChange",m.toggleDisableButtons);m.connect("total_cur_code","onBlur",_12);m.connect("freight_charges_type","onChange",m.manageFreightButton);m.connect("total_cur_code","onChange",m.managePOCurrency);m.connect("adjustment_amt","onChange",function(){m.toggleFields(isNaN(this.get("value")),null,["adjustment_rate"],false,false);});m.connect("adjustment_rate","onChange",function(){m.toggleFields(isNaN(this.get("value")),null,["adjustment_amt","adjustment_cur_code"],false,false);});m.connect("freight_charge_amt","onChange",function(){m.toggleFields(isNaN(this.get("value")),null,["freight_charge_rate"],false,false);});m.connect("freight_charge_rate","onChange",function(){m.toggleFields(isNaN(this.get("value")),null,["freight_charge_amt","freight_charge_cur_code"],false,false);});m.connect("tax_amt","onChange",function(){m.toggleFields(isNaN(this.get("value")),null,["tax_rate"],false,false);});m.connect("tax_rate","onChange",function(){m.toggleFields(isNaN(this.get("value")),null,["tax_amt","tax_cur_code"],false,false);});m.connect("display_other_parties","onClick",m.showHideOtherParties);m.connect("total_cur_code","onFocus",m.saveOldPOCurrency);m.connect("transport_type","onChange",m.onChangeTranportType);m.connect("payment_terms_type_1","onClick",m.onClickCheckPaymentTerms);m.connect("payment_terms_type_2","onClick",m.onClickCheckPaymentTerms);m.connect("seller_account_type","onChange",function(){m.onChangeSellerAccountType("form_settlement","seller_account_value","seller_account_type");});m.connect("seller_account_value","onBlur",function(){m.onBlurSellerAccount("form_settlement","seller_account_value","seller_account_type");});m.connect("last_match_date","onBlur",m.onBlurMatchDate);m.connect("line_item_qty_val","onBlur",m.computeLineItemAmount);m.connect("line_item_price_amt","onBlur",m.computeLineItemAmount);m.connect("line_item_qty_unit_measr_code","onChange",function(){if(dojo.byId("line_item_qty_unit_measr_other_row")){if(this.get("value")==="OTHR"){m.animate("fadeIn","line_item_qty_unit_measr_other_row");dj.byId("line_item_qty_unit_measr_other").set("readOnly",false);m.toggleRequired("line_item_qty_unit_measr_other",true);}else{m.animate("fadeOut","line_item_qty_unit_measr_other_row");dj.byId("line_item_qty_unit_measr_other").set("readOnly",true);dj.byId("line_item_qty_unit_measr_other").set("value","");m.toggleRequired("line_item_qty_unit_measr_other",false);}}});m.connect("fake_total_cur_code","onChange",function(){m.setCurrency(this,["fake_total_amt"]);});m.connect("total_net_cur_code","onChange",function(){m.setCurrency(this,["total_net_amt"]);});m.connect("total_net_inv_cur_code","onChange",function(){m.setCurrency(this,["total_net_inv_amt"]);});m.connect("line_item_price_cur_code","onChange",function(){m.setCurrency(this,["line_item_price_amt"]);});m.connect("details_cur_code","onChange",function(){m.setCurrency(this,["details_amt"]);});m.connect("fake_total_amt","onChange",function(){var _13=dj.byId("tnx_amt");if(_13&&(_13.get("value")===""||isNaN(_13.get("value")))){_13.set("value",dj.byId("fake_total_amt").get("value"));}});m.connect("total_net_amt","onChange",function(){var _14=dj.byId("total_net_inv_amt");if(_14){_14.set("value",dj.byId("total_net_amt").value);}});if(dj.byId("issuing_bank_abbv_name")){m.connect("entity","onChange",function(){dj.byId("issuing_bank_abbv_name").onChange();});}var _15=m._config.productCode.toLowerCase();if(_15=="ip"){m.connect("issuing_bank_customer_reference","onChange",m.setBuyerReference);}if(_15=="in"){m.connect("issuing_bank_customer_reference","onChange",m.setSellerReference);}var _16=dj.byId("issuing_bank_customer_reference"),_17=dj.byId("issuing_bank_abbv_name"),_18;if(_16){_18=_16.value;}if(_17){_17.onChange();}if(_16){_16.onChange();_16.set("value",_18);}m.connect(dj.byId("line_item_qty_unit_measr_code"),"onChange",function(){dj.byId("line_item_price_unit_measr_code").set("value",this.get("value"));});m.connect(dj.byId("details_code"),"onChange",m.paymentDetailsChange);m.connect(dj.byId("line_item_qty_unit_measr_code"),"onChange",function(){dj.byId("line_item_qty_unit_measr_label").set("value",this.get("displayedValue"));});m.connect(dj.byId("contact_type"),"onChange",function(){dj.byId("contact_type_decode").set("value",this.get("displayedValue"));});m.connect(dj.byId("product_identifier_code"),"onChange",function(){dj.byId("product_identifier_code_label").set("value",this.get("displayedValue"));});m.connect(dj.byId("product_category_code"),"onChange",function(){dj.byId("product_category_code_label").set("value",this.get("displayedValue"));});m.connect(dj.byId("product_characteristic_code"),"onChange",function(){dj.byId("product_characteristic_code_label").set("value",this.get("displayedValue"));});m.connect(dj.byId("adjustment_type"),"onChange",function(){dj.byId("adjustment_type_label").set("value",this.get("displayedValue"));});m.connect(dj.byId("tax_type"),"onChange",function(){dj.byId("tax_type_label").set("value",this.get("displayedValue"));});m.connect(dj.byId("freight_charge_type"),"onChange",function(){dj.byId("freight_charge_type_label").set("value",this.get("displayedValue"));});m.connect(dj.byId("incoterm_code"),"onChange",function(){dj.byId("incoterm_code_label").set("value",this.get("displayedValue"));});if(d.byId("adjustment_other_type_row")&&d.byId("adjustment_type")){if(dj.byId("adjustment_type").get("value")==="OTHR"){m.animate("fadeIn","adjustment_other_type_row");}else{m.animate("fadeOut","adjustment_other_type_row");}}if(d.byId("tax_other_type_row")&&d.byId("tax_type")){if(dj.byId("tax_type").get("value")==="OTHR"){m.animate("fadeIn","tax_other_type_row");}else{m.animate("fadeOut","tax_other_type_row");}}m.connect("adjustment_type","onChange",function(){m.toggleFields((this.get("value")==="OTHR"),null,["adjustment_other_type"]);if(d.byId("adjustment_other_type_row")){if(this.get("value")==="OTHR"){m.animate("fadeIn","adjustment_other_type_row");}else{m.animate("fadeOut","adjustment_other_type_row");}}});m.connect("tax_type","onChange",function(){m.toggleFields((this.get("value")==="OTHR"),null,["tax_other_type"]);if(d.byId("tax_other_type_row")){if(this.get("value")==="OTHR"){m.animate("fadeIn","tax_other_type_row");}else{m.animate("fadeOut","tax_other_type_row");}}});if(d.byId("product_category_other_code_row")&&d.byId("product_category_code")){if(dj.byId("product_category_code").get("value")==="OTHR"){m.animate("fadeIn","product_category_other_code_row");}else{m.animate("fadeOut","product_category_other_code_row");}}if(d.byId("product_characteristic_other_code_row")&&d.byId("product_characteristic_code")){if(dj.byId("product_characteristic_code").get("value")==="OTHR"){m.animate("fadeIn","product_characteristic_other_code_row");}else{m.animate("fadeOut","product_characteristic_other_code_row");}}if(d.byId("product_identifier_other_code_row")&&d.byId("product_identifier_code")){if(dj.byId("product_identifier_code").get("value")==="OTHR"){m.animate("fadeIn","product_identifier_other_code_row");}else{m.animate("fadeOut","product_identifier_other_code_row");}}if(d.byId("incoterm_other_row")&&d.byId("incoterm_code")){if(dj.byId("incoterm_code").get("value")==="OTHR"){m.animate("fadeIn","incoterm_other_row");}else{m.animate("fadeOut","incoterm_other_row");}}if(d.byId("details_other_paymt_terms_row")&&d.byId("details_code")){if(dj.byId("details_code").get("value")==="OTHR"){m.animate("fadeIn","details_other_paymt_terms_row");}else{m.animate("fadeOut","details_other_paymt_terms_row");}}if(d.byId("freight_charge_other_type_row")&&d.byId("freight_charge_type")){if(dj.byId("freight_charge_type").get("value")==="OTHR"){m.animate("fadeIn","freight_charge_other_type_row");}else{m.animate("fadeOut","freight_charge_other_type_row");}}m.connect("freight_charge_type","onChange",function(){m.toggleFields((this.get("value")==="OTHR"),null,["freight_charge_other_type"]);if(d.byId("freight_charge_other_type_row")){if(this.get("value")==="OTHR"){m.animate("fadeIn","freight_charge_other_type_row");}else{m.animate("fadeOut","freight_charge_other_type_row");}}});m.connect("details_code","onChange",function(){m.toggleFields((this.get("value")==="OTHR"),null,["details_other_paymt_terms"]);if(d.byId("details_other_paymt_terms_row")){if(this.get("value")==="OTHR"){m.animate("fadeIn","details_other_paymt_terms_row");}else{m.animate("fadeOut","details_other_paymt_terms_row");}}});m.connect("incoterm_code","onChange",function(){m.toggleFields((this.get("value")==="OTHR"),null,["incoterm_other"]);if(d.byId("incoterm_other_row")){if(this.get("value")==="OTHR"){m.animate("fadeIn","incoterm_other_row");}else{m.animate("fadeOut","incoterm_other_row");}}});m.connect("product_identifier_code","onChange",function(){m.toggleFields((this.get("value")==="OTHR"),null,["product_identifier_other_code"]);if(d.byId("product_identifier_other_code_row")){if(this.get("value")==="OTHR"){m.animate("fadeIn","product_identifier_other_code_row");}else{m.animate("fadeOut","product_identifier_other_code_row");}}});m.connect("product_characteristic_code","onChange",function(){m.toggleFields((this.get("value")==="OTHR"),null,["product_characteristic_other_code"]);if(d.byId("product_characteristic_other_code_row")){if(this.get("value")==="OTHR"){m.animate("fadeIn","product_characteristic_other_code_row");}else{m.animate("fadeOut","product_characteristic_other_code_row");}}});m.connect("product_category_code","onChange",function(){m.toggleFields((this.get("value")==="OTHR"),null,["product_category_other_code"]);if(d.byId("product_characteristic_other_code_row")){if(this.get("value")==="OTHR"){m.animate("fadeIn","product_category_other_code_row");}else{m.animate("fadeOut","product_category_other_code_row");}}});m.onClickCheckPaymentTerms();},onFormLoad:function(){var _19=dj.byId("tnx_cur_code"),_1a=dj.byId("total_net_cur_code"),_1b=dj.byId("total_net_inv_cur_code"),_1c=dj.byId("liab_total_cur_code"),_1d=dj.byId("prod_stat_code"),_1e=dj.byId("total_net_amt"),_1f=dj.byId("total_net_inv_amt"),_20=dj.byId("inv_eligible_amt"),_21=dj.byId("inv_eligible_cur_code"),_22=dj.byId("finance_amt"),_23=dj.byId("finance_cur_code"),_24=dj.byId("full_finance_accepted_flag");var _25=dj.byId("action_req_code");m.setCurrency(_1c,["liab_total_amt"]);m.setCurrency(_19,["tnx_amt"]);m.setCurrency(_1a,["total_net_amt"]);m.setCurrency(_1b,["total_net_inv_amt"]);if(_1f){_1f.set("value",_1e.get("value"));}if(d.byId("inv_eligible_cur_code_row")&&!dj.byId("full_finance_accepted_flag")){if(_1d.get("value")==="14"||_1d.get("value")==="15"){m.animate("wipeOut",d.byId("tnx_cur_code_row"));}else{m.animate("wipeOut",d.byId("inv_eligible_cur_code_row"));m.animate("wipeOut",d.byId("finance_cur_code_row"));m.connect("tnx_amt","onBlur",_11);}}if(d.byId("eligibility_content")){if(dj.byId("prod_stat_code").get("value")==="46"){if(dj.byId("tnx_amt")&&(dj.byId("tnx_amt").get("value")===""||isNaN(dj.byId("tnx_amt").get("value")))){dj.byId("tnx_amt").set("value","");dj.byId("tnx_amt").set("readOnly",true);}}}if(parseFloat(_20)<parseFloat(_1e)){dj.byId("full_finance_accepted_flag").set("checked",false);_20.set("readOnly",false);}if(_25){if(_1d.get("value")==="01"||(dj.byId("sub_tnx_type_code")&&dj.byId("sub_tnx_type_code").get("value")==="91")){_25.set("value","");m.animate("wipeOut",d.byId("action_req_code_row"));}else{if(_1d.get("value")==="04"||_1d.get("value")==="07"){_25.set("value","07");_25.set("readOnly",true);m.animate("wipeIn",d.byId("action_req_code_row"));}}}m.setCurrency(dj.byId("total_net_cur_code"),["total_net_amt"]);m.setCurrency(dj.byId("total_net_inv_cur_code"),["total_net_inv_amt"]);var _26=dj.byId("display_other_parties");if(_26){m.showHideOtherParties();}m.toggleDisableButtons();if(dj.byId("add_payment_term_button")&&!(dj.byId("payment_terms_type_1").get("checked")||dj.byId("payment_terms_type_2").get("checked"))){dj.byId("add_payment_term_button").set("disabled",true);}var _27=dj.byId("issuing_bank_customer_reference"),_28=dj.byId("issuing_bank_abbv_name"),_29;if(_27){_29=_27.value;}if(_28){_28.onChange();}if(_27){_27.onChange();_27.set("value",_29);}m.computePOTotalAmount();m._config._hasLineItemShipmentDate();m.managePOCurrency();if(d.byId("line_item_qty_unit_measr_other_row")){m.animate("fadeOut","line_item_qty_unit_measr_other_row");}if(_24&&_1d&&_1d.get("value")==="01"){if(_20){_20.set("disabled",true);_20.set("value",null);}if(_21){_21.set("disabled",true);_21.set("value",null);}if(_24){_24.set("disabled",true);_24.set("checked",false);}if(_22){_22.set("disabled",true);_22.set("value",null);}if(_23){_23.set("disabled",true);_23.set("value",null);}}m.toggleFSCMTransactionDetails(_1d);}});function _11(){var _2a=dj.byId("tnx_amt"),_2b=dj.byId("total_net_amt"),_2c=dj.byId("liab_total_amt");if(_2a&&!isNaN(_2a.get("value"))){if((_2a.get("value")>_2b.get("value"))&&_2c){_2a.set("value","");_2c.set("value",_2b.get("value"));}else{if(_2c){_2c.set("value",_2b.get("value")-_2a.get("value"));}}}else{if(_2c){_2c.set("value",_2b.get("value"));}}};function _e(){var _2d=dj.byId("prod_stat_code"),_2e=d.byId("eligibility_content"),_2f=dj.byId("org_eligibility_content"),_30=dj.byId("full_finance_accepted_flag"),_31=dj.byId("inv_eligible_amt"),_32=dj.byId("finance_amt"),_33=dj.byId("inv_eligible_cur_code"),_34=dj.byId("finance_cur_code"),_35=dj.byId("total_net_amt"),_36=dj.byId("total_net_cur_code"),_37=d.byId("finance_requested_flag");var _38=dj.byId("action_req_code");var _39=dj.byId("liab_total_amt");if(_2e){if(_2d.get("value")==="46"&&dj.byId("tnx_amt")){_2e.innerHTML=m.getLocalization("eligibleForFinancing");dj.byId("tnx_amt").set("readOnly",false);}else{if(_2d.get("value")==="47"){_2e.innerHTML=m.getLocalization("notEligibleForFinancing");dj.byId("tnx_amt").set("value",0);dj.byId("tnx_amt").set("readOnly",true);if(_39&&_35){_39.set("value",_35);}}else{_2e.innerHTML=_2f.value;dj.byId("tnx_amt").set("readOnly",false);}}}if(_30){if(_2d.get("value")==="01"){_31.set("disabled",true);_31.set("value",null);_33.set("disabled",true);_33.set("value",null);_30.set("disabled",true);_30.set("checked",false);_32.set("disabled",true);_32.set("value",null);_34.set("disabled",true);_34.set("value",null);}else{if(_2d.get("value")==="04"){_31.set("disabled",false);_33.set("disabled",false);_33.set("value",_36.get("value"));_30.set("disabled",false);_32.set("disabled",false);_34.set("disabled",false);_34.set("value",_36.get("value"));if(dj.byId("org_inv_eligible_amt")&&(dj.byId("org_inv_eligible_amt").get("value")==_35.get("value"))){_30.set("checked",true);_31.set("value",_35.get("value"));_32.set("value",_35.get("value"));}else{_31.set("value",dj.byId("org_inv_eligible_amt").get("value"));_32.set("value",dj.byId("org_inv_eligible_amt").get("value"));}}}}else{if(_32){if(_2d.get("value")==="14"||_2d.get("value")==="15"){m.animate("wipeIn",d.byId("inv_eligible_cur_code_row"));m.animate("wipeIn",d.byId("finance_cur_code_row"));m.animate("wipeOut",d.byId("tnx_cur_code_row"));if(_2d.get("value")==="15"){_31.set("readOnly",true);_31.set("value",_35.value);_32.set("value",_35.value);_34.set("value",_33.value);}else{_31.set("readOnly",false);_31.set("value",_35.value);_32.set("value",_35.value);_34.set("value",_33.value);}}else{_31.set("value",null);_32.set("value",null);_34.set("value",null);m.animate("wipeOut",d.byId("inv_eligible_cur_code_row"));m.animate("wipeOut",d.byId("finance_cur_code_row"));m.animate("wipeIn",d.byId("tnx_cur_code_row"));}}}if(_38){if(_2d.get("value")==="01"||(dj.byId("sub_tnx_type_code")&&dj.byId("sub_tnx_type_code").get("value")==="91")){_38.set("value","");m.animate("wipeOut",d.byId("action_req_code_row"));}else{if(_2d.get("value")==="04"||_2d.get("value")==="07"){_38.set("value","07");_38.set("readOnly",true);m.animate("wipeIn",d.byId("action_req_code_row"));}}}if(_37){if(_2d.get("value")==="01"){_37.value="N";}else{if(_2d.get("value")==="04"){_37.value="Y";}}}m.toggleFSCMTransactionDetails(_2d);};function _f(){var _3a=dj.byId("total_net_amt"),_3b=dj.byId("inv_eligible_amt"),_3c=dj.byId("liab_total_amt"),_3d=dj.byId("finance_amt");if(_3b.get("value")>_3a.get("value")){_3b.set("value","");m.dialog.show("ERROR",m.getLocalization("errorInvoiceElgibleAmountGreaterThanInvoiceAmount"));}else{if(_3b.get("value")){_3d.set("value",_3b.get("value"));_3c.set("value",_3a.get("value")-_3b.get("value"));}else{_3c.set("value",_3a.get("value"));}}_10();};function _10(){var _3e=dj.byId("total_net_amt"),_3f=dj.byId("inv_eligible_amt"),_40=dj.byId("finance_amt"),_41=dj.byId("inv_eligible_cur_code"),_42=dj.byId("finance_cur_code"),_43=dj.byId("full_finance_accepted_flag"),_44=dj.byId("liab_total_amt"),_45;if(_40.get("value")&&_42.get("value")&&_42.get("value")==_41.get("value")){if(_40.get("value")>_3e.get("value")){_40.set("value","");_45=_43?m.getLocalization("errorFinanceAmountGreaterThanInvoiceAmount"):m.getLocalization("errorPaymentAmountGreaterThanInvoiceAmount");m.dialog.show("ERROR",_45);}else{if(_3f.get("value")&&_40.get("value")>_3f.get("value")){_40.set("value",_3f.get("value"));_45=_43?m.getLocalization("errorFinanceAmountGreaterThanInvoiceEligibleAmount"):m.getLocalization("errorPaymentAmountGreaterThanInvoiceEligibleAmount");m.dialog.show("ERROR",_45);}}}if(_40&&!isNaN(_40.value)){_44.set("value",_3e.get("value")-_40.get("value"));}};function _12(){var _46=misys.getLocalization("resetInvoicePayableCurrency");if(dj.byId("line-items")&&dj.byId("line-items").store&&dj.byId("line-items").store!=null&&dj.byId("line-items").store._arrayOfAllItems.length>0){for(var i=0,_47=dj.byId("line-items").store._arrayOfAllItems.length;i<_47;i++){var _48=dj.byId("line-items").store._arrayOfAllItems[i];if(_48!=null&&_48.price_cur_code!==this.get("value")){var _49=function(){if(dj.byId("line-items").grid&&dj.byId("line-items").grid.store){dj.byId("line-items").grid.store.fetch({query:{store_id:"*"},onComplete:dojo.hitch(this,function(_4a,_4b){d.forEach(_4a,function(_4c){dj.byId("line-items").grid.store.setValue(_4c,"price_cur_code",dj.byId("total_cur_code").get("value"));dj.byId("line-items").grid.store.setValue(_4c,"total_cur_code",dj.byId("total_cur_code").get("value"));dj.byId("line-items").grid.store.setValue(_4c,"total_net_cur_code",dj.byId("total_cur_code").get("value"));if(_4c.taxes&&_4c.taxes.length>0){dj.byId("tax_cur_code").set("value",dj.byId("total_cur_code").get("value"));if(_4c.taxes[0]._values!=""&&_4c.taxes[0]._values.length>0){for(i=0;i<_4c.taxes[0]._values.length;i++){_4c.taxes[0]._values[i].cur_code=dj.byId("total_cur_code").get("value");}}}if(_4c.adjustments&&_4c.adjustments.length>0){dj.byId("adjustment_cur_code").set("value",dj.byId("total_cur_code").get("value"));if(_4c.adjustments[0]._values!=""&&_4c.adjustments[0]._values.length>0){for(i=0;i<_4c.adjustments[0]._values.length;i++){_4c.adjustments[0]._values[i].cur_code=dj.byId("total_cur_code").get("value");}}}if(_4c.freight_charges&&_4c.freight_charges.length>0){dj.byId("freight_charge_cur_code").set("value",dj.byId("total_cur_code").get("value"));if(_4c.freight_charges[0]._values!=""&&_4c.freight_charges[0]._values.length>0){for(i=0;i<_4c.freight_charges[0]._values.length;i++){_4c.freight_charges[0]._values[i].cur_code=dj.byId("total_cur_code").get("value");}}}},dj.byId("line-items"));})});dj.byId("line-items").grid.store.save();var _4d=dj.byId("line-items");setTimeout(function(){_4d.renderSections();_4d.grid.render();},200);}};var _4e=function(){dj.byId("total_cur_code").set("value",dj.byId("line-items").store._arrayOfAllItems[0].price_cur_code);};m.dialog.show("CONFIRMATION",_46,"","","","",_49,_4e);}}}if(dj.byId("po-adjustments")&&dj.byId("po-adjustments").store&&dj.byId("po-adjustments").store!=null&&dj.byId("po-adjustments").store._arrayOfAllItems.length>0){if(dj.byId("po-adjustments").grid&&dj.byId("po-adjustments").grid.store){dj.byId("po-adjustments").grid.store.fetch({query:{store_id:"*"},onComplete:dojo.hitch(this,function(_4f,_50){d.forEach(_4f,function(_51){dj.byId("po-adjustments").grid.store.setValue(_51,"cur_code",dj.byId("total_cur_code").get("value"));},dj.byId("po-adjustments"));})});}}if(dj.byId("po-taxes")&&dj.byId("po-taxes").store&&dj.byId("po-taxes").store!=null&&dj.byId("po-taxes").store._arrayOfAllItems.length>0){if(dj.byId("po-taxes").grid&&dj.byId("po-taxes").grid.store){dj.byId("po-taxes").grid.store.fetch({query:{store_id:"*"},onComplete:dojo.hitch(this,function(_52,_53){d.forEach(_52,function(_54){dj.byId("po-taxes").grid.store.setValue(_54,"cur_code",dj.byId("total_cur_code").get("value"));},dj.byId("po-taxes"));})});}}if(dj.byId("po-freight-charges")&&dj.byId("po-freight-charges").store&&dj.byId("po-freight-charges").store!=null&&dj.byId("po-freight-charges").store._arrayOfAllItems.length>0){if(dj.byId("po-freight-charges").grid&&dj.byId("po-freight-charges").grid.store){dj.byId("po-freight-charges").grid.store.fetch({query:{store_id:"*"},onComplete:dojo.hitch(this,function(_55,_56){d.forEach(_55,function(_57){dj.byId("po-freight-charges").grid.store.setValue(_57,"cur_code",dj.byId("total_cur_code").get("value"));},dj.byId("po-freight-charges"));})});}}};})(dojo,dijit,misys);dojo.require("misys.client.binding.bank.report_ip_client");}