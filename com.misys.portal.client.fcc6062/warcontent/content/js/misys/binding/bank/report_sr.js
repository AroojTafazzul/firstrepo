/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.bank.report_sr"]){dojo._hasResource["misys.binding.bank.report_sr"]=true;dojo.provide("misys.binding.bank.report_sr");dojo.require("misys.form.common");dojo.require("misys.validation.common");dojo.require("misys.form.file");dojo.require("dijit.form.Form");dojo.require("dijit.form.Button");dojo.require("dijit.form.TextBox");dojo.require("misys.widget.Dialog");dojo.require("dijit.ProgressBar");dojo.require("dijit.form.ValidationTextBox");dojo.require("dijit.form.CheckBox");dojo.require("dijit.layout.ContentPane");dojo.require("dijit.layout.TabContainer");dojo.require("dijit.form.DateTextBox");dojo.require("misys.form.CurrencyTextBox");dojo.require("dijit.form.NumberTextBox");dojo.require("dijit.form.FilteringSelect");dojo.require("misys.form.addons");dojo.require("misys.form.SimpleTextarea");dojo.require("dojo.data.ItemFileReadStore");dojo.require("misys.widget.Collaboration");dojo.require("misys.binding.bank.report_sr_swift");(function(d,dj,m){var _1="NOT ALLOWED";var _2="ALLOWED";d.mixin(m,{bind:function(){m.setValidation("iss_date",m.validateMOProdIssueDate);m.setValidation("exp_date",m.validateBankExpiryDate);m.setValidation("pstv_tol_pct",m.validateTolerance);m.setValidation("neg_tol_pct",m.validateTolerance);m.setValidation("max_cr_desc_code",m.validateMaxCreditTerm);m.setValidation("last_ship_date",m.validateLastShipmentDate);m.setValidation("lc_cur_code",m.validateCurrency);m.setValidation("latest_answer_date",m.validateLatestAnswerDate);m.setValidation("lc_govern_country",m.validateCountry);m.connect("ntrf_flag","onClick",m.toggleTransferIndicatorFlag);m.connect("lc_available_amt","onBlur",m.validateLCAvailableAmt);m.connect("lc_liab_amt","onBlur",m.validateLCLiabAmt);m.setValidation("renew_for_nb",m.validateRenewFor);m.setValidation("advise_renewal_days_nb",m.validateDaysNotice);m.setValidation("rolling_renewal_nb",m.validateNumberOfRenewals);m.setValidation("rolling_cancellation_days",m.validateCancellationNotice);m.setValidation("renewal_calendar_date",m.validateRenewalCalendarDate);m.setValidation("bo_comment",m.bofunction);var _3=["draft_term","narrative_description_goods","narrative_documents_required","narrative_additional_instructions","narrative_special_beneficiary","narrative_special_recvbank","narrative_charges","narrative_period_presentation","narrative_shipment_period","narrative_sender_to_receiver","narrative_payment_instructions","narrative_additional_amount"];var _4=[];for(var i=0;i<=_3.length;i++){if(dj.byId(_3[i])&&dj.byId(_3[i])!==null){_4.push(_3[i]);}}if(dj.byId("exp_event")){_4.push("exp_event");}d.forEach(_4,function(id){var _5=dj.byId(id);_5.onBlur(_5);});m.connect("projected_expiry_date","onChange",function(){var _6=dj.byId("exp_date");var _7=dj.byId("final_expiry_date");var _8=function(){dj.hideTooltip(dj.byId("projected_expiry_date").domNode);};var _9=this.get("displayedValue");if(_6&&!m.compareDateFields(_6,this)){this.set("value",null);dj.showTooltip(m.getLocalization("projectedExpDateLessThanTransactionExpDtError",[_9,_6.get("displayedValue")]),dj.byId("projected_expiry_date").domNode,0);setTimeout(_8,2000);}else{if(_7&&!m.compareDateFields(this,_7)){this.set("value",null);dj.showTooltip(m.getLocalization("projectedExpDateGreaterThanFinalExpDtError",[_9,_7.get("displayedValue")]),dj.byId("projected_expiry_date").domNode,0);setTimeout(_8,2000);}}});m.connect("final_expiry_date","onChange",function(){var _a=dj.byId("exp_date");var _b=dj.byId("projected_expiry_date");var _c=function(){dj.hideTooltip(dj.byId("final_expiry_date").domNode);};var _d=this.get("displayedValue");if(_a&&!m.compareDateFields(_a,this)){this.set("value",null);this.set("state","Error");dj.showTooltip(m.getLocalization("finalExpDateLessThanTransactionExpDtError",[_d,_a.get("displayedValue")]),dj.byId("final_expiry_date").domNode,0);setTimeout(_c,2000);}else{if(_b&&!m.compareDateFields(_b,this)){this.set("value",null);dj.showTooltip(m.getLocalization("finalExpDateLessThanProjectedExpDtError",[_d,_b.get("displayedValue")]),dj.byId("final_expiry_date").domNode,0);setTimeout(_c,2000);}}});m.connect("prod_stat_code","onChange",m.validateOutstandingAmount);m.connect(dj.byId("prod_stat_code"),"onChange",function(){this.validate();});m.connect("prod_stat_code","onChange",m.toggleProdStatCodeFields);m.connect("prod_stat_code","onChange",function(){var _e=this.get("value");m.toggleFields(_e&&_e!=="01"&&_e!=="18",null,["iss_date","bo_ref_id"]);});m.connect("prod_stat_code","onChange",function(){m.updateOutstandingAmount(dj.byId("lc_liab_amt"),dj.byId("org_lc_liab_amt"));});m.connect("prod_stat_code","onChange",function(){var _f=dj.byId("prod_stat_code").get("value"),_10=dj.byId("lc_liab_amt");if(_10&&(_f==="01"||_f==="10"||_f==="06")){_10.set("readOnly",true);_10.set("disabled",true);}else{if(_10){_10.set("readOnly",false);_10.set("disabled",false);}}});m.connect("cfm_inst_code_1","onClick",m.resetConfirmationCharges);m.connect("cfm_inst_code_2","onClick",m.resetConfirmationCharges);m.connect("cfm_inst_code_3","onClick",m.resetConfirmationCharges);m.connect("cfm_chrg_brn_by_code_1","onClick",m.checkConfirmationCharges);m.connect("cfm_chrg_brn_by_code_2","onClick",m.checkConfirmationCharges);if(m._config.swift2018Enabled){m._bindSwift2018();}var _11=["cr_avl_by_code_1","cr_avl_by_code_2","cr_avl_by_code_3","cr_avl_by_code_4","cr_avl_by_code_5"];d.forEach(_11,function(id){m.connect(id,"onClick",m.toggleBankPaymentDraftAt);m.connect(id,"onClick",function(){var _12=dj.byId("cr_avl_by_code_2").get("checked"),_13=dj.byId("cr_avl_by_code_3").get("checked");if(d.byId("drawee_details_bank_img")){if(!_12&&!_13){m.animate("fadeOut","drawee_details_bank_img");}else{m.animate("fadeIn","drawee_details_bank_img");}}m.toggleFields(_12||_13,["drawee_details_bank_address_line_2","drawee_details_bank_dom","drawee_details_bank_address_line_4"],["drawee_details_bank_name","drawee_details_bank_address_line_1"]);if(!dj.byId("cr_avl_by_code_1").get("checked")){dj.byId("draft_term").set("value","");}dj.byId("draft_term").set("disabled",false);dj.byId("draft_term_img").set("disabled",false);m.toggleRequired("draft_term",true);});});m.connect("cr_avl_by_code_6","onClick",function(){dj.byId("draft_term").set("value","");dj.byId("draft_term").set("disabled",true);dj.byId("draft_term_img").set("disabled",true);m.toggleRequired("draft_term",false);dj.byId("drawee_details_bank_name").set("value","");var ids=["drawee_details_bank_name","drawee_details_bank_address_line_1","drawee_details_bank_address_line_2","drawee_details_bank_dom","drawee_details_bank_address_line_4"];d.forEach(ids,function(id){var _14=dj.byId(id);if(_14){_14.set("disabled",true);m.toggleRequired(id,false);}});});m.connect("advise_mode_code_1","onClick",function(){m.toggleFields(this.get("checked"),null,["part_ship_detl_text"]);});m.connect("advise_mode_code_2","onClick",function(){m.toggleFields(this.get("checked"),["advise_thru_bank_name","advise_thru_bank_address_line_1","advise_thru_bank_address_line_2","advise_thru_bank_dom","advise_thru_bank_address_line_4"],null);});m.connect("advise_mode_code","onChange",function(){m.toggleFields(this.get("value")=="02",["advise_thru_bank_name","advise_thru_bank_address_line_1","advise_thru_bank_address_line_2","advise_thru_bank_dom","advise_thru_bank_address_line_4"],["advise_thru_bank_name","advise_thru_bank_address_line_1"]);});m.connect("cr_avl_by_code_1","onChange",function(){if(!dj.byId("cr_avl_by_code_6")||!dj.byId("cr_avl_by_code_6").get("checked")){m.toggleFields(!this.get("checked"),null,["draft_term"],false);}if(this.get("checked")){dj.byId("draft_term").set("value","Sight");}else{dj.byId("draft_term").set("value","");}});m.connect("lc_cur_code","onChange",function(){m.setCurrency(this,["lc_amt"]);m.setCurrency(this,["lc_available_amt","lc_liab_amt"]);});m.connect("lc_amt","onBlur",function(){m.setTnxAmt(this.get("value"));});m.connect("last_ship_date","onClick",function(){m.toggleDependentFields(this,dj.byId("narrative_shipment_period"),m.getLocalization("shipmentDateOrPeriodExclusivityError"));});m.connect("last_ship_date","onChange",function(){m.toggleDependentFields(this,dj.byId("narrative_shipment_period"),m.getLocalization("shipmentDateOrPeriodExclusivityError"));});m.connect("narrative_shipment_period","onClick",function(){m.toggleDependentFields(this,dj.byId("last_ship_date"),m.getLocalization("shipmentDateOrPeriodExclusivityError"));});m.connect("narrative_shipment_period","onChange",function(){m.toggleDependentFields(this,dj.byId("last_ship_date"),m.getLocalization("shipmentDateOrPeriodExclusivityError"));});m.connect("inco_term_year","onChange",m.getIncoTerm);m.connect("delivery_to","onChange",m.getDeliveryTo);m.connect("delivery_to","onChange",function(){m.toggleFields((this.get("value")==="02"||this.get("value")==="04"||this.get("value")==="05"),null,["narrative_delivery_to"]);});m.connect("inco_term_year","onChange",function(){m.toggleFields(this.get("value"),null,["inco_term"],false,true);});m.connect("inco_term","onChange",function(){m.toggleFields(this.get("value"),null,["inco_place"],false,false);});m.connect("beneficiary_name","onFocus",m.enableBeneficiaryFields);m.connect("renew_flag","onClick",m.toggleRenewalDetails);m.connect("renew_flag","onClick",function(){if(!this.get("checked")){dj.byId("rolling_renewal_nb").set("value","");}});m.connect("advise_renewal_flag","onClick",function(){m.toggleFields(this.get("checked"),null,["advise_renewal_days_nb"]);});m.connect("rolling_renewal_flag","onClick",function(){m.toggleFields(this.get("checked"),["final_expiry_date"],["rolling_renewal_nb","rolling_cancellation_days","rolling_renew_on_code"]);if(!this.get("checked")){dj.byId("rolling_renew_for_nb").set("value","");dj.byId("rolling_renew_for_period").set("value","");dj.byId("rolling_day_in_month").set("value","");}});m.connect("rolling_renewal_flag","onChange",function(){m.toggleFields(this.get("checked"),["final_expiry_date"],["rolling_renewal_nb","rolling_cancellation_days","rolling_renew_on_code"]);if(!this.get("checked")){dj.byId("rolling_renew_for_nb").set("value","");dj.byId("rolling_renew_for_period").set("value","");dj.byId("rolling_day_in_month").set("value","");}});m.connect("rolling_renew_on_code","onChange",function(){m.toggleFields(this.get("value")==="03",["rolling_day_in_month"],["rolling_renew_for_nb"],true);if(this.get("value")==="01"){dj.byId("rolling_renew_for_nb").set("value","");dj.byId("rolling_renew_for_period").set("value","");dj.byId("rolling_day_in_month").set("value","");}else{if(dj.byId("rolling_renew_on_code").get("value")==="03"&&dj.byId("rolling_renewal_flag").get("checked")&&dj.byId("renew_for_period").get("value")!==""){dj.byId("rolling_renew_for_period").set("value",dj.byId("renew_for_period").get("value"));}}});m.connect("rolling_renew_for_nb","onBlur",function(){m.validateRollingRenewalFrequency(dj.byId("rolling_renew_for_nb"));});m.connect("renew_for_nb","onBlur",function(){m.validateRollingRenewalFrequency(dj.byId("renew_for_nb"));});m.connect("renew_for_period","onChange",function(){if(dj.byId("rolling_renew_on_code").get("value")==="03"&&dj.byId("rolling_renewal_flag").get("checked")&&dj.byId("renew_for_period").get("value")!==""){dj.byId("rolling_renew_for_period").set("value",dj.byId("renew_for_period").get("value"));}});m.connect("rolling_renewal_nb","onBlur",function(){if(dj.byId("rolling_renewal_flag").get("checked")&&d.number.parse(this.get("value"))===1){dj.byId("rolling_renewal_nb").set("state","Error");dj.showTooltip(m.getLocalization("invalidNumberOfRollingRenewals"),dj.byId("rolling_renewal_nb").domNode,0);var _15=function(){dj.hideTooltip(dj.byId("rolling_renewal_nb").domNode);};setTimeout(_15,50000);}});m.connect("rolling_renewal_nb","onChange",function(){if(dj.byId("rolling_renewal_flag").get("checked")&&d.number.parse(this.get("value"))===1){dj.byId("rolling_renewal_nb").set("state","Error");dj.showTooltip(m.getLocalization("invalidNumberOfRollingRenewals"),dj.byId("rolling_renewal_nb").domNode,0);var _16=function(){dj.hideTooltip(dj.byId("rolling_renewal_nb").domNode);};setTimeout(_16,50000);}});m.connect("rolling_day_in_month","onBlur",function(){if(dj.byId("rolling_day_in_month").get("value")===0){dj.byId("rolling_day_in_month").set("state","Error");dj.showTooltip(m.getLocalization("dayInMonthZeroNotApplicableError"),dj.byId("rolling_day_in_month").domNode,0);var _17=function(){dj.hideTooltip(dj.byId("rolling_day_in_month").domNode);};setTimeout(_17,4500);}});m.connect("rolling_day_in_month","onChange",function(){if(dj.byId("rolling_renew_for_period").get("value")==="D"){this.set("value","");dj.showTooltip(m.getLocalization("dayInMonthNotApplicableForDaysError"),dj.byId("rolling_day_in_month").domNode,0);var _18=function(){dj.hideTooltip(dj.byId("rolling_day_in_month").domNode);};setTimeout(_18,1500);}});m.connect("rolling_renew_for_period","onChange",function(){if(dj.byId("rolling_renew_for_period").get("value")==="D"&&!isNaN(dj.byId("rolling_day_in_month").get("value"))){dj.byId("rolling_day_in_month").set("value","");dj.showTooltip(m.getLocalization("dayInMonthNotApplicableForDaysError"),dj.byId("rolling_renew_for_period").domNode,0);var _19=function(){dj.hideTooltip(dj.byId("rolling_day_in_month").domNode);};setTimeout(_19,1500);}});m.connect("renew_on_code","onChange",function(){m.toggleFields((this.get("value")=="02"),null,["renewal_calendar_date"]);});m.connect("eucp_flag","onClick",function(){m.toggleFields(this.get("checked"),null,["eucp_details"]);});m.connect("tnx_amt","onChange",function(){m.updateOutstandingAmt(dj.byId("lc_liab_amt"),dj.byId("org_lc_liab_amt"));});m.connect("applicable_rules","onChange",function(){m.toggleFields((this.get("value")=="99"),null,["applicable_rules_text"]);});m.connect("prod_stat_code","onChange",function(){var _1a=dj.byId("prod_stat_code").get("value");if(dj.byId("doc_ref_no")&&(_1a==="16"||_1a==="24")){dj.byId("doc_ref_no").set("disabled",false);}else{if(dj.byId("doc_ref_no")){dj.byId("doc_ref_no").set("disabled",true);}}if(m._config.enable_to_edit_customer_details_bank_side=="false"&&dj.byId("prod_stat_code")&&dj.byId("prod_stat_code").get("value")!==""&&dj.byId("lc_liab_amt")&&dj.byId("tnx_type_code")&&dj.byId("tnx_type_code").get("value")!=="15"&&dj.byId("tnx_type_code").get("value")!=="13"){m.toggleRequired("lc_liab_amt",false);m.toggleRequired("credit_available_with_bank_address_line_1",false);m.toggleRequired("draft_term",false);}});m.connect("renew_amt_code_1","onClick",function(){m.setRenewalAmount(this);});m.connect("renew_amt_code_2","onClick",function(){m.setRenewalAmount(this);});m.connect("part_ship_detl_nosend","onChange",function(){var _1b=this.get("value");dj.byId("part_ship_detl").set("value",this.get("value"));if(m._config.swift2018Enabled){if(_1b=="CONDITIONAL"){d.byId("infoMessagePartialShipment").style.display="block";d.byId("infoMessagePartialShipment").style.paddingLeft="250px";}else{document.getElementById("infoMessagePartialShipment").style.display="none";}}m.toggleFields(_1b&&_1b!==_2&&_1b!==_1&&_1b!=="NONE",null,["part_ship_detl_text_nosend"]);});m.connect("part_ship_detl_text_nosend","onBlur",function(){dj.byId("part_ship_detl").set("value",this.get("value"));});m.connect("tran_ship_detl_nosend","onChange",function(){var _1c=this.get("value");dj.byId("tran_ship_detl").set("value",_1c);if(m._config.swift2018Enabled){if(_1c=="CONDITIONAL"){document.getElementById("infoMessageTranshipment").style.display="block";document.getElementById("infoMessageTranshipment").style.paddingLeft="250px";}else{document.getElementById("infoMessageTranshipment").style.display="none";}}m.toggleFields(_1c&&_1c!==_2&&_1c!==_1&&_1c!=="NONE",null,["tran_ship_detl_text_nosend"]);});m.connect("tran_ship_detl_text_nosend","onBlur",function(){dj.byId("tran_ship_detl").set("value",this.get("value"));});m.connect("maturity_date","onBlur",function(){m.validateEnteredGreaterThanCurrentDate();});m.connect("lc_exp_date_type_code","onChange",function(){m.toggleFields((this.get("value")!=="03"),null,["exp_date"]);if(this.get("value")==="02"){m.toggleRequired("exp_date",false);m.animate("fadeIn",d.byId("exp-event"));m.toggleRequired("exp_event",true);}else{m.animate("fadeOut",d.byId("exp-event"));dj.byId("exp_event").set("value","");m.toggleRequired("exp_event",false);}});m.connect("delv_org","onChange",function(){m.toggleFields((this.get("value")==="99"),null,["delv_org_text"]);});},onFormLoad:function(){if(d.byId("amend_narratives_display")){d.byId("amend_narratives_display").style.display="none";}if(d.byId("view-narrative-swift")){d.byId("view-narrative-swift").style.display="block";}if(document.getElementById("amd_no")){m._config.amendmentNumber=document.getElementById("amd_no").value;document.getElementById("amd_no").value="";}m.setCurrency(dj.byId("lc_cur_code"),["tnx_amt","lc_amt"]);if(dj.byId("lc_cur_code")){m.setCurrency(dj.byId("lc_cur_code"),["lc_available_amt","lc_liab_amt"]);}if(m._config.swift2018Enabled){m._onFormLoadSwift2018();}var _1d=dj.byId("cr_avl_by_code_1");if(_1d){var _1e=dj.byId("cr_avl_by_code_2").get("checked"),_1f=dj.byId("cr_avl_by_code_3").get("checked");if(d.byId("drawee_details_bank_img")){if(!_1e&&!_1f){m.animate("fadeOut","drawee_details_bank_img");}else{m.animate("fadeIn","drawee_details_bank_img");}}m.toggleFields(_1e||_1f,["drawee_details_bank_address_line_2","drawee_details_bank_dom","drawee_details_bank_address_line_4"],["drawee_details_bank_name","drawee_details_bank_address_line_1"]);m.toggleFields(!_1d.get("checked"),null,["draft_term"],true,true);if(_1d.get("checked")){dj.byId("draft_term").set("value","Sight");dj.byId("draft_term").set("disabled",true);m.animate("fadeOut","draft_term_img_label");}}var _20=dj.byId("renew_flag");if(_20){d.hitch(_20,m.toggleRenewalDetails,true)();m.toggleFields((dj.byId("renew_on_code").get("value")=="02"),null,["renewal_calendar_date"],true);m.toggleFields(dj.byId("advise_renewal_flag").get("checked"),null,["advise_renewal_days_nb"],true);m.toggleFields(dj.byId("rolling_renewal_flag").get("checked"),["final_expiry_date"],["rolling_renewal_nb","rolling_cancellation_days","rolling_renew_on_code"],true);var _21=dj.byId("rolling_renew_on_code");if(_21){m.toggleFields(_21.get("value")==="03",["rolling_day_in_month"],["rolling_renew_for_nb"],true);}}var _22=dj.byId("eucp_flag");if(_22){m.toggleFields(_22.get("checked"),null,["eucp_details"]);}if(dj.byId("latest_answer_date")){m.toggleProdStatCodeFields();}var _23=dj.byId("applicable_rules");if(_23){m.toggleFields(_23.get("value")=="99",null,["applicable_rules_text"]);}var _24=dj.byId("prod_stat_code"),_25=dj.byId("lc_liab_amt");if(_25&&_24&&(_24.get("value")==="01"||_24.get("value")==="10"||_24.get("value")==="06")){_25.set("readOnly",true);_25.set("disabled",true);}else{if(_25){_25.set("readOnly",false);_25.set("disabled",false);}}var _26=dj.byId("prod_stat_code");if(dj.byId("doc_ref_no")&&_24&&(_24.get("value")==="16"||_24.get("value")==="24")){dj.byId("doc_ref_no").set("disabled",false);}else{if(dj.byId("doc_ref_no")){dj.byId("doc_ref_no").set("disabled",true);}}m.setRenewalAmountOnFormLoad();var _27=dj.byId("part_ship_detl_nosend");if(_27){var _28=_27.get("value");if(m._config.swift2018Enabled){if(_27=="CONDITIONAL"){document.getElementById("infoMessagePartialShipment").style.display="block";document.getElementById("infoMessagePartialShipment").style.paddingLeft="250px";}else{document.getElementById("infoMessagePartialShipment").style.display="none";}}m.toggleFields(_28&&_28!==_2&&_28!==_1&&_28!=="NONE",null,["part_ship_detl_text_nosend"],true);}var _29=dj.byId("part_ship_detl");if(_29&&_29.get("value")===""){if(_27){_29.set("value",_27.get("value"));}}if(dj.byId("advise_mode_code")){m.toggleFields(dj.byId("advise_mode_code").get("value")=="02",["advise_thru_bank_name","advise_thru_bank_address_line_1","advise_thru_bank_address_line_2","advise_thru_bank_dom","advise_thru_bank_address_line_4"],["advise_thru_bank_name","advise_thru_bank_address_line_1"]);}var _2a=dj.byId("tran_ship_detl_nosend");if(_2a){var _2b=_2a.get("value");if(m._config.swift2018Enabled){if(_2b=="CONDITIONAL"){document.getElementById("infoMessageTranshipment").style.display="block";document.getElementById("infoMessageTranshipment").style.paddingLeft="250px";}else{document.getElementById("infoMessageTranshipment").style.display="none";}}m.toggleFields(_2b&&_2b!==_2&&_2b!==_1&&_2b!=="NONE",null,["tran_ship_detl_text_nosend"]);}var _2c=dj.byId("tran_ship_detl");if(_2c&&_2c.get("value")===""){if(_2a){_2c.set("value",_2a.get("value"));}}if(dj.byId("tnx_type_code")&&(dj.byId("tnx_type_code").get("value")==="15"||(dj.byId("tnx_type_code").get("value")==="13"))&&(m._config.enable_to_edit_customer_details_bank_side=="false")){dojo.style("transactionDetails","display","none");}else{if(m._config.enable_to_edit_customer_details_bank_side=="false"&&dojo.byId("release_dttm_view_row")){dojo.style("transactionDetails","display","none");var _2d=["lc_liab_amt","credit_available_with_bank_address_line_1","draft_term"];d.forEach(_2d,function(id){var _2e=dj.byId(id);if(_2e){m.toggleRequired(_2e,false);}});}}if(dj.byId("ntrf_flag")&&dj.byId("narrative_transfer_conditions")){if(dj.byId("ntrf_flag").get("checked")){dj.byId("narrative_transfer_conditions").set("disabled",true);dj.byId("narrative_transfer_conditions").set("value","");document.getElementById("narrative_transfer_conditions_img").style.display="none";}else{dj.byId("narrative_transfer_conditions").set("disabled",false);document.getElementById("narrative_transfer_conditions_img").style.display="block";}}if(dj.byId("lc_exp_date_type_code")){m.toggleFields((dj.byId("lc_exp_date_type_code").get("value")!=="03"),null,["exp_date"]);if(dj.byId("lc_exp_date_type_code").get("value")=="02"){m.toggleRequired("exp_date",false);m.animate("fadeIn",d.byId("exp-event"));m.toggleRequired("exp_event",true);}else{m.animate("fadeOut",d.byId("exp-event"));m.toggleRequired("exp_event",false);}}if(dj.byId("delv_org")){m.toggleFields((dj.byId("delv_org").get("value")==="99"),null,["delv_org_text"]);}if(dj.byId("inco_term_year")){m.getIncoYear();dijit.byId("inco_term_year").set("value",dj.byId("org_term_year").get("value"));}if(dj.byId("inco_term")){if(dj.byId("inco_term_year")&&dj.byId("inco_term_year").get("value")!=""){m.getIncoTerm();}dijit.byId("inco_term").set("value",dj.byId("org_inco_term").get("value"));}var _2f=dj.byId("inco_term")?dj.byId("inco_term").get("value"):"";if(_2f){m.toggleFields(_2f,null,["inco_place"],false,true);}else{m.toggleFields(_2f,null,["inco_place"],false,false);}if(dj.byId("delivery_to")){m.getDeliveryTo();dijit.byId("delivery_to").set("value",dj.byId("org_delivery_to").get("value"));m.toggleFields((dj.byId("delivery_to").get("value")==="02"||dj.byId("delivery_to").get("value")==="04"||dj.byId("delivery_to").get("value")==="05"),null,["narrative_delivery_to"]);}},beforeSubmitValidations:function(){var _30=true;if(dj.byId("lc_amt")){if(!m.validateAmount((dj.byId("lc_amt"))?dj.byId("lc_amt"):0)){m._config.onSubmitErrorMsg=m.getLocalization("amountcannotzero");dj.byId("lc_amt").set("value","");return false;}}if(m._config.swift2018Enabled){_30=m._beforeSubmitValidationsSwift2018();if(!_30){return _30;}}if(dj.byId("rolling_renewal_flag")&&dj.byId("rolling_renewal_nb")&&dj.byId("rolling_renewal_flag").get("checked")&&d.number.parse(dj.byId("rolling_renewal_nb").get("value"))===1){dj.byId("rolling_renewal_nb").set("state","Error");m._config.onSubmitErrorMsg=m.getLocalization("invalidNumberOfRollingRenewals");dj.byId("rolling_renewal_nb").set("value"," ");return false;}var _31=dj.byId("lc_amt");var _32=dj.byId("prod_stat_code");var _33=dj.byId("lc_available_amt");var _34=dj.byId("lc_liab_amt");if(_31&&_33&&_32&&_32.get("value")=="03"&&(_31.get("value")!=_33.get("value"))){m._config.onSubmitErrorMsg=m.getLocalization("AvailLCAmtNotEqualToTranAmt");_33.set("value","");return false;}else{if(_31&&_33&&(_31.get("value")<_33.get("value"))){m._config.onSubmitErrorMsg=m.getLocalization("AvailLCamtcanNotMoreThanTranAmt");_33.set("value","");return false;}}if(_31&&_34&&_32&&_32.get("value")=="03"&&(_31.get("value")>_34.get("value"))){m._config.onSubmitErrorMsg=m.getLocalization("LiabLCAmtcanNotLessThanTranAmt");_34.set("value","");return false;}var _35=dj.byId("exp_date");var _36=dj.byId("projected_expiry_date");var _37=dj.byId("final_expiry_date");if(_36){if(_35&&!m.compareDateFields(_35,_36)){m._config.onSubmitErrorMsg=m.getLocalization("projectedExpDateLessThanTransactionExpDtError",[_36.get("displayedValue"),_35.get("displayedValue")]);m.showTooltip(m.getLocalization("projectedExpDateLessThanTransactionExpDtError",[_36.get("displayedValue"),_35.get("displayedValue")]),_36.domNode);return false;}else{if(_37&&!m.compareDateFields(_36,_37)){m._config.onSubmitErrorMsg=m.getLocalization("projectedExpDateGreaterThanFinalExpDtError",[_36.get("displayedValue"),_37.get("displayedValue")]);m.showTooltip(m.getLocalization("projectedExpDateGreaterThanFinalExpDtError",[_36.get("displayedValue"),_37.get("displayedValue")]),_36.domNode);return false;}}}if(_37){if(_35&&!m.compareDateFields(_35,_37)){m._config.onSubmitErrorMsg=m.getLocalization("finalExpDateLessThanTransactionExpDtError",[_37.get("displayedValue"),_35.get("displayedValue")]);m.showTooltip(m.getLocalization("finalExpDateLessThanTransactionExpDtError",[_37.get("displayedValue"),_35.get("displayedValue")]),_37.domNode);return false;}else{if(_36&&!m.compareDateFields(_36,_37)){m._config.onSubmitErrorMsg=m.getLocalization("finalExpDateLessThanProjectedExpDtError",[_37.get("displayedValue"),_36.get("displayedValue")]);m.showTooltip(m.getLocalization("finalExpDateLessThanProjectedExpDtError",[_37.get("displayedValue"),_36.get("displayedValue")]),_37.domNode);return false;}}}if(dj.byId("lc_amt")&&dj.byId("lc_available_amt")&&(dj.byId("lc_amt").get("value")<dj.byId("lc_available_amt").get("value"))){m._config.onSubmitErrorMsg=m.getLocalization("AvailLCamtcanNotMoreThanTranAmt");dj.byId("lc_available_amt").set("value","");return false;}if(!(m.validateLength(["beneficiary","applicant","issuing_bank","credit_available_with_bank","drawee"]))){return false;}return true;}});})(dojo,dijit,misys);dojo.require("misys.client.binding.bank.report_sr_client");}