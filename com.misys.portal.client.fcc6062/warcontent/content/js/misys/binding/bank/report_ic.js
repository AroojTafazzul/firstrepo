/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.bank.report_ic"]){dojo._hasResource["misys.binding.bank.report_ic"]=true;dojo.provide("misys.binding.bank.report_ic");dojo.require("misys.form.common");dojo.require("misys.validation.common");dojo.require("misys.form.file");dojo.require("dijit.form.Form");dojo.require("dijit.form.Button");dojo.require("dijit.form.TextBox");dojo.require("misys.widget.Dialog");dojo.require("dijit.ProgressBar");dojo.require("dijit.form.ValidationTextBox");dojo.require("dijit.form.CheckBox");dojo.require("dijit.layout.ContentPane");dojo.require("dijit.layout.TabContainer");dojo.require("dijit.form.DateTextBox");dojo.require("misys.form.CurrencyTextBox");dojo.require("dijit.form.NumberTextBox");dojo.require("dijit.form.FilteringSelect");dojo.require("misys.form.addons");dojo.require("misys.form.SimpleTextarea");dojo.require("dojo.data.ItemFileReadStore");dojo.require("misys.widget.Collaboration");dojo.require("misys.widget.NoCloseDialog");dojo.require("misys.binding.trade.ls_common");(function(d,dj,m){m._config=m._config||{};m._config.icCurCode=m._config.icCurCode||{};m._config.drawee=m._config.drawee||{entity:"",name:"",addressLine1:"",addressLine2:"",dom:""};function _1(_2){var _3=null;if(dj.byId(_2)){var _4=dj.byId(_2).get("value");if((_4.indexOf("<")!=-1)||(_4.indexOf(">")!=-1)){_3=m.getLocalization("invalidContent");dj.byId(_2).set("state","Error");dj.hideTooltip(dj.byId(_2).domNode);dj.showTooltip(_3,dj.byId(_2).domNode,0);var _5=function(){dj.hideTooltip(dj.byId(_2).domNode);};setTimeout(_5,1500);return false;}if(dj.byId(_2).get("required")){if(_4<=0){_3=m.getLocalization("valueShouldBeGreaterThanZero");dj.byId(_2).set("state","Error");dj.hideTooltip(dj.byId(_2).domNode);dj.showTooltip(_3,dj.byId(_2).domNode,0);var _6=function(){dj.hideTooltip(dj.byId(_2).domNode);};setTimeout(_6,1500);return false;}}}};function _7(_8){if(_9(_8)){var _a=dj.byId("documents_details_total_send");var _b=d.number.parse(dj.byId("documents_details_first_mail_send").get("value"));var _c=d.number.parse(dj.byId("documents_details_second_mail_send").get("value"));_b=!isNaN(_b)?_b:0;_c=!isNaN(_c)?_c:0;_a.set("value",_b+_c);_a.set("readOnly",true);return true;}};function _9(_d){if(dj.byId(_d)){var _e=dj.byId(_d).get("value");var _f=new RegExp("^[0-9]+$");if(_e!=""&&!_f.test(_e)){var _10=m.getLocalization("invalidContent");dj.byId(_d).set("state","Error");dj.hideTooltip(dj.byId(_d).domNode);dj.showTooltip(_10,dj.byId(_d).domNode,0);var _11=function(){dj.hideTooltip(dj.byId(_d).domNode);};setTimeout(_11,1500);return false;}return true;}};function _12(){var _13=false;var _14=d.query("#document-master-table > tbody > tr").length;if(_14==0){return _13;}for(var i=0;i<_14;i++){if(dojo.query("#document-master-table > tbody > tr")[i].id){_13=true;return _13;}}return _13;};d.mixin(m._config,{xmlTransform:function(xml){var _15="<ic_tnx_record>";if(xml.indexOf(_15)!=-1){var _16=m._config.xmlTagName,_17=_16?["<",_16,">"]:[],_18="</ic_tnx_record>",_19="",_1a=-1;_19=xml.substring(_15.length,(xml.length-_18.length));_17.push(_19);if(dj.byId("gridLicense")&&dj.byId("gridLicense").store&&dj.byId("gridLicense").store!==null&&dj.byId("gridLicense").store._arrayOfAllItems.length>0){_17.push("<linked_licenses>");dj.byId("gridLicense").store.fetch({query:{REFERENCEID:"*"},onComplete:dojo.hitch(dj.byId("gridLicense"),function(_1b,_1c){dojo.forEach(_1b,function(_1d){_17.push("<license>");_17.push("<ls_ref_id>",_1d.REFERENCEID,"</ls_ref_id>");_17.push("<bo_ref_id>",_1d.BO_REF_ID,"</bo_ref_id>");_17.push("<ls_number>",_1d.LS_NUMBER,"</ls_number>");_17.push("<ls_allocated_amt>",_1d.LS_ALLOCATED_AMT,"</ls_allocated_amt>");_17.push("<ls_amt>",_1d.LS_AMT,"</ls_amt>");_17.push("<ls_os_amt>",_1d.LS_OS_AMT,"</ls_os_amt>");_17.push("<converted_os_amt>",_1d.CONVERTED_OS_AMT,"</converted_os_amt>");_17.push("<allow_overdraw>",_1d.ALLOW_OVERDRAW,"</allow_overdraw>");_17.push("</license>");});})});_17.push("</linked_licenses>");}if(_16){_17.push("</",_16,">");}return _17.join("");}else{return xml;}}});d.mixin(m,{bind:function(){m.setValidation("ic_cur_code",m.validateCurrency);m.setValidation("latest_answer_date",m.validateLatestAnswerDate);m.setValidation("tenor_base_date",m.validateBaseDate);m.setValidation("bo_comment",m.bofunction);var _1e=["narrative_description_goods","narrative_additional_instructions"];d.forEach(_1e,function(id){var _1f=dj.byId(id);if(typeof _1f!="undefined"){_1f.onBlur(_1f);}});m.connect("prod_stat_code","onChange",m.validateOutstandingAmount);m.connect("ic_cur_code","onChange",function(){m.setCurrency(this,["ic_amt"]);m.setCurrency(this,["ic_outstanding_amt","ic_liab_amt"]);});m.connect("ic_outstanding_amt","onBlur",function(){if(dj.byId("ic_amt")&&(dj.byId("ic_amt").get("value")<dj.byId("ic_outstanding_amt").get("value"))){var _20=function(){var _21=dijit.byId("ic_outstanding_amt");_21.set("state","Error");};m.dialog.show("ERROR",m.getLocalization("ICLiabilityAmountCanNotBeGreaterThanICTotalAmount"),"",function(){setTimeout(_20,0);});}});m.connect("term_code","onChange",function(){m.toggleFields((this.get("value")!=="01"),null,["tenor_desc"]);m.toggleFields((this.get("value")==="02"),["tenor_maturity_date"]);var _22=this.get("value");if(_22==="01"){if(dj.byId("protest_non_accpt").get("checked",true)){dj.byId("protest_non_accpt").set("checked",false);}if(dj.byId("accpt_defd_flag").get("checked",true)){dj.byId("accpt_defd_flag").set("checked",false);}dj.byId("accpt_adv_send_mode").set("value","");dj.byId("accpt_adv_send_mode").set("disabled",true);}else{dj.byId("accpt_adv_send_mode").set("disabled",false);}if(_22==="01"){m.toggleFields(true,null,["tenor_type_1"],false);dj.byId("tenor_type_1").set("checked",true);dj.byId("tenor_type_2").set("disabled",true);dj.byId("tenor_type_2").set("checked",false);dj.byId("tenor_type_3").set("disabled",true);dj.byId("tenor_type_3").set("checked",false);dj.byId("tenor_desc").set("disabled",true);dj.byId("tenor_desc").set("value","");m.toggleRequired("tenor_desc",false);m.toggleAllTenorFields();}else{if(this.get("value")==="02"){dj.byId("tenor_type_2").set("disabled",false);dj.byId("tenor_type_2").set("checked",true);dj.byId("tenor_type_1").set("disabled",true);dj.byId("tenor_type_3").set("disabled",true);dj.byId("tenor_type_3").set("checked",false);dj.byId("tenor_type_1").set("checked",false);dj.byId("tenor_desc").set("disabled",true);dj.byId("tenor_desc").set("value","");m.toggleRequired("tenor_desc",false);m.toggleAllTenorFields();}else{if(this.get("value")==="04"){dj.byId("tenor_type_2").set("disabled",true);dj.byId("tenor_type_2").set("checked",false);dj.byId("tenor_type_3").set("disabled",false);dj.byId("tenor_type_3").set("checked",true);dj.byId("tenor_type_1").set("disabled",true);dj.byId("tenor_type_1").set("checked",false);dj.byId("tenor_desc").set("disabled",true);dj.byId("tenor_desc").set("value","");m.toggleRequired("tenor_desc",false);m.toggleAllTenorFields();}else{if(_22==="03"){dj.byId("tenor_type_1").set("disabled",false);dj.byId("tenor_type_2").set("disabled",false);dj.byId("tenor_type_3").set("disabled",false);dj.byId("tenor_type_1").set("checked",true);dj.byId("tenor_type_2").set("checked",false);dj.byId("tenor_type_2").set("checked",false);dj.byId("tenor_desc").set("disabled",false);m.toggleRequired("tenor_desc",true);m.toggleAllTenorFields();}}}}});m.connect("tenor_days","onBlur",m.calcMaturityDate);m.connect("tenor_period","onBlur",m.calcMaturityDate);m.connect("tenor_from_after","onBlur",m.calcMaturityDate);m.connect("tenor_base_date","onBlur",m.calcMaturityDate);m.connect("tenor_type_1","onClick",m.toggleAllTenorFields);m.connect("tenor_type_2","onClick",m.toggleAllTenorFields);m.connect("tenor_type_3","onClick",m.toggleAllTenorFields);m.connect("tenor_days_type","onChange",function(){m.toggleFields((this.get("value")==="O"),null,["tenor_type_details"]);});m.connect("protest_non_accpt","onClick",m.disableNonAcceptanceFields);m.connect("accpt_defd_flag","onClick",m.disableNonAcceptanceFields);m.connect("ic_amt","onBlur",function(){m.setTnxAmt(this.get("value"));});m.connect("inco_term_year","onChange",m.getIncoTerm);m.connect("inco_term_year","onChange",function(){m.toggleFields(this.get("value"),null,["inco_term"],false,true);});m.connect("inco_term","onChange",function(){m.toggleFields(this.get("value"),null,["inco_place"],false,false);});m.connect("ic_liab_amt","onBlur",function(){if(dj.byId("ic_amt")&&(dj.byId("ic_amt").get("value")<dj.byId("ic_liab_amt").get("value"))){var _23=function(){var _24=dijit.byId("ic_liab_amt");_24.set("state","Error");};m.dialog.show("ERROR",m.getLocalization("ICLiabilityAmountCanNotBeGreaterThanICTotalAmount"),"",function(){setTimeout(_23,0);});}});m.connect("prod_stat_code","onChange",m.toggleProdStatCodeFields);m.connect("prod_stat_code","onChange",function(){var _25=this.get("value");m.toggleFields(_25&&_25!==""&&_25!=="01"&&_25!=="18",null,["iss_date","bo_ref_id"]);});m.connect("prod_stat_code","onChange",function(){var _26=dj.byId("prod_stat_code").get("value"),_27=dj.byId("ic_liab_amt");if(_27&&(_26==="01"||_26==="10"||_26==="06")){_27.set("readOnly",true);_27.set("disabled",true);}else{if(_27){_27.set("readOnly",false);_27.set("disabled",false);}}});m.connect(dj.byId("prod_stat_code"),"onChange",function(){this.validate();});m.connect("collecting_bank_iso_code","onBlur",function(){m.setSwiftBankDetailsForOnBlurEvent(true,"collecting_bank_iso_code",null,null,"collecting_bank_",true,false,true);});m.setValidation("collecting_bank_iso_code",m.validateBICFormat);m.connect("remitting_bank_iso_code","onBlur",function(){m.setSwiftBankDetailsForOnBlurEvent(true,"remitting_bank_iso_code",null,null,"remitting_bank_",true,false,true);});m.setValidation("remitting_bank_iso_code",m.validateBICFormat);m.connect("license_lookup","onClick",function(){m.getLicenses("ic");});m.connect("ic_cur_code","onChange",function(){m.clearLicenseGrid(this,m._config.icCurCode,"ic");});m.connect("entity","onChange",function(){m.clearLicenseGrid(this,m._config.drawee,"ic");});m.connect("drawee_name","onChange",function(){m.clearLicenseGrid(this,m._config.drawee,"ic");});m.connect("documents_details_second_mail_send","onBlur",function(){_1("documents_details_second_mail_send");});m.connect("documents_details_first_mail_send","onBlur",function(){_1("documents_details_first_mail_send");});m.connect("documents_details_total_send","onBlur",function(){_1("documents_details_total_send");});m.connect("documents_details_name_nosend","onBlur",function(){_1("documents_details_name_nosend");});m.connect("documents_details_doc_no_send","onBlur",function(){_1("documents_details_doc_no_send");});m.connect("maturity_date","onBlur",function(){m.validateEnteredGreaterThanCurrentDate();});m.connect("tenor_maturity_date","onBlur",function(){var _28=dj.byId("term_code")?dj.byId("term_code").get("value"):"";if((_28==="02"||_28==="04"||_28==="03")&&dj.byId("tenor_maturity_date")){if(dj.byId("tenor_maturity_date").get("value")){dj.byId("tenor_days").set("value","");dj.byId("tenor_desc").set("value","");dj.byId("tenor_period").set("value","");dj.byId("tenor_from_after").set("value","");dj.byId("tenor_days_type").set("value","");dj.byId("tenor_base_date").set("displayedValue","");dj.byId("tenor_days").set("disabled",true);dj.byId("tenor_period").set("disabled",true);dj.byId("tenor_from_after").set("disabled",true);dj.byId("tenor_days_type").set("disabled",true);m.toggleRequired("tenor_days_type",false);dj.byId("tenor_type_details").set("disabled",true);dj.byId("tenor_base_date").set("disabled",true);m.toggleRequired("tenor_base_date",false);m.toggleRequired(dojo.query("label[for=tenor_period_label]")[0].innerHTML=m.getLocalization("tenorPeriod"),false);}else{if(!dj.byId("tenor_maturity_date").get("value")){dj.byId("tenor_days").set("disabled",false);dj.byId("tenor_period").set("disabled",false);dj.byId("tenor_from_after").set("disabled",false);dj.byId("tenor_days_type").set("disabled",false);m.toggleRequired("tenor_days_type",true);dj.byId("tenor_type_details").set("disabled",false);dj.byId("tenor_base_date").set("disabled",false);m.toggleAllTenorFields();}}}});m.connect("tenor_days","onBlur",function(){var _29=dj.byId("term_code")?dj.byId("term_code").get("value"):"";if((_29==="02"||_29==="04")&&dj.byId("tenor_days")){if(dj.byId("tenor_days").get("value")){dj.byId("tenor_maturity_date").set("displayedValue","");dj.byId("tenor_maturity_date").set("disabled",true);}else{if(!dj.byId("tenor_days").get("value")){dj.byId("tenor_maturity_date").set("disabled",false);m.toggleAllTenorFields();}}}});m.connect("documents_details_first_mail_send","onBlur",function(){_7("documents_details_first_mail_send");});m.connect("documents_details_second_mail_send","onBlur",function(){_7("documents_details_second_mail_send");});},onFormLoad:function(){m._config.icCurCode=dj.byId("ic_cur_code")?dj.byId("ic_cur_code").get("value"):"";m._config.isBank=true;m._config.drawee.name=dj.byId("drawee_name")?dj.byId("drawee_name").get("value"):"";m._config.drawee.addressLine1=dj.byId("drawee_address_line_1")?dj.byId("drawee_address_line_1").get("value"):"";m._config.drawee.addressLine2=dj.byId("drawee_address_line_2")?dj.byId("drawee_address_line_2").get("value"):"";m._config.drawee.dom=dj.byId("drawee_dom")?dj.byId("drawee_dom").get("value"):"";m._config.drawee.entity=dj.byId("entity")?dj.byId("entity").get("value"):"";m.setCurrency(dj.byId("ic_cur_code"),["tnx_amt","ic_amt","ic_liab_amt","ic_outstanding_amt"]);if(dj.byId("ic_cur_code")){m.setCurrency(dj.byId("ic_cur_code"),["ic_outstanding_amt","ic_liab_amt"]);}var _2a=dj.byId("term_code");if(_2a){if(_2a.get("value")==="01"||_2a.get("value")==="03"){if(_2a.get("value")==="01"){dj.byId("accpt_adv_send_mode").set("value","");dj.byId("accpt_adv_send_mode").set("disabled",true);}}}var _2b=dj.byId("term_code")?dj.byId("term_code").get("value"):"";var _2c=dj.byId("tenor_type_1"),_2d=dj.byId("tenor_type_2"),_2e=dj.byId("tenor_type_3"),_2f=dj.byId("tenor_days"),_30=dj.byId("tenor_desc"),_31=dj.byId("tenor_period"),_32=dj.byId("tenor_from_after"),_33=dj.byId("tenor_days_type"),_34=dj.byId("tenor_type_details"),_35=dj.byId("tenor_base_date"),_36=dj.byId("tenor_maturity_date");if(_2b){if(_2b==="01"){m.toggleFields(true,null,["tenor_type_1"]);_2c.set("checked",true);_2d.set("disabled",true);_2e.set("disabled",true);_2f.set("disabled",true);_30.set("disabled",true);_31.set("disabled",true);_32.set("disabled",true);_33.set("disabled",true);_34.set("disabled",true);_35.set("disabled",true);_2f.set("value","");_30.set("value","");_31.set("value","");_32.set("value","");_33.set("value","");_35.set("displayedValue","");_36.set("displayedValue","");_36.set("disabled",true);}else{if(_2b==="02"){_2e.set("disabled",true);_2d.set("disabled",false);_2c.set("disabled",true);_2c.set("checked",false);_2d.set("checked",true);_2e.set("checked",false);_30.set("disabled",true);_36.set("disabled",false);m.toggleRequired("tenor_maturity_date",true);m.toggleAllTenorFields();if(dj.byId("tenor_maturity_date").get("value")){dj.byId("tenor_days").set("disabled",true);dj.byId("tenor_period").set("disabled",true);dj.byId("tenor_from_after").set("disabled",true);dj.byId("tenor_days_type").set("disabled",true);m.toggleRequired("tenor_days_type",false);dj.byId("tenor_type_details").set("disabled",true);dj.byId("tenor_base_date").set("disabled",true);m.toggleRequired("tenor_base_date",false);m.toggleRequired(dojo.query("label[for=tenor_period_label]")[0].innerHTML=m.getLocalization("tenorPeriod"),false);}else{if(dj.byId("tenor_days")&&dj.byId("tenor_days").get("value")){dj.byId("tenor_maturity_date").set("displayedValue","");m.toggleRequired("tenor_maturity_date",false);dj.byId("tenor_maturity_date").set("disabled",true);}else{dj.byId("tenor_days").set("disabled",false);dj.byId("tenor_period").set("disabled",false);dj.byId("tenor_from_after").set("disabled",false);dj.byId("tenor_days_type").set("disabled",false);m.toggleRequired("tenor_days_type",true);dj.byId("tenor_type_details").set("disabled",false);dj.byId("tenor_base_date").set("disabled",false);m.toggleAllTenorFields();}}}else{if(_2b==="04"){_2e.set("disabled",false);_2d.set("disabled",true);_2c.set("disabled",true);_2c.set("checked",false);_2d.set("checked",false);_2e.set("checked",true);_30.set("disabled",true);m.toggleAllTenorFields();if(dj.byId("tenor_maturity_date").get("value")){dj.byId("tenor_days").set("disabled",true);dj.byId("tenor_period").set("disabled",true);dj.byId("tenor_from_after").set("disabled",true);dj.byId("tenor_days_type").set("disabled",true);m.toggleRequired("tenor_days_type",false);dj.byId("tenor_type_details").set("disabled",true);dj.byId("tenor_base_date").set("disabled",true);m.toggleRequired("tenor_base_date",false);m.toggleRequired(dojo.query("label[for=tenor_period_label]")[0].innerHTML=m.getLocalization("tenorPeriod"),false);}else{if(dj.byId("tenor_days")&&dj.byId("tenor_days").get("value")){dj.byId("tenor_maturity_date").set("displayedValue","");m.toggleRequired("tenor_maturity_date",false);dj.byId("tenor_maturity_date").set("disabled",true);}else{dj.byId("tenor_days").set("disabled",false);dj.byId("tenor_period").set("disabled",false);dj.byId("tenor_from_after").set("disabled",false);dj.byId("tenor_days_type").set("disabled",false);m.toggleRequired("tenor_days_type",true);dj.byId("tenor_type_details").set("disabled",false);dj.byId("tenor_base_date").set("disabled",false);m.toggleAllTenorFields();}}}else{_2c.set("disabled",false);_2d.set("disabled",false);_2e.set("disabled",false);_2e.set("disabled",false);_30.set("disabled",false);m.toggleRequired("tenor_desc",true);if(_2d.get("checked")||_2e.get("checked")){_34.set("disabled",false);m.toggleAllTenorFields();}else{_2f.set("disabled",true);_31.set("disabled",true);_32.set("disabled",true);_33.set("disabled",true);_34.set("disabled",true);_35.set("disabled",true);_36.set("disabled",true);m.toggleRequired("tenor_maturity_date",false);m.toggleRequired("tenor_days",false);m.toggleRequired("tenor_period",false);m.toggleRequired("tenor_from_after",false);}}}}var _37=_33?_33.get("value"):"";if(_37==="O"){_34.set("disabled",false);m.toggleRequired("tenor_type_details",true);}else{_34.set("disabled",true);}}else{if(_2c||_2d||_2e||_2f||_30||_31||_32||_33||_34||_35||_36){_2c.set("disabled",true);_2d.set("disabled",true);_2e.set("disabled",true);_2f.set("disabled",true);_30.set("disabled",true);_31.set("disabled",true);_32.set("disabled",true);_33.set("disabled",true);_34.set("disabled",true);_35.set("disabled",true);_36.set("disabled",true);}}if(dj.byId("latest_answer_date")){m.toggleProdStatCodeFields();}m.getSwiftBankDetails(true,"collecting_bank_iso_code",null,null,"collecting_bank_",false,false,true);m.getSwiftBankDetails(true,"remitting_bank_iso_code",null,null,"remitting_bank_",false,false,true);var _38=dj.byId("prod_stat_code"),_39=dj.byId("ic_liab_amt");if(_39&&_38&&(_38.get("value")==="01"||_38.get("value")==="10"||_38.get("value")==="06")){_39.set("readOnly",true);_39.set("disabled",true);}else{if(_39){_39.set("readOnly",false);_39.set("disabled",false);}}m.populateGridOnLoad("ic");if(dj.byId("documents_details_total_send")){dj.byId("documents_details_total_send").set("readOnly",true);}if(dj.byId("tnx_type_code")&&(dj.byId("tnx_type_code").get("value")==="15"||(dj.byId("tnx_type_code").get("value")==="13"))&&(m._config.enable_to_edit_customer_details_bank_side=="false")){dojo.style("transactionDetails","display","none");}else{if(m._config.enable_to_edit_customer_details_bank_side=="false"&&dojo.byId("release_dttm_view_row")){dojo.style("transactionDetails","display","none");}}if(dj.byId("inco_term_year")){m.getIncoYear();dijit.byId("inco_term_year").set("value",dj.byId("org_term_year").get("value"));}if(dj.byId("inco_term")){if(dj.byId("inco_term_year")&&dj.byId("inco_term_year").get("value")!=""){m.getIncoTerm();}dijit.byId("inco_term").set("value",dj.byId("org_inco_term").get("value"));}var _3a=dj.byId("inco_term")?dj.byId("inco_term").get("value"):"";if(_3a){m.toggleFields(_3a,null,["inco_place"],false,true);}else{m.toggleFields(_3a,null,["inco_place"],false,false);}},beforeSubmitValidations:function(){if(dj.byId("ic_amt")){if(!m.validateAmount((dj.byId("ic_amt"))?dj.byId("ic_amt"):0)){m._config.onSubmitErrorMsg=m.getLocalization("amountcannotzero");dj.byId("ic_amt").set("value","");return false;}}if(dj.byId("tnx_amt")&&(dj.byId("tnx_type_code")&&dj.byId("tnx_type_code").getValue()!="03"&&dj.byId("tnx_type_code").getValue()!="14"&&!(dj.byId("tnx_type_code").getValue()=="15"&&(dj.byId("prod_stat_code").get("value")=="03"||dj.byId("prod_stat_code").get("value")=="06"||dj.byId("prod_stat_code").get("value")=="08"||dj.byId("prod_stat_code").get("value")=="81")))){if(!m.validateAmount((dj.byId("tnx_amt"))?dj.byId("tnx_amt"):0)){m._config.onSubmitErrorMsg=m.getLocalization("amountcannotzero");dj.byId("tnx_amt").set("value","");return false;}}if(dj.byId("ic_amt")&&dj.byId("ic_liab_amt")&&(dj.byId("ic_amt").get("value")<dj.byId("ic_liab_amt").get("value"))){m._config.onSubmitErrorMsg=m.getLocalization("ICLiabilityAmountCanNotBeGreaterThanICTotalAmount");dj.byId("ic_liab_amt").set("value","");return false;}if(dj.byId("ic_amt")&&dj.byId("ic_outstanding_amt")&&(dj.byId("ic_amt").get("value")<dj.byId("ic_outstanding_amt").get("value"))){m._config.onSubmitErrorMsg=m.getLocalization("ICLiabilityAmountCanNotBeGreaterThanICTotalAmount");dj.byId("ic_outstanding_amt").set("value","");return false;}if(!(m.validateLength(["drawer","drawee","remitting_bank","collecting_bank"]))){return false;}if(!_12()){m._config.onSubmitErrorMsg=m.getLocalization("documentattachedMustError");return false;}return (m.validateLSAmtSumAgainstTnxAmt("ic"));}});})(dojo,dijit,misys);dojo.require("misys.client.binding.bank.report_ic_client");}