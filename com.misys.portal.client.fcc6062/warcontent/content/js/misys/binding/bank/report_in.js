/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.bank.report_in"]){dojo._hasResource["misys.binding.bank.report_in"]=true;dojo.provide("misys.binding.bank.report_in");dojo.require("dijit.form.Form");dojo.require("dijit.form.Button");dojo.require("dijit.form.TextBox");dojo.require("dojo.data.ItemFileWriteStore");dojo.require("misys.widget.Dialog");dojo.require("dijit.ProgressBar");dojo.require("dijit.form.ValidationTextBox");dojo.require("dijit.form.CheckBox");dojo.require("dijit.layout.ContentPane");dojo.require("dijit.form.DateTextBox");dojo.require("misys.form.CurrencyTextBox");dojo.require("dijit.form.FilteringSelect");dojo.require("dijit.layout.TabContainer");dojo.require("misys.form.SimpleTextarea");dojo.require("misys.widget.Collaboration");dojo.require("misys.form.addons");dojo.require("misys.form.common");dojo.require("misys.form.file");dojo.require("misys.validation.common");dojo.require("misys.openaccount.FormOpenAccountEvents");dojo.require("misys.grid.DataGrid");dojo.require("misys.form.SimpleTextarea");dojo.require("misys.form.common");dojo.require("misys.form.file");dojo.require("misys.validation.common");dojo.require("misys.layout.FloatingPane");dojo.require("misys.openaccount.widget.LineItems");dojo.require("misys.openaccount.widget.LineItem");dojo.require("misys.openaccount.widget.ProductIdentifiers");dojo.require("misys.openaccount.widget.ProductIdentifier");dojo.require("misys.openaccount.widget.ProductCategories");dojo.require("misys.openaccount.widget.ProductCategory");dojo.require("misys.openaccount.widget.ProductCharacteristics");dojo.require("misys.openaccount.widget.ProductCharacteristic");dojo.require("misys.openaccount.widget.Adjustments");dojo.require("misys.openaccount.widget.Adjustment");dojo.require("misys.openaccount.widget.Payments");dojo.require("misys.openaccount.widget.Payment");dojo.require("misys.openaccount.widget.Taxes");dojo.require("misys.openaccount.widget.Tax");dojo.require("misys.openaccount.widget.AirTransports");dojo.require("misys.openaccount.widget.SeaTransports");dojo.require("misys.openaccount.widget.RoadTransports");dojo.require("misys.openaccount.widget.RailTransports");dojo.require("misys.openaccount.widget.TakingInTransports");dojo.require("misys.openaccount.widget.PlaceTransports");dojo.require("misys.openaccount.widget.FinalDestinationTransports");dojo.require("misys.openaccount.widget.Transport");dojo.require("misys.openaccount.widget.FreightCharges");dojo.require("misys.openaccount.widget.FreightCharge");dojo.require("misys.openaccount.widget.Incoterms");dojo.require("misys.openaccount.widget.Incoterm");dojo.require("misys.openaccount.widget.ContactDetails");dojo.require("misys.openaccount.widget.ContactDetail");dojo.require("misys.openaccount.widget.SUserInformations");dojo.require("misys.openaccount.widget.SUserInformation");dojo.require("misys.openaccount.widget.BUserInformations");dojo.require("misys.openaccount.widget.BUserInformation");(function(d,dj,m){d.mixin(m._config,{initReAuthParams:function(){var _1={productCode:dj.byId("product_code").get("value"),subProductCode:"",transactionTypeCode:"15",entity:dj.byId("entity")?dj.byId("entity").get("value"):"",currency:"",amount:"",es_field1:"",es_field2:""};return _1;},_hasLineItemShipmentDate:function(){var _2=dj.byId("line-items");if(_2&&_2.store!=null){var _3=_2.store._arrayOfAllItems;for(var i=0;i<_3.length;i++){if(_3[i]&&_3[i].last_ship_date!=""){dj.byId("last_ship_date").set("value",null);dj.byId("last_ship_date").set("disabled",true);break;}else{dj.byId("last_ship_date").set("disabled",false);}}}}});d.mixin(m,{bind:function(){var _4=dj.byId("tnx_cur_code"),_5=dj.byId("total_net_cur_code"),_6=dj.byId("total_net_inv_cur_code"),_7=dj.byId("liab_total_cur_code"),_8=dj.byId("total_net_amt"),_9=dj.byId("inv_eligible_amt"),_a=dj.byId("liab_total_amt"),_b=dj.byId("tnx_amt");m.setCurrency(_4,["tnx_amt"]);m.setCurrency(_5,["total_net_amt"]);m.setCurrency(_6,["total_net_inv_amt"]);m.setCurrency(_7,["liab_total_amt"]);m.connect("prod_stat_code","onChange",_c);if(_9){if(dj.byId("full_finance_accepted_flag")){m.connect("full_finance_accepted_flag","onChange",m.handleFullFinancingFlag);}m.connect("inv_eligible_amt","onChange",_d);m.connect("finance_amt","onChange",_e);m.connect("finance_cur_code","onChange",_e);if(_9.get("value")&&_a){_a.set("value",_8.get("value")-_9.get("value"));}else{if(_a){_a.set("value",_8.get("value"));}}}else{if(_b){m.connect("tnx_amt","onChange",_f);if(_b&&_b.get("value")&&_a&&_8){_a.set("value",_8.get("value")-_b.get("value"));}else{if(_a){_a.set("value",_8.get("value"));}}}}if(_8){m.connect("total_net_amt","onChange",_f);}m.setValidation("iss_date",m.validateIPInvoiceDate);m.setValidation("due_date",m.validateIPDueDate);m.setValidation("contact_email",m.validateEmailAddr);m.setValidation("buyer_bei",m.validateBEIFormat);m.setValidation("seller_bei",m.validateBEIFormat);m.setValidation("fin_inst_bic",m.validateBICFormat);m.setValidation("total_cur_code",m.validateCurrency);m.setValidation("fake_total_cur_code",m.validateCurrency);m.setValidation("total_net_cur_code",m.validateCurrency);m.setValidation("line_item_price_cur_code",m.validateCurrency);m.setValidation("line_item_total_net_cur_code",m.validateCurrency);m.setValidation("adjustment_cur_code",m.validateCurrency);m.setValidation("details_cur_code",m.validateCurrency);m.setValidation("tax_cur_code",m.validateCurrency);m.setValidation("freight_charge_cur_code",m.validateCurrency);m.setValidation("buyer_country",m.validateCountry);m.setValidation("seller_country",m.validateCountry);m.setValidation("bill_to_country",m.validateCountry);m.setValidation("ship_to_country",m.validateCountry);m.setValidation("consgn_country",m.validateCountry);m.setValidation("line_item_product_orgn_country",m.validateCountry);m.connect("total_cur_code","onChange",m.toggleDisableButtons);m.connect("total_cur_code","onBlur",_10);m.connect("freight_charges_type","onChange",m.manageFreightButton);m.connect("total_cur_code","onChange",m.managePOCurrency);m.connect("adjustment_amt","onChange",function(){m.toggleFields(isNaN(this.get("value")),null,["adjustment_rate"],false,false);});m.connect("adjustment_rate","onChange",function(){m.toggleFields(isNaN(this.get("value")),null,["adjustment_amt","adjustment_cur_code"],false,false);});m.connect("freight_charge_amt","onChange",function(){m.toggleFields(isNaN(this.get("value")),null,["freight_charge_rate"],false,false);});m.connect("freight_charge_rate","onChange",function(){m.toggleFields(isNaN(this.get("value")),null,["freight_charge_amt","freight_charge_cur_code"],false,false);});m.connect("tax_amt","onChange",function(){m.toggleFields(isNaN(this.get("value")),null,["tax_rate"],false,false);});m.connect("tax_rate","onChange",function(){m.toggleFields(isNaN(this.get("value")),null,["tax_amt","tax_cur_code"],false,false);});m.connect("display_other_parties","onClick",m.showHideOtherParties);m.connect("total_cur_code","onFocus",m.saveOldPOCurrency);m.connect("transport_type","onChange",m.onChangeTranportType);m.connect("payment_terms_type_1","onClick",m.onClickCheckPaymentTerms);m.connect("payment_terms_type_2","onClick",m.onClickCheckPaymentTerms);m.connect("seller_account_type","onChange",function(){m.onChangeSellerAccountType("form_settlement","seller_account_value","seller_account_type");});m.connect("seller_account_value","onBlur",function(){m.onBlurSellerAccount("form_settlement","seller_account_value","seller_account_type");});m.connect("last_match_date","onBlur",m.onBlurMatchDate);m.connect("line_item_qty_val","onBlur",m.computeLineItemAmount);m.connect("line_item_price_amt","onBlur",m.computeLineItemAmount);m.connect("line_item_qty_unit_measr_code","onChange",function(){if(dojo.byId("line_item_qty_unit_measr_other_row")){if(this.get("value")==="OTHR"){m.animate("fadeIn","line_item_qty_unit_measr_other_row");dj.byId("line_item_qty_unit_measr_other").set("readOnly",false);m.toggleRequired("line_item_qty_unit_measr_other",true);}else{m.animate("fadeOut","line_item_qty_unit_measr_other_row");dj.byId("line_item_qty_unit_measr_other").set("readOnly",true);dj.byId("line_item_qty_unit_measr_other").set("value","");m.toggleRequired("line_item_qty_unit_measr_other",false);}}});m.connect("fake_total_cur_code","onChange",function(){m.setCurrency(this,["fake_total_amt"]);});m.connect("total_net_cur_code","onChange",function(){m.setCurrency(this,["total_net_amt"]);});m.connect("total_net_inv_cur_code","onChange",function(){m.setCurrency(this,["total_net_inv_amt"]);});m.connect("line_item_price_cur_code","onChange",function(){m.setCurrency(this,["line_item_price_amt"]);});m.connect("details_cur_code","onChange",function(){m.setCurrency(this,["details_amt"]);});m.connect("fake_total_amt","onChange",function(){var _11=dj.byId("tnx_amt");if(_11&&(_11.get("value")===""||isNaN(_11.get("value")))){_11.set("value",dj.byId("fake_total_amt").get("value"));}});m.connect("total_net_amt","onChange",function(){var _12=dj.byId("total_net_inv_amt");if(_12){_12.set("value",dj.byId("total_net_amt").value);}});if(dj.byId("issuing_bank_abbv_name")){m.connect("entity","onChange",function(){dj.byId("issuing_bank_abbv_name").onChange();});}var _13=m._config.productCode.toLowerCase();if(_13=="ip"){m.connect("issuing_bank_customer_reference","onChange",m.setBuyerReference);}if(_13=="in"){m.connect("issuing_bank_customer_reference","onChange",m.setSellerReference);}var _14=dj.byId("issuing_bank_customer_reference"),_15=dj.byId("issuing_bank_abbv_name"),_16;if(_14){_16=_14.value;}if(_15){_15.onChange();}if(_14){_14.onChange();_14.set("value",_16);}m.connect(dj.byId("line_item_qty_unit_measr_code"),"onChange",function(){dj.byId("line_item_price_unit_measr_code").set("value",this.get("value"));});m.connect(dj.byId("details_code"),"onChange",m.paymentDetailsChange);m.connect(dj.byId("line_item_qty_unit_measr_code"),"onChange",function(){dj.byId("line_item_qty_unit_measr_label").set("value",this.get("displayedValue"));});m.connect(dj.byId("contact_type"),"onChange",function(){dj.byId("contact_type_decode").set("value",this.get("displayedValue"));});m.connect(dj.byId("product_identifier_code"),"onChange",function(){dj.byId("product_identifier_code_label").set("value",this.get("displayedValue"));});m.connect(dj.byId("product_category_code"),"onChange",function(){dj.byId("product_category_code_label").set("value",this.get("displayedValue"));});m.connect(dj.byId("product_characteristic_code"),"onChange",function(){dj.byId("product_characteristic_code_label").set("value",this.get("displayedValue"));});m.connect(dj.byId("adjustment_type"),"onChange",function(){dj.byId("adjustment_type_label").set("value",this.get("displayedValue"));});m.connect(dj.byId("tax_type"),"onChange",function(){dj.byId("tax_type_label").set("value",this.get("displayedValue"));});m.connect(dj.byId("freight_charge_type"),"onChange",function(){dj.byId("freight_charge_type_label").set("value",this.get("displayedValue"));});m.connect(dj.byId("incoterm_code"),"onChange",function(){dj.byId("incoterm_code_label").set("value",this.get("displayedValue"));});if(d.byId("adjustment_other_type_row")&&d.byId("adjustment_type")){if(dj.byId("adjustment_type").get("value")==="OTHR"){m.animate("fadeIn","adjustment_other_type_row");}else{m.animate("fadeOut","adjustment_other_type_row");}}if(d.byId("tax_other_type_row")&&d.byId("tax_type")){if(dj.byId("tax_type").get("value")==="OTHR"){m.animate("fadeIn","tax_other_type_row");}else{m.animate("fadeOut","tax_other_type_row");}}m.connect("adjustment_type","onChange",function(){m.toggleFields((this.get("value")==="OTHR"),null,["adjustment_other_type"]);if(d.byId("adjustment_other_type_row")){if(this.get("value")==="OTHR"){m.animate("fadeIn","adjustment_other_type_row");}else{m.animate("fadeOut","adjustment_other_type_row");}}});m.connect("tax_type","onChange",function(){m.toggleFields((this.get("value")==="OTHR"),null,["tax_other_type"]);if(d.byId("tax_other_type_row")){if(this.get("value")==="OTHR"){m.animate("fadeIn","tax_other_type_row");}else{m.animate("fadeOut","tax_other_type_row");}}});if(d.byId("product_category_other_code_row")&&d.byId("product_category_code")){if(dj.byId("product_category_code").get("value")==="OTHR"){m.animate("fadeIn","product_category_other_code_row");}else{m.animate("fadeOut","product_category_other_code_row");}}if(d.byId("product_characteristic_other_code_row")&&d.byId("product_characteristic_code")){if(dj.byId("product_characteristic_code").get("value")==="OTHR"){m.animate("fadeIn","product_characteristic_other_code_row");}else{m.animate("fadeOut","product_characteristic_other_code_row");}}if(d.byId("product_identifier_other_code_row")&&d.byId("product_identifier_code")){if(dj.byId("product_identifier_code").get("value")==="OTHR"){m.animate("fadeIn","product_identifier_other_code_row");}else{m.animate("fadeOut","product_identifier_other_code_row");}}if(d.byId("incoterm_other_row")&&d.byId("incoterm_code")){if(dj.byId("incoterm_code").get("value")==="OTHR"){m.animate("fadeIn","incoterm_other_row");}else{m.animate("fadeOut","incoterm_other_row");}}if(d.byId("details_other_paymt_terms_row")&&d.byId("details_code")){if(dj.byId("details_code").get("value")==="OTHR"){m.animate("fadeIn","details_other_paymt_terms_row");}else{m.animate("fadeOut","details_other_paymt_terms_row");}}if(d.byId("freight_charge_other_type_row")&&d.byId("freight_charge_type")){if(dj.byId("freight_charge_type").get("value")==="OTHR"){m.animate("fadeIn","freight_charge_other_type_row");}else{m.animate("fadeOut","freight_charge_other_type_row");}}m.connect("freight_charge_type","onChange",function(){m.toggleFields((this.get("value")==="OTHR"),null,["freight_charge_other_type"]);if(d.byId("freight_charge_other_type_row")){if(this.get("value")==="OTHR"){m.animate("fadeIn","freight_charge_other_type_row");}else{m.animate("fadeOut","freight_charge_other_type_row");}}});m.connect("details_code","onChange",function(){m.toggleFields((this.get("value")==="OTHR"),null,["details_other_paymt_terms"]);if(d.byId("details_other_paymt_terms_row")){if(this.get("value")==="OTHR"){m.animate("fadeIn","details_other_paymt_terms_row");}else{m.animate("fadeOut","details_other_paymt_terms_row");}}});m.connect("incoterm_code","onChange",function(){m.toggleFields((this.get("value")==="OTHR"),null,["incoterm_other"]);if(d.byId("incoterm_other_row")){if(this.get("value")==="OTHR"){m.animate("fadeIn","incoterm_other_row");}else{m.animate("fadeOut","incoterm_other_row");}}});m.connect("product_identifier_code","onChange",function(){m.toggleFields((this.get("value")==="OTHR"),null,["product_identifier_other_code"]);if(d.byId("product_identifier_other_code_row")){if(this.get("value")==="OTHR"){m.animate("fadeIn","product_identifier_other_code_row");}else{m.animate("fadeOut","product_identifier_other_code_row");}}});m.connect("product_characteristic_code","onChange",function(){m.toggleFields((this.get("value")==="OTHR"),null,["product_characteristic_other_code"]);if(d.byId("product_characteristic_other_code_row")){if(this.get("value")==="OTHR"){m.animate("fadeIn","product_characteristic_other_code_row");}else{m.animate("fadeOut","product_characteristic_other_code_row");}}});m.connect("product_category_code","onChange",function(){m.toggleFields((this.get("value")==="OTHR"),null,["product_category_other_code"]);if(d.byId("product_characteristic_other_code_row")){if(this.get("value")==="OTHR"){m.animate("fadeIn","product_category_other_code_row");}else{m.animate("fadeOut","product_category_other_code_row");}}});m.onClickCheckPaymentTerms();},onFormLoad:function(){var _17=dj.byId("tnx_cur_code"),_18=dj.byId("total_net_cur_code"),_19=dj.byId("total_net_inv_cur_code"),_1a=dj.byId("liab_total_cur_code"),_1b=dj.byId("prod_stat_code"),_1c=dj.byId("total_net_amt"),_1d=dj.byId("total_net_inv_amt"),_1e=dj.byId("inv_eligible_amt"),_1f=dj.byId("inv_eligible_cur_code"),_20=dj.byId("finance_amt"),_21=dj.byId("finance_cur_code"),_22=dj.byId("full_finance_accepted_flag");var _23=dj.byId("action_req_code");m.setCurrency(_17,["tnx_amt"]);m.setCurrency(_18,["total_net_amt"]);m.setCurrency(_19,["total_net_inv_amt"]);m.setCurrency(_1a,["liab_total_amt"]);if(_1d){_1d.set("value",_1c.get("value"));}if(d.byId("inv_eligible_cur_code_row")&&!dj.byId("full_finance_accepted_flag")){if(_1b.get("value")==="14"||_1b.get("value")==="15"){m.animate("wipeOut",d.byId("tnx_cur_code_row"));}else{m.animate("wipeOut",d.byId("inv_eligible_cur_code_row"));m.animate("wipeOut",d.byId("finance_cur_code_row"));m.connect("tnx_amt","onBlur",_f);}}if(d.byId("eligibility_content")){if(dj.byId("prod_stat_code").get("value")==="46"){if(dj.byId("tnx_amt")&&(dj.byId("tnx_amt").get("value")===""||isNaN(dj.byId("tnx_amt").get("value")))){dj.byId("tnx_amt").set("value","");dj.byId("tnx_amt").set("readOnly",true);}}}if(parseFloat(_1e)<parseFloat(_1c)){dj.byId("full_finance_accepted_flag").set("checked",false);_1e.set("readOnly",false);}if(_23){if(_1b.get("value")==="01"||(dj.byId("sub_tnx_type_code")&&dj.byId("sub_tnx_type_code").get("value")==="91")){_23.set("value","");m.animate("wipeOut",d.byId("action_req_code_row"));}else{if(_1b.get("value")==="04"||_1b.get("value")==="07"){_23.set("value","07");_23.set("readOnly",true);m.animate("wipeIn",d.byId("action_req_code_row"));}}}m.setCurrency(dj.byId("total_net_cur_code"),["total_net_amt"]);m.setCurrency(dj.byId("total_net_inv_cur_code"),["total_net_inv_amt"]);var _24=dj.byId("display_other_parties");if(_24){m.showHideOtherParties();}m.toggleDisableButtons();if(dj.byId("add_payment_term_button")&&!(dj.byId("payment_terms_type_1").get("checked")||dj.byId("payment_terms_type_2").get("checked"))){dj.byId("add_payment_term_button").set("disabled",true);}var _25=dj.byId("issuing_bank_customer_reference"),_26=dj.byId("issuing_bank_abbv_name"),_27;if(_25){_27=_25.value;}if(_26){_26.onChange();}if(_25){_25.onChange();_25.set("value",_27);}m.computePOTotalAmount();m._config._hasLineItemShipmentDate();m.managePOCurrency();if(d.byId("line_item_qty_unit_measr_other_row")){m.animate("fadeOut","line_item_qty_unit_measr_other_row");}if(_22&&_1b&&_1b.get("value")==="01"){if(_1e){_1e.set("disabled",true);_1e.set("value",null);}if(_1f){_1f.set("disabled",true);_1f.set("value",null);}if(_22){_22.set("disabled",true);_22.set("checked",false);}if(_20){_20.set("disabled",true);_20.set("value",null);}if(_21){_21.set("disabled",true);_21.set("value",null);}}m.toggleFSCMTransactionDetails(_1b);}});function _f(){var _28=dj.byId("tnx_amt"),_29=dj.byId("total_net_amt"),_2a=dj.byId("liab_total_amt");if(_28&&!isNaN(_28.get("value"))){if((_28.get("value")>_29.get("value"))&&_2a){_28.set("value","");_2a.set("value",_29.get("value"));}else{if(_2a){_2a.set("value",_29.get("value")-_28.get("value"));}}}else{if(_2a){_2a.set("value",_29.get("value"));}}};function _c(){var _2b=dj.byId("prod_stat_code"),_2c=d.byId("eligibility_content"),_2d=dj.byId("org_eligibility_content"),_2e=dj.byId("full_finance_accepted_flag"),_2f=dj.byId("inv_eligible_amt"),_30=dj.byId("finance_amt"),_31=dj.byId("inv_eligible_cur_code"),_32=dj.byId("finance_cur_code"),_33=dj.byId("total_net_amt"),_34=dj.byId("total_net_cur_code"),_35=d.byId("finance_requested_flag");var _36=dj.byId("action_req_code");if(_2c){if(_2b.get("value")==="46"){_2c.innerHTML=m.getLocalization("eligibleForFinancing");if(dj.byId("tnx_amt")){dj.byId("tnx_amt").set("value","");dj.byId("tnx_amt").set("readOnly",true);}}else{if(_2b.get("value")==="47"){_2c.innerHTML=m.getLocalization("notEligibleForFinancing");dj.byId("tnx_amt").set("readOnly",false);}else{_2c.innerHTML=_2d.value;dj.byId("tnx_amt").set("readOnly",false);}}}if(_2e){if(_2b.get("value")==="01"){_2f.set("disabled",true);_2f.set("value",null);_31.set("disabled",true);_31.set("value",null);_2e.set("disabled",true);_2e.set("checked",false);_30.set("disabled",true);_30.set("value",null);_32.set("disabled",true);_32.set("value",null);}else{if(_2b.get("value")==="04"){_2f.set("disabled",false);_31.set("disabled",false);_31.set("value",_34.get("value"));_2e.set("disabled",false);_30.set("disabled",false);_32.set("disabled",false);_32.set("value",_34.get("value"));if(dj.byId("org_inv_eligible_amt")&&(dj.byId("org_inv_eligible_amt").get("value")==_33.get("value"))){_2e.set("checked",true);_2f.set("value",_33.get("value"));_30.set("value",_33.get("value"));}else{_2f.set("value",dj.byId("org_inv_eligible_amt").get("value"));_30.set("value",dj.byId("org_inv_eligible_amt").get("value"));}}}}else{if(_30){if(_2b.get("value")==="14"||_2b.get("value")==="15"){m.animate("wipeIn",d.byId("inv_eligible_cur_code_row"));m.animate("wipeIn",d.byId("finance_cur_code_row"));m.animate("wipeOut",d.byId("tnx_cur_code_row"));if(_2b.get("value")==="15"){_2f.set("readOnly",true);_2f.set("value",_33.value);_30.set("value",_33.value);_32.set("value",_31.value);}else{_2f.set("readOnly",false);_2f.set("value",_33.value);_30.set("value",_33.value);_32.set("value",_31.value);}}else{_2f.set("value",null);_30.set("value",null);_32.set("value",null);m.animate("wipeOut",d.byId("inv_eligible_cur_code_row"));m.animate("wipeOut",d.byId("finance_cur_code_row"));m.animate("wipeIn",d.byId("tnx_cur_code_row"));}}}if(_36){if(_2b.get("value")==="01"||(dj.byId("sub_tnx_type_code")&&dj.byId("sub_tnx_type_code").get("value")==="91")){_36.set("value","");m.animate("wipeOut",d.byId("action_req_code_row"));}else{if(_2b.get("value")==="04"||_2b.get("value")==="07"){_36.set("value","07");_36.set("readOnly",true);m.animate("wipeIn",d.byId("action_req_code_row"));}}}if(_35){if(_2b.get("value")==="01"){_35.value="N";}else{if(_2b.get("value")==="04"){_35.value="Y";}}}m.toggleFSCMTransactionDetails(_2b);};function _d(){var _37=dj.byId("total_net_amt"),_38=dj.byId("inv_eligible_amt"),_39=dj.byId("liab_total_amt");if(_38.get("value")>_37.get("value")){_38.set("value","");m.dialog.show("ERROR",m.getLocalization("errorInvoiceElgibleAmountGreaterThanInvoiceAmount"));}else{if(_38.get("value")){_39.set("value",_37.get("value")-_38.get("value"));var _3a=dj.byId("old_liab_total_amt");var _3b=dj.byId("prod_stat_code");var _3c=dj.byId("liab_total_amt");if(_3b.get("value")==="01"&&_3a&&_3c){_3c.set("value",_3a.get("value"));}}else{_39.set("value",_37.get("value"));}}_e();};function _e(){var _3d=dj.byId("total_net_amt"),_3e=dj.byId("inv_eligible_amt"),_3f=dj.byId("finance_amt"),_40=dj.byId("inv_eligible_cur_code"),_41=dj.byId("finance_cur_code"),_42=dj.byId("full_finance_accepted_flag"),_43;if(_3f.get("value")>=0&&_41.get("value")&&_41.get("value")==_40.get("value")){if(_3f.get("value")>_3d.get("value")){_3f.set("value","");_43=_42?m.getLocalization("errorFinanceAmountGreaterThanInvoiceAmount"):m.getLocalization("errorPaymentAmountGreaterThanInvoiceAmount");m.dialog.show("ERROR",_43);}else{if(_3e.get("value")&&_3f.get("value")>_3e.get("value")){_3f.set("value","");_43=_42?m.getLocalization("errorFinanceAmountGreaterThanInvoiceEligibleAmount"):m.getLocalization("errorPaymentAmountGreaterThanInvoiceEligibleAmount");m.dialog.show("ERROR",_43);}else{if(_3d.get("value")&&(_3f.get("value")<=_3d.get("value"))){dj.byId("liab_total_amt").set("value",_3d.get("value")-_3f.get("value"));}}}}};function _10(){var _44=misys.getLocalization("resetInvoicePayableCurrency");if(dj.byId("line-items")&&dj.byId("line-items").store&&dj.byId("line-items").store!=null&&dj.byId("line-items").store._arrayOfAllItems.length>0){for(var i=0,_45=dj.byId("line-items").store._arrayOfAllItems.length;i<_45;i++){var _46=dj.byId("line-items").store._arrayOfAllItems[i];if(_46!=null&&_46.price_cur_code!==this.get("value")){var _47=function(){if(dj.byId("line-items").grid&&dj.byId("line-items").grid.store){dj.byId("line-items").grid.store.fetch({query:{store_id:"*"},onComplete:dojo.hitch(this,function(_48,_49){d.forEach(_48,function(_4a){dj.byId("line-items").grid.store.setValue(_4a,"price_cur_code",dj.byId("total_cur_code").get("value"));dj.byId("line-items").grid.store.setValue(_4a,"total_cur_code",dj.byId("total_cur_code").get("value"));dj.byId("line-items").grid.store.setValue(_4a,"total_net_cur_code",dj.byId("total_cur_code").get("value"));if(_4a.taxes&&_4a.taxes.length>0){dj.byId("tax_cur_code").set("value",dj.byId("total_cur_code").get("value"));if(_4a.taxes[0]._values!=""&&_4a.taxes[0]._values.length>0){for(i=0;i<_4a.taxes[0]._values.length;i++){_4a.taxes[0]._values[i].cur_code=dj.byId("total_cur_code").get("value");}}}if(_4a.adjustments&&_4a.adjustments.length>0){dj.byId("adjustment_cur_code").set("value",dj.byId("total_cur_code").get("value"));if(_4a.adjustments[0]._values!=""&&_4a.adjustments[0]._values.length>0){for(i=0;i<_4a.adjustments[0]._values.length;i++){_4a.adjustments[0]._values[i].cur_code=dj.byId("total_cur_code").get("value");}}}if(_4a.freight_charges&&_4a.freight_charges.length>0){dj.byId("freight_charge_cur_code").set("value",dj.byId("total_cur_code").get("value"));if(_4a.freight_charges[0]._values!=""&&_4a.freight_charges[0]._values.length>0){for(i=0;i<_4a.freight_charges[0]._values.length;i++){_4a.freight_charges[0]._values[i].cur_code=dj.byId("total_cur_code").get("value");}}}},dj.byId("line-items"));})});dj.byId("line-items").grid.store.save();var _4b=dj.byId("line-items");setTimeout(function(){_4b.renderSections();_4b.grid.render();},200);}};var _4c=function(){dj.byId("total_cur_code").set("value",dj.byId("line-items").store._arrayOfAllItems[0].price_cur_code);};m.dialog.show("CONFIRMATION",_44,"","","","",_47,_4c);}}}if(dj.byId("po-adjustments")&&dj.byId("po-adjustments").store&&dj.byId("po-adjustments").store!=null&&dj.byId("po-adjustments").store._arrayOfAllItems.length>0){if(dj.byId("po-adjustments").grid&&dj.byId("po-adjustments").grid.store){dj.byId("po-adjustments").grid.store.fetch({query:{store_id:"*"},onComplete:dojo.hitch(this,function(_4d,_4e){d.forEach(_4d,function(_4f){dj.byId("po-adjustments").grid.store.setValue(_4f,"cur_code",dj.byId("total_cur_code").get("value"));},dj.byId("po-adjustments"));})});}}if(dj.byId("po-taxes")&&dj.byId("po-taxes").store&&dj.byId("po-taxes").store!=null&&dj.byId("po-taxes").store._arrayOfAllItems.length>0){if(dj.byId("po-taxes").grid&&dj.byId("po-taxes").grid.store){dj.byId("po-taxes").grid.store.fetch({query:{store_id:"*"},onComplete:dojo.hitch(this,function(_50,_51){d.forEach(_50,function(_52){dj.byId("po-taxes").grid.store.setValue(_52,"cur_code",dj.byId("total_cur_code").get("value"));},dj.byId("po-taxes"));})});}}if(dj.byId("po-freight-charges")&&dj.byId("po-freight-charges").store&&dj.byId("po-freight-charges").store!=null&&dj.byId("po-freight-charges").store._arrayOfAllItems.length>0){if(dj.byId("po-freight-charges").grid&&dj.byId("po-freight-charges").grid.store){dj.byId("po-freight-charges").grid.store.fetch({query:{store_id:"*"},onComplete:dojo.hitch(this,function(_53,_54){d.forEach(_53,function(_55){dj.byId("po-freight-charges").grid.store.setValue(_55,"cur_code",dj.byId("total_cur_code").get("value"));},dj.byId("po-freight-charges"));})});}}};})(dojo,dijit,misys);dojo.require("misys.client.binding.bank.report_in_client");}