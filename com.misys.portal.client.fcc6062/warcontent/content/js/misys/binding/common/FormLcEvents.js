/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.common.FormLcEvents"]){dojo._hasResource["misys.common.FormLcEvents"]=true;dojo.provide("misys.common.FormLcEvents");misys._config=misys._config||{};dojo.mixin(misys._config,{ADVISING_BANK:"Advising Bank",ANY_BANK:"Any Bank",ISSUING_BANK:"Issuing Bank",OTHER:"Other",NAMED_BANK:"Named Bank",FIRST_PAGE_LOAD:false});fncSetCreditAvailBy=function(){var _1=this.get("value");fncToggleDynamicFields((_1===fncGetGlobalVariable("OTHER")),["credit_available_with_bank_address_line_1","credit_available_with_bank_address_line_2","credit_available_with_bank_dom","credit_available_with_bank_address_line_4"],["credit_available_with_bank_name"]);var _2=dijit.byId("credit_available_with_bank_name");switch(_1){case fncGetGlobalVariable("ADVISING_BANK"):_2.set("value",fncGetGlobalVariable("ADVISING_BANK"));break;case fncGetGlobalVariable("ANY_BANK"):_2.set("value",fncGetGlobalVariable("ANY_BANK"));break;case fncGetGlobalVariable("ISSUING_BANK"):_2.set("value",fncGetGlobalVariable("ISSUING_BANK"));break;case fncGetGlobalVariable("OTHER"):var _3=_2.get("value");if(_3===fncGetGlobalVariable("ADVISING_BANK")||_3===fncGetGlobalVariable("ANY_BANK")||_3===fncGetGlobalVariable("ISSUING_BANK")){_2.reset();}break;default:break;}var _4="";if(dijit.byId("cr_avl_by_code_1").get("checked")){_4="01";}else{if(dijit.byId("cr_avl_by_code_2").get("checked")){_4="02";}else{if(dijit.byId("cr_avl_by_code_3").get("checked")){_4="03";}else{if(dijit.byId("cr_avl_by_code_4").get("checked")){_4="04";}else{if(dijit.byId("cr_avl_by_code_5").get("checked")){_4="05";}}}}}_fncToggleDraweeBankDetails(_4,this);};fncTogglePaymentDraftAt=function(){var _5=dijit.byId("tenor_type_1");var _6=dijit.byId("tenor_type_2");var _7=dijit.byId("tenor_type_3");var _8=dijit.byId("draft_term");var _9=this.get("value");_5.set("checked",false);_5.set("disabled",true);_6.set("disabled",true);_6.set("checked",false);_7.set("disabled",true);_7.set("checked",true);var _a=(fncGetGlobalVariable("FIRST_PAGE_LOAD")==="true")?true:false;if(_a&&_9!=="05"){_8.set("value","");}var _b=dojo.byId("payment-draft");var _c=dojo.byId("draft-term");if(_9!=="05"&&dojo.style(_b,"opacity")!==1){misys.animate("fadeOut",_c);misys.animate("fadeIn",_b);}switch(_9){case "01":_5.set("disabled",false);_5.set("checked",true);fncToggleDraftTerm("01");break;case "02":_6.set("disabled",false);_7.set("disabled",false);_7.set("checked",true);fncToggleDraftTerm("03");break;case "03":_6.set("disabled",true);_7.set("disabled",false);_7.set("checked",true);fncToggleDraftTerm("03");break;case "04":_6.set("disabled",false);_7.set("disabled",false);_7.set("checked",true);fncToggleDraftTerm("03");break;case "05":misys.animate("fadeOut",_b);misys.animate("fadeIn",_c);_5.set("checked",false);_6.set("checked",false);_7.set("checked",false);fncToggleDraftTerm("99");break;default:break;}var _d=dijit.byId("credit_available_with_bank_type");if(_d){_fncToggleDraweeBankDetails(_9,_d);}fncDraweeReadOnlyByCredit();};fncToggleBankPaymentDraftAt=function(){var _e=["draft_term","drawee_details_bank_name","drawee_details_bank_address_line_1","drawee_details_bank_address_line_2","drawee_details_bank_dom","drawee_details_bank_iso_code","drawee_details_bank_reference"];dojo.forEach(_e,function(id){var _f=dijit.byId(id);if(_f){_f.reset();}});};fncToggleDraftTerm=function(_10){if(dojo.isObject(_10)){_10=this.get("value");}var _11=dijit.byId("tenor_type_1");var _12=dijit.byId("tenor_type_2");var _13=dijit.byId("tenor_type_3");var _14=(fncGetGlobalVariable("FIRST_PAGE_LOAD")==="true")?true:false;var _15=false;if((dijit.byId("tenor_maturity_date").get("displayedValue")!=="")&&!_14){_15=true;}fncToggleDynamicFields((_10==="02"),null,["tenor_maturity_date"],_15);_fncTogglePaymentDraftDate((_10==="03"));};fncWriteDraftTerm=function(){var _16=dijit.byId("draft_term"),_17=misys._config.tenorPeriodLabels,_18=misys._config.tenorFromAfterLabels,_19=misys._config.tenorDaysTypeLabels;if(_16){if(dijit.byId("tenor_type_1").get("checked")){_16.set("value","Sight");}else{if(dijit.byId("tenor_type_2").get("checked")&&dijit.byId("tenor_maturity_date").get("displayedValue")!==""){_16.set("value","Maturity date: "+dijit.byId("tenor_maturity_date").get("displayedValue"));}else{var _1a=dijit.byId("tenor_period").get("value");var _1b=dijit.byId("tenor_from_after").get("value");var _1c=dijit.byId("tenor_days").get("value");var _1d=dijit.byId("tenor_days_type").get("value");if(!isNaN(_1c)&&_1c!==0){if(_1d!=="99"){_16.set("value",_1c+" "+_17[_1a]+" "+_18[_1b]+" "+_19[_1d]);}else{_16.set("value",_1c+" "+_17[_1a]+" "+_18[_1b]+" "+dijit.byId("tenor_type_details").get("value"));}}}}}};fncDraweeReadOnlyByCredit=function(){var _1e=dijit.byId("cr_avl_by_code_2").get("checked");var _1f=dijit.byId("cr_avl_by_code_3").get("checked");if(!_1e&&!_1f){dijit.byId("drawee_details_bank_name").set("value","");if(dijit.byId("drawee_details_bank_address_line_1")){dijit.byId("drawee_details_bank_address_line_1").set("value","");dijit.byId("drawee_details_bank_address_line_2").set("value","");dijit.byId("drawee_details_bank_dom").set("value","");}}fncToggleDynamicFields(_1e||_1f,["drawee_details_bank_address_line_2","drawee_details_bank_dom"],["drawee_details_bank_name","drawee_details_bank_address_line_1"],true);};fncDraftDaysReadOnly=function(){this.set("readOnly",!dijit.byId("tenor_type_3").get("checked"));};fncCheckIrrevocableFlag=function(){var _20=dijit.byId("ntrf_flag");var _21=dijit.byId("stnd_by_lc_flag");if((_20&&_21)&&(!this.checked&&!_20.checked&&_21.checked)){this.set("checked",true);fncShowTooltip(fncGetLocalizationString("irrevocableStandByError"),this.domNode,["before"]);}};fncCheckNonTransferableFlag=function(){var _22=dijit.byId("irv_flag");var _23=dijit.byId("stnd_by_lc_flag");if((_22&&_23)&&(!this.checked&&!_22.checked&&_23.checked)){this.set("checked",false);_22.set("checked",true);fncShowTooltip(fncGetLocalizationString("irrevocableStandByError"),_22.domNode,["before"]);}};fncCheckStandByFlag=function(){var _24=dijit.byId("irv_flag");var _25=dijit.byId("ntrf_flag");if((_25&&_24)&&(this.checked&&!_25.checked&&!_24.checked)){this.set("checked",true);_24.set("checked",true);fncShowTooltip(fncGetLocalizationString("irrevocableStandByError"),_24.domNode,["before"]);}};fncResetConfirmationCharges=function(){dijit.byId("cfm_chrg_brn_by_code_1").set("checked",false);var _26=dijit.byId("cfm_chrg_brn_by_code_2");if(this.get("value")==="03"){_26.set("checked",false);}else{_26.set("checked",true);}};fncCheckConfirmationCharges=function(){if(dijit.byId("cfm_inst_code_3").checked){this.set("checked",false);fncShowTooltip(fncGetLocalizationString("confirmationInstructionsError"),dojo.byId("cfm_chrg_brn_by_code_1"),["before"]);}};fncToggleRenewDetails=function(_27,_28){fncToggleDynamicFields(_27.checked,["advise_renewal_flag","rolling_renewal_flag","renew_amt_code_1","renew_amt_code_2"],["renew_on_code","renew_for_nb","renew_for_period"],_28);if(!_28){dijit.byId("renewal_calendar_date").reset();dijit.byId("advise_renewal_days_nb").reset();dijit.byId("rolling_renewal_nb").reset();dijit.byId("rolling_cancellation_days").reset();dijit.byId("advise_renewal_flag").set("checked",false);dijit.byId("rolling_renewal_flag").set("checked",false);}};fncToggleDependentFields=function(_29,_2a,_2b){_29.set("readOnly",false);_2a.set("readOnly",false);if(_2a.get("displayedValue")!==""&&_29.get("displayedValue")!==""){_29.set("displayedValue","");_29.set("readOnly",true);if(_2b){fncShowTooltip(_2b,_29.domNode);}}};_fncToggleDraweeBankDetails=function(_2c,_2d){var _2e=_2d.get("value");var _2f=dijit.byId("drawee_details_bank_name");switch(_2e){case fncGetGlobalVariable("ISSUING_BANK"):_2f.set("value",fncGetGlobalVariable("ISSUING_BANK"));break;case fncGetGlobalVariable("ADVISING_BANK"):if(_2c!=="03"){_2f.set("value",fncGetGlobalVariable("ADVISING_BANK"));}else{_2f.set("value",fncGetGlobalVariable("ISSUING_BANK"));}break;case fncGetGlobalVariable("ANY_BANK"):_2f.set("value",fncGetGlobalVariable("ISSUING_BANK"));break;default:if(_2c==="01"||(_2c!=="02"&&_2c!=="03")){}else{_2f.set("value",fncGetGlobalVariable("ISSUING_BANK"));}break;}};_fncTogglePaymentDraftDate=function(_30){fncToggleDynamicFields(_30,null,["tenor_days","tenor_period","tenor_from_after","tenor_days_type"]);dijit.byId("tenor_type_details").set("value","");};dojo.require("misys.client.binding.common.FormLcEvents_client");}