/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.common.reauth_listdef"]){dojo._hasResource["misys.binding.common.reauth_listdef"]=true;dojo.provide("misys.binding.common.reauth_listdef");(function(d,dj,m){function _1(_2,_3){var _4=0;for(var i in _3){if((_2.i[_3[i]]!==undefined)&&(_2.i[_3[i]]+"S"!=="S")){_4=_2.i[_3[i]];break;}}return _4;};d.mixin(m._config,{getAmountAccountArray:function(_5,_6,_7){var _8=m._config.getGridId(),_9=_9||[],_a=_5.split(";"),_b="";if("S"+_8!=="S"){var _c=dijit.byId(_8);if(_c&&_c.store){var _d=[];if(_7){_d=_c.selection.getSelected();}else{_d=_c.store._items;}_d.sort(function(a,b){if(a.i.tnx_id<b.i.tnx_id){return -1;}else{if(a.i.tnx_id>b.i.tnx_id){return 1;}else{return 0;}}});for(var i=0;i<_d.length;i++){_9[i]={};_9[i].esf1_amount=m.trimAmount(_1(_d[i],_a));if(!(_d[i].i[_6])||_d[i].i[_6]+"S"==="S"){_9[i].esf2_account=0;}else{_9[i].esf2_account=_d[i].i[_6];}}}}else{}return _9;},getAmountSum:function(_e){var _f=d.number.parse(0);for(var i=0;i<_e.length;i++){var x=d.number.parse(_e[i].esf1_amount);_f=(d.number.parse(_f)+d.number.parse(x)).toFixed(3);}return _f;},executeReauthentication:function(_10){var _11=(_10.es_field1)?_10.es_field1:"";var _12=(_10.es_field2)?_10.es_field2:"";m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/ReAuthenticationAjax"),handleAs:"text",sync:true,preventCache:true,content:{productCode:_10.productCode,subProductCode:_10.subProductCode,transactionTypeCode:_10.transactionTypeCode,entity:(_10.entity)?_10.entity:"",currency:(_10.currency)?_10.currency:"",amount:(_10.amount)?_10.amount:"",list_keys:_10.list_keys,operation:_10.operation?_10.operation:""},load:function(_13,_14){if(!(_13.indexOf("SC_UNAUTHORIZED")===-1)){misys.showSessionOverDialog();}else{m.setContentInReAuthDialog(_13,_14);if(""+_13+""!=="01"){m._config.addESFields(_11,_12);dj.byId("reauth_dialog").show();}}},customError:function(_15,_16){console.error(_15);m.setContentInReAuthDialog("ERROR",_16);dj.byId("reauth_dialog").show();}});},getGridId:function(){var _17="";d.query(".dojoxGrid").forEach(function(_18){if(_18.id!=="nonSignedFolders"){_17=_18.id;}});return _17;}});})(dojo,dijit,misys);dojo.require("misys.client.binding.common.reauth_listdef_client");}