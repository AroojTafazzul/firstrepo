/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.common.listdef_cancel_post_dated"]){dojo._hasResource["misys.binding.common.listdef_cancel_post_dated"]=true;dojo.provide("misys.binding.common.listdef_cancel_post_dated");dojo.require("dojo.data.ItemFileReadStore");dojo.require("dojo.data.ItemFileWriteStore");dojo.require("dijit.form.FilteringSelect");dojo.require("misys.form.MultiSelect");dojo.require("dijit.layout.TabContainer");dojo.require("misys.form.common");dojo.require("misys.validation.common");dojo.require("dijit.form.Form");dojo.require("dijit.form.Button");dojo.require("dijit.form.TextBox");dojo.require("dijit.form.ValidationTextBox");dojo.require("dijit.form.CheckBox");dojo.require("dijit.layout.ContentPane");dojo.require("misys.form.CurrencyTextBox");dojo.require("dijit.form.RadioButton");dojo.require("misys.binding.common.reauth_listdef_common");dojo.require("misys.binding.system.reauth");dojo.require("misys.common");dojo.require("misys.binding.common.reauth_listdef");(function(d,dj,m){function _1(){if(dj.byId("account_no")){dj.byId("account_no").set("disabled",true);}};function _2(){if(dj.byId("account_no")){dj.byId("account_no").set("disabled",false);}};function _3(){if(d.byId("account_search_id")){d.style(d.byId("account_search_id"),"display","none");dj.byId("account_no").set("value","");}};function _4(){if(d.byId("account_search_id")){d.style(d.byId("account_search_id"),"display","");}};function _5(){if(dj.byId("cur_code").value!==""){dj.byId("AmountRangevisible").set("disabled",false);dj.byId("AmountRange2visible").set("disabled",false);}else{if(dj.byId("cur_code").value===""){dj.byId("AmountRangevisible").set("disabled",true);dj.byId("AmountRange2visible").set("disabled",true);dj.byId("AmountRangevisible").reset();dj.byId("AmountRange2visible").reset();}}};function _6(){if(d.byId("upload_file_id")){dj.byId("upload_file_id").set("disabled",true);}};function _7(){if(d.byId("upload_file_id")){dj.byId("upload_file_id").set("disabled",false);}};function _8(){if(dj.byId("account_no")){dj.byId("account_no").set("value","");}if(dj.byId("tnx_stat_code")){dj.byId("tnx_stat_code").set("value","");}if(dj.byId("cust_ref_id")){dj.byId("cust_ref_id").set("value","");}if(dj.byId("cur_code")){dj.byId("cur_code").set("value","");}if(dj.byId("AmountRangevisible")){dj.byId("AmountRangevisible").set("value","");}if(dj.byId("AmountRange2visible")){dj.byId("AmountRange2visible").set("value","");}if(dj.byId("counterparty_name")){dj.byId("counterparty_name").set("value","");}if(dj.byId("create_date")&&dj.byId("create_date").get("value")!==""){dj.byId("create_date").set("value","");dj.byId("create_date").set("displayedValue","");}if(dj.byId("create_date2")&&dj.byId("create_date2").get("value")!==""){dj.byId("create_date2").set("value","");dj.byId("create_date2").set("displayedValue","");}if(dj.byId("maturity_date")&&dj.byId("maturity_date").get("value")!==""){dj.byId("maturity_date").set("value","");dj.byId("maturity_date").set("displayedValue","");}if(dj.byId("maturity_date2")&&dj.byId("maturity_date2").get("value")!==""){dj.byId("maturity_date2").set("value","");dj.byId("maturity_date2").set("displayedValue","");}if(dj.byId("ref_id")){dj.byId("ref_id").set("value","*");}if(dj.byId("entity")){dj.byId("entity").set("value","");}};function _9(){var _a=this.get("value"),_b=this;m._config=m._config||{};m._config.effFromAmountValidationInprocess=false;var _c=dj.byId("AmountRange2visible").get("value");if(!m._config.effToAmountValidationInprocess){if(_a<0||_a>_c){m._config.effFromAmountValidationInprocess=true;var _d=dj.byId("AmountRangevisible");if(_a>_c){displayMessage=misys.getLocalization("invalidMinAmountValueError");}if(_a<0){displayMessage=misys.getLocalization("invalidAmountValueError");}_d.focus();_d.set("state","Error");dj.hideTooltip(_d.domNode);dj.showTooltip(displayMessage,_d.domNode,0);dj.showTooltip(displayMessage,domNode,0);return false;}}m._config.effFromAmountValidationInprocess=false;return true;};function _e(){var _f=this.get("value"),_10=this;m._config=m._config||{};m._config.effToAmountValidationInprocess=false;var _11=dj.byId("AmountRangevisible").get("value");if(!m._config.effFromAmountValidationInprocess){if(_f<0||_f<_11){m._config.effToAmountValidationInprocess=true;var _12=dj.byId("AmountRange2visible");if(_f<_11){displayMessage=misys.getLocalization("invalidMaxAmountValueError");}if(_f<0){displayMessage=misys.getLocalization("invalidAmountValueError");}_12.focus();_12.set("state","Error");dj.hideTooltip(_12.domNode);dj.showTooltip(displayMessage,_12.domNode,0);dj.showTooltip(displayMessage,domNode,0);return false;}}m._config.effToAmountValidationInprocess=false;return true;};function _13(){var _14=this;if(_14.get("value")===null){return true;}m._config=m._config||{};m._config.effFromDateValidationInprocess=false;var _15=dj.byId("create_date2");if(!m._config.effToDateValidationInprocess){if(!m.compareDateFields(_14,_15)){m._config.effFromDateValidationInprocess=true;var _16=dj.byId("create_date");displayMessage=misys.getLocalization("LastModifiedDateFromLesserThanLastModifiedDateTo");_16.focus();_16.set("state","Error");dj.hideTooltip(_16.domNode);dj.showTooltip(displayMessage,_16.domNode,0);}}m._config.effFromDateValidationInprocess=false;return true;};function _17(){var _18=this;m._config=m._config||{};m._config.effToDateValidationInprocess=false;if(_18.get("value")===null){return true;}var _19=dj.byId("create_date");if(!m._config.effFromDateValidationInprocess){m._config.effToDateValidationInprocess=true;if(!m.compareDateFields(_19,_18)){var _1a=dj.byId("create_date2");displayMessage=misys.getLocalization("LastModifiedDateToGreaterThanLastModifiedDateFrom");_1a.focus();_1a.set("state","Error");dj.hideTooltip(_1a.domNode);dj.showTooltip(displayMessage,_1a.domNode,0);return false;}}m._config.effToDateValidationInprocess=false;return true;};function _1b(){var _1c=this;if(_1c.get("value")===null){return true;}m._config=m._config||{};m._config.effFromDateValidationInprocess=false;var _1d=dj.byId("maturity_date2");if(!m._config.effToDateValidationInprocess){if(!m.compareDateFields(_1c,_1d)){m._config.effFromDateValidationInprocess=true;var _1e=dj.byId("maturity_date"),_1f=misys.getLocalization("maturityFromGreaterThanMaturityTo");_1e.focus();_1e.set("state","Error");dj.hideTooltip(_1e.domNode);dj.showTooltip(_1f,_1e.domNode,0);dj.showTooltip(_1f,domNode,0);return false;}}m._config.effFromDateValidationInprocess=false;return true;};function _20(){var _21=this;m._config=m._config||{};m._config.effToDateValidationInprocess=false;if(_21.get("value")===null){return true;}var _22=dj.byId("maturity_date");if(!m._config.effFromDateValidationInprocess){if(!m.compareDateFields(_22,_21)){m._config.effToDateValidationInprocess=true;var _23=dj.byId("maturity_date2");displayMessage=misys.getLocalization("maturityToLesserThanMaturityFrom");_23.focus();_23.set("state","Error");dj.hideTooltip(_23.domNode);dj.showTooltip(displayMessage,_23.domNode,0);return false;}}m._config.effToDateValidationInprocess=false;return true;};function _24(){var _25=this;if(_25.get("value")===null){return true;}var _26=dj.byId("last_modified_date2");if(!m.compareDateFields(_25,_26)){var _27=dj.byId("last_modified_date"),_28=misys.getLocalization("LastModifiedFromGreaterThanLastModifiedTo");_27.focus();_27.set("displayedValue","");_27.set("state","Error");dj.hideTooltip(_27.domNode);dj.showTooltip(_28,_27.domNode,0);return false;}var _29=new Date();_29.setHours(0,0,0,0);isValid=d.date.compare(m.localizeDate(_25),_29)>0?false:true;if(!isValid){_28=misys.getLocalization("LastModifiedDateGreaterThanCurrentDate");_25.focus();_25.set("state","Error");dj.hideTooltip(_25.domNode);dj.showTooltip(_28,_25.domNode,0);return false;}return true;};function _2a(){var _2b=this;if(_2b.get("value")===null){return true;}var _2c=dj.byId("last_modified_date");if(!m.compareDateFields(_2c,_2b)){var _2d=dj.byId("last_modified_date2");displayMessage=misys.getLocalization("LastModifiedToLesserThanLastModifiedFrom");_2d.focus();_2d.set("displayedValue","");_2d.set("state","Error");dj.hideTooltip(_2d.domNode);dj.showTooltip(displayMessage,_2d.domNode,0);}return true;};function _2e(){if(dj.byId("sub_product_code")&&dj.byId("sub_product_code").get("value")!==""){dj.byId("sub_product_code").set("value","");}var _2f=dj.byId("parameter1").get("value"),_30=new Array();_30=_2f.split("Tnx");var _31=dj.byId("sub_product_code"),_32=m._config.SubProductsByProductsByCollection[_30[0]];_31.store=null;_31.store=new dojo.data.ItemFileReadStore({data:{identifier:"ID",label:"name",items:_32}});};function _33(){if(dj.byId("AmountRangevisible")){var _34=dj.byId("AmountRangevisible").value;var _35=isNaN(_34)?0:_34;dj.byId("AmountRange").set("value",_34);var _36=dj.byId("AmountRange2visible").value;dj.byId("AmountRange2").set("value",_36);}};d.mixin(m,{bind:function(){m.setValidation("cur_code",m.validateCurrency);m.connect("AmountRangevisible","onBlur",_9);m.connect("AmountRange2visible","onBlur",_e);m.connect("create_date","onBlur",_13);m.connect("create_date2","onBlur",_17);m.connect("maturity_date","onBlur",_1b);m.connect("maturity_date2","onBlur",_20);m.connect("last_modified_date","onBlur",_24);m.connect("last_modified_date2","onBlur",_2a);m.connect("entity","onChange",function(){var _37=dj.byId("account_no");if(_37){_37.set("value","");}});m.connect("submitButton","onClick",function(){_33();});m.connect("parameter1","onChange",_2e);}});d.mixin(m._config,{doReauthSubmit:function(_38){var _39={};if(d.isFunction(m._config.initReAuthParams)){_39=m._config.initReAuthParams();m._config.reauthXhrParams=m._config.reauthXhrParams||{};m._config.reauthXhrParams=_38;_39.list_keys=_38.content.list_keys;m._config.executeReauthentication(_39);}},initReAuthParams:function(){var _3a=m._config.getAmountAccountArray("tnx_amt;amt","Counterparty@counterparty_act_no",true),_3b={productCode:"MB",subProductCode:"",transactionTypeCode:"14",entity:"",currency:"",amount:"",operation:"SUBMIT",es_field1:m.trimAmount(m._config.getAmountSum(_3a)),es_field2:m._config.getESIGNFeildForBulk(_3a)};if(dj.byId("doReauthentication")){dj.byId("doReauthentication").set("disabled",false);}return _3b;},reauthSubmit:function(){var _3c=dj.byId("reauth_password").get("value");if(dj.byId("doReauthentication")){dj.byId("doReauthentication").set("disabled",true);}d.mixin(m._config.reauthXhrParams.content,{reauth_otp_response:misys.encryptText(_3c)});m.xhrPost(m._config.reauthXhrParams);setTimeout(d.hitch(dijit.byId(m._config.getGridId()),"render"),100);dj.byId("reauth_password").set("value","");dj.byId("reauth_dialog").hide();},nonReauthSubmit:function(){m.xhrPost(m._config.reauthXhrParams);setTimeout(d.hitch(dijit.byId(m._config.getGridId()),"render"),100);}});})(dojo,dijit,misys);dojo.require("misys.client.binding.common.listdef_cancel_post_dated_client");}