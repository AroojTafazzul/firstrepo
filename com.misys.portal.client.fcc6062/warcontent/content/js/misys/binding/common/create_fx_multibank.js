/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.common.create_fx_multibank"]){dojo._hasResource["misys.binding.common.create_fx_multibank"]=true;dojo.provide("misys.binding.common.create_fx_multibank");dojo.require("dojo.parser");dojo.require("dijit.dijit");dojo.require("misys.widget.Dialog");dojo.require("dijit.form.Form");dojo.require("dijit.form.Button");dojo.require("dijit.layout.ContentPane");dojo.require("dijit.ProgressBar");(function(d,dj,m){var _1=d.byId("fx-board-rate-type"),_2=d.byId("fx-contracts-type"),_3,_4="1",_5="2",_6="3",_7,_8,_9,_a;function _b(){if(dj.byId("fx_exchange_rate")){dj.byId("fx_exchange_rate").set("value","");dj.byId("fx_exchange_rate_amt").set("value","");dj.byId("fx_exchange_rate_cur_code").set("value","");}if(dj.byId("fx_tolerance_rate")){dj.byId("fx_tolerance_rate").set("value","");dj.byId("fx_tolerance_rate_amt").set("value","");dj.byId("fx_tolerance_rate_cur_code").set("value","");}};function _c(_d){if(dj.byId("fx_contract_nbr_1")){m.toggleRequired("fx_contract_nbr_1",_d);}if(dj.byId("fx_contract_nbr_amt_1")){m.toggleRequired("fx_contract_nbr_amt_1",_d);}var _e=d.byId("fx_contract_nbr_1_mand");if(!_e){_e=d.create("span",{innerHTML:"*",id:"fx_contract_nbr_1_mand"});d.addClass(_e,"required-field-symbol");}else{_e=d.byId("fx_contract_nbr_1_mand");}if(_d){d.query(dj.byId("fx_contract_nbr_1").domNode.parentNode.childNodes).forEach(function(_f,_10){if(_10===0){d.place(_e,_f[0],"first");}});}else{d.destroy(_e);}};function _11(_12,_13){if(_12>0){for(var i=1;i<=_12;i++){if(dj.byId("fx_contract_nbr_"+i)){dj.byId("fx_contract_nbr_"+i).set("value","");m.toggleRequired("fx_contract_nbr_"+i,false);}}}if(_13==="Y"){for(var j=1;j<=_12;j++){if(dj.byId("fx_contract_nbr_amt_"+j)){dj.byId("fx_contract_nbr_amt_"+j).set("value","");dj.byId("fx_contract_nbr_cur_code_"+j).set("value","");}}if((_12!=="1")&&(dj.byId("fx_total_utilise_cur_code"))){dj.byId("fx_total_utilise_cur_code").set("value","");dj.byId("fx_total_utilise_amt").set("value","");}}};function _14(_15){if(dj.byId("fxBuyOrSell")&&dj.byId("fxTnxAmt")){var _16=dj.byId("fxBuyOrSell").get("value");var _17=dj.byId("fxTnxAmt").get("value");var _18=dj.byId("fx_tolerance_rate");var _19;if(_16!==""&&!isNaN(_17)&&dj.byId("fx_tolerance_rate")&&dj.byId("fx_tolerance_rate").get("value")!==""&&dj.byId("fx_tolerance_rate_amt")){var _1a=dj.byId("fx_tolerance_rate").get("value");var _1b=Math.round(_1a*1000)/1000;var _1c=Math.round(_8*1000)/1000;var _1d=Math.round(_7*1000)/1000;if(_16===_4||_16===_6){if(_1b>=_1c&&_1b<=_1d){dj.byId("fx_tolerance_rate_amt").set("value",(_17*(_1b/_9)));}else{_19=misys.getLocalization("fxToleranceRangeError",[_1c,_1d]);_18.focus();_18.set("state","Error");dj.hideTooltip(_18.domNode);dj.showTooltip(_19,_18.domNode,0);}}else{if(_16===_5){if(_1b>=_1d&&_1b<=_1c){dj.byId("fx_tolerance_rate_amt").set("value",(_17/(_1b/_9)));}else{_19=misys.getLocalization("fxToleranceRangeError",[_1d,_1c]);_18.focus();_18.set("state","Error");dj.hideTooltip(_18.domNode);dj.showTooltip(_19,_18.domNode,0);}}}}}};function _1e(_1f){if(dj.byId("fx_tolerance_rate")){dj.byId("fx_tolerance_rate").set("readOnly",_1f);}};function _20(_21,_22,_23){if(_21>0){for(var i=1;i<=_21;i++){if(dj.byId("fx_contract_nbr_"+i)){dj.byId("fx_contract_nbr_"+i).set("readOnly",_23);}}}if(_22==="Y"){for(var j=1;j<=_21;j++){if(dj.byId("fx_contract_nbr_amt_"+j)){dj.byId("fx_contract_nbr_amt_"+j).set("readOnly",_23);}}}};function _24(_25,_26){if(dj.byId("fx_rates_type_1")&&dj.byId("fx_rates_type_1").get("checked")){_11(_25,_26);m.fireFXAction();m.animate("fadeOut",_2);m.animate("fadeIn",_1);m.animate("fadeOut",d.byId("contractMsgDiv"));m.animate("fadeOut",d.byId("totalUtiliseDiv"));m.disconnect(dj.byId("fx_rates_type_2"));_c(false);}if(dj.byId("fx_rates_type_2")&&dj.byId("fx_rates_type_2").get("checked")){_b();m.animate("fadeOut",_1);m.animate("fadeIn",_2);m.animate("fadeIn",d.byId("contractMsgDiv"));m.animate("fadeIn",d.byId("totalUtiliseDiv"));if(_25!=="1"){m.registerAndcalculateTotalUtiliseAmt(_25);}_c(true);}};function _27(_28){var _29=new dijit.Dialog({id:"fxalertDialog",refocus:false,draggable:false,"class":"dialog"}),_2a=d.create("div"),_2b=d.create("div",{id:"fxdialogButtons","class":"dijitDialogPaneActionBar"});d.place(d.create("div",{id:"fxalertDialogContent"}),_2a);var _2c=new dijit.ProgressBar({id:"fxdialogProgressBar",indeterminate:true});_2c.placeAt(_2a);d.place(_2b,_2a);_29.set("content",_2a);return _29;};function _2d(){var _2e="fxalertDialog";var _2f=dj.byId(dialogId);if(_2f&&_2f.get("open")){_2f.hide();}};function _30(_31,_32,_33){_31=_31.toUpperCase();var _34="fxalertDialog";dialog=dj.byId(_34)||_27(_34);var _35=d.byId("fxdialogProgressBar"),_36=d.byId("fxalertDialogContent");d.style(_35,"display","none");d.style(_35,"visibility","hidden");d.toggleClass(_36,"informationDialog",_31==="FXPROGRESS");_33=m.getLocalization("progressMessage");d.style(_36,"height","auto");d.style(_35,"display","block");d.style(_35,"visibility","visible");dialog.set("title",_33);if(_31!=="URL"&&_31!=="HTML"){_36.innerHTML=_32;d.style(_36,"height","auto");d.style(_36,"width","auto");}return dialog.show();};d.mixin(m,{fxContractNbrAmtOnBlur:function(){m.setTnxAmt(this.get("value"));m.calculateTotalUtiliseAmt(dj.byId("fx_nbr_contracts").get("value"));},validateToleranceAndExchangeRate:function(){var _37,_38,_39=true;if(this&&this.get("value")!==""){_38=this.get("value");if(isNaN(_38)){this.invalidMessage=m.getLocalization("invalidExchangeAndTolerateRate");m.showTooltip(m.getLocalization("invalidExchangeAndTolerateRate"),this.domNode,["after"]);this.state="Error";this._setStateClass();dj.setWaiState(field.focusNode,"invalid","true");return false;}_37=_38.split(".");if((_37[0])&&(_37[0].length>4)){_39=false;}if((_37[1])&&(_37[1].length>7)){_39=false;}if(!_39){this.invalidMessage=m.getLocalization("invalidExchangeAndTolerateRateLength");m.showTooltip(m.getLocalization("invalidExchangeAndTolerateRateLength"),this.domNode,["after"]);this.state="Error";this._setStateClass();dj.setWaiState(field.focusNode,"invalid","true");return false;}}return true;},createContractRateFields:function(_3a,_3b){for(var i=1;i<=_3a;i++){if(!dijit.byId("fx_contract_nbr_"+i)){var div=dojo.create("div",null,dojo.byId("fx-contracts-type"));div.id="fx_contract_nbr_"+i;var _3c=dojo.create("label",{innerHTML:m.getLocalization("FXContractNumber")},div);var _3d=new dijit.form.ValidationTextBox({id:"fx_contract_nbr_"+i,name:"fx_contract_nbr_"+i}).placeAt(div,"last");if(_3d){_3d.set("maxLength","16");}if(_3b==="Y"){var _3e=dojo.create("div",{"class":"inlineBlock amtUtiliseDiv"},div);var _3f=dojo.create("label",{innerHTML:m.getLocalization("FXAmountToUtilise")},_3e);var _40=new dijit.form.ValidationTextBox({id:"fx_contract_nbr_cur_code_"+i,name:"fx_contract_nbr_cur_code_"+i,maxLength:"3",readOnly:"Y","class":"xx-small"}).placeAt(_3e,"last");var _41=new misys.form.CurrencyTextBox({id:"fx_contract_nbr_amt_"+i,name:"fx_contract_nbr_amt_"+i}).placeAt(_3e,"last");}}if(_3b==="Y"&&_3a!=="1"&&!dijit.byId("fx_total_utilise_amt")){var _42=dojo.create("div",{"class":"amtUtiliseDiv"},d.byId("contractMsgDiv"));var _43=dojo.create("span",{innerHTML:m.getLocalization("FXContractSequenceNote")},_42);var _44=dojo.create("div",{"class":"inlineBlock amtUtiliseDiv"},_42);var _45=dojo.create("label",{innerHTML:m.getLocalization("FXTotalAmountToUtilise")},_44);var _46=new dijit.form.ValidationTextBox({id:"fx_total_utilise_cur_code",name:"fx_total_utilise_cur_code",maxLength:"3",readOnly:"Y","class":"xx-small"}).placeAt(_44,"last");var _47=new misys.form.CurrencyTextBox({id:"fx_total_utilise_amt",name:"fx_total_utilise_amt"}).placeAt(_44,"last");dj.byId("fx_total_utilise_amt").set("readOnly",true);}}if(_3b==="Y"){for(var j=1;j<=_3a;j++){m.setCurrency(dj.byId("fx_contract_nbr_cur_code_"+j),["fx_contract_nbr_amt_"+j]);dj.byId("fx_contract_nbr_cur_code_"+j).set("readOnly",true);if(dj.byId("fx_total_utilise_cur_code")){dj.byId("fx_total_utilise_cur_code").set("readOnly",true);}}}},setDataForContractFields:function(_48,_49){if(m._config.fxContractData){for(var i=1;i<=_48;i++){var _4a=m._config.fxContractData;if(dj.byId("fx_contract_nbr_"+i)){dj.byId("fx_contract_nbr_"+i).set("value",_4a["fx_contract_nbr_"+i]);if(_49==="Y"){dj.byId("fx_contract_nbr_cur_code_"+i).set("value",_4a["fx_contract_nbr_cur_code_"+i]);dj.byId("fx_contract_nbr_amt_"+i).set("value",_4a["fx_contract_nbr_amt_"+i]);}}}m.calculateTotalUtiliseAmt(dj.byId("fx_nbr_contracts").get("value"));}},calculateTotalUtiliseAmt:function(_4b){var _4c=dj.byId("ft_amt")?dj.byId("ft_amt").get("value"):dj.byId("td_amt").get("value");var _4d=0;var _4e,_4f;for(var i=1;i<=_4b;i++){if(dj.byId("fx_contract_nbr_amt_"+i)){var _50;if(!isNaN(dj.byId("fx_contract_nbr_amt_"+i).get("value"))){_50=dj.byId("fx_contract_nbr_amt_"+i).get("value");}else{_50=0;}_4d=_4d+_50;if(_4d===0&&dj.byId("fx_total_utilise_amt")){dj.byId("fx_total_utilise_amt").set("value","");}else{if(_4c&&parseFloat(_4d.toFixed(2))<=parseFloat(_4c)&&dj.byId("fx_total_utilise_amt")){dj.byId("fx_total_utilise_amt").set("value",parseFloat(_4d));}else{_4e=misys.getLocalization("fxContractUtlizeAmtError",[_4d.toFixed(2),_4c]);_4f=dj.byId("fx_contract_nbr_amt_"+i);_4f.set("state","Error");dj.hideTooltip(_4f.domNode);dj.showTooltip(_4e,_4f.domNode,0);break;}}m.setCurrency(dj.byId("fx_total_utilise_cur_code"),["fx_total_utilise_amt"]);}}},againcalculateTotalUtiliseAmtForDrafts:function(_51){var _52=dj.byId("ft_amt")?dj.byId("ft_amt").get("value"):dj.byId("td_amt").get("value");var _53=0;var _54,_55;for(var i=1;i<=_51;i++){if(dj.byId("fx_contract_nbr_amt_"+i)){var _56;if(!isNaN(dj.byId("fx_contract_nbr_amt_"+i).get("value"))){_56=dj.byId("fx_contract_nbr_amt_"+i).get("value");}else{_56=0;}_53=_53+_56;if(_53==="0"){dj.byId("fx_total_utilise_amt").set("value","");}else{if(_52&&parseFloat(_53)<=parseFloat(_52)){dj.byId("fx_total_utilise_amt").set("value",parseFloat(_53));}}m.setCurrency(dj.byId("fx_total_utilise_cur_code"),["fx_total_utilise_amt"]);}}},registerAndcalculateTotalUtiliseAmt:function(_57){for(var i=1;i<=_57;i++){if(dj.byId("fx_contract_nbr_amt_"+i)){m.connect(("fx_contract_nbr_amt_"+i),"onBlur",m.fxContractNbrAmtOnBlur);}}},registerAndAgainCalculateTotalAmountforDrafts:function(_58){var _59=dj.byId("ft_amt")?dj.byId("ft_amt").get("value"):dj.byId("td_amt").get("value");for(var i=1;i<=_58;i++){if(dj.byId("fx_contract_nbr_amt_"+i).get("value")!==""){m.connect(("fx_contract_nbr_amt_"+i),"onBlur",m.fxContractNbrAmtOnBlur);}}},fxBeforeSubmitValidation:function(){var _5a=_3.maxNbrContracts;var _5b=_3.amtUtiliseInd;var _5c=misys.getLocalization("fxInBetweenContractError");if(dj.byId("fx_rates_type_2")&&dj.byId("fx_rates_type_2").get("checked")){for(var j=1;j<=_5a;j++){var _5d="fx_contract_nbr_amt_"+j;var _5e="fx_contract_nbr_"+j;if(_5b&&_5b==="Y"){if(dj.byId(_5d)&&dj.byId(_5e)&&(dj.byId(_5e).get("value")===""||isNaN(dj.byId(_5d).get("value")))){if(dj.byId(_5e).get("value")===""&&isNaN(dj.byId(_5d).get("value"))&&j===1){dj.byId(_5d).set("required",true);dj.byId(_5e).set("required",true);dj.byId(_5e).focus();return false;}else{if(!isNaN(dj.byId(_5d).get("value")&&dj.byId(_5e).get("value")==="")){dj.byId(_5e).set("required",true);dj.byId(_5e).focus();return false;}else{if(dj.byId(_5e).get("value")!==""&&isNaN(dj.byId(_5d).get("value"))){dj.byId(_5d).set("required",true);dj.byId(_5d).focus();return false;}else{if(j!==1&&dj.byId("fx_contract_nbr_"+(j+1))&&dj.byId("fx_contract_nbr_"+(j+1)).get("value")!==""&&dj.byId("fx_contract_nbr_amt_"+(j+1))&&dj.byId("fx_contract_nbr_amt_"+(j+1)).get("value")!==""){dj.byId(_5e).set("required",true);dijit.showTooltip(_5c,dj.byId(_5e).domNode,0);return false;}}}}}if(dj.byId(_5d)&&dj.byId(_5d).get("value")<=0){dj.byId(_5d).set("value","");var _5f=misys.getLocalization("fxIncorrectAmount");dijit.showTooltip(_5f,dj.byId(_5d).domNode,0);return false;}}else{if(dj.byId(_5e)&&j===1&&dj.byId(_5e).get("value")===""){dj.byId(_5e).set("required",true);dj.byId(_5e).focus();return false;}else{if(j!==1&&dj.byId(_5e)&&dj.byId(_5e).get("value")===""&&dj.byId("fx_contract_nbr_"+(j+1))&&dj.byId("fx_contract_nbr_"+(j+1)).get("value")!==""){dj.byId(_5e).set("required",true);dijit.showTooltip(_5c,dj.byId(_5e).domNode,0);return false;}}}}}for(var h=1;h<=_5a;h++){var _60="fx_contract_nbr_amt_"+h;if(dj.byId(_60).get("state")==="Error"){dj.byId(_60).set("state","");}}return true;},initializeFX:function(_61,_62){if(m._config.fxParamData){_3=m._config.fxParamData[_61][_62];}},defaultBindTheFXTypes:function(){if(_3&&_3.isFXEnabled==="Y"){var _63,_64;_63=_3.maxNbrContracts;_64=_3.amtUtiliseInd;if(dj.byId("fx_rates_type_1")){m.animate("fadeOut",_2);m.animate("fadeOut",d.byId("contractMsgDiv"));m.animate("fadeOut",d.byId("totalUtiliseDiv"));m.animate("fadeIn",_1);}m.createContractRateFields(_63,_64);dj.byId("fx_rates_type_2").set("readOnly",true);_11(_63,_64);_1e(true);dj.byId("fx_rates_type_1").set("checked",true);_b();_20(true);dj.byId("fx_rates_type_1").set("readOnly",true);if(_3&&_3.toleranceDispInd&&_3.toleranceDispInd==="Y"){m.animate("fadeIn",d.byId("tolerance_div"));}else{m.animate("fadeOut",d.byId("tolerance_div"));}}else{m.animate("fadeOut",d.byId("fx-message-type"));if(d.byId("fx-section")){d.style("fx-section","display","none");}}},bindTheFXTypes:function(_65,_66){m.connect("fx_rates_type_2","onChange",function(){_24(_65,_66);});},setMasterCurrency:function(_67,_68){for(var i=1;i<=_67;i++){if(dj.byId("fx_contract_nbr_cur_code_"+i)&&_68!==""){dj.byId("fx_contract_nbr_cur_code_"+i).set("value",_68);}}if(dj.byId("fx_total_utilise_cur_code")&&_68!==""){dj.byId("fx_total_utilise_cur_code").set("value",_68);}for(var j=1;j<=_67;j++){m.setCurrency(dj.byId("fx_contract_nbr_cur_code_"+j),["fx_contract_nbr_amt_"+j]);}},onloadFXActions:function(){var _69,_6a;if(dj.byId("fx_rates_type_temp").get("value")==="01"){d.style("fx-contracts-type","display","none");d.style("contractMsgDiv","display","none");d.style("totalUtiliseDiv","display","none");}else{if(dj.byId("fx_rates_type_temp").get("value")==="02"){d.style("fx-board-rate-type","display","none");}}if(dj.byId("fx_rates_type_temp")&&dj.byId("fx_rates_type_temp").get("value")!==""){_69=_3.maxNbrContracts;_6a=_3.amtUtiliseInd;m.createContractRateFields(_69,_6a);m.setDataForContractFields(_69,_6a);m.bindTheFXTypes(dj.byId("fx_nbr_contracts").get("value"),_6a);if(dj.byId("fx_rates_type_1")&&dj.byId("fx_rates_type_1").get("checked")){dj.byId("fx_rates_type_1").set("checked",false);dj.byId("fx_rates_type_1").set("checked",true);m.fireFXAction();}else{if(dj.byId("fx_rates_type_2")&&dj.byId("fx_rates_type_2").get("checked")){dj.byId("fx_rates_type_2").set("checked",false);dj.byId("fx_rates_type_2").set("checked",true);if(dj.byId("fx_master_currency")&&dj.byId("fx_master_currency").get("value")!==""){m.setMasterCurrency(dj.byId("fx_nbr_contracts").get("value"),dj.byId("fx_master_currency").get("value"));}if(dj.byId("fx_nbr_contracts").get("value")>="1"){m.againcalculateTotalUtiliseAmtForDrafts(dj.byId("fx_nbr_contracts").get("value"));m.registerAndAgainCalculateTotalAmountforDrafts(dj.byId("fx_nbr_contracts").get("value"));if(dj.byId("fx_nbr_contracts").get("value")!==_3.maxNbrContracts&&(dj.byId("fx_contract_nbr_1")&&dj.byId("fx_contract_nbr_1").get("value")!=="")){dj.byId("fx_contract_nbr_1").set("value",dj.byId("fx_contract_nbr_1").get("value"));}m.setCurrency(dj.byId("fx_total_utilise_cur_code"),["fx_total_utilise_amt"]);}_c(true);}}}else{if(dj.byId("fx_rates_type_1")||dj.byId("fx_rates_type_2")){_69=_3.maxNbrContracts;_6a=_3.amtUtiliseInd;m.createContractRateFields(_69,_6a);m.defaultBindTheFXTypes();}}if(_3&&_3.toleranceDispInd&&_3.toleranceDispInd==="Y"){m.animate("fadeIn",d.byId("tolerance_div"));}else{m.animate("fadeOut",d.byId("tolerance_div"));}},fetchFXDetails:function(_6b,_6c,_6d,_6e,_6f,_70,_71){var _72,_73,_74,_75,_76,_77,_78,_79,_7a,_7b,_7c,_7d,_7e,_7f,_80,_81,_82,_83,_84,_85,_86;if(_3){_7d=_3.maxNbrContracts;_7e=_3.amtUtiliseInd;_80=_3.toleranceDispInd;if(!_7d){_7d="1";}if(!_7e){_7e="N";}if(_80&&_80==="Y"){_7f=_3.tolerancePercentage;}else{_7f="";}_30("FXPROGRESS",m.getLocalization("fetchingExchangeRates"));m.xhrPost({url:misys.getServletURL("/screen/AjaxScreen/action/FXRatesAction"),sync:true,handleAs:"json",content:{fromCur:_6b,toCur:_6c,amount:_6d,productCode:_6e,bankAbbvName:_6f,tolerancePercent:_7f,isDirectConversion:_71},load:function(_87,_88){_7a=_87.boardExchangeRate;_7=_87.boardExchangeRate;_7c=_87.equivalentRateAmt;_7b=_87.fxToken;_81=_87.toleranceRate;_8=_87.toleranceRate;_82=_87.toleranceEquiAmount;_83=_87.buyOrSell;_9=_87.patyUnits;_a=_6d;},customError:function(_89,_8a){console.error("Technical error while getting fx details ");console.error(_89);}});setTimeout(function(){var _8b="fxalertDialog";var _8c=dj.byId(_8b);if(_8c&&_8c.get("open")){_8c.hide();}},500);if(!_71&&_70!==_6c){_86=_6d;}else{_86=parseFloat(_7c);}if(_3.boardCurrencies&&_3.boardCurrencies[_6c]){_74=_3.boardCurrencies[_6c].minAmt;_75=_3.boardCurrencies[_6c].maxAmt;if(_86>=_74&&_86<=_75){_72="Y";}else{_84=misys.getLocalization("FXAmountNotInSpecifiedRange",[_74,_75,_6c]);_72="N";}}else{_84=misys.getLocalization("FXOptionNotAvailable");_72="N";}if(_72==="Y"){if(_7a&&_7a!==""&&_7c&&_7c!==""&&_7b&&_7b!==""){if(_7b&&_7b!==""&&dj.byId("fxinteresttoken")){dj.byId("fxinteresttoken").set("value",_7b);}if(dj.byId("fx_exchange_rate")&&_7a&&_7a!==""){dj.byId("fx_exchange_rate").set("value",_7a);}if(dj.byId("fx_exchange_rate_cur_code")&&_70&&_70!==""){dj.byId("fx_exchange_rate_cur_code").set("value",_70);}if(dj.byId("fx_exchange_rate_amt")&&_7c&&_7c!==""){dj.byId("fx_exchange_rate_amt").set("value",parseFloat(_7c));m.setCurrency(dj.byId("fx_exchange_rate_cur_code"),["fx_exchange_rate_amt"]);}if(dj.byId("fxBuyOrSell")){dj.byId("fxBuyOrSell").set("value",_83);}if(dj.byId("fxTnxAmt")){dj.byId("fxTnxAmt").set("value",_6d);}if(_80&&_80==="Y"&&_81&&_81!==""&&_82&&_82!==""){if(dj.byId("fx_tolerance_rate")&&_81&&_81!==""){dj.byId("fx_tolerance_rate").set("value",_81);}if(dj.byId("fx_tolerance_rate_cur_code")&&_70&&_70!==""){dj.byId("fx_tolerance_rate_cur_code").set("value",_70);}if(dj.byId("fx_tolerance_rate_amt")&&_82&&_82!==""){dj.byId("fx_tolerance_rate_amt").set("value",_82);m.setCurrency(dj.byId("fx_tolerance_rate_cur_code"),["fx_tolerance_rate_amt"]);}if(dj.byId("fx_tolerance_rate")&&dj.byId("fx_tolerance_rate_amt")&&dj.byId("fx_tolerance_rate_value")&&dj.byId("fx_tolerance_rate_amt_value")&&dj.byId("fx_tolerance_rate_value").get("value")!==""&&dj.byId("fx_tolerance_rate_amt_value").get("value")!==""){var _8d=dj.byId("fx_tolerance_rate_value").get("value");var _8e=dj.byId("fx_tolerance_rate_amt_value").get("value");dj.byId("fx_tolerance_rate").set("value",_8d);dj.byId("fx_tolerance_rate_amt").set("value",_8e);}}}else{m.defaultBindTheFXTypes();}}else{_72="N";}if(_3.contractCurrencies&&_3.contractCurrencies[_6c]){_78=_3.contractCurrencies[_6c].minAmt;_79=_3.contractCurrencies[_6c].maxAmt;if(_86>=_78&&_86<=_79){_76="Y";}else{_85=misys.getLocalization("FXAmountNotInSpecifiedRange",[_78,_79,_6c]);_76="N";}}else{_85=misys.getLocalization("FXOptionNotAvailable");_76="N";}}if(_72==="Y"&&_76==="Y"){dj.byId("fx_rates_type_1").set("readOnly",false);dj.byId("fx_rates_type_2").set("readOnly",false);_1e(true);_20(_7d,_7e,false);dj.byId("fx_rates_type_1").set("checked",true);}else{if(_72==="Y"&&_76==="N"){dj.byId("fx_rates_type_2").set("checked",false);dj.byId("fx_rates_type_2").set("readOnly",true);dj.byId("fx_rates_type_1").set("checked",true);var _8f=dj.byId("fx_rates_type_2").domNode;var _90=m.connect("fx_rates_type_2","onFocus",function(){if(_76==="N"&&dj.byId("fx_rates_type_2").get("readOnly")){dijit.showTooltip(_85,_8f,0);}});m.connect("ft_cur_code","onChange",function(){m.disconnect(_90);});m.connect("fx_rates_type_2","onBlur",function(){dijit.hideTooltip(dijit.byId("fx_rates_type_2").domNode);});}else{if(_72==="N"&&_76==="Y"){_a=_6d;dj.byId("fx_rates_type_1").set("checked",false);dj.byId("fx_rates_type_1").set("readOnly",true);dj.byId("fx_rates_type_2").set("checked",true);_20(_7d,_7e,false);var _91=dj.byId("fx_rates_type_1").domNode;var _92=m.connect("fx_rates_type_1","onFocus",function(){if(_72==="N"&&dj.byId("fx_rates_type_1").get("readOnly")){dijit.showTooltip(_84,_91,0);}});m.connect("ft_cur_code","onChange",function(){m.disconnect(_92);});m.connect("fx_rates_type_1","onBlur",function(){dijit.hideTooltip(dijit.byId("fx_rates_type_1").domNode);});}else{m.defaultBindTheFXTypes();}}}if((_76==="Y")&&(dj.byId("fx_nbr_contracts")&&_7d>="1")){dj.byId("fx_nbr_contracts").set("value",_7d);}if(_80==="Y"){m.connect("fx_tolerance_rate","onBlur",function(){_14(_71);});}m.connect("fx_rates_type_1","onChange",function(){if(_72==="Y"&&dj.byId("fx_rates_type_1")&&dj.byId("fx_rates_type_1").get("checked")){_30("FXPROGRESS",m.getLocalization("fetchingExchangeRates"));m.fireFXAction();m.animate("fadeOut",_2);m.animate("fadeOut",d.byId("contractMsgDiv"));m.animate("fadeOut",d.byId("totalUtiliseDiv"));m.animate("fadeIn",_1);if(_76==="Y"){_11(_7d,_7e);}_c(false);setTimeout(function(){var _93="fxalertDialog";var _94=dj.byId(_93);if(_94&&_94.get("open")){_94.hide();}},500);}if(_76&&dj.byId("fx_rates_type_2")&&dj.byId("fx_rates_type_2").get("checked")){m.animate("fadeOut",_1);m.animate("fadeIn",_2);m.animate("fadeIn",d.byId("contractMsgDiv"));m.animate("fadeIn",d.byId("totalUtiliseDiv"));if(_7d!=="1"){m.registerAndcalculateTotalUtiliseAmt(_7d);}_b();m.setMasterCurrency(_7d,_6c);if(dj.byId("fx_nbr_contracts")&&_7d>="1"){dj.byId("fx_nbr_contracts").set("value",_7d);}_c(true);}});}});})(dojo,dijit,misys);dojo.require("misys.client.binding.common.create_fx_multibank_client");}