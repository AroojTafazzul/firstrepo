/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.common.create_fx"]){dojo._hasResource["misys.binding.common.create_fx"]=true;dojo.provide("misys.binding.common.create_fx");dojo.require("dojo.parser");dojo.require("dijit.dijit");dojo.require("misys.widget.Dialog");dojo.require("dijit.form.Form");dojo.require("dijit.form.Button");dojo.require("dijit.layout.ContentPane");dojo.require("dijit.ProgressBar");(function(d,dj,m){var _1=d.byId("fx-board-rate-type"),_2=d.byId("fx-contracts-type"),_3,_4="1",_5="2",_6="3",_7,_8,_9,_a;function _b(){if(dj.byId("fx_exchange_rate")){dj.byId("fx_exchange_rate").set("value","");dj.byId("fx_exchange_rate_cur_code").set("value","");dj.byId("fx_exchange_rate_amt").set("value","");}if(dj.byId("fx_tolerance_rate")){dj.byId("fx_tolerance_rate").set("value","");dj.byId("fx_tolerance_rate_amt").set("value","");dj.byId("fx_tolerance_rate_cur_code").set("value","");}};function _c(_d){if(dj.byId("fx_contract_nbr_1")){m.toggleRequired("fx_contract_nbr_1",_d);}if(dj.byId("fx_contract_nbr_amt_1")){m.toggleRequired("fx_contract_nbr_amt_1",_d);}var _e=d.byId("fx_contract_nbr_1_mand");if(!_e){_e=d.create("span",{innerHTML:"*",id:"fx_contract_nbr_1_mand"});d.addClass(_e,"required-field-symbol");}else{_e=d.byId("fx_contract_nbr_1_mand");}if(_d){d.query(dj.byId("fx_contract_nbr_1").domNode.parentNode.childNodes).forEach(function(_f,_10){if(_10===0){d.place(_e,_f[0],"first");}});}else{d.destroy(_e);}};function _11(_12,_13){if(_12>0){for(var i=1;i<=_12;i++){if(dj.byId("fx_contract_nbr_"+i)){dj.byId("fx_contract_nbr_"+i).set("value","");m.toggleRequired("fx_contract_nbr_"+i,false);}}}if(_13==="Y"){for(var j=1;j<=_12;j++){if(dj.byId("fx_contract_nbr_amt_"+j)){dj.byId("fx_contract_nbr_amt_"+j).set("value","");dj.byId("fx_contract_nbr_cur_code_"+j).set("value","");}}if((_12!=="1")&&(dj.byId("fx_total_utilise_cur_code"))){dj.byId("fx_total_utilise_cur_code").set("value","");dj.byId("fx_total_utilise_amt").set("value","");}}};function _14(_15){if(dj.byId("fxBuyOrSell")&&dj.byId("fxTnxAmt")){var _16=dj.byId("fxBuyOrSell").get("value");var _17=dj.byId("fxTnxAmt").get("value");var _18=dj.byId("fx_tolerance_rate");var _19;if(_16!==""&&!isNaN(_17)&&dj.byId("fx_tolerance_rate")&&dj.byId("fx_tolerance_rate").get("value")!==""&&dj.byId("fx_tolerance_rate_amt")){var _1a=dj.byId("fx_tolerance_rate").get("value");if(_16===_4||_16===_6){if(_1a>=_8&&_1a<=_7){dj.byId("fx_tolerance_rate_amt").set("value",(_17*(_1a/_9)));}else{_19=misys.getLocalization("fxToleranceRangeError",[_8,_7]);_18.focus();_18.set("state","Error");dj.hideTooltip(_18.domNode);dj.showTooltip(_19,_18.domNode,0);}}else{if(_16===_5){if(_1a>=_7&&_1a<=_8){dj.byId("fx_tolerance_rate_amt").set("value",(_17/(_1a/_9)));}else{_19=misys.getLocalization("fxToleranceRangeError",[_7,_8]);_18.focus();_18.set("state","Error");dj.hideTooltip(_18.domNode);dj.showTooltip(_19,_18.domNode,0);}}}}}};function _1b(_1c){if(dj.byId("fx_tolerance_rate")){dj.byId("fx_tolerance_rate").set("readOnly",_1c);}};function _1d(_1e,_1f,_20){if(_1e>0){for(var i=1;i<=_1e;i++){if(dj.byId("fx_contract_nbr_"+i)){dj.byId("fx_contract_nbr_"+i).set("readOnly",_20);}}}if(_1f==="Y"){for(var j=1;j<=_1e;j++){if(dj.byId("fx_contract_nbr_amt_"+j)){dj.byId("fx_contract_nbr_amt_"+j).set("readOnly",_20);}}}};function _21(_22,_23){var _24=dj.byId("sub_tnx_type_code");var _25=dj.byId("tnx_type_code");if(dj.byId("fx_rates_type_1")&&dj.byId("fx_rates_type_1").get("checked")){_11(_22,_23);m.fireFXAction();m.animate("fadeOut",_2);m.animate("fadeIn",_1);m.animate("fadeOut",d.byId("contractMsgDiv"));m.animate("fadeOut",d.byId("totalUtiliseDiv"));m.disconnect(dj.byId("fx_rates_type_2"));_c(false);}if(dj.byId("fx_rates_type_2")&&dj.byId("fx_rates_type_2").get("checked")){_b();m.animate("fadeOut",_1);m.animate("fadeIn",_2);m.animate("fadeIn",d.byId("contractMsgDiv"));m.animate("fadeIn",d.byId("totalUtiliseDiv"));if(_22!=="1"){m.registerAndcalculateTotalUtiliseAmt(_22);}if((_25&&_25.get("value")==="85")||(_24&&_24.get("value")==="A4")){_c(false);}else{_c(true);}}};function _26(_27){var _28=new dijit.Dialog({id:"fxalertDialog",refocus:false,draggable:false,"class":"dialog"}),_29=d.create("div"),_2a=d.create("div",{id:"fxdialogButtons","class":"dijitDialogPaneActionBar"});d.place(d.create("div",{id:"fxalertDialogContent"}),_29);var _2b=new dijit.ProgressBar({id:"fxdialogProgressBar",indeterminate:true});_2b.placeAt(_29);d.place(_2a,_29);_28.set("content",_29);return _28;};function _2c(){var _2d="fxalertDialog";var _2e=dj.byId(dialogId);if(_2e&&_2e.get("open")){_2e.hide();}};function _2f(_30,_31,_32){_30=_30.toUpperCase();var _33="fxalertDialog";dialog=dj.byId(_33)||_26(_33);var _34=d.byId("fxdialogProgressBar"),_35=d.byId("fxalertDialogContent");d.style(_34,"display","none");d.style(_34,"visibility","hidden");d.toggleClass(_35,"informationDialog",_30==="FXPROGRESS");_32=m.getLocalization("progressMessage");d.style(_35,"height","auto");d.style(_34,"display","block");d.style(_34,"visibility","visible");dialog.set("title",_32);if(_30!=="URL"&&_30!=="HTML"){_35.innerHTML=_31;d.style(_35,"height","auto");d.style(_35,"width","auto");}return dialog.show();};d.mixin(m,{fxContractNbrAmtOnBlur:function(){m.setTnxAmt(this.get("value"));m.calculateTotalUtiliseAmt(maxNbrContracts);},validateToleranceAndExchangeRate:function(){var _36,_37,_38=true;if(this&&this.get("value")!==""){_37=this.get("value");if(isNaN(_37)){this.invalidMessage=m.getLocalization("invalidExchangeAndTolerateRate");m.showTooltip(m.getLocalization("invalidExchangeAndTolerateRate"),this.domNode,["after"]);this.state="Error";this._setStateClass();dj.setWaiState(field.focusNode,"invalid","true");return false;}_36=_37.split(".");if((_36[0])&&(_36[0].length>4)){_38=false;}if((_36[1])&&(_36[1].length>7)){_38=false;}if(!_38){this.invalidMessage=m.getLocalization("invalidExchangeAndTolerateRateLength");m.showTooltip(m.getLocalization("invalidExchangeAndTolerateRateLength"),this.domNode,["after"]);this.state="Error";this._setStateClass();dj.setWaiState(field.focusNode,"invalid","true");return false;}}return true;},createContractRateFields:function(_39,_3a){var _3b=dj.byId("sub_tnx_type_code");var _3c=dj.byId("tnx_type_code");for(var i=1;i<=_39;i++){if(!dijit.byId("fx_contract_nbr_"+i)){var div=dojo.create("div",null,dojo.byId("fx-contracts-type"));div.id="fx_contract_nbr_"+i;var _3d=dojo.create("label",{innerHTML:m.getLocalization("FXContractNumber")},div);var _3e=new dijit.form.ValidationTextBox({id:"fx_contract_nbr_"+i,name:"fx_contract_nbr_"+i}).placeAt(div,"last");if(_3e){_3e.set("maxLength","16");}if(((!_3c||_3c.get("value")!=="85")&&(!_3b||_3b.get("value")!=="A4"))&&_3a==="Y"){var _3f=dojo.create("div",{"class":"inlineBlock amtUtiliseDiv"},div);var _40=dojo.create("label",{innerHTML:m.getLocalization("FXAmountToUtilise2")},_3f);var _41=new dijit.form.ValidationTextBox({id:"fx_contract_nbr_cur_code_"+i,name:"fx_contract_nbr_cur_code_"+i,maxLength:"3",readOnly:"Y","class":"xx-small"}).placeAt(_3f,"last");var _42=new misys.form.CurrencyTextBox({id:"fx_contract_nbr_amt_"+i,name:"fx_contract_nbr_amt_"+i}).placeAt(_3f,"last");}}if(((!_3c||_3c.get("value")!=="85")&&(!_3b||_3b.get("value")!=="A4"))&&(_3a==="Y"&&_39!=="1"&&!dijit.byId("fx_total_utilise_amt"))){var _43=dojo.create("div",{"class":"amtUtiliseDiv"},d.byId("contractMsgDiv"));var _44=dojo.create("span",{innerHTML:m.getLocalization("FXContractSequenceNote")},_43);var _45=dojo.create("div",{"class":"inlineBlock amtUtiliseDiv"},_43);var _46=dojo.create("label",{innerHTML:m.getLocalization("FXTotalAmountToUtilise")},_45);var _47=new dijit.form.ValidationTextBox({id:"fx_total_utilise_cur_code",name:"fx_total_utilise_cur_code",maxLength:"3",readOnly:"Y","class":"xx-small"}).placeAt(_45,"last");var _48=new misys.form.CurrencyTextBox({id:"fx_total_utilise_amt",name:"fx_total_utilise_amt"}).placeAt(_45,"last");dj.byId("fx_total_utilise_amt").set("readOnly",true);}}if(_3a==="Y"){for(var j=1;j<=_39;j++){m.setCurrency(dj.byId("fx_contract_nbr_cur_code_"+j),["fx_contract_nbr_amt_"+j]);if((!_3c||_3c.get("value")!=="85")&&(!_3b||_3b.get("value")!=="A4")){dj.byId("fx_contract_nbr_cur_code_"+j).set("readOnly",true);if(dj.byId("fx_total_utilise_cur_code")){dj.byId("fx_total_utilise_cur_code").set("readOnly",true);}}}}},setDataForContractFields:function(_49,_4a){var _4b=dj.byId("sub_tnx_type_code");var _4c=dj.byId("tnx_type_code");if(m._config.fxContractData){for(var i=1;i<=_49;i++){var _4d=m._config.fxContractData;if(dj.byId("fx_contract_nbr_"+i)){dj.byId("fx_contract_nbr_"+i).set("value",_4d["fx_contract_nbr_"+i]);if(((!_4c||_4c.get("value")!=="85")&&(!_4b||_4b.get("value")!=="A4"))&&_4a==="Y"){dj.byId("fx_contract_nbr_cur_code_"+i).set("value",_4d["fx_contract_nbr_cur_code_"+i]);dj.byId("fx_contract_nbr_amt_"+i).set("value",_4d["fx_contract_nbr_amt_"+i]);}}}}},calculateTotalUtiliseAmt:function(_4e){var _4f=dj.byId("ft_amt")?dj.byId("ft_amt").get("value"):dj.byId("td_amt").get("value");var _50=0;var _51,_52;for(var i=1;i<=_4e;i++){if(dj.byId("fx_contract_nbr_amt_"+i)){var _53;if(!isNaN(dj.byId("fx_contract_nbr_amt_"+i).get("value"))){_53=dj.byId("fx_contract_nbr_amt_"+i).get("value");}else{_53=0;}_50=_50+_53;if(_50==="0"){dj.byId("fx_total_utilise_amt").set("value","");}else{if(_4f&&parseFloat(_50.toFixed(2))<=parseFloat(_4f)){dj.byId("fx_total_utilise_amt").set("value",parseFloat(_50));}else{_51=misys.getLocalization("fxContractUtlizeAmtError",[_50.toFixed(2),_4f]);_52=dj.byId("fx_contract_nbr_amt_"+i);_52.set("state","Error");dj.hideTooltip(_52.domNode);dj.showTooltip(_51,_52.domNode,0);dj.showTooltip(_51,domNode,0);}}m.setCurrency(dj.byId("fx_total_utilise_cur_code"),["fx_total_utilise_amt"]);}}},againcalculateTotalUtiliseAmtForDrafts:function(_54){var _55=dj.byId("ft_amt")?dj.byId("ft_amt").get("value"):dj.byId("td_amt").get("value");var _56=0;var _57,_58;for(var i=1;i<=_54;i++){if(dj.byId("fx_contract_nbr_amt_"+i)){var _59;if(!isNaN(dj.byId("fx_contract_nbr_amt_"+i).get("value"))){_59=dj.byId("fx_contract_nbr_amt_"+i).get("value");}else{_59=0;}_56=_56+_59;if(_56==="0"){dj.byId("fx_total_utilise_amt").set("value","");}else{if(_55&&parseFloat(_56)<=parseFloat(_55)){dj.byId("fx_total_utilise_amt").set("value",parseFloat(_56));}}m.setCurrency(dj.byId("fx_total_utilise_cur_code"),["fx_total_utilise_amt"]);}}},registerAndcalculateTotalUtiliseAmt:function(_5a){for(var i=1;i<=_5a;i++){if(dj.byId("fx_contract_nbr_amt_"+i)){m.connect(("fx_contract_nbr_amt_"+i),"onBlur",function(){m.setTnxAmt(this.get("value"));m.calculateTotalUtiliseAmt(_5a);});m.calculateTotalUtiliseAmt(_5a);}}},registerAndAgainCalculateTotalAmountforDrafts:function(_5b){var _5c=dj.byId("ft_amt")?dj.byId("ft_amt").get("value"):dj.byId("td_amt").get("value");for(var i=1;i<=_5b;i++){if(dj.byId("fx_contract_nbr_amt_"+i).get("value")!==""){m.connect(("fx_contract_nbr_amt_"+i),"onBlur",function(){m.setTnxAmt(this.get("value"));m.calculateTotalUtiliseAmt(_5b);});}}},fxBeforeSubmitValidation:function(){var _5d=_3.fxParametersData.maxNbrContracts;var _5e=_3.fxParametersData.amtUtiliseInd;var _5f=misys.getLocalization("fxInBetweenContractError");if(dj.byId("fx_rates_type_2")&&dj.byId("fx_rates_type_2").get("checked")){for(var j=1;j<=_5d;j++){var _60="fx_contract_nbr_amt_"+j;var _61="fx_contract_nbr_"+j;if(_5e&&_5e==="Y"){if(dj.byId(_60)&&dj.byId(_61)&&(dj.byId(_61).get("value")===""||isNaN(dj.byId(_60).get("value")))){if(dj.byId(_61).get("value")===""&&isNaN(dj.byId(_60).get("value"))&&j===1){dj.byId(_60).set("required",true);dj.byId(_61).set("required",true);dj.byId(_61).focus();return false;}else{if(!isNaN(dj.byId(_60).get("value")&&dj.byId(_61).get("value")==="")){dj.byId(_61).set("required",true);dj.byId(_61).focus();return false;}else{if(dj.byId(_61).get("value")!==""&&isNaN(dj.byId(_60).get("value"))){dj.byId(_60).set("required",true);dj.byId(_60).focus();return false;}else{if(j!==1&&dj.byId("fx_contract_nbr_"+(j+1))&&dj.byId("fx_contract_nbr_"+(j+1)).get("value")!==""&&dj.byId("fx_contract_nbr_amt_"+(j+1))&&dj.byId("fx_contract_nbr_amt_"+(j+1)).get("value")!==""){dj.byId(_61).set("required",true);dijit.showTooltip(_5f,dj.byId(_61).domNode,0);return false;}}}}}if(dj.byId(_60)&&dj.byId(_60).get("value")<=0){dj.byId(_60).set("value","");var _62=misys.getLocalization("fxIncorrectAmount");dijit.showTooltip(_62,dj.byId(_60).domNode,0);return false;}}else{if(dj.byId(_61)&&j===1&&dj.byId(_61).get("value")===""){dj.byId(_61).set("required",true);dj.byId(_61).focus();return false;}else{if(j!==1&&dj.byId(_61)&&dj.byId(_61).get("value")===""&&dj.byId("fx_contract_nbr_"+(j+1))&&dj.byId("fx_contract_nbr_"+(j+1)).get("value")!==""){dj.byId(_61).set("required",true);dijit.showTooltip(_5f,dj.byId(_61).domNode,0);return false;}}}}}for(var h=1;h<=_5d;h++){var _63="fx_contract_nbr_amt_"+h;if(dj.byId(_63).get("state")==="Error"){dj.byId(_63).set("state","");}}return true;},initializeFX:function(_64){if(m._config.fxParamData){_3=m._config.fxParamData[_64];}},defaultBindTheFXTypes:function(){if(_3&&_3.fxParametersData&&_3.fxParametersData.isFXEnabled==="Y"){var _65,_66;_65=_3.fxParametersData.maxNbrContracts;_66=_3.fxParametersData.amtUtiliseInd;var _67=dj.byId("sub_tnx_type_code");var _68=dj.byId("tnx_type_code");if(dj.byId("fx_rates_type_1")){m.animate("fadeOut",_2);m.animate("fadeOut",d.byId("contractMsgDiv"));m.animate("fadeOut",d.byId("totalUtiliseDiv"));m.animate("fadeIn",_1);}m.createContractRateFields(_65,_66);if(((!_68||_68.get("value")!=="85")&&(!_67||_67.get("value")!=="A4"))&&dj.byId("fx_rates_type_2")){dj.byId("fx_rates_type_2").set("readOnly",true);}_11(_65,_66);_1b(true);if(dj.byId("fx_rates_type_1")){dj.byId("fx_rates_type_1").set("checked",true);}_b();_1d(true);if(((!_68||_68.get("value")!=="85")&&(!_67||_67.get("value")!=="A4"))&&dj.byId("fx_rates_type_1")){dj.byId("fx_rates_type_1").set("readOnly",true);}if(_3.fxParametersData.toleranceDispInd&&_3.fxParametersData.toleranceDispInd==="Y"){m.animate("fadeIn",d.byId("tolerance_div"));}else{m.animate("fadeOut",d.byId("tolerance_div"));}}else{m.animate("fadeOut",d.byId("fx-message-type"));if(d.byId("fx-section")){d.style("fx-section","display","none");}}},bindTheFXTypes:function(_69,_6a){m.connect("fx_rates_type_2","onChange",function(){_21(_69,_6a);});},setMasterCurrency:function(_6b,_6c){for(var i=1;i<=_6b;i++){if(dj.byId("fx_contract_nbr_cur_code_"+i)&&_6c!==""){dj.byId("fx_contract_nbr_cur_code_"+i).set("value",_6c);}}if(dj.byId("fx_total_utilise_cur_code")&&_6c!==""){dj.byId("fx_total_utilise_cur_code").set("value",_6c);}for(var j=1;j<=_6b;j++){m.setCurrency(dj.byId("fx_contract_nbr_cur_code_"+j),["fx_contract_nbr_amt_"+j]);}},onloadFXActions:function(){var _6d,_6e;var _6f=dj.byId("sub_tnx_type_code");var _70=dj.byId("tnx_type_code");var _71=dj.byId("fx_rates_type_temp");if(_71&&_71.get("value")==="01"){d.style("fx-contracts-type","display","none");d.style("contractMsgDiv","display","none");d.style("totalUtiliseDiv","display","none");}else{if(_71&&_71.get("value")==="02"){d.style("fx-board-rate-type","display","none");}}if(_71&&_71.get("value")!==""){_6d=_3.fxParametersData.maxNbrContracts;_6e=_3.fxParametersData.amtUtiliseInd;m.createContractRateFields(_6d,_6e);m.setDataForContractFields(_6d,_6e);m.bindTheFXTypes(dj.byId("fx_nbr_contracts").get("value"),_6e);if(dj.byId("fx_rates_type_1")&&dj.byId("fx_rates_type_1").get("checked")){dj.byId("fx_rates_type_1").set("checked",false);dj.byId("fx_rates_type_1").set("checked",true);m.fireFXAction();}else{if(dj.byId("fx_rates_type_2")&&dj.byId("fx_rates_type_2").get("checked")){dj.byId("fx_rates_type_2").set("checked",false);dj.byId("fx_rates_type_2").set("checked",true);if(dj.byId("fx_master_currency")&&dj.byId("fx_master_currency").get("value")!==""){m.setMasterCurrency(dj.byId("fx_nbr_contracts").get("value"),dj.byId("fx_master_currency").get("value"));}if((_70&&_70.get("value")==="85")||(_6f&&_6f.get("value")==="A4")){_c(false);}else{if(dj.byId("fx_nbr_contracts").get("value")>="1"){m.againcalculateTotalUtiliseAmtForDrafts(dj.byId("fx_nbr_contracts").get("value"));m.registerAndAgainCalculateTotalAmountforDrafts(dj.byId("fx_nbr_contracts").get("value"));if(dj.byId("fx_nbr_contracts").get("value")!==_3.fxParametersData.maxNbrContracts){if(dj.byId("fx_contract_nbr_1")&&dj.byId("fx_contract_nbr_1").get("value")!==""){dj.byId("fx_contract_nbr_1").set("value",dj.byId("fx_contract_nbr_1").get("value"));}}m.setCurrency(dj.byId("fx_total_utilise_cur_code"),["fx_total_utilise_amt"]);}_c(true);}}}}else{if(dj.byId("fx_rates_type_1")||dj.byId("fx_rates_type_2")){_6d=_3.fxParametersData.maxNbrContracts;_6e=_3.fxParametersData.amtUtiliseInd;m.createContractRateFields(_6d,_6e);m.defaultBindTheFXTypes();}}if(_3.fxParametersData.toleranceDispInd&&_3.fxParametersData.toleranceDispInd==="Y"){m.animate("fadeIn",d.byId("tolerance_div"));}else{m.animate("fadeOut",d.byId("tolerance_div"));}},fetchFXDetails:function(_72,_73,_74,_75,_76,_77,_78){var _79,_7a,_7b,_7c,_7d,_7e,_7f,_80,_81,_82,_83,_84,_85,_86,_87,_88,_89,_8a,_8b,_8c;var _8d=dj.byId("sub_tnx_type_code");var _8e=dj.byId("tnx_type_code");if(_3.fxParametersData){_84=_3.fxParametersData.maxNbrContracts;_85=_3.fxParametersData.amtUtiliseInd;_87=_3.fxParametersData.toleranceDispInd;if(!_84){_84="1";}if(!_85){_85="N";}if(_87&&_87==="Y"){_86=_3.fxParametersData.tolerancePercentage;}else{_86="";}if((_8e&&_8e.get("value")==="85")||(_8d&&_8d.get("value")==="A4")){if(_73===""||(_3.fxParametersData.boardCurrencies&&_3.fxParametersData.boardCurrencies[_73])){_79="Y";}else{_79="N";}}else{if(_3.fxParametersData.boardCurrencies&&_3.fxParametersData.boardCurrencies[_73]){_7b=_3.fxParametersData.boardCurrencies[_73].minAmt;_7c=_3.fxParametersData.boardCurrencies[_73].maxAmt;if((!_8e||_8e.get("value")!=="85")&&(!_8d||_8d.get("value")!=="A4")){if(_74>=_7b&&_74<=_7c){_79="Y";}else{_8b=misys.getLocalization("FXAmountNotInSpecifiedRange",[_7b,_7c,_73]);_79="N";}}}else{_8b=misys.getLocalization("FXOptionNotAvailable");_79="N";}}if(_79==="Y"){_2f("FXPROGRESS",m.getLocalization("fetchingExchangeRates"));m.xhrPost({url:misys.getServletURL("/screen/AjaxScreen/action/FXRatesAction"),sync:true,handleAs:"json",content:{fromCur:_72,toCur:_73,amount:_74,productCode:_75,bankAbbvName:_76,tolerancePercent:_86,isDirectConversion:_78},load:function(_8f,_90){_81=_8f.boardExchangeRate;_7=_8f.boardExchangeRate;_83=_8f.equivalentRateAmt;_82=_8f.fxToken;_88=_8f.toleranceRate;_8=_8f.toleranceRate;_89=_8f.toleranceEquiAmount;_8a=_8f.buyOrSell;_9=_8f.patyUnits;_a=_74;if(_81&&_81!==""&&_83&&_83!==""&&_82&&_82!==""){if(_82&&_82!==""&&dj.byId("fxinteresttoken")){dj.byId("fxinteresttoken").set("value",_82);}if(dj.byId("fx_exchange_rate")&&_81&&_81!==""){dj.byId("fx_exchange_rate").set("value",_81);}var _91=dj.byId("sub_tnx_type_code");var _92=dj.byId("tnx_type_code");if((!_92||_92.get("value")!=="85")&&(!_91||_91.get("value")!=="A4")&&(dj.byId("fx_exchange_rate_cur_code")&&_77&&_77!=="")){dj.byId("fx_exchange_rate_cur_code").set("value",_77);}if(dj.byId("fx_exchange_rate_amt")&&_83&&_83!==""){dj.byId("fx_exchange_rate_amt").set("value",parseFloat(_83));if((_92&&_92.get("value")==="85")||(_91&&_91.get("value")==="A4")){m.setRepaymentCurrency(dj.byId("fx_exchange_rate_cur_code"),["fx_exchange_rate_amt"]);}else{m.setCurrency(dj.byId("fx_exchange_rate_cur_code"),["fx_exchange_rate_amt"]);}}if(dj.byId("fxBuyOrSell")){dj.byId("fxBuyOrSell").set("value",_8a);}if(dj.byId("fxTnxAmt")){dj.byId("fxTnxAmt").set("value",_74);}if(_87&&_87==="Y"&&_88&&_88!==""&&_89&&_89!==""){if(dj.byId("fx_tolerance_rate")&&_88&&_88!==""){dj.byId("fx_tolerance_rate").set("value",_88);}if(dj.byId("fx_tolerance_rate_cur_code")&&_77&&_77!==""){dj.byId("fx_tolerance_rate_cur_code").set("value",_77);}if(dj.byId("fx_tolerance_rate_amt")&&_89&&_89!==""){dj.byId("fx_tolerance_rate_amt").set("value",_89);m.setCurrency(dj.byId("fx_tolerance_rate_cur_code"),["fx_tolerance_rate_amt"]);}if(dj.byId("fx_tolerance_rate")&&dj.byId("fx_tolerance_rate_amt")&&dj.byId("fx_tolerance_rate_value")&&dj.byId("fx_tolerance_rate_amt_value")&&dj.byId("fx_tolerance_rate_value").get("value")!==""&&dj.byId("fx_tolerance_rate_amt_value").get("value")!==""){var _93=dj.byId("fx_tolerance_rate_value").get("value");var _94=dj.byId("fx_tolerance_rate_amt_value").get("value");dj.byId("fx_tolerance_rate").set("value",_93);dj.byId("fx_tolerance_rate_amt").set("value",_94);}}}else{_91=dj.byId("sub_tnx_type_code");_92=dj.byId("tnx_type_code");if((_92&&_92.get("value")==="85")||(_91&&_91.get("value")==="A4")){if(_77!==_73&&_81===""){misys.dialog.show("ERROR",misys.getLocalization("InvalidCurrencyForFXErrorMessage"));}}else{m.defaultBindTheFXTypes();}}},customError:function(_95,_96){console.error("Technical error while getting fx details ");console.error(_95);}});setTimeout(function(){var _97="fxalertDialog";var _98=dj.byId(_97);if(_98&&_98.get("open")){_98.hide();}},500);}else{_79="N";if((_8e&&_8e.get("value")==="85")||(_8d&&_8d.get("value")==="A4")){dj.byId("fx_exchange_rate").set("value","");dj.byId("fx_exchange_rate_amt").set("value","");if(dj.byId("fx_exchange_rate_cur_code").get("value")!==""){misys.dialog.show("ERROR",misys.getLocalization("InvalidCurrencyForFXErrorMessage"));}}}if((_8e&&_8e.get("value")==="85")||(_8d&&_8d.get("value")==="A4")){if(_73===""||(_3.fxParametersData.contractCurrencies&&_3.fxParametersData.contractCurrencies[_73])){_7d="Y";}else{_7d="N";}}else{if(_3.fxParametersData.contractCurrencies&&_3.fxParametersData.contractCurrencies[_73]){_7f=_3.fxParametersData.contractCurrencies[_73].minAmt;_80=_3.fxParametersData.contractCurrencies[_73].maxAmt;if(_74>=_7f&&_74<=_80){_7d="Y";}else{_8c=misys.getLocalization("FXAmountNotInSpecifiedRange",[_7f,_80,_73]);_7d="N";}}else{_8c=misys.getLocalization("FXOptionNotAvailable");_7d="N";}}}if(_79==="Y"&&_7d==="Y"){if(dj.byId("fx_rates_type_1")){dj.byId("fx_rates_type_1").set("readOnly",false);}if(dj.byId("fx_rates_type_2")){dj.byId("fx_rates_type_2").set("readOnly",false);}_1b(false);_1d(_84,_85,false);if((!_8e||_8e.get("value")!=="85")&&(!_8d||_8d.get("value")!=="A4")){dj.byId("fx_rates_type_1").set("checked",true);}}else{if(_79==="Y"&&_7d==="N"){if(dj.byId("fx_rates_type_2")){dj.byId("fx_rates_type_2").set("checked",false);}if((!_8e||_8e.get("value")!=="85")&&(!_8d||_8d.get("value")!=="A4")){dj.byId("fx_rates_type_2").set("readOnly",true);}dj.byId("fx_rates_type_1").set("checked",true);var _99=dj.byId("fx_rates_type_2").domNode;var _9a=m.connect("fx_rates_type_2","onFocus",function(){if(((!_8e||_8e.get("value")!=="85")&&(!_8d||_8d.get("value")!=="A4"))&&(_7d==="N"&&dj.byId("fx_rates_type_2").get("readOnly"))){dijit.showTooltip(_8c,_99,0);}});m.connect("ft_cur_code","onChange",function(){m.disconnect(_9a);});m.connect("fx_rates_type_2","onBlur",function(){dijit.hideTooltip(dijit.byId("fx_rates_type_2").domNode);});}else{if(_79==="N"&&_7d==="Y"){_a=_74;if(dj.byId("fx_rates_type_1")){dj.byId("fx_rates_type_1").set("checked",false);if((!_8e||_8e.get("value")!=="85")&&(!_8d||_8d.get("value")!=="A4")){dj.byId("fx_rates_type_1").set("readOnly",true);}}if(dj.byId("fx_rates_type_2")){dj.byId("fx_rates_type_2").set("checked",true);}_1d(_84,_85,false);var _9b=dj.byId("fx_rates_type_1").domNode;var _9c=m.connect("fx_rates_type_1","onFocus",function(){if(((!_8e||_8e.get("value")!=="85")&&(!_8d||_8d.get("value")!=="A4"))&&(_79==="N"&&dj.byId("fx_rates_type_1").get("readOnly"))){dijit.showTooltip(_8b,_9b,0);}});m.connect("ft_cur_code","onChange",function(){m.disconnect(_9c);});m.connect("fx_rates_type_1","onBlur",function(){dijit.hideTooltip(dijit.byId("fx_rates_type_1").domNode);});}else{m.defaultBindTheFXTypes();}}}if((_7d==="Y")&&(dj.byId("fx_nbr_contracts")&&_84>="1")){dj.byId("fx_nbr_contracts").set("value",_84);}if(_87==="Y"){m.connect("fx_tolerance_rate","onBlur",function(){_14(_78);});}m.connect("fx_rates_type_1","onChange",function(){if(_79==="Y"&&dj.byId("fx_rates_type_1")&&dj.byId("fx_rates_type_1").get("checked")){_2f("FXPROGRESS",m.getLocalization("fetchingExchangeRates"));m.animate("fadeOut",_2);m.animate("fadeOut",d.byId("contractMsgDiv"));m.animate("fadeOut",d.byId("totalUtiliseDiv"));m.animate("fadeIn",_1);if(_7d==="Y"){_11(_84,_85);}_c(false);setTimeout(function(){var _9d="fxalertDialog";var _9e=dj.byId(_9d);if(_9e&&_9e.get("open")){_9e.hide();}},500);}});m.connect("fx_rates_type_2","onChange",function(){if(_7d&&dj.byId("fx_rates_type_2")&&dj.byId("fx_rates_type_2").get("checked")){m.animate("fadeOut",_1);m.animate("fadeIn",_2);m.animate("fadeIn",d.byId("contractMsgDiv"));m.animate("fadeIn",d.byId("totalUtiliseDiv"));if(_84!=="1"){m.registerAndcalculateTotalUtiliseAmt(_84);}_b();m.setMasterCurrency(_84,_73);if(dj.byId("fx_nbr_contracts")&&_84>="1"){dj.byId("fx_nbr_contracts").set("value",_84);}if((_8e&&_8e.get("value")==="85")||(_8d&&_8d.get("value")==="A4")){_c(false);}else{_c(true);}}});}});})(dojo,dijit,misys);dojo.require("misys.client.binding.common.create_fx_client");}