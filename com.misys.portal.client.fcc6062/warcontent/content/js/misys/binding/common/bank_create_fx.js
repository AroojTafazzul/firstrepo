/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.common.bank_create_fx"]){dojo._hasResource["misys.binding.common.bank_create_fx"]=true;dojo.provide("misys.binding.common.bank_create_fx");(function(d,dj,m){var _1=d.byId("fx-board-rate-type"),_2=d.byId("fx-contracts-type");function _3(){if(dj.byId("fx_exchange_rate")){dj.byId("fx_exchange_rate").set("value","");}if(dj.byId("fx_exchange_rate_amt")){dj.byId("fx_exchange_rate_amt").set("value","");}if(dj.byId("fx_exchange_rate_cur_code")){dj.byId("fx_exchange_rate_cur_code").set("value","");}if(dj.byId("fx_tolerance_rate")){dj.byId("fx_tolerance_rate").set("value","");}if(dj.byId("fx_tolerance_rate_amt")){dj.byId("fx_tolerance_rate_amt").set("value","");}if(dj.byId("fx_tolerance_rate_cur_code")){dj.byId("fx_tolerance_rate_cur_code").set("value","");}};function _4(_5,_6){if(_5>0){for(var i=1;i<=_5;i++){if(dj.byId("fx_contract_nbr_"+i)){dj.byId("fx_contract_nbr_"+i).set("value","");}}}if(_6==="Y"){for(var j=1;j<=_5;j++){if(dj.byId("fx_contract_nbr_amt_"+j)&&dj.byId("fx_contract_nbr_cur_code_"+j)){dj.byId("fx_contract_nbr_amt_"+j).set("value","");dj.byId("fx_contract_nbr_cur_code_"+j).set("value","");}}if(_5!=="1"){if(dj.byId("fx_total_utilise_cur_code")&&dj.byId("fx_total_utilise_amt")){dj.byId("fx_total_utilise_cur_code").set("value","");dj.byId("fx_total_utilise_amt").set("value","");}}}};function _7(_8,_9){if(dj.byId("fx_rates_type_1")&&dj.byId("fx_rates_type_1").get("checked")){_4(_8,_9);m.animate("fadeOut",_2);m.animate("fadeIn",_1);m.animate("fadeOut",d.byId("contractMsgDiv"));m.animate("fadeOut",d.byId("totalUtiliseDiv"));m.setValidation("fx_exchange_rate_cur_code",m.validateCurrency);m.setValidation("fx_tolerance_rate_cur_code",m.validateCurrency);m.setCurrency(dj.byId("fx_exchange_rate_cur_code"),["fx_exchange_rate_amt"]);m.setCurrency(dj.byId("fx_tolerance_rate_cur_code"),["fx_tolerance_rate_amt"]);if(dj.byId("fx_contract_nbr_1")){m.toggleRequired("fx_contract_nbr_1",false);}if(dj.byId("fx_contract_nbr_amt_1")){m.toggleRequired("fx_contract_nbr_amt_1",false);}}if(dj.byId("fx_rates_type_2")&&dj.byId("fx_rates_type_2").get("checked")){_3();m.animate("fadeOut",_1);m.animate("fadeIn",_2);m.animate("fadeIn",d.byId("contractMsgDiv"));m.animate("fadeIn",d.byId("totalUtiliseDiv"));if(_8!=="1"){m.registerAndcalculateTotalUtiliseAmt(_8);}for(var i=1;i<=_8;i++){m.setValidation(("fx_contract_nbr_cur_code_"+i),m.validateCurrency);m.setCurrency(dj.byId(("fx_contract_nbr_cur_code_"+i)),["fx_contract_nbr_amt"]);}if(dj.byId("fx_contract_nbr_1")){m.toggleRequired("fx_contract_nbr_1",true);}if(dj.byId("fx_contract_nbr_amt_1")){m.toggleRequired("fx_contract_nbr_amt_1",true);}}};d.mixin(m,{calculateTotalUtiliseAmt:function(_a){var _b=0;for(var i=1;i<=_a;i++){if(dj.byId("fx_contract_nbr_amt_"+i)){var _c;if(!isNaN(dj.byId("fx_contract_nbr_amt_"+i).get("value"))){_c=dj.byId("fx_contract_nbr_amt_"+i).get("value");}else{_c="0";}_b=parseInt(_b,10)+parseInt(_c,10);if(_b=="0"){dj.byId("fx_total_utilise_amt").set("value","");}else{dj.byId("fx_total_utilise_amt").set("value",_b);}m.setCurrency(dj.byId("fx_total_utilise_cur_code"),["fx_total_utilise_amt"]);}}},registerAndcalculateTotalUtiliseAmt:function(_d){for(var i=1;i<=_d;i++){if(dj.byId("fx_contract_nbr_amt_"+i)){m.connect(("fx_contract_nbr_amt_"+i),"onBlur",function(){m.setTnxAmt(this.get("value"));m.calculateTotalUtiliseAmt(_d);});}}},bindTheFXTypes:function(_e,_f){m.connect("fx_rates_type_1","onClick",function(){_7(_e,_f);});m.connect("fx_rates_type_2","onClick",function(){_7(_e,_f);});},setMasterCurrency:function(_10,_11){for(var i=1;i<=_10;i++){if(dj.byId("fx_contract_nbr_cur_code_"+i)&&_11!==""){dj.byId("fx_contract_nbr_cur_code_"+i).set("value",_11);}}if(dj.byId("fx_total_utilise_cur_code")&&_11!==""){dj.byId("fx_total_utilise_cur_code").set("value",_11);}for(var j=1;j<=_10;j++){m.setCurrency(dj.byId("fx_contract_nbr_cur_code_"+j),["fx_contract_nbr_amt_"+j]);}},defaultBindTheFXTypes:function(_12,_13){if(dj.byId("fx_rates_type_1")){m.animate("fadeOut",_2);m.animate("fadeIn",_1);m.animate("fadeOut",d.byId("contractMsgDiv"));m.animate("fadeOut",d.byId("totalUtiliseDiv"));}_4(_12,_13);dj.byId("fx_rates_type_1").set("checked",true);_3();},onloadFXActions:function(){var _14="1";var _15="Y";if(dj.byId("fx_nbr_contracts")){_14=dj.byId("fx_nbr_contracts").get("value");}if(dj.byId("fx_rates_type_temp")&&dj.byId("fx_rates_type_temp").get("value")!==""){m.bindTheFXTypes(_14,_15);if(dj.byId("fx_rates_type_1")&&dj.byId("fx_rates_type_1").get("checked")){dj.byId("fx_rates_type_1").set("checked",true);_7(_14,_15);}else{if(dj.byId("fx_rates_type_2")&&dj.byId("fx_rates_type_2").get("checked")){dj.byId("fx_rates_type_2").set("checked",true);_7(_14,_15);if(dj.byId("fx_master_currency")&&dj.byId("fx_master_currency").get("value")!==""){m.setMasterCurrency(_14,dj.byId("fx_master_currency").get("value"));}if(dj.byId("fx_nbr_contracts")&&dj.byId("fx_nbr_contracts").get("value")>"1"){m.calculateTotalUtiliseAmt(dj.byId("fx_nbr_contracts").get("value"));m.setCurrency(dj.byId("fx_total_utilise_cur_code"),["fx_total_utilise_amt"]);}if(dj.byId("fx_contract_nbr_1")){m.toggleRequired("fx_contract_nbr_1",true);}if(dj.byId("fx_contract_nbr_amt_1")){m.toggleRequired("fx_contract_nbr_amt_1",true);}}}}else{defaultBindTheFXTypes(_14,_15);}}});})(dojo,dijit,misys);dojo.require("misys.client.binding.common.bank_create_fx_client");}