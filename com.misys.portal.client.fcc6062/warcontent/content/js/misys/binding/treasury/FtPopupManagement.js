/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.treasury.FtPopupManagement"]){dojo._hasResource["misys.binding.treasury.FtPopupManagement"]=true;dojo.provide("misys.binding.treasury.FtPopupManagement");(function(d,dj,m){_fncDoDisplay=function(_1,_2){if(_2&&_2!==""){dojo.query("#summary_"+_1+"_row div.content").forEach(function(_3){_3.innerHTML=_2;});if(dojo.byId("summary_"+_1+"_row")){dojo.style(dojo.byId("summary_"+_1+"_row"),"display","");}}else{dojo.query("#summary_"+_1+"_row div.content").forEach(function(_4){_4.innerHTML=null;});if(dojo.byId("summary_"+_1+"_row")){dojo.style(dojo.byId("summary_"+_1+"_row"),"display","none");}}if(dijit.byId(_1)){dijit.byId(_1).set("value",_2);}};_fncDoDisplayFieldNameForEmptyValue=function(_5,_6){if(_6&&_6!==""){dojo.query("#summary_"+_5+"_row div.content").forEach(function(_7){_7.innerHTML=_6;});if(dojo.byId("summary_"+_5+"_row")){dojo.style(dojo.byId("summary_"+_5+"_row"),"display","");}}else{dojo.query("#summary_"+_5+"_row div.content").forEach(function(_8){_8.innerHTML="";});}if(dijit.byId(_5)){dijit.byId(_5).set("value",_6);}};_fncBlankSummaryStyle=function(_9){if(dojo.byId("summary_"+_9+"_row")){dojo.style(dojo.byId("summary_"+_9+"_row"),"display","none");}};d.mixin(m,{showDealSummaryDialog:function(_a){var _b=_a.status;dijit.byId("dealSummaryDialog").show();if(_b===5){dojo.style(dojo.byId("rateField"),"display","");}else{dojo.style(dojo.byId("rateField"),"display","none");dj.byId("sendRequestId").set("disabled",false);}dijit.byId("deal_type").set("value",_a.dealType);dijit.byId("request_number").set("value",_a.requestNumber);dijit.byId("bo_tnx_id").set("value",_a.boTnxId);dijit.byId("rec_id").set("value",_a.rec_id);dijit.byId("debit_amt").set("value",_a.amount);dijit.byId("debit_ccy").set("value",_a.currency);if((_a.ft_type==="02"||dijit.byId("sub_product_code")==="TRTPT")&&dijit.byId("payment_amt")&&_a.paymentAmount!==null){dijit.byId("payment_amt").set("value",_a.paymentAmount);dijit.byId("payment_cur_code").set("value",_a.paymentCurrency);_fncDoDisplay("paymentAmount",_a.paymentCurrency+""+_a.paymentAmount);}_fncDoDisplay("applicant_name",_a.company_name);_fncDoDisplay("debitAccountNumber",_a.debitAccountNumber);_fncDoDisplay("debitAccountName1",_a.debitAccountName);_fncDoDisplay("debitAmount",_a.currency+" "+_a.amount);if(_a.ft_type==="01"){dojo.style(dojo.byId("transferDetailsId"),"display","");dijit.byId("beneficiary_reference").set("value",_a.transferReference);_fncDoDisplay("beneficiaryName",_a.transferReference);_fncDoDisplay("creditAccountNumber",_a.transferAccountNumber);_fncDoDisplay("creditAccountName",_a.transferAccountName);_fncDoDisplay("transferAmount",_a.transferCurrency+" "+_a.transferAmount);dijit.byId("counterparty_amt").set("value",_a.transferAmount);dijit.byId("counterparty_cur_code").set("value",_a.transferCurrency);}if(_a.ft_type==="02"){dojo.style(dojo.byId("transferDetailsId"),"display","none");dojo.style(dojo.byId("paymentDetailsId"),"display","");if(document.getElementById("mode").value!=="DRAFT"){if(dijit.byId("applicant_act_amt")!==null){dijit.byId("applicant_act_amt").set("value",_a.amount);}dijit.byId("applicant_act_cur_code").set("disabled",true);}if(dijit.byId("credit_amt")){dijit.byId("credit_amt").set("value",_a.paymentAmount);}}if(_a.ft_type==="05"){dojo.style(dojo.byId("transferDetailsId"),"display","");dojo.style(dojo.byId("paymentDetailsId"),"display","");dijit.byId("beneficiary_reference").set("value",_a.transferReference);_fncDoDisplay("beneficiaryName",_a.transferReference);_fncDoDisplay("creditAccountNumber",_a.transferAccountNumber);_fncDoDisplay("creditAccountName",_a.transferAccountName);_fncDoDisplay("transferAmount",_a.transferCurrency+" "+_a.transferAmount);dijit.byId("counterparty_amt").set("value",_a.transferAmount);dijit.byId("counterparty_cur_code").set("value",_a.transferCurrency);}if(_a.ft_type==="02"||_a.ft_type==="05"){if(dj.byId("instructions_type_1")&&dj.byId("instructions_type_1").checked){dojo.byId("paymentDetailsIdBankInstructions").style.display="block";dojo.byId("paymentDetailsIdFreeFormat").style.display="none";if((_a.intermediaryBankAccountNumber&&_a.intermediaryBankAccountNumber!=="")||(_a.intermediaryBankName&&_a.intermediaryBankName!=="")||(_a.intermediaryBankBICcodeSWIFT&&_a.intermediaryBankBICcodeSWIFT!=="")||(_a.intermediary_bank_aba&&_a.intermediary_bank_aba!=="")||(_a.intermediaryBankAddress&&_a.intermediaryBankAddress!=="")||(_a.intermediaryBankCityState&&_a.intermediaryBankCityState!=="")||(_a.intermediaryBankCountry&&_a.intermediaryBankCountry!=="")||(_a.intermediary_bank_instruction_1&&_a.intermediary_bank_instruction_1!=="")||(_a.intermediary_bank_instruction_2&&_a.intermediary_bank_instruction_2!=="")||(_a.intermediary_bank_instruction_3&&_a.intermediary_bank_instruction_3!=="")||(_a.intermediary_bank_instruction_4&&_a.intermediary_bank_instruction_4!=="")||(_a.intermediary_bank_instruction_5&&_a.intermediary_bank_instruction_5!=="")||(_a.intermediary_bank_instruction_6&&_a.intermediary_bank_instruction_6!=="")){if(d.byId("additionalDetailsBankFormat")){d.style(d.byId("additionalDetailsBankFormat"),"display","block");}}else{if(d.byId("additionalDetailsBankFormat")){d.style(d.byId("additionalDetailsBankFormat"),"display","none");}}if((_a.additional_detail_1&&_a.additional_detail_1!=="")||(_a.additional_detail_2&&_a.additional_detail_2!=="")||(_a.additional_detail_3&&_a.additional_detail_3!=="")||(_a.additional_detail_4&&_a.additional_detail_4!=="")){if(d.byId("paymentDetailsBankFormat")){d.style(d.byId("paymentDetailsBankFormat"),"display","block");}}else{if(d.byId("paymentDetailsBankFormat")){d.style(d.byId("paymentDetailsBankFormat"),"display","none");}}_fncDoDisplay("bi_beneficiary_name",_a.beneficiaryName);_fncDoDisplay("bi_beneficiary_address",_a.beneficiaryAddress);if(_a.beneficiaryAddress2&&_a.beneficiaryAddress2!==""){_fncDoDisplay("bi_beneficiary_address_2",_a.beneficiaryAddress2);}else{_fncBlankSummaryStyle("bi_beneficiary_address_2");}_fncDoDisplay("bi_beneficiary_city",_a.beneficiaryCityState);_fncDoDisplay("bi_beneficiary_country",_a.beneficiaryCountry);_fncDoDisplay("bi_beneficiary_bank_bic",_a.beneficiaryBICCodeSWIFT);_fncDoDisplay("bi_counterparty_details_act_no",_a.beneficiaryAccountNumber);_fncDoDisplay("bi_beneficiary_bank",_a.accountWithInstitutionName);_fncDoDisplay("bi_beneficiary_bank_branch",null);if((_a.accountWithInstitutionAddress&&_a.accountWithInstitutionAddress!=="")||(_a.accountWithInstitutionCityState&&_a.accountWithInstitutionCityState!=="")||(_a.accountWithInstitutionCountry&&_a.accountWithInstitutionCountry!=="")){_fncDoDisplayFieldNameForEmptyValue("bi_beneficiary_bank_address",_a.accountWithInstitutionAddress);_fncDoDisplay("bi_account_with_bank_dom",_a.accountWithInstitutionCityState);_fncDoDisplay("bi_beneficiary_bank_country",_a.accountWithInstitutionCountry);}else{_fncBlankSummaryStyle("bi_beneficiary_bank_address");_fncBlankSummaryStyle("bi_account_with_bank_dom");_fncBlankSummaryStyle("bi_beneficiary_bank_country");}_fncDoDisplay("bi_beneficiary_bank_aba",null);_fncDoDisplay("bi_beneficiary_bank_routing_number",null);_fncDoDisplay("bi_account_with_institution_BIC",_a.accountWithInstitutionBICcodeSWIFT);_fncDoDisplay("bi_beneficiary_bank_account",_a.accountWithInstitutionAccountNumber);_fncDoDisplay("bi_ordering_cust_name",_a.orderingCustomerName);if((_a.orderingCustomerAddress&&_a.orderingCustomerAddress!=="")||(_a.orderingCustomerCityState&&_a.orderingCustomerCityState!=="")||(_a.orderingCustomerCountry&&_a.orderingCustomerCountry!=="")){_fncDoDisplayFieldNameForEmptyValue("bi_ordering_cust_address",_a.orderingCustomerAddress);if(_a.orderingCustAddress2&&_a.orderingCustAddress2!==""){_fncDoDisplay("bi_ordering_cust_address_2",_a.orderingCustAddress2);}_fncDoDisplay("bi_ordering_cust_citystate",_a.orderingCustomerCityState);_fncDoDisplay("bi_ordering_cust_country",_a.orderingCustomerCountry);}else{_fncBlankSummaryStyle("bi_ordering_cust_address");_fncBlankSummaryStyle("bi_ordering_cust_address_2");_fncBlankSummaryStyle("bi_ordering_cust_citystate");_fncBlankSummaryStyle("bi_ordering_cust_country");}_fncDoDisplay("bi_ordering_cust_account",_a.orderingCustAccount);_fncDoDisplay("bi_intermediary_bank_account_number",_a.intermediaryBankAccountNumber);_fncDoDisplay("bi_intermediary_bank",_a.intermediaryBankName);_fncDoDisplay("bi_intermediary_bank_bic",_a.intermediaryBankBICcodeSWIFT);_fncDoDisplay("bi_intermediary_bank_aba",_a.intermediary_bank_aba);if((_a.intermediaryBankAddress&&_a.intermediaryBankAddress!=="")||(_a.intermediaryBankCityState&&_a.intermediaryBankCityState!=="")||(_a.intermediaryBankCountry&&_a.intermediaryBankCountry!=="")){_fncDoDisplayFieldNameForEmptyValue("bi_intermediary_bank_street",_a.intermediaryBankAddress);if(_a.intermediaryBankAddress2&&_a.intermediaryBankAddress2!==""){_fncDoDisplay("bi_intermediary_bank_street_2",_a.intermediaryBankAddress2);}_fncDoDisplay("bi_intermediary_bank_city",_a.intermediaryBankCityState);_fncDoDisplay("bi_intermediary_bank_country",_a.intermediaryBankCountry);}else{_fncBlankSummaryStyle("bi_intermediary_bank_street");_fncBlankSummaryStyle("bi_intermediary_bank_street_2");_fncBlankSummaryStyle("bi_intermediary_bank_city");_fncBlankSummaryStyle("bi_intermediary_bank_country");}_fncDoDisplay("bi_intermediary_bank_instruction_1",_a.intermediary_bank_instruction_1);_fncDoDisplay("bi_intermediary_bank_instruction_2",_a.intermediary_bank_instruction_2);_fncDoDisplay("bi_intermediary_bank_instruction_3",_a.intermediary_bank_instruction_3);_fncDoDisplay("bi_intermediary_bank_instruction_4",_a.intermediary_bank_instruction_4);_fncDoDisplay("bi_intermediary_bank_instruction_5",_a.intermediary_bank_instruction_5);_fncDoDisplay("bi_intermediary_bank_instruction_6",_a.intermediary_bank_instruction_6);_fncDoDisplay("bi_additional_detail_1",_a.additional_detail_1);_fncDoDisplay("bi_additional_detail_2",_a.additional_detail_2);_fncDoDisplay("bi_additional_detail_3",_a.additional_detail_3);_fncDoDisplay("bi_additional_detail_4",_a.additional_detail_4);_fncDoDisplay("bi_paymentAmount",_a.paymentCurrency+" "+_a.paymentAmount);_fncDoDisplay("bi_settlement_account",_a.settlement_account);_fncDoDisplay("bi_settlement_means",_a.settlement_means);if(dijit.byId("swift_charges_type_"+_a.swift_charges_type)){_fncDoDisplay("bi_swift_charges_type",dijit.byId("swift_charges_type_"+_a.swift_charges_type).get("value"));}else{_fncDoDisplay("bi_swift_charges_type",null);}}else{dojo.byId("paymentDetailsIdBankInstructions").style.display="none";dojo.byId("paymentDetailsIdFreeFormat").style.display="block";_fncDoDisplay("settlement_account",_a.settlement_account);_fncDoDisplay("settlement_means",_a.settlement_means);_fncDoDisplay("beneficiary_name",_a.paymentBeneficiaryName);_fncDoDisplay("counterparty_details_act_no",_a.paymentBeneficiaryAccount);if((_a.paymentBeneficiaryAddress&&_a.paymentBeneficiaryAddress!=="")||(_a.beneficiaryCity&&_a.beneficiaryCity!=="")||(_a.beneficiaryCountry&&_a.beneficiaryCountry!=="")){_fncDoDisplayFieldNameForEmptyValue("beneficiary_address",_a.paymentBeneficiaryAddress);if(_a.paymentBeneficiaryAddress2&&_a.paymentBeneficiaryAddress2!==""){_fncDoDisplay("beneficiary_address_2",_a.paymentBeneficiaryAddress2);}else{_fncBlankSummaryStyle("beneficiary_address_2");}_fncDoDisplay("beneficiary_city",_a.beneficiaryCity);_fncDoDisplay("beneficiary_country",_a.beneficiaryCountry);}else{_fncBlankSummaryStyle("beneficiary_address");_fncBlankSummaryStyle("beneficiary_address_2");_fncBlankSummaryStyle("beneficiary_city");_fncBlankSummaryStyle("beneficiary_country");}_fncDoDisplay("beneficiary_bank",_a.beneficiaryBank);_fncDoDisplay("beneficiary_bank_account",_a.beneficiaryBankAccount);if((_a.beneficiaryBankAddress&&_a.beneficiaryBankAddress!=="")||(_a.beneficiaryBankCity&&_a.beneficiaryBankCity!=="")||(_a.beneficiaryBankCountry&&_a.beneficiaryBankCountry!=="")){_fncDoDisplayFieldNameForEmptyValue("beneficiary_bank_address",_a.beneficiaryBankAddress);_fncDoDisplay("account_with_bank_dom",_a.beneficiaryBankCity);_fncDoDisplay("beneficiary_bank_country",_a.beneficiaryBankCountry);}else{_fncBlankSummaryStyle("beneficiary_bank_address");_fncBlankSummaryStyle("account_with_bank_dom");_fncBlankSummaryStyle("beneficiary_bank_country");}_fncDoDisplay("beneficiary_bank_aba",_a.beneficiaryBankAba);_fncDoDisplay("beneficiary_bank_routing_number",_a.beneficiaryBankRoutingNumber);_fncDoDisplay("beneficiary_bank_branch",_a.beneficiaryBankBranch);_fncDoDisplay("beneficiary_bank_bic",_a.beneficiaryBic);_fncDoDisplay("ordering_cust_name",_a.orderingCustName);if((_a.orderingCustAddress&&_a.orderingCustAddress!=="")||(_a.orderingCustCityState&&_a.orderingCustCityState!=="")||(_a.orderingCustCountry&&_a.orderingCustCountry!=="")){_fncDoDisplayFieldNameForEmptyValue("ordering_cust_address",_a.orderingCustAddress);if(_a.orderingCustAddress2&&_a.orderingCustAddress2!==""){_fncDoDisplay("ordering_cust_address_2",_a.orderingCustAddress2);}else{_fncBlankSummaryStyle("ordering_cust_address_2");}_fncDoDisplay("ordering_cust_citystate",_a.orderingCustCityState);_fncDoDisplay("ordering_cust_country",_a.orderingCustCountry);}else{_fncBlankSummaryStyle("ordering_cust_address");_fncBlankSummaryStyle("ordering_cust_address_2");_fncBlankSummaryStyle("ordering_cust_citystate");_fncBlankSummaryStyle("ordering_cust_country");}_fncDoDisplay("ordering_cust_account",_a.orderingCustAccount);_fncDoDisplay("paymentAmount",_a.paymentCurrency+" "+_a.paymentAmount);_fncDoDisplay("beneficiary_name",_a.paymentBeneficiaryName);if((!_a.intermediary_bank_bic||0===_a.intermediary_bank_bic.length)&&(!_a.intermediary_bank||0===_a.intermediary_bank.length)&&(!_a.intermediary_bank_street||0===_a.intermediary_bank_street.length)&&(!_a.intermediary_bank_city||0===_a.intermediary_bank_city.length)&&(!_a.intermediary_bank_country||0===_a.intermediary_bank_country.length)&&(!_a.intermediary_bank_aba||0===_a.intermediary_bank_aba.length)&&(!_a.intermediary_bank_instruction_1||0===_a.intermediary_bank_instruction_1.length)&&(!_a.intermediary_bank_instruction_2||0===_a.intermediary_bank_instruction_2.length)&&(!_a.intermediary_bank_instruction_3||0===_a.intermediary_bank_instruction_3.length)&&(!_a.intermediary_bank_instruction_4||0===_a.intermediary_bank_instruction_4.length)&&(!_a.intermediary_bank_instruction_5||0===_a.intermediary_bank_instruction_5.length)&&(!_a.intermediary_bank_instruction_6||0===_a.intermediary_bank_instruction_.length)){d.style(d.byId("additionalDetailsFreeFormat"),"display","none");}else{d.style(d.byId("additionalDetailsFreeFormat"),"display","block");}if((!_a.additional_detail_1||0===_a.additional_detail_1.length)&&(!_a.additional_detail_2||0===_a.additional_detail_2.length)&&(!_a.additional_detail_3||0===_a.additional_detail_3.length)&&(!_a.additional_detail_4||0===_a.additional_detail_4.length)){d.style(d.byId("paymentDetailsFreeFormat"),"display","none");}else{d.style(d.byId("paymentDetailsFreeFormat"),"display","block");}_fncDoDisplay("intermediary_bank",_a.intermediary_bank);_fncDoDisplay("intermediary_bank_bic",_a.intermediary_bank_bic);_fncDoDisplay("intermediary_bank_aba",_a.intermediary_bank_aba);if((_a.intermediary_bank_street&&_a.intermediary_bank_street!=="")||(_a.intermediary_bank_city&&_a.intermediary_bank_city!=="")||(_a.intermediary_bank_country&&_a.intermediary_bank_country!=="")){_fncDoDisplayFieldNameForEmptyValue("intermediary_bank_street",_a.intermediary_bank_street);if(_a.intermediary_bank_street_2&&_a.intermediary_bank_street_2!==""){_fncDoDisplay("intermediary_bank_street_2",_a.intermediary_bank_street_2);}else{_fncBlankSummaryStyle("intermediary_bank_street_2");}_fncDoDisplay("intermediary_bank_city",_a.intermediary_bank_city);_fncDoDisplay("intermediary_bank_country",_a.intermediary_bank_country);}else{_fncBlankSummaryStyle("intermediary_bank_street");_fncBlankSummaryStyle("intermediary_bank_street_2");_fncBlankSummaryStyle("intermediary_bank_city");_fncBlankSummaryStyle("intermediary_bank_country");}_fncDoDisplay("account_with_institution_BIC",null);_fncDoDisplay("intermediary_bank_instruction_1",_a.intermediary_bank_instruction_1);_fncDoDisplay("intermediary_bank_instruction_2",_a.intermediary_bank_instruction_2);_fncDoDisplay("intermediary_bank_instruction_3",_a.intermediary_bank_instruction_3);_fncDoDisplay("intermediary_bank_instruction_4",_a.intermediary_bank_instruction_4);_fncDoDisplay("intermediary_bank_instruction_5",_a.intermediary_bank_instruction_5);_fncDoDisplay("intermediary_bank_instruction_6",_a.intermediary_bank_instruction_6);_fncDoDisplay("additional_detail_1",_a.additional_detail_1);_fncDoDisplay("additional_detail_2",_a.additional_detail_2);_fncDoDisplay("additional_detail_3",_a.additional_detail_3);_fncDoDisplay("additional_detail_4",_a.additional_detail_4);if(dijit.byId("swift_charges_type_"+_a.swift_charges_type)){_fncDoDisplay("swift_charges_type",dijit.byId("swift_charges_type_"+_a.swift_charges_type).get("value"));}}}_fncDoDisplay("amount",_a.debitCurrency+" "+_a.amount);_fncDoDisplay("executionDate",_a.executionDate);dijit.byId("iss_date").set("value",_a.executionDate);_fncDoDisplay("bo_ref_id",_a.bo_ref_id);_fncDoDisplay("feeAccount",_a.feeAccount);_fncDoDisplay("feeAmount",_a.feeCurrency+" "+_a.feeAmount);dijit.byId("feeAmt").set("value",_a.feeAmount);dijit.byId("feeCurCode").set("value",_a.feeCurrency);_fncDoDisplay("rate",_a.rate);_fncDoDisplay("remarks",_a.remarks);if(_b===5&&document.getElementById("mode").value!=="DRAFT"){m.countDown(_a.validity);}},closeDealSummaryDialog:function(){dijit.byId("dealSummaryDialog").hide();},fillAccountField:function(_c,_d){if(_c==="orderingAccount"){dijit.byId("applicant_reference_hidden").set("value",_d.customer_ref);dijit.byId("applicant_act_no").set("value",_d.account_no);dijit.byId("applicant_act_cur_code").set("value",_d.cur_code);if(m.ft_type==="02"){dijit.byId("payment_cur_code").set("value",_d.cur_code);dijit.byId("issuing_bank_abbv_name").set("value",_d.bank_abbv_name);dijit.byId("issuing_bank_name").set("value",_d.bank_name);dijit.byId("issuing_bank_iso_code").set("value",_d.iso_code);}else{dijit.byId("ft_cur_code").set("value",_d.cur_code);}}else{if(_c==="beneficiaryAccount"){dijit.byId("transfer_account").set("value",_d.account_no);dijit.byId("transfer_account_cur_code").set("value",_d.cur_code);dijit.byId("transfer_account_name").set("value",_d.name);}}}});})(dojo,dijit,misys);}