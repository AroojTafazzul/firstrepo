/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.cash.create_chqService"]){dojo._hasResource["misys.binding.cash.create_chqService"]=true;dojo.provide("misys.binding.cash.create_chqService");(function(d,dj,m){var _1=true;var _2=true;var _3=true;function _4(_5,_6){var _7=dijit.byId("chqInquiryGrid");var _8=new dojo.data.ItemFileReadStore({data:_5});d.style("chq_inquiry_grid_div","display","block");d.style("chq_inquiry_grid_div","overflow","visible");_7.setStore(_8);};function _9(){if(dj.byId("applicant_reference")&&dj.byId("issuing_bank_abbv_name")&&dj.byId("entity")&&dj.byId("entity").get("value")!==""){var _a=dj.byId("issuing_bank_abbv_name").get("value")+"_"+dj.byId("entity").get("value");if(m._config.customerReferences[_a][1]){dj.byId("applicant_reference").set("value",m._config.customerReferences[_a][1]);}}};function _b(_c){var _d=misys.getLocalization("uploadTemplateValueRequired");_c.set("state","Error");dj.hideTooltip(_c.domNode);dj.showTooltip(_d,_c.domNode,0);var _e=function(){dj.hideTooltip(_c.domNode);};setTimeout(_e,5000);};function _f(){if(dj.byId("entity")&&dj.byId("entity").get("value")===""){_b(dj.byId("entity"));}if(dj.byId("account_no").get("value")===""){_b(dj.byId("account_no"));}if(_2&&dj.byId("chqNumberFrom").get("value")===""){_b(dj.byId("chqNumberFrom"));}if(_3&&dj.byId("cashNumberFrom").get("value")===""){_b(dj.byId("cashNumberFrom"));}if(dj.byId("chqNumberTo").get("value")==""){_b(dj.byId("chqNumberTo"));}};function _10(_11){var _12=_11?true:false;var _13=null;var _14=null;if(dj.byId("customer_bank")){_14=dj.byId("customer_bank");}if(dj.byId("entity")&&dj.byId("entity").get("value")!==""){_13=dj.byId("entity").get("value");}else{_13="All";}if(misys._config.entityBanksMap){var _15=null;if(_13!==""){_15=m._config.entityBanksMap[_13];}if(!_12&&_14){_14.set("value","");}if(_15&&_14){_14.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_15}});_14.fetchProperties={sort:[{attribute:"name"}]};}}};function _16(){var _17=null;var _18=null;if(dj.byId("adv_send_mode")){_18=dj.byId("adv_send_mode");}if(dj.byId("customer_bank")&&dj.byId("customer_bank").get("value")!==""){_17=dj.byId("customer_bank").get("value");}if(misys._config.perBankDeliveryModes&&_18){var _19=null;if(_17!==""){_19=m._config.perBankDeliveryModes[_17];}if(!_19){_19=[{value:"",name:""}];}_18.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_19}});_18.fetchProperties={sort:[{attribute:"name"}]};}};function _1a(_1b){var _1c=_1b?true:false;var _1d=dj.byId("customer_bank").get("value");if(misys&&misys._config&&misys._config.businessDateForBank&&misys._config.businessDateForBank[_1d]&&misys._config.businessDateForBank[_1d][0]&&misys._config.businessDateForBank[_1d][0].value!==""){var _1e=misys._config.businessDateForBank[_1d][0].value;var _1f=_1e.substring(0,4);var _20=_1e.substring(5,7);var _21=_1e.substring(8,10);_1e=_21+"/"+_20+"/"+_1f;if(misys&&misys._config&&misys._config.option_for_app_date==="SCRATCH"){dj.byId("appl_date").set("value",_1e);document.getElementById("appl_date_view_row").childNodes[1].innerHTML=_1e;}}if(misys._config.isMultiBank&&dijit.byId("sub_product_code")&&dijit.byId("sub_product_code").get("value")==="CQBKR"){_16();}if(misys._config.isMultiBank&&!_1c){if(misys._config.isMultiBank&&dijit.byId("sub_product_code")&&dijit.byId("sub_product_code").get("value")==="CQBKR"){dj.byId("adv_send_mode").set("value","");}if(dj.byId("issuing_bank_name")){dj.byId("issuing_bank_name").set("value",dj.byId("customer_bank").get("value"));}if(dj.byId("issuing_bank_abbv_name")){dj.byId("issuing_bank_abbv_name").set("value",dj.byId("customer_bank").get("value"));}if(dj.byId("no_of_cheque_books")&&dj.byId("applicant_act_name")&&dj.byId("applicant_act_name").get("value")!==""&&dj.byId("no_of_cheque_books").get("value")!==""){dj.byId("no_of_cheque_books").set("value",null);dj.byId("applicant_act_name").set("value",null);}if(dj.byId("cheque_number_range")){dj.byId("cheque_number_range").set("value",misys._config.perBankChequeNumberRange[dj.byId("customer_bank").get("value")]);}if(dj.byId("applicant_act_name")){dj.byId("applicant_act_name").set("value","");}if(dj.byId("account_no")){dj.byId("account_no").set("value","");}if(dj.byId("cheque_number_from")&&dj.byId("cheque_number_to")){dj.byId("cheque_number_from").set("value","");dj.byId("cheque_number_to").set("value","");}if(dj.byId("chqNumberFrom")&&dj.byId("chqNumberTo")){dj.byId("chqNumberTo").set("value","");dj.byId("chqNumberFrom").set("value","");}if(dj.byId("cashNumberFrom")&&dj.byId("chqNumberTo")){dj.byId("chqNumberTo").set("value","");dj.byId("cashNumberFrom").set("value","");}if(dj.byId("cheque_type")){dj.byId("cheque_type").set("value","");}if(dj.byId("chqType")){dj.byId("chqType").set("value","");}}_1=false;_9();};function _22(){if("S"+this.get("value")!=="S"){var _23=this.get("value"),_24="";if(misys._config._isNoOfChqBookConfigMissing===false){if(misys._config.isMultiBank===true){var _25=dj.byId("customer_bank").get("value");if(_23<misys._config.perBankChequeMin[_25]){this.set("value","");_24=m.getLocalization("minChqBooksRequest",[misys._config.perBankChequeMin[_25]]);dj.hideTooltip(this.domNode);dj.showTooltip(_24,this.domNode,0);var _26=function(){dj.hideTooltip(this.domNode);};setTimeout(_26,1000);return;}if(_23>misys._config.perBankChequeMax[_25]){this.set("value","");_24=m.getLocalization("maxChqBooksRequest",[misys._config.perBankChequeMax[_25]]);dj.hideTooltip(this.domNode);dj.showTooltip(_24,this.domNode,0);_26=function(){dj.hideTooltip(this.domNode);};setTimeout(_26,1000);return;}}else{if(_23<misys._config._noOfChqBooksMin){this.set("value","");_24=m.getLocalization("minChqBooksRequest",[misys._config._noOfChqBooksMin]);dj.hideTooltip(this.domNode);dj.showTooltip(_24,this.domNode,0);_26=function(){dj.hideTooltip(this.domNode);};setTimeout(_26,1000);return;}if(_23>misys._config._noOfChqBooksMax){this.set("value","");_24=m.getLocalization("maxChqBooksRequest",[misys._config._noOfChqBooksMax]);dj.hideTooltip(this.domNode);dj.showTooltip(_24,this.domNode,0);_26=function(){dj.hideTooltip(this.domNode);};setTimeout(_26,1000);return;}}}else{this.set("value","");_24=m.getLocalization("minMaxChqBooksRequestConfigMissing");dj.hideTooltip(this.domNode);dj.showTooltip(_24,this.domNode,0);_26=function(){dj.hideTooltip(this.domNode);};setTimeout(_26,1000);return;}}};function _27(){if(dj.byId("adv_send_mode")){if(dj.byId("adv_send_mode").get("value")==="Collect from Branch"||dj.byId("adv_send_mode").get("value")==="08"){d.style("delivery_mode_08_div","display","block");m.toggleFields(true,null,["collecting_bank_code","collecting_branch_code","collectors_name","collectors_id"]);dj.byId("collecting_bank_code").set("readOnly",true);dj.byId("collecting_branch_code").set("readOnly",true);}else{d.style("delivery_mode_08_div","display","none");m.toggleFields(false,null,["collecting_bank_code","collecting_branch_code","collectors_name","collectors_id","mailing_other_name_address","mailing_other_postal_code","mailing_other_country"]);}}};function _28(_29){var _2a=_29.get("value");var _2b=dijit.byId("chqNumberFrom")?dijit.byId("chqNumberFrom").get("value"):(dijit.byId("cashNumberFrom")?dijit.byId("cashNumberFrom").get("value"):"");var _2c="";if(dijit.byId("issuing_bank_name")){_2c=dijit.byId("issuing_bank_name").get("value");}if(_2c===""&&dijit.byId("customer_bank")){_2c=dijit.byId("customer_bank").get("value");}var _2d=0;if(_2c!==""){_2d=misys._config.perBankChequeNumberRange[_2c][0];}else{_2d=dj.byId("chqRange").get("value");}if(_2a!=""){var _2e=(dojo.number.parse(_2a)-dojo.number.parse(_2b))+1;if(_2e>_2d){var msg=m.getLocalization("mandatoryStopChqNumberRangeValMessage",[_2e,_2d]);_29.set("state","Error");dj.hideTooltip(_29.domNode);dj.showTooltip(msg,_29.domNode,0);var _2f=function(){dj.hideTooltip(_29.domNode);};setTimeout(_2f,5000);}}};d.mixin(m._config,{initReAuthParams:function(){var _30={productCode:"SE",subProductCode:dj.byId("sub_product_code").get("value"),transactionTypeCode:"01",currency:"",amount:"",bankAbbvName:dj.byId("customer_bank")?dj.byId("customer_bank").get("value"):"",entity:dj.byId("entity")?dj.byId("entity").get("value"):"",es_field1:"",es_field2:""};return _30;}});d.mixin(m,{statusSummaryGrid:function(){var _31=dijit.byId("chqNumberFrom"),_32=dijit.byId("chqNumberTo"),_33=dijit.byId("cashNumberFrom"),_34,_35;var _36=_31?dojo.number.parse(_31.get("value")):"",_37=_33?dojo.number.parse(_33.get("value")):"",_38=dojo.number.parse(_32.get("value")),_39="",_3a=dijit.byId("chqRange").get("value");if(_36!=""){_39=(dojo.number.parse(_38)-dojo.number.parse(_36))+1;}else{if(_37!=""){_39=(dojo.number.parse(_38)-dojo.number.parse(_36))+1;}}if(dijit.byId("account_no").get("value")!=""&&((_2&&_31.get("value")!="")||(_3&&_33.get("value")!=""))&&_32.get("value")!=""){if(_36&&(_36<0||isNaN(_36))){_35=misys.getLocalization("invalidNumber");_31.focus();dijit.hideTooltip(_31.domNode);dijit.showTooltip(_35,_31.domNode,0);_34=function(){dj.hideTooltip(_31.domNode);};setTimeout(_34,5000);}else{if(_37&&(_37<0||isNaN(_37))){_35=misys.getLocalization("invalidNumber");_33.focus();dijit.hideTooltip(NumberFromField.domNode);dijit.showTooltip(_35,_33.domNode,0);_34=function(){dj.hideTooltip(_33.domNode);};setTimeout(_34,5000);}else{if(_38<0){_35=misys.getLocalization("invalidNumber");_32.focus();dijit.hideTooltip(_32.domNode);dijit.showTooltip(_35,_32.domNode,0);_34=function(){dj.hideTooltip(_32.domNode);};setTimeout(_34,5000);}else{if(dojo.number.parse(_36)===0){_31.focus();_35=misys.getLocalization("ChequeNumberFromNonZeroValMessage");dijit.hideTooltip(_31.domNode);dijit.showTooltip(_35,_31.domNode,0);_34=function(){dj.hideTooltip(_31.domNode);};setTimeout(_34,5000);}else{if(dojo.number.parse(_37)===0){_33.focus();_35=misys.getLocalization("CashNumberFromNonZeroValMessage");dijit.hideTooltip(_33.domNode);dijit.showTooltip(_35,_33.domNode,0);_34=function(){dj.hideTooltip(_33.domNode);};setTimeout(_34,5000);}else{if(_36>_38){_35=misys.getLocalization("mandatoryChqNumberValMessage",[dijit.byId("chqNumberTo").get("value")]);_32.focus();dijit.hideTooltip(_32.domNode);dijit.showTooltip(_35,_32.domNode,0);_34=function(){dj.hideTooltip(_32.domNode);};setTimeout(_34,5000);}else{if(_37>_38){_35=misys.getLocalization("mandatoryCashNumberValMessage",[dijit.byId("chqNumberTo").get("value")]);_33.focus();dijit.hideTooltip(_33.domNode);dijit.showTooltip(_35,_32.domNode,0);_34=function(){dj.hideTooltip(_33.domNode);};setTimeout(_34,5000);}else{if(_39>_3a){_35=misys.getLocalization("mandatoryChqNumberRangeValMessage",[_39,_3a]);_32.focus();dijit.hideTooltip(_32.domNode);dijit.showTooltip(_35,_32.domNode,0);_34=function(){dj.hideTooltip(_32.domNode);};setTimeout(_34,5000);}else{m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/ChqStatusInquirySearchAction"),handleAs:"json",sync:true,content:{entity:dijit.byId("entity")?dijit.byId("entity").get("value"):"",acctNumber:dijit.byId("account_no").get("value"),acctCcy:dijit.byId("act_cur_code").get("value"),chqNumFrom:_31.get("value"),cashNumFrom:_33.get("value"),chqNumTo:_32.get("value"),chqType:dijit.byId("chqType").get("value"),bankName:dijit.byId("customer_bank")?dijit.byId("customer_bank").get("value"):""},load:function(_3b,_3c){_4(_3b,_3c);},customError:function(_3d,_3e){console.error(_3d);}});}}}}}}}}}else{_f();}},bind:function(){m.connect("entity","onChange",function(){_1=false;if(dj.byId("applicant_act_nickname")){dj.byId("applicant_act_nickname").set("value","");}if(misys._config.isMultiBank&&dj.byId("customer_bank")){dj.byId("customer_bank").set("value","");_10();}if(dijit.byId("sub_product_code")&&dijit.byId("sub_product_code").get("value")!=="COCQI"){dj.byId("applicant_act_name").set("value","");if(dj.byId("account_no")){dj.byId("account_no").set("value","");}if(dj.byId("cheque_number_from")){dj.byId("cheque_number_from").set("value","");}if(dj.byId("cheque_number_to")){dj.byId("cheque_number_to").set("value","");}if(dj.byId("customer_bank")){dj.byId("customer_bank").set("value","");}if(dj.byId("no_of_cheque_books")){dj.byId("no_of_cheque_books").set("value","");}}else{dj.byId("account_no").set("value","");dj.byId("chqNumberFrom").set("value","");dj.byId("chqNumberTo").set("value","");if(dj.byId("customer_bank")){dj.byId("customer_bank").set("value","");}}});m.connect("applicant_act_name","onChange",function(){if(misys._config.nickname==="true"){if(dj.byId("applicant_act_nickname")&&dj.byId("applicant_act_nickname").get("value")!==""){d.style("label","display","inline-block");m.animate("fadeIn",d.byId("applicant_act_nickname_row"));m.animate("fadeIn",d.byId("nickname"));d.style("nickname","display","inline");d.byId("nickname").innerHTML=dj.byId("applicant_act_nickname").get("value");}else{m.animate("wipeOut",d.byId("applicant_act_nickname_row"));}}});m.connect("no_of_cheque_books","onBlur",_22);m.connect("adv_send_mode","onChange",_27);m.connect("customer_bank","onChange",function(){_1a(_1);});m.connect("applicant_act_name","onClick",m.validateRequiredField);m.connect("entity","onClick",function(){if(this.get("value")==""){_b(this);}});m.connect("account_no","onClick",function(){if(this.get("value")==""){_b(this);}});m.connect("chqType","onChange",function(){var _3f=dj.byId("chqType").get("value");if(dj.byId("option")&&dj.byId("option").get("value")==="COCQI"){if(_3f==="01"){m.animate("fadeOut",d.byId("chq_Number_From"));m.animate("fadeIn",d.byId("cash_Number_From"));dijit.byId("chqNumberFrom").set("value","");dijit.byId("chqNumberTo").set("value","");_2=false;_3=true;m.animate("fadeOut",d.byId("chq_inquiry_disclaimer"));m.animate("fadeIn",d.byId("co_inquiry_disclaimer"));}else{if(_3f==="02"||_3f===""){m.animate("fadeOut",d.byId("cash_Number_From"));m.animate("fadeIn",d.byId("chq_Number_From"));dijit.byId("chqNumberTo").set("value","");dijit.byId("cashNumberFrom").set("value","");_2=true;_3=false;m.animate("fadeOut",d.byId("co_inquiry_disclaimer"));m.animate("fadeIn",d.byId("chq_inquiry_disclaimer"));}}}});m.connect("cheque_type","onChange",function(){if((dj.byId("option")&&dj.byId("option").get("value")==="COCQS")||(dj.byId("subproductcode")&&dj.byId("subproductcode").get("value")==="COCQS")){if(dj.byId("cheque_type").get("value")=="01"){d.byId("labelId").innerHTML=m.getLocalization("cashier_order_label");m.toggleRequired("labelId",true);}else{if(dj.byId("cheque_type").get("value")=="02"){d.byId("labelId").innerHTML=m.getLocalization("cheque_number_label");m.toggleRequired("labelId",true);}}}});m.connect("chqNumberTo","onChange",function(){_28(this);});},onFormLoad:function(){if(misys&&misys._config&&misys._config.option_for_app_date==="SCRATCH"){_1=false;}if(misys._config.isMultiBank&&dj.byId("customer_bank")){_10(true);}if(dj.byId("adv_send_mode")&&dj.byId("adv_send_mode").get("value")!==""){_27();}if(misys._config.nickname==="true"&&dj.byId("applicant_act_nickname")&&dj.byId("applicant_act_nickname").get("value")!==""&&d.byId("nickname")){m.animate("fadeIn",d.byId("nickname"));d.style("nickname","display","inline");d.byId("nickname").innerHTML=dj.byId("applicant_act_nickname").get("value");}else{m.animate("wipeOut",d.byId("applicant_act_nickname_row"));}if(misys._config.isMultiBank&&dj.byId("issuing_bank_name")&&dj.byId("issuing_bank_name").get("value")!==""){dj.byId("customer_bank").set("value",dj.byId("issuing_bank_name").get("value"));if(dj.byId("cheque_number_range")){dj.byId("cheque_number_range").set("value",misys._config.perBankChequeNumberRange[dj.byId("customer_bank").get("value")]);}if(dijit.byId("sub_product_code")&&dijit.byId("sub_product_code").get("value")==="CQBKR"){_16();}if(dj.byId("adv_send_mode")&&dj.byId("adv_send_mode_hidden")){dj.byId("adv_send_mode").set("value",dj.byId("adv_send_mode_hidden").get("value"));}}if((dj.byId("option")&&(dj.byId("option").get("value")==="COCQS"))||(dj.byId("subproductcode")&&dj.byId("subproductcode").get("value")==="COCQS")){if(dj.byId("cheque_type").get("value")=="01"){d.byId("labelId").innerHTML=m.getLocalization("cashier_order_label");}else{if(dj.byId("cheque_type").get("value")=="02"||!dj.byId("cheque_type")||dj.byId("cheque_type").get("value")==""){d.byId("labelId").innerHTML=m.getLocalization("cheque_number_label");}}}if(dj.byId("adv_send_mode")){_27();}if(dj.byId("option")&&dj.byId("option").get("value")==="COCQI"){var _40=dj.byId("chqType").get("value");if(_40==="01"){d.style("co_inquiry_disclaimer","display","block");d.style("chq_inquiry_disclaimer","display","none");}else{if(_40==="02"){d.style("chq_inquiry_disclaimer","display","block");d.style("co_inquiry_disclaimer","display","none");}}}if(dijit.byId("chqType")){dijit.byId("chqType").set("value","");}},beforeSaveValidations:function(){var _41=dj.byId("entity");var _42=false;if(_41&&_41.get("value")==""){return _42;}else{return !_42;}},beforeSubmitValidations:function(){if(dijit.byId("sub_product_code").get("value")==="COCQS"&&dijit.byId("cheque_number_from")&&dijit.byId("cheque_number_range")){var _43=dijit.byId("cheque_number_from").get("value"),_44=dijit.byId("cheque_number_to").get("value"),_45=dijit.byId("cheque_number_range").get("value");if(dojo.number.parse(_43)===0){dijit.byId("cheque_number_from").focus();m._config.onSubmitErrorMsg=m.getLocalization("ChequeNumberFromNonZeroValMessage");return false;}else{if(dijit.byId("cheque_number_to").get("value")!=""){var _46=(dojo.number.parse(_44)-dojo.number.parse(_43))+1;if(Number(_43)>Number(_44)){dijit.byId("cheque_number_to").focus();m._config.onSubmitErrorMsg=m.getLocalization("mandatoryChqNumberValMessage",[_44]);return false;}else{if(_46>_45){dijit.byId("cheque_number_to").focus();m._config.onSubmitErrorMsg=m.getLocalization("mandatoryStopChqNumberRangeValMessage",[_46,_45]);return false;}}}}}var _47=dj.byId("applicant_act_no").get("value");var _48=m.checkAccountStatus(_47);if(!_48){m._config.onSubmitErrorMsg=misys.getLocalization("accountStatusError");return false;}return true;}});})(dojo,dijit,misys);dojo.require("misys.client.binding.cash.create_chqService_client");}