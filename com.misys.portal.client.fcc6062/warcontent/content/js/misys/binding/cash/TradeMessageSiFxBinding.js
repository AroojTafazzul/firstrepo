/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.cash.TradeMessageSiFxBinding"]){dojo._hasResource["misys.binding.cash.TradeMessageSiFxBinding"]=true;dojo.provide("misys.binding.cash.TradeMessageSiFxBinding");dojo.require("misys.form.SimpleTextarea");dojo.require("misys.form.common");dojo.require("misys.validation.common");dojo.require("misys.grid._base");dojo.require("dojo.data.ItemFileReadStore");dojo.require("dojo.parser");dojo.require("dojo.data.ItemFileReadStore");dojo.require("dijit.layout.TabContainer");dojo.require("dijit.form.Form");dojo.require("dijit.form.Button");dojo.require("dijit.form.TextBox");dojo.require("misys.widget.Dialog");dojo.require("dijit.ProgressBar");dojo.require("dijit.form.ValidationTextBox");dojo.require("dijit.form.CheckBox");dojo.require("dijit.layout.ContentPane");dojo.require("dijit.form.DateTextBox");dojo.require("misys.form.CurrencyTextBox");dojo.require("dijit.form.NumberTextBox");dojo.require("dijit.form.FilteringSelect");dojo.require("dojox.grid.EnhancedGrid");dojo.require("dojox.grid.enhanced.plugins.Menu");dojo.require("dojox.grid.enhanced.plugins.NestedSorting");dojo.require("dojox.grid.enhanced.plugins.IndirectSelection");dojo.require("dojox.grid.cells.dijit");dojo.require("misys.binding.cash.request.StandingInstructionAction");fncDoBinding=function(){misys.connect("instructions_type_1","onClick",function(){_fncSwitchBankPaymentInstructionsFields("bank_instruction_field","free_format_field","instructions_type_2");});misys.connect("instructions_type_2","onClick",function(){_fncSwitchBankPaymentInstructionsFields("free_format_field","bank_instruction_field","instructions_type_1");});misys.connect("payment_type","onChange",function(){_fncChangeRequiredFieldsOnPaymentTypeChange("");});misys.connect("beneficiary_account","onChange",function(){_fncChangeRequiredFieldsOnChange("beneficiary_account","");});misys.connect("beneficiary_address","onChange",function(){_fncChangeRequiredFieldsOnChange("beneficiary_address","");});misys.connect("intermediary_bank","onChange",function(){_fncChangeRequiredFieldsOnChange("intermediary_bank","");});if("SWAP"==dijit.byId("fx_type").get("value")){misys.connect("near_instructions_type_1","onClick",function(){_fncSwitchBankPaymentInstructionsFields("bank_instruction_field","free_format_field","near_instructions_type_2","near");});misys.connect("near_instructions_type_2","onClick",function(){_fncSwitchBankPaymentInstructionsFields("free_format_field","bank_instruction_field","near_instructions_type_1","near");});misys.connect("near_payment_type","onChange",function(){_fncChangeRequiredFieldsOnPaymentTypeChange("near");});misys.connect("near_beneficiary_account","onChange",function(){_fncChangeRequiredFieldsOnChange("near_beneficiary_account","near");});misys.connect("near_beneficiary_address","onChange",function(){_fncChangeRequiredFieldsOnChange("near_beneficiary_address","near");});misys.connect("near_intermediary_bank","onChange",function(){_fncChangeRequiredFieldsOnChange("near_intermediary_bank","near");});}};fncDoFormOnLoadEvents=function(){var _1=misys._config.fx_si;dijit.byId("rec_id").set("value",_1.rec_id);dojo.style("bank_instruction_field",{"display":"block"});dojo.style("free_format_field",{"display":"none"});dijit.byId("payment_type").set("required",false);fx_type=dijit.byId("fx_type").get("value");var _2;var _3;if(fx_type=="SWAP"){dijit.byId("near_payment_type").set("required",false);dojo.style("near_bank_instruction_field",{"display":"block"});dojo.style("near_free_format_field",{"display":"none"});var _4={items:_1.near_payments};_fncConstructCustomerPaymentGrid(_4,"near_customerPaymentGrid","near_receipt_instructions_id","near");var _5={items:_1.near_receipts};_fncConstructBankPaymentGrid(_5,"near_bankPaymentGrid","near_payment_instructions_id","near");_fncChangeDisabledAdditionalDetailsFiels("near_additional_details",true);_2={items:_1.payments};_fncConstructCustomerPaymentGrid(_2,"customerPaymentGrid","receipt_instructions_id");_3={items:_1.receipts};_fncConstructBankPaymentGrid(_3,"bankPaymentGrid","payment_instructions_id");_fncChangeDisabledAdditionalDetailsFiels("additional_details",true);}else{_2={items:_1.payments};_fncConstructCustomerPaymentGrid(_2,"customerPaymentGrid","receipt_instructions_id");_3={items:_1.receipts};_fncConstructBankPaymentGrid(_3,"bankPaymentGrid","payment_instructions_id");_fncChangeDisabledAdditionalDetailsFiels("additional_details",true);}};_fncSelectIndex=function(_6,_7,_8){var _9=dijit.byId(_7).selection.selectedIndex;var _a=dijit.byId(_7).get("store")._arrayOfAllItems[_9].id;dijit.byId(_8).set("value",_a);if(_7=="bankPaymentGrid"){_fncChangeDisabledAdditionalDetailsFiels("additional_details",false);}else{if(_7=="near_bankPaymentGrid"){_fncChangeDisabledAdditionalDetailsFiels("near_additional_details",false);}}};fncDoPreSubmitValidations=function(){var _b=dijit.byId("customerPaymentGrid").store._arrayOfAllItems.length==0||(dijit.byId("customerPaymentGrid").store._arrayOfAllItems.length!=0&&dijit.byId("customerPaymentGrid").selection.selectedIndex!=-1);var _c=dijit.byId("bankPaymentGrid").store._arrayOfAllItems.length==0||(dijit.byId("bankPaymentGrid").store._arrayOfAllItems.length!=0&&dijit.byId("instructions_type_1").checked&&dijit.byId("bankPaymentGrid").selection.selectedIndex!=-1)||dijit.byId("instructions_type_2").checked;var _d;var _e;if(dijit.byId("fx_type").get("value")=="SWAP"){_d=dijit.byId("near_customerPaymentGrid").store._arrayOfAllItems.length==0||(dijit.byId("near_customerPaymentGrid").store._arrayOfAllItems.length!=0&&dijit.byId("near_customerPaymentGrid").selection.selectedIndex!=-1);_e=dijit.byId("near_bankPaymentGrid").store._arrayOfAllItems.length==0||(dijit.byId("near_bankPaymentGrid").store._arrayOfAllItems.length!=0&&dijit.byId("near_instructions_type_1").checked&&dijit.byId("near_bankPaymentGrid").selection.selectedIndex!=-1)||dijit.byId("near_instructions_type_2").checked;}else{_d=true;_e=true;}return _b&&_c&&_d&&_e;};dojo.require("misys.client.binding.cash.TradeMessageSiFxBinding_client");}