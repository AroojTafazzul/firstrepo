/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.cash.create_ft_rtgs"]){dojo._hasResource["misys.binding.cash.create_ft_rtgs"]=true;dojo.provide("misys.binding.cash.create_ft_rtgs");dojo.require("dojo.parser");dojo.require("dijit.layout.TabContainer");dojo.require("dijit.form.DateTextBox");dojo.require("misys.form.CurrencyTextBox");dojo.require("dijit.form.NumberTextBox");dojo.require("dijit.form.FilteringSelect");dojo.require("dijit.form.Form");dojo.require("dijit.form.Button");dojo.require("dijit.form.TextBox");dojo.require("dijit.Dialog");dojo.require("dijit.ProgressBar");dojo.require("dijit.form.ValidationTextBox");dojo.require("dijit.form.CheckBox");dojo.require("misys.form.PercentNumberTextBox");dojo.require("misys.form.SimpleTextarea");dojo.require("misys.widget.Collaboration");dojo.require("misys.form.common");dojo.require("misys.form.file");dojo.require("misys.validation.common");dojo.require("misys.binding.cash.ft_common");dojo.require("misys.form.BusinessDateTextBox");dojo.require("misys.binding.core.beneficiary_advice_common");dojo.require("misys.binding.common.create_fx_multibank");dojo.require("misys.binding.cash.paymentFees");(function(d,dj,m){var _1=d.byId("fx-message-type");var _2=false;var _3=false;var _4=true;var _5=false;var _6="<style='width:800px;height:1000px;overflow:auto;'>";var _7="<b><span class='legend'>";var _8="</span></b>";var _9="fx-section";var _a="width:710px;height:350px;";function _b(){var _c="";_c=_c.concat(_6);_c=_c.concat(_7+m.getLocalization("generalDetails")+_8);var _d=dijit.byId("entity")?dijit.byId("entity").get("value"):"";var _e=m.getLocalization("entityDetails",[_d]);var _f=dijit.byId("applicant_act_name")?dijit.byId("applicant_act_name").get("value"):"";var _10=m.getLocalization("debitActDetails",[_f]);_c=_c+_e+_10;return _c;};function _11(){var _12="";_12=_12.concat(_6);_12=_12.concat(_7+m.getLocalization("transferToDetails")+_8);var _13=dijit.byId("beneficiary_name")?dijit.byId("beneficiary_name").get("value"):"";var _14=m.getLocalization("creditActDetails",[_13]);_12=_12+_14;return _12;};function _15(){var _16="";_16=_16.concat(_6);_16=_16.concat(_7+m.getLocalization("transactionDetails")+_8);var _17=dijit.byId("ft_amt")?dijit.byId("ft_amt").get("value"):"";var _18=dijit.byId("ft_cur_code")?dijit.byId("ft_cur_code").get("value"):"";var _19=m.getLocalization("transferAmtDetail",[_18,_17]);var _1a=dijit.byId("iss_date")?dijit.byId("iss_date").get("value"):"";var _1b=m.getLocalization("transferDateDetails",[_1a]);_16=_16+_19+_1b;return _16;};function _1c(_1d){var amt=_1d.totalFeeAmount;var ccy=_1d.debitAccountCurrency;var _1e=_1d.debitFeeAmount;var _1f=_1d.taxOnDebitFees;var _20=_1d.taxOnTaxOnDebitFees;var _21=_1d.agentFees;var _22=m.getLocalization("totalCharges",[ccy,amt]);var _23=m.getLocalization("debitFeeAmountCharges",[ccy,_1e]);var _24=m.getLocalization("taxOnDebitFeesCharges",[ccy,_1f]);var _25=m.getLocalization("taxOnTaxOnDebitFeesCharges",[ccy,_20]);var _26=m.getLocalization("agentFeesCharges",[ccy,_21]);var _27="";_27=_27.concat(_6);_27=_27.concat(_7+m.getLocalization("feesDetails")+_8);_27=_27+_22+_23+_24+_25+_26;return _27;};function _28(){var _29=dj.byId("applicant_act_cur_code").get("value");var _2a=dj.byId("ft_cur_code").get("value");if(_29!==_2a){m.dialog.show("ERROR",m.getLocalization("crossCurrency"));dj.byId("beneficiary_name").set("value","");dj.byId("beneficiary_address").set("value","");dj.byId("beneficiary_city").set("value","");dj.byId("beneficiary_account").set("value","");dj.byId("beneficiary_country").set("value","");dj.byId("beneficiary_dom").set("value","");dj.byId("cpty_bank_swift_bic_code").set("value","");dj.byId("cpty_bank_address_line_1").set("value","");dj.byId("cpty_bank_name").set("value","");dj.byId("cpty_bank_country").set("value","");dj.byId("cpty_bank_address_line_2").set("value","");dj.byId("cpty_bank_dom").set("value","");dj.byId("cpty_bank_country").set("value","");setTimeout(function(){dj.byId("ft_cur_code").set("value",_29);},0);dj.byId("beneficiary_bank_branch_address_line_1").set("value","");dj.byId("beneficiary_bank_branch_address_line_2").set("value","");dj.byId("beneficiary_bank_branch_dom").set("value","");dj.byId("pre_approved").set("value","");dj.byId("pre_approved_status").set("value","");dj.byId("branch_address_flag").set("checked",false);dj.byId("notify_beneficiary_choice_1").set("checked",false);dj.byId("notify_beneficiary_choice_2").set("checked",false);dj.byId("notify_beneficiary_choice_1").set("disabled",true);dj.byId("notify_beneficiary_choice_2").set("disabled",true);dj.byId("notify_beneficiary").set("checked",false);d.place(d.byId("notify_beneficiary_email_node"),d.byId("label_notify_beneficiary_choice_2"),"after");dj.byId("notify_beneficiary_email").set("value","");dj.byId("notify_beneficiary_email").set("disabled",true);if(dj.byId("applicant_act_pab").get("value")!=="Y"&&dj.byId("cpty_bank_country_img")){dj.byId("cpty_bank_country_img").set("disabled",false);}return;}else{dj.byId("ft_cur_code").set("displayedValue",_2a);return;}};function _2b(_2c){var _2d=function(){var _2e=dijit.byId("ft_amt");_2e.set("state","Error");m.defaultBindTheFXTypes();dj.byId("ft_amt").set("value","");if(dj.byId("ft_cur_code")&&!dj.byId("ft_cur_code").get("readOnly")){dj.byId("ft_cur_code").set("value","");}};m.dialog.show("ERROR",_2c,"",function(){setTimeout(_2d,500);});if(d.byId(_9)&&(d.style(d.byId(_9),"display")!=="none")){m.animate("wipeOut",d.byId(_9));}};function _2f(){var _30=true;var _31="";var _32=dj.byId("fx_rates_type_2");var _33=dj.byId("fx_total_utilise_amt");var _34=dj.byId("ft_amt");var _35=m._config.fxParamData[dj.byId("sub_product_code").get("value")][dj.byId("issuing_bank_abbv_name").get("value")].maxNbrContracts;if(_32.get("checked")&&_33&&!isNaN(_33.get("value"))&&_34&&!isNaN(_34.get("value"))){if(_34.get("value")<_33.get("value")){_31+=m.getLocalization("FXUtiliseAmtGreaterMessage");_30=false;}}m._config.onSubmitErrorMsg=_31;if(_32.get("checked")&&_33&&_34){var _36=0;for(var j=1;j<=_35;j++){var _37="fx_contract_nbr_amt_"+j;_36=_36+dj.byId(_37).get("value");if(dj.byId(_37).get("state")==="Error"||_36.toFixed(2)>_33.get("value")){dj.byId(_37).set("state","Error");dj.byId(_37).focus();_30=false;}}}return _30;};function _38(){var _39=dj.byId("sub_product_code").get("value");if(dj.byId("issuing_bank_abbv_name")&&dj.byId("issuing_bank_abbv_name").get("value")!==""&&m._config.fxParamData&&m._config.fxParamData[_39][dj.byId("issuing_bank_abbv_name").get("value")].isFXEnabled==="Y"){m.connect("ft_cur_code","onBlur",function(){m.setCurrency(this,["ft_amt"]);if(dj.byId("ft_cur_code").get("value")!==""&&!isNaN(dj.byId("ft_amt").get("value"))){m.fireFXAction();}else{m.defaultBindTheFXTypes();}});m.connect("ft_cur_code","onChange",function(){if(dj.byId("iss_date")&&dj.byId("iss_date").get("value")!==""){dj.byId("iss_date").validate();}if(dj.byId("recurring_start_date")&&dj.byId("recurring_start_date").get("value")!==""){dj.byId("recurring_start_date").validate();}m.setCurrency(this,["ft_amt"]);if(dj.byId("ft_cur_code").get("value")!==""&&!isNaN(dj.byId("ft_amt").get("value"))){m.fireFXAction();}else{m.defaultBindTheFXTypes();}});m.connect("ft_amt","onBlur",function(){m.setTnxAmt(this.get("value"));var _3a="";if(dj.byId("ft_cur_code")){_3a=dj.byId("ft_cur_code").get("value");}if(!isNaN(dj.byId("ft_amt").get("value"))&&_3a!==""){m.fireFXAction();}else{m.defaultBindTheFXTypes();}});}else{if(d.byId(_9)){d.style(_9,"display","none");}}if(dijit.byId("ft_cur_code")&&dijit.byId("ft_amt")){misys.setCurrency(dijit.byId("ft_cur_code"),["ft_amt"]);}};var _3b={},_3c={},_3d={},_3e={};_3b.fields=["beneficiary_name","beneficiary_address","beneficiary_city","beneficiary_dom","beneficiary_country","beneficiary_account","pre_approved"];_3b.toggleReadonly=function(_3f){m.toggleFieldsReadOnly(this.fields,_3f);};_3b.clear=function(){d.forEach(this.fields,function(_40,i){if(dj.byId(_40)){dj.byId(_40).set("value","");}});if(dj.byId("branch_address_flag")){dj.byId("branch_address_flag").set("checked",false);}if(dj.byId("cpty_bank_country_img")){dj.byId("cpty_bank_country_img").set("disabled",false);}d.style("PAB","display","none");};_3c.fields=["cpty_bank_swift_bic_code","cpty_bank_name","cpty_bank_address_line_1","cpty_bank_address_line_2","cpty_bank_dom","cpty_bank_country","intermediary_bank_swift_bic_code","intermediary_bank_name","intermediary_bank_address_line_1","intermediary_bank_address_line_2","intermediary_bank_dom","intermediary_bank_country"];_3c.clear=function(){d.forEach(this.fields,function(_41,i){if(dj.byId(_41)){dj.byId(_41).set("value","");}});};_3e.fields=["cpty_bank_name","cpty_bank_address_line_1","cpty_bank_address_line_2","cpty_bank_dom","cpty_bank_country"];_3e.clear=function(){d.forEach(this.fields,function(_42,i){if(dj.byId(_42)){dj.byId(_42).set("value","");}});};_3d.fields=["intermediary_bank_name","intermediary_bank_address_line_1","intermediary_bank_address_line_2","intermediary_bank_dom","intermediary_bank_country"];_3d.clear=function(){d.forEach(this.fields,function(_43,i){if(dj.byId(_43)){dj.byId(_43).set("value","");}});};function _44(){var _45=dj.byId("applicant_act_pab").get("value");if(_45==="Y"){_3b.toggleReadonly(true);}else{_3b.toggleReadonly(false);}dj.byId("pre_approved_status").set("value","");_3b.clear();_3c.clear();if(dj.byId("beneficiary_country_btn_img")){dj.byId("beneficiary_country_btn_img").set("disabled",false);}d.style("PAB","display","none");};function _46(){if(dj.byId("notify_beneficiary_email")&&dj.byId("notify_beneficiary_email").get("value")!==""){var _47=dj.byId("notify_beneficiary_email").get("value");var _48=_47.split(";");if(_48.length>10){var _49=m.getLocalization("checkEmailId");dj.byId("notify_beneficiary_email").set("state","Error");dj.hideTooltip(dj.byId("notify_beneficiary_email").domNode);dj.showTooltip(_49,dj.byId("notify_beneficiary_email").domNode,0);}}};function _4a(_4b){var _4c=dj.byId("customerReferenceRtgs");var _4d=_4c?dj.byId("customerReferenceRtgs").get("value"):"";var _4e=new RegExp(_4d);var _4f=dj.byId("cust_ref_id");var _50=false;var _51=dj.byId(_4b);var _52=_51?_51.get("value"):"";var _53=null;if(_52!==""&&_52!==null){_50=_4e.test(_52);if(!_50){_53=m.getLocalization("invalidCustRefRTGS");_4f.set("state","Error");dj.hideTooltip(_4f.domNode);dj.showTooltip(_53,_4f.domNode,0);}}};function _54(){var _55=dj.byId("beneficiary_name")?dj.byId("beneficiary_name").get("value"):"";_5=false;if(_55!==""){dj.byId("ft_amt").set("displayedValue","");if(dj.byId("pre_approved_status")&&dj.byId("pre_approved_status").get("value")==="Y"){if(m._config.non_pab_allowed){d.style("PAB","display","inline");}else{d.style("PAB","display","none");}if(dj.byId("intermediary_bank_swift_bic_code")&&dj.byId("intermediary_bank_swift_bic_code").get("value")!==""&&dj.byId("intermediary_bank_swift_bic_code").get("value")!==null){_5=true;if(dj.byId("inter_bank_iso_img")){dj.byId("inter_bank_iso_img").set("disabled",true);}dj.byId("has_intermediary").set("value","true");}else{dj.byId("has_intermediary").set("value","false");}if(dj.byId("bank_iso_img")){dj.byId("bank_iso_img").set("disabled",true);}if(dj.byId("cpty_bank_country_img")){dj.byId("cpty_bank_country_img").set("disabled",true);}if(dj.byId("cpty_bank_swift_bic_code")&&dj.byId("cpty_bank_swift_bic_code").get("value").length!==0){m.toggleFieldsReadOnly(["cpty_bank_swift_bic_code"],true);}if(dj.byId("intermediary_bank_swift_bic_code")&&dj.byId("intermediary_bank_swift_bic_code").get("value").length!==0){m.toggleFieldsReadOnly(["intermediary_bank_swift_bic_code"],true);}_3b.toggleReadonly(true);m.toggleFieldsReadOnly(["beneficiary_bank_branch_address_line_1","beneficiary_bank_branch_address_line_2","beneficiary_bank_branch_dom"],true);if(dj.byId("beneficiary_iso_img")){dj.byId("beneficiary_iso_img").set("disabled",true);}if(dj.byId("cpty_bank_swift_bic_code")&&dj.byId("cpty_bank_swift_bic_code").get("value").length!==0){m.toggleFieldsReadOnly(["cpty_bank_swift_bic_code"],true);}if(dj.byId("beneficiary_country_btn_img")){dj.byId("beneficiary_country_btn_img").set("disabled",true);}}else{_3b.toggleReadonly(false);d.style("PAB","display","none");m.toggleFieldsReadOnly(["beneficiary_swift_bic_code"],false);if(dj.byId("inter_bank_iso_img")){dj.byId("inter_bank_iso_img").set("disabled",false);}if(dj.byId("intermediary_bank_swift_bic_code")&&dj.byId("intermediary_bank_swift_bic_code").get("value")!==""&&dj.byId("intermediary_bank_swift_bic_code").get("value")!==null){_5=true;if(dj.byId("inter_bank_iso_img")){dj.byId("inter_bank_iso_img").set("disabled",true);}dj.byId("has_intermediary").set("value","true");}else{dj.byId("has_intermediary").set("value","false");}if((dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")==="")||(dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")===null)){_3b.toggleReadonly(false);if(dj.byId("bank_iso_img")){dj.byId("bank_iso_img").set("disabled",false);}if(dj.byId("beneficiary_country_btn_img")){dj.byId("beneficiary_country_btn_img").set("disabled",false);}m.toggleFieldsReadOnly(["beneficiary_bank_branch_address_line_1","beneficiary_bank_branch_address_line_2","beneficiary_bank_branch_dom"],false);}else{_3b.toggleReadonly(true);if(dj.byId("bank_iso_img")){dj.byId("bank_iso_img").set("disabled",true);}m.toggleFieldsReadOnly(["beneficiary_bank_branch_address_line_1","beneficiary_bank_branch_address_line_2","beneficiary_bank_branch_dom"],true);}if(dj.byId("beneficiary_swift_bic_code")&&dj.byId("beneficiary_swift_bic_code").get("value")!==""){m.toggleFieldsReadOnly(["beneficiary_name","beneficiary_address","beneficiary_city","beneficiary_dom"],true);}if(dj.byId("intermediary_bank_swift_bic_code")&&dj.byId("intermediary_bank_swift_bic_code").get("value")!==""){m.toggleFieldsReadOnly(["intermediary_bank_swift_bic_code","intermediary_bank_name","intermediary_bank_address_line_1","intermediary_bank_address_line_2","intermediary_bank_dom","intermediary_bank_country"],true);}if(dj.byId("beneficiary_iso_img")){dj.byId("beneficiary_iso_img").set("disabled",false);}if(dj.byId("beneficiary_country_btn_img")&&dj.byId("beneficiary_country").get("value")!==""&&dj.byId("beneficiary_country").get("value")!==null){dj.byId("beneficiary_country_btn_img").set("disabled",true);}if(dj.byId("cpty_bank_swift_bic_code")&&dj.byId("cpty_bank_swift_bic_code").get("value").length!==0){m.toggleFieldsReadOnly(["cpty_bank_swift_bic_code","cpty_bank_name","cpty_bank_address_line_1","cpty_bank_address_line_2","cpty_bank_dom","cpty_bank_country"],true);}if(dj.byId("intermediary_bank_swift_bic_code")&&dj.byId("intermediary_bank_swift_bic_code").get("value").length!==0){m.toggleFieldsReadOnly(["intermediary_bank_swift_bic_code","intermediary_bank_name","intermediary_bank_address_line_1","intermediary_bank_address_line_2","intermediary_bank_dom","intermediary_bank_country"],true);}}}};function _56(){var _57=dj.byId("applicant_act_no").get("value");var _58=dj.byId("entity")?dj.byId("entity").get("value"):"";if(_57===""){m.dialog.show("ERROR",m.getLocalization("selectDebitFirst"));return;}m.showSearchDialog("beneficiary_accounts","['beneficiary_name','beneficiary_account','ft_cur_code', 'beneficiary_address', 'beneficiary_city', 'change_address_line_3', 'beneficiary_dom', "+"'pre_approved_status', 'change_counterparty_name_2', 'change_counterparty_name_3', 'cpty_bank_name', 'cpty_bank_address_line_1',"+" 'cpty_bank_address_line_2', "+"'cpty_bank_dom', 'beneficiary_bank_branch_address_line_1', 'beneficiary_bank_branch_address_line_2', 'beneficiary_bank_branch_dom',"+" 'cpty_bank_country', "+"'beneficiary_swift_bic_code', 'cpty_bank_swift_bic_code', 'beneficiary_bank_code', 'beneficiary_branch_code', 'beneficiary_branch_name', "+"'pre_approved', 'change_threshold','change_threshold_curcode','bene_adv_beneficiary_id_no_send','bene_adv_mailing_name_add_1_no_send',"+"'bene_adv_mailing_name_add_2_no_send','bene_adv_mailing_name_add_3_no_send','bene_adv_mailing_name_add_4_no_send',"+"'bene_adv_mailing_name_add_5_no_send',"+"'bene_adv_mailing_name_add_6_no_send','bene_adv_postal_code_no_send','bene_adv_country_no_send','bene_email_1','bene_email_2', "+"'beneficiary_postal_code','beneficiary_country',"+"'bene_adv_fax_no_send', 'bene_adv_ivr_no_send','beneficiary_nickname', 'bene_adv_phone_no_send','intermediary_bank_swift_bic_code',"+"'intermediary_bank_name','intermediary_bank_address_line_1',"+"'intermediary_bank_address_line_2','intermediary_bank_dom','intermediary_bank_country']",{product_type:dijit.byId("sub_product_code").get("value"),entity_name:_58,pabAccStat:dijit.byId("applicant_act_pab").get("value"),debitAcctNo:_57},"",dijit.byId("sub_product_code").get("value"),_a,m.getLocalization("ListOfBeneficiriesTitleMessage"));};function _59(){var _5a=true;if(dj.byId("cpty_bank_swift_bic_code")&&dj.byId("cpty_bank_swift_bic_code").get("value").length===0){_5a=false;}_5b("cpty_bank_swift_bic_code","readOnly",_5a);_5b("cpty_bank_country_img","disabled",_5a);if((dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")==="")||(dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")===null)){_5b("cpty_bank_swift_bic_code","readOnly",false);_5b("cpty_bank_country_img","disabled",false);}_5b("cpty_bank_name","readOnly",_5a);_5b("cpty_bank_address_line_1","readOnly",_5a);_5b("cpty_bank_address_line_2","readOnly",_5a);_5b("cpty_bank_dom","readOnly",_5a);_5b("cpty_bank_country","readOnly",_5a);_5b("bank_iso_img","disabled",false);m.toggleRequired("cpty_bank_name",true);m.toggleRequired("cpty_bank_address_line_1",true);m.toggleRequired("cpty_bank_country",true);};function _5b(id,_5c,_5d){var _5e=dj.byId(id);if(_5e){_5e.set(_5c,_5d);}};function _5f(){var _60=true;if(dj.byId("intermediary_bank_swift_bic_code")&&dj.byId("intermediary_bank_swift_bic_code").get("value").length===0){_60=false;}_5b("intermediary_bank_swift_bic_code","readOnly",_60);_5b("intermediary_bank_name","readOnly",_60);_5b("intermediary_bank_address_line_1","readOnly",_60);_5b("intermediary_bank_address_line_2","readOnly",_60);_5b("intermediary_bank_dom","readOnly",_60);_5b("intermediary_bank_country","readOnly",_60);_5b("inter_bank_iso_img","disabled",false);_5b("intermediary_bank_country_img","disabled",_60);m.toggleRequired("intermediary_bank_swift_bic_code",_60);m.toggleRequired("intermediary_bank_name",_60);m.toggleRequired("intermediary_bank_address_line_1",_60);m.toggleRequired("intermediary_bank_address_line_2",false);m.toggleRequired("intermediary_bank_dom",false);m.toggleRequired("intermediary_bank_country",_60);if((dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")==="")||(dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")===null)){_5b("intermediary_bank_swift_bic_code","readOnly",false);_5b("intermediary_bank_country_img","disabled",false);m.toggleRequired("intermediary_bank_address_line_1",false);}};function _61(_62){var _63=["beneficiary_bank_branch_address_line_1","beneficiary_bank_branch_address_line_2","beneficiary_bank_branch_dom"];var _64=(dj.byId("beneficiary_name")&&dj.byId("beneficiary_name").get("readOnly"))?true:false;if(_62){if(((dj.byId("pre_approved_status")&&dj.byId("pre_approved_status").get("value")==="Y")||(dj.byId("pre_approved_status")&&dj.byId("pre_approved_status").get("value")==="N"))&&_64){m.toggleFieldsReadOnly(_63,true);}else{m.toggleFieldsReadOnly(_63,false);dj.byId("branch_address_flag").set("disabled",false);dj.byId("branch_address_flag").set("readOnly",false);}m.toggleRequired("beneficiary_bank_branch_address_line_1",true);}else{m.toggleFieldsReadOnly(_63,true,true);m.toggleRequired("beneficiary_bank_branch_address_line_1",false);}};function _65(){if(dj.byId("branch_address_flag")){if((dj.byId("pre_approved_status")&&dj.byId("pre_approved_status").get("value")==="Y")||(dj.byId("pre_approved_status")&&dj.byId("pre_approved_status").get("value")==="N")){m.toggleFieldsReadOnly(["branch_address_flag","beneficiary_bank_branch_address_line_1","beneficiary_bank_branch_address_line_2","beneficiary_bank_branch_dom"],true);}else{if((dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")==="")||(dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")===null)){m.toggleFieldsReadOnly(["branch_address_flag","beneficiary_bank_branch_address_line_1","beneficiary_bank_branch_address_line_2","beneficiary_bank_branch_dom"],false);}else{m.toggleFieldsReadOnly(["branch_address_flag","beneficiary_bank_branch_address_line_1","beneficiary_bank_branch_address_line_2","beneficiary_bank_branch_dom"],true);}}}};function _66(){var _67=dj.byId("notify_beneficiary").get("checked");var _68=dj.byId("notify_beneficiary_choice_1");var _69=dj.byId("notify_beneficiary_choice_2");var _6a=dj.byId("notify_beneficiary_email");_68.set("disabled",!_67);_69.set("disabled",!_67);_6a.set("disabled",true);_68.set("checked",_67);_69.set("checked",false);_6a.set("value","");var _6b=d.byId("notify_beneficiary_email_node");var _6c=d.byId("label_notify_beneficiary_choice_1");d.place(_6b,_6c,"after");var _6d=dj.byId("bene_email_1").get("value");if(!_6d){_6d=dj.byId("bene_email_2").get("value");}if(_6d&&_67){_6a.set("value",_6d);_6a.set("readOnly",true);}if(!_6d&&_67){if(dj.byId("beneficiary_name")&&dj.byId("beneficiary_name").get("value")===""){m.dialog.show("ERROR",m.getLocalization("noBeneficiaryEmail"));}_69.set("checked",true);var _6e=d.byId("label_notify_beneficiary_choice_2");d.place(_6b,_6e,"after");_6a.set("disabled",false);}m.toggleRequired("notify_beneficiary_email",_67);m.toggleRequired("notify_beneficiary_choice_1",_67);m.toggleRequired("notify_beneficiary_choice_2",_67);};function _6f(){var _70=dj.byId("notify_beneficiary_choice_2").get("checked")&&!dj.byId("notify_beneficiary_choice_2").get("disabled");var _71=dj.byId("notify_beneficiary_email");var _72=dj.byId("notify_beneficiary_choice_2");var _73=d.byId("notify_beneficiary_email_node");var _74=d.byId("label_notify_beneficiary_choice_1");var _75=d.byId("label_notify_beneficiary_choice_2");var _76=dj.byId("bene_email_1").get("value");if(!_76){_76=dj.byId("bene_email_2").get("value");}if(_70){d.place(_73,_75,"after");_71.set("disabled",false);}else{if(!_76){m.dialog.show("ERROR",m.getLocalization("noBeneficiaryEmail"));_72.set("checked",true);_71.set("disabled",false);}else{d.place(_73,_74,"after");}}if(_76&&!_70){_71.set("value",_76);_71.set("readOnly",true);}else{_71.set("value","");_71.set("readOnly",false);_71.set("disabled",false);}};function _77(){var _78=dj.byId("intermediary_bank_country_img");var _79=dj.byId("intermediary_bank_swift_bic_code");var _7a=true;if(dj.byId("intermediary_bank_swift_bic_code").get("value")!==""&&dj.byId("cpty_bank_swift_bic_code").get("value")!==""&&(dj.byId("intermediary_bank_swift_bic_code").get("value")===dj.byId("cpty_bank_swift_bic_code").get("value"))){var _7b="";_7b=misys.getLocalization("invalidIntermeditaryCode");_79.set("state","Error");dj.hideTooltip(_79.domNode);dj.showTooltip(_7b,_79.domNode,0);_78.set("disabled",false);_7a=false;}return _7a;};function _7c(){m.xhrPost({url:misys.getServletURL("/screen/AjaxScreen/action/GetUserAccountList"),handleAs:"json",sync:true,content:{context_value:"FT:RTGS",entity:dj.byId("entity")?dj.byId("entity").get("value"):""},load:function(_7d,_7e){if(_7d.items.valid===true){dj.byId("applicant_act_cur_code").set("value",_7d.items.currency);dj.byId("applicant_act_pab").set("value",_7d.items.PAB);dj.byId("applicant_act_no").set("value",_7d.items.accountNo);dj.byId("applicant_act_name").set("value",_7d.items.accountName);_89();}},error:function(_7f,_80){console.error("[Could not fetch userAccounts] ");console.error(_7f);}});};function _81(){var _82=null;var _83=dj.byId("customer_bank").get("value");if(misys&&misys._config&&misys._config.businessDateForBank&&misys._config.businessDateForBank[_83]&&misys._config.businessDateForBank[_83][0]&&misys._config.businessDateForBank[_83][0].value!==""){var _84=misys._config.businessDateForBank[_83][0].value;var _85=_84.substring(0,4);var _86=_84.substring(5,7);var _87=_84.substring(8,10);_84=_87+"/"+_86+"/"+_85;var _88=new Date(_85,_86-1,_87);if(dj.byId("option_for_app_date")&&dj.byId("option_for_app_date").get("value")==="SCRATCH"){dj.byId("appl_date").set("value",_84);document.getElementById("appl_date_view_row").childNodes[1].innerHTML=_84;if(dj.byId("appl_date_hidden")){dj.byId("appl_date_hidden").set("value",_88);}}if(dj.byId("todays_date")){dj.byId("todays_date").set("value",_88);}}if(!_2&&!_4){if(dj.byId("applicant_act_name")){dj.byId("applicant_act_name").set("value","");}if(dj.byId("applicant_act_no")){dj.byId("applicant_act_no").set("value","");}if(dj.byId("beneficiary_name")){dj.byId("beneficiary_name").set("value","");}if(dj.byId("beneficiary_act_cur_code")){dj.byId("beneficiary_act_cur_code").set("value","");}if(dj.byId("beneficiary_account")){dj.byId("beneficiary_account").set("value","");}if(dj.byId("cpty_bank_name")){dj.byId("cpty_bank_name").set("value","");}if(dj.byId("cpty_branch_name")){dj.byId("cpty_branch_name").set("value","");}if(dj.byId("ft_cur_code")){dj.byId("ft_cur_code").set("value","");}if(dj.byId("ft_amt")){dj.byId("ft_amt").set("value","");}if(dj.byId("iss_date")){dj.byId("iss_date").set("value",null);}if(dj.byId("issuing_bank_abbv_name")){dj.byId("issuing_bank_abbv_name").set("value",_83);}_82=misys._config.customerBankDetails[_83][0].value;if(dj.byId("issuing_bank_name")){dj.byId("issuing_bank_name").set("value",_82);}}if(!_2){dj.byId("issuing_bank_abbv_name").set("value",_83);_82=misys._config.customerBankDetails[_83][0].value;dj.byId("issuing_bank_name").set("value",_82);}_2=false;if(dj.byId("customer_bank")&&_83!==""){_4=false;if(dj.byId("issuing_bank_abbv_name").get("value")!==""){_82=misys._config.customerBankDetails[_83][0].value;dj.byId("issuing_bank_name").set("value",_82);}}m.initializeFX(dj.byId("sub_product_code").get("value"),dj.byId("issuing_bank_abbv_name").get("value"));if(dj.byId("applicant_act_cur_code")&&dj.byId("applicant_act_cur_code").get("value")!==""&&dj.byId("ft_cur_code")&&dj.byId("ft_cur_code").get("value")!==""&&dj.byId("applicant_act_cur_code").get("value")!==dj.byId("ft_cur_code").get("value")&&!isNaN(dj.byId("ft_amt").get("value"))){m.onloadFXActions();}else{m.defaultBindTheFXTypes();}_38();};function _89(){var _8a=dj.byId("applicant_act_pab").get("value");if(_8a=="Y"){_3b.toggleReadonly(true);}else{if(m._config.non_pab_allowed){_3b.toggleReadonly(false);}else{_3b.toggleReadonly(true);}}if(d.byId("clear_img")){if(_8a=="Y"&&d.style(d.byId("clear_img"),"display")!=="none"){m.animate("wipeOut",d.byId("clear_img"));dj.byId("clear_img").setAttribute("disabled",true);}else{if(_8a=="N"&&d.style(d.byId("clear_img"),"display")=="none"){m.animate("wipeIn",d.byId("clear_img"));dj.byId("clear_img").setAttribute("disabled",false);}}}};function _8b(){dojo.forEach(["pre_approved","beneficiary_account","beneficiary_act_cur_code","beneficiary_address","beneficiary_city","beneficiary_dom","pre_approved_status","cpty_bank_name","cpty_bank_address_line_1","cpty_bank_address_line_2","cpty_bank_dom","cpty_branch_address_line_1","cpty_branch_address_line_2","cpty_branch_dom","cpty_bank_country","cpty_bank_swift_bic_code","cpty_bank_code","cpty_branch_code","cpty_branch_name","beneficiary_name","bene_adv_beneficiary_id_no_send","bene_adv_mailing_name_add_1_no_send","bene_adv_mailing_name_add_2_no_send","bene_adv_mailing_name_add_3_no_send","bene_adv_mailing_name_add_4_no_send","bene_adv_mailing_name_add_5_no_send","bene_adv_mailing_name_add_6_no_send","bene_adv_postal_code_no_send","bene_adv_country_no_send","bene_email_1","bene_email_2","beneficiary_postal_code","beneficiary_country","bene_adv_fax_no_send","bene_adv_ivr_no_send","bene_adv_phone_no_send","bene_adv_email_no_send1","bene_adv_email_no_send","ft_amt","ft_cur_code","intermediary_bank_swift_bic_code","intermediary_bank_name","intermediary_bank_address_line_1","intermediary_bank_address_line_2","intermediary_bank_dom","intermediary_bank_country","beneficiary_bank_branch_address_line_1","beneficiary_bank_branch_address_line_2","beneficiary_bank_branch_dom"],function(_8c){if(dj.byId(_8c)){dj.byId(_8c).set("value","");}});if(d.byId(_9)&&(d.style(d.byId(_9),"display")!=="none")){m.animate("wipeOut",d.byId(_9));}dj.byId("ft_cur_code").set("value",dj.byId("applicant_act_cur_code").get("value"));d.style("PAB","display","none");m.setApplicantReference();};function _8d(){var _8e=dj.byId("beneNameRegex");var _8f=_8e?dj.byId("beneNameRegex").get("value"):"";var _90=new RegExp(_8f);var _91=false;var _92=dj.byId("beneficiary_name").get("value")?dj.byId("beneficiary_name").get("value"):"";if(_8f!==null&&_8f!==""){if(_92!==""&&_92!==null){_91=_90.test(_92);if(!_91){this.invalidMessage=m.getLocalization("invalidBeneficiaryNameforMeps");return false;}}}return true;};function _93(_94){var _95=dj.byId("beneAddressRegex");var _96=_95?dj.byId("beneAddressRegex").get("value"):"";var _97=new RegExp(_96);var _98=false;var _99=null;var _9a=dj.byId(_94);var _9b=_9a?dj.byId(_94).get("value"):"";if(_96!==null&&_96!==""&&_9b!==""&&_9b!==null){_98=_97.test(_9b);if(!_98){_99=m.getLocalization("invalidBeneficiaryAddressFieldRtgs");_9a.set("state","Error");dj.hideTooltip(_9a.domNode);dj.showTooltip(_99,_9a.domNode,0);}}};function _9c(){var _9d=dj.byId("beneAcctRegex");var _9e=_9d?dj.byId("beneAcctRegex").get("value"):"";var _9f=new RegExp(_9e);var _a0=dj.byId("beneficiary_account");var _a1=false;var _a2=_a0;var _a3=_a2?_a2.get("value"):"";var _a4=null;if(_9e!==null&&_9e!==""){if(_a3!==""&&_a3!==null){_a1=_9f.test(_a3);if(!_a1){_a4=m.getLocalization("invalidBeneficiaryAccountforRtgs");_a0.set("state","Error");dj.hideTooltip(_a0.domNode);dj.showTooltip(_a4,_a0.domNode,0);}}}};function _a5(_a6){var _a7=dj.byId("beneAddressRegex");var _a8=_a7?dj.byId("beneAddressRegex").get("value"):"";var _a9=new RegExp(_a8);var _aa=dj.byId("addressStartCharsRegex")?dj.byId("addressStartCharsRegex").get("value"):"";var _ab=new RegExp(_aa);var _ac=false;var _ad=_a6?_a6.get("value"):"";var _ae=_ad.split("\n");var _af=null;if(_a8!==null&&_a8!==""){if(_ad!==""){_ac=_a9.test(_ad);if(!_ac){_af=m.getLocalization("invalidCharBranchAddress");_a6.set("state","Error");dj.hideTooltip(_a6.domNode);dj.showTooltip(_af,_a6.domNode,0);}else{_ae.forEach(function(_b0){if(_ab.test(_b0)){_af=m.getLocalization("invalidFirstCharBeneficiaryAddressFieldRtgs");_a6.set("state","Error");dj.hideTooltip(_a6.domNode);dj.showTooltip(_af,_a6.domNode,0);}});}}}return _ac;};function _b1(_b2){var _b3=dj.byId("beneAddressRegex");var _b4=_b3?dj.byId("beneAddressRegex").get("value"):"";var _b5=new RegExp(_b4);var _b6=dj.byId("addressStartCharsRegex")?dj.byId("addressStartCharsRegex").get("value"):"";var _b7=new RegExp(_b6);var _b8=false;var _b9=_b2?_b2.get("value"):"";var _ba=_b9.split("\n");var _bb=null;if(_b4!==null&&_b4!==""){if(_b9!==""){_b8=_b5.test(_b9);if(!_b8){_bb=m.getLocalization("invalidCharBranchAddress");_b2.set("state","Error");dj.hideTooltip(_b2.domNode);dj.showTooltip(_bb,_b2.domNode,0);}else{_ba.forEach(function(_bc){if(_b7.test(_bc)){_bb=m.getLocalization("invalidFirstCharBeneficiaryAddressFieldRtgs");_b2.set("state","Error");dj.hideTooltip(_b2.domNode);dj.showTooltip(_bb,_b2.domNode,0);_b8=false;}});}}}return _b8;};function _bd(){var _be=dj.byId("cpty_bank_swift_bic_code"),_bf=dj.byId("cpty_bank_name"),_c0=dj.byId("cpty_bank_address_line_1"),_c1=dj.byId("cpty_bank_address_line_2"),_c2=dj.byId("cpty_bank_dom"),_c3=dj.byId("cpty_bank_country"),_c4=dj.byId("intermediary_flag"),_c5="";var _c6=false;if(_be){if(_be.get("value")!==""){m.xhrPost({url:misys.getServletURL("/screen/AjaxScreen/action/ValidateBankRTGSSWIFTCodeAction"),handleAs:"json",sync:true,content:{bank_code:_be.get("value")},load:function(_c7,_c8){if(_c7.items.valid===true){_c6=true;_bf.set("value",_c7.items.bankName);_c0.set("value",_c7.items.bankAddressLine1);_c1.set("value",_c7.items.bankAddressLine2);_c2.set("value",_c7.items.bankDom);_c3.set("value",_c7.items.bankCountry);_c4.set("value",_c7.items.intermediaryFlag);}else{_c5=misys.getLocalization("invalidBankCode");_be.set("state","Error");dj.hideTooltip(_be.domNode);dj.showTooltip(_c5,_be.domNode,0);_3e.clear();}},error:function(_c9,_ca){console.error("[Could not validate Bank BIC Code] "+_be.get("value"));console.error(_c9);}});}else{_bf.set("value","");_c0.set("value","");_c1.set("value","");_c2.set("value","");_c4.set("value","");}}return _c6;};function _cb(){var _cc=dj.byId("beneficiary_account"),_cd=dj.byId("company_id"),_ce=false;m.xhrPost({url:misys.getServletURL("/screen/AjaxScreen/action/ValidateBeneMasterAccount"),handleAs:"json",sync:true,content:{account_number:_cc.get("value"),company_id:_cd.get("value")},load:function(_cf,_d0){if(_cf.items.valid=="OK"){_ce=true;}},error:function(_d1,_d2){console.error("[Could not validate Beneficiary Account] "+_cc.get("value"));console.error(_d1);}});return _ce;};function _d3(){var _d4=dj.byId("intermediary_bank_swift_bic_code"),_d5=dj.byId("intermediary_bank_name"),_d6=dj.byId("intermediary_bank_address_line_1"),_d7=dj.byId("intermediary_bank_address_line_2"),_d8=dj.byId("intermediary_bank_dom"),_d9=dj.byId("intermediary_bank_country"),_da="";var _db=false;if(_d4){if(_d4.get("value")!==""){m.xhrPost({url:misys.getServletURL("/screen/AjaxScreen/action/ValidateIntermediarySWIFTCodeAction"),handleAs:"json",sync:true,content:{bank_code:_d4.get("value"),product_type:dj.byId("sub_product_code").get("value")},load:function(_dc,_dd){if(_dc.items.valid===true){_db=true;_d5.set("value",_dc.items.bankName);_d6.set("value",_dc.items.bankAddressLine1);_d7.set("value",_dc.items.bankAddressLine2);_d8.set("value",_dc.items.bankDom);_d9.set("value",_dc.items.bankCountry);}else{_da=misys.getLocalization("invalidBankCode");_d4.focusNode.focus();_d4.set("value","");_d4.set("state","Error");dj.hideTooltip(_d4.domNode);dj.showTooltip(_da,_d4.domNode,0);_3d.clear();}},error:function(_de,_df){console.error("[Could not validate Intermediary Swift Code] "+bank_code_field.get("value"));console.error(_de);}});}else{_d5.set("value","");_d6.set("value","");_d7.set("value","");_d8.set("value","");}}return _db;};function _e0(_e1){var _e2="^[a-zA-Z0-9 \\,''().\\/][a-zA-Z0-9 \\,''().\\/+-]*$";var _e3=new RegExp(_e2);var _e4=dj.byId("addressStartCharsRegex")?dj.byId("addressStartCharsRegex").get("value"):"";var _e5=new RegExp(_e4);var _e6=false;var _e7=false;var _e8=_e1?_e1.get("value"):"";var _e9=null;if(_e5.test(_e8)){_e9=m.getLocalization("invalidFirstCharBeneficiaryAddressFieldRtgs");_e1.set("state","Error");dj.hideTooltip(_e1.domNode);dj.showTooltip(_e9,_e1.domNode,0);}else{if(_e8!==""){_e7=_e3.test(_e8);if(!_e7){_e9=m.getLocalization("invalidCharBranchAddress");_e1.set("state","Error");dj.hideTooltip(_e1.domNode);dj.showTooltip(_e9,_e1.domNode,0);}}}};d.ready(function(){m._config.forceSWIFTValidation=true;});d.mixin(m._config,{initReAuthParams:function(){var _ea=dj.byId("entity")?dj.byId("entity").get("value"):"";var _eb={productCode:"FT",subProductCode:dj.byId("sub_product_code").get("value"),transactionTypeCode:"01",entity:_ea,currency:dj.byId("ft_cur_code").get("value"),amount:m.trimAmount(dj.byId("ft_amt").get("value")),bankAbbvName:dj.byId("customer_bank")?dj.byId("customer_bank").get("value"):"",es_field1:m.trimAmount(dj.byId("ft_amt").get("value")),es_field2:(dj.byId("beneficiary_account"))?dj.byId("beneficiary_account").get("value"):""};return _eb;}});d.mixin(m,{fireFXAction:function(){if(m._config.fxParamData&&dj.byId("sub_product_code")&&dj.byId("sub_product_code").get("value")!==""&&dj.byId("issuing_bank_abbv_name")&&dj.byId("issuing_bank_abbv_name").get("value")!==""){var _ec=m._config.fxParamData[dj.byId("sub_product_code").get("value")][dj.byId("issuing_bank_abbv_name").get("value")];if(m._config.fxParamData&&_ec.isFXEnabled==="Y"){var _ed,_ee;var _ef="";if(dj.byId("ft_cur_code")){_ef=dj.byId("ft_cur_code").get("value");}var _f0=dj.byId("ft_amt").get("value");var _f1=dj.byId("applicant_act_cur_code").get("value");var _f2=m._config.productCode;var _f3="";if(dj.byId("issuing_bank_abbv_name")&&dj.byId("issuing_bank_abbv_name").get("value")!==""){_f3=dj.byId("issuing_bank_abbv_name").get("value");}var _f4=dj.byId("applicant_act_cur_code").get("value");var _f5=false;if(_ef!==""&&!isNaN(_f0)&&_f2!==""&&_f3!==""){if(_ef!==_f1){_ed=_f1;_ee=_ef;_f4=_f1;}if(_ed&&_ed!==""&&_ee&&_ee!==""){if(d.byId(_9)&&(d.style(d.byId(_9),"display")==="none")){m.animate("wipeIn",d.byId(_9));}m.fetchFXDetails(_ed,_ee,_f0,_f2,_f3,_f4,_f5);if(dj.byId("fx_rates_type_1")&&dj.byId("fx_rates_type_1").get("checked")){if(isNaN(dj.byId("fx_exchange_rate").get("value"))||dj.byId("fx_exchange_rate_cur_code").get("value")===""||isNaN(dj.byId("fx_exchange_rate_amt").get("value"))||(m._config.fxParamData[dj.byId("sub_product_code").get("value")][dj.byId("issuing_bank_abbv_name").get("value")].toleranceDispInd==="Y"&&(isNaN(dj.byId("fx_tolerance_rate").get("value"))||isNaN(dj.byId("fx_tolerance_rate_amt").get("value"))||dj.byId("fx_tolerance_rate_cur_code").get("value")===""))){_2b(m.getLocalization("FXDefaultErrorMessage"));}}}else{if(d.byId(_9)&&(d.style(d.byId(_9),"display")!=="none")){m.animate("wipeOut",d.byId(_9));}m.defaultBindTheFXTypes();}}if(dj.byId("recurring_payment_enabled")&&dj.byId("recurring_payment_enabled").get("checked")&&dj.byId("fx_rates_type_2")){dj.byId("fx_rates_type_2").set("disabled",true);m.animate("wipeOut",d.byId("contracts_div"));}}}},bind:function(){m.setValidation("fx_tolerance_rate",m.validateToleranceAndExchangeRate);m.connect("beneficiary_name","onChange",m.checkBeneficiaryNicknameDiv);m.connect("applicant_act_name","onChange",m.checkNickNameDiv);m.setValidation("template_id",m.validateTemplateId);m.setValidation("request_date",m.validateCashRequestDate);m.setValidation("iss_date",m.validateCashProcessingDate);m.connect("iss_date","onClick",function(){m.clearDateCache();if(misys._config.isMultiBank){var _f6;if(dijit.byId("customer_bank")){_f6=dijit.byId("customer_bank").get("value");}if(_f6!==""&&misys&&misys._config&&misys._config.businessDateForBank&&misys._config.businessDateForBank[_f6][0]&&misys._config.businessDateForBank[_f6][0].value!==""){var _f7=parseInt(misys._config.businessDateForBank[_f6][0].value.substring(0,4),10);var _f8=parseInt(misys._config.businessDateForBank[_f6][0].value.substring(5,7),10);var _f9=parseInt(misys._config.businessDateForBank[_f6][0].value.substring(8,10),10);this.dropDown.currentFocus=new Date(_f7,_f8-1,_f9);}}});m.setValidation("ft_cur_code",m.validateCurrency);m.setValidation("cpty_bank_country",m.validateCountry);m.setValidation("intermediary_bank_country",m.validateCountry);m.setValidation("beneficiary_country",m.validateCountry);m.setValidation("fx_exchange_rate",m.validateToleranceAndExchangeRate);m.setValidation("notify_beneficiary_email",m.validateEmailAddr);m.setValidation("cpty_bank_swift_bic_code",m.validateBICFormat);m.setValidation("intermediary_bank_swift_bic_code",m.validateBICFormat);m.connect("entity","onClick",m.validateRequiredField);m.connect("applicant_act_name","onClick",m.validateRequiredField);m.connect("beneficiary_name","onClick",m.validateRequiredField);m.connect("beneficiary_address","onClick",m.validateRequiredField);m.connect("beneficiary_account","onClick",m.validateRequiredField);m.connect("cpty_bank_name","onClick",m.validateRequiredField);m.connect("cpty_bank_address_line_1","onClick",m.validateRequiredField);m.connect("cpty_bank_country","onClick",m.validateRequiredField);m.connect("notify_beneficiary_email","onBlur",_46);m.connect("recurring_flag","onClick",m.showRecurring);m.connect("recurring_flag","onClick",function(){var _fa=dj.byId("gpp_fee_config_flag")?dj.byId("gpp_fee_config_flag").get("value"):"false";var _fb=dj.byId("gpp_fee_config_amt_cur_code")?dj.byId("gpp_fee_config_amt_cur_code").get("value"):"",_fc=dj.byId("gpp_fee_config_amt_val")?dj.byId("gpp_fee_config_amt_val").get("value"):"";if(dj.byId("response_status")){dj.byId("response_status").set("value","");}if(dj.byId("recurring_flag").get("checked")===true){if(dj.byId("payment_fee_details")){dj.byId("payment_fee_details").set("value","");}if((_fa==="true")){if(document.getElementById("NO_FEES_FOR_RECCURING_PAYMENT")){document.getElementById("NO_FEES_FOR_RECCURING_PAYMENT").style.display="block";}m.hideFeeDetailsForError();}}else{if((_fa==="true")){m.hideAllDisclaimerMessages();dj.byId("add_fee_details_button").set("disabled",false);document.getElementById("FEE_DETAILS_CONFIRMATION_DISCLAIMER").style.display="block";if(dj.byId("is_view_fees_btn")){dj.byId("is_view_fees_btn").set("value","false");}}}});m.setValidation("beneficiary_name",_8d);m.connect("beneficiary_name","onChange",function(){_54();if(dj.byId("notify_beneficiary_email")&&dj.byId("notify_beneficiary").get("checked")){if(dj.byId("notify_beneficiary_choice_1").get("checked")){if(dj.byId("bene_adv_email_no_send").get("value")!==""){dj.byId("notify_beneficiary_email").set("value",dj.byId("bene_adv_email_no_send").get("value"));}else{if(dj.byId("bene_adv_email_no_send1").get("value")!==""){dj.byId("notify_beneficiary_email").set("value",dj.byId("bene_adv_email_no_send1").get("value"));}else{dj.byId("notify_beneficiary").set("checked",false);dj.byId("notify_beneficiary_choice_1").set("checked",false);dj.byId("notify_beneficiary_email").set("value","");dj.byId("notify_beneficiary_email").set("disabled",true);}}}else{if(dj.byId("notify_beneficiary_choice_2").get("checked")){dj.byId("notify_beneficiary_email").set("value","");}}}});m.connect("beneficiary_img","onClick",_56);m.connect("beneficiary_address","onBlur",function(){_e0(dj.byId("beneficiary_address"));});m.connect("beneficiary_city","onBlur",function(){_e0(dj.byId("beneficiary_city"));});m.connect("beneficiary_dom","onBlur",function(){_e0(dj.byId("beneficiary_dom"));});m.connect("cpty_bank_address_line_1","onBlur",function(){_93(dj.byId("cpty_bank_address_line_1"));});m.connect("cpty_bank_address_line_2","onBlur",function(){_93(dj.byId("cpty_bank_address_line_2"));});m.connect("cpty_bank_dom","onBlur",function(){_93(dj.byId("cpty_bank_dom"));});m.connect("intermediary_bank_address_line_1","onBlur",function(){_93(dj.byId("intermediary_bank_address_line_1"));});m.connect("intermediary_bank_address_line_2","onBlur",function(){_93(dj.byId("intermediary_bank_address_line_2"));});m.connect("intermediary_bank_dom","onBlur",function(){_93(dj.byId("intermediary_bank_dom"));});m.connect("cpty_bank_name","onBlur",function(){_93(dj.byId("cpty_bank_name"));});m.connect("intermediary_bank_name","onBlur",function(){_93(dj.byId("intermediary_bank_name"));});m.connect("beneficiary_account","onBlur",_9c);m.connect("notify_beneficiary","onClick",_66);m.connect("notify_beneficiary_choice_1","onClick",_6f);m.connect("notify_beneficiary_choice_2","onClick",_6f);m.connect("beneficiary_bank_branch_address_line_1","onBlur",function(){_e0(dj.byId("beneficiary_bank_branch_address_line_1"));});m.connect("beneficiary_bank_branch_address_line_2","onBlur",function(){_e0(dj.byId("beneficiary_bank_branch_address_line_2"));});m.connect("beneficiary_bank_branch_dom","onBlur",function(){_e0(dj.byId("beneficiary_bank_branch_dom"));});m.connect("cust_ref_id","onBlur",function(){_4a(dj.byId("cust_ref_id"));});m.connect("payment_details_to_beneficiary","onBlur",function(){_a5(dj.byId("payment_details_to_beneficiary"));});m.connect("cpty_bank_swift_bic_code","onChange",_77);m.connect("cpty_bank_swift_bic_code","onBlur",function(){if(dj.byId("cpty_bank_swift_bic_code")&&(dj.byId("cpty_bank_swift_bic_code").get("value").length===11||dj.byId("cpty_bank_swift_bic_code").get("value").length===8)){_bd();}if(dj.byId("cpty_bank_swift_bic_code")&&dj.byId("cpty_bank_swift_bic_code").get("value").length===0){m.toggleFieldsReadOnly(["cpty_bank_swift_bic_code","cpty_bank_name","cpty_bank_address_line_1","cpty_bank_address_line_2","cpty_bank_dom","cpty_bank_country"],false);dj.byId("beneficiary_bank_branch_address_line_1").set("readOnly",true);dj.byId("branch_address_flag").set("checked",false);dj.byId("cpty_bank_country_img").set("disabled",false);_3c.clear();}else{dj.byId("cpty_bank_country_img").set("disabled",true);m.toggleFieldsReadOnly(["cpty_bank_name","cpty_bank_address_line_1","cpty_bank_address_line_2","cpty_bank_dom","cpty_bank_country"],true);if(dj.byId("cpty_bank_swift_bic_code")&&dj.byId("cpty_bank_swift_bic_code").get("value").length<11&&dj.byId("cpty_bank_swift_bic_code").get("value").length>0&&dj.byId("cpty_bank_swift_bic_code").get("value").length!==8){_3e.clear();}if(dj.byId("intermediary_flag")&&dj.byId("intermediary_flag").get("value")!=""){if(dj.byId("intermediary_flag").get("value")==="Y"){m.toggleRequired("intermediary_bank_swift_bic_code",true);m.toggleRequired("intermediary_bank_name",true);m.toggleRequired("intermediary_bank_address_line_1",true);m.toggleRequired("intermediary_bank_country",true);}else{if(dj.byId("intermediary_flag").get("value")==="N"){m.toggleRequired("intermediary_bank_swift_bic_code",false);m.toggleRequired("intermediary_bank_name",false);m.toggleRequired("intermediary_bank_country",false);m.toggleRequired("intermediary_bank_address_line_1",false);}}}}});m.connect("intermediary_bank_swift_bic_code","onChange",_77);m.connect("intermediary_bank_swift_bic_code","onBlur",function(){var _fd=dj.byId("intermediary_bank_country_img");var _fe=dj.byId("intermediary_bank_swift_bic_code");if(dj.byId("intermediary_bank_swift_bic_code")&&(dj.byId("intermediary_bank_swift_bic_code").get("value").length===11||dj.byId("intermediary_bank_swift_bic_code").get("value").length===8)){_d3();}if(dj.byId("intermediary_bank_swift_bic_code").get("value").length===0){m.toggleFieldsReadOnly(["intermediary_bank_swift_bic_code","intermediary_bank_name","intermediary_bank_address_line_1","intermediary_bank_address_line_2","intermediary_bank_dom","intermediary_bank_country"],false);_3d.clear();}else{if((dj.byId("intermediary_bank_name").get("value")!==""||dj.byId("intermediary_bank_address_line_1").get("value")!==""||dj.byId("intermediary_bank_country").get("value")!=="")){m.toggleFieldsReadOnly(["intermediary_bank_name","intermediary_bank_address_line_1","intermediary_bank_address_line_2","intermediary_bank_dom","intermediary_bank_country"],true);}}if(_fd){if((dj.byId("intermediary_bank_swift_bic_code").get("value").length!==0&&_5)){if(dj.byId("intermediary_bank_country").get("value")!==""){_fd.set("disabled",true);}}else{_fd.set("disabled",false);}}});m.connect("branch_address_flag","onChange",function(){_61(this.get("checked"));});m.connect("ft_cur_code","onChange",function(){m._validateCurrencyCode(dj.byId("sub_product_code"),dj.byId("ft_cur_code"));});m.connect("beneficiary_bank_branch_address_line_1","onChange",function(){if(this.get("value")!==""){if(!dj.byId("branch_address_flag").get("checked")){dj.byId("branch_address_flag").set("checked",true);}}if(m._config.isBeneficiaryAccountsPopulated){if(this.get("value")===""){dj.byId("branch_address_flag").set("checked",false);}}});m.connect("pre_approved_status","onChange",function(){_65();if(dj.byId("pre_approved_status").get("value")==="N"){if(dj.byId("bank_img")){dj.byId("bank_img").set("disabled",false);}if(dj.byId("bank_iso_img")){dj.byId("bank_iso_img").set("disabled",true);}if(dj.byId("currency")){dj.byId("currency").set("disabled",false);}if(dj.byId("cpty_bank_country_img")){if(dj.byId("cpty_bank_swift_bic_code").get("value").length===0){dj.byId("cpty_bank_country_img").set("disabled",false);}else{dj.byId("cpty_bank_country_img").set("disabled",true);}}}});m.connect("intermediary_bank_swift_bic_code","onBlur",function(){if(dj.byId("intermediary_bank_swift_bic_code").get("value").length!==0&&(_5||(dj.byId("has_intermediary")&&dj.byId("has_intermediary").get("value")=="true"))){dj.byId("intermediary_bank_country_img").set("disabled",true);dj.byId("inter_bank_iso_img").set("disabled",true);}else{dj.byId("intermediary_bank_country_img").set("disabled",false);dj.byId("inter_bank_iso_img").set("disabled",false);}});m.connect("entity","onChange",function(){if(!misys._config.isMultiBank){m.setApplicantReference();}_4=true;dj.byId("applicant_act_name").set("value","");if(dj.byId("recurring_flag")){dj.byId("recurring_flag").set("checked",false);}if(!misys._config.isMultiBank){m.setApplicantReference();}});m.connect("customer_bank","onChange",function(){m.handleMultiBankRecurring(_3);_3=false;});if(dj.byId("bulk_ref_id")&&dj.byId("bulk_ref_id").get("value")!==""&&dj.byId("issuing_bank_abbv_name")&&dj.byId("issuing_bank_abbv_name").get("value")!==""){m.initializeFX(dj.byId("sub_product_code").get("value"),dj.byId("issuing_bank_abbv_name").get("value"));if(dj.byId("applicant_act_cur_code")&&dj.byId("applicant_act_cur_code").get("value")!==""&&dj.byId("ft_cur_code")&&dj.byId("ft_cur_code").get("value")!==""&&dj.byId("applicant_act_cur_code").get("value")!==dj.byId("ft_cur_code").get("value")&&!isNaN(dj.byId("ft_amt").get("value"))){m.onloadFXActions();}else{m.defaultBindTheFXTypes();}_38();}else{m.connect("customer_bank","onChange",_81);}m.connect("applicant_act_name","onChange",function(){if(dj.byId("customer_bank")&&dj.byId("applicant_act_name")&&dj.byId("applicant_act_name").get("value")!==""){dj.byId("customer_bank").set("value",m._config.customerBankName);}_8b();});m.connect("clear_img","onClick",function(){_44();if(dj.byId("notify_beneficiary_email")){dj.byId("notify_beneficiary").set("checked",false);dj.byId("notify_beneficiary_choice_1").set("checked",false);dj.byId("notify_beneficiary_choice_2").set("checked",false);dj.byId("notify_beneficiary_choice_1").set("disabled",true);dj.byId("notify_beneficiary_choice_2").set("disabled",true);dj.byId("notify_beneficiary_email").set("value","");dj.byId("notify_beneficiary_email").set("disabled",true);dj.byId("bene_email_1").set("value","");dj.byId("bene_email_2").set("value","");}_5f();});m.connect("iss_date","onChange",function(){var _ff=this.get("value");if(dj.byId("request_date")){if(dj.byId("request_date").get("value")===null||m.compareDateFields(dj.byId("request_date"),this)){dj.byId("request_date").set("value",_ff);}}});m.connect("applicant_act_pab","onChange",_89);m.bindRecurringFields();m.connect("ft_cur_code","onBlur",function(){m.setCurrency(this,["ft_amt"]);});m.connect("ft_cur_code","onChange",function(){var _100=dj.byId("currency_res").get("value");if(_100==="true"){_28();}});var _101=dj.byId("sub_product_code").get("value");if(dj.byId("issuing_bank_abbv_name")&&dj.byId("issuing_bank_abbv_name").get("value")!==""&&m._config.fxParamData&&m._config.fxParamData[_101][dj.byId("issuing_bank_abbv_name").get("value")].isFXEnabled==="Y"){m.connect("ft_cur_code","onBlur",function(){m.setCurrency(this,["ft_amt"]);if(dj.byId("ft_cur_code").get("value")!==""&&!isNaN(dj.byId("ft_amt").get("value"))){m.fireFXAction();}else{m.defaultBindTheFXTypes();}});m.connect("ft_cur_code","onChange",function(){m.setCurrency(this,["ft_amt"]);if(dj.byId("ft_cur_code").get("value")!==""&&!isNaN(dj.byId("ft_amt").get("value"))){m.fireFXAction();}else{m.defaultBindTheFXTypes();}});m.connect("ft_amt","onBlur",function(){m.setTnxAmt(this.get("value"));var _102="";if(dj.byId("ft_cur_code")){_102=dj.byId("ft_cur_code").get("value");}if(!isNaN(dj.byId("ft_amt").get("value"))&&_102!==""){m.fireFXAction();}else{m.defaultBindTheFXTypes();}});}else{if(d.byId(_9)){d.style(_9,"display","none");}}if(dijit.byId("ft_cur_code")&&dijit.byId("ft_amt")){misys.setCurrency(dijit.byId("ft_cur_code"),["ft_amt"]);}m.connect("ft_amt","onChange",function(){var _103=dj.byId("gpp_fee_config_flag")?dj.byId("gpp_fee_config_flag").get("value"):"false";var _104=dj.byId("gpp_fee_config_amt_cur_code")?dj.byId("gpp_fee_config_amt_cur_code").get("value"):"",_105=dj.byId("gpp_fee_config_amt_val")?dj.byId("gpp_fee_config_amt_val").get("value"):"";if(_103==="true"){if(dj.byId("payment_fee_details")){dj.byId("payment_fee_details").set("value","");}if(dj.byId("response_status")){dj.byId("response_status").set("value","");}if(dj.byId("is_view_fees_btn")){dj.byId("is_view_fees_btn").set("value","false");}document.getElementById("ft_fee_details_div").style.display="none";m.hideAllDisclaimerMessages();if(!(dj.byId("recurring_payment_enabled"))||(dj.byId("recurring_payment_enabled")&&dj.byId("recurring_payment_enabled").get("checked")===false)){dj.byId("add_fee_details_button").set("disabled",false);document.getElementById("FEE_DETAILS_CONFIRMATION_DISCLAIMER").style.display="block";}else{if((dj.byId("recurring_payment_enabled")&&dj.byId("recurring_payment_enabled").get("checked")===true)){document.getElementById("NO_FEES_FOR_RECCURING_PAYMENT").style.display="block";}}}});m.connect("ft_cur_code","onChange",function(){var _106=dj.byId("gpp_fee_config_flag")?dj.byId("gpp_fee_config_flag").get("value"):"false";var _107=dj.byId("gpp_fee_config_amt_cur_code")?dj.byId("gpp_fee_config_amt_cur_code").get("value"):"",_108=dj.byId("gpp_fee_config_amt_val")?dj.byId("gpp_fee_config_amt_val").get("value"):"";if(_106==="true"){if(dj.byId("payment_fee_details")){dj.byId("payment_fee_details").set("value","");}if(dj.byId("response_status")){dj.byId("response_status").set("value","");}if(dj.byId("is_view_fees_btn")){dj.byId("is_view_fees_btn").set("value","false");}document.getElementById("ft_fee_details_div").style.display="none";document.getElementById("fee_agent_details_div").style.display="none";document.getElementById("grand_total_fee_details").style.display="none";m.hideAllDisclaimerMessages();if(!(dj.byId("recurring_payment_enabled"))||(dj.byId("recurring_payment_enabled")&&dj.byId("recurring_payment_enabled").get("checked")===false)){dj.byId("add_fee_details_button").set("disabled",false);document.getElementById("FEE_DETAILS_CONFIRMATION_DISCLAIMER").style.display="block";}else{if((dj.byId("recurring_payment_enabled")&&dj.byId("recurring_payment_enabled").get("checked")===true)){document.getElementById("NO_FEES_FOR_RECCURING_PAYMENT").style.display="block";}}}});m.connect("charge_option","onChange",function(){var _109=dj.byId("gpp_fee_config_flag")?dj.byId("gpp_fee_config_flag").get("value"):"false";var _10a=dj.byId("gpp_fee_config_amt_cur_code")?dj.byId("gpp_fee_config_amt_cur_code").get("value"):"",_10b=dj.byId("gpp_fee_config_amt_val")?dj.byId("gpp_fee_config_amt_val").get("value"):"";if(_109==="true"){if(dj.byId("payment_fee_details")){dj.byId("payment_fee_details").set("value","");}if(dj.byId("response_status")){dj.byId("response_status").set("value","");}if(dj.byId("is_view_fees_btn")){dj.byId("is_view_fees_btn").set("value","false");}document.getElementById("ft_fee_details_div").style.display="none";m.hideAllDisclaimerMessages();if(!(dj.byId("recurring_payment_enabled"))||(dj.byId("recurring_payment_enabled")&&dj.byId("recurring_payment_enabled").get("checked")===false)){dj.byId("add_fee_details_button").set("disabled",false);document.getElementById("FEE_DETAILS_CONFIRMATION_DISCLAIMER").style.display="block";}else{if((dj.byId("recurring_payment_enabled")&&dj.byId("recurring_payment_enabled").get("checked")===true)){document.getElementById("NO_FEES_FOR_RECCURING_PAYMENT").style.display="block";}}}});},onFormLoad:function(){m.setCurrency(dj.byId("ft_cur_code"),["ft_amt"]);if(misys._config.nickname==="true"&&dj.byId("applicant_act_nickname")&&dj.byId("applicant_act_nickname").get("value")!==""&&d.byId("nickname")){m.animate("fadeIn",d.byId("nickname"));d.style("nickname","display","inline");d.byId("nickname").innerHTML=dj.byId("applicant_act_nickname").get("value");}else{m.animate("fadeOut",d.byId("applicant_act_nickname_row"));}var _10c=dijit.byId("mode")?dijit.byId("mode").get("value"):"";if(_10c==="DRAFT"&&dj.byId("beneficiary_name")&&dj.byId("applicant_act_pab")&&dj.byId("applicant_act_pab").get("value")==="Y"&&dj.byId("beneficiary_name").value!==""){if(!m.validateBeneficiaryStatus()){dj.byId("beneficiary_name").set("state","Error");dj.showTooltip(m.getLocalization("beneficiaryIsInactive"),dj.byId("beneficiary_name").domNode,0);}}if(d.byId("recurring_on_div")){d.style("recurring_on_div","display","none");}if(dj.byId("notify_beneficiary")&&dj.byId("notify_beneficiary").get("checked")&&(_10c==="DRAFT")){var _10d=dj.byId("notify_beneficiary").get("checked");m.toggleRequired("notify_beneficiary_email",_10d);m.toggleRequired("notify_beneficiary_choice_1",_10d);m.toggleRequired("notify_beneficiary_choice_2",_10d);if(dj.byId("notify_beneficiary_choice_1").get("checked")){var _10e=d.byId("notify_beneficiary_email_node");var _10f=d.byId("label_notify_beneficiary_choice_2");_6f();if(dj.byId("notify_beneficiary_choice_2").get("checked")){d.place(_10e,_10f,"after");}}}if(dj.byId("customer_bank")&&dj.byId("customer_bank").get("value")!==""&&misys&&misys._config&&misys._config.businessDateForBank&&misys._config.businessDateForBank[dj.byId("customer_bank").get("value")]&&misys._config.businessDateForBank[dj.byId("customer_bank").get("value")][0]&&misys._config.businessDateForBank[dj.byId("customer_bank").get("value")][0].value!==""){var date=misys._config.businessDateForBank[dj.byId("customer_bank").get("value")][0].value;var _110=date.substring(0,4);var _111=date.substring(5,7);var _112=date.substring(8,10);date=_112+"/"+_111+"/"+_110;var _113=new Date(_110,_111-1,_112);if(dj.byId("option_for_tnx")&&dj.byId("option_for_tnx").get("value")==="SCRATCH"){dj.byId("appl_date").set("value",date);document.getElementById("appl_date_view_row").childNodes[1].innerHTML=date;if(dj.byId("appl_date_hidden")){dj.byId("appl_date_hidden").set("value",_113);}}if(dj.byId("todays_date")){dj.byId("todays_date").set("value",_113);}}if(dj.byId("notify_beneficiary").get("checked")&&dj.byId("notify_beneficiary_choice_1").get("checked")&&(dijit.byId("mode").value==="DRAFT")){var _114=d.byId("notify_beneficiary_email_node");var _115=d.byId("label_notify_beneficiary_choice_2");_6f();if(dj.byId("notify_beneficiary_choice_2").get("checked")){d.place(_114,_115,"after");}}m.checkBeneficiaryNicknameOnFormLoad();if(misys._config.isMultiBank){m.populateCustomerBanks(true);var _116=dj.byId("entity");var _117=dj.byId("customer_bank");if(!_116&&_117){_117.set("disabled",false);_117.set("required",true);}var _118=dj.byId("customer_bank_hidden");if(_117&&_118){_117.set("value",_118.get("value"));}if(d.byId("server_message")&&d.byId("server_message").innerHTML!==""||dijit.byId("option_for_tnx")&&(dijit.byId("option_for_tnx").get("value")==="REMITTANCE_CORP"||dijit.byId("option_for_tnx").get("value")==="REMITTANCE_FI"||dijit.byId("option_for_tnx").get("value")==="TEMPLATE")){_3=true;}if(dj.byId("issuing_bank_abbv_name")&&dj.byId("issuing_bank_abbv_name").get("value")!==""){_2=true;_4=true;_117.set("value",dj.byId("issuing_bank_abbv_name").get("value"));_118.set("value",dj.byId("issuing_bank_abbv_name").get("value"));}if(misys._config.perBankRecurringAllowed&&dojo.byId("recurring_payment_checkbox")&&dj.byId("customer_bank")){if(dj.byId("customer_bank").get("value")===""){m.animate("fadeOut",dojo.byId("recurring_payment_checkbox"));}else{if(dj.byId("customer_bank").get("value")!==""&&misys._config.perBankRecurringAllowed[dj.byId("customer_bank").get("value")]!=="Y"){m.animate("fadeOut",dojo.byId("recurring_payment_checkbox"));}}}if(_116&&_116.get("value")===""&&_117){_117.set("disabled",true);_117.set("required",false);}if(dijit.byId("recurring_frequency")&&dijit.byId("customer_bank").get("value")!==""&&misys._config.perBankFrequency){var _119=misys._config.perBankFrequency[dijit.byId("customer_bank").get("value")];if(_119){dijit.byId("recurring_frequency").store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_119}});dijit.byId("recurring_frequency").fetchProperties={sort:[{attribute:"name"}]};}dijit.byId("recurring_frequency").set("value",dijit.byId("recurring_frequency")._lastQuery);}}else{m.setApplicantReference();}d.forEach(d.query(".rtgsDisclaimer"),function(node){var _11a=dj.byId("sub_product_code").get("value")+"_"+m.getLocalization("disclaimer");if(dj.byId("sub_product_code")&&(node.id==_11a)){m.animate("fadeIn",_11a);}});if((dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")!=="")||(dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")!==null)){if(dj.byId("beneficiary_country_btn_img")){dj.byId("beneficiary_country_btn_img").set("disabled",true);}}_59();_5f();if(dj.byId("branch_address_flag")){if(dj.byId("cpty_bank_swift_bic_code")&&dj.byId("cpty_bank_swift_bic_code").get("value").length===0){dj.byId("branch_address_flag").set("checked",false);dj.byId("branch_address_flag").set("readOnly",true);}else{dj.byId("branch_address_flag").set("readOnly",false);if(dj.byId("branch_address_flag").get("checked")){m.toggleRequired("beneficiary_bank_branch_address_line_1",true);}else{m.toggleRequired("beneficiary_bank_branch_address_line_1",false);}}}_65();m.initForm();dj.byId("payment_details_to_beneficiary").set("required",true);if(document.getElementById("mandatorySpan")==undefined){var _11b=dojo.create("span",{"id":"mandatorySpan","class":"required-field-symbol","innerHTML":"*"});d.parser.parse(_11b);dojo.place(_11b,dojo.byId("payment_details_to_beneficiary"),"before");}if(dj.byId("recurring_payment_enabled")&&dj.byId("recurring_payment_enabled").get("checked")){dj.byId("recurring_flag").set("checked",true);m._config.clearOnSecondCall=true;m.showSavedRecurringDetails(false);d.style("recurring_payment_div","display","block");}else{if(d.byId("recurring_payment_div")){d.style("recurring_payment_div","display","none");}m.hasRecurringPayment();m.showSavedRecurringDetails(false);}m.toggleSections();m.showRecurring();if(!m._config.isMultiBank&&dj.byId("issuing_bank_abbv_name")&&dj.byId("issuing_bank_abbv_name").get("value")!==""&&m._config.fxParamData&&dj.byId("sub_product_code")&&dj.byId("sub_product_code").get("value")!==""&&dj.byId("sub_product_code").get("value")!=="IBG"){m.initializeFX(dj.byId("sub_product_code").get("value"),dj.byId("issuing_bank_abbv_name").get("value"));if(dj.byId("applicant_act_cur_code")&&dj.byId("applicant_act_cur_code").get("value")!==""&&dj.byId("ft_cur_code")&&dj.byId("ft_cur_code").get("value")!==""&&dj.byId("applicant_act_cur_code").get("value")!==dj.byId("ft_cur_code").get("value")&&dj.byId("ft_amt")&&!isNaN(dj.byId("ft_amt").get("value"))){m.onloadFXActions();}else{m.defaultBindTheFXTypes();}}else{m.animate("fadeOut",_1);}if(d.byId(_9)){if(dj.byId("bulk_ref_id").get("value")!==""&&dj.byId("ft_cur_code").get("value")!==""&&!isNaN(dj.byId("ft_amt").get("value"))){m.initializeFX(dj.byId("sub_product_code").get("value"),dj.byId("issuing_bank_abbv_name").get("value"));m.fireFXAction();}else{if((dj.byId("fx_exchange_rate_cur_code")&&dj.byId("fx_exchange_rate_cur_code").get("value")!=="")||(dj.byId("fx_total_utilise_cur_code")&&dj.byId("fx_total_utilise_cur_code").get("value")!=="")){m.animate("wipeIn",d.byId(_9));}else{d.style(_9,"display","none");}}}if((dj.byId("iss_date")&&dj.byId("iss_date").get("value")!=="")&&(dj.byId("iss_date").get("value")!==null)){m.validateTransferDateWithCurrentDate(dj.byId("iss_date"));}_7c();var _11c=dj.byId("gpp_fee_config_flag")?dj.byId("gpp_fee_config_flag").get("value"):"false";if(dj.byId("ft_amt")&&dj.byId("ft_amt").get("value")!=""){var _11d=(dojo.number.parse(dj.byId("ft_amt").get("value"))>0)?dojo.number.parse(dj.byId("ft_amt").get("value")):0;}if((dj.byId("recurring_payment_enabled")&&dj.byId("recurring_payment_enabled").get("checked")==true)&&_11c==="true"){document.getElementById("ftFeeFetails").style.display="block";document.getElementById("ft-fee-details-template").style.display="block";document.getElementById("NO_FEES_FOR_RECCURING_PAYMENT").style.display="block";m.hideFeeDetailsForError();}else{if(_11c==="true"){document.getElementById("ftFeeFetails").style.display="block";document.getElementById("ft-fee-details-template").style.display="block";document.getElementById("FEE_DETAILS_CONFIRMATION_DISCLAIMER").style.display="block";if(_10c==="DRAFT"&&_11d>0){if(dj.byId("is_view_fees_btn")){dj.byId("is_view_fees_btn").set("value","false");}}}}},initForm:function(){if(dj.byId("charge_option")&&dj.byId("charge_option").get("value")===""){dj.byId("charge_option").set("value","SHA");}dj.byId("sub_product_code").set("value","RTGS");var _11e=dj.byId("applicant_act_pab").get("value");if(d.byId("clear_img")){if(_11e=="Y"&&d.style(d.byId("clear_img"),"display")!=="none"){m.animate("wipeOut",d.byId("clear_img"));dj.byId("clear_img").setAttribute("disabled",true);}}if(_11e==="Y"||(dj.byId("pre_approved_status")&&dj.byId("pre_approved_status").get("value")==="Y")){_3b.toggleReadonly(true);if(dj.byId("cpty_bank_country_img")){dj.byId("cpty_bank_country_img").set("disabled",true);}if(dj.byId("bank_iso_img")){dj.byId("bank_iso_img").set("disabled",true);}m.toggleFieldsReadOnly(["branch_address_flag","beneficiary_bank_branch_address_line_1","beneficiary_bank_branch_address_line_2","beneficiary_bank_branch_dom"],true);if(dj.byId("intermediary_bank_swift_bic_code").get("value").length!==0){dj.byId("inter_bank_iso_img").set("disabled",true);}}else{if((dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")==="")||(dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")===null)){_3b.toggleReadonly(false);if(dj.byId("cpty_bank_country_img")){dj.byId("cpty_bank_country_img").set("disabled",false);}if(dj.byId("bank_iso_img")){dj.byId("bank_iso_img").set("disabled",false);}if(dj.byId("inter_bank_iso_img")){dj.byId("inter_bank_iso_img").set("disabled",false);}if(dj.byId("beneficiary_country_btn_img")){dj.byId("beneficiary_country_btn_img").set("disabled",false);}m.toggleFieldsReadOnly(["branch_address_flag","beneficiary_bank_branch_address_line_1","beneficiary_bank_branch_address_line_2","beneficiary_bank_branch_dom"],false);}else{_3b.toggleReadonly(true);if(dj.byId("cpty_bank_country_img")){dj.byId("cpty_bank_country_img").set("disabled",true);}if(dj.byId("bank_iso_img")){dj.byId("bank_iso_img").set("disabled",true);}m.toggleFieldsReadOnly(["branch_address_flag","beneficiary_bank_branch_address_line_1","beneficiary_bank_branch_address_line_2","beneficiary_bank_branch_dom"],true);if(dj.byId("intermediary_bank_swift_bic_code").get("value").length!==0){dj.byId("inter_bank_iso_img").set("disabled",true);}}}if(_cb()){m.toggleFieldsReadOnly(this.fields,true);}else{m.toggleFieldsReadOnly(this.fields,false);}if(dj.byId("intermediary_bank_swift_bic_code").get("value").length!==0&&dj.byId("has_intermediary")){if(dj.byId("has_intermediary").get("value")==="true"){dj.byId("inter_bank_iso_img").set("disabled",true);}}},setCustomConfirmMessage:function(){var _11f=dijit.byId("mode")?dijit.byId("mode").get("value"):"";var _120=dj.byId("sub_product_code")?dj.byId("sub_product_code").get("value"):"";if(_11f==="DRAFT"&&_120==="RTGS"){var _121;var _122=dj.byId("gpp_fee_config_flag")?dj.byId("gpp_fee_config_flag").get("value"):"false";if(dj.byId("response_status")){_121=dj.byId("response_status").get("value");}if(_122==="true"&&(_121!="200")&&_121!=""){var _123=m.getLocalization("getFeeErrorResponse");m._config.globalSubmitConfirmationMsg=_123;}else{var _124=m.getLocalization("submitTransactionConfirmation");m._config.globalSubmitConfirmationMsg=_124;}}},beforeSaveValidations:function(){if(dj.byId("payment_fee_details")){dj.byId("payment_fee_details").set("value","");}var _125=dj.byId("entity");if(_125&&_125.get("value")==""){return false;}else{return true;}},beforeSubmitValidations:function(){var _126=dijit.byId("mode")?dijit.byId("mode").get("value"):"";var _127="";if(_126==="DRAFT"&&dj.byId("applicant_act_pab")&&dj.byId("applicant_act_pab").get("value")==="Y"&&!m.validateBeneficiaryStatus()){m._config.onSubmitErrorMsg=m.getLocalization("beneficiaryIsInactive");dj.byId("beneficiary_name").set("state","Error");return false;}var _128=dj.byId("ft_cur_code");var val=m._validateCurrencyCode(dj.byId("sub_product_code"),dj.byId("ft_cur_code"));if(!val){_127=m.getLocalization("invalidCurrencyConfigured",[dj.byId("ft_cur_code").get("value")]);_128.set("state","Error");dj.showTooltip(_127,dj.byId("ft_cur_code").domNode,0);return false;}if(dj.byId("cpty_bank_swift_bic_code")&&dj.byId("cpty_bank_swift_bic_code").get("value")!==""&&!_bd()){return false;}if(dj.byId("intermediary_flag")&&dj.byId("intermediary_flag").get("value")!=""&&dj.byId("intermediary_flag").get("value")==="Y"){if(dj.byId("intermediary_bank_swift_bic_code").length===0||dj.byId("intermediary_bank_name").length===0||dj.byId("intermediary_bank_country").length===0){m.toggleRequired("intermediary_bank_swift_bic_code",true);m.toggleRequired("intermediary_bank_name",true);m.toggleRequired("intermediary_bank_address_line_1",true);m.toggleRequired("intermediary_bank_country",true);}}if(dj.byId("intermediary_bank_swift_bic_code")&&dj.byId("intermediary_bank_swift_bic_code").get("value")!==""&&!_d3()){return false;}if(dj.byId("intermediary_bank_swift_bic_code")&&dj.byId("intermediary_bank_swift_bic_code").get("value")!==""&&!_77()){return false;}if(dj.byId("payment_details_to_beneficiary")&&dj.byId("payment_details_to_beneficiary").get("value")!==""&&!_a5(dj.byId("payment_details_to_beneficiary"))){return false;}if(dijit.byId("payment_details_to_beneficiary")){if(dijit.byId("payment_details_to_beneficiary").get("required")){var _129=dijit.byId("payment_details_to_beneficiary").get("value").trim();if(_129.length===0){dj.byId("payment_details_to_beneficiary").set("value","");dj.byId("payment_details_to_beneficiary").set("state","Error");return false;}}}if(dj.byId("ft_amt")){if(!m.validateAmount((dj.byId("ft_amt"))?dj.byId("ft_amt"):0)){m._config.onSubmitErrorMsg=m.getLocalization("amountcannotzero");dj.byId("ft_amt").set("value","");return false;}}var _12a=0,_12b="";if(dj.byId("to_currency_amount")){_12a=dj.byId("to_currency_amount").get("value");}if(dj.byId("to_currency")){_12b=dj.byId("to_currency").get("value");}var _12c=dj.byId("gpp_fee_config_flag")?dj.byId("gpp_fee_config_flag").get("value"):"false";var _12d=dj.byId("gpp_fee_config_amt_cur_code")?dj.byId("gpp_fee_config_amt_cur_code").get("value"):"",_12e=dj.byId("gpp_fee_config_amt_val")?dj.byId("gpp_fee_config_amt_val").get("value"):"";if(_12c==="true"&&((((_12d===dj.byId("ft_cur_code").get("value"))||_12d==="*")&&(_12e>=dj.byId("ft_amt").get("value")))||((_12d===_12b)&&((dojo.number.parse(_12e))>=_12a)))){if(dj.byId("payment_fee_details")){dj.byId("payment_fee_details").set("value","");}}if((dj.byId("recurring_flag")&&dj.byId("recurring_flag").get("checked")===false)&&_12c==="true"){if(dj.byId("is_view_fees_btn")&&dj.byId("is_view_fees_btn").get("value")!="true"){if(((_12d===dj.byId("ft_cur_code").get("value"))||_12d==="*")||(_12d!=dj.byId("ft_cur_code").get("value"))){if((dj.byId("payment_fee_details"))&&dj.byId("payment_fee_details").get("value")===""){m._config.onSubmitErrorMsg=m.getLocalization("feeChargesAreNotAccurate");return false;}}}}if(dj.byId("notify_beneficiary_email")&&dj.byId("notify_beneficiary_email").get("value")!==""){var _12f=dj.byId("notify_beneficiary_email").get("value");var size=_12f.split(";");if(size.length>10){m._config.onSubmitErrorMsg=m.getLocalization("checkEmailId");dj.byId("notify_beneficiary_email").set("value","");return false;}}if(!m.isRecurringDetailsValidForSubmit()){return false;}if(dj.byId("issuing_bank_abbv_name")&&dj.byId("issuing_bank_abbv_name").get("value")!==""&&m._config.fxParamData&&m._config.fxParamData[dj.byId("sub_product_code").get("value")][dj.byId("issuing_bank_abbv_name").get("value")].isFXEnabled==="Y"){if(!m.fxBeforeSubmitValidation()){return false;}if(!_2f()){return false;}}if(dj.byId("payment_details_to_beneficiary")){var _130=dj.byId("payment_details_to_beneficiary");if(!_b1(_130)){return false;}}var _131=dj.byId("applicant_act_no").get("value");var _132=m.checkAccountStatus(_131);if(!_132){m._config.onSubmitErrorMsg=misys.getLocalization("accountStatusError");return false;}if(!dj.byId("bulk_ref_id").get("value")){var _133=false;if(_126==="DRAFT"){if(dj.byId("recurring_payment_enabled")&&dj.byId("recurring_payment_enabled").get("checked")){_133=m.validateHolidaysAndCutOffTime("issuing_bank_abbv_name","sub_product_code",_126,["Start Date"],["recurring_start_date"],"entity","ft_cur_code","ft_amt");}else{_133=m.validateHolidaysAndCutOffTime("issuing_bank_abbv_name","sub_product_code",_126,["Processing Date"],["iss_date"],"entity","ft_cur_code","ft_amt");}}else{if(_126==="UNSIGNED"){if(dj.byId("recurring_payment_enabled")&&dj.byId("recurring_payment_enabled").get("value")==="Y"){_133=m.validateHolidaysAndCutOffTime("issuing_bank_abbv_name","sub_product_code_unsigned",_126,["Start Date"],["recurring_start_date_unsigned"],"display_entity_unsigned","ft_cur_code_unsigned","ft_amt_unsigned");}else{_133=m.validateHolidaysAndCutOffTime("issuing_bank_abbv_name","sub_product_code_unsigned",_126,["Processing Date"],["iss_date_unsigned"],"display_entity_unsigned","ft_cur_code_unsigned","ft_amt_unsigned");}}else{m._config.onSubmitErrorMsg=m.getLocalization("technicalErrorWhileValidatingBusinessDays");_133=false;}}if(_133){m._config.holidayCutOffEnabled=false;}return _133;}else{return true;}},showProductBasedListOfBanksforRTGS:function(){misys.showSearchDialog("bankBicCodeRTGS","[ 'cpty_bank_swift_bic_code', 'cpty_bank_name', '', 'cpty_bank_address_line_1', 'cpty_bank_address_line_2', 'cpty_bank_dom', 'cpty_bank_country', '','intermediary_flag']",{swiftcode:false,bankcode:false},"","",_a,m.getLocalization("ListOfBanksTitleMessage"),"","",true);},showIntermediaryBicCodesforRTGS:function(){misys.showSearchDialog("intermediaryBicCodeRTGS","[ 'intermediary_bank_swift_bic_code', 'intermediary_bank_name', 'intermediary_bank_address_line_1', 'intermediary_bank_address_line_2', 'intermediary_bank_dom', 'intermediary_bank_country']",{swiftcode:false,bankcode:false},"","",_a,m.getLocalization("ListOfBanksTitleMessage"),"","",true);}});})(dojo,dijit,misys);dojo.require("misys.client.binding.cash.create_ft_rtgs_client");}