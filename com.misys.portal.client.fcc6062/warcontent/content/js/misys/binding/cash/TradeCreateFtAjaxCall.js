/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.cash.TradeCreateFtAjaxCall"]){dojo._hasResource["misys.binding.cash.TradeCreateFtAjaxCall"]=true;dojo.provide("misys.binding.cash.TradeCreateFtAjaxCall");_fncAjaxRequestFT=function(){dijit.byId("loadingDialog").show();m.xhrPost({url:misys.getServletURL("/screen/AjaxScreen/action/FTProcessingAction"),handleAs:"json",content:{operation:"REQUEST",ft_type:fncGetGlobalVariable("ft_type"),applicant_reference:fncGetGlobalVariable("applicant_reference"),ordering_account:fncGetGlobalVariable("ordering_account"),ordering_currency:fncGetGlobalVariable("ordering_currency"),transfer_account:fncGetGlobalVariable("transfer_account"),transfer_amount:fncGetGlobalVariable("transfer_amount"),transfer_currency:fncGetGlobalVariable("transfer_currency"),beneficiary_account:fncGetGlobalVariable("beneficiary_account"),beneficiary_name:fncGetGlobalVariable("beneficiary_name"),beneficiary_address:fncGetGlobalVariable("beneficiary_address"),beneficiary_city:fncGetGlobalVariable("beneficiary_city"),beneficiary_country:fncGetGlobalVariable("beneficiary_country"),beneficiary_bank:fncGetGlobalVariable("beneficiary_bank"),beneficiary_bank_routing_number:fncGetGlobalVariable("beneficiary_bank_routing_number"),beneficiary_bank_branch:fncGetGlobalVariable("beneficiary_bank_branch"),beneficiary_bank_address:fncGetGlobalVariable("beneficiary_bank_address"),beneficiary_bank_city:fncGetGlobalVariable("beneficiary_bank_city"),beneficiary_bank_country:fncGetGlobalVariable("beneficiary_bank_country"),beneficiary_bank_account:fncGetGlobalVariable("beneficiary_bank_account"),ft_amount:fncGetGlobalVariable("ft_amount"),ft_cur_code:fncGetGlobalVariable("ft_cur_code"),execution_date:fncGetGlobalVariable("execution_date"),payment_currency:fncGetGlobalVariable("payment_currency"),payment_amount:fncGetGlobalVariable("payment_amount"),remarks:fncGetGlobalVariable("remarks"),fee_account:fncGetGlobalVariable("fee_account")},load:function(_1,_2){dijit.byId("loadingDialog").hide();var _3=_1.status;switch(_3){case 5:fncShowDealSummaryDialog(_1);break;case 1:fncShowDealSummaryDialog(_1);break;case 6:dijit.byId("bo_tnx_id").set("value",_1.boTnxId);dijit.byId("bo_ref_id").set("value",_1.bo_ref_id);misys.frequencyStore=_1.delay_frequency;misys.delayStore=_1.delay_timeout;_fncOpenDelayDialog(misys.frequencyStore,misys.delayStore);break;default:var _4=_1.error_names;_fncManageErrors(_4);break;}},customError:function(_5,_6){dijit.byId("loadingDialog").hide();console.error("[requestFTAjaxCall] Error on Ajax Call for Request Fund Transfer");_fncManageErrors();}});};_fncAjaxCancelFT=function(){dijit.byId("loadingDialog").show();m.xhrPost({url:misys.getServletURL("/screen/AjaxScreen/action/FTProcessingAction"),handleAs:"json",content:{operation:"REJECT",ft_type:fncGetGlobalVariable("ft_type"),applicant_reference:fncGetGlobalVariable("applicant_reference"),ordering_account:fncGetGlobalVariable("ordering_account"),ordering_currency:fncGetGlobalVariable("ordering_currency"),beneficiary_account:fncGetGlobalVariable("beneficiary_account"),beneficiary_name:fncGetGlobalVariable("beneficiary_name"),beneficiary_address:fncGetGlobalVariable("beneficiary_address"),beneficiary_city:fncGetGlobalVariable("beneficiary_city"),beneficiary_country:fncGetGlobalVariable("beneficiary_country"),beneficiary_bank:fncGetGlobalVariable("beneficiary_bank"),beneficiary_bank_routing_number:fncGetGlobalVariable("beneficiary_bank_routing_number"),beneficiary_bank_branch:fncGetGlobalVariable("beneficiary_bank_branch"),beneficiary_bank_address:fncGetGlobalVariable("beneficiary_bank_address"),beneficiary_bank_city:fncGetGlobalVariable("beneficiary_bank_city"),beneficiary_bank_country:fncGetGlobalVariable("beneficiary_bank_country"),beneficiary_bank_account:fncGetGlobalVariable("beneficiary_bank_account"),ft_amount:fncGetGlobalVariable("ft_amount"),ft_cur_code:fncGetGlobalVariable("ft_cur_code"),execution_date:fncGetGlobalVariable("execution_date"),remarks:fncGetGlobalVariable("remarks"),bo_ref_id:dijit.byId("bo_ref_id").get("value"),bo_tnx_id:dijit.byId("bo_tnx_id").get("value"),credit_account_name:dijit.byId("creditAccountName").get("value")},load:function(_7,_8){dijit.byId("loadingDialog").hide();var _9=_7.status;switch(_9){case 3:fncCloseDealSummaryDialog();misys.dialog.show("CUSTOM-NO-CANCEL",misys.getLocalization("confirmationRejectRequest"),misys.getLocalization("confirmationRejectTitle"));break;default:_fncManageErrors(_9);break;}},customError:function(_a,_b){console.error("[CancelFTAjaxCall] error canceling FT quote");dijit.byId("loadingDialog").hide();fncCloseDealSummaryDialog();_fncManageErrors();}});};_fncPerformDelayRequest=function(_c,_d){if(_c>0){m.xhrPost({url:misys.getServletURL("/screen/AjaxScreen/action/FTProcessingAction"),handleAs:"json",content:{operation:"DELAY",ft_type:fncGetGlobalVariable("ft_type"),applicant_reference:fncGetGlobalVariable("applicant_reference"),bo_ref_id:dijit.byId("bo_ref_id").get("value"),bo_tnx_id:dijit.byId("bo_tnx_id").get("value"),ordering_account:fncGetGlobalVariable("ordering_account"),ordering_currency:fncGetGlobalVariable("ordering_currency"),transfer_account:fncGetGlobalVariable("transfer_account"),transfer_amount:fncGetGlobalVariable("transfer_amount"),transfer_currency:fncGetGlobalVariable("transfer_currency"),beneficiary_account:fncGetGlobalVariable("beneficiary_account"),beneficiary_name:fncGetGlobalVariable("beneficiary_name"),beneficiary_address:fncGetGlobalVariable("beneficiary_address"),beneficiary_city:fncGetGlobalVariable("beneficiary_city"),beneficiary_country:fncGetGlobalVariable("beneficiary_country"),beneficiary_bank:fncGetGlobalVariable("beneficiary_bank"),beneficiary_bank_routing_number:fncGetGlobalVariable("beneficiary_bank_routing_number"),beneficiary_bank_branch:fncGetGlobalVariable("beneficiary_bank_branch"),beneficiary_bank_address:fncGetGlobalVariable("beneficiary_bank_address"),beneficiary_bank_city:fncGetGlobalVariable("beneficiary_bank_city"),beneficiary_bank_country:fncGetGlobalVariable("beneficiary_bank_country"),beneficiary_bank_account:fncGetGlobalVariable("beneficiary_bank_account"),ft_amount:fncGetGlobalVariable("ft_amount"),ft_cur_code:fncGetGlobalVariable("ft_cur_code"),execution_date:fncGetGlobalVariable("execution_date"),payment_currency:fncGetGlobalVariable("payment_currency"),payment_amount:fncGetGlobalVariable("payment_amount"),remarks:fncGetGlobalVariable("remarks"),fee_account:fncGetGlobalVariable("fee_account")},load:function(_e,_f){var _10=_e.status;switch(_10){case 5:fncCloseDelayDialog();fncShowDealSummaryDialog(_e);break;case 6:_c--;misys.timer=setTimeout("_fncPerformDelayRequest('"+_c+"','"+_d+"')",(_d*1000));break;default:fncCloseDelayDialog();_fncManageErrors(_10,_e);break;}},customError:function(_11,_12){console.error("[TradeCreateFxBinding] error retrieving quote");fncCloseDelayDialog();_fncManageErrors("",_11);}});}else{_stopCountDown(misys.timer);_fncShowContinuationElement();}};_fncCancelDelayRequest=function(){dijit.byId("loadingDialog").show();m.xhrPost({url:misys.getServletURL("/screen/AjaxScreen/action/FTProcessingAction"),handleAs:"json",content:{operation:"CANCEL",ft_type:fncGetGlobalVariable("ft_type"),applicant_reference:fncGetGlobalVariable("applicant_reference"),ordering_account:fncGetGlobalVariable("ordering_account"),ordering_currency:fncGetGlobalVariable("ordering_currency"),beneficiary_account:fncGetGlobalVariable("beneficiary_account"),beneficiary_name:fncGetGlobalVariable("beneficiary_name"),beneficiary_address:fncGetGlobalVariable("beneficiary_address"),beneficiary_city:fncGetGlobalVariable("beneficiary_city"),beneficiary_country:fncGetGlobalVariable("beneficiary_country"),beneficiary_bank:fncGetGlobalVariable("beneficiary_bank"),beneficiary_bank_routing_number:fncGetGlobalVariable("beneficiary_bank_routing_number"),beneficiary_bank_branch:fncGetGlobalVariable("beneficiary_bank_branch"),beneficiary_bank_address:fncGetGlobalVariable("beneficiary_bank_address"),beneficiary_bank_city:fncGetGlobalVariable("beneficiary_bank_city"),beneficiary_bank_country:fncGetGlobalVariable("beneficiary_bank_country"),beneficiary_bank_account:fncGetGlobalVariable("beneficiary_bank_account"),ft_amount:fncGetGlobalVariable("ft_amount"),ft_cur_code:fncGetGlobalVariable("ft_cur_code"),execution_date:fncGetGlobalVariable("execution_date"),remarks:fncGetGlobalVariable("remarks"),bo_ref_id:dijit.byId("bo_ref_id").get("value"),bo_tnx_id:dijit.byId("bo_tnx_id").get("value"),credit_account_name:dijit.byId("creditAccountName").get("value")},load:function(_13,_14){dijit.byId("loadingDialog").hide();var _15=_13.status;switch(_15){case 3:fncCloseDealSummaryDialog();misys.dialog.show("CUSTOM-NO-CANCEL",misys.getLocalization("confirmationCancelRequest"),misys.getLocalization("confirmationCancelTitle"));break;default:_fncManageErrors(_15);break;}},customError:function(_16,_17){console.error("[CancelFTAjaxCall] error canceling FT quote");dijit.byId("loadingDialog").hide();fncCloseDealSummaryDialog();_fncManageErrors();}});};_fncManageErrors=function(_18,_19){var _1a="";for(var i=0,len=_18.length;i<len;i++){_1a+=misys.getLocalization(_18[i]);}misys.dialog.show("ERROR",_1a);fncPerformClear();};dojo.require("misys.client.binding.cash.TradeCreateFtAjaxCall_client");}