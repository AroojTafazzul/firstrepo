/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.cash.request.RequestAction"]){dojo._hasResource["misys.binding.cash.request.RequestAction"]=true;dojo.provide("misys.binding.cash.request.RequestAction");dojo.require("misys.binding.cash.request.Timer");misys.timer=null;misys.frequencyStore=null;misys.delayStore=null;fncPerformClearWithDialog=function(){misys.dialog.show("CONFIRMATION",misys.getLocalization("clearMessage"),"",fncPerformClear);};fncPerformCancelRequest=function(){misys.dialog.show("CONFIRMATION",misys.getLocalization("cancelRequest"),"",fncCancelRequest);};fncDisableLoadingDialogClosing=function(){misys.connect(dijit.byId("loadingDialog"),"onKeyPress",function(_1){if(_1.keyCode==dojo.keys.ESCAPE){dojo.stopEvent(_1);}});misys.connect(dijit.byId("delayDialog"),"onKeyPress",function(_2){if(_2.keyCode==dojo.keys.ESCAPE){dojo.stopEvent(_2);}});};fncAcceptRate=function(){dijit.byId("option").set("value","ACCEPT");misys.submit("SUBMIT");return false;};fncDoPerformRequest=function(){fncInitVar();_fncDisabledFields();dijit.byId("loadingDialog").show();_fncAjaxGetRate();};_fncEnableFields=function(){var _3=_fncGetEnabledFields();dojo.forEach(_3,function(id){var _4=dijit.byId(id);if(_4){misys.toggleRequired(_4,true);_4.set("disabled",false);}});};fncShowDetailField=function(){dijit.byId("buttonAcceptRequest").set("disabled",false);misys.animate("fadeIn",dojo.byId("trade-details"));};fncCheckFields=function(){doRealValidation=true;returnValue=true;dojo.query(".validate").forEach(function(_5){var _6=dijit.byId(_5.id);if(!_6.isValid()){if(doRealValidation){_6.validate();}returnValue=false;}});return returnValue;};fncCloseDelayDialog=function(){dijit.byId("delayDialog").hide();if(misys.timer!=null){_stopDelayTimer(misys.timer);}};fncCancelDelayRequest=function(){fncCloseDelayDialog();fncPerformClear();_fncCancelDelayRequest();};_fncCancelDelayRequest=function(){console.error("[INFO] Using default function _fncCancelDelayRequest. This method has to be overloaded.");};_fncDisabledFields=function(){var _7=_fncGetDisabledFields();dojo.forEach(_7,function(id){var _8=dijit.byId(id);if(_8){_8.set("disabled",true);}});};fncPerformClear=function(){var _9=_fncGetFieldsToClear();dojo.forEach(_9,function(id){if(dijit.byId(id)){dijit.byId(id).reset();}});var _a=_fncGetHiddenFieldsToClear();dojo.forEach(_a,function(id){if(dijit.byId(id)){dijit.byId(id).value="";}});var _b=_fncGetEnabledFields();dojo.forEach(_b,function(id){if(dijit.byId(id)){dijit.byId(id).set("disabled",false);}});var _c=_fncGetDateTermFieldsToClear();dojo.forEach(_c,function(id){if(dijit.byId(id+"_rb1")){dijit.byId(id+"_rb1").set("checked",true);fncEnableDateAccordingToContent((id+"_date"),(id+"_days"),(id+"_period"),(id+"_rb1"),(id+"_rb2"));}});if(!(misys.timer===undefined)&&!(misys.timer==null)){clearTimeout(misys.timer);}if(!(misys.countdown===undefined)&&!(misys.countdown==null)){clearTimeout(misys.countdown);misys.initCountdown=true;}misys.countdown=null;misys.countdownProgess=null;misys.timer=null;misys.frequencyStore=null;misys.delayStore=null;if(dojo.byId("edit")){misys.animate("fadeOut",dojo.byId("trade-details"));}};_fncGetFieldsToClear=function(){return [];};_fncGetHiddenFieldsToClear=function(){return [];};_fncGetEnabledFields=function(){return [];};_fncGetDateTermFieldsToClear=function(){return [];};_fncOpenDelayDialog=function(_d,_e){dojo.byId("continueMessage").style.display="none";dojo.style(dijit.byId("continueDelayId").domNode,"display","none");dojo.style(dojo.byId("waitingMessage"),"display","block");dijit.byId("delayDialog").show();_fncPerformDelayRequest(_d,_e);};_fncShowContinuationElement=function(){dojo.byId("waitingMessage").style.display="none";dojo.byId("continueMessage").style.display="block";dojo.style(dijit.byId("continueDelayId").domNode,"display","inline-block");};fncContinueDelayDialog=function(){dojo.byId("waitingMessage").style.display="block";dojo.byId("continueMessage").style.display="none";dojo.style(dijit.byId("continueDelayId").domNode,"display","none");_fncPerformDelayRequest(misys.frequencyStore,misys.delayStore);};_stopDelayTimer=function(id){clearTimeout(id);misys.frequencyStore=null;misys.delayStore=null;};fncValidateDate=function(_f,_10,_11,_12,_13){var _14=dojo.hitch(dijit.byId(_f),misys.validateDateTermField);return _14(false,_10,_11,_12,_13);};fncGetCommonMessageError=function(_15,_16){var _17="";switch(_15){case 20:_17=misys.getLocalization("technicalError");break;case 36:_17=misys.getLocalization("errorDatenotValideInCurrencyCalendar");break;case 37:_17=misys.getLocalization("errorTransactionInInvalideState");break;case 38:_17=misys.getLocalization("errorSameAccount");break;case 39:_17=misys.getLocalization("errorSplitAmountGreaterThanOriginalAmount");break;default:_17=misys.getLocalization("technicalError");break;}return _17;};}