/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.cash.request.StandingInstructionAction"]){dojo._hasResource["misys.binding.cash.request.StandingInstructionAction"]=true;dojo.provide("misys.binding.cash.request.StandingInstructionAction");fncPerformClear=function(_1,_2,_3){if(_1!=null&&_1!=""){_1=_1+"_";}else{_1="";}var _4;if(_2==1){_fncClearTable(_1+"customerPaymentGrid");dijit.byId(_1+"receipt_instructions_id").set("value","");}else{if(_2==2){_fncClearTable(_1+"bankPaymentGrid");dijit.byId(_1+"payment_instructions_id").set("value","");_4=dojo.query("#"+_1+"bank_instruction_field .dijitInputContainer input");_fncChangeDisabledAdditionalDetailsFiels(_1+"additional_details",true);}else{if(_2==3){if(!_3){_fncRemoveRequiredOnFields(_1+"free_format_field");}_4=dojo.query("#"+_1+"free_format_field .dijitInputContainer input");}}}dojo.forEach(_4,function(_5){if(!(_5.id.match("payment_cur")!=null||_5.id.match("payment_amt")!=null||_5.id.match("payment_type")!=null)){_5.value="";}});};_fncClearTable=function(_6){dojo.query("#"+_6+" .dojoxGridRowSelector").forEach(function(_7){dojo.removeClass(_7,"dijitRadioChecked");});dojo.query("#"+_6+" .dojoxGridRowSelected").forEach(function(_8){dojo.removeClass(_8,"dojoxGridRowSelected");});dijit.byId(_6).selection.selectedIndex=-1;};_fncSwitchBankPaymentInstructionsFields=function(_9,_a,_b,_c){var _d=_c;if(_d!=null&&_d!=""){_d=_d+"_";}else{_d="";}if(dojo.style(_d+_9,"display")=="block"&&dojo.style(_d+_a,"display")=="none"){return;}misys.dialog.show("CONFIRMATION",misys.getLocalization("clearMessage"),"",function(){misys.animate("fadeOut",dojo.byId(_d+_a));if(_c==null){_c="";}var _e=0;if(_a=="bank_instruction_field"){_e=2;}else{if(_a=="free_format_field"){_e=3;}}fncPerformClear(_c,_e,false);misys.animate("fadeIn",dojo.byId(_d+_9));_fncChangePaymentTypeRequired(_9,_a,_c);},function(){misys.connect(dijit.byId("cancelButton"),"onClick",function(){dijit.byId(_b).set("checked",true);});});};_fncChangePaymentTypeRequired=function(_f,_10,_11){if(_11!=null&&_11!=""){_11=_11+"_";}else{_11="";}if("free_format_field"==_f){misys.toggleRequired(_11+"payment_type",true);}if("bank_instruction_field"==_f){misys.toggleRequired(_11+"payment_type",false);}};_fncChangeRequiredFieldsOnPaymentTypeChange=function(_12){if(_12!=null&&_12!=""){_12=_12+"_";}else{_12="";}var _13;var _14;var _15=dijit.byId(_12+"payment_type").get("displayedValue");if("Wire"==_15){_13=[_12+"beneficiary_address",_12+"beneficiary_city",_12+"beneficiary_country"];_14=[_12+"beneficiary_name",_12+"beneficiary_bank",_12+"beneficiary_bank_city",_12+"beneficiary_bank_country"];if(dijit.byId(_12+"beneficiary_account").get("value")!=""){_14.push(_12+"beneficiary_address",_12+"beneficiary_city",_12+"beneficiary_country");}if(dijit.byId(_12+"beneficiary_address").get("value")!=""){_14.push(_12+"beneficiary_account");}if(dijit.byId(_12+"intermediary_bank").get("value")!=""){_14.push(_12+"intermediary_bank_city",_12+"intermediary_bank_country");}}else{if("Draft"==_15){_13=[_12+"beneficiary_bank",_12+"beneficiary_bank_city",_12+"beneficiary_bank_country"];_14=[_12+"beneficiary_name",_12+"beneficiary_address",_12+"beneficiary_city",_12+"beneficiary_country"];if(dijit.byId(_12+"intermediary_bank").get("value")!=""){_14.push(_12+"intermediary_bank_city",_12+"intermediary_bank_country");}}else{_13=[_12+"beneficiary_name",_12+"beneficiary_bank",_12+"beneficiary_bank_city",_12+"beneficiary_bank_country",_12+"beneficiary_address",_12+"beneficiary_city",_12+"beneficiary_country"];}}dojo.forEach(_13,function(_16){misys.toggleRequired(_16,false);});dojo.forEach(_14,function(_17){misys.toggleRequired(_17,true);});};_fncRemoveRequiredOnFields=function(_18){dojo.query("#"+_18+" input[aria-required=true]").forEach(function(_19){dijit.byId(dijit.byId(_19).id).set("required",false);});};_fncChangeRequiredFieldsOnChange=function(_1a,_1b){var _1c=dijit.byId(_1a).get("value");var _1d=dijit.byId(_1b+"payment_type").get("displayedValue");var _1e;var _1f;if(_1b+"beneficiary_account"==_1a){_1e=[_1b+"beneficiary_address",_1b+"beneficiary_city",_1b+"beneficiary_country"];if(_1c==""){_1f=false;}else{if(_1d=="Wire"){_1f=true;}}}else{if(_1b+"beneficiary_address"==_1a){_1e=[_1b+"beneficiary_account"];if(_1c==""){_1f=false;}else{if(_1d=="Wire"){_1f=true;}}}else{if(_1b+"intermediary_bank"==_1a){_1e=[_1b+"intermediary_bank_city",_1b+"intermediary_bank_country"];if(_1c==""){_1f=false;}else{_1f=true;}}}}dojo.forEach(_1e,function(_20){dijit.byId(_20).set("required",_1f);});};_fncChangeDisabledAdditionalDetailsFiels=function(_21,_22){dijit.byId(_21+"_line_1_input").set("disabled",_22);dijit.byId(_21+"_line_2_input").set("disabled",_22);dijit.byId(_21+"_line_3_input").set("disabled",_22);dijit.byId(_21+"_line_4_input").set("disabled",_22);};_fncConstructCustomerPaymentGrid=function(_23,_24,_25,_26){if(_26!=null&&_26!=""){_26=_26+"_";}else{_26="";}var _27=new dojo.data.ItemFileReadStore({data:_23});var _28=[{field:"currency",name:"Currency",width:"50px"},{field:"account",name:"Account",width:"100px",center:"true"},{field:"instruction_indicator",name:"Instruction Indicator",width:"auto"}];var _29=new dojox.grid.EnhancedGrid({query:{id:"*"},store:_27,id:_24,structure:_28,height:"100px",noDataMessage:"No Instructions Found",onSelected:function(_2a){_fncSelectIndex(_2a,_24,_25);},plugins:{indirectSelection:{name:"Select",width:"50px",styles:"text-align: center;"}},selectionMode:"single"},document.createElement("div"));dojo.byId(_26+"customerPayment").appendChild(_29.domNode);_29.startup();};_fncConstructBankPaymentGrid=function(_2b,_2c,_2d,_2e){if(_2e!=null&&_2e!=""){_2e=_2e+"_";}else{_2e="";}var _2f=new dojo.data.ItemFileReadStore({data:_2b});var _30=[{field:"currency",name:"Currency",width:"50px"},{field:"account",name:"Account",width:"100px"},{field:"instruction_indicator",name:"Instruction Indicator","text-align":"center",width:"175px"},{field:"beneficiary_institution",name:"Beneficiary Institution",width:"175px"},{field:"beneficiary_account",name:"Beneficiary Account",width:"175px"},{field:"institution_account",name:"Account with Institution",width:"175px"}];var _31=new dojox.grid.EnhancedGrid({query:{id:"*"},store:_2f,id:_2c,structure:_30,height:"100px",noDataMessage:"No Instructions Found",onSelected:function(_32){_fncSelectIndex(_32,_2c,_2d);},plugins:{indirectSelection:{name:"Select",width:"50px",styles:"text-align: center;"}},selectionMode:"single"},document.createElement("div"));dojo.byId(_2e+"bankPayment").appendChild(_31.domNode);_31.startup();};}