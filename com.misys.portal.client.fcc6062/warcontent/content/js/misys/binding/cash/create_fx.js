/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.cash.create_fx"]){dojo._hasResource["misys.binding.cash.create_fx"]=true;dojo.provide("misys.binding.cash.create_fx");dojo.require("misys.form.common");dojo.require("misys.validation.common");dojo.require("misys.form.DateTermField");dojo.require("misys.form.DateOrTermField");dojo.require("dijit.form.Form");dojo.require("dijit.form.Button");dojo.require("dijit.form.TextBox");dojo.require("dijit.Dialog");dojo.require("dijit.ProgressBar");dojo.require("dijit.form.ValidationTextBox");dojo.require("dijit.form.CheckBox");dojo.require("dijit.layout.ContentPane");dojo.require("dojo.data.ItemFileReadStore");dojo.require("dijit.form.DateTextBox");dojo.require("dijit.form.CurrencyTextBox");dojo.require("dijit.form.NumberTextBox");dojo.require("dijit.form.FilteringSelect");dojo.require("misys.form.SimpleTextarea");dojo.require("dojo.parser");dojo.require("dojo.date");dojo.require("misys.widget.Collaboration");dojo.require("misys.binding.cash.common.request_action");(function(d,dj,m){var _1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e,_f,_10,_11,_12,_13,_14,_15,_16,_17,_18,_19;function _1a(_1b){d.query("#trade_id_report_row .content")[0].innerHTML=_1b.trade_id;dj.byId("trade_id").set("value",_1b.trade_id);dj.byId("rec_id").set("value",_1b.rec_id);_3=_1b.trade_id;_4=_1b.rec_id;dj.byId("remarks").set("value",_1b.remarks);if(_1==="SPOT"||_1==="FWD"){d.query("#rate_report_row .content")[0].innerHTML=_1b.rate;d.query("#counter_amt_report_row .content")[0].innerHTML=_1b.counter_currency+"&nbsp;"+_1b.counter_amount;d.query("#fx_amt_report_row .content")[0].innerHTML=_1b.currency+"&nbsp;"+_1b.amount;d.query("#maturity_date_report_row .content")[0].innerHTML=_1b.value_date;d.query("#trader_remarks_report_row .content")[0].innerHTML=_1b.trader_remarks;dj.byId("rate").set("value",_1b.rate);dj.byId("counter_cur_code").set("value",_1b.counter_currency);dj.byId("counter_amt").set("value",_1b.counter_amount);dj.byId("maturity_date").set("value",_1b.value_date);dj.byId("trader_remarks").set("value",_1b.trader_remarks);dj.byId("value_date").set("value",_1b.value_date);dj.byId("fx_cur_code").set("value",_1b.currency);dj.byId("fx_amt").set("value",_1b.amount);}else{if(_1==="DOPT"){d.query("#rate_report_row .content")[0].innerHTML=_1b.rate;d.query("#counter_amt_report_row .content")[0].innerHTML=_1b.counter_currency+"&nbsp;"+_1b.counter_amount;d.query("#fx_amt_report_row .content")[0].innerHTML=_1b.currency+"&nbsp;"+_1b.amount;d.query("#maturity_date_report_row .content")[0].innerHTML=_1b.value_date;d.query("#option_date_report_row .content")[0].innerHTML=_1b.option_value_date;d.query("#trader_remarks_report_row .content")[0].innerHTML=_1b.trader_remarks;dj.byId("rate").set("value",_1b.rate);dj.byId("counter_cur_code").set("value",_1b.counter_currency);dj.byId("counter_amt").set("value",_1b.counter_amount);dj.byId("maturity_date").set("value",_1b.value_date);dj.byId("trader_remarks").set("value",_1b.trader_remarks);dj.byId("value_date").set("value",_1b.value_date);dj.byId("fx_cur_code").set("value",_1b.currency);dj.byId("fx_amt").set("value",_1b.amount);dj.byId("option_date").set("value",_1b.option_value_date);}else{if(_1==="WFWD"){d.query("#rate_report_row .content")[0].innerHTML=_1b.rate;d.query("#counter_amt_report_row .content")[0].innerHTML=_1b.counter_currency+"&nbsp;"+_1b.counter_amount;d.query("#fx_amt_report_row .content")[0].innerHTML=_1b.currency+"&nbsp;"+_1b.amount;d.query("#maturity_date_report_row .content")[0].innerHTML=_1b.value_date;d.query("#option_date_report_row .content")[0].innerHTML=_1b.option_value_date;d.query("#trader_remarks_report_row .content")[0].innerHTML=_1b.trader_remarks;dj.byId("rate").set("value",_1b.rate);dj.byId("counter_cur_code").set("value",_1b.counter_currency);dj.byId("counter_amt").set("value",_1b.counter_amount);dj.byId("maturity_date").set("value",_1b.value_date);dj.byId("trader_remarks").set("value",_1b.trader_remarks);dj.byId("value_date").set("value",_1b.value_date);dj.byId("fx_cur_code").set("value",_1b.currency);dj.byId("fx_amt").set("value",_1b.amount);dj.byId("option_date").set("value",_1b.option_value_date);}else{if(_1==="SWAP"){d.query("#near_amt_report_row .content")[0].innerHTML=_1b.currency+"&nbsp;"+_1b.near_amount;d.query("#near_rate_report_row .content")[0].innerHTML=_1b.near_rate;d.query("#near_counter_amt_report_row .content")[0].innerHTML=_1b.counter_currency+"&nbsp;"+_1b.near_counter_amount;d.query("#near_date_report_row .content")[0].innerHTML=_1b.near_value_date;dj.byId("near_currency_code").set("value",_1b.currency);dj.byId("near_amt").set("value",_1b.near_amount);dj.byId("near_rate").set("value",_1b.near_rate);dj.byId("near_counter_currency_code").set("value",_1b.counter_currency);dj.byId("near_counter_amt").set("value",_1b.near_counter_amount);dj.byId("near_date").set("value",_1b.near_value_date);d.query("#far_amt_report_row .content")[0].innerHTML=_1b.currency+"&nbsp;"+_1b.amount;d.query("#far_rate_report_row .content")[0].innerHTML=_1b.rate;d.query("#far_counter_amt_report_row .content")[0].innerHTML=_1b.counter_currency+"&nbsp;"+_1b.counter_amount;d.query("#far_date_report_row .content")[0].innerHTML=_1b.value_date;d.query("#trader_remarks_report_row .content")[0].innerHTML=_1b.trader_remarks;dj.byId("fx_cur_code").set("value",_1b.currency);dj.byId("fx_amt").set("value",_1b.amount);dj.byId("counter_cur_code").set("value",_1b.counter_currency);dj.byId("rate").set("value",_1b.rate);dj.byId("counter_amt").set("value",_1b.counter_amount);dj.byId("value_date").set("value",_1b.value_date);dj.byId("maturity_date").set("value",_1b.value_date);dj.byId("trader_remarks").set("value",_1b.trader_remarks);}}}}if(_1b.trader_remarks===undefined||_1b.trader_remarks.length===0){if(dojo.byId("traderRemarksContainer")){dojo.style(dojo.byId("traderRemarksContainer"),"display","none");}}else{if(dojo.byId("traderRemarksContainer")){dojo.style(dojo.byId("traderRemarksContainer"),"display","");}}};function _1c(_1d,_1e){var _1f="";switch(_1d){case 3:_1f=m.getLocalization("errorFXRateRejected");if(_1e.trader_remarks!==undefined&&_1e.trader_remarks.length!==0){_1f+="<br><br>"+m.getLocalization("traderRemarks")+_1e.trader_remarks;}break;case 28:_1f=m.getLocalization("errorFXRateNoLongerValid");break;case 29:_1f=m.getLocalization("errorFXUnknownCurrency");break;case 30:_1f=m.getLocalization("errorFXUnknownCounterCurrency");break;case 31:_1f=m.getLocalization("errorFXServiceClosed");break;case 32:_1f=m.getLocalization("errorFXServiceNotAuthorized");break;case 33:_1f=m.getLocalization("errorFXDateNotValid");break;case 34:_1f=m.getLocalization("errorFXCurrencyDateNotValid");break;case 35:_1f=m.getLocalization("errorFXCounterCurrencyDateNotValid",[_1e.errorParam]);break;case 41:_1f=m.getLocalization("errorQuoteNotReceived");break;case 993:_1f=m.getLocalization("errorQuoteExpired");break;default:_1f=m.getCommonMessageError(_1d,_1e);break;}m.dialog.show("ERROR",_1f);_20();};function _21(){var _22=_23();d.forEach(_22,function(id){if(dj.byId(id)){dj.byId(id).reset();}});};function _23(){var _24=["input_fx_cur_code","input_fx_amt","input_counter_amt","cust_payment_account_act_name","remarks","issuing_bank_customer_reference"];return _24;};function _25(){m.toggleEnableFields();m.hideOtherCurrency();};function _20(){var _26=m.getEnabledFields();d.forEach(_26,function(id){var _27=dj.byId(id);if(_27){if(id.indexOf("button")>=0||id.indexOf("img")>=0||id.indexOf("image")>=0){_27.set("disabled",false);}else{_27.set("readOnly",false);}}});m.hideOtherCurrency();};function _28(){if(!dj.byId("contract_type_1")||!dj.byId("contract_type_2")||!dj.byId("input_fx_cur_code")||!dj.byId("input_counter_cur_code")){return;}var _29=dj.byId("cust_payment_cur_code").get("value");var _2a=(dj.byId("contract_type_1").checked&&dj.byId("input_counter_cur_code").get("value")===_29)||(dj.byId("contract_type_2").checked&&dj.byId("input_fx_cur_code").get("value")===_29);misys.toggleFields(_2a,null,["cust_payment_account_act_name"],false,true);if(_2a){misys.animate("wipeIn","cust_payment_account_act_name_row");}else{misys.animate("wipeOut","cust_payment_account_act_name_row");dj.byId("cust_payment_account_act_name").set("value","");dj.byId("cust_payment_account_act_cur_code").set("value","");dj.byId("cust_payment_account_act_no").set("value","");dj.byId("cust_payment_account_act_description").set("value","");}};d.mixin(m._config,{initReAuthParams:function(){var _2b={productCode:"FX",subProductCode:dj.byId("sub_product_code")?dj.byId("sub_product_code").get("value"):"",transactionTypeCode:"01",entity:dj.byId("entity")?dj.byId("entity").get("value"):"",currency:dj.byId("input_fx_cur_code")?dj.byId("input_fx_cur_code").get("value"):"",amount:dj.byId("input_fx_amt")?m.trimAmount(dj.byId("input_fx_amt").get("value")):"",bankAbbvName:dj.byId("issuing_bank_abbv_name")?dj.byId("issuing_bank_abbv_name").get("value"):"",es_field1:dj.byId("input_fx_amt")?m.trimAmount(dj.byId("input_fx_amt").get("value")):"",es_field2:(dj.byId("cust_payment_account_act_no"))?dj.byId("cust_payment_account_act_no").get("value"):""};return _2b;}});d.mixin(m,{bind:function(){if(dj.byId("sub_product_code")){_1=dj.byId("sub_product_code").get("value");}m.connect("issuing_bank_abbv_name","onChange",m.populateReferences);if(dj.byId("issuing_bank_abbv_name")){m.connect("entity","onChange",function(){dj.byId("issuing_bank_abbv_name").onChange();});}m.connect("issuing_bank_customer_reference","onChange",m.setApplicantReference);m.connect("fx_amt","onBlur",function(){m.setTnxAmt(this.get("value"));});m.connect("buttonAcceptRequest","onClick",m.acceptRate);m.connect("buttonCancelRequest","onClick",m.fncPerformCancelRequest);m.connect("input_counter_cur_code","onBlur",function(){var _2c=d.hitch(dj.byId("input_counter_cur_code"),m.checkEqualsCurrencies);return _2c("input_fx_cur_code");});if(dj.byId("enableCounterCurrency").get("value")==="true"){if(_1!=="SWAP"){m.connect("input_fx_cur_code","onBlur",m.hideOtherCurrency);m.connect("input_fx_amt","onBlur",m.hideOtherCurrency);m.connect("input_counter_cur_code","onBlur",m.hideOtherCurrency);m.connect("input_counter_amt","onBlur",m.hideOtherCurrency);}if(_1==="SWAP"){m.connect("input_near_amt","onBlur",m.hideOtherswapCurrency);m.connect("input_near_counter_amt","onBlur",m.hideOtherswapCurrency);m.connect("input_far_amt","onBlur",m.hideFarswapCurrency);m.connect("input_far_counter_amt","onBlur",m.hideFarswapCurrency);}}m.connect("contract_type_1","onClick",function(){dj.byId("input_value_period").set("value","SPOT");});m.connect("contract_type_2","onClick",function(){dj.byId("input_value_period").set("value","CASH");});m.connect("input_fx_cur_code","onBlur",function(){var _2d=d.hitch(dj.byId("input_fx_cur_code"),m.checkEqualsCurrencies);return _2d("input_counter_cur_code");});if(_1!=="SWAP"){m.setValidation("input_counter_cur_code",m.validateCurrency);m.setValidation("input_fx_cur_code",m.validateCurrency);m.connect("input_fx_amt","onChange",function(){dj.byId("input_fx_amt").focus();m.setCurrency(this,["input_fx_amt"]);m.amountValidationForZero(dj.byId("input_fx_amt"));});if(dj.byId("enableCounterCurrency").get("value")==="true"){m.connect("input_counter_amt","onChange",function(){dj.byId("input_counter_amt").focus();m.setCurrency(this,["input_counter_amt"]);m.amountValidationForZero(dj.byId("input_counter_amt"));});}}else{m.setValidation("input_fx_cur_code",m.validateCurrency);m.setValidation("input_counter_cur_code",m.validateCurrency);m.setValidation("input_near_date",function(){return m.validateDate("input_near","input_value","errorFXNearDateGreaterFarDate",true);});m.connect("input_fx_cur_code","onChange",function(){m.setCurrency(this,["input_near_amt"]);});m.connect("input_fx_cur_code","onChange",function(){m.setCurrency(this,["input_far_amt"]);});if(dj.byId("enableCounterCurrency").get("value")==="true"){m.connect("input_counter_cur_code","onChange",function(){m.setCurrency(this,["input_far_counter_amt"]);});m.connect("input_counter_cur_code","onChange",function(){m.setCurrency(this,["input_near_counter_amt"]);});}}if(_1==="WFWD"){m.setValidation("input_option_number",function(){return m.validateTermNumber("input_option","","TermCodeError",false);});}if(_1!=="SPOT"){m.setValidation("input_value_date",function(){if(_1==="SWAP"){return m.validateDate("input_value","","errorFXFarDateGreaterDateOfDay",false)&&m.validateDate("input_value","input_near","errorFXFarDateGreaterNearDate",false);}else{if(_1==="DOPT"){return m.validateDate("input_value","","DateLessThanDateOfDayError",false)&&m.validateDate("input_value","input_option","valueDateSmallerThanOptionDate",false);}else{if(_1==="WFWD"){return m.validateDate("input_value","","DateLessThanDateOfDayError",false)&&m.validateDate("input_value","input_option","valueDateSmallerThanOptionDate",false);}else{return m.validateDate("input_value","","DateLessThanDateOfDayError",false);}}}});m.setValidation("input_value_number",function(){if(_1==="FWD"||_1==="WFWD"){return m.validateTermNumber("input_value","","TermCodeError",false);}});}else{m.connect("contract_type_1","onChange",_28);m.connect("contract_type_2","onChange",_28);m.connect("input_fx_cur_code","onChange",_28);m.connect("input_counter_cur_code","onChange",_28);}if(_1==="DOPT"){m.setValidation("input_option_date",function(){return m.validateDate("input_option","input_value","optionDateGreaterThanValueDate",true);});}if(_1==="WFWD"){m.setValidation("input_option_date",function(){return m.validateDate("input_option","","optionDateLessThanDateOfDay",false)&&m.validateDate("input_option","input_value","optionDateGreaterThanValueDate",true);});}m.setValidation("remarks",m.validateAlphaNumericRemarks);m.connect("entity","onChange",_21);},onFormLoad:function(){var _2e=dj.byId("issuing_bank_abbv_name");if(_2e){_2e.onChange();}var _2f=dj.byId("issuing_bank_customer_reference");if(_2f){_2f.onChange();_2f.set("value",_2f._resetValue);}m.fncDisableLoadingDialogClosing();if(dj.byId("enableCounterCurrency").get("value")==="true"){if(_1==="SWAP"){m.setCurrency("input_counter_cur_code",["input_far_counter_amt"]);m.setCurrency("input_counter_cur_code",["input_near_counter_amt"]);}}m.setCurrency(dj.byId("input_fx_cur_code"),["input_fx_amt"]);m.amountValidationForZero(dj.byId("input_fx_amt"));m.setCurrency(dj.byId("input_counter_cur_code"),["input_counter_amt"]);m.amountValidationForZero(dj.byId("input_counter_amt"));if(dj.byId("contract_type_2")&&dj.byId("contract_type_2").get("value")==="02"&&dj.byId("cust_payment_account_act_name")){misys.animate("wipeOut","cust_payment_account_act_name_row");dj.byId("cust_payment_account_act_name").set("required",false);}if(dj.byId("input_fx_amt")){dj.byId("input_fx_amt").set("value","");}if(dj.byId("input_counter_amt")){dj.byId("input_counter_amt").set("value","");}},fncPerformRequest:function(){if(m.checkFields()){m.doPerformRequest();}},initVar:function(){_2=dj.byId("ref_id").get("value");if(dj.byId("applicant_reference")){_5=dj.byId("applicant_reference").get("value");}else{_5="";}if(dj.byId("contract_type_1")&&dj.byId("contract_type_1").get("checked")===true){_6="01";}else{if(dj.byId("contract_type_2")&&dj.byId("contract_type_2").get("checked")===true){_6="02";}else{_6=dj.byId("contract_type").get("value");}}_7=(dj.byId("cust_payment_account_act_no"))?dj.byId("cust_payment_account_act_no").get("value"):"";_8=(dj.byId("cust_payment_account_act_description"))?dj.byId("cust_payment_account_act_description").get("value"):"";_9=dj.byId("remarks").get("value");if(_1==="SWAP"){_a=dj.byId("input_fx_cur_code").get("value");_b=dj.byId("input_far_amt").get("value");_c=dj.byId("input_counter_cur_code").get("value");_e=dj.byId("input_near_amt").get("value");_10=dj.byId("input_near").getDate();_11=dj.byId("input_near").getNumber();_12=dj.byId("input_near").getCode();if(dj.byId("enableCounterCurrency").get("value")==="true"){_d=dj.byId("input_far_counter_amt").get("value");_f=dj.byId("input_near_counter_amt").get("value");}}else{_c=dj.byId("input_counter_cur_code").get("value");if(dj.byId("enableCounterCurrency").get("value")==="true"){_d=dj.byId("input_counter_amt").get("value");}_a=dj.byId("input_fx_cur_code").get("value");_b=dj.byId("input_fx_amt").get("value");_10="";_11="";_12="";}if(_1!=="SPOT"){_13=dj.byId("input_value").getDate();_14=dj.byId("input_value").getNumber();_15=dj.byId("input_value").getCode();}else{_13="";_14="";_15=dj.byId("input_value_period").get("value");}if(_1==="DOPT"){_16=dj.byId("input_option").getDate();_17=dj.byId("input_option").getNumber();_18=dj.byId("input_option").getCode();}if(_1==="WFWD"){_16=dj.byId("input_option").getDate();_17=dj.byId("input_option").getNumber();_18=dj.byId("input_option").getCode();}else{_16="";_17="";_18="";}_19=dj.byId("issuing_bank_abbv_name").get("value");},getRate:function(){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/TreasuryRequestForQuoteSearchAction"),handleAs:"json",content:{operation:"REQUEST",ref_id:_2,applicant_reference:_5,fx_type:_1,contract_type:_6,counter_cur_code:_c,counter_amt:_d,fx_cur_code:_a,fx_amt:_b,value_date:_13,value_days:_14,value_period:_15,near_date:_10,near_days:_11,near_period:_12,near_amt:_e,near_counter_amt:_f,remarks:_9,option_date:_16,option_days:_17,option_period:_18,debit_act_no:_7,debit_act_desc:_8,bank:_19,productcode:"FX",subproductcode:_1},load:function(_30,_31){dj.byId("loadingDialog").hide();var _32=_30.status;switch(_32){case 5:_1a(_30);var _33=_30.validity;m.countDown(_33);m.showDetailField();break;case 6:_3=_30.trade_id;_4=_30.rec_id;m.frequencyStore=_30.delay_frequency;m.opicsFrequencyResponse=_30.delay_frequency;m.delayStore=_30.delay_timeout;m.openDelayDialog(m.frequencyStore,m.delayStore);break;default:dj.byId("loadingDialog").hide();_1c(_32,_30);break;}},customError:function(_34,_35){dj.byId("loadingDialog").hide();console.error("[create_Fx] error retrieving quote");_1c(_34.status,_34);}});},performDelayRequest:function(){if(m.frequencyStore>0){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/TreasuryRequestForQuoteSearchAction"),handleAs:"json",content:{operation:"DELAY",ref_id:_2,applicant_reference:_5,trade_id:_3,rec_id:_4,fx_type:_1,contract_type:_6,counter_cur_code:_c,counter_amt:_d,fx_cur_code:_a,fx_amt:_b,value_date:_13,value_days:_14,value_period:_15,near_date:_10,near_days:_11,near_period:_12,near_amt:_e,near_counter_amt:_f,remarks:_9,option_date:_16,option_days:_17,option_period:_18,bank:_19,productcode:"FX",subproductcode:_1},load:function(_36,_37){var _38=_36.status;switch(_38){case 5:_1a(_36);m.closeDelayDialog();var _39=_36.validity;m.countDown(_39);m.showDetailField();break;case 6:_4=_36.rec_id;m.frequencyStore--;m.timer=setTimeout("misys.performDelayRequest()",(m.delayStore*1000));break;default:m.closeDelayDialog();_1c(_38,_36);break;}},customError:function(_3a,_3b){console.error("[create_Fx] error retrieving quote");_1c(_3a.status,_3a);}});}else{m.stopCountDown(m.timer);m.showContinuationElement();}},performCancelDelayRequest:function(){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/TreasuryRequestForQuoteSearchAction"),handleAs:"json",content:{operation:"CANCEL",ref_id:_2,applicant_reference:_5,trade_id:_3,rec_id:_4,fx_type:_1,contract_type:_6,counter_cur_code:_c,counter_amt:_d,fx_cur_code:_a,fx_amt:_b,value_date:_13,value_days:_14,value_period:_15,near_date:_10,near_days:_11,near_period:_12,near_amt:_e,near_counter_amt:_f,remarks:_9,option_date:_16,option_days:_17,option_period:_18,bank:_19,productcode:"FX",subproductcode:_1},load:function(_3c,_3d){var _3e=_3c.status;switch(_3e){case 7:m.dialog.show("CUSTOM-NO-CANCEL",m.getLocalization("confirmationCancelRequest"),m.getLocalization("confirmationCancelTitle"));break;default:_1c(_3e,_3c);break;}},customError:function(_3f,_40){m.dialog.show("ERROR",m.getLocalization("technicalError"));_25();}});},cancelRequest:function(){dj.byId("buttonAcceptRequest").set("disabled",false);m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/TreasuryRequestForQuoteSearchAction"),handleAs:"json",content:{operation:"REJECT",ref_id:_2,applicant_reference:_5,trade_id:_3,rec_id:_4,fx_type:_1,contract_type:_6,counter_cur_code:_c,counter_amt:_d,fx_cur_code:_a,fx_amt:_b,value_date:_13,value_days:_14,value_period:_15,near_date:_10,near_days:_11,near_period:_12,near_amt:_e,near_counter_amt:_f,remarks:_9,option_date:_16,option_days:_17,option_period:_18,bank:_19,productcode:"FX",subproductcode:_1},load:function(_41,_42){var _43=_41.status;if(_43==993){_1c(_43,_41);}_20();m.performClearDetails();},customError:function(_44,_45){m.dialog.show("ERROR",m.getLocalization("technicalError"));_25();}});},getDisabledFields:function(){var _46=["issuing_bank_customer_reference","trade_id","issuing_bank_abbv_name","input_counter_cur_code","input_fx_cur_code","input_fx_amt","input_counter_amt","input_fx_amt_img","input_counter_amt_img","contract_type_1","contract_type_2","dijit_form_Button_2","dijit_form_Button_3","remarks","request_button","request_clear_button","input_value_period","cust_payment_account_act_name","cust_payment_account_img","entity_img","applicant_name","applicant_address_line_1","applicant_address_line_2","applicant_dom","input_value","input_near","input_near_amt","input_far_amt","input_near_counter_amt","input_far_counter_amt","near_amt_img","far_amt_img","input_option_date","input_option_code","input_option_number","input_value_date","input_value_code","input_value_number"];return _46;},getEnabledFields:function(){return m.getDisabledFields();},getHiddenFieldsToClear:function(){var _47=["fx_cur_code","fx_amt","counter_cur_code","rate","counter_amt","near_counter_amount","value_date","maturity_date","trader_remarks"];return _47;},getFieldsToClear:function(){var _48=["trade_id","issuing_bank_abbv_name","input_counter_cur_code","input_fx_cur_code","input_fx_amt","input_counter_amt","remarks","input_option_date","input_option_code","input_value","input_near","input_near_amt","input_far_amt","input_value_period","input_near_counter_amt","input_far_counter_amt","cust_payment_account_act_name"];return _48;},getDateTermFieldsToClear:function(){return ["value","maturity","input_option"];},checkEqualsCurrencies:function(_49){var _4a=this.get("value");var _4b=dj.byId(_49).get("value");if(_4a.length===3&&_4b.length===3&&(this.state!=="Error"||_49.state!=="Error")){if(_4a===_4b){this.set("value","");this.focus();this.state="Error";this.displayMessage(m.getLocalization("errorFXEqualsCurrencies",[_4a]));}}},hideOtherCurrency:function(){if(dj.byId("input_fx_amt")&&!isNaN(dj.byId("input_fx_amt").get("value"))){dj.byId("input_counter_amt").set("value","");dj.byId("input_counter_amt").set("disabled",true);dj.byId("input_counter_amt").set("required",false);m.setCurrency("input_fx_cur_code",["input_fx_amt"]);m.amountValidationForZero(dj.byId("input_fx_amt"));}else{if(dj.byId("input_counter_amt")&&!isNaN(dj.byId("input_counter_amt").get("value"))){dj.byId("input_fx_amt").set("value","");dj.byId("input_fx_amt").set("disabled",true);dj.byId("input_fx_amt").set("required",false);m.setCurrency("input_counter_cur_code",["input_counter_amt"]);m.amountValidationForZero(dj.byId("input_counter_amt"));}else{dj.byId("input_counter_amt").set("disabled",false);dj.byId("input_fx_amt").set("disabled",false);dj.byId("input_counter_amt").set("required",true);dj.byId("input_fx_amt").set("required",true);}}},hideOtherswapCurrency:function(){if(dj.byId("input_near_amt")&&!isNaN(dj.byId("input_near_amt").get("value"))){dj.byId("input_near_counter_amt").set("value","");dj.byId("input_near_counter_amt").set("disabled",true);dj.byId("input_near_counter_amt").set("required",false);m.setCurrency("input_fx_cur_code",["input_near_amt"]);}else{if(dj.byId("input_near_counter_amt")&&!isNaN(dj.byId("input_near_counter_amt").get("value"))){dj.byId("input_near_amt").set("value","");dj.byId("input_near_amt").set("disabled",true);dj.byId("input_near_amt").set("required",false);m.setCurrency("input_counter_cur_code",["input_near_counter_amt"]);}else{dj.byId("input_near_amt").set("disabled",false);dj.byId("input_near_counter_amt").set("disabled",false);dj.byId("input_near_amt").set("required",true);dj.byId("input_near_counter_amt").set("required",true);}}},hideFarswapCurrency:function(){if(dj.byId("input_far_amt")&&!isNaN(dj.byId("input_far_amt").get("value"))){dj.byId("input_far_counter_amt").set("value","");dj.byId("input_far_counter_amt").set("disabled",true);dj.byId("input_far_counter_amt").set("required",false);m.setCurrency("input_fx_cur_code",["input_far_amt"]);}else{if(dj.byId("input_far_counter_amt")&&!isNaN(dj.byId("input_far_counter_amt").get("value"))){dj.byId("input_far_amt").set("value","");dj.byId("input_far_amt").set("disabled",true);dj.byId("input_far_amt").set("required",false);m.setCurrency("input_counter_cur_code",["input_far_counter_amt"]);}else{dj.byId("input_far_amt").set("disabled",false);dj.byId("input_far_counter_amt").set("disabled",false);dj.byId("input_far_amt").set("required",true);dj.byId("input_far_counter_amt").set("required",true);}}},amountValidationForZero:function(_4c){var _4d;var _4e=_4c.get("value");if(_4e===0){_4d=m.getLocalization("amountcannotzero");_4c.set("state","Error");dj.hideTooltip(_4c.domNode);dj.showTooltip(_4d,_4c.domNode,0);return false;}},fillAccountField:function(_4f,_50){if(_4f==="debitDDAccount"){dj.byId("cust_payment_account_act_no").set("value",_50.account_no);dj.byId("cust_payment_account_act_description").set("value",_50.description);}}});})(dojo,dijit,misys);dojo.require("misys.client.binding.cash.create_fx_client");}