/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.cash.ktp.messagecenter.ktp_outstanding_loan"]){dojo._hasResource["misys.binding.cash.ktp.messagecenter.ktp_outstanding_loan"]=true;dojo.provide("misys.binding.cash.ktp.messagecenter.ktp_outstanding_loan");dojo.require("dojo.data.ItemFileReadStore");dojo.require("misys.binding.cash.ktp.common.ktp_common");(function(d,dj,m){d.mixin(m,{bind:function(){m.connect("centralizedEntity","onChange",function(){var _1=dj.byId("centralizedEntity").get("value");if(_1&&_1!=""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/RetrieveCentralizingEntities"),sync:true,handleAs:"json",content:{centralizedentity:_1},load:function(_2,_3){var _4=new d.data.ItemFileReadStore({data:_2});_4.fetch();dj.byId("centralizingEntity").set("value",null);dj.byId("centralizingEntity").store.close();dj.byId("centralizingEntity").set("store",_4);},error:function(_5,_6){m.dialog.show("ERROR",m.getLocalization("retrieveEntityNameError"),"");}});}else{var _7={"identifier":"value","label":"name","items":[{"value":"","name":""}]};var _8=new d.data.ItemFileReadStore({data:_7});_8.fetch();dj.byId("centralizingEntity").set("value",null);dj.byId("centralizingEntity").store.close();dj.byId("centralizingEntity").set("store",_8);}});},onFormLoad:function(){m.toggleRequired("centralizedEntity",true);m.toggleRequired("centralizingEntity",true);var _9={"identifier":"value","label":"name","items":[{"value":"","name":""}]};var _a=new d.data.ItemFileReadStore({data:_9});_a.fetch();dj.byId("centralizingEntity").set("value",null);dj.byId("centralizingEntity").store.close();dj.byId("centralizingEntity").set("store",_a);dj.byId("centralizedEntity").onChange();dj.byId("TransactionSearchForm").isValid=function(){var _b=false;d.forEach(dj.byId("TransactionSearchForm").getDescendants(),function(_c){if(_c.required===true&&_c.get("value")===""){_b=true;}});if(_b){return false;}return dj.byId("TransactionSearchForm").state=="";};}});d.ready(function(){m.hideReportDescription();m.setGridCellFormatter();});})(dojo,dijit,misys);}