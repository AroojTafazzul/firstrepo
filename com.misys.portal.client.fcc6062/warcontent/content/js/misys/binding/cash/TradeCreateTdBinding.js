/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.cash.TradeCreateTdBinding"]){dojo._hasResource["misys.binding.cash.TradeCreateTdBinding"]=true;dojo.provide("misys.binding.cash.TradeCreateTdBinding");dojo.require("misys.form.common");dojo.require("misys.validation.common");dojo.require("misys.form.SimpleTextarea");dojo.require("dijit.form.Form");dojo.require("dijit.form.Button");dojo.require("misys.widget.Dialog");dojo.require("dijit.ProgressBar");dojo.require("dijit.form.ValidationTextBox");dojo.require("dijit.form.CheckBox");dojo.require("dijit.layout.ContentPane");dojo.require("dijit.form.DateTextBox");dojo.require("misys.form.CurrencyTextBox");dojo.require("dijit.form.NumberTextBox");dojo.require("dijit.form.FilteringSelect");dojo.require("dojo.data.ItemFileReadStore");dojo.require("misys.form.DateTermField");dojo.require("misys.binding.cash.request.RequestAction");dojo.require("misys.binding.cash.TradeCreateTdAjaxCall");dojo.require("dojo.parser");fncDoBinding=function(){misys.connect("cancelDelayDialogButton","onClick",fncPerformClear("delayDialog"));misys.connect("buttonAcceptRequest","onClick",fncAcceptRate);misys.connect("buttonCancelRequest","onClick",fncPerformCancelRequest);misys.setValidation("input_value_date",function(){if(dijit.byId("input_value").isBlankSelected()){misys.validateDateGreaterThanHitched=dojo.hitch(this,misys.validateDateGreaterThan);if(!dijit.byId("input_value").get("disabled")&&dijit.byId("input_value").isBlankSelected()){misys.validateDateSmallerThanHitched=dojo.hitch(this,misys.validateDateSmallerThan);return misys.validateDateSmallerThanHitched(false,"input_maturity_date","valueDateGreaterThanMaturityDate");}else{return true;}}else{return true;}});misys.setValidation("input_maturity_date",function(){if(dijit.byId("input_maturity").isBlankSelected()&&dijit.byId("input_value").isBlankSelected()){misys.validateDateGreaterThanHitched=dojo.hitch(this,misys.validateDateGreaterThan);return misys.validateDateGreaterThanHitched(false,"input_value_date","maturityDateLessThanValueDate");}else{return true;}});misys.connect("issuing_bank_customer_reference","onChange",misys.setApplicantReference);};fncDoFormOnLoadEvents=function(){dijit.byId("td_type").set("value","SCRATCH");fncDisableLoadingDialogClosing();};fncPerformRequest=function(){if(fncCheckFields()){fncDoPerformRequest();}};fncInitVar=function(){if(dijit.byId("applicant_reference")){fncSetGlobalVariable("applicant_reference",dijit.byId("applicant_reference").get("value"));}else{fncSetGlobalVariable("applicant_reference","");}fncSetGlobalVariable("remarks",dijit.byId("remarks").get("value"));fncSetGlobalVariable("td_type","SCRATCH");fncSetGlobalVariable("td_cur_code",dijit.byId("input_td_cur_code").get("value"));fncSetGlobalVariable("td_amt",dijit.byId("input_td_amt").get("value"));fncSetGlobalVariable("input_value_date",dijit.byId("input_value").getDate());fncSetGlobalVariable("input_value_days",dijit.byId("input_value").getNumber());fncSetGlobalVariable("input_value_period",dijit.byId("input_value").getCode());fncSetGlobalVariable("input_maturity_date",dijit.byId("input_maturity").getDate());fncSetGlobalVariable("input_maturity_days",dijit.byId("input_maturity").getNumber());fncSetGlobalVariable("input_maturity_period",dijit.byId("input_maturity").getCode());};_fncGetDisabledFields=function(){var _1=["issuing_bank_customer_reference","trade_id","issuing_bank_abbv_name","input_td_cur_code","input_td_amt","input_td_amt_img","dijit_form_Button_2","dijit_form_Button_3","request_button","request_clear_button","input_value","input_maturity","remarks"];return _1;};_fncGetEnabledFields=function(){return _fncGetDisabledFields();};_fncGetHiddenFieldsToClear=function(){var _2=["td_cur_code","td_amt","rate","value_date","maturity_date"];return _2;};_fncGetFieldsToClear=function(){var _3=["issuing_bank_customer_reference","trade_id","issuing_bank_abbv_name","input_td_cur_code","input_td_amt","input_value","input_maturity","remarks"];return _3;};_fncGetDateTermFieldsToClear=function(){var _4=["input_value","input_maturity"];return _4;};dojo.require("misys.client.binding.cash.TradeCreateTdBinding_client");}