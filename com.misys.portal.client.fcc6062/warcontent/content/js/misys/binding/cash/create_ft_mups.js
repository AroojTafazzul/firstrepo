/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.cash.create_ft_mups"]){dojo._hasResource["misys.binding.cash.create_ft_mups"]=true;dojo.provide("misys.binding.cash.create_ft_mups");dojo.require("dojo.parser");dojo.require("dijit.layout.TabContainer");dojo.require("dijit.form.DateTextBox");dojo.require("misys.form.CurrencyTextBox");dojo.require("dijit.form.NumberTextBox");dojo.require("dijit.form.FilteringSelect");dojo.require("dijit.form.Form");dojo.require("dijit.form.Button");dojo.require("dijit.form.TextBox");dojo.require("dijit.Dialog");dojo.require("dijit.ProgressBar");dojo.require("dijit.form.ValidationTextBox");dojo.require("dijit.form.CheckBox");dojo.require("misys.form.PercentNumberTextBox");dojo.require("misys.form.SimpleTextarea");dojo.require("misys.widget.Collaboration");dojo.require("misys.form.common");dojo.require("misys.form.file");dojo.require("misys.validation.common");dojo.require("misys.binding.cash.ft_common");dojo.require("misys.form.BusinessDateTextBox");dojo.require("misys.binding.core.beneficiary_advice_common");dojo.require("misys.binding.common.create_fx_multibank");(function(d,dj,m){var _1=d.byId("fx-message-type");var _2=false;var _3=true;var _4=false;var _5="fx-section";function _6(_7){var _8=function(){var _9=dijit.byId("ft_amt");_9.set("state","Error");m.defaultBindTheFXTypes();dj.byId("ft_amt").set("value","");};m.dialog.show("ERROR",_7,"",function(){setTimeout(_8,500);});if(d.byId(_5)&&(d.style(d.byId(_5),"display")!=="none")){m.animate("wipeOut",d.byId(_5));}};function _a(){var _b=true;var _c=null;if((dj.byId("mups_description_address_line_4")&&dj.byId("mups_description_address_line_4").get("value")!=="")&&(((dj.byId("mups_description_address_line_1")&&dj.byId("mups_description_address_line_1").get("value")==""))||((dj.byId("mups_description_address_line_2")&&dj.byId("mups_description_address_line_2").get("value")==""))||((dj.byId("mups_description_address_line_3")&&dj.byId("mups_description_address_line_3").get("value")=="")))){_c=m.getLocalization("invaliddescriptionaddress");_b=false;if(dj.byId("mups_description_address_line_3").get("value")==""){dj.byId("mups_description_address_line_3").set("state","Error");}else{if(dj.byId("mups_description_address_line_2").get("value")==""){dj.byId("mups_description_address_line_2").set("state","Error");}else{if(dj.byId("mups_description_address_line_1").get("value")==""){dj.byId("mups_description_address_line_1").set("state","Error");}}}return _b;}else{if((dj.byId("mups_description_address_line_3")&&dj.byId("mups_description_address_line_3").get("value")!=="")&&(((dj.byId("mups_description_address_line_1")&&dj.byId("mups_description_address_line_1").get("value")==""))||((dj.byId("mups_description_address_line_2")&&dj.byId("mups_description_address_line_2").get("value")=="")))){_c=m.getLocalization("invaliddescriptionaddress");_b=false;if(dj.byId("mups_description_address_line_2").get("value")==""){dj.byId("mups_description_address_line_2").set("state","Error");}else{if(dj.byId("mups_description_address_line_1").get("value")==""){dj.byId("mups_description_address_line_1").set("state","Error");}}return _b;}else{if((dj.byId("mups_description_address_line_2")&&dj.byId("mups_description_address_line_2").get("value")!=="")&&(dj.byId("mups_description_address_line_1")&&dj.byId("mups_description_address_line_1").get("value")=="")){_c=m.getLocalization("invaliddescriptionaddress");_b=false;if(dj.byId("mups_description_address_line_1").get("value")==""){dj.byId("mups_description_address_line_1").set("state","Error");}return _b;}}}return _b;};function _d(){var _e=dj.byId("clearing_code"),_f=dj.byId("cpty_bank_swift_bic_code"),_10=dj.byId("cpty_bank_name"),_11=dj.byId("cpty_bank_address_line_1"),_12=dj.byId("cpty_bank_address_line_2"),_13=dj.byId("cpty_bank_dom"),_14="";if(_e&&_f){if(_e.get("value")!==""&&_f.get("value")!==""){m.xhrPost({url:misys.getServletURL("/screen/AjaxScreen/action/ValidateBankIFSCCodeAction"),handleAs:"json",sync:true,content:{clearing_code:_e.get("value"),bank_code:_f.get("value")},load:function(_15,_16){if(_15.items.valid===false){if(_15.items.clearCode==="02"){if(dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")!==""){_14=misys.getLocalization("invalidIFSCNEFTbeneficairy");}else{if((dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")==="")||(dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")===null)){_14=misys.getLocalization("ifscCodeValidationFailed");}}_f.set("state","Error");dj.showTooltip(_14,_f.domNode,0);var _17=function(){dj.hideTooltip(_f.domNode);};setTimeout(_17,5000);}else{if(dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")!==""){_14=misys.getLocalization("invalidIFSCRTGSbeneficairy");}else{if((dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")==="")||(dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")===null)){_14=misys.getLocalization("ifscCodeValidationFailed");}}_f.set("state","Error");dj.showTooltip(_14,_f.domNode,0);var _18=function(){dj.hideTooltip(_f.domNode);};setTimeout(_18,5000);}}else{if(_15.items.valid===true&&_f.state==="Error"){_f.state="";_f._setStateClass();dj.hideTooltip(_f.domNode);}if((dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")==="")||(dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")===null)){_f.set("value",_15.items.bankCode);_10.set("value",_15.items.bankName);_11.set("value",_15.items.bankAddressLine1);_12.set("value",_15.items.bankAddressLine2);_13.set("value",_15.items.bankCity);}}},error:function(_19,_1a){console.error("[Could not validate Bank IFSC Code] "+_f.get("value"));console.error(_19);}});}else{_10.set("value","");_11.set("value","");_12.set("value","");_13.set("value","");}}};function _1b(){var _1c=dj.byId("clearing_code"),_1d=dj.byId("cpty_bank_swift_bic_code"),_1e=dj.byId("cpty_bank_name"),_1f=dj.byId("cpty_bank_address_line_1"),_20=dj.byId("cpty_bank_address_line_2"),_21=dj.byId("cpty_bank_dom"),_22="";var _23=false;if(_1c&&_1d){if(!(_1c.get("value")===""&&_1d.get("value")==="")){m.xhrPost({url:misys.getServletURL("/screen/AjaxScreen/action/ValidateBankIFSCCodeAction"),handleAs:"json",sync:true,content:{clearing_code:_1c.get("value"),bank_code:_1d.get("value")},load:function(_24,_25){_23=_24.items.valid;if(_24.items.valid===false){if(_24.items.clearCode==="02"){_22=misys.getLocalization("ifscCodeValidationFailed");_1d.set("state","Error");dj.showTooltip(_22,_1d.domNode,0);var _26=function(){dj.hideTooltip(_1d.domNode);};setTimeout(_26,5000);}else{_22=misys.getLocalization("ifscCodeValidationFailed");_1d.set("state","Error");dj.hideTooltip(_1d.domNode);dj.showTooltip(_22,_1d.domNode,0);var _27=function(){dj.hideTooltip(_1d.domNode);};setTimeout(_27,5000);}}else{if(_24.items.valid===true&&_1d.state==="Error"){_1d.state="";_1d._setStateClass();dj.hideTooltip(_1d.domNode);}if((dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")==="")||(dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")===null)){_1d.set("value",_24.items.bankCode);_1e.set("value",_24.items.bankName);_1f.set("value",_24.items.bankAddressLine1);_20.set("value",_24.items.bankAddressLine2);_21.set("value",_24.items.bankCity);}}},error:function(_28,_29){console.error("[Could not validate Bank IFSC Code] "+_1d.get("value"));console.error(_28);}});}else{_1e.set("value","");_1f.set("value","");_20.set("value","");_21.set("value","");}}return _23;};function _2a(){var _2b=dj.byId("clearing_code"),_2c=dj.byId("ft_amt"),_2d=dj.byId("rtgsallowedamt"),_2e=true,_2f="";if(_2c&&_2c.get("value")!==""&&_2b&&_2b.get("value")!==""&&_2b.get("value")==="RTGS"){if(_2d&&_2c.get("value")<_2d.get("value")){_2e=false;_2f=m.getLocalization("rtgsminimumallowedamountrange",[d.number.parse(dj.byId("rtgsallowedamt").get("value"))]);_2c.set("state","Error");dj.showTooltip(_2f,_2c.domNode,0);var _30=function(){dj.hideTooltip(_2c.domNode);};setTimeout(_30,5000);}}else{if(_2c&&_2c.get("value")!==""&&_2b&&_2b.get("value")!==""&&_2b.get("value")==="NEFT"){if(_2c.state==="Error"){_2c.state="";_2c._setStateClass();dj.hideTooltip(_2c.domNode);}}}return _2e;};function _31(){var _32=dj.byId("decrValue");var _33=_32?dj.byId("decrValue").get("value"):"";var _34=new RegExp(_33);var _35=false;var _36=null;var _37=dj.byId("mups_description_address_line_1");var _38=_37?dj.byId("mups_description_address_line_1").get("value"):"";if(_33!==null&&_33!==""){if(_38!==""&&_38!==null){_35=_34.test(_38);if(!_35){_36=m.getLocalization("invalidDescriptionAddressField");_37.set("state","Error");dj.showTooltip(_36,_37.domNode,0);var _39=function(){dj.hideTooltip(_37.domNode);};setTimeout(_39,5000);return _35;}}var _3a=dj.byId("mups_description_address_line_2");var _3b=_3a?dj.byId("mups_description_address_line_2").get("value"):"";if(_3b!==""&&_3b!==null){_35=_34.test(_3b);if(!_35){_36=m.getLocalization("invalidDescriptionAddressField");_3a.set("state","Error");dj.showTooltip(_36,_3a.domNode,0);var _3c=function(){dj.hideTooltip(_3a.domNode);};setTimeout(_3c,5000);return _35;}}var _3d=dj.byId("mups_description_address_line_3");var _3e=_3d?dj.byId("mups_description_address_line_3").get("value"):"";if(_3e!==""&&_3e!==null){_35=_34.test(_3e);if(!_35){_36=m.getLocalization("invalidDescriptionAddressField");_3d.set("state","Error");dj.showTooltip(_36,_3d.domNode,0);var _3f=function(){dj.hideTooltip(_3d.domNode);};setTimeout(_3f,5000);return _35;}}var _40=dj.byId("mups_description_address_line_4");var _41=_40?dj.byId("mups_description_address_line_4").get("value"):"";if(_41!==""&&_41!==null){_35=_34.test(_41);if(!_35){_36=m.getLocalization("invalidDescriptionAddressField");_40.set("state","Error");dj.showTooltip(_36,_40.domNode,0);var _42=function(){dj.hideTooltip(_40.domNode);};setTimeout(_42,5000);return _35;}}}else{m._config.forceSWIFTValidation=false;}return _35;};function _43(){var _44=dj.byId("decrValue");var _45=_44?dj.byId("decrValue").get("value"):"";var _46=new RegExp(_45);var _47=false;var _48=null;var _49=dj.byId("cpty_bank_name");var _4a=_49?dj.byId("cpty_bank_name").get("value"):"";if(_45!==null&&_45!==""){if(_4a!==""&&_4a!==null){_47=_46.test(_4a);if(!_47){_48=m.getLocalization("invalidDescriptionAddressField");_49.set("state","Error");dj.showTooltip(_48,_49.domNode,0);var _4b=function(){dj.hideTooltip(_49.domNode);};setTimeout(_4b,5000);return _47;}}var _4c=dj.byId("cpty_bank_address_line_1");var _4d=_4c?dj.byId("cpty_bank_address_line_1").get("value"):"";if(_4d!==""&&_4d!==null){_47=_46.test(_4d);if(!_47){_48=m.getLocalization("invalidDescriptionAddressField");_4c.set("state","Error");dj.showTooltip(_48,_4c.domNode,0);var _4e=function(){dj.hideTooltip(_4c.domNode);};setTimeout(_4e,5000);return _47;}}var _4f=dj.byId("cpty_bank_address_line_2");var _50=_4f?dj.byId("cpty_bank_address_line_2").get("value"):"";if(_50!==""&&_50!==null){_47=_46.test(_50);if(!_47){_48=m.getLocalization("invalidDescriptionAddressField");_4f.set("state","Error");dj.showTooltip(_48,_4f.domNode,0);var _51=function(){dj.hideTooltip(_4f.domNode);};setTimeout(_51,5000);return _47;}}var _52=dj.byId("cpty_bank_dom");var _53=_52?dj.byId("cpty_bank_dom").get("value"):"";if(_53!==""&&_53!==null){_47=_46.test(_53);if(!_47){_48=m.getLocalization("invalidDescriptionAddressField");_52.set("state","Error");dj.showTooltip(_48,_52.domNode,0);var _54=function(){dj.hideTooltip(_52.domNode);};setTimeout(_54,5000);return _47;}}}else{m._config.forceSWIFTValidation=false;}return _47;};function _55(){var _56=true;var _57="";var _58=dj.byId("fx_rates_type_2");var _59=dj.byId("fx_total_utilise_amt");var _5a=dj.byId("ft_amt");var _5b=m._config.fxParamData[dj.byId("sub_product_code").get("value")][dj.byId("issuing_bank_abbv_name").get("value")].maxNbrContracts;if(_58.get("checked")&&_59&&!isNaN(_59.get("value"))&&_5a&&!isNaN(_5a.get("value"))){if(_5a.get("value")<_59.get("value")){_57+=m.getLocalization("FXUtiliseAmtGreaterMessage");_56=false;}}m._config.onSubmitErrorMsg=_57;if(_58.get("checked")&&_59&&_5a){var _5c=0;for(var j=1;j<=_5b;j++){var _5d="fx_contract_nbr_amt_"+j;_5c=_5c+dj.byId(_5d).get("value");if(dj.byId(_5d).get("state")==="Error"||_5c.toFixed(2)>_59.get("value")){dj.byId(_5d).set("state","Error");dj.byId(_5d).focus();_56=false;}}}return _56;};var _5e,_5f={},_60={};_5f.fields=["beneficiary_name","beneficiary_account","cpty_bank_swift_bic_code","pre_approved"];_60.fields=["cpty_bank_name","cpty_bank_address_line_1","cpty_bank_address_line_2","cpty_bank_dom"];_5f.toggleReadonly=function(_61){m.toggleFieldsReadOnly(this.fields,_61);};_5f.clear=function(){d.forEach(this.fields,function(_62,i){if(dj.byId(_62)){dj.byId(_62).set("value","");}});d.style("PAB","display","none");};_60.clear=function(){d.forEach(this.fields,function(_63,i){if(dj.byId(_63)){dj.byId(_63).set("value","");}});};function _64(){var _65=dj.byId("applicant_act_pab").get("value");if(_65=="Y"){_5f.toggleReadonly(true);}else{_5f.toggleReadonly(false);}if(dj.byId("bank_ifsc_img")){dj.byId("bank_ifsc_img").set("disabled",false);}if(dj.byId("currency")){dj.byId("currency").set("disabled",false);}d.style("PAB","display","none");_5f.clear();_60.clear();dj.byId("pre_approved_status").set("value","N");m.clearBeneficiaryAdviceFieldsForDefaultingFromBeneMaster();};function _66(){var _67=dj.byId("beneficiary_name");var _68=_67.get("value");var _69=_68.length;var _6a=null;var _6b=dj.byId("clearing_code");if(_6b.get("value")===""){_67.set("value","");m.dialog.show("ERROR",m.getLocalization("selectClearingCode"));return false;}if(_68!==""){if(dj.byId("pre_approved_status")&&dj.byId("pre_approved_status").get("value")==="Y"){if(m._config.non_pab_allowed){d.style("PAB","display","inline");}else{d.style("PAB","display","none");}if(dj.byId("bank_ifsc_img")){dj.byId("bank_ifsc_img").set("disabled",true);}_5f.toggleReadonly(true);}else{d.style("PAB","display","none");_5f.toggleReadonly(true);dj.byId("cpty_bank_swift_bic_code").set("readOnly",true);if((dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")==="")||(dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")===null)){_5f.toggleReadonly(false);if(dj.byId("bank_ifsc_img")){dj.byId("bank_ifsc_img").set("disabled",false);}}else{_5f.toggleReadonly(true);if(dj.byId("bank_ifsc_img")){dj.byId("bank_ifsc_img").set("disabled",true);}}}return true;}};function _6c(){var _6d=dj.byId("beneficiary_name")?dj.byId("beneficiary_name"):"";var _6e=_6d.get("value");var _6f=_6e.length;if(_6f<12){this.invalidMessage=m.getLocalization("invalidLengthForBeneficiaryNameMUPS");return false;}if(!_70(_6d)){this.invalidMessage=m.getLocalization("invalidBeneficiaryNameforMUPS");return false;}return true;};function _70(_71){var _72=dj.byId("beneficiary_acc_name_regex_mups");var _73=_72?dj.byId("beneficiary_acc_name_regex_mups").get("value"):"";var _74=new RegExp(_73);var _75=false;var _76=dj.byId(_71);var _77=_76?_76.get("value"):"";if(_73!==null&&_73!==""){if(_77!==""&&_77!==null){_75=_74.test(_77);return _75;}}return _75;};function _78(){var _79=dj.byId("notify_beneficiary").get("checked");var _7a=dj.byId("notify_beneficiary_choice_1");var _7b=dj.byId("notify_beneficiary_choice_2");var _7c=dj.byId("notify_beneficiary_email");_7a.set("disabled",!_79);_7b.set("disabled",!_79);_7c.set("disabled",true);_7a.set("checked",_79);_7b.set("checked",false);_7c.set("value","");var _7d=d.byId("notify_beneficiary_email_node");var _7e=d.byId("label_notify_beneficiary_choice_1");d.place(_7d,_7e,"after");var _7f=dj.byId("bene_email_1").get("value");if(!_7f){_7f=dj.byId("bene_email_2").get("value");}if(_7f&&_79){_7c.set("value",_7f);_7c.set("readOnly",true);}if(!_7f&&_79){if(dj.byId("beneficiary_name")&&dj.byId("beneficiary_name").get("value")===""){m.dialog.show("ERROR",m.getLocalization("noBeneficiaryEmail"));}_7b.set("checked",true);var _80=d.byId("label_notify_beneficiary_choice_2");d.place(_7d,_80,"after");_7c.set("disabled",false);}m.toggleRequired("notify_beneficiary_email",_79);m.toggleRequired("notify_beneficiary_choice_1",_79);m.toggleRequired("notify_beneficiary_choice_2",_79);};function _81(){var _82=dj.byId("notify_beneficiary_choice_2").get("checked")&&!dj.byId("notify_beneficiary_choice_2").get("disabled");var _83=dj.byId("notify_beneficiary_email");var _84=dj.byId("notify_beneficiary_choice_1");var _85=dj.byId("notify_beneficiary_choice_2");var _86=d.byId("notify_beneficiary_email_node");var _87=d.byId("label_notify_beneficiary_choice_1");var _88=d.byId("label_notify_beneficiary_choice_2");var _89=dj.byId("bene_email_1").get("value");if(!_89){_89=dj.byId("bene_email_2").get("value");}if(_82){d.place(_86,_88,"after");_83.set("disabled",false);}else{if(!_89){m.dialog.show("ERROR",m.getLocalization("noBeneficiaryEmail"));_85.set("checked",true);_83.set("disabled",false);}else{d.place(_86,_87,"after");}}if(_89&&!_82){_83.set("value",_89);_83.set("readOnly",true);}else{_83.set("value","");_83.set("readOnly",false);_83.set("disabled",false);}};function _8a(){var _8b=dj.byId("applicant_act_pab").get("value");if(_8b=="Y"){dj.byId("beneficiary_name").set("readOnly",true);dj.byId("beneficiary_account").set("readOnly",true);dj.byId("cpty_bank_swift_bic_code").set("readOnly",true);if(dj.byId("bank_ifsc_img")){dj.byId("bank_ifsc_img").set("disabled",true);}}else{if(m._config.non_pab_allowed){dj.byId("beneficiary_name").set("readOnly",false);dj.byId("beneficiary_account").set("readOnly",false);dj.byId("cpty_bank_swift_bic_code").set("readOnly",false);}else{dj.byId("beneficiary_name").set("readOnly",true);dj.byId("beneficiary_account").set("readOnly",true);dj.byId("cpty_bank_swift_bic_code").set("readOnly",true);if(dj.byId("bank_ifsc_img")){dj.byId("bank_ifsc_img").set("disabled",true);}}}dojo.forEach(["pre_approved","ft_amt","beneficiary_account","pre_approved_status","","","cpty_bank_name","cpty_bank_address_line_1","cpty_bank_address_line_2","cpty_bank_dom","cpty_branch_address_line_1","cpty_branch_address_line_2","cpty_branch_dom","","","cpty_bank_swift_bic_code","cpty_bank_code","cpty_branch_code","cpty_branch_name","","beneficiary_name","","","bene_adv_beneficiary_id_no_send","bene_adv_mailing_name_add_1_no_send","bene_adv_mailing_name_add_2_no_send","bene_adv_mailing_name_add_3_no_send","bene_adv_mailing_name_add_4_no_send","bene_adv_mailing_name_add_5_no_send","bene_adv_mailing_name_add_6_no_send","bene_adv_postal_code_no_send","bene_adv_country_no_send","bene_email_1","bene_email_2","beneficiary_postal_code","beneficiary_country","bene_adv_fax_no_send","bene_adv_ivr_no_send","bene_adv_phone_no_send","clearing_code"],function(_8c){if(dj.byId(_8c)){dj.byId(_8c).set("value","");}});if(d.byId(_5)&&(d.style(d.byId(_5),"display")!=="none")){m.animate("wipeOut",d.byId(_5));}d.style("PAB","display","none");if(d.byId("clear_img")){if(_8b=="Y"&&d.style(d.byId("clear_img"),"display")!=="none"){m.animate("wipeOut",d.byId("clear_img"));}else{if(_8b=="N"&&d.style(d.byId("clear_img"),"display")=="none"){m.animate("wipeIn",d.byId("clear_img"));}}}};function _8d(){var _8e=dj.byId("applicant_act_no").get("value");var _8f=dj.byId("clearing_code").get("value");if(_8e===""){m.dialog.show("ERROR",m.getLocalization("selectDebitFirst"));return;}if(_8f===""){m.dialog.show("ERROR",m.getLocalization("selectClearingCode"));return;}var _90=dj.byId("entity")?dj.byId("entity").get("value"):"";var _91=dijit.byId("sub_product_code").get("value");_8f=dj.byId("clearing_code").get("value");m.showSearchDialog("ifsc_beneficiary_accounts","['pre_approved_status','pre_approved', 'beneficiary_name','beneficiary_account','beneficiary_act_cur_code', 'beneficiary_address', 'beneficiary_city', '', 'beneficiary_dom','','', "+"'cpty_bank_name', 'cpty_bank_address_line_1', 'cpty_bank_address_line_2', 'cpty_bank_dom', 'cpty_branch_address_line_1', 'cpty_branch_address_line_2', 'cpty_branch_dom','','', "+"'cpty_bank_swift_bic_code', 'cpty_bank_code','cpty_branch_code', 'cpty_branch_name','','','bene_adv_beneficiary_id_no_send', "+"'bene_adv_mailing_name_add_1_no_send','bene_adv_mailing_name_add_2_no_send','bene_adv_mailing_name_add_3_no_send','bene_adv_mailing_name_add_4_no_send', "+"'bene_adv_mailing_name_add_5_no_send','bene_adv_mailing_name_add_6_no_send','bene_adv_postal_code_no_send','bene_adv_country_no_send','bene_email_1',"+"'bene_email_2','beneficiary_postal_code','beneficiary_country','bene_adv_fax_no_send',  'bene_adv_phone_no_send','beneficiary_nickname']",{product_type:_91,entity_name:_90,pabAccStat:dijit.byId("applicant_act_pab").get("value"),debitAcctNo:_8e,clearing_code:_8f},"",_91,"width:710px;height:350px;",m.getLocalization("ListOfBeneficiriesTitleMessage"));if(dj.byId("pre_approved_status")&&dj.byId("pre_approved_status").get("value")==="Y"){if(dj.byId("bank_ifsc_img")){dj.byId("bank_ifsc_img").set("disabled",true);}}else{d.style("PAB","display","none");if((dj.byId("pre_approved_status")&&dj.byId("pre_approved_status").get("value")==="N")&&(dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")!=="")){if(dj.byId("bank_ifsc_img")){dj.byId("bank_ifsc_img").set("disabled",true);}}else{if((dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")==="")||(dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")===null)){if(dj.byId("bank_ifsc_img")){dj.byId("bank_ifsc_img").set("disabled",false);}}}}};function _92(){var _93=null;var _94=dj.byId("customer_bank").get("value");if(misys&&misys._config&&misys._config.businessDateForBank&&misys._config.businessDateForBank[_94]&&misys._config.businessDateForBank[_94][0]&&misys._config.businessDateForBank[_94][0].value!==""){var _95=misys._config.businessDateForBank[_94][0].value;var _96=_95.substring(0,4);var _97=_95.substring(5,7);var _98=_95.substring(8,10);_95=_98+"/"+_97+"/"+_96;var _99=new Date(_96,_97-1,_98);if(dj.byId("option_for_tnx")&&dj.byId("option_for_tnx").get("value")==="SCRATCH_DOM"){dj.byId("appl_date").set("value",_95);document.getElementById("appl_date_view_row").childNodes[1].innerHTML=_95;dj.byId("appl_date_hidden").set("value",_99);}dj.byId("todays_date").set("value",_99);}if(!_2&&!_3){dj.byId("applicant_act_name").set("value","");dj.byId("beneficiary_name").set("value","");dj.byId("beneficiary_account").set("value","");dj.byId("cpty_bank_swift_bic_code").set("value","");dj.byId("cpty_bank_name").set("value","");dj.byId("cpty_bank_address_line_1").set("value","");dj.byId("cpty_bank_address_line_2").set("value","");dj.byId("cpty_bank_dom").set("value","");dj.byId("ft_amt").set("value","");dj.byId("iss_date").set("value",null);dj.byId("issuing_bank_abbv_name").set("value",_94);_93=misys._config.customerBankDetails[_94][0].value;dj.byId("issuing_bank_name").set("value",_93);}if(!_2){dj.byId("issuing_bank_abbv_name").set("value",_94);_93=misys._config.customerBankDetails[_94][0].value;dj.byId("issuing_bank_name").set("value",_93);}_2=false;if(dj.byId("customer_bank")&&_94!==""){_3=false;if(dj.byId("issuing_bank_abbv_name").get("value")!==""){_93=misys._config.customerBankDetails[_94][0].value;dj.byId("issuing_bank_name").set("value",_93);}}m.initializeFX(dj.byId("sub_product_code").get("value"),dj.byId("issuing_bank_abbv_name").get("value"));if(dj.byId("applicant_act_cur_code")&&dj.byId("applicant_act_cur_code").get("value")!==""&&dj.byId("ft_cur_code")&&dj.byId("ft_cur_code").get("value")!==""&&dj.byId("applicant_act_cur_code").get("value")!==dj.byId("ft_cur_code").get("value")&&!isNaN(dj.byId("ft_amt").get("value"))){m.onloadFXActions();}else{m.defaultBindTheFXTypes();}_9a();};function _9b(){var _9c=dj.byId("sub_product_code"),_9d=dj.byId("beneficiary_account"),_9e=dj.byId("beneficiary_act_cur_code");var _9f=false;m.xhrPost({url:misys.getServletURL("/screen/AjaxScreen/action/ValidateBeneficiaryMasterAccount"),handleAs:"json",sync:true,content:{account_number:_9d.get("value"),account_cur_code:_9e.get("value"),sub_product_code:_9c.get("value")},load:function(_a0,_a1){switch(_a0.items.StatusCode){case "OK":_9e.set("value",_a0.items.AcctCur);_9f=true;break;case "ERR_INVALID_ACCOUNT_NUMBER":_5e=misys.getLocalization("invalidAccountNumber",[_9d.get("value")]);_9d.focus();_9d.set("value","");_9d.set("state","Error");dj.hideTooltip(_9d.domNode);dj.showTooltip(_5e,_9d.domNode,0);break;case "ERR_INVALID_INTERFACE_PROCESSING_ERROR":_5e=misys.getLocalization("accountValidationInterfaceError");_9d.focus();_9d.set("value","");_9d.set("state","Error");dj.hideTooltip(_9d.domNode);dj.showTooltip(_5e,_9d.domNode,0);break;default:_5e=_a0.items.StatusCodeMessage;_9d.focus();_9d.set("value","");_9d.set("state","Error");dj.hideTooltip(_9d.domNode);dj.showTooltip(_5e,_9d.domNode,0);break;}},error:function(_a2,_a3){console.error("[Could not validate Beneficiary Account] "+_9d.get("value"));console.error(_a2);}});return _9f;};function _9a(){var _a4=dj.byId("sub_product_code").get("value");if(m._config.fxParamData&&dj.byId("issuing_bank_abbv_name")&&dj.byId("issuing_bank_abbv_name").get("value")!==""&&m._config.fxParamData[_a4][dj.byId("issuing_bank_abbv_name").get("value")].isFXEnabled==="Y"){m.connect("ft_cur_code","onChange",function(){m.setCurrency(this,["ft_amt"]);if(dj.byId("ft_cur_code").get("value")!==""&&!isNaN(dj.byId("ft_amt").get("value"))){m.fireFXAction();}else{if(d.byId(_5)&&(d.style(d.byId(_5),"display")!=="none")){m.animate("wipeOut",d.byId(_5));}m.defaultBindTheFXTypes();}});m.connect("ft_cur_code","onChange",function(){m.setCurrency(this,["ft_amt"]);if(dj.byId("ft_cur_code").get("value")!==""&&!isNaN(dj.byId("ft_amt").get("value"))){m.fireFXAction();}else{m.defaultBindTheFXTypes();}});m.connect("ft_amt","onBlur",function(){m.setTnxAmt(this.get("value"));var _a5="";if(dj.byId("ft_cur_code")){_a5=dj.byId("ft_cur_code").get("value");}if(!isNaN(dj.byId("ft_amt").get("value"))&&_a5!==""){m.fireFXAction();}else{m.defaultBindTheFXTypes();}});}else{if(d.byId(_5)){d.style(_5,"display","none");}}if(dijit.byId("ft_cur_code")&&dijit.byId("ft_amt")){misys.setCurrency(dijit.byId("ft_cur_code"),["ft_amt"]);}};function _a6(){var _a7=dj.byId("applicant_act_cur_code").get("value");var _a8=dj.byId("beneficiary_act_cur_code").get("value");if(_a7!==""&&_a8!=""&&_a7!==_a8){m.dialog.show("ERROR",m.getLocalization("mismatchFrom"));dj.byId("applicant_act_pab").set("value","");dj.byId("applicant_act_name").set("value","");dj.byId("applicant_act_cur_code").set("value","");dj.byId("applicant_act_no").set("value","");dj.byId("beneficiary_name").set("value","");dj.byId("beneficiary_account").set("value","");if(dj.byId("cpty_bank_name")){dj.byId("cpty_bank_name").set("value","");}return;}else{dj.byId("ft_cur_code").set("value",_a8);return;}};d.mixin(m._config,{initReAuthParams:function(){var _a9={productCode:"FT",subProductCode:dj.byId("sub_product_code")?dj.byId("sub_product_code").get("value"):"",transactionTypeCode:"01",entity:dj.byId("entity")?dj.byId("entity").get("value"):"",currency:dj.byId("ft_cur_code")?dj.byId("ft_cur_code").get("value"):"",amount:dj.byId("ft_amt")?m.trimAmount(dj.byId("ft_amt").get("value")):"",bankAbbvName:dj.byId("customer_bank")?dj.byId("customer_bank").get("value"):"",es_field1:dj.byId("ft_amt")?m.trimAmount(dj.byId("ft_amt").get("value")):"",es_field2:(dj.byId("beneficiary_account"))?dj.byId("beneficiary_account").get("value"):""};return _a9;}});d.mixin(m,{fireFXAction:function(){if(m._config.fxParamData&&dj.byId("sub_product_code")&&dj.byId("sub_product_code").get("value")!==""&&dj.byId("issuing_bank_abbv_name")&&dj.byId("issuing_bank_abbv_name").get("value")!==""){var _aa=m._config.fxParamData[dj.byId("sub_product_code").get("value")][dj.byId("issuing_bank_abbv_name").get("value")];if(m._config.fxParamData&&_aa.isFXEnabled==="Y"){var _ab,_ac;var _ad="";if(dj.byId("ft_cur_code")){_ad=dj.byId("ft_cur_code").get("value");}var _ae=dj.byId("ft_amt").get("value");var _af=dj.byId("applicant_act_cur_code").get("value");var _b0=m._config.productCode;var _b1="";if(dj.byId("issuing_bank_abbv_name")&&dj.byId("issuing_bank_abbv_name").get("value")!==""){_b1=dj.byId("issuing_bank_abbv_name").get("value");}var _b2=dj.byId("applicant_act_cur_code").get("value");var _b3=false;if(_ad!==""&&!isNaN(_ae)&&_b0!==""&&_b1!==""){if(_ad!==_af){_ab=_af;_ac=_ad;_b2=_af;}if(_ab&&_ab!==""&&_ac&&_ac!==""){if(d.byId(_5)&&(d.style(d.byId(_5),"display")==="none")){m.animate("wipeIn",d.byId(_5));}m.fetchFXDetails(_ab,_ac,_ae,_b0,_b1,_b2,_b3);if(dj.byId("fx_rates_type_1")&&dj.byId("fx_rates_type_1").get("checked")){if(isNaN(dj.byId("fx_exchange_rate").get("value"))||dj.byId("fx_exchange_rate_cur_code").get("value")===""||isNaN(dj.byId("fx_exchange_rate_amt").get("value"))||(m._config.fxParamData[dj.byId("sub_product_code").get("value")][dj.byId("issuing_bank_abbv_name").get("value")].toleranceDispInd==="Y"&&(isNaN(dj.byId("fx_tolerance_rate").get("value"))||isNaN(dj.byId("fx_tolerance_rate_amt").get("value"))||dj.byId("fx_tolerance_rate_cur_code").get("value")===""))){_6(m.getLocalization("FXDefaultErrorMessage"));}}}else{if(d.byId(_5)&&(d.style(d.byId(_5),"display")!=="none")){m.animate("wipeOut",d.byId(_5));}m.defaultBindTheFXTypes();}}}}},bind:function(){_d();m.setValidation("iss_date",m.validateTransferDateCustomer);m.connect("applicant_act_name","onChange",m.checkNickNameDiv);m.connect("beneficiary_name","onChange",m.checkBeneficiaryNicknameDiv);m.setValidation("template_id",m.validateTemplateId);m.connect("clearing_code","onChange",function(){if(dj.byId("clearing_code").get("value")!=""&&dj.byId("cpty_bank_swift_bic_code").get("value")!=""){if(_1b()){_2a();}}});m.connect("cpty_bank_swift_bic_code","onBlur",function(){var _b4=dj.byId("cpty_bank_swift_bic_code"),_b5=dj.byId("clearing_code"),_b6="";var _b7=false;var _b8="^[a-zA-z]*$";var _b9=new RegExp(_b8);var _ba=_b4.get("value");var _bb=_ba.substring(0,4);_b7=_b9.test(_bb);if(!_b7){_b6=misys.getLocalization("invalidformat");dj.hideTooltip(_b4.domNode);_b4.set("state","Error");dj.showTooltip(_b6,_b4.domNode,0);}if(_b4.get("value")!==""&&_b4.get("value").length<11){_b7=false;_b6=misys.getLocalization("invalidformat");dj.hideTooltip(_b4.domNode);_b4.set("state","Error");dj.showTooltip(_b6,_b4.domNode,0);}if(_b7&&_b4.get("value")!==""&&_b5.get("value")!==""){_d();}});m.connect("iss_date","onClick",function(){m.clearDateCache();if(misys._config.isMultiBank){var _bc;if(dijit.byId("customer_bank")){_bc=dijit.byId("customer_bank").get("value");}if(_bc!==""&&misys&&misys._config&&misys._config.businessDateForBank&&misys._config.businessDateForBank[_bc][0]&&misys._config.businessDateForBank[_bc][0].value!==""){var _bd=parseInt(misys._config.businessDateForBank[_bc][0].value.substring(0,4),10);var _be=parseInt(misys._config.businessDateForBank[_bc][0].value.substring(5,7),10);var _bf=parseInt(misys._config.businessDateForBank[_bc][0].value.substring(8,10),10);this.dropDown.currentFocus=new Date(_bd,_be-1,_bf);}}});m.connect("applicant_act_no","onChange",_8a);m.connect("entity","onClick",m.validateRequiredField);m.connect("applicant_act_name","onClick",m.validateRequiredField);m.connect("beneficiary_name","onClick",m.validateRequiredField);m.connect("beneficiary_act_cur_code","onClick",m.validateRequiredField);m.connect("beneficiary_account","onClick",m.validateRequiredField);m.connect("cpty_bank_swift_bic_code","onClick",m.validateRequiredField);m.connect("mups_description_address_line_1","onBlur",function(){var _c0=null,_c1=dj.byId("mups_description_address_line_1"),_c2=dj.byId("mups_description_address_line_2"),_c3=dj.byId("mups_description_address_line_3"),_c4=dj.byId("mups_description_address_line_4");if(_c1.get("value")!==""){_c2.set("state","");dj.hideTooltip(_c2.domNode);_c3.set("state","");dj.hideTooltip(_c3.domNode);_c4.set("state","");dj.hideTooltip(_c4.domNode);}});m.connect("mups_description_address_line_2","onBlur",function(){var _c5=null,_c6=dj.byId("mups_description_address_line_1"),_c7=dj.byId("mups_description_address_line_2");if(_c6.get("value")===""){_c5=misys.getLocalization("invaliddescriptionaddressline");_c7.set("state","Error");dj.showTooltip(_c5,_c7.domNode,0);var _c8=function(){dj.hideTooltip(_c7.domNode);};setTimeout(_c8,5000);}});m.connect("mups_description_address_line_3","onBlur",function(){var _c9=null,_ca=dj.byId("mups_description_address_line_1"),_cb=dj.byId("mups_description_address_line_2"),_cc=dj.byId("mups_description_address_line_3");if(_ca.get("value")===""||_cb.get("value")===""){_c9=misys.getLocalization("invaliddescriptionaddressline");_cc.set("state","Error");dj.showTooltip(_c9,_cc.domNode,0);var _cd=function(){dj.hideTooltip(_cc.domNode);};setTimeout(_cd,5000);}});m.connect("mups_description_address_line_4","onBlur",function(){var _ce=null,_cf=dj.byId("mups_description_address_line_1"),_d0=dj.byId("mups_description_address_line_2"),_d1=dj.byId("mups_description_address_line_3"),_d2=dj.byId("mups_description_address_line_4");if(_cf.get("value")===""||_d0.get("value")===""||_d1.get("value")===""){_ce=misys.getLocalization("invaliddescriptionaddressline");_d2.set("state","Error");dj.showTooltip(_ce,_d2.domNode,0);var _d3=function(){dj.hideTooltip(_d2.domNode);};setTimeout(_d3,5000);}});m.connect("mups_description_address_line_1","onBlur",_31);m.connect("mups_description_address_line_2","onBlur",_31);m.connect("mups_description_address_line_3","onBlur",_31);m.connect("mups_description_address_line_4","onBlur",_31);dj.byId("sub_product_code").set("value","MUPS");m.bindRecurringFields();m.connect("ft_cur_code","onChange",function(){if(dj.byId("iss_date")&&dj.byId("iss_date").get("value")!==""){dj.byId("iss_date").validate();}if(dj.byId("recurring_start_date")&&dj.byId("recurring_start_date").get("value")!==""){dj.byId("recurring_start_date").validate();}m.setCurrency(this,["ft_amt"]);});m.setValidation("ft_cur_code",m.validateCurrency);m.connect("ft_amt","onBlur",_2a);m.connect("beneficiary_account","onChange",_9b);m.connect("entity","onChange",function(){_3=true;dj.byId("applicant_act_name").set("value","");dj.byId("beneficiary_name").set("value","");dj.byId("beneficiary_nickname").set("value","");dj.byId("applicant_act_nickname").set("value","");dj.byId("beneficiary_account").set("value","");dj.byId("cpty_bank_swift_bic_code").set("value","");dj.byId("cpty_bank_name").set("value","");dj.byId("cpty_bank_address_line_1").set("value","");dj.byId("cpty_bank_address_line_2").set("value","");dj.byId("cpty_bank_dom").set("value","");dj.byId("ft_amt").set("value","");dj.byId("iss_date").set("value",null);if(misys._config.isMultiBank&&dj.byId("customer_bank")){dj.byId("customer_bank").set("value","");m.populateCustomerBanks();}});m.connect("customer_bank","onChange",function(){m.handleMultiBankRecurring(_4);_4=false;});if(dj.byId("bulk_ref_id")&&dj.byId("bulk_ref_id").get("value")!==""&&dj.byId("issuing_bank_abbv_name")&&dj.byId("issuing_bank_abbv_name").get("value")!==""){m.initializeFX(dj.byId("sub_product_code").get("value"),dj.byId("issuing_bank_abbv_name").get("value"));if(dj.byId("applicant_act_cur_code")&&dj.byId("applicant_act_cur_code").get("value")!==""&&dj.byId("ft_cur_code")&&dj.byId("ft_cur_code").get("value")!==""&&dj.byId("applicant_act_cur_code").get("value")!==dj.byId("ft_cur_code").get("value")&&!isNaN(dj.byId("ft_amt").get("value"))){m.onloadFXActions();}else{m.defaultBindTheFXTypes();}_9a();}else{m.connect("customer_bank","onChange",_92);}m.connect("applicant_act_name","onChange",function(){if(dj.byId("customer_bank")&&dj.byId("applicant_act_name")&&dj.byId("applicant_act_name").get("value")!==""){dj.byId("customer_bank").set("value",m._config.customerBankName);}_a6();});m.connect("clear_img","onClick",function(){_64();if(dj.byId("notify_beneficiary_email")){dj.byId("notify_beneficiary").set("checked",false);dj.byId("notify_beneficiary_choice_1").set("checked",false);dj.byId("notify_beneficiary_choice_2").set("checked",false);dj.byId("notify_beneficiary_choice_1").set("disabled",true);dj.byId("notify_beneficiary_choice_2").set("disabled",true);dj.byId("notify_beneficiary_email").set("value","");dj.byId("notify_beneficiary_email").set("disabled",true);dj.byId("bene_email_1").set("value","");dj.byId("bene_email_2").set("value","");}});m.connect("beneficiary_img","onClick",_8d);m.setValidation("beneficiary_name",_6c);m.connect("beneficiary_name","onChange",function(){_66();if(dj.byId("notify_beneficiary_email")&&dj.byId("notify_beneficiary").get("checked")){if(dj.byId("notify_beneficiary_choice_1").get("checked")){if(dj.byId("bene_email_1").get("value")!==""){dj.byId("notify_beneficiary_email").set("value",dj.byId("bene_email_1").get("value"));}else{if(dj.byId("bene_email_2").get("value")!==""){dj.byId("notify_beneficiary_email").set("value",dj.byId("bene_email_2").get("value"));}else{dj.byId("notify_beneficiary").set("checked",false);dj.byId("notify_beneficiary_choice_1").set("checked",false);dj.byId("notify_beneficiary_email").set("value","");dj.byId("notify_beneficiary_email").set("disabled",true);}}}else{if(dj.byId("notify_beneficiary_choice_2").get("checked")){dj.byId("notify_beneficiary_email").set("value","");dj.byId("notify_beneficiary_choice_2").set("disabled",true);dj.byId("notify_beneficiary_choice_2").set("checked",false);dj.byId("notify_beneficiary").set("checked",false);}}}});m.connect("cpty_bank_swift_bic_code","onChange",_43);m.connect("cpty_bank_name","onBlur",_43);m.connect("cpty_bank_address_line_1","onBlur",_43);m.connect("cpty_bank_address_line_2","onBlur",_43);m.connect("cpty_bank_dom","onBlur",_43);m.connect("recurring_flag","onClick",function(){m.showRecurring();});m.connect("notify_beneficiary","onClick",_78);m.connect("notify_beneficiary_choice_1","onClick",_81);m.connect("notify_beneficiary_choice_2","onClick",_81);m.setValidation("notify_beneficiary_email",m.validateEmailAddr);var _d4=dj.byId("sub_product_code").get("value");if(dj.byId("issuing_bank_abbv_name")&&dj.byId("issuing_bank_abbv_name").get("value")!==""&&m._config.fxParamData&&m._config.fxParamData[_d4][dj.byId("issuing_bank_abbv_name").get("value")].isFXEnabled==="Y"){m.connect("ft_cur_code","onBlur",function(){m.setCurrency(this,["ft_amt"]);if(dj.byId("ft_cur_code").get("value")!==""&&!isNaN(dj.byId("ft_amt").get("value"))){m.fireFXAction();}else{m.defaultBindTheFXTypes();}});m.connect("ft_cur_code","onChange",function(){m.setTnxCurCode(dj.byId("ft_cur_code").get("value"));m.setCurrency(this,["ft_amt"]);if(dj.byId("ft_cur_code").get("value")!==""&&!isNaN(dj.byId("ft_amt").get("value"))){m.fireFXAction();}else{m.defaultBindTheFXTypes();}});m.connect("ft_amt","onBlur",function(){m.setTnxAmt(this.get("value"));var _d5="";if(dj.byId("ft_cur_code")){_d5=dj.byId("ft_cur_code").get("value");}if(!isNaN(dj.byId("ft_amt").get("value"))&&_d5!==""){m.fireFXAction();}else{m.defaultBindTheFXTypes();}});}else{if(d.byId(_5)){d.style(_5,"display","none");}}if(dijit.byId("ft_cur_code")&&dijit.byId("ft_amt")){misys.setCurrency(dijit.byId("ft_cur_code"),["ft_amt"]);}m.connect("bene_adv_beneficiary_id_no_send","onChange",function(){var _d6=dj.byId("bene_adv_beneficiary_id_no_send").get("value");if(_d6){dj.byId("bene_adv_beneficiary_id").set("value",_d6);}});},onFormLoad:function(){m.setCurrency(dj.byId("ft_cur_code"),["ft_amt"]);if(dj.byId("bulk_ref_id")&&dj.byId("bulk_ref_id").get("value")!==""){dj.byId("clearing_code").set("readOnly",true);}if(dj.byId("beneficiary_act_cur_code")){dj.byId("beneficiary_act_cur_code").set("value","INR");dj.byId("beneficiary_act_cur_code").set("readOnly",true);}if(dj.byId("ft_cur_code")){dj.byId("ft_cur_code").set("value","INR");dj.byId("ft_cur_code").set("readOnly",true);}m.initForm();if(misys._config.nickname==="true"&&dj.byId("applicant_act_nickname")&&dj.byId("applicant_act_nickname").get("value")!==""&&d.byId("nickname")){m.animate("fadeIn",d.byId("nickname"));d.style("nickname","display","inline");d.byId("nickname").innerHTML=dj.byId("applicant_act_nickname").get("value");}else{m.animate("fadeOut",d.byId("applicant_act_nickname_row"));}m.checkBeneficiaryNicknameOnFormLoad();if(dj.byId("customer_bank")&&dj.byId("customer_bank").get("value")!==""&&misys&&misys._config&&misys._config.businessDateForBank&&misys._config.businessDateForBank[dj.byId("customer_bank").get("value")]&&misys._config.businessDateForBank[dj.byId("customer_bank").get("value")][0]&&misys._config.businessDateForBank[dj.byId("customer_bank").get("value")][0].value!==""){var _d7=misys._config.businessDateForBank[dj.byId("customer_bank").get("value")][0].value;var _d8=_d7.substring(0,4);var _d9=_d7.substring(5,7);var _da=_d7.substring(8,10);_d7=_da+"/"+_d9+"/"+_d8;var _db=new Date(_d8,_d9-1,_da);if(dj.byId("option_for_tnx")&&dj.byId("option_for_tnx").get("value")==="SCRATCH"){dj.byId("appl_date").set("value",_d7);document.getElementById("appl_date_view_row").childNodes[1].innerHTML=_d7;if(dj.byId("appl_date_hidden")){dj.byId("appl_date_hidden").set("value",_db);}}if(dj.byId("todays_date")){dj.byId("todays_date").set("value",_db);}}if(dj.byId("notify_beneficiary").get("checked")&&dj.byId("notify_beneficiary_choice_1").get("checked")&&(dijit.byId("mode").value==="DRAFT")){var _dc=d.byId("notify_beneficiary_email_node");var _dd=d.byId("label_notify_beneficiary_choice_2");_81();if(dj.byId("notify_beneficiary_choice_2").get("checked")){d.place(_dc,_dd,"after");}}if(misys._config.isMultiBank){m.populateCustomerBanks(true);var _de=dj.byId("customer_bank");var _df=dj.byId("customer_bank_hidden");var _e0=dj.byId("entity");if(_de&&_df){_de.set("value",_df.get("value"));}if(dj.byId("issuing_bank_abbv_name")&&dj.byId("issuing_bank_abbv_name").get("value")!==""){_2=true;_3=true;_de.set("value",dj.byId("issuing_bank_abbv_name").get("value"));_df.set("value",dj.byId("issuing_bank_abbv_name").get("value"));}if(_e0&&_e0.get("value")===""&&_de){_de.set("disabled",true);_de.set("required",false);}if(misys._config.perBankRecurringAllowed&&dojo.byId("recurring_payment_checkbox")&&dj.byId("customer_bank")){if(dj.byId("customer_bank").get("value")===""){m.animate("fadeOut",dojo.byId("recurring_payment_checkbox"));}else{if(dj.byId("customer_bank").get("value")!==""&&misys._config.perBankRecurringAllowed[dj.byId("customer_bank").get("value")]!=="Y"){m.animate("fadeOut",dojo.byId("recurring_payment_checkbox"));}}}if(d.byId("server_message")&&d.byId("server_message").innerHTML!==""||dijit.byId("option_for_tnx")&&(dijit.byId("option_for_tnx").get("value")===""||dijit.byId("option_for_tnx").get("value")==="TEMPLATE")){_4=true;}if(dijit.byId("recurring_frequency")&&dijit.byId("customer_bank").get("value")!==""&&misys._config.perBankFrequency){var _e1=misys._config.perBankFrequency[dijit.byId("customer_bank").get("value")];if(_e1){dijit.byId("recurring_frequency").store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_e1}});dijit.byId("recurring_frequency").fetchProperties={sort:[{attribute:"name"}]};}dijit.byId("recurring_frequency").set("value",dijit.byId("recurring_frequency")._lastQuery);}}if(dj.byId("applicant_act_product_types")&&dj.byId("applicant_act_no").get("value")!==""){m.toggleRequired("applicant_act_product_types",false);}var _e2=dj.byId("notify_beneficiary_email");var _e3=dj.byId("notify_beneficiary_choice");if(_e2&&_e2.get("value")!==""&&_e3&&(_e3.get("value")=="default_email")){dj.byId("bene_email_1").set("value",_e2.get("value"));}if(dj.byId("recurring_payment_enabled")&&dj.byId("recurring_payment_enabled").get("checked")){dj.byId("recurring_flag").set("checked",true);m._config.clearOnSecondCall=true;m.showSavedRecurringDetails(false);}else{if(d.byId("recurring_payment_div")){d.style("recurring_payment_div","display","none");}m.hasRecurringPayment();m.showSavedRecurringDetails(false);}if(!m._config.isMultiBank&&dj.byId("issuing_bank_abbv_name")&&dj.byId("issuing_bank_abbv_name").get("value")!==""&&m._config.fxParamData&&dj.byId("sub_product_code")&&dj.byId("sub_product_code").get("value")!==""&&dj.byId("sub_product_code").get("value")!=="IBG"){m.initializeFX(dj.byId("sub_product_code").get("value"),dj.byId("issuing_bank_abbv_name").get("value"));if(dj.byId("applicant_act_cur_code")&&dj.byId("applicant_act_cur_code").get("value")!==""&&dj.byId("ft_cur_code")&&dj.byId("ft_cur_code").get("value")!==""&&dj.byId("applicant_act_cur_code").get("value")!==dj.byId("ft_cur_code").get("value")){m.onloadFXActions();}else{m.defaultBindTheFXTypes();}}else{m.animate("fadeOut",_1);}if(d.byId(_5)){if(dj.byId("bulk_ref_id").get("value")!==""&&dj.byId("ft_cur_code").get("value")!==""&&!isNaN(dj.byId("ft_amt").get("value"))){m.initializeFX(dj.byId("sub_product_code").get("value"),dj.byId("issuing_bank_abbv_name").get("value"));m.fireFXAction();}else{if((dj.byId("fx_exchange_rate_cur_code")&&dj.byId("fx_exchange_rate_cur_code").get("value")!=="")||(dj.byId("fx_total_utilise_cur_code")&&dj.byId("fx_total_utilise_cur_code").get("value")!=="")){m.animate("wipeIn",d.byId(_5));}else{d.style(_5,"display","none");}}}},initForm:function(){dj.byId("sub_product_code").set("value","MUPS");var _e4=dj.byId("applicant_act_pab").get("value");if(_e4==="Y"||(dj.byId("pre_approved_status")&&dj.byId("pre_approved_status").get("value")==="Y")){if(m._config.non_pab_allowed){d.style("PAB","display","inline");}else{d.style("PAB","display","none");}_5f.toggleReadonly(true);if(dj.byId("bank_iso_img")){dj.byId("bank_iso_img").set("disabled",true);}if(dj.byId("bank_ifsc_img")){dj.byId("bank_ifsc_img").set("disabled",true);}if(dj.byId("currency")){dj.byId("currency").set("disabled",true);}}else{if((dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")==="")||(dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")===null)){_5f.toggleReadonly(false);if(dj.byId("bank_iso_img")){dj.byId("bank_iso_img").set("disabled",false);}if(dj.byId("bank_ifsc_img")){dj.byId("bank_ifsc_img").set("disabled",false);}if(dj.byId("currency")){dj.byId("currency").set("disabled",false);}}else{_5f.toggleReadonly(true);if(dj.byId("bank_iso_img")){dj.byId("bank_iso_img").set("disabled",true);}if(dj.byId("bank_ifsc_img")){dj.byId("bank_ifsc_img").set("disabled",true);}if(dj.byId("currency")){dj.byId("currency").set("disabled",true);}}}d.forEach(d.query(".CUR"),function(_e5,i){d.style(_e5,"display","inline");});dj.byId("beneficiary_mode").set("value","02");if(d.byId("clear_img")){if(_e4=="Y"&&d.style(d.byId("clear_img"),"display")!=="none"){m.animate("wipeOut",d.byId("clear_img"));}}},beforeSaveValidations:function(){var _e6=dj.byId("entity");if(_e6&&_e6.get("value")===""){return false;}else{return true;}},beforeSubmitValidations:function(){var _e7=dijit.byId("mode")?dijit.byId("mode").get("value"):"";if(_e7==="DRAFT"){if(!_9b()){return false;}if(!_1b()){return false;}}if((dj.byId("mups_description_address_line_1")&&dj.byId("mups_description_address_line_1").get("value")!=="")||(dj.byId("mups_description_address_line_2")&&dj.byId("mups_description_address_line_2").get("value")!=="")||(dj.byId("mups_description_address_line_3")&&dj.byId("mups_description_address_line_3").get("value")!=="")||(dj.byId("mups_description_address_line_4")&&dj.byId("mups_description_address_line_4").get("value")!=="")){if(!_31()){return false;}if(!_a()){return false;}}if(dj.byId("cpty_bank_swift_bic_code")&&dj.byId("cpty_bank_swift_bic_code").get("value")!==""&&(!_43())){return false;}if(dj.byId("ft_amt")){if(!m.validateAmount((dj.byId("ft_amt")))){m._config.onSubmitErrorMsg=m.getLocalization("amountcannotzero");dj.byId("ft_amt").set("value","");return false;}if(!_2a()){return false;}}if(dj.byId("beneficiary_name")&&!_66()){return false;}if(!m.isRecurringDetailsValidForSubmit()){return false;}if(dj.byId("issuing_bank_abbv_name")&&dj.byId("issuing_bank_abbv_name").get("value")!==""&&m._config.fxParamData&&m._config.fxParamData[dj.byId("sub_product_code").get("value")][dj.byId("issuing_bank_abbv_name").get("value")].isFXEnabled==="Y"){if(!m.fxBeforeSubmitValidation()){return false;}if(!_55()){return false;}}var _e8=dj.byId("applicant_act_no").get("value");var _e9=m.checkAccountStatus(_e8);if(!_e9){m._config.onSubmitErrorMsg=misys.getLocalization("accountStatusError");return false;}if(!dj.byId("bulk_ref_id").get("value")){var _ea=false;if(_e7==="DRAFT"){if(dj.byId("recurring_payment_enabled")&&dj.byId("recurring_payment_enabled").get("checked")){_ea=m.validateHolidaysAndCutOffTimeForMUPS("issuing_bank_abbv_name","sub_product_code",_e7,["Start Date"],["recurring_start_date"],"entity","ft_cur_code","ft_amt","clearing_code");}else{_ea=m.validateHolidaysAndCutOffTimeForMUPS("issuing_bank_abbv_name","sub_product_code",_e7,["Transfer Date"],["iss_date"],"entity","ft_cur_code","ft_amt","clearing_code");}}else{if(_e7==="UNSIGNED"){if(dj.byId("recurring_payment_enabled")&&dj.byId("recurring_payment_enabled").get("value")==="Y"){_ea=m.validateHolidaysAndCutOffTimeForMUPS("issuing_bank_abbv_name","sub_product_code_unsigned",_e7,["Start Date"],["recurring_start_date_unsigned"],"display_entity_unsigned","ft_cur_code_unsigned","ft_amt_unsigned","clearing_code");}else{_ea=m.validateHolidaysAndCutOffTimeForMUPS("issuing_bank_abbv_name","sub_product_code_unsigned",_e7,["Transfer Date"],["iss_date_unsigned"],"display_entity_unsigned","ft_cur_code_unsigned","ft_amt_unsigned","clearing_code");}}else{m._config.onSubmitErrorMsg=m.getLocalization("technicalErrorWhileValidatingBusinessDays");_ea=false;}}if(_ea){m._config.holidayCutOffEnabled=false;}return _ea;}else{return true;}},showProductBasedListOfBanksforMUPS:function(){var _eb=dijit.byId("product_type").get("value");var _ec=dj.byId("clearing_code")?dj.byId("clearing_code").get("value"):"";if(_ec!==""){misys.showSearchDialog("ifscCodeMUPS","['cpty_bank_swift_bic_code','cpty_bank_name', 'cpty_bank_address_line_1', 'cpty_bank_address_line_2', 'cpty_bank_dom']",{swiftcode:false,bankcode:false,clearingCode:_ec},"","","width:710px;height:350px;",m.getLocalization("ListOfBanksTitleMessage"),"","",true);}else{m.dialog.show("ERROR",m.getLocalization("selectClearingCode"));return;}}});})(dojo,dijit,misys);dojo.require("misys.client.binding.cash.create_ft_mups_client");}