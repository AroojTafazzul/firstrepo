/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.cash.select_payee_service"]){dojo._hasResource["misys.binding.cash.select_payee_service"]=true;dojo.provide("misys.binding.cash.select_payee_service");dojo.require("dojo.parser");dojo.require("dijit.layout.TabContainer");dojo.require("dijit.form.DateTextBox");dojo.require("misys.form.CurrencyTextBox");dojo.require("dijit.form.NumberTextBox");dojo.require("dijit.form.FilteringSelect");dojo.require("dijit.form.Form");dojo.require("dijit.form.Button");dojo.require("dijit.form.TextBox");dojo.require("misys.widget.Dialog");dojo.require("dijit.ProgressBar");dojo.require("dijit.form.ValidationTextBox");dojo.require("dijit.form.CheckBox");dojo.require("misys.form.PercentNumberTextBox");dojo.require("misys.form.SimpleTextarea");dojo.require("misys.widget.Collaboration");dojo.require("misys.form.common");dojo.require("misys.form.file");dojo.require("misys.validation.common");dojo.require("misys.binding.cash.ft_common");dojo.require("misys.form.BusinessDateTextBox");(function(d,dj,m){var _1=null;function _2(){dj.byId("biller").set("value","");dj.byId("biller").store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:m._config.payeeCollection}});};d.mixin(m._config,{});d.mixin(m,{bind:function(){m.connect("biller","onChange",function(){dj.byId("service").set("value","");var _3=misys._config.serviceCollection[dj.byId("biller").get("value")];dj.byId("service").store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_3}});});m.connect("bank","onChange",function(){dj.byId("biller").set("value","");dj.byId("service").set("value","");var _4=dj.byId("bank").get("value");var _5=dj.byId("biller");if(dj.byId("bank").get("value")!==""){dj.byId("biller").set("disabled",false);}_1=misys._config.bankBillerService[_4];if(_1){_5.store=new dojo.data.ItemFileReadStore({data:{identifier:"name",items:_1}});_5.fetchProperties={sort:[{attribute:"name"}]};}});m.connect("biller","onChange",function(){var _6=null;var _7=dj.byId("service");var _8;dj.byId("service").set("disabled",false);for(var i=0;i<_1.length;i++){var _9=_1[i];if(_9.name[0]===dj.byId("biller").get("value")){_8=_1[i].value;}}_6=misys._config.bankPayeeService[_8];if(_6){_7.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_6}});_7.fetchProperties={sort:[{attribute:"name"}]};}});},billService:function(){var _a=dijit.byId("service").get("value");if(_a){var _b=dijit.byId("featureid");if(_b){_b.set("value",_a);}var _c=document.realform.submit();}else{m.showTooltip(m.getLocalization("requiredToolTip"),d.byId("service"),0);}},onFormLoad:function(){_2();if(misys._config.isMultiBank&&dj.byId("bank")&&dj.byId("bank").get("value")===""){dj.byId("biller").set("disabled",true);dj.byId("service").set("disabled",true);}m.excludedMethods.push({object:m,method:"billService"});}});})(dojo,dijit,misys);dojo.require("misys.client.binding.cash.select_payee_service_client");}