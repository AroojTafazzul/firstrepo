/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.cash.create_remittance"]){dojo._hasResource["misys.binding.cash.create_remittance"]=true;dojo.provide("misys.binding.cash.create_remittance");dojo.require("dojo.parser");dojo.require("dijit.layout.TabContainer");dojo.require("dijit.form.DateTextBox");dojo.require("misys.form.CurrencyTextBox");dojo.require("dijit.form.NumberTextBox");dojo.require("dijit.form.FilteringSelect");dojo.require("dijit.form.Form");dojo.require("dijit.form.Button");dojo.require("dijit.form.TextBox");dojo.require("dijit.Dialog");dojo.require("dijit.ProgressBar");dojo.require("dijit.form.ValidationTextBox");dojo.require("dijit.form.CheckBox");dojo.require("misys.form.PercentNumberTextBox");dojo.require("misys.form.SimpleTextarea");dojo.require("misys.widget.Collaboration");dojo.require("misys.form.common");dojo.require("misys.form.file");dojo.require("misys.validation.common");dojo.require("misys.binding.cash.ft_common");dojo.require("misys.form.BusinessDateTextBox");dojo.require("misys.binding.core.beneficiary_advice_common");dojo.require("misys.validation.common");dojo.require("misys.binding.common.create_fx_multibank");dojo.require("misys.binding.cash.paymentFees");(function(d,dj,m){var _1=d.byId("fx-message-type");var _2=false;var _3=false;var _4=true;var _5=false;var _6="fx-section";var _7="Processing Date";var _8="<style='width:800px;height:1000px;overflow:auto;'>";var _9="<b><span class='legend'>";var _a="</span></b>";var _b=["intermediary_bank_swift_bic_code","intermediary_bank_name","intermediary_bank_address_line_1","intermediary_bank_address_line_2","intermediary_bank_dom","intermediary_bank_country"];var _c={},_d={},_e={};_c.fields=["ordering_institution_swift_bic_code","ordering_institution_name","ordering_institution_address_line_1","ordering_institution_address_line_2","ordering_institution_dom","ordering_institution_country","ordering_institution_account"];_c.clear=function(){d.forEach(this.fields,function(_f,i){if(dj.byId(_f)){dj.byId(_f).set("value","");}});};_d.fields=["ordering_customer_bank_swift_bic_code","ordering_customer_bank_name","ordering_customer_bank_address_line_1","ordering_customer_bank_address_line_2","ordering_customer_bank_dom","ordering_customer_bank_country","ordering_customer_bank_account"];_d.clear=function(){d.forEach(this.fields,function(_10,i){if(dj.byId(_10)){dj.byId(_10).set("value","");}});};_e.fields=["beneficiary_swift_bic_code","beneficiary_name","beneficiary_address","beneficiary_city","beneficiary_dom","beneficiary_account"];_e.clear=function(){d.forEach(this.fields,function(_11,i){if(dj.byId(_11)){dj.byId(_11).set("value","");}});};function _12(){var _13="";_13=_13.concat(_8);_13=_13.concat(_9+m.getLocalization("generalDetails")+_a);var _14=dijit.byId("entity")?dijit.byId("entity").get("value"):"";var _15=m.getLocalization("entityDetails",[_14]);var _16=dijit.byId("applicant_act_name")?dijit.byId("applicant_act_name").get("value"):"";var _17=m.getLocalization("debitActDetails",[_16]);_13=_13+_15+_17;return _13;};function _18(){var _19="";_19=_19.concat(_8);_19=_19.concat(_9+m.getLocalization("transferToDetails")+_a);var _1a=dijit.byId("beneficiary_name")?dijit.byId("beneficiary_name").get("value"):"";var _1b=m.getLocalization("creditActDetails",[_1a]);_19=_19+_1b;return _19;};function _1c(){var _1d="";_1d=_1d.concat(_8);_1d=_1d.concat(_9+m.getLocalization("transactionDetails")+_a);var _1e=dijit.byId("ft_amt")?dijit.byId("ft_amt").get("value"):"";var _1f=dijit.byId("ft_cur_code")?dijit.byId("ft_cur_code").get("value"):"";var _20=m.getLocalization("transferAmtDetail",[_1f,_1e]);var _21=dijit.byId("iss_date")?dijit.byId("iss_date").get("value"):"";var _22=m.getLocalization("transferDateDetails",[_21]);_1d=_1d+_20+_22;return _1d;};function _23(_24){var amt=_24.totalFeeAmount;var ccy=_24.debitAccountCurrency;var _25=_24.debitFeeAmount;var _26=_24.taxOnDebitFees;var _27=_24.taxOnTaxOnDebitFees;var _28=_24.agentFees;var _29=m.getLocalization("totalCharges",[ccy,amt]);var _2a=m.getLocalization("debitFeeAmountCharges",[ccy,_25]);var _2b=m.getLocalization("taxOnDebitFeesCharges",[ccy,_26]);var _2c=m.getLocalization("taxOnTaxOnDebitFeesCharges",[ccy,_27]);var _2d=m.getLocalization("agentFeesCharges",[ccy,_28]);var _2e="";_2e=_2e.concat(_8);_2e=_2e.concat(_9+m.getLocalization("feesDetails")+_a);_2e=_2e+_29+_2a+_2b+_2c+_2d;return _2e;};function _2f(_30){var _31=function(){var _32=dijit.byId("ft_amt");_32.set("state","Error");m.defaultBindTheFXTypes();dj.byId("ft_amt").set("value","");if(dj.byId("ft_cur_code")&&!dj.byId("ft_cur_code").get("readOnly")){dj.byId("ft_cur_code").set("value","");}};m.dialog.show("ERROR",_30,"",function(){setTimeout(_31,500);});if(d.byId(_6)&&(d.style(d.byId(_6),"display")!=="none")){m.animate("wipeOut",d.byId(_6));}};function _33(){m.setSwiftBankDetailsForOnBlurEvent(false,"intermediary_bank_swift_bic_code","",null,null,"intermediary_bank_",true,true,true,"");if(dj.byId("intermediary_bank_swift_bic_code").get("value").length!==0&&dj.byId("pre_approved_status")&&dj.byId("pre_approved_status").get("value")==="Y"&&_5){dj.byId("intermediary_bank_country_img").set("disabled",true);}else{if(dj.byId("intermediary_bank_swift_bic_code").get("value").length!==0){dj.byId("intermediary_bank_country_img").set("disabled",true);}else{dj.byId("intermediary_bank_country_img").set("disabled",false);}}};function _34(){var _35=dj.byId("cpty_bank_country_img");if(!m._config.isBeneficiaryAccountsPopulated&&this.get("value")!==""){m.setSwiftBankDetailsForOnBlurEvent(false,"cpty_bank_swift_bic_code","",null,null,"cpty_bank_",true,false,true,"");}if(!m._config.isBeneficiaryAccountsPopulated&&(dijit.byId("pre_approved")&&dijit.byId("pre_approved").get("value")!="")){_36();}if(dj.byId("beneficiary_bank_swift_bic_code")){dj.byId("beneficiary_bank_swift_bic_code").set("value",dj.byId("cpty_bank_swift_bic_code").get("value"));}if(dj.byId("pre_approved_status")&&dj.byId("pre_approved_status").get("value")==="Y"){var _37=["cpty_bank_name","cpty_bank_address_line_1","cpty_bank_address_line_2","cpty_bank_dom"];m.toggleFieldsReadOnly(_37,true);}else{_37=["cpty_bank_name","cpty_bank_address_line_1","cpty_bank_address_line_2","cpty_bank_dom"];m.toggleFieldsReadOnly(_37,true);}if(_35){if(dj.byId("cpty_bank_swift_bic_code").get("value").length===0){_35.set("disabled",false);}else{_35.set("disabled",true);}}};function _38(){m.setSwiftBankDetailsForOnBlurEvent(false,"ordering_institution_swift_bic_code","",null,["ordering_institution_name","ordering_institution_address_line_1","ordering_institution_country","ordering_institution_account"],"ordering_institution_",true,false,true,"");if(dj.byId("ordering_institution_swift_bic_code").get("value").length===0){dj.byId("ordering_institution_country_img").set("disabled",false);_c.clear();}else{dj.byId("ordering_institution_country_img").set("disabled",true);}};function _39(){m.setSwiftBankDetailsForOnBlurEvent(false,"","beneficiary_swift_bic_code",["beneficiary_name","beneficiary_address","beneficiary_city","beneficiary_dom","beneficiary_contact_name","beneficiary_phone","beneficiary_country"],["beneficiary_name","beneficiary_address"],"beneficiary_",true,false,false,"");};function _3a(){m.setSwiftBankDetailsForOnBlurEvent(false,"ordering_customer_bank_swift_bic_code","",null,["ordering_customer_bank_name","ordering_customer_bank_address_line_1","ordering_customer_bank_country","ordering_customer_bank_account"],"ordering_customer_bank_",true,false,true);if(dj.byId("ordering_customer_bank_swift_bic_code").get("value").length===0){dj.byId("ordering_customer_bank_country_img").set("disabled",false);_d.clear();}else{dj.byId("ordering_customer_bank_country_img").set("disabled",true);}};function _3b(){var _3c=true;var _3d="";var _3e=dj.byId("fx_rates_type_2");var _3f=dj.byId("fx_total_utilise_amt");var _40=dj.byId("ft_amt");var _41=m._config.fxParamData[dj.byId("sub_product_code").get("value")][dj.byId("issuing_bank_abbv_name").get("value")].maxNbrContracts;if(_3e.get("checked")&&_3f&&!isNaN(_3f.get("value"))&&_40&&!isNaN(_40.get("value"))){if(_40.get("value")<_3f.get("value")){_3d+=m.getLocalization("FXUtiliseAmtGreaterMessage");_3c=false;}}m._config.onSubmitErrorMsg=_3d;if(_3e.get("checked")&&_3f&&_40){var _42=0;for(var j=1;j<=_41;j++){var _43="fx_contract_nbr_amt_"+j;_42=_42+dj.byId(_43).get("value");if(dj.byId(_43).get("state")==="Error"||_42.toFixed(2)>_3f.get("value")){dj.byId(_43).set("state","Error");dj.byId(_43).focus();_3c=false;}}}return _3c;};function _44(){var _45=dj.byId("sub_product_code").get("value");if(dj.byId("issuing_bank_abbv_name")&&dj.byId("issuing_bank_abbv_name").get("value")!==""&&m._config.fxParamData&&m._config.fxParamData[_45][dj.byId("issuing_bank_abbv_name").get("value")].isFXEnabled==="Y"){m.connect("ft_cur_code","onBlur",function(){m.setCurrency(this,["ft_amt"]);if(dj.byId("ft_cur_code").get("value")!==""&&!isNaN(dj.byId("ft_amt").get("value"))){m.fireFXAction();}else{m.defaultBindTheFXTypes();}});m.connect("ft_cur_code","onChange",function(){if(dj.byId("iss_date")&&dj.byId("iss_date").get("value")!==""){dj.byId("iss_date").validate();}if(dj.byId("recurring_start_date")&&dj.byId("recurring_start_date").get("value")!==""){dj.byId("recurring_start_date").validate();}m.setCurrency(this,["ft_amt"]);if(dj.byId("ft_cur_code").get("value")!==""&&!isNaN(dj.byId("ft_amt").get("value"))){m.fireFXAction();}else{m.defaultBindTheFXTypes();}});m.connect("ft_amt","onBlur",function(){m.setTnxAmt(this.get("value"));var _46="";if(dj.byId("ft_cur_code")){_46=dj.byId("ft_cur_code").get("value");}if(!isNaN(dj.byId("ft_amt").get("value"))&&_46!==""){m.fireFXAction();}else{m.defaultBindTheFXTypes();}});}else{if(d.byId(_6)){d.style(_6,"display","none");}}if(dijit.byId("ft_cur_code")&&dijit.byId("ft_amt")){misys.setCurrency(dijit.byId("ft_cur_code"),["ft_amt"]);}};var _47=new Array();function _48(){var _49,_4a;if(dj.byId("cpty_bank_country")){_49=dj.byId("cpty_bank_country").get("value");}if(dj.byId("ft_cur_code")){_4a=dj.byId("ft_cur_code").get("value");}var _4b=_49+_4a;var _4c=_49+"**";var _4d="**"+_4a;var _4e=_49+"ALL";var _4f="**"+"**";var i,_50;if(m._config.countryCurrencyPair[_4b]==="Y"){if(m._config.clearingCodes[_4b].length>=1){for(i=0;i<m._config.clearingCodes[_4b].length;i++){_50=m._config.clearingCodes[_4b][i];if(m._config.clearingCodesMandatory[_50]==="Y"){_51=true;}_47.push(_50);}}}if(m._config.countryCurrencyPair[_4c]==="Y"){if(m._config.clearingCodes[_4c].length>=1){for(i=0;i<m._config.clearingCodes[_4c].length;i++){_50=m._config.clearingCodes[_4c][i];if(m._config.clearingCodesMandatory[_50]==="Y"){_51=true;}_47.push(_50);}}}if(m._config.countryCurrencyPair[_4d]==="Y"){if(m._config.clearingCodes[_4d].length>=1){for(i=0;i<m._config.clearingCodes[_4d].length;i++){_50=m._config.clearingCodes[_4d][i];if(m._config.clearingCodesMandatory[_50]==="Y"){_51=true;}_47.push(_50);}}}if(m._config.countryCurrencyPair[_4e]==="Y"){if(m._config.clearingCodes[_4e].length>=1){for(i=0;i<m._config.clearingCodes[_4e].length;i++){_50=m._config.clearingCodes[_4e][i];if(m._config.clearingCodesMandatory[_50]==="Y"){_51=true;}_47.push(_50);}}}if(m._config.countryCurrencyPair[_4f]==="Y"){if(m._config.clearingCodes[_4f].length>=1){for(i=0;i<m._config.clearingCodes[_4f].length;i++){_50=m._config.clearingCodes[_4f][i];if(m._config.clearingCodesMandatory[_50]==="Y"){_51=true;}_47.push(_50);}}}};function _52(){var _53=dj.byId("intermediary_bank_country_img");var _54=dj.byId("intermediary_bank_swift_bic_code");var _55=true;if(dj.byId("intermediary_bank_swift_bic_code").get("value")!==""&&dj.byId("cpty_bank_swift_bic_code").get("value")!==""&&(dj.byId("intermediary_bank_swift_bic_code").get("value")===dj.byId("cpty_bank_swift_bic_code").get("value"))){var _56="";_56=misys.getLocalization("invalidIntermeditaryCode");_54.set("state","Error");dj.hideTooltip(_54.domNode);dj.showTooltip(_56,_54.domNode,0);_53.set("disabled",false);_55=false;}return _55;};function _57(){var _58=dj.byId("regexValue");var _59=dj.byId("allowedProducts");var _5a=dj.byId("product_type");var _5b=_58?dj.byId("regexValue").get("value"):"";var _5c=_59?dj.byId("allowedProducts").get("value"):"";var _5d=_5a?dj.byId("product_type").get("value"):"";var _5e=dj.byId("beneficiary_name");var _5f=_5e?dj.byId("beneficiary_name").get("value"):"";var _60=new RegExp(_5b);var _61=false;if(_5c.indexOf(_5d)<0){if(_5b!==null&&_5b!==""&&_5f!==""&&_5f!==null){_61=_60.test(_5f);if(!_61){this.invalidMessage=m.getLocalization("invalidBeneficiaryName");return false;}}}else{m._config.forceSWIFTValidation=false;}return true;};function _62(){m.xhrPost({url:misys.getServletURL("/screen/AjaxScreen/action/GetUserAccountList"),handleAs:"json",sync:true,content:{context_value:"FT:MEPS",entity:dj.byId("entity")?dj.byId("entity").get("value"):""},load:function(_63,_64){if(_63.items.valid===true){dj.byId("applicant_act_cur_code").set("value",_63.items.currency);dj.byId("applicant_act_pab").set("value",_63.items.PAB);dj.byId("applicant_act_no").set("value",_63.items.accountNo);dj.byId("applicant_act_name").set("value",_63.items.accountName);_b5();}},error:function(_65,_66){console.error("[Could not fetch userAccounts] ");console.error(_65);}});};function _67(){var _68=dj.byId("entity"),_69=dj.byId("applicant_act_name"),_6a="";if((_68&&(_68.get("value")===""))||_69.get("value")===""){_6a=misys.getLocalization("remittanceToolTip",[_68.get("value"),_69.get("value")]);if(_68&&_68.get("value")===""){_68.focus();_68.set("state","Error");dj.hideTooltip(_68.domNode);dj.showTooltip(_6a,_68.domNode,0);}if(_69.get("value")===""){_69.focus();_69.set("state","Error");dj.hideTooltip(_69.domNode);dj.showTooltip(_6a,_69.domNode,0);}}else{if(dj.byId("applicant_act_name").get("value")!==""||dj.byId("applicant_act_product_types").get("value")!==""){m.toggleSections();m.showRecurring();m.handleParametersConfigurations();}}d.forEach(dojo.query(".remittanceDisclaimer"),function(_6b){m.animate("fadeOut",_6b);});};var _6c={};_6c.fields=["beneficiary_name","beneficiary_address","beneficiary_city","beneficiary_dom","beneficiary_account","cpty_bank_name","cpty_bank_address_line_1","cpty_bank_address_line_2","cpty_bank_dom","cpty_bank_country","cpty_bank_swift_bic_code","bank_iso_img","cpty_bank_country_img","pre_approved","intermediary_bank_swift_bic_code","intermediary_bank_name","intermediary_bank_address_line_1","intermediary_bank_address_line_2","intermediary_bank_dom","intermediary_bank_country"];_6c.toggleReadonly=function(_6d){m.toggleFieldsReadOnly(this.fields,_6d);};_6c.initMT101=function(){d.forEach(d.query(".MT101"),function(_6e){d.style(_6e,"display","block");});if(dj.byId("pre_approved_status")&&dj.byId("pre_approved_status").get("value")==="Y"){_6c.toggleReadonly(true);if(dj.byId("cpty_bank_country_img")){dj.byId("cpty_bank_country_img").set("disabled",true);}if(dj.byId("bank_iso_img")){dj.byId("bank_iso_img").set("disabled",true);}}else{if((dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")==="")||(dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")===null)){var _6f=["beneficiary_name","beneficiary_address","beneficiary_city","beneficiary_dom","beneficiary_account","intermediary_bank_swift_bic_code"];m.toggleFieldsReadOnly(_6f,false);if(dj.byId("cpty_bank_country_img")){dj.byId("cpty_bank_country_img").set("disabled",false);}if(dj.byId("bank_iso_img")){dj.byId("bank_iso_img").set("disabled",false);}}else{_6c.toggleReadonly(true);if(dj.byId("cpty_bank_country_img")){dj.byId("cpty_bank_country_img").set("disabled",true);}if(dj.byId("bank_iso_img")){dj.byId("bank_iso_img").set("disabled",true);}}}};_6c.initMT103=function(){d.forEach(d.query(".MT103"),function(_70){d.style(_70,"display","block");});var _71=dj.byId("applicant_act_pab").get("value");if(_71==="Y"||(dj.byId("pre_approved_status")&&dj.byId("pre_approved_status").get("value")==="Y")){_6c.toggleReadonly(true);if(dj.byId("cpty_bank_country_img")){dj.byId("cpty_bank_country_img").set("disabled",true);}if(dj.byId("bank_iso_img")){dj.byId("bank_iso_img").set("disabled",true);}m.toggleFieldsReadOnly(["branch_address_flag","beneficiary_bank_branch_address_line_1","beneficiary_bank_branch_address_line_2","beneficiary_bank_branch_dom"],true);if(dj.byId("intermediary_bank_swift_bic_code").get("value").length!==0){dj.byId("inter_bank_iso_img").set("disabled",true);dj.byId("intermediary_bank_country_img").set("disabled",true);}}else{if((dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")==="")||(dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")===null)){var _72=["beneficiary_name","beneficiary_address","beneficiary_city","beneficiary_dom","beneficiary_account","intermediary_bank_swift_bic_code"];m.toggleFieldsReadOnly(_72,false);if(dj.byId("cpty_bank_country_img")){dj.byId("cpty_bank_country_img").set("disabled",false);}if(dj.byId("bank_iso_img")){dj.byId("bank_iso_img").set("disabled",false);}if(dj.byId("inter_bank_iso_img")){dj.byId("inter_bank_iso_img").set("disabled",false);}if(dj.byId("intermediary_bank_country_img")){dj.byId("intermediary_bank_country_img").set("disabled",false);}m.toggleFieldsReadOnly(["branch_address_flag","beneficiary_bank_branch_address_line_1","beneficiary_bank_branch_address_line_2","beneficiary_bank_branch_dom"],false);}else{_6c.toggleReadonly(true);if(dj.byId("cpty_bank_country_img")){dj.byId("cpty_bank_country_img").set("disabled",true);}if(dj.byId("bank_iso_img")){dj.byId("bank_iso_img").set("disabled",true);}m.toggleFieldsReadOnly(["branch_address_flag","beneficiary_bank_branch_address_line_1","beneficiary_bank_branch_address_line_2","beneficiary_bank_branch_dom"],true);if(dj.byId("intermediary_bank_swift_bic_code").get("value").length!==0){dj.byId("inter_bank_iso_img").set("disabled",true);dj.byId("intermediary_bank_country_img").set("disabled",true);}}}};var _73={},_74={},_75={},_76={};_73.fields=["beneficiary_name","beneficiary_address","beneficiary_city","beneficiary_dom","beneficiary_account","cpty_bank_swift_bic_code","cpty_bank_name","cpty_bank_address_line_1","cpty_bank_address_line_2","cpty_bank_dom","cpty_bank_country","pre_approved"];_73.toggleReadonly=function(_77){m.toggleFieldsReadOnly(this.fields,_77);};_73.initFI202=function(){d.forEach(d.query(".FI202"),function(_78){d.style(_78,"display","block");});if(dj.byId("pre_approved_status")&&dj.byId("pre_approved_status").get("value")==="Y"){var _79=["beneficiary_swift_bic_code","beneficiary_name","beneficiary_address","beneficiary_city","beneficiary_dom"];m.toggleFieldsReadOnly(_79,true);if(dj.byId("cpty_bank_country_img")){dj.byId("cpty_bank_country_img").set("disabled",true);}if(dj.byId("bank_iso_img")){dj.byId("bank_iso_img").set("disabled",true);}}else{if((dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")==="")||(dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")===null)){_79=["beneficiary_swift_bic_code","beneficiary_name","beneficiary_address","beneficiary_city","beneficiary_dom"];m.toggleFieldsReadOnly(_79,false);if(dj.byId("cpty_bank_country_img")){dj.byId("cpty_bank_country_img").set("disabled",false);}if(dj.byId("bank_iso_img")){dj.byId("bank_iso_img").set("disabled",false);}}else{_79=["beneficiary_swift_bic_code","beneficiary_name","beneficiary_address","beneficiary_city","beneficiary_dom"];m.toggleFieldsReadOnly(_79,true);if(dj.byId("cpty_bank_country_img")){dj.byId("cpty_bank_country_img").set("disabled",true);}if(dj.byId("bank_iso_img")){dj.byId("bank_iso_img").set("disabled",true);}}}};_6c.clear=function(){d.forEach(this.fields,function(_7a,i){if(dj.byId(_7a)){dj.byId(_7a).set("value","");}});if(dj.byId("branch_address_flag")){dj.byId("branch_address_flag").set("checked",false);dj.byId("branch_address_flag").set("readOnly",true);}if(dj.byId("cpty_bank_country_img")){dj.byId("cpty_bank_country_img").set("disabled",false);}if(dj.byId("beneficiary_swift_bic_code")){m.toggleFieldsReadOnly(["beneficiary_swift_bic_code"],false,true);}d.style("REMITTANCE","display","none");};_74.fields=["cpty_bank_swift_bic_code","cpty_bank_name","cpty_bank_address_line_1","cpty_bank_address_line_2","cpty_bank_dom","cpty_bank_country","intermediary_bank_swift_bic_code","intermediary_bank_name","intermediary_bank_address_line_1","intermediary_bank_address_line_2","intermediary_bank_dom","intermediary_bank_country"];_74.clear=function(){d.forEach(this.fields,function(_7b,i){if(dj.byId(_7b)){dj.byId(_7b).set("value","");}});};_75.fields=["intermediary_bank_name","intermediary_bank_address_line_1","intermediary_bank_address_line_2","intermediary_bank_dom","intermediary_bank_country"];_75.clear=function(){d.forEach(this.fields,function(_7c,i){if(dj.byId(_7c)){dj.byId(_7c).set("value","");}});};_76.fields=["ordering_customer_bank_swift_bic_code","ordering_customer_bank_name","ordering_customer_bank_address_line_1","ordering_customer_bank_address_line_2","ordering_customer_bank_dom","ordering_customer_bank_country","ordering_customer_bank_account"];_76.clear=function(){d.forEach(this.fields,function(_7d,i){if(dj.byId(_7d)){dj.byId(_7d).set("value","");}});};function _7e(){var _7f=dj.byId("applicant_act_pab").get("value");if(_7f=="Y"){_6c.toggleReadonly(true);}else{_6c.toggleReadonly(false);}dj.byId("pre_approved_status").set("value","N");_6c.clear();m.clearBeneficiaryAdviceFieldsForDefaultingFromBeneMaster();d.style("REMITTANCE","display","none");};function _80(){var _81=dj.byId("beneficiary_name").get("value");_5=false;if(_81!==""){dj.byId("ft_amt").set("displayedValue","");if(dj.byId("pre_approved_status")&&dj.byId("pre_approved_status").get("value")==="Y"){if(m._config.non_pab_allowed){d.style("REMITTANCE","display","inline");}else{d.style("REMITTANCE","display","none");}if(dj.byId("intermediary_bank_swift_bic_code")&&dj.byId("intermediary_bank_swift_bic_code").get("value")!==""&&dj.byId("intermediary_bank_swift_bic_code").get("value")!==null){_5=true;if(dj.byId("inter_bank_iso_img")){dj.byId("inter_bank_iso_img").set("disabled",true);}if(dj.byId("intermediary_bank_country_img")){dj.byId("intermediary_bank_country_img").set("disabled",true);}dj.byId("has_intermediary").set("value","true");}else{dj.byId("has_intermediary").set("value","false");}if(dj.byId("bank_iso_img")){dj.byId("bank_iso_img").set("disabled",true);}if(dj.byId("cpty_bank_country_img")){dj.byId("cpty_bank_country_img").set("disabled",true);}_6c.toggleReadonly(true);if(dj.byId("has_intermediary")){if(dj.byId("has_intermediary").get("value")=="true"){m.toggleFieldsReadOnly(_b,true);}else{if(dj.byId("has_intermediary").get("value")=="false"){m.toggleFieldsReadOnly(_b,false);}}}m.toggleFieldsReadOnly(["beneficiary_bank_branch_address_line_1","beneficiary_bank_branch_address_line_2","beneficiary_bank_branch_dom"],true);m.toggleFieldsReadOnly(["beneficiary_swift_bic_code"],true);if(dj.byId("beneficiary_iso_img")){dj.byId("beneficiary_iso_img").set("disabled",true);}}else{_6c.toggleReadonly(false);d.style("REMITTANCE","display","none");m.toggleFieldsReadOnly(["beneficiary_swift_bic_code"],false);if(dj.byId("intermediary_bank_swift_bic_code")&&dj.byId("intermediary_bank_swift_bic_code").get("value")!==""&&dj.byId("intermediary_bank_swift_bic_code").get("value")!==null){_5=true;if(dj.byId("inter_bank_iso_img")){dj.byId("inter_bank_iso_img").set("disabled",true);}if(dj.byId("intermediary_bank_country_img")){dj.byId("intermediary_bank_country_img").set("disabled",true);}dj.byId("has_intermediary").set("value","true");m.toggleFieldsReadOnly(_b,true);}else{dj.byId("has_intermediary").set("value","false");m.toggleFieldsReadOnly(_b,false);}if((dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")==="")||(dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")===null)){_6c.toggleReadonly(false);if(dj.byId("bank_iso_img")){dj.byId("bank_iso_img").set("disabled",false);}if(dj.byId("intermediary_bank_country_img")){dj.byId("intermediary_bank_country_img").set("disabled",false);}m.toggleFieldsReadOnly(["branch_address_flag","beneficiary_bank_branch_address_line_1","beneficiary_bank_branch_address_line_2","beneficiary_bank_branch_dom"],false);}else{_6c.toggleReadonly(true);if(dj.byId("has_intermediary")){if(dj.byId("has_intermediary").get("value")=="true"){m.toggleFieldsReadOnly(_b,true);}else{if(dj.byId("has_intermediary").get("value")=="false"){m.toggleFieldsReadOnly(_b,false);}}}if(dj.byId("bank_iso_img")){dj.byId("bank_iso_img").set("disabled",true);}if(dj.byId("intermediary_bank_country_img")){dj.byId("intermediary_bank_country_img").set("disabled",true);}m.toggleFieldsReadOnly(["branch_address_flag","beneficiary_bank_branch_address_line_1","beneficiary_bank_branch_address_line_2","beneficiary_bank_branch_dom"],true);}if(dj.byId("beneficiary_swift_bic_code")&&dj.byId("beneficiary_swift_bic_code").get("value")!==""){var _82=["beneficiary_name","beneficiary_address","beneficiary_city","beneficiary_dom"];if(dj.byId("beneficiary_account").get("value").length!=0){_82.push("beneficiary_account");}m.toggleFieldsReadOnly(_82,true);}if(dj.byId("intermediary_bank_swift_bic_code")&&dj.byId("intermediary_bank_swift_bic_code").get("value")!==""){m.toggleFieldsReadOnly(["intermediary_bank_name","intermediary_bank_address_line_1","intermediary_bank_address_line_2","intermediary_bank_dom","intermediary_bank_country"],true);}if(dj.byId("cpty_bank_swift_bic_code").get("value").length!==0){if(dj.byId("inter_bank_iso_img")){if(dj.byId("intermediary_bank_swift_bic_code").get("value").length!==0){dj.byId("inter_bank_iso_img").set("disabled",true);dj.byId("intermediary_bank_country_img").set("disabled",true);}else{dj.byId("inter_bank_iso_img").set("disabled",false);dj.byId("intermediary_bank_country_img").set("disabled",false);}}}else{if(dj.byId("inter_bank_iso_img")){dj.byId("inter_bank_iso_img").set("disabled",false);}if(dj.byId("intermediary_bank_country_img")){dj.byId("intermediary_bank_country_img").set("disabled",false);}}if(dj.byId("beneficiary_iso_img")){dj.byId("beneficiary_iso_img").set("disabled",false);}if(dj.byId("cpty_bank_swift_bic_code")&&dj.byId("cpty_bank_swift_bic_code").get("value").length!==0){m.toggleFieldsReadOnly(["cpty_bank_name","cpty_bank_address_line_1","cpty_bank_address_line_2","cpty_bank_dom","cpty_bank_country"],true);}if(dj.byId("intermediary_bank_swift_bic_code")&&dj.byId("intermediary_bank_swift_bic_code").get("value").length!==0){m.toggleFieldsReadOnly(["intermediary_bank_name","intermediary_bank_address_line_1","intermediary_bank_address_line_2","intermediary_bank_dom","intermediary_bank_country"],true);}}}};var _51=false;function _83(_84){var _85;if(_84==="beneficiary"){_85=dj.byId("beneficiary_bank_clearing_code_desc");}else{_85=dj.byId("intermediary_bank_clearing_code_desc");}if(_85){_85.reset();var _86,_87;var i,j;var _88=[];var _89;for(i=0;i<m._config.countryCcy.length;i++){_86=m._config.countryCcy[i];if(m._config.countryCurrencyPair[_86]==="Y"){if(m._config.clearingCodes[_86].length>=1){for(j=0;j<m._config.clearingCodes[_86].length;j++){_89=m._config.clearingCodes[_86][j];_87={"name":m._config.clearingCodesDescription[_86][j],"value":_89};_88.push(_87);}}}}if(_88.length<1){var _8a=(_84==="beneficiary")?"beneficiary_bank_clearing_code_section":"intermediary_bank_clearing_code_section";d.style(d.byId(_8a),{visibility:"hidden",display:"none"});}else{var _8b=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_88}});_85.store=_8b;if(_84==="beneficiary"){if(dj.byId("beneficiary_bank_clearing_code_desc_no_send")!=undefined&&dj.byId("beneficiary_bank_clearing_code_desc_no_send").get("value")!==""){_85.set("value",dj.byId("beneficiary_bank_clearing_code_desc_no_send").get("value"));dj.byId("beneficiary_bank_clearing_code_desc_no_send").set("value","");}}else{if(dj.byId("intermediary_bank_clearing_code_desc_no_send")!=undefined&&dj.byId("intermediary_bank_clearing_code_desc_no_send").get("value")!==""){_85.set("value",dj.byId("intermediary_bank_clearing_code_desc_no_send").get("value"));dj.byId("intermediary_bank_clearing_code_desc_no_send").set("value","");}}}}};function _8c(){var _8d=dj.byId("applicant_act_no").get("value");var _8e=dj.byId("entity")?dj.byId("entity").get("value"):"";if(_8d===""){m.dialog.show("ERROR",m.getLocalization("selectDebitFirst"));return;}m.showSearchDialog("beneficiary_accounts","['beneficiary_name','beneficiary_account','ft_cur_code', 'beneficiary_address', 'beneficiary_city', 'change_address_line_3', 'beneficiary_dom', "+"'pre_approved_status', 'change_counterparty_name_2', 'change_counterparty_name_3', 'cpty_bank_name', 'cpty_bank_address_line_1', 'cpty_bank_address_line_2', "+"'cpty_bank_dom', 'beneficiary_bank_branch_address_line_1', 'beneficiary_bank_branch_address_line_2', 'beneficiary_bank_branch_dom', 'cpty_bank_country', "+"'beneficiary_swift_bic_code', 'cpty_bank_swift_bic_code', 'beneficiary_bank_code', 'beneficiary_branch_code', 'beneficiary_branch_name', "+"'pre_approved', 'change_threshold','change_threshold_curcode','bene_adv_beneficiary_id_no_send','bene_adv_mailing_name_add_1_no_send',"+"'bene_adv_mailing_name_add_2_no_send','bene_adv_mailing_name_add_3_no_send','bene_adv_mailing_name_add_4_no_send','bene_adv_mailing_name_add_5_no_send',"+"'bene_adv_mailing_name_add_6_no_send','bene_adv_postal_code_no_send','bene_adv_country_no_send','bene_adv_email_no_send','bene_adv_email_no_send1', 'beneficiary_postal_code','beneficiary_country',"+"'bene_adv_fax_no_send', 'bene_adv_ivr_no_send','beneficiary_nickname', 'bene_adv_phone_no_send','intermediary_bank_swift_bic_code','intermediary_bank_name','intermediary_bank_address_line_1',"+"'intermediary_bank_address_line_2','intermediary_bank_dom','intermediary_bank_country']",{product_type:dijit.byId("sub_product_code").get("value"),entity_name:_8e,pabAccStat:dijit.byId("applicant_act_pab").get("value"),debitAcctNo:_8d},"",dijit.byId("sub_product_code").get("value"),"width:710px;height:350px;",m.getLocalization("ListOfBeneficiriesTitleMessage"));m.clearBeneficiaryAdviceFieldsForDefaultingFromBeneMaster();};function _8f(){var _90=true;if(dj.byId("cpty_bank_swift_bic_code")&&dj.byId("cpty_bank_swift_bic_code").get("value").length===0){_90=false;}_91("cpty_bank_name","readOnly",_90);_91("cpty_bank_address_line_1","readOnly",_90);_91("cpty_bank_address_line_2","readOnly",_90);_91("cpty_bank_dom","readOnly",_90);_91("cpty_bank_country","readOnly",_90);_91("bank_iso_img","disabled",false);_91("cpty_bank_country_img","disabled",_90);m.toggleRequired("cpty_bank_name",true);m.toggleRequired("cpty_bank_address_line_1",true);m.toggleRequired("cpty_bank_country",true);};function _91(id,_92,_93){var _94=dj.byId(id);if(_94){_94.set(_92,_93);}};function _95(){var _96=true;if(dj.byId("intermediary_bank_swift_bic_code")&&dj.byId("intermediary_bank_swift_bic_code").get("value").length===0){_96=false;}_91("intermediary_bank_swift_bic_code","readOnly",_96);_91("intermediary_bank_name","readOnly",_96);_91("intermediary_bank_address_line_1","readOnly",_96);_91("intermediary_bank_address_line_2","readOnly",_96);_91("intermediary_bank_dom","readOnly",_96);_91("intermediary_bank_country","readOnly",_96);_91("inter_bank_iso_img","disabled",false);_91("intermediary_bank_country_img","disabled",_96);m.toggleRequired("intermediary_bank_name",_96);m.toggleRequired("intermediary_bank_address_line_1",_96);m.toggleRequired("intermediary_bank_address_line_2",false);m.toggleRequired("intermediary_bank_dom",false);m.toggleRequired("intermediary_bank_country",_96);};function _97(){var _98=true;if(dj.byId("ordering_customer_bank_swift_bic_code").get("value").length===0){_98=false;}dj.byId("ordering_customer_bank_name").set("readOnly",_98);dj.byId("ordering_customer_bank_address_line_1").set("readOnly",_98);dj.byId("ordering_customer_bank_address_line_2").set("readOnly",_98);dj.byId("ordering_customer_bank_dom").set("readOnly",_98);dj.byId("ordering_customer_bank_country").set("readOnly",_98);dj.byId("ordering_customer_iso_img").set("disabled",false);dj.byId("ordering_customer_bank_country_img").set("disabled",_98);m.toggleRequired("ordering_customer_bank_name",true);m.toggleRequired("ordering_customer_bank_address_line_1",true);m.toggleRequired("ordering_customer_bank_address_line_2",false);m.toggleRequired("ordering_customer_bank_dom",false);m.toggleRequired("ordering_customer_bank_country",true);m.toggleRequired("ordering_customer_bank_account",true);};function _99(){var _9a=true;if(dj.byId("ordering_institution_swift_bic_code").get("value").length===0){_9a=false;}dj.byId("ordering_institution_name").set("readOnly",_9a);dj.byId("ordering_institution_address_line_1").set("readOnly",_9a);dj.byId("ordering_institution_address_line_2").set("readOnly",_9a);dj.byId("ordering_institution_dom").set("readOnly",_9a);dj.byId("ordering_institution_country").set("readOnly",_9a);dj.byId("ordering_iso_img").set("disabled",false);dj.byId("ordering_institution_country_img").set("disabled",_9a);m.toggleRequired("ordering_institution_name",true);m.toggleRequired("ordering_institution_address_line_1",true);m.toggleRequired("ordering_institution_address_line_2",false);m.toggleRequired("ordering_institution_dom",false);m.toggleRequired("ordering_institution_country",true);m.toggleRequired("ordering_institution_account",true);};function _9b(){var _9c=true;if(dj.byId("beneficiary_name").get("value").length===0){_9c=false;}dj.byId("beneficiary_name").set("readOnly",_9c);dj.byId("beneficiary_address").set("readOnly",_9c);dj.byId("beneficiary_city").set("readOnly",_9c);dj.byId("beneficiary_dom").set("readOnly",_9c);if(dj.byId("beneficiary_account").get("value").length!=0){dj.byId("beneficiary_account").set("readOnly",true);}m.toggleRequired("beneficiary_name",true);m.toggleRequired("beneficiary_address",true);m.toggleRequired("beneficiary_city",false);m.toggleRequired("beneficiary_dom",false);m.toggleRequired("beneficiary_account",true);if(dj.byId("pre_approved_status")&&dj.byId("pre_approved_status").get("value")==="Y"){m.toggleFieldsReadOnly(["beneficiary_swift_bic_code"],true);if(dj.byId("beneficiary_iso_img")){dj.byId("beneficiary_iso_img").set("disabled",true);}}else{m.toggleFieldsReadOnly(["beneficiary_swift_bic_code"],false);if(dj.byId("beneficiary_iso_img")){dj.byId("beneficiary_iso_img").set("disabled",false);}}};function _36(){if(dj.byId("branch_address_flag")){if(dj.byId("cpty_bank_swift_bic_code").get("value").length===0){dj.byId("branch_address_flag").set("checked",false);dj.byId("branch_address_flag").set("readOnly",true);}else{dj.byId("branch_address_flag").set("readOnly",false);if(dj.byId("applicant_act_pab").get("value")=="Y"){dj.byId("beneficiary_bank_branch_address_line_1").set("value","");dj.byId("beneficiary_bank_branch_address_line_2").set("value","");dj.byId("beneficiary_bank_branch_dom").set("value","");}}}};function _9d(_9e){var _9f=["beneficiary_bank_branch_address_line_1","beneficiary_bank_branch_address_line_2","beneficiary_bank_branch_dom"];var _a0=(dj.byId("beneficiary_name")&&dj.byId("beneficiary_name").get("readOnly"))?true:false;if(_9e){if(((dj.byId("pre_approved_status")&&dj.byId("pre_approved_status").get("value")==="Y")||(dj.byId("pre_approved_status")&&dj.byId("pre_approved_status").get("value")==="N"))&&_a0){m.toggleFieldsReadOnly(_9f,true);}else{m.toggleFieldsReadOnly(_9f,false);dj.byId("branch_address_flag").set("disabled",false);dj.byId("branch_address_flag").set("readOnly",false);}m.toggleRequired("beneficiary_bank_branch_address_line_1",true);}else{m.toggleFieldsReadOnly(_9f,true,true);m.toggleRequired("beneficiary_bank_branch_address_line_1",false);}};function _a1(){if(dj.byId("branch_address_flag")){if(dj.byId("pre_approved_status")&&dj.byId("pre_approved_status").get("value")==="Y"){m.toggleFieldsReadOnly(["branch_address_flag","beneficiary_bank_branch_address_line_1","beneficiary_bank_branch_address_line_2","beneficiary_bank_branch_dom"],true);}else{if((dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")==="")||(dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")===null)){m.toggleFieldsReadOnly(["branch_address_flag","beneficiary_bank_branch_address_line_1","beneficiary_bank_branch_address_line_2","beneficiary_bank_branch_dom"],false);}else{m.toggleFieldsReadOnly(["branch_address_flag","beneficiary_bank_branch_address_line_1","beneficiary_bank_branch_address_line_2","beneficiary_bank_branch_dom"],true);}}}};function _a2(){var _a3=dj.byId("notify_beneficiary").get("checked");var _a4=dj.byId("notify_beneficiary_choice_1");var _a5=dj.byId("notify_beneficiary_choice_2");var _a6=dj.byId("notify_beneficiary_email");_a4.set("disabled",!_a3);_a5.set("disabled",!_a3);_a6.set("disabled",true);_a4.set("checked",_a3);_a5.set("checked",false);_a6.set("value","");var _a7=d.byId("notify_beneficiary_email_node");var _a8=d.byId("label_notify_beneficiary_choice_1");d.place(_a7,_a8,"after");var _a9=dj.byId("bene_adv_email_no_send").get("value");if(!_a9){_a9=dj.byId("bene_adv_email_no_send1").get("value");}if(_a9&&_a3){_a6.set("value",_a9);_a6.set("readOnly",true);}if(!_a9&&_a3){if(dj.byId("beneficiary_name")&&dj.byId("beneficiary_name").get("value")===""){m.dialog.show("ERROR",m.getLocalization("noBeneficiaryEmail"));}_a5.set("checked",true);var _aa=d.byId("label_notify_beneficiary_choice_2");d.place(_a7,_aa,"after");_a6.set("disabled",false);}m.toggleRequired("notify_beneficiary_email",_a3);m.toggleRequired("notify_beneficiary_choice_1",_a3);m.toggleRequired("notify_beneficiary_choice_2",_a3);};function _ab(){var _ac=dj.byId("remittance_description").get("value");dj.byId("remittance_code").set("value",m._config.remittanceArray[_ac].name);};function _ad(){var _ae=dj.byId("notify_beneficiary_choice_2").get("checked")&&!dj.byId("notify_beneficiary_choice_2").get("disabled");var _af=dj.byId("notify_beneficiary_email");var _b0=dj.byId("notify_beneficiary_choice_2");var _b1=d.byId("notify_beneficiary_email_node");var _b2=d.byId("label_notify_beneficiary_choice_1");var _b3=d.byId("label_notify_beneficiary_choice_2");var _b4=dj.byId("bene_adv_email_no_send").get("value");if(!_b4){_b4=dj.byId("bene_adv_email_no_send1").get("value");}if(_ae){d.place(_b1,_b3,"after");_af.set("disabled",false);}else{if(!_b4){m.dialog.show("ERROR",m.getLocalization("noBeneficiaryEmail"));_b0.set("checked",true);_af.set("disabled",false);}else{d.place(_b1,_b2,"after");}}if(_b4&&!_ae){_af.set("value",_b4);_af.set("readOnly",true);}else{_af.set("value","");_af.set("readOnly",false);_af.set("disabled",false);}};function _b5(){var _b6=dj.byId("applicant_act_pab").get("value");if(_b6=="Y"){_6c.toggleReadonly(true);}else{if(m._config.non_pab_allowed){_6c.toggleReadonly(false);}else{_6c.toggleReadonly(true);}}if(d.byId("clear_img")){if(_b6=="Y"&&d.style(d.byId("clear_img"),"display")!=="none"){m.animate("wipeOut",d.byId("clear_img"));dj.byId("clear_img").setAttribute("disabled",true);}else{if(_b6=="N"&&d.style(d.byId("clear_img"),"display")=="none"){m.animate("wipeIn",d.byId("clear_img"));dj.byId("clear_img").setAttribute("disabled",false);}}}if(d.byId("beneficiary_iso_img")){if(_b6==="Y"&&d.style(d.byId("beneficiary_iso_img"),"display")!=="none"){m.animate("wipeOut",d.byId("beneficiary_iso_img"));dj.byId("beneficiary_iso_img").setAttribute("disabled",true);}else{if(_b6==="N"&&d.style(d.byId("beneficiary_iso_img"),"display")=="none"){m.animate("wipeIn",d.byId("beneficiary_iso_img"));dj.byId("beneficiary_iso_img").setAttribute("disabled",false);}}}};function _b7(){var _b8=null;var _b9=dj.byId("customer_bank").get("value");if(misys&&misys._config&&misys._config.businessDateForBank&&misys._config.businessDateForBank[_b9]&&misys._config.businessDateForBank[_b9][0]&&misys._config.businessDateForBank[_b9][0].value!==""){var _ba=misys._config.businessDateForBank[_b9][0].value;var _bb=_ba.substring(0,4);var _bc=_ba.substring(5,7);var _bd=_ba.substring(8,10);_ba=_bd+"/"+_bc+"/"+_bb;var _be=new Date(_bb,_bc-1,_bd);if(dj.byId("option_for_app_date")&&dj.byId("option_for_app_date").get("value")==="SCRATCH"){dj.byId("appl_date").set("value",_ba);document.getElementById("appl_date_view_row").childNodes[1].innerHTML=_ba;if(dj.byId("appl_date_hidden")){dj.byId("appl_date_hidden").set("value",_be);}}if(dj.byId("todays_date")){dj.byId("todays_date").set("value",_be);}}if(!_2&&!_4){if(dj.byId("applicant_act_name")){dj.byId("applicant_act_name").set("value","");}if(dj.byId("applicant_act_no")){dj.byId("applicant_act_no").set("value","");}if(dj.byId("beneficiary_name")){dj.byId("beneficiary_name").set("value","");}if(dj.byId("beneficiary_act_cur_code")){dj.byId("beneficiary_act_cur_code").set("value","");}if(dj.byId("beneficiary_account")){dj.byId("beneficiary_account").set("value","");}if(dj.byId("cpty_bank_code")){dj.byId("cpty_bank_code").set("value","");}if(dj.byId("cpty_branch_code")){dj.byId("cpty_branch_code").set("value","");}if(dj.byId("cpty_bank_name")){dj.byId("cpty_bank_name").set("value","");}if(dj.byId("cpty_branch_name")){dj.byId("cpty_branch_name").set("value","");}if(dj.byId("ft_cur_code")){dj.byId("ft_cur_code").set("value","");}if(dj.byId("ft_amt")){dj.byId("ft_amt").set("value","");}if(dj.byId("iss_date")){dj.byId("iss_date").set("value",null);}if(dj.byId("issuing_bank_abbv_name")){dj.byId("issuing_bank_abbv_name").set("value",_b9);}_b8=misys._config.customerBankDetails[_b9][0].value;if(dj.byId("issuing_bank_name")){dj.byId("issuing_bank_name").set("value",_b8);}}if(!_2){dj.byId("issuing_bank_abbv_name").set("value",_b9);_b8=misys._config.customerBankDetails[_b9][0].value;dj.byId("issuing_bank_name").set("value",_b8);}_2=false;if(dj.byId("customer_bank")&&_b9!==""){_4=false;if(dj.byId("issuing_bank_abbv_name").get("value")!==""){_b8=misys._config.customerBankDetails[_b9][0].value;dj.byId("issuing_bank_name").set("value",_b8);}}m.initializeFX(dj.byId("sub_product_code").get("value"),dj.byId("issuing_bank_abbv_name").get("value"));if(dj.byId("applicant_act_cur_code")&&dj.byId("applicant_act_cur_code").get("value")!==""&&dj.byId("ft_cur_code")&&dj.byId("ft_cur_code").get("value")!==""&&dj.byId("applicant_act_cur_code").get("value")!==dj.byId("ft_cur_code").get("value")&&!isNaN(dj.byId("ft_amt").get("value"))){m.onloadFXActions();}else{m.defaultBindTheFXTypes();}_44();};function _bf(){dojo.forEach(["pre_approved","beneficiary_account","beneficiary_act_cur_code","beneficiary_address","beneficiary_city","beneficiary_dom","pre_approved_status","cpty_bank_name","cpty_bank_address_line_1","cpty_bank_address_line_2","cpty_bank_dom","cpty_branch_address_line_1","cpty_branch_address_line_2","cpty_branch_dom","cpty_bank_country","cpty_bank_swift_bic_code","cpty_bank_code","cpty_branch_code","cpty_branch_name","beneficiary_name","bene_adv_beneficiary_id_no_send","bene_adv_mailing_name_add_1_no_send","bene_adv_mailing_name_add_2_no_send","bene_adv_mailing_name_add_3_no_send","bene_adv_mailing_name_add_4_no_send","bene_adv_mailing_name_add_5_no_send","bene_adv_mailing_name_add_6_no_send","bene_adv_postal_code_no_send","bene_adv_country_no_send","bene_email_1","bene_email_2","beneficiary_postal_code","beneficiary_country","bene_adv_fax_no_send","bene_adv_ivr_no_send","bene_adv_phone_no_send","bene_adv_email_no_send1","bene_adv_email_no_send","ft_amt","ft_cur_code","intermediary_bank_swift_bic_code","intermediary_bank_name","intermediary_bank_address_line_1","intermediary_bank_address_line_2","intermediary_bank_dom","intermediary_bank_country","intermediary_bank_clearing_code","intermediary_bank_clearing_code_desc"],function(_c0){if(dj.byId(_c0)){dj.byId(_c0).set("value","");}});if(d.byId(_6)&&(d.style(d.byId(_6),"display")!=="none")){m.animate("wipeOut",d.byId(_6));}dj.byId("ft_cur_code").set("value",dj.byId("applicant_act_cur_code").get("value"));d.style("REMITTANCE","display","none");m.setApplicantReference();};function _c1(){var _c2=dj.byId("applicant_act_cur_code").get("value");var _c3=dj.byId("ft_cur_code").get("value");if(_c2!==_c3){m.dialog.show("ERROR",m.getLocalization("crossCurrency"));dj.byId("beneficiary_name").set("value","");dj.byId("beneficiary_address").set("value","");dj.byId("beneficiary_city").set("value","");dj.byId("beneficiary_account").set("value","");dj.byId("beneficiary_dom").set("value","");dj.byId("cpty_bank_swift_bic_code").set("value","");dj.byId("cpty_bank_address_line_1").set("value","");dj.byId("cpty_bank_name").set("value","");dj.byId("cpty_bank_country").set("value","");dj.byId("cpty_bank_address_line_2").set("value","");dj.byId("cpty_bank_dom").set("value","");dj.byId("cpty_bank_country").set("value","");setTimeout(function(){dj.byId("ft_cur_code").set("value",_c2);},0);dj.byId("beneficiary_bank_branch_address_line_1").set("value","");dj.byId("beneficiary_bank_branch_address_line_2").set("value","");dj.byId("beneficiary_bank_branch_dom").set("value","");dj.byId("pre_approved").set("value","");dj.byId("pre_approved_status").set("value","");dj.byId("branch_address_flag").set("checked",false);dj.byId("notify_beneficiary_choice_1").set("checked",false);dj.byId("notify_beneficiary_choice_2").set("checked",false);dj.byId("notify_beneficiary_choice_1").set("disabled",true);dj.byId("notify_beneficiary_choice_2").set("disabled",true);dj.byId("notify_beneficiary").set("checked",false);dj.byId("bene_adv_email_no_send1").set("value","");dj.byId("bene_adv_email_no_send").set("value","");d.place(d.byId("notify_beneficiary_email_node"),d.byId("label_notify_beneficiary_choice_2"),"after");dj.byId("notify_beneficiary_email").set("value","");dj.byId("notify_beneficiary_email").set("disabled",true);if(dj.byId("applicant_act_pab").get("value")!=="Y"){m.toggleFieldsReadOnly(["beneficiary_name","beneficiary_address","beneficiary_city","beneficiary_dom","beneficiary_account","cpty_bank_swift_bic_code","cpty_bank_address_line_1","cpty_bank_name","cpty_bank_country","cpty_bank_address_line_2","cpty_bank_dom","cpty_bank_country","ft_cur_code"],false);}else{m.toggleFieldsReadOnly(["beneficiary_name","beneficiary_address","beneficiary_city","beneficiary_dom","beneficiary_account","cpty_bank_swift_bic_code","cpty_bank_address_line_1","cpty_bank_name","cpty_bank_country","cpty_bank_address_line_2","cpty_bank_dom","cpty_bank_country","ft_cur_code"],true);}d.style("REMITTANCE","display","none");if(dj.byId("bank_iso_img")){dj.byId("bank_iso_img").set("disabled",false);}return;}else{dj.byId("ft_cur_code").set("displayedValue",_c3);if(dj.byId("applicant_act_pab").get("value")!=="Y"){m.toggleFieldsReadOnly(["beneficiary_name","beneficiary_address","beneficiary_city","beneficiary_dom","beneficiary_account","cpty_bank_swift_bic_code","cpty_bank_address_line_1","cpty_bank_name","cpty_bank_country","cpty_bank_address_line_2","cpty_bank_dom","cpty_bank_country","ft_cur_code"],false);}else{m.toggleFieldsReadOnly(["beneficiary_name","beneficiary_address","beneficiary_city","beneficiary_dom","beneficiary_account","cpty_bank_swift_bic_code","cpty_bank_address_line_1","cpty_bank_name","cpty_bank_country","cpty_bank_address_line_2","cpty_bank_dom","cpty_bank_country","ft_cur_code"],true);}return;}};d.ready(function(){m._config.forceSWIFTValidation=true;});d.mixin(m._config,{initReAuthParams:function(){var _c4=dj.byId("entity")?dj.byId("entity").get("value"):"";var _c5={productCode:"FT",subProductCode:dj.byId("sub_product_code")?dj.byId("sub_product_code").get("value"):"",transactionTypeCode:"01",entity:_c4,currency:dj.byId("ft_cur_code")?dj.byId("ft_cur_code").get("value"):"",amount:dj.byId("ft_amt")?m.trimAmount(dj.byId("ft_amt").get("value")):"",bankAbbvName:dj.byId("customer_bank")?dj.byId("customer_bank").get("value"):"",es_field1:dj.byId("ft_amt")?m.trimAmount(dj.byId("ft_amt").get("value")):"",es_field2:(dj.byId("beneficiary_account"))?dj.byId("beneficiary_account").get("value"):""};return _c5;}});d.mixin(m,{fireFXAction:function(){if(m._config.fxParamData&&dj.byId("sub_product_code")&&dj.byId("sub_product_code").get("value")!==""&&dj.byId("issuing_bank_abbv_name")&&dj.byId("issuing_bank_abbv_name").get("value")!==""){var _c6=m._config.fxParamData[dj.byId("sub_product_code").get("value")][dj.byId("issuing_bank_abbv_name").get("value")];if(m._config.fxParamData&&_c6.isFXEnabled==="Y"){var _c7,_c8;var _c9="";if(dj.byId("ft_cur_code")){_c9=dj.byId("ft_cur_code").get("value");}var _ca=dj.byId("ft_amt").get("value");var _cb=dj.byId("applicant_act_cur_code").get("value");var _cc=m._config.productCode;var _cd="";if(dj.byId("issuing_bank_abbv_name")&&dj.byId("issuing_bank_abbv_name").get("value")!==""){_cd=dj.byId("issuing_bank_abbv_name").get("value");}var _ce=dj.byId("applicant_act_cur_code").get("value");var _cf=false;if(_c9!==""&&!isNaN(_ca)&&_cc!==""&&_cd!==""){if(_c9!==_cb){_c7=_cb;_c8=_c9;_ce=_cb;}if(_c7&&_c8){if(d.byId(_6)&&(d.style(d.byId(_6),"display")==="none")){m.animate("wipeIn",d.byId(_6));}m.fetchFXDetails(_c7,_c8,_ca,_cc,_cd,_ce,_cf);if(dj.byId("fx_rates_type_1")&&dj.byId("fx_rates_type_1").get("checked")){if(isNaN(dj.byId("fx_exchange_rate").get("value"))||dj.byId("fx_exchange_rate_cur_code").get("value")===""||isNaN(dj.byId("fx_exchange_rate_amt").get("value"))||(m._config.fxParamData[dj.byId("sub_product_code").get("value")][dj.byId("issuing_bank_abbv_name").get("value")].toleranceDispInd==="Y"&&(isNaN(dj.byId("fx_tolerance_rate").get("value"))||isNaN(dj.byId("fx_tolerance_rate_amt").get("value"))||dj.byId("fx_tolerance_rate_cur_code").get("value")===""))){_2f(m.getLocalization("FXDefaultErrorMessage"));}}}else{if(d.byId(_6)&&(d.style(d.byId(_6),"display")!=="none")){m.animate("wipeOut",d.byId(_6));}m.defaultBindTheFXTypes();}}if(dj.byId("recurring_payment_enabled")&&dj.byId("recurring_payment_enabled").get("checked")&&dj.byId("fx_rates_type_2")){dj.byId("fx_rates_type_2").set("disabled",true);m.animate("wipeOut",d.byId("contracts_div"));}}}},bind:function(){m.setValidation("fx_tolerance_rate",m.validateToleranceAndExchangeRate);m.connect("beneficiary_name","onChange",m.checkBeneficiaryNicknameDiv);m.connect("applicant_act_name","onChange",m.checkNickNameDiv);m.setValidation("template_id",m.validateTemplateId);m.setValidation("request_date",m.validateCashRequestDate);m.setValidation("iss_date",m.validateCashProcessingDate);m.connect("iss_date","onClick",function(){m.clearDateCache();if(misys._config.isMultiBank){var _d0;if(dijit.byId("customer_bank")){_d0=dijit.byId("customer_bank").get("value");}if(_d0!==""&&misys&&misys._config&&misys._config.businessDateForBank&&misys._config.businessDateForBank[_d0][0]&&misys._config.businessDateForBank[_d0][0].value!==""){var _d1=parseInt(misys._config.businessDateForBank[_d0][0].value.substring(0,4),10);var _d2=parseInt(misys._config.businessDateForBank[_d0][0].value.substring(5,7),10);var _d3=parseInt(misys._config.businessDateForBank[_d0][0].value.substring(8,10),10);this.dropDown.currentFocus=new Date(_d1,_d2-1,_d3);}}});m.setValidation("ft_cur_code",m.validateCurrency);m.setValidation("cpty_bank_country",m.validateCountry);m.setValidation("intermediary_bank_country",m.validateCountry);m.setValidation("ordering_institution_country",m.validateCountry);m.setValidation("ordering_customer_bank_country",m.validateCountry);m.setValidation("beneficiary_country",m.validateCountry);m.setValidation("fx_exchange_rate",m.validateToleranceAndExchangeRate);m.setValidation("notify_beneficiary_email",m.validateEmailAddr);m.setValidation("cpty_bank_swift_bic_code",m.validateBICFormat);m.setValidation("intermediary_bank_swift_bic_code",m.validateBICFormat);m.setValidation("ordering_customer_bank_swift_bic_code",m.validateBICFormat);m.setValidation("ordering_institution_swift_bic_code",m.validateBICFormat);m.setValidation("beneficiary_swift_bic_code",m.validateBICFormat);m.connect("charge_act_name","onChange",function(){if(dj.byId("charge_act_name")&&dj.byId("debit_account_for_charges")){dj.byId("debit_account_for_charges").set("value",dj.byId("charge_act_name").get("value"));}});m.connect("entity","onClick",m.validateRequiredField);m.connect("applicant_act_name","onClick",m.validateRequiredField);m.connect("beneficiary_name","onClick",m.validateRequiredField);m.connect("beneficiary_address","onClick",m.validateRequiredField);m.connect("beneficiary_account","onClick",m.validateRequiredField);m.connect("cpty_bank_name","onClick",m.validateRequiredField);m.connect("cpty_bank_address_line_1","onClick",m.validateRequiredField);m.connect("cpty_bank_country","onClick",m.validateRequiredField);m.connect("recurring_flag","onClick",m.showRecurring);m.connect("recurring_flag","onClick",function(){var _d4=dj.byId("gpp_fee_config_flag")?dj.byId("gpp_fee_config_flag").get("value"):"false";var _d5=dj.byId("gpp_fee_config_amt_cur_code")?dj.byId("gpp_fee_config_amt_cur_code").get("value"):"",_d6=dj.byId("gpp_fee_config_amt_val")?dj.byId("gpp_fee_config_amt_val").get("value"):"";if(dj.byId("response_status")){dj.byId("response_status").set("value","");}if(dj.byId("recurring_flag").get("checked")===true){if(dj.byId("payment_fee_details")){dj.byId("payment_fee_details").set("value","");}if((_d4==="true")){if(document.getElementById("NO_FEES_FOR_RECCURING_PAYMENT")){document.getElementById("NO_FEES_FOR_RECCURING_PAYMENT").style.display="block";}m.hideFeeDetailsForError();}}else{if((_d4==="true")){m.hideAllDisclaimerMessages();dj.byId("add_fee_details_button").set("disabled",false);document.getElementById("FEE_DETAILS_CONFIRMATION_DISCLAIMER").style.display="block";if(dj.byId("is_view_fees_btn")){dj.byId("is_view_fees_btn").set("value","false");}}}});m.connect("button_intrmdt_ok","onClick",_67);m.setValidation("beneficiary_name",_57);m.connect("beneficiary_name","onChange",function(){_80();if(dj.byId("notify_beneficiary_email")&&dj.byId("notify_beneficiary").get("checked")){if(dj.byId("notify_beneficiary_choice_1").get("checked")){if(dj.byId("bene_adv_email_no_send").get("value")!==""){dj.byId("notify_beneficiary_email").set("value",dj.byId("bene_adv_email_no_send").get("value"));}else{if(dj.byId("bene_adv_email_no_send1").get("value")!==""){dj.byId("notify_beneficiary_email").set("value",dj.byId("bene_adv_email_no_send1").get("value"));}else{dj.byId("notify_beneficiary").set("checked",false);dj.byId("notify_beneficiary_choice_1").set("checked",false);dj.byId("notify_beneficiary_email").set("value","");dj.byId("notify_beneficiary_email").set("disabled",true);}}}else{if(dj.byId("notify_beneficiary_choice_2").get("checked")){dj.byId("notify_beneficiary_email").set("value","");}}}});if(dj.byId("sub_product_code")&&dj.byId("sub_product_code").get("value")==="MT103"){m.connect("beneficiary_name","onChange",m.validateRemittanceReasonCode);}m.connect("beneficiary_img","onClick",_8c);m.connect("notify_beneficiary","onClick",_a2);m.connect("notify_beneficiary_choice_1","onClick",_ad);m.connect("notify_beneficiary_choice_2","onClick",_ad);if(dj.byId("remittance_description")&&dj.byId("remittance_description").get("value")===""){dj.byId("remittance_code").set("value","");}m.connect("remittance_description","onChange",_ab);m.connect("cpty_bank_swift_bic_code","onChange",_34);m.connect("cpty_bank_swift_bic_code","onChange",_52);m.connect("cpty_bank_swift_bic_code","onChange",function(){if(dj.byId("cpty_bank_swift_bic_code")&&dj.byId("cpty_bank_swift_bic_code").get("value").length===0){if((dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")==="")||(dj.byId("pre_approved")&&dj.byId("pre_approved").get("value")===null)){m.toggleFieldsReadOnly(["cpty_bank_swift_bic_code","cpty_bank_name","cpty_bank_address_line_1","cpty_bank_address_line_2","cpty_bank_dom","cpty_bank_country"],false);if(dj.byId("beneficiary_bank_branch_address_line_1")){dj.byId("beneficiary_bank_branch_address_line_1").set("readOnly",true);}if(dj.byId("branch_address_flag")){dj.byId("branch_address_flag").set("checked",false);}dj.byId("cpty_bank_country_img").set("disabled",false);}_74.clear();}});m.connect("ordering_institution_swift_bic_code","onBlur",function(){if(dj.byId("ordering_institution_swift_bic_code").get("value").length===0){m.toggleFieldsReadOnly(["ordering_institution_swift_bic_code","ordering_institution_name","ordering_institution_address_line_1","ordering_institution_address_line_2","ordering_customer_bank_dom","ordering_customer_bank_country","ordering_customer_bank_account"],false);_c.clear();}});m.connect("intermediary_bank_swift_bic_code","onBlur",function(){if(dj.byId("intermediary_bank_swift_bic_code").get("value").length===0){m.toggleFieldsReadOnly(["intermediary_bank_swift_bic_code","intermediary_bank_name","intermediary_bank_address_line_1","intermediary_bank_address_line_2","intermediary_bank_dom","intermediary_bank_country"],false);_75.clear();}});m.connect("beneficiary_swift_bic_code","onChange",function(){if(dj.byId("beneficiary_swift_bic_code").get("value").length===0){m.toggleFieldsReadOnly(["beneficiary_swift_bic_code","beneficiary_name","beneficiary_address","beneficiary_city","beneficiary_dom","beneficiary_account"],false);_e.clear();}});m.connect("ordering_institution_swift_bic_code","onBlur",function(){if(dj.byId("ordering_institution_swift_bic_code").get("value").length===0){m.toggleFieldsReadOnly(["ordering_institution_swift_bic_code","ordering_institution_name","ordering_institution_address_line_1","ordering_institution_address_line_2","ordering_customer_bank_dom","ordering_customer_bank_country","ordering_customer_bank_account"],false);_c.clear();}});m.connect("intermediary_bank_swift_bic_code","onChange",function(){var _d7=dj.byId("intermediary_bank_country_img");if(!m._config.isBeneficiaryAccountsPopulated&&this.get("value")!==""){m.setSwiftBankDetailsForOnBlurEvent(false,"intermediary_bank_swift_bic_code",null,null,"intermediary_bank_",true,false,true);}if(dj.byId("intermediary_bank_swift_bic_code")){dj.byId("beneficiary_bank_swift_bic_code").set("value",dj.byId("intermediary_bank_swift_bic_code").get("value"));}if(dj.byId("pre_approved_status")&&dj.byId("pre_approved_status").get("value")==="Y"){var _d8=["intermediary_bank_name","intermediary_bank_address_line_1","intermediary_bank_address_line_2","intermediary_bank_dom","intermediary_bank_country"];m.toggleFieldsReadOnly(_d8,true);}else{_d8=["intermediary_bank_name","intermediary_bank_address_line_1","intermediary_bank_address_line_2","intermediary_bank_dom","intermediary_bank_country"];m.toggleFieldsReadOnly(_d8,true);}if(_d7){if(dj.byId("intermediary_bank_swift_bic_code").get("value").length!==0&&dj.byId("pre_approved_status").get("value")==="Y"&&_5){_d7.set("disabled",true);}else{if(dj.byId("intermediary_bank_swift_bic_code").get("value").length!==0){_d7.set("disabled",true);}else{_d7.set("disabled",false);}}}});m.connect("branch_address_flag","onChange",function(){_9d(this.get("checked"));});m.connect("beneficiary_bank_branch_address_line_1","onChange",function(){if(this.get("value")!==""){if(!dj.byId("branch_address_flag").get("checked")){dj.byId("branch_address_flag").set("checked",true);}}if(m._config.isBeneficiaryAccountsPopulated){if(this.get("value")===""){dj.byId("branch_address_flag").set("checked",false);}}});m.connect("cpty_bank_country","onChange",function(){if(dj.byId("sub_product_code")&&dj.byId("sub_product_code").get("value")==="MT103"){m.MT103ValidCountryCode();}});m.connect("pre_approved_status","onChange",function(){_a1();if(dj.byId("pre_approved_status").get("value")==="N"){if(dj.byId("bank_img")){dj.byId("bank_img").set("disabled",false);}if(dj.byId("bank_iso_img")){dj.byId("bank_iso_img").set("disabled",false);}if(dj.byId("currency")){dj.byId("currency").set("disabled",false);}if(dj.byId("cpty_bank_country_img")){if(dj.byId("cpty_bank_swift_bic_code").get("value").length===0){dj.byId("cpty_bank_country_img").set("disabled",false);}else{dj.byId("cpty_bank_country_img").set("disabled",true);if(dj.byId("bank_iso_img")){dj.byId("bank_iso_img").set("disabled",true);}if(dj.byId("inter_bank_iso_img")){if(dj.byId("intermediary_bank_swift_bic_code").get("value").length!==0){dj.byId("inter_bank_iso_img").set("disabled",true);dj.byId("intermediary_bank_country_img").set("disabled",true);}}}}}});m.connect("ft_cur_code","onChange",function(){m._validateCurrencyCode(dj.byId("sub_product_code"),dj.byId("ft_cur_code"));});m.connect("ft_cur_code","onChange",m.MT103ValidCountryCode);m.connect("ft_cur_code","onChange",m.MT103Intermediarydetailvalidation);m.connect("intermediary_bank_swift_bic_code","onBlur",function(){m.setSwiftBankDetailsForOnBlurEvent(false,"intermediary_bank_swift_bic_code",null,null,"intermediary_bank_",true,true,true);if(dj.byId("intermediary_bank_swift_bic_code").get("value").length!==0&&dj.byId("pre_approved_status")&&dj.byId("pre_approved_status").get("value")==="Y"&&_5){dj.byId("intermediary_bank_country_img").set("disabled",true);dj.byId("inter_bank_iso_img").set("disabled",true);}else{dj.byId("intermediary_bank_country_img").set("disabled",false);if(dj.byId("intermediary_bank_swift_bic_code").get("value").length!==0&&(_5||(dj.byId("has_intermediary")&&dj.byId("has_intermediary").get("value")=="true"))){dj.byId("intermediary_bank_country_img").set("disabled",true);dj.byId("inter_bank_iso_img").set("disabled",true);}else{dj.byId("intermediary_bank_country_img").set("disabled",false);dj.byId("inter_bank_iso_img").set("disabled",false);}}});m.connect("intermediary_bank_swift_bic_code","onChange",_33);m.connect("intermediary_bank_swift_bic_code","onChange",_52);m.connect("ordering_customer_bank_swift_bic_code","onChange",_3a);m.connect("ordering_customer_bank_name","onChange",_3a);m.connect("ordering_institution_swift_bic_code","onChange",_38);m.connect("ordering_institution_name","onChange",_38);if(dj.byId("sub_product_code")&&dj.byId("sub_product_code").get("value")==="FI202"){m.connect("beneficiary_swift_bic_code","onChange",_39);m.connect("beneficiary_name","onChange",_39);}if(dj.byId("sub_product_code")&&dj.byId("sub_product_code").get("value")==="MT103"){m.connect("ft_cur_code","onChange",m.MT103DetailsBeneficiary);}if(dj.byId("sub_product_code")&&dj.byId("sub_product_code").get("value")==="MT103"){m.connect("cpty_bank_country","onChange",m.MT103ValidCountryCode);}if(dj.byId("sub_product_code")&&dj.byId("sub_product_code").get("value")==="MT103"){m.connect("intermediary_bank_country","onChange",m.MT103Intermediarydetailvalidation);}m.connect("entity","onChange",function(){if(!misys._config.isMultiBank){m.setApplicantReference();}_4=true;dj.byId("applicant_act_name").set("value","");if(dj.byId("recurring_flag")){dj.byId("recurring_flag").set("checked",false);}if(misys._config.isMultiBank&&dj.byId("customer_bank")){dj.byId("customer_bank").set("disabled",false);dj.byId("customer_bank").set("value","");m.populateCustomerBanks();}if(!misys._config.isMultiBank){m.setApplicantReference();}});m.connect("customer_bank","onChange",function(){m.handleMultiBankRecurring(_3);_3=false;});if(dj.byId("bulk_ref_id")&&dj.byId("bulk_ref_id").get("value")!==""&&dj.byId("issuing_bank_abbv_name")&&dj.byId("issuing_bank_abbv_name").get("value")!==""){m.initializeFX(dj.byId("sub_product_code").get("value"),dj.byId("issuing_bank_abbv_name").get("value"));if(dj.byId("applicant_act_cur_code")&&dj.byId("applicant_act_cur_code").get("value")!==""&&dj.byId("ft_cur_code")&&dj.byId("ft_cur_code").get("value")!==""&&dj.byId("applicant_act_cur_code").get("value")!==dj.byId("ft_cur_code").get("value")&&!isNaN(dj.byId("ft_amt").get("value"))){m.onloadFXActions();}else{m.defaultBindTheFXTypes();}_44();}else{m.connect("customer_bank","onChange",_b7);}m.connect("applicant_act_name","onChange",function(){if(dj.byId("customer_bank")&&dj.byId("applicant_act_name")&&dj.byId("applicant_act_name").get("value")!==""){dj.byId("customer_bank").set("value",m._config.customerBankName);}});m.connect("applicant_act_name","onChange",function(){_bf();});m.connect("beneficiary_name","onBlur",function(){var _d9=dj.byId("counterparty_details_name_1");if(_d9){_d9.set("value",dj.byId("beneficiary_name").get("value"));}});m.connect("clear_img","onClick",function(){_7e();if(dj.byId("notify_beneficiary_email")){dj.byId("notify_beneficiary").set("checked",false);dj.byId("notify_beneficiary_choice_1").set("checked",false);dj.byId("notify_beneficiary_choice_2").set("checked",false);dj.byId("notify_beneficiary_choice_1").set("disabled",true);dj.byId("notify_beneficiary_choice_2").set("disabled",true);dj.byId("notify_beneficiary_email").set("value","");dj.byId("notify_beneficiary_email").set("disabled",true);dj.byId("bene_adv_email_no_send").set("value","");dj.byId("bene_adv_email_no_send1").set("value","");}});m.connect("iss_date","onChange",function(){var _da=this.get("value");if(dj.byId("request_date")){if(dj.byId("request_date").get("value")===null||m.compareDateFields(dj.byId("request_date"),this)){dj.byId("request_date").set("value",_da);}}});m.connect("ft_cur_code","onChange",function(){if(dj.byId("charge_act_name")){dj.byId("charge_act_name").set("value","");}});m.connect("beneficiary_bank_clearing_code","onChange",function(){var val=this.get("value");dj.byId("beneficiary_bank_clearing_code_desc").set("value","");if(val!==""&&val.length>0){dj.byId("beneficiary_bank_clearing_code_desc").set("value",val.substring(0,2));if(dj.byId("beneficiary_bank_clearing_code_desc").get("value")===""){this.set("value","");this.focus();this.set("state","Error");dj.hideTooltip(this.domNode);dj.showTooltip(m.getLocalization("CCValidationUnmatchedPrefixError"),this.domNode,0);return false;}}});m.connect("intermediary_bank_clearing_code","onChange",function(){var val=this.get("value");dj.byId("intermediary_bank_clearing_code_desc").set("value","");if(val!==""){dj.byId("intermediary_bank_clearing_code_desc").set("value",val.substring(0,2));if(dj.byId("intermediary_bank_clearing_code_desc").get("value")===""){this.set("value","");this.focus();this.set("state","Error");dj.hideTooltip(this.domNode);dj.showTooltip(m.getLocalization("CCValidationUnmatchedPrefixError"),this.domNode,0);return false;}}});m.connect("beneficiary_bank_clearing_code_desc","onChange",function(){var _db=this.get("value");var _dc=dj.byId("beneficiary_bank_clearing_code");m.toggleRequired("beneficiary_bank_clearing_code",false);if(_dc){m.toggleRequired("beneficiary_bank_clearing_code",true);var _dd=_dc.get("value");if(_db===""){m.toggleRequired("beneficiary_bank_clearing_code",false);}if(_dd!==""&&_dd.substring(0,2)!=_db){_dc.focus();_dc.set("state","Error");dj.hideTooltip(_dc.domNode);dj.showTooltip(m.getLocalization("CCValidationUnmatchedPrefixError"),_dc.domNode,0);return false;}}});m.connect("intermediary_bank_clearing_code_desc","onChange",function(){var _de=this.get("value");var _df=dj.byId("intermediary_bank_clearing_code");m.toggleRequired("intermediary_bank_clearing_code",false);if(_df){m.toggleRequired("intermediary_bank_clearing_code",true);var _e0=_df.get("value");if(_de===""){m.toggleRequired("intermediary_bank_clearing_code",false);}if(_e0!==""&&_e0.substring(0,2)!=_de){_df.focus();_df.set("state","Error");dj.hideTooltip(_df.domNode);dj.showTooltip(m.getLocalization("CCValidationUnmatchedPrefixError"),_df.domNode,0);return false;}}});m.connect("applicant_act_pab","onChange",_b5);m.bindRecurringFields();m.beneAdvBinding();m.connect("ft_cur_code","onBlur",function(){m.setCurrency(this,["ft_amt"]);});var _e1=dj.byId("sub_product_code").get("value");if(dj.byId("issuing_bank_abbv_name")&&dj.byId("issuing_bank_abbv_name").get("value")!==""&&m._config.fxParamData&&m._config.fxParamData[_e1][dj.byId("issuing_bank_abbv_name").get("value")].isFXEnabled==="Y"){m.connect("ft_cur_code","onBlur",function(){m.setCurrency(this,["ft_amt"]);if(dj.byId("ft_cur_code").get("value")!==""&&!isNaN(dj.byId("ft_amt").get("value"))){m.fireFXAction();}else{m.defaultBindTheFXTypes();}});m.connect("ft_cur_code","onChange",function(){m.setCurrency(this,["ft_amt"]);if(dj.byId("ft_cur_code").get("value")!==""&&!isNaN(dj.byId("ft_amt").get("value"))){m.fireFXAction();}else{m.defaultBindTheFXTypes();}var _e2=dj.byId("currency_res").get("value");if(_e2==="true"){_c1();}});m.connect("ft_amt","onBlur",function(){m.setTnxAmt(this.get("value"));var _e3="";if(dj.byId("ft_cur_code")){_e3=dj.byId("ft_cur_code").get("value");}if(!isNaN(dj.byId("ft_amt").get("value"))&&_e3!==""){m.fireFXAction();}else{m.defaultBindTheFXTypes();}});}else{if(d.byId(_6)){d.style(_6,"display","none");}}if(dijit.byId("ft_cur_code")&&dijit.byId("ft_amt")){misys.setCurrency(dijit.byId("ft_cur_code"),["ft_amt"]);}m.connect("ft_amt","onChange",function(){var _e4=dj.byId("gpp_fee_config_flag")?dj.byId("gpp_fee_config_flag").get("value"):"false";var _e5=dj.byId("gpp_fee_config_amt_cur_code")?dj.byId("gpp_fee_config_amt_cur_code").get("value"):"",_e6=dj.byId("gpp_fee_config_amt_val")?dj.byId("gpp_fee_config_amt_val").get("value"):"";if(_e4==="true"){if(dj.byId("payment_fee_details")){dj.byId("payment_fee_details").set("value","");}if(dj.byId("is_view_fees_btn")){dj.byId("is_view_fees_btn").set("value","false");}if(dj.byId("response_status")){dj.byId("response_status").set("value","");}document.getElementById("ft_fee_details_div").style.display="none";m.hideAllDisclaimerMessages();if(!(dj.byId("recurring_payment_enabled"))||(dj.byId("recurring_payment_enabled")&&dj.byId("recurring_payment_enabled").get("checked")===false)){dj.byId("add_fee_details_button").set("disabled",false);document.getElementById("FEE_DETAILS_CONFIRMATION_DISCLAIMER").style.display="block";}else{if((dj.byId("recurring_payment_enabled")&&dj.byId("recurring_payment_enabled").get("checked")===true)){document.getElementById("NO_FEES_FOR_RECCURING_PAYMENT").style.display="block";}}}});m.connect("ft_cur_code","onChange",function(){var _e7=dj.byId("gpp_fee_config_flag")?dj.byId("gpp_fee_config_flag").get("value"):"false";var _e8=dj.byId("gpp_fee_config_amt_cur_code")?dj.byId("gpp_fee_config_amt_cur_code").get("value"):"",_e9=dj.byId("gpp_fee_config_amt_val")?dj.byId("gpp_fee_config_amt_val").get("value"):"";if(_e7==="true"){if(dj.byId("payment_fee_details")){dj.byId("payment_fee_details").set("value","");}if(dj.byId("is_view_fees_btn")){dj.byId("is_view_fees_btn").set("value","false");}if(dj.byId("response_status")){dj.byId("response_status").set("value","");}document.getElementById("ft_fee_details_div").style.display="none";document.getElementById("fee_agent_details_div").style.display="none";document.getElementById("grand_total_fee_details").style.display="none";m.hideAllDisclaimerMessages();if(!(dj.byId("recurring_payment_enabled"))||(dj.byId("recurring_payment_enabled")&&dj.byId("recurring_payment_enabled").get("checked")===false)){dj.byId("add_fee_details_button").set("disabled",false);document.getElementById("FEE_DETAILS_CONFIRMATION_DISCLAIMER").style.display="block";}else{if((dj.byId("recurring_payment_enabled")&&dj.byId("recurring_payment_enabled").get("checked")===true)){document.getElementById("NO_FEES_FOR_RECCURING_PAYMENT").style.display="block";}}}});m.connect("charge_option","onChange",function(){var _ea=dj.byId("gpp_fee_config_flag")?dj.byId("gpp_fee_config_flag").get("value"):"false";var _eb=dj.byId("gpp_fee_config_amt_cur_code")?dj.byId("gpp_fee_config_amt_cur_code").get("value"):"",_ec=dj.byId("gpp_fee_config_amt_val")?dj.byId("gpp_fee_config_amt_val").get("value"):"";if(_ea==="true"){if(dj.byId("payment_fee_details")){dj.byId("payment_fee_details").set("value","");}if(dj.byId("response_status")){dj.byId("response_status").set("value","");}if(dj.byId("is_view_fees_btn")){dj.byId("is_view_fees_btn").set("value","false");}document.getElementById("ft_fee_details_div").style.display="none";m.hideAllDisclaimerMessages();if(!(dj.byId("recurring_payment_enabled"))||(dj.byId("recurring_payment_enabled")&&dj.byId("recurring_payment_enabled").get("checked")===false)){dj.byId("add_fee_details_button").set("disabled",false);document.getElementById("FEE_DETAILS_CONFIRMATION_DISCLAIMER").style.display="block";}else{if((dj.byId("recurring_payment_enabled")&&dj.byId("recurring_payment_enabled").get("checked")===true)){document.getElementById("NO_FEES_FOR_RECCURING_PAYMENT").style.display="block";}}}});},showbeneficiary_bankClearingCodeFormat:function(){var _ed=dj.byId("beneficiary_bank_clearing_code_desc").get("value");if(_ed!==""){var _ee=m._config.clearingCodesFormat[_ed];var _ef=m._config.clearingCodesRegExp[_ed];if(_ee!==""){m.dialog.show("ALERT",m.getLocalization("clearingCodeFormatMessage",[_ee,_ef]));}}},showintermediary_bankClearingCodeFormat:function(){var _f0=dj.byId("intermediary_bank_clearing_code_desc").get("value");if(_f0!==""){var _f1=m._config.clearingCodesFormat[_f0];var _f2=m._config.clearingCodesRegExp[_f0];if(_f1!==""){m.dialog.show("ALERT",m.getLocalization("clearingCodeFormatMessage",[_f1,_f2]));}}},onFormLoad:function(){m.setCurrency(dj.byId("ft_cur_code"),["ft_amt"]);if(misys._config.nickname==="true"&&dj.byId("applicant_act_nickname")&&dj.byId("applicant_act_nickname").get("value")!==""&&d.byId("nickname")){m.animate("fadeIn",d.byId("nickname"));d.style("nickname","display","inline");d.byId("nickname").innerHTML=dj.byId("applicant_act_nickname").get("value");}else{m.animate("fadeOut",d.byId("applicant_act_nickname_row"));}var _f3=dijit.byId("mode")?dijit.byId("mode").get("value"):"";if(_f3==="DRAFT"&&dj.byId("beneficiary_name")&&dj.byId("applicant_act_pab")&&dj.byId("applicant_act_pab").get("value")==="Y"&&dj.byId("beneficiary_name").value!==""){if(!m.validateBeneficiaryStatus()){dj.byId("beneficiary_name").set("state","Error");dj.showTooltip(m.getLocalization("beneficiaryIsInactive"),dj.byId("beneficiary_name").domNode,0);}}if(d.byId("recurring_on_div")){d.style("recurring_on_div","display","none");}if(dj.byId("notify_beneficiary")&&dj.byId("notify_beneficiary").get("checked")&&(_f3==="DRAFT")){var _f4=dj.byId("notify_beneficiary").get("checked");m.toggleRequired("notify_beneficiary_email",_f4);m.toggleRequired("notify_beneficiary_choice_1",_f4);m.toggleRequired("notify_beneficiary_choice_2",_f4);if(dj.byId("notify_beneficiary_choice_1").get("checked")){var _f5=d.byId("notify_beneficiary_email_node");var _f6=d.byId("label_notify_beneficiary_choice_2");_ad();if(dj.byId("notify_beneficiary_choice_2").get("checked")){d.place(_f5,_f6,"after");}}}if(dj.byId("customer_bank")&&dj.byId("customer_bank").get("value")!==""&&misys&&misys._config&&misys._config.businessDateForBank&&misys._config.businessDateForBank[dj.byId("customer_bank").get("value")]&&misys._config.businessDateForBank[dj.byId("customer_bank").get("value")][0]&&misys._config.businessDateForBank[dj.byId("customer_bank").get("value")][0].value!==""){var _f7=misys._config.businessDateForBank[dj.byId("customer_bank").get("value")][0].value;var _f8=_f7.substring(0,4);var _f9=_f7.substring(5,7);var _fa=_f7.substring(8,10);_f7=_fa+"/"+_f9+"/"+_f8;var _fb=new Date(_f8,_f9-1,_fa);if(dj.byId("option_for_tnx")&&dj.byId("option_for_tnx").get("value")==="SCRATCH"){dj.byId("appl_date").set("value",_f7);document.getElementById("appl_date_view_row").childNodes[1].innerHTML=_f7;if(dj.byId("appl_date_hidden")){dj.byId("appl_date_hidden").set("value",_fb);}}if(dj.byId("todays_date")){dj.byId("todays_date").set("value",_fb);}}m.checkBeneficiaryNicknameOnFormLoad();if(misys._config.isMultiBank){m.populateCustomerBanks(true);var _fc=dj.byId("entity");var _fd=dj.byId("customer_bank");if(!_fc&&_fd){_fd.set("disabled",false);_fd.set("required",true);}var _fe=dj.byId("customer_bank_hidden");if(_fd&&_fe){_fd.set("value",_fe.get("value"));}if(d.byId("server_message")&&d.byId("server_message").innerHTML!==""||dijit.byId("option_for_tnx")&&(dijit.byId("option_for_tnx").get("value")==="REMITTANCE_CORP"||dijit.byId("option_for_tnx").get("value")==="REMITTANCE_FI"||dijit.byId("option_for_tnx").get("value")==="TEMPLATE")){_3=true;}if(dj.byId("issuing_bank_abbv_name")&&dj.byId("issuing_bank_abbv_name").get("value")!==""){_2=true;_4=true;_fd.set("value",dj.byId("issuing_bank_abbv_name").get("value"));_fe.set("value",dj.byId("issuing_bank_abbv_name").get("value"));}if(misys._config.perBankRecurringAllowed&&dojo.byId("recurring_payment_checkbox")&&dj.byId("customer_bank")){if(dj.byId("customer_bank").get("value")===""){m.animate("fadeOut",dojo.byId("recurring_payment_checkbox"));}else{if(dj.byId("customer_bank").get("value")!==""&&misys._config.perBankRecurringAllowed[dj.byId("customer_bank").get("value")]!=="Y"){m.animate("fadeOut",dojo.byId("recurring_payment_checkbox"));}}}if(_fc&&_fc.get("value")===""&&_fd){_fd.set("disabled",true);_fd.set("required",false);}if(dijit.byId("recurring_frequency")&&dijit.byId("customer_bank").get("value")!==""&&misys._config.perBankFrequency){var _ff=misys._config.perBankFrequency[dijit.byId("customer_bank").get("value")];if(_ff){dijit.byId("recurring_frequency").store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_ff}});dijit.byId("recurring_frequency").fetchProperties={sort:[{attribute:"name"}]};}dijit.byId("recurring_frequency").set("value",dijit.byId("recurring_frequency")._lastQuery);}}else{m.setApplicantReference();}d.forEach(d.query(".remittanceDisclaimer"),function(node){var _100=dj.byId("sub_product_code").get("value")+"_"+m.getLocalization("disclaimer");if(dj.byId("sub_product_code")&&(node.id==_100)){m.animate("fadeIn",_100);}});_83("beneficiary");_83("intermediary");_8f();if(dj.byId("ordering_institution_swift_bic_code")){_99();}if(dj.byId("ordering_customer_bank_swift_bic_code")){_97();}_95();if(dj.byId("branch_address_flag")){if(dj.byId("cpty_bank_swift_bic_code")&&dj.byId("cpty_bank_swift_bic_code").get("value").length===0){dj.byId("branch_address_flag").set("checked",false);dj.byId("branch_address_flag").set("readOnly",true);}else{dj.byId("branch_address_flag").set("readOnly",false);if(dj.byId("branch_address_flag").get("checked")){m.toggleRequired("beneficiary_bank_branch_address_line_1",true);}else{m.toggleRequired("beneficiary_bank_branch_address_line_1",false);}}}_a1();m.initForm();if(dj.byId("beneficiary_swift_bic_code")){_9b();}if(dj.byId("recurring_payment_enabled")&&dj.byId("recurring_payment_enabled").get("checked")){dj.byId("recurring_flag").set("checked",true);m._config.clearOnSecondCall=true;m.showSavedRecurringDetails(false);d.style("recurring_payment_div","display","block");}else{if(d.byId("recurring_payment_div")){d.style("recurring_payment_div","display","none");}m.hasRecurringPayment();m.showSavedRecurringDetails(false);}m.toggleSections();m.showRecurring();m.handleParametersConfigurations();m.beneAdvFormLoad();if(!m._config.isMultiBank&&dj.byId("issuing_bank_abbv_name")&&dj.byId("issuing_bank_abbv_name").get("value")!==""&&m._config.fxParamData&&dj.byId("sub_product_code")&&dj.byId("sub_product_code").get("value")!==""&&dj.byId("sub_product_code").get("value")!=="IBG"){m.initializeFX(dj.byId("sub_product_code").get("value"),dj.byId("issuing_bank_abbv_name").get("value"));if(dj.byId("applicant_act_cur_code")&&dj.byId("applicant_act_cur_code").get("value")!==""&&dj.byId("ft_cur_code")&&dj.byId("ft_cur_code").get("value")!==""&&dj.byId("applicant_act_cur_code").get("value")!==dj.byId("ft_cur_code").get("value")&&dj.byId("ft_amt")&&!isNaN(dj.byId("ft_amt").get("value"))){m.onloadFXActions();}else{m.defaultBindTheFXTypes();}}else{m.animate("fadeOut",_1);}if(d.byId(_6)){if(dj.byId("bulk_ref_id").get("value")!==""&&dj.byId("ft_cur_code").get("value")!==""&&!isNaN(dj.byId("ft_amt").get("value"))){m.initializeFX(dj.byId("sub_product_code").get("value"),dj.byId("issuing_bank_abbv_name").get("value"));m.fireFXAction();}else{if((dj.byId("fx_exchange_rate_cur_code")&&dj.byId("fx_exchange_rate_cur_code").get("value")!=="")||(dj.byId("fx_total_utilise_cur_code")&&dj.byId("fx_total_utilise_cur_code").get("value")!=="")){m.animate("wipeIn",d.byId(_6));}else{d.style(_6,"display","none");}}}if((dj.byId("iss_date")&&dj.byId("iss_date").get("value")!=="")&&(dj.byId("iss_date").get("value")!==null)){m.validateTransferDateWithCurrentDate(dj.byId("iss_date"));}if(dj.byId("sub_product_code")&&dj.byId("sub_product_code").get("value")==="MT103"){m.MT103DetailsBeneficiary();}if(dj.byId("sub_product_code")&&dj.byId("sub_product_code").get("value")==="MT103"){m.MT103ValidCountryCode();}if(dj.byId("sub_product_code")&&dj.byId("sub_product_code").get("value")==="MT103"&&misys._config.mt103_intermediary_details){m.MT103Intermediarydetailvalidation();}if(dj.byId("sub_product_code")&&dj.byId("sub_product_code").get("value")==="MT103"){m.validateRemittanceReasonCode();}_62();if(dj.byId("sub_product_code")&&dj.byId("sub_product_code").get("value")==="MT103"){var _101=dj.byId("gpp_fee_config_flag")?dj.byId("gpp_fee_config_flag").get("value"):"false";if(dj.byId("ft_amt")&&dj.byId("ft_amt").get("value")!=""){var _102=(dojo.number.parse(dj.byId("ft_amt").get("value"))>0)?dojo.number.parse(dj.byId("ft_amt").get("value")):0;}if((dj.byId("recurring_payment_enabled")&&dj.byId("recurring_payment_enabled").get("checked")==true)&&_101==="true"){document.getElementById("ftFeeFetails").style.display="block";document.getElementById("ft-fee-details-template").style.display="block";document.getElementById("NO_FEES_FOR_RECCURING_PAYMENT").style.display="block";m.hideFeeDetailsForError();}else{if(_101==="true"){document.getElementById("ftFeeFetails").style.display="block";document.getElementById("ft-fee-details-template").style.display="block";document.getElementById("FEE_DETAILS_CONFIRMATION_DISCLAIMER").style.display="block";if(_f3==="DRAFT"&&_102>0){if(dj.byId("is_view_fees_btn")){dj.byId("is_view_fees_btn").set("value","false");}}}}}},initForm:function(){if(dj.byId("charge_option")&&dj.byId("charge_option").get("value")===""){dj.byId("charge_option").set("value","SHA");}if(dj.byId("sub_product_code").get("value")==="MT101"){_6c.initMT101();}if(dj.byId("sub_product_code").get("value")==="MT103"&&misys._config.mt103_intermediary_details){_6c.initMT103();}if(dj.byId("sub_product_code").get("value")==="FI202"){_73.initFI202();}var _103=dj.byId("applicant_act_pab").get("value");if(d.byId("clear_img")){if(_103=="Y"&&d.style(d.byId("clear_img"),"display")!=="none"){m.animate("wipeOut",d.byId("clear_img"));dj.byId("clear_img").setAttribute("disabled",true);}}if(d.byId("beneficiary_iso_img")){if(_103==="Y"&&d.style(d.byId("beneficiary_iso_img"),"display")!=="none"){m.animate("wipeOut",d.byId("beneficiary_iso_img"));dj.byId("beneficiary_iso_img").setAttribute("disabled",true);}}},setCustomConfirmMessage:function(){var _104=dijit.byId("mode")?dijit.byId("mode").get("value"):"";var _105=dj.byId("sub_product_code")?dj.byId("sub_product_code").get("value"):"";if(_104==="DRAFT"&&_105==="MT103"){var _106;var _107=dj.byId("gpp_fee_config_flag")?dj.byId("gpp_fee_config_flag").get("value"):"false";if(dj.byId("response_status")){_106=dj.byId("response_status").get("value");}if(_107==="true"&&(_106!="200")&&_106!=""){var _108=m.getLocalization("getFeeErrorResponse");m._config.globalSubmitConfirmationMsg=_108;}else{var _109=m.getLocalization("submitTransactionConfirmation");m._config.globalSubmitConfirmationMsg=_109;}}},beforeSaveValidations:function(){if(dj.byId("payment_fee_details")){dj.byId("payment_fee_details").set("value","");}var _10a=dj.byId("entity");if(_10a&&_10a.get("value")==""){return false;}return true;},beforeSubmitValidations:function(){var _10b=dijit.byId("mode")?dijit.byId("mode").get("value"):"";var _10c=dj.byId("ft_cur_code");if(_10c&&_10b=="DRAFT"&&!m.MT103Intermediarydetailvalidation()){var _10d=dj.byId("intermediary_bank_country");var _10e=_10d.value+": is not valid Country Code";_10d.set("state","Error");dj.showTooltip(_10e,_10d.domNode,0);return false;}var _10f="";if(_10b=="DRAFT"&&!m._validateCurrencyCode(dj.byId("sub_product_code"),dj.byId("ft_cur_code"))){_10f=m.getLocalization("invalidCurrencyConfigured",[dj.byId("ft_cur_code").get("value")]);_10c.set("state","Error");dj.showTooltip(_10f,dj.byId("ft_cur_code").domNode,0);return false;}if(dj.byId("intermediary_bank_swift_bic_code")&&dj.byId("intermediary_bank_swift_bic_code").get("value")!==""&&!_52()){return false;}if((dj.byId("beneficiary_account"))&&(dj.byId("beneficiary_account").get("value")!=="")){var _110=dj.byId("beneficiary_account").get("value"),_111="",_112="";if(dj.byId("beneficiary_bank_clearing_code_desc")){_111=dj.byId("beneficiary_bank_clearing_code_desc").get("value");}var _113=dj.byId("beneficiary_bank_clearing_code");var _114=dj.byId("intermediary_bank_clearing_code_desc");var _115=dj.byId("intermediary_bank_clearing_code");_48();if((_111===""&&_113&&_113.get("value")!=="")||(_111!==""&&_113&&_113.get("value")==="")){_10f=m.getLocalization("CCValidationInvalidClearingCodeDescriptionError");m._config.onSubmitErrorMsg=_10f;_113.focus();_113.set("state","Error");return false;}else{if((_114&&_114.get("value")===""&&_115&&_115.get("value")!=="")||(_114&&_114.get("value")!==""&&_115&&_115.get("value")==="")){_10f=m.getLocalization("CCValidationInvalidClearingCodeDescriptionError");m._config.onSubmitErrorMsg=_10f;_115.focus();dj.byId("intermediary_bank_clearing_code").set("state","Error");return false;}}if(_111!==""){if(dj.byId("beneficiary_bank_clearing_code")){_112=dj.byId("beneficiary_bank_clearing_code").get("value");}if(_47&&_47.indexOf(_111)<0){_10f=m.getLocalization("beneAccountCCValidationUnsupportedClearingCodeError");m._config.onSubmitErrorMsg=_10f;_113.focus();_113.set("state","Error");return false;}var _116="N";if(_111==="SC"){if(!m.isIBAN(_110)){_116="Y";}}var _117=m._config.clearingCodesRegExp[_111];var _118;var _119;if(_116==="Y"){if(_111!==_112.substring(0,_111.length)){_10f=m.getLocalization("beneAccountCCValidationPrefixStartsWithError",[_112,_111]);m._config.onSubmitErrorMsg=_10f;_113.focus();_113.set("state","Error");return false;}_112=_112.substring(_111.length,_112.length);try{_118=new RegExp(_117);}catch(err){_119=dj.byId("beneficiary_bank_clearing_code_desc").store._itemsByIdentity[_111].name;_10f=m.getLocalization("invalidRegularExpressionError",[_119]);m._config.onSubmitErrorMsg=_10f;return false;}if(!_118.test(_112)){_10f=m.getLocalization("beneAccountCCValidationError");m._config.onSubmitErrorMsg=_10f;_113.focus();_113.set("state","Error");return false;}}if(m._config.clearingCodesMandatory[_111]==="Y"){if(_112===""){_10f=m.getLocalization("beneAccountCCValidationMandatoryError");m._config.onSubmitErrorMsg=_10f;_113.focus();_113.set("state","Error");return false;}if(_111!==_112.substring(0,_111.length)){_10f=m.getLocalization("beneAccountCCValidationPrefixStartsWithError",[_112,_111]);m._config.onSubmitErrorMsg=_10f;_113.focus();_113.set("state","Error");return false;}_112=_112.substring(_111.length,_112.length);try{_118=new RegExp(_117);}catch(err){_119=dj.byId("beneficiary_bank_clearing_code_desc").store._itemsByIdentity[_111].name;_10f=m.getLocalization("invalidRegularExpressionError",[_119]);m._config.onSubmitErrorMsg=_10f;return false;}if(!_118.test(_112)){_10f=m.getLocalization("beneAccountCCValidationError");m._config.onSubmitErrorMsg=_10f;_113.focus();_113.set("state","Error");return false;}}else{if(m._config.clearingCodesMandatory[_111]==="N"){if((_112!=="")){if(_111!==_112.substring(0,_111.length)){_10f=m.getLocalization("beneAccountCCValidationPrefixStartsWithError",[_112,_111]);m._config.onSubmitErrorMsg=_10f;_113.focus();_113.set("state","Error");return false;}_112=_112.substring(_111.length,_112.length);try{_118=new RegExp(_117);}catch(err){_119=dj.byId("beneficiary_bank_clearing_code_desc").store._itemsByIdentity[_111].name;_10f=m.getLocalization("invalidRegularExpressionError",[_119]);m._config.onSubmitErrorMsg=_10f;return false;}if(!_118.test(_112)){_10f=m.getLocalization("beneAccountCCValidationError");m._config.onSubmitErrorMsg=_10f;_113.focus();_113.set("state","Error");return false;}}}else{if(_112!==""||_111!==""){_10f=m.getLocalization("beneAccountCCValidationNoRequiredError");m._config.onSubmitErrorMsg=_10f;_113.focus();_113.set("state","Error");return false;}}}}else{if(_51){_10f=m.getLocalization("beneAccountCCValidationMandatoryError");m._config.onSubmitErrorMsg=_10f;_113.focus();_113.set("state","Error");return false;}}if(dj.byId("cpty_bank_country")){var _11a=dj.byId("cpty_bank_country").get("value");var _11b=dj.byId("ft_cur_code").get("value");if(_11a!==""&&_11b!==""){var _11c=_11a+_11b;var _11d=_11a+"ALL";if(m._config.ibanMandatory[_11c]==="Y"||m._config.ibanMandatory[_11d]==="Y"){if(!m.isIBAN(_110)){m._config.onSubmitErrorMsg=m.getLocalization("invalidIBANAccNoError",[_110]);return false;}}}}}if(_10b==="DRAFT"&&dj.byId("applicant_act_pab")&&dj.byId("applicant_act_pab").get("value")==="Y"&&!m.validateBeneficiaryStatus()){m._config.onSubmitErrorMsg=m.getLocalization("beneficiaryIsInactive");dj.byId("beneficiary_name").set("state","Error");return false;}if(dj.byId("ft_amt")){if(!m.validateAmount((dj.byId("ft_amt"))?dj.byId("ft_amt"):0)){m._config.onSubmitErrorMsg=m.getLocalization("amountcannotzero");dj.byId("ft_amt").set("value","");return false;}}var _11e=0,_11f="";if(dj.byId("to_currency_amount")){_11e=dj.byId("to_currency_amount").get("value");}if(dj.byId("to_currency")){_11f=dj.byId("to_currency").get("value");}var _120=dj.byId("gpp_fee_config_flag")?dj.byId("gpp_fee_config_flag").get("value"):"false";var _121=dj.byId("gpp_fee_config_amt_cur_code")?dj.byId("gpp_fee_config_amt_cur_code").get("value"):"",_122=dj.byId("gpp_fee_config_amt_val")?dj.byId("gpp_fee_config_amt_val").get("value"):"";if(_120==="true"&&((((_121===dj.byId("ft_cur_code").get("value"))||_121==="*")&&(_122>=dj.byId("ft_amt").get("value")))||((_121===_11f)&&((dojo.number.parse(_122))>=_11e)))){if(dj.byId("payment_fee_details")){dj.byId("payment_fee_details").set("value","");}}if((dj.byId("recurring_flag")&&dj.byId("recurring_flag").get("checked")===false)&&_120==="true"){if(dj.byId("is_view_fees_btn")&&dj.byId("is_view_fees_btn").get("value")!="true"){if(((_121===dj.byId("ft_cur_code").get("value"))||_121==="*")||(_121!=dj.byId("ft_cur_code").get("value"))){if((dj.byId("payment_fee_details"))&&dj.byId("payment_fee_details").get("value")===""){m._config.onSubmitErrorMsg=m.getLocalization("feeChargesAreNotAccurate");return false;}}}}if(!m.isRecurringDetailsValidForSubmit()){return false;}if(dj.byId("issuing_bank_abbv_name")&&dj.byId("issuing_bank_abbv_name").get("value")!==""&&m._config.fxParamData&&m._config.fxParamData[dj.byId("sub_product_code").get("value")][dj.byId("issuing_bank_abbv_name").get("value")].isFXEnabled==="Y"){if(!m.fxBeforeSubmitValidation()){return false;}if(!_3b()){return false;}}if(dj.byId("sub_product_code").get("value")==="FI103"||dj.byId("sub_product_code").get("value")==="MT103"){if(dj.byId("charge_act_cur_code")&&dj.byId("base_cur_code")&&(dj.byId("charge_act_cur_code").get("value"))!==""&&(dj.byId("charge_act_cur_code").get("value")!==dj.byId("base_cur_code").get("value")&&dj.byId("charge_act_cur_code").get("value")!==dj.byId("ft_cur_code").get("value"))){m._config.onSubmitErrorMsg=m.getLocalization("invalidDebitChargeAccount",[dj.byId("charge_act_name").get("value")]);return false;}}if(dijit.byId("remittance_description")){if(dijit.byId("remittance_description").get("required")){var val=dijit.byId("remittance_description").get("displayedValue").trim();if(val.length===0){dj.byId("remittance_description").set("value","");dj.byId("remittance_description").set("state","Error");return false;}}}if(dijit.byId("payment_details_to_beneficiary")){if(dijit.byId("payment_details_to_beneficiary").get("required")){var _123=dijit.byId("payment_details_to_beneficiary").get("value").trim();if(_123.length===0){dj.byId("payment_details_to_beneficiary").set("value","");dj.byId("payment_details_to_beneficiary").set("state","Error");return false;}}}var _124=dj.byId("applicant_act_no").get("value");var _125=m.checkAccountStatus(_124);if(!_125){m._config.onSubmitErrorMsg=misys.getLocalization("accountStatusError");return false;}if(!dj.byId("bulk_ref_id").get("value")){if(!m.beneAdvBeforeSubmitValidation()){return false;}var _126=false;if(_10b==="DRAFT"){if(dj.byId("recurring_payment_enabled")&&dj.byId("recurring_payment_enabled").get("checked")){_126=m.validateHolidaysAndCutOffTime("issuing_bank_abbv_name","sub_product_code",_10b,["Start Date"],["recurring_start_date"],"entity","ft_cur_code","ft_amt");}else{if(dijit.byId("sub_product_code_unsigned").get("value")==="MT101"){_126=m.validateHolidaysAndCutOffTime("issuing_bank_abbv_name","sub_product_code",_10b,[_7,"Request Date"],["iss_date","request_date"],"entity","ft_cur_code","ft_amt");}else{_126=m.validateHolidaysAndCutOffTime("issuing_bank_abbv_name","sub_product_code",_10b,[_7],["iss_date"],"entity","ft_cur_code","ft_amt");}}}else{if(_10b==="UNSIGNED"){if(dj.byId("recurring_payment_enabled")&&dj.byId("recurring_payment_enabled").get("value")==="Y"){_126=m.validateHolidaysAndCutOffTime("issuing_bank_abbv_name","sub_product_code_unsigned",_10b,["Start Date"],["recurring_start_date_unsigned"],"display_entity_unsigned","ft_cur_code_unsigned","ft_amt_unsigned");}else{if(dijit.byId("sub_product_code_unsigned").get("value")==="MT101"){_126=m.validateHolidaysAndCutOffTime("issuing_bank_abbv_name","sub_product_code_unsigned",_10b,[_7,"Request Date"],["iss_date_unsigned","request_date_unsigned"],"display_entity_unsigned","ft_cur_code_unsigned","ft_amt_unsigned");}else{_126=m.validateHolidaysAndCutOffTime("issuing_bank_abbv_name","sub_product_code_unsigned",_10b,[_7],["iss_date_unsigned"],"display_entity_unsigned","ft_cur_code_unsigned","ft_amt_unsigned");}}}else{m._config.onSubmitErrorMsg=m.getLocalization("technicalErrorWhileValidatingBusinessDays");_126=false;}}if(_126){m._config.holidayCutOffEnabled=false;}return _126;}else{return true;}},preDisplayAssigneeType:function(_127){var _128=m._config.task_mode||"userandbank";dojo.forEach(_127,function(_129){if(_129.description==="user_to_bank"&&dj.byId(_129.id)){if(_128==="userandbank"){dj.byId(_129.id).set("disabled",false);}else{dj.byId(_129.id).set("disabled",true);}}});}});})(dojo,dijit,misys);dojo.require("misys.client.binding.cash.create_remittance_client");}