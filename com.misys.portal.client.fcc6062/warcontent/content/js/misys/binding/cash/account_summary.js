/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.cash.account_summary"]){dojo._hasResource["misys.binding.cash.account_summary"]=true;dojo.provide("misys.binding.cash.account_summary");dojo.require("misys.form.common");dojo.require("misys.validation.common");dojo.require("dijit.form.ValidationTextBox");dojo.require("misys.widget.Dialog");dojo.require("dojo.data.ItemFileReadStore");dojo.require("dojo.data.ItemFileWriteStore");dojo.require("dijit.form.FilteringSelect");(function(d,dj,m){d.subscribe("ready",function(){d.query(".dojoxGrid").forEach(function(g){m.connect(g.id,"onRowMouseOver",m._config.showBalanceDate);m.connect(g.id,"onRowMouseOut",m._config.hideBalanceDate);});});d.mixin(m,{bind:function(){m.setValidation("account_ccy",m.validateCurrency);m.setValidation("alert_date2",m.validateAlertDates);m.setValidation("alert_date",m.validateAlertDates);m.setValidation("amt_curcode",m.validateCurrency);}});d.mixin(m,{openAccountDetails:function(_1){var _2="/screen/AjaxScreen/action/AccountDetailsAction";var _3={};var _4=m.getLocalization("accountDetailsTitle");_3.account_id=_1;var _5=new dj.Dialog({id:"account_details_dialog",title:_4,ioMethod:misys.xhrPost,ioArgs:{content:_3},href:m.getServletURL(_2),style:"width: 640px;height:auto"});_5.connect(_5,"hide",function(e){dj.byId("account_details_dialog").destroy();});_5.show();}});d.mixin(m._config,{showBalanceDate:function(_6){if((this.store&&this.store._items&&_6&&_6.rowIndex&&this.store._items.length>=_6.rowIndex)&&this.store._items[_6.rowIndex].i["owner_type"]==="Other Bank"&&this.store._items[_6.rowIndex].i["RunningStatement@AvailableBalance@value_date"]){var _7=this.store._items[_6.rowIndex].i["RunningStatement@AvailableBalance@value_date"];var _8=_7.substring(0,2)+"/"+_7.substring(3,5)+"/"+_7.substring(8,10);var _9="The balance is as on "+_8;dj.showTooltip(_9,_6.cellNode,0);}else{dj.hideTooltip(_6.cellNode);}},hideBalanceDate:function(_a){dj.hideTooltip(_a.cellNode);}});})(dojo,dijit,misys);dojo.require("misys.client.binding.cash.account_summary_client");}