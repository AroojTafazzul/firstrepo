/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.system.user_entity"]){dojo._hasResource["misys.binding.system.user_entity"]=true;dojo.provide("misys.binding.system.user_entity");dojo.require("dijit.form.FilteringSelect");dojo.require("misys.form.MultiSelect");dojo.require("dijit.form.Form");dojo.require("dijit.form.Button");dojo.require("dijit.form.TextBox");dojo.require("dijit.form.ValidationTextBox");dojo.require("misys.form.common");dojo.require("misys.validation.common");dojo.require("dojox.xml.DomParser");(function(d,dj,m){var _1="CUSTOMER_PERMISSIONS_MAINTENANCE",_2="static_user",_3="static_company";function _4(_5,_6){var _7=_5.getElementsByTagName(_6)[0],_8=(_7)?_7.childNodes[0]:"",_9=(_8)?_8.nodeValue.split(","):[],_a=[];d.forEach(_9,function(_b){if(_b){_a.push("<entity_record><abbv_name>",_b,"</abbv_name></entity_record>");}});return _a.join("");};d.mixin(m,{bind:function(){m.connect("add","onClick",function(){m.addMultiSelectItems(dj.byId("user_list"),dj.byId("avail_list_nosend"));});m.connect("remove","onClick",function(){m.addMultiSelectItems(dj.byId("avail_list_nosend"),dj.byId("user_list"));});}});m._config=m._config||{};d.mixin(m._config,{xmlTransform:function(_c){var _d=dj.byId("user_list"),_e=dj.byId("option").get("value"),_f=_e===_1?_3:_2,_10=_e===_1?"company_entity_record":m._config.xmlTagName,_11="user_entity_record",_12=_10?["<",_10,">"]:[],dom=dojox.xml.DomParser.parse(_c);_12.push("<",_11,"><",_f,">");_12.push(m.getDomNode(dom,"brch_code"));_12.push(m.getDomNode(dom,"company_id"));_12.push(m.getDomNode(dom,"company_abbv_name"));_12.push(m.getDomNode(dom,"login_id"));_12.push(m.getDomNode(dom,"user_id"));_12.push("</",_f,">");if(dom.getElementsByTagName("user_list").length>0){_12.push(_4(dom,"user_list"));}_12.push("</",_11,">");if(_10){_12.push("</",_10,">");}return _12.join("");}});})(dojo,dijit,misys);dojo.require("misys.client.binding.system.user_entity_client");}