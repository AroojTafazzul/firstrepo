/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.system.schedule_report"]){dojo._hasResource["misys.binding.system.schedule_report"]=true;dojo.provide("misys.binding.system.schedule_report");dojo.require("dijit.form.Form");dojo.require("dijit.form.Button");dojo.require("dijit.form.TextBox");dojo.require("dijit.form.ValidationTextBox");dojo.require("dijit.form.CheckBox");dojo.require("dijit.form.FilteringSelect");dojo.require("misys.form.SimpleTextarea");dojo.require("misys.form.common");dojo.require("misys.validation.common");dojo.require("dijit.form.NumberTextBox");(function(d,dj,m){function _1(){dj.byId("report_id").set("value",reports[this.get("value")]);};function _2(_3){var _4=d.byId("days_week_details"),_5=d.byId("days_month_details"),_6=d.byId("hour_details"),_7=this.get("value"),_8=function(){m.toggleFields(_7=="1",null,["week_of_day"],_3);m.toggleFields(_7=="2",null,["day_of_month"],_3);};switch(_7){case "1":m.animate("fadeOut",_5,function(){m.animate("fadeIn",_4,_8);if(hasHoursPermi){m.animate("fadeIn",_6,_8);}});break;case "2":m.animate("fadeOut",_4,function(){m.animate("fadeIn",_5,_8);if(hasHoursPermi){m.animate("fadeIn",_6,_8);}});break;default:m.animate("fadeOut",_4,function(){m.animate("fadeOut",_5,_8);if(hasHoursPermi){m.animate("fadeIn",_6,_8);}});break;}};function _9(_a){};d.mixin(m,{bind:function(){m.setValidation("email",m.validateEmailAddr);m.connect("report_name","onBlur",_1);m.connect("day_of_month","onBlur",function(){var _b=dj.byId("day_of_month");misys._config.warningMessages=[];if(_b){if(_b.get("value")>31){m.showTooltip(m.getLocalization("monthDayWarningMessage"),_b.domNode);m.setFieldState(_b,false);}else{if(_b.get("value")>28){misys._config.warningMessages.push(m.getLocalization("monthDayWarningMessage"));}}}});d.forEach(["frequency_0","frequency_1","frequency_2"],function(id){m.connect(id,"onClick",_9);m.connect(id,"onClick",_2);});},onFormLoad:function(){var _c=["frequency_0","frequency_1","frequency_2"];if(dj.byId("frequency_0").get("checked")){d.hitch(dj.byId("frequency_0"),_2,true)();}else{if(dj.byId("frequency_1").get("checked")){d.hitch(dj.byId("frequency_1"),_2,true)();}else{if(dj.byId("frequency_2").get("checked")){d.hitch(dj.byId("frequency_2"),_2,true)();}}}},beforeSubmitValidations:function(){var _d=dj.byId("frequency_0").get("checked"),_e=dj.byId("frequency_1").get("checked"),_f=dj.byId("frequency_2").get("checked");if(!_d&&!_e&&!_f){m._config.onSubmitErrorMsg=m.getLocalization("mandatoryFrequenceError");return false;}else{if(_e&&dj.byId("week_of_day").get("value")==""){m._config.onSubmitErrorMsg=m.getLocalization("mandatoryDayOfWeekError");return false;}else{if(_f&&dj.byId("day_of_month").get("value")==""){m._config.onSubmitErrorMsg=m.getLocalization("mandatoryDayOfMonthError");return false;}}}return true;}});})(dojo,dijit,misys);dojo.require("misys.client.binding.system.schedule_report_client");}