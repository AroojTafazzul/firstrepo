/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.system.prgm_cpty"]){dojo._hasResource["misys.binding.system.prgm_cpty"]=true;dojo.provide("misys.binding.system.prgm_cpty");dojo.require("dojo.data.ItemFileWriteStore");dojo.require("dojox.xml.DomParser");dojo.require("dijit.form.Button");dojo.require("misys.form.CurrencyTextBox");dojo.require("dijit.form.CheckBox");dojo.require("dijit.form.FilteringSelect");dojo.require("dijit.form.Form");dojo.require("dijit.form.NumberTextBox");dojo.require("dijit.form.RadioButton");dojo.require("dijit.form.TextBox");dojo.require("dijit.form.ValidationTextBox");dojo.require("dijit.Editor");dojo.require("dijit.layout.ContentPane");dojo.require("dojox.xml.DomParser");dojo.require("misys.validation.common");dojo.require("misys.form.common");dojo.require("misys.validation.common");dojo.require("misys.form.SimpleTextarea");dojo.require("misys.grid.DataGrid");dojo.require("misys.grid.EnhancedGrid");dojo.require("misys.form.static_document");(function(d,dj,m){d.mixin(m._config,{xmlTransform:function(){var _1=dj.byId("program_id").get("value");var _2=dj.byId("operationtype").get("value");var _3=m._config.xmlTagName,_4=_3?["<",_3,">"]:[];_4.push("<program_id>",_1,"</program_id>");_4.push("<operation_type>",_2,"</operation_type>");if(dj.byId("gridPC")&&dj.byId("gridPC").store&&dj.byId("gridPC").store!==null&&dj.byId("gridPC").store._arrayOfAllItems.length>0){_4.push("<associated_counterparties>");dj.byId("gridPC").store.fetch({query:{ABBVNAME:"*"},onComplete:dojo.hitch(dj.byId("gridPC"),function(_5){dojo.forEach(_5,function(_6){_4.push("<associated_counterparty>");_4.push("<abbv_name>",_6.ABBVNAME,"</abbv_name>");_4.push("<name>",_6.NAME,"</name>");_4.push("</associated_counterparty>");});})});_4.push("</associated_counterparties>");}if(_3){_4.push("</",_3,">");}return _4.join("");}});d.mixin(m,{bind:function(){m.connect("pc_lookup","onClick",function(){var _7=dj.byId("program_id").get("value");m.getPrgmCpty(_7);});},fetchPrgmCptyRecords:function(_8){var _9=_8.selection.getSelected().length;var _a=_8.store?_8.store._arrayOfAllItems.length:0;if(_9>0&&_a>0){m.processPCRecords(_8);m.populateGridOnLoad();}dj.byId("xhrDialog").hide();},processPCRecords:function(_b){var _c=dj.byId("gridPC");var _d=new dojo.data.ItemFileWriteStore({data:{"identifier":"ABBVNAME","items":[]}});var _e=[];if(_c&&_c.store&&_c.store._arrayOfTopLevelItems.length>0){_c.store.fetch({query:{ABBVNAME:"*"},onComplete:function(_f){dojo.forEach(_f,function(_10){var _11=_10.ABBVNAME.slice().toString();var _12=_10.NAME.slice().toString();var _13="";if(d.byId("pc_delete_icon")!=null&&d.byId("pc_delete_icon")){_13=d.byId("pc_delete_icon").value;}var _14="<img src="+_13+" onClick =\"javascript:misys.deleteprogramCptyRecord('"+_10.ABBVNAME+"')\"/>";var _15={"ABBVNAME":_11,"NAME":_12,"ACTION":_14};_d.newItem(_15);_e.push(_10);});}});}var _16=_b.selection.getSelected();if(_16.length>0){for(var i=0;i<_16.length;i++){var _17=_16[i];if(_17!==null){var _18=_17.ABBVNAME.slice().toString();var _19=_17.NAME.slice().toString();var _1a="";if(d.byId("pc_delete_icon")!=null&&d.byId("pc_delete_icon")){_1a=d.byId("pc_delete_icon").value;}var _1b="<img src="+_1a+" onClick =\"javascript:misys.deleteprogramCptyRecord('"+_17.ABBVNAME+"')\"/>";var _1c={"ABBVNAME":_18,"NAME":_19,"ACTION":_1b};_d.newItem(_1c);}}}if(_c){_c.setStore(_d);dojo.style(_c.domNode,"display","");_c.render();_c.resize();}},deleteprogramCptyRecord:function(_1d){var _1e=[];dj.byId("gridPC").store.fetch({query:{ABBVNAME:"*"},onComplete:dojo.hitch(dj.byId("gridPC"),function(_1f){dojo.forEach(_1f,function(_20){if(_20.ABBVNAME.slice().toString()===_1d.slice().toString()){dj.byId("gridPC").store.deleteItem(_20);}});})});dj.byId("gridPC").resize();dj.byId("gridPC").render();},populateGridOnLoad:function(){var _21=dj.byId("gridPC");var _22=dj.byId("programCounterpartydata_grid");var _23=_22.selection.getSelected();if(_21&&_23&&_23.length>0){var _24=new dojo.data.ItemFileWriteStore({data:{"identifier":"ABBVNAME","items":[]}});for(var i=0;i<_23.length;i++){var _25=_23[i];var _26=_25.ABBVNAME.slice().toString();var _27=_25.NAME.slice().toString();var _28="";if(d.byId("pc_delete_icon")!=null&&d.byId("pc_delete_icon")){_28=d.byId("pc_delete_icon").value;}var _29="<img src="+_28+" onClick =\"javascript:misys.deleteprogramCptyRecord('"+_25.ABBVNAME+"')\"/>";var _2a={"ABBVNAME":_26,"NAME":_27,"ACTION":_29};_24.newItem(_2a);}dojo.style(_21.domNode,"display","");_21.resize();}else{if(dj.byId("gridPC")){dojo.style(dj.byId("gridPC").domNode,"display","none");}}},onFormLoad:function(){}});m.dialog=m.dialog||{};d.mixin(m.dialog,{});})(dojo,dijit,misys);dojo.require("misys.client.binding.system.prgm_cpty_client");}