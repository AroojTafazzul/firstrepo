/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.system.alert_balance"]){dojo._hasResource["misys.binding.system.alert_balance"]=true;dojo.provide("misys.binding.system.alert_balance");dojo.require("dijit.form.Form");dojo.require("dijit.form.Button");dojo.require("dijit.form.FilteringSelect");dojo.require("dijit.form.TextBox");dojo.require("dijit.form.RadioButton");dojo.require("dijit.form.ValidationTextBox");dojo.require("misys.widget.Dialog");dojo.require("dijit.TooltipDialog");dojo.require("dojo.data.ItemFileWriteStore");dojo.require("misys.binding.cash.request.AccountPopup");dojo.require("misys.form.addons");dojo.require("misys.form.common");dojo.require("misys.validation.common");(function(d,dj,m){function _1(_2){var _3=dj.byId("issuer_abbv_name"+_2+"_1"),_4=dj.byId("issuer_abbv_name"+_2+"_2"),_5=dj.byId("issuer_abbv_name"+_2+"_3"),_6=dj.byId("issuer_abbv_name"+_2+"_4");if(!_3){return true;}if(!_3.get("checked")&&!_4.get("checked")&&!_5.get("checked")&&!_6.get("checked")){m.showTooltip(m.getLocalization("recipientMandatory"),_3.domNode,["before"]);return false;}return true;};d.mixin(m._config,{emailAccountPopupFirstOpening:true,smsAccountPopupFirstOpening:true,onlineAccountPopupFirstOpening:true});d.mixin(m,{bind:function(){m.setValidation("threshold01_cur_code",m.validateCurrency);m.setValidation("address01",m.validateEmailAddr);m.setValidation("threshold03_cur_code",m.validateCurrency);m.connect("dijit_form_Button_1","onClick",function(){dj.byId("threshold_sign01_0").set("checked",true);dj.byId("01entity").set("disabled",true);dj.byId("account_num01").set("disabled",true);});m.connect("dijit_form_Button_2","onClick",function(){dj.byId("threshold_sign03_0").set("checked",true);dj.byId("03entity").set("disabled",true);dj.byId("account_num03").set("disabled",true);});},populateAccountFields:function(_7,_8){switch(_7){case "emailAccount":dj.byId("account_num01").set("value",_8.account_no);dj.byId("threshold01_cur_code").set("value",_8.cur_code);dj.byId("bank_abbv_name01").set("value",_8.bank_abbv_name);break;case "smsAccount":dj.byId("account_num02").set("value",_8.account_no);dj.byId("threshold02_cur_code").set("value",_8.cur_code);dj.byId("bank_abbv_name02").set("value",_8.bank_abbv_name);break;case "onlineAccount":dj.byId("account_num03").set("value",_8.account_no);dj.byId("threshold03_cur_code").set("value",_8.cur_code);dj.byId("bank_abbv_name03").set("value",_8.bank_abbv_name);break;default:break;}},getAddressLabel:function(_9,_a){if(!_a){return "*";}return _a.address;},getThresholdCode:function(_b,_c){if(!_c){return "*";}var _d=_c.threshold_sign=="0"?"<=":">=";return "("+_d+") "+_c.threshold_cur+" "+_c.threshold_amt;},getAccountLabel:function(_e,_f){if(!_f){return "*";}return _f.account_num;}});m._config=m._config||{};d.mixin(m._config,{initReAuthParams:function(){var _10={productCode:"BA",subProductCode:"",transactionTypeCode:"01",entity:"",currency:"",amount:"",es_field1:"",es_field2:""};return _10;}});m.dialog=m.dialog||{};d.mixin(m.dialog,{submitBalanceAlert:function(_11,_12){var _13=dj.byId(_11);if(_13&&_13.validate()&&_1(_12)){_13.execute();_13.hide();}},closeBalanceAlert:function(_14){dj.byId("account_num01")?dj.byId("account_num01").reset():"";dj.byId("account_num03")?dj.byId("account_num03").reset():"";dj.byId("threshold01_cur_code")?dj.byId("threshold01_cur_code").reset():"";dj.byId("threshold01_amt")?dj.byId("threshold01_amt").reset():"";dj.byId("address01")?dj.byId("address01").reset():"";dj.byId("threshold03_cur_code")?dj.byId("threshold01_cur_code").reset():"";dj.byId("threshold03_amt")?dj.byId("threshold01_amt").reset():"";dj.byId(_14).hide();}});d.ready(function(){d.require("misys.admin.widget.AlertsBalance");d.require("misys.admin.widget.AlertBalance");});})(dojo,dijit,misys);dojo.require("misys.client.binding.system.alert_balance_client");}