/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.system.external_account_upload_mc"]){dojo._hasResource["misys.binding.system.external_account_upload_mc"]=true;dojo.provide("misys.binding.system.external_account_upload_mc");dojo.require("dojo.data.ItemFileReadStore");dojo.require("dijit.form.FilteringSelect");dojo.require("misys.validation.login");dojo.require("misys.form.MultiSelect");dojo.require("dijit.form.Form");dojo.require("dijit.form.Button");dojo.require("dijit.form.TextBox");dojo.require("dijit.form.ValidationTextBox");dojo.require("misys.form.common");dojo.require("misys.validation.common");dojo.require("misys.form.CurrencyTextBox");dojo.require("dojox.xml.DomParser");dojo.require("dojox.grid.EnhancedGrid");dojo.require("dojox.grid.enhanced.plugins.IndirectSelection");dojo.require("dojox.grid.enhanced.plugins.Filter");dojo.require("dojox.lang.aspect");(function(d,dj,m){dojo.ready(function(){dojo.mixin(m,{toggleFailedRecordsGrid:function(){var _1=d.byId("actionDown");var _2=d.byId("actionUp");var _3=d.byId("failedRecords");if(d.style("failedRecords","display")==="none"){m.animate("wipeIn",_3);d.style("actionDown","display","none");d.style("actionUp","display","block");d.style("actionUp","cursor","pointer");}else{m.animate("wipeOut",_3);d.style("actionUp","display","none");d.style("actionDown","display","block");d.style("actionDown","cursor","pointer");}}});});function _4(){var _5=dj.byId("attIds");var _6=false;var _7=0;if(_5){var _8=[dj.byId("attachment-file"),dj.byId("attachment-fileOTHER")];d.forEach(_8,function(_9){if(_9&&_9.grid){var _a=_9.grid.store._arrayOfAllItems;d.forEach(_a,function(_b,i){if(_b!==null){_6=true;_7++;}});}});}if(dj.byId("attachment_id")&&dj.byId("attachment_id").get("value")!=""){_6=true;}if(_6==false){m._config.onSubmitErrorMsg=m.getLocalization("mandatoryMinimumFileUploadTypeError");}if(_7>1){m._config.onSubmitErrorMsg=m.getLocalization("mandatoryMaximumFileUploadTypeError");_6=false;}return _6;};d.mixin(m,{onFormLoad:function(){dojox.lang.aspect.advise(m,"uploadFile",{after:function(){if(dj.byId("file_titleOTHER")&&dj.byId("file_titleOTHER").get("value")!==""){var _c=dj.byId("file_titleOTHER").get("value");dj.byId("description").set("value",_c);}}});},beforeSubmitValidations:function(){return _4();},bind:function(){if(dj.byId("return_comment_hidden")&&dj.byId("return_comments")&&dj.byId("return_comment_hidden").get("value")!==""){dj.byId("return_comments").set("value",dj.byId("return_comment_hidden").get("value"));}}});d.mixin(m._config,{initReAuthParams:function(){var _d={productCode:"EU",subProductCode:"*",transactionTypeCode:"01",entity:dj.byId("entity")?dj.byId("entity").get("value"):"",currency:"",amount:"",es_field1:"",es_field2:""};return _d;}});})(dojo,dijit,misys);dojo.require("misys.client.binding.system.external_account_upload_mc_client");}