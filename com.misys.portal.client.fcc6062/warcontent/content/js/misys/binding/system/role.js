/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.system.role"]){dojo._hasResource["misys.binding.system.role"]=true;dojo.provide("misys.binding.system.role");dojo.require("misys.form.common");dojo.require("misys.validation.common");dojo.require("dijit.form.Form");dojo.require("dijit.form.Button");dojo.require("dijit.form.TextBox");dojo.require("dijit.form.ValidationTextBox");dojo.require("dijit.form.CheckBox");dojo.require("dijit.layout.ContentPane");dojo.require("dojo.data.ItemFileReadStore");dojo.require("misys.form.SimpleTextarea");dojo.require("dijit.form.FilteringSelect");dojo.require("misys.form.MultiSelect");dojo.require("dojox.xml.DomParser");(function(d,dj,m){var _1=["bank_auth_level","company_auth_level"],_2="CUSTOMER_PERMISSIONS_MAINTENANCE",_3="static_user",_4="static_company";function _5(_6,_7,_8){var _9=_6.getElementsByTagName(_7)[0],_a=(_9)?_9.childNodes[0]:"",_b=(_a&&_a.nodeValue)?_a.nodeValue:"",_c=_6.getElementsByTagName(_8)[0],_d=(_c)?_c.childNodes[0]:"",_e=(_d&&_d.nodeValue)?_d.nodeValue.split(","):[],_f=["<group_record><group_abbv_name>"];_f.push(_b,"</group_abbv_name>");d.forEach(_e,function(_10){if(_10){_f.push("<existing_roles><role><name>");_f.push(_10);_f.push("</name></role></existing_roles>");}});_f.push("</group_record>");return _f.join("");};m._config=m._config||{};d.mixin(m._config,{xmlTransform:function(xml){var _11=dj.byId("option").get("value")===_2?_3:_4,_12=m._config.xmlTagName,_13=_12?["<",_12,">"]:[],dom=dojox.xml.DomParser.parse(xml),_14=[dj.byId("company_role_list"),dj.byId("bank_role_list"),dj.byId("company_auth_level"),dj.byId("bank_auth_level"),dj.byId("entity_role_list"),dj.byId("entity_auth_level")],_15;_13.push("<",_11,">");_13.push(m.getDomNode(dom,"brch_code"));_13.push(m.getDomNode(dom,"company_id"));_13.push(m.getDomNode(dom,"abbv_name"));_13.push(m.getDomNode(dom,"name"));_13.push(m.getDomNode(dom,"address_line_1"));_13.push(m.getDomNode(dom,"address_line_2"));_13.push(m.getDomNode(dom,"dom"));_13.push(m.getDomNode(dom,"contact_name"));_13.push(m.getDomNode(dom,"company_abbv_name"));_13.push(m.getDomNode(dom,"login_id"));_13.push(m.getDomNode(dom,"user_id"));_13.push(m.getDomNode(dom,"return_comments"));_13.push("</",_11,">");d.forEach(_1,function(_16){for(var i=1;dom.getElementsByTagName(_16+"_"+i).length>0;i++){_15="bank";if(_16.indexOf("bank")===-1){_15="company";}_13.push(_5(dom,_15+"_auth_abbv_name_"+i,_16+"_"+i));}});d.forEach(_14,function(_17){var _18=(_17)?_17.get("name"):"";if(_18&&dom.getElementsByTagName(_18).length>0){_15="bank";if(_18.indexOf("bank")===-1){_15="company";}_13.push(_5(dom,_15+"_group_abbv_name",_18));}});if(_12){_13.push("</",_12,">");}return _13.join("");}});})(dojo,dijit,misys);dojo.require("misys.client.binding.system.role_client");}