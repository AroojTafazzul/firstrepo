/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.openaccount.create_ip_settlement"]){dojo._hasResource["misys.binding.openaccount.create_ip_settlement"]=true;dojo.provide("misys.binding.openaccount.create_ip_settlement");dojo.require("misys.openaccount.FormOpenAccountEvents");dojo.require("misys.binding.openaccount.create_settlement_common");(function(d,dj,m){d.mixin(m._config,{initReAuthParams:function(){var _1={productCode:dj.byId("product_code").get("value"),subProductCode:"",transactionTypeCode:dj.byId("tnx_type_code")?dj.byId("tnx_type_code").get("value"):"01",entity:dj.byId("entity")?dj.byId("entity").get("value"):"",currency:dj.byId("settlement_cur_code")?dj.byId("settlement_cur_code").get("value"):"",amount:dj.byId("settlement_amt")?m.trimAmount(dj.byId("settlement_amt").get("value")):"",bankAbbvName:dj.byId("issuing_bank_abbv_name")?dj.byId("issuing_bank_abbv_name").get("value"):"",es_field1:"",es_field2:""};return _1;}});d.mixin(m,{bind:function(){m.setValidation("settlement_date",m.validateSettlementDateWithInvoiceDates);m.setValidation("settlement_cur_code",m.validateCurrency);m.connect("settlement_amt","onBlur",function(){m.setSettlementPercentage();m.calculateOutstandingSettlementAmt();m.fireFXAction();});m.connect("settlement_cur_code","onBlur",function(){m.setSettlementCurrency(this,["settlement_amt"]);});m.connect("settlement_percentage","onBlur",function(){m.setSettlementAmt();m.calculateOutstandingSettlementAmt();m.fireFXAction();});m.connect("fx_exchange_rate_cur_code","onChange",function(){m.setSettlementCurrency(this,["fx_exchange_rate_amt"]);});m.setValidation("fx_exchange_rate_cur_code",m.validateCurrency);m.setFXConversion();},onFormLoad:function(){m.setCommonSettlementDetails();var _2=dj.byId("bene_access_opened");var _3=dj.byId("access_opened");if(_2&&_3){_3.set("value",_2.get("value"));}var _4=dj.byId("transaction_counterparty_email");var _5=dj.byId("bene_email");if(_5&&_4){_4.set("value",_5.get("value"));}var _6=dj.byId("ben_company_abbv_name");var _7=dj.byId("abbvName");if(_6&&_7){_6.set("value",_7.get("value"));}}});})(dojo,dijit,misys);dojo.require("misys.client.binding.openaccount.create_ip_settlement_client");}