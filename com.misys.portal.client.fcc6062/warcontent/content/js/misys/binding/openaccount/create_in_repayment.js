/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.openaccount.create_in_repayment"]){dojo._hasResource["misys.binding.openaccount.create_in_repayment"]=true;dojo.provide("misys.binding.openaccount.create_in_repayment");dojo.require("misys.openaccount.FormOpenAccountEvents");dojo.require("misys.validation.common");dojo.require("misys.binding.openaccount.create_repayment_common");(function(d,dj,m){d.mixin(m._config,{initReAuthParams:function(){var _1={productCode:dj.byId("product_code").get("value"),subProductCode:"",transactionTypeCode:"01",entity:dj.byId("entity")?dj.byId("entity").get("value"):"",currency:dj.byId("finance_repayment_cur_code")?dj.byId("finance_repayment_cur_code").get("value"):"",amount:dj.byId("finance_repayment_amt")?m.trimAmount(dj.byId("finance_repayment_amt").get("value")):"",bankAbbvName:dj.byId("issuing_bank_abbv_name")?dj.byId("issuing_bank_abbv_name").get("value"):"",es_field1:"",es_field2:""};return _1;}});d.mixin(m,{bind:function(){m.setValidation("finance_repayment_cur_code",m.validateCurrency);m.connect("finance_repayment_action","onChange",function(){m.clearRepaymentAmt();m.setRepaymentDetails();});m.connect("finance_repayment_amt","onChange",function(){m.setRepaymentAmtAndCurCode();m.fireFXAction();});m.connect("finance_repayment_cur_code","onBlur",function(){m.setRepaymentAmtAndCurCode();m.setRepaymentCurrency(this,["finance_repayment_amt"]);});m.connect("finance_repayment_percentage","onChange",function(){m.setRepaymentPercentage();});m.connect("fx_exchange_rate_cur_code","onChange",function(){m.setRepaymentCurrency(this,["fx_exchange_rate_amt"]);});m.setValidation("fx_exchange_rate_cur_code",m.validateCurrency);m.setFXConversion();},onFormLoad:function(){m.setCommonRepaymentDetails();var _2=dj.byId("bene_access_opened");var _3=dj.byId("access_opened");if(_2&&_3){_3.set("value",_2.get("value"));}var _4=dj.byId("transaction_counterparty_email");var _5=dj.byId("bene_email");if(_5&&_4){_4.set("value",_5.get("value"));}var _6=dj.byId("ben_company_abbv_name");var _7=dj.byId("abbvName");if(_6&&_7){_6.set("value",_7.get("value"));}}});})(dojo,dijit,misys);dojo.require("misys.client.binding.openaccount.create_in_repayment_client");}