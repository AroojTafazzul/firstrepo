/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.openaccount.create_repayment_common"]){dojo._hasResource["misys.binding.openaccount.create_repayment_common"]=true;dojo.provide("misys.binding.openaccount.create_repayment_common");(function(d,dj,m){d.mixin(m,{setFXConversion:function(){var _1=dj.byId("product_code").get("value");if(m._config.fxParamData&&m._config.fxParamData[_1]&&m._config.fxParamData[_1].fxParametersData.isFXEnabled==="Y"){m.connect("fx_exchange_rate_cur_code","onChange",function(){var _2=dj.byId("fx_exchange_rate");var _3=dj.byId("fx_exchange_rate_amt");if(_2){_2.set("value","");}if(_3){_3.set("value","");}dj.byId("fx_exchange_rate_amt").set("value","");m.setRepaymentCurrency(this,["fx_exchange_rate_amt"]);if(dj.byId("fx_exchange_rate_cur_code").get("value")!==""){m.fireFXAction();}});}else{if(d.byId("fx-section")){d.style("fx-section","display","none");}}},fireFXAction:function(){var _4=dj.byId("product_code");if(m._config.fxParamData&&_4&&_4.get("value")!==""){var _5=m._config.fxParamData[_4.get("value")];if(m._config.fxParamData&&_5.fxParametersData.isFXEnabled==="Y"){var _6,_7="";var _8;if(dj.byId("fx_exchange_rate_cur_code")){_7=dj.byId("fx_exchange_rate_cur_code").get("value");}if(dj.byId("finance_repayment_amt")){_8=dj.byId("finance_repayment_amt").get("value");}if(dj.byId("outstanding_repayment_cur_code")){_6=dj.byId("outstanding_repayment_cur_code").get("value");}var _9=m._config.productCode;var _a="";if(dj.byId("issuing_bank_abbv_name")&&dj.byId("issuing_bank_abbv_name").get("value")!==""){_a=dj.byId("issuing_bank_abbv_name").get("value");}if(dj.byId("outstanding_repayment_cur_code")){var _b=dj.byId("outstanding_repayment_cur_code").get("value");}_b=_6;if(d.byId("fx-section")&&(d.style(d.byId("fx-section"),"display")==="none")){m.animate("wipeIn",d.byId("fx-section"));}m.fetchFXDetails(_6,_7,_8,_9,_a,_b,false);if(_6&&_6!==""&&_7&&_7!==""&&_6===_7){dj.byId("fx_exchange_rate").set("value","1");dj.byId("fx_exchange_rate_cur_code").set("value",dj.byId("finance_repayment_cur_code").get("value"));dj.byId("fx_exchange_rate_amt").set("value",dj.byId("finance_repayment_amt").get("value"));}if(isNaN(_8)){dj.byId("fx_exchange_rate_amt").set("value","");}}}},setCommonRepaymentDetails:function(){m.setRepaymentDetails();m.setCurrency("finance_cur_code",["finance_amt"]);m.setCurrency("outstanding_repayment_cur_code",["outstanding_repayment_amt"]);m.setRepaymentCurrency("finance_repayment_cur_code",["finance_repayment_amt"]);var _c=dj.byId("fx_exchange_rate_amt");if(_c){_c.set("readonly",true);}var _d=dj.byId("outstanding_repayment_cur_code");var _e=dj.byId("fx_exchange_rate_cur_code");if(m._config.fxParamData&&dj.byId("product_code")&&dj.byId("product_code").get("value")!==""){m.initializeFX(dj.byId("product_code").get("value"));m.onloadFXActions();}m.fireFXAction();}});})(dojo,dijit,misys);}