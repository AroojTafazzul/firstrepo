/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.openaccount.listdef_po_lcfrompo"]){dojo._hasResource["misys.binding.openaccount.listdef_po_lcfrompo"]=true;dojo.provide("misys.binding.openaccount.listdef_po_lcfrompo");dojo.require("dojo.data.ItemFileReadStore");dojo.require("dojo.data.ItemFileWriteStore");dojo.require("dijit.form.FilteringSelect");dojo.require("misys.form.MultiSelect");dojo.require("dijit.layout.TabContainer");dojo.require("misys.form.common");dojo.require("misys.validation.common");dojo.require("misys.form.SimpleTextarea");dojo.require("misys.openaccount.StringUtils");dojo.require("dijit.form.Form");dojo.require("dijit.form.Button");dojo.require("dijit.form.TextBox");dojo.require("dijit.form.ValidationTextBox");dojo.require("dijit.form.CheckBox");dojo.require("dijit.layout.ContentPane");dojo.require("misys.form.CurrencyTextBox");dojo.require("misys.binding.common.reauth_listdef_common");dojo.require("misys.binding.system.reauth");dojo.require("misys.binding.common.reauth_listdef");(function(d,dj,m){function _1(){var _2=false,_3=[];d.query(".dojoxGrid").forEach(function(g){_3.push(dj.byId(g.id));});d.forEach(_3,function(_4){if(_4.selection.getSelected().length>0&&_4.store._items.length>0){_2=true;}});return _2;};d.subscribe("ready",function(){m._config=(m._config)||{};m._config.cellNodeReference;d.query(".dojoxGrid").forEach(function(_5){if(_5.id!=="nonSignedFolders"){m.connect(_5.id,"onRowClick",m._config.storeCellNodeReference);m.connect(_5.id,"onHeaderCellClick",function(_6){if(m._config.cellNodeReference&&m._config.cellNodeReference.cellNode){dj.hideTooltip(m._config.cellNodeReference.cellNode);m._config.cellNodeReference.cellNode=null;}});}});});d.mixin(m._config,{fncInitRecords:function(){var _7=[],_8="",_9={},_a=dj.byId("reauth_perform");m._config.programcode="";m._config.subtnxtypecode="";if(_1()){if(_a&&_a.get("value")==="Y"){if(d.isFunction(m._config.initReAuthParams)){_9=m._config.initReAuthParams();m._config.executeReauthentication(_9);}else{m.setContentInReAuthDialog("ERROR","");dj.byId("reauth_dialog").show();}}else{m._config.nonReauthSubmit();}}else{m.dialog.show("ERROR",m.getLocalization("noTransactionsSelectedError"));}},storeCellNodeReference:function(_b){m._config.cellNodeReference=_b;},initReAuthParams:function(){var _c={productCode:"LC",subProductCode:"",transactionTypeCode:"01",entity:"",currency:"",amount:"",es_field1:"",es_field2:""};return _c;},reauthSubmit:function(){var _d=dj.byId("reauth_password").get("value"),_e="",_f=[];var _10=[];_10.push("&reauth_otp_response=",_d);if(dj.byId("nonSignedFolders")){if(dijit.byId("nonSignedFolders").selection.selectedIndex!==-1){if(dj.byId("referenceid")){_e=dj.byId("referenceid").get("value");}}}var url="/screen/AjaxScreen/action/LCFromPOMultipleSubmission?s=PurchaseOrderScreen&operation=SUBMIT&option=PO_FOLDER_LC&tnxtype=01&referenceid="+_e;if(m._config.subtnxtypecode!==null){url=url+"&sub_tnx_type_code="+m._config.subtnxtypecode;}d.query(".dojoxGrid").forEach(function(g){_f.push(dj.byId(g.id));});m.grid.processRecords(_f,url+_10.join(""));},nonReauthSubmit:function(){var _11=[],_12="";if(dj.byId("nonSignedFolders")){if(dijit.byId("nonSignedFolders").selection.selectedIndex!==-1){if(dj.byId("referenceid")){_12=dj.byId("referenceid").get("value");}}}d.query(".dojoxGrid").forEach(function(g){_11.push(dj.byId(g.id));});var url="/screen/AjaxScreen/action/LCFromPOMultipleSubmission?s=InvoiceScreen&operation=SUBMIT&option=PO_FOLDER_LC&tnxtype=01&referenceid="+_12;if(m._config.subtnxtypecode!==null){url=url+"&sub_tnx_type_code="+m._config.subtnxtypecode;}m.grid.processRecords(_11,url);}});})(dojo,dijit,misys);dojo.require("misys.client.binding.openaccount.listdef_po_lcfrompo_client");}