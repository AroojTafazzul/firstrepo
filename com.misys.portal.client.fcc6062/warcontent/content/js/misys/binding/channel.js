/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.channel"]){dojo._hasResource["misys.binding.channel"]=true;dojo.provide("misys.binding.channel");dojo.require("misys.form.addons");dojo.require("misys.form.common");dojo.require("misys.validation.common");dojo.require("misys.form.file");dojo.require("dijit.form.Form");dojo.require("dijit.form.Button");dojo.require("dijit.form.TextBox");dojo.require("misys.widget.Dialog");dojo.require("dijit.ProgressBar");dojo.require("dijit.form.ValidationTextBox");dojo.require("dijit.form.CheckBox");dojo.require("dijit.layout.ContentPane");dojo.require("misys.editor.plugins.ProductFieldChoice");dojo.require("dojo.data.ItemFileReadStore");dojo.require("dijit.layout.TabContainer");dojo.require("dijit.form.DateTextBox");dojo.require("misys.form.CurrencyTextBox");dojo.require("dijit.form.FilteringSelect");dojo.require("misys.form.SimpleTextarea");dojo.require("dijit.Editor");dojo.require("dijit._editor.plugins.FontChoice");dojo.require("dojox.editor.plugins.ToolbarLineBreak");dojo.require("misys.widget.Collaboration");dojo.require("dojo.io.iframe");(function(d,dj,m){function _1(_2){dj.byId("addTopicButton").set("disabled",false);var _3=null;if(dj.byId(_2)){var _4=dj.byId(_2).get("value");_4=_4.toLowerCase();if((_4.indexOf("<")!=-1)||(_4.indexOf(">")!=-1)||(_4.indexOf("(")!=-1)||(_4.indexOf(")")!=-1)||(_4.indexOf("javascript")!=-1)||(_4.indexOf("vbscript")!=-1)||(_4.indexOf("script")!=-1)||(_4.indexOf(";")!=-1)){_3=m.getLocalization("invalidContent");dj.byId(_2).set("state","Error");dj.hideTooltip(dj.byId(_2).domNode);dj.showTooltip(_3,dj.byId(_2).domNode,0);dj.byId("addTopicButton").set("disabled",true);var _5=function(){dj.hideTooltip(dj.byId(_2).domNode);};setTimeout(_5,1500);return false;}}dj.byId("link_offsetcode_nosend").focus();return true;};function _6(_7){dj.byId("addTopicButton").set("disabled",false);var _8=null;var _9="^(http[s]?://){1}([a-zA-Z0-9]+[.]{1})[a-zA-Z0-9]+";var re=new RegExp(_9);if(dj.byId(_7)){var _a=dj.byId(_7).get("value");_a=_a.toLowerCase();if((_a.indexOf("<")!=-1)||(_a.indexOf(">")!=-1)||(_a.indexOf("(")!=-1)||(_a.indexOf(")")!=-1)||(_a.indexOf("javascript")!=-1)||(_a.indexOf("vbscript")!=-1)||(_a.indexOf("script")!=-1)||(_a.indexOf(";")!=-1)){_8=m.getLocalization("invalidContent");dj.byId(_7).set("state","Error");dj.hideTooltip(dj.byId(_7).domNode);dj.showTooltip(_8,dj.byId(_7).domNode,0);dj.byId("addTopicButton").set("disabled",true);var _b=function(){dj.hideTooltip(dj.byId(_7).domNode);};setTimeout(_b,1500);return false;}if((_a!="")&&(!re.test(_a))){_8=m.getLocalization("invalidContentHttps");dj.byId(_7).set("state","Error");dj.hideTooltip(dj.byId(_7).domNode);dj.showTooltip(_8,dj.byId(_7).domNode,0);dj.byId("addTopicButton").set("disabled",true);var _c=function(){dj.hideTooltip(dj.byId(_7).domNode);};setTimeout(_c,1500);return false;}}};d.mixin(m,{bind:function(){m.connect("title_offsetcode_nosend","onBlur",function(){_1("title_offsetcode_nosend");});m.connect("link_offsetcode_nosend","onBlur",function(){_6("link_offsetcode_nosend");});m.connect("channel_name","onBlur",function(){_1("channel_name");});},beforeSubmitValidations:function(){return _1("channel_name");}});})(dojo,dijit,misys);}