/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.loan.facility_ongoing_fee_details"]){dojo._hasResource["misys.binding.loan.facility_ongoing_fee_details"]=true;dojo.provide("misys.binding.loan.facility_ongoing_fee_details");dojo.require("dojo.parser");dojo.require("dijit.layout.TabContainer");dojo.require("dijit.form.DateTextBox");dojo.require("misys.form.CurrencyTextBox");dojo.require("dijit.form.NumberTextBox");dojo.require("dijit.form.FilteringSelect");dojo.require("dijit.form.Form");dojo.require("dijit.form.Button");dojo.require("dijit.form.TextBox");dojo.require("misys.widget.Dialog");dojo.require("dijit.ProgressBar");dojo.require("dijit.form.ValidationTextBox");dojo.require("dijit.form.CheckBox");dojo.require("dojo.data.ItemFileReadStore");dojo.require("misys.form.file");dojo.require("misys.form.SimpleTextarea");dojo.require("misys.form.common");dojo.require("misys.validation.common");dojo.require("misys.widget.Collaboration");dojo.require("misys.binding.SessionTimer");dojo.require("dojox.xml.DomParser");dojo.require("dijit.layout.ContentPane");dojo.require("misys.common");dojo.require("misys.grid._base");(function(d,dj,m){function _1(){var _2=this;m._config=m._config||{};m._config.dueDateFromValidationInprocess=false;if(_2.get("value")===null){return true;}var _3=dj.byId("effectiveDate");if(!m._config.dueDateToValidationInprocess){if(!m.compareDateFields(_3,_2)){m._config.dueDateFromValidationInprocess=true;var _4=dj.byId("due_date"),_5=misys.getLocalization("dueDateFromGreaterThanEffectiveDate",[m.getLocalizeDisplayDate(this),m.getLocalizeDisplayDate(_3)]);_4.focus();_4.set("state","Error");dj.hideTooltip(_4.domNode);dj.showTooltip(_5,_4.domNode,0);return false;}}m._config.dueDateFromValidationInprocess=false;return true;};function _6(){var _7=dj.byId("due_date2");m._config=m._config||{};m._config.dueDateToValidationInprocess=false;if(_7.get("value")===null){return true;}var _8=dj.byId("dueDate");if(!m._config.dueDateFromValidationInprocess){if(!m.compareDateFields(_7,_8)){m._config.dueDateToValidationInprocess=true;var _9=dj.byId("due_date2"),_a=misys.getLocalization("dueDateToGreaterThanDueDate",[m.getLocalizeDisplayDate(_8)]);_9.focus();_9.set("state","Error");dj.hideTooltip(_9.domNode);dj.showTooltip(_a,_9.domNode,0);return false;}}m._config.dueDateToValidationInprocess=false;return true;};function _b(){var _c=dj.byId("due_date");var _d=dj.byId("due_date2");if(!m.compareDateFields(_c,this)){this.invalidMessage=m.getLocalization("DueDateFromToDateCheckError");this.set("state","Error");dj.hideTooltip(this.domNode);dj.showTooltip(this.invalidMessage,this.domNode,100);return false;}else{_6();}return true;};function _e(){var _f=dj.byId("due_date");var _10=dj.byId("due_date2");if(!m.compareDateFields(_f,_10)){this.invalidMessage=m.getLocalization("DueDateCheckErrorForFromToDate");this.set("state","Error");dj.hideTooltip(this.domNode);dj.showTooltip(this.invalidMessage,this.domNode,100);return false;}return true;};d.mixin(m,{bind:function(){m.connect("due_date","onBlur",_1);m.connect("due_date2","onBlur",_b);m.connect("due_date","onBlur",_e);},onFormLoad:function(){m.animate("fadeOut","fee_RID_row");},goToFacFeeInquiry:function(){var _11=decodeURIComponent(dj.byId("facilityId").get("value"));var _12=decodeURIComponent(dj.byId("borrowerId").get("value"));misys.popup.showPopup("facilityid="+_11+"&borrowerId="+_12,"FEE_DETAILS");}});})(dojo,dijit,misys);}