/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.loan.loan_activity_inquiry"]){dojo._hasResource["misys.binding.loan.loan_activity_inquiry"]=true;dojo.provide("misys.binding.loan.loan_activity_inquiry");dojo.require("dojo.parser");dojo.require("dijit.layout.TabContainer");dojo.require("dijit.form.DateTextBox");dojo.require("misys.form.CurrencyTextBox");dojo.require("dijit.form.NumberTextBox");dojo.require("dijit.form.FilteringSelect");dojo.require("dijit.form.Form");dojo.require("dijit.form.Button");dojo.require("dijit.form.TextBox");dojo.require("misys.widget.Dialog");dojo.require("dijit.ProgressBar");dojo.require("dijit.form.ValidationTextBox");dojo.require("dijit.form.CheckBox");dojo.require("dojo.data.ItemFileReadStore");dojo.require("misys.form.file");dojo.require("misys.form.SimpleTextarea");dojo.require("misys.form.common");dojo.require("misys.validation.common");dojo.require("misys.widget.Collaboration");dojo.require("misys.binding.SessionTimer");dojo.require("dojox.xml.DomParser");(function(d,dj,m){function _1(){var _2=dj.byId("TransactionSearchForm1"),_3=dj.byId("actualActivitiesHistoryGrid"),_4=/Date/,_5=/Time/,_6={},_7,_8;if(_3&&_2){if(d.byId("divResults")){d.style("divResults","margin",0);}_7=_3.get("store");m.connect(_3,"_onFetchComplete",function(){setTimeout(function(){_3.resize();},500);});_8=_7.url;if(_8.indexOf("&")!==-1){_8=_8.substring(0,_8.indexOf("&"));}if(_8.indexOf("EventsSearchAction")!==-1){if(_8.indexOf("?")!==-1){_8=_8.substring(0,_8.indexOf("?"));}}_2.getDescendants().forEach(function(_9,i){if(_9.name){var _a=_9.get("value");if(_4.test(_9.declaredClass)||(_5.test(_9.declaredClass))){_a=_9.get("displayedValue");}if(_a===" "){_a="";}_6[_9.get("name")]=_a;}});var _b=_3.onSelectionClearedScript;if(_b){d.eval(_b);}if(_3.selection&&_3.get("selectionMode")!=""){_3.selection.clear();}_7.close();_7.url=_8;_3.setStore(_7,null,_6);}};function _c(){var _d=this;if(_d.get("value")===null){return true;}var _e=dj.byId("effective_date_TO");if(!m.compareDateFields(_d,_e)){var _f=dj.byId("effective_date_FROM");displayMessage=misys.getLocalization("EffectiveDateFromLesserThanEffectiveDateTo");_f.set("state","Error");dj.hideTooltip(_f.domNode);dj.showTooltip(displayMessage,_f.domNode,0);misys._config.validSearchCheck=false;return false;}misys._config.validSearchCheck=true;return true;};function _10(){var _11=this;if(_11.get("value")===null){return true;}var _12=dj.byId("effective_date_FROM");var _13=new Date();if((!m.compareDateFields(_12,_11))||(_11.get("value")>_13)){var _14=dj.byId("effective_date_TO");displayMessage=misys.getLocalization("EffDateToLessThanCurrentAndGtrThanEffDateFrom");_14.set("state","Error");dj.hideTooltip(_14.domNode);dj.showTooltip(displayMessage,_14.domNode,0);misys._config.validSearchCheck=false;return false;}misys._config.validSearchCheck=true;return true;};dojo.subscribe("ready",function(){misys._config.validSearchCheck=true;m.connect("effective_date_FROM","onBlur",_c);m.connect("effective_date_TO","onBlur",_10);if(d.byId("TransactionSearchForm1")){m.connect("TransactionSearchForm1","onSubmit",function(e){e.preventDefault();if(misys._config.validSearchCheck){_1();}return false;});}});})(dojo,dijit,misys);dojo.require("misys.client.binding.loan.loan_activity_inquiry_client");}