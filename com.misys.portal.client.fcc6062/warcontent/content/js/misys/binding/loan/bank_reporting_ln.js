/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.loan.bank_reporting_ln"]){dojo._hasResource["misys.binding.loan.bank_reporting_ln"]=true;dojo.provide("misys.binding.loan.bank_reporting_ln");dojo.require("misys.widget.Dialog");dojo.require("dijit.form.Button");dojo.require("misys.form.CurrencyTextBox");dojo.require("dijit.form.DateTextBox");dojo.require("dijit.form.FilteringSelect");dojo.require("dijit.form.Form");dojo.require("dijit.form.TextBox");dojo.require("misys.form.common");dojo.require("misys.form.SimpleTextarea");dojo.require("misys.widget.Collaboration");(function(d,dj,m){function _1(){var _2=true;var _3;m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/ValidateDrawdownLoanLimitAmount"),handleAs:"json",preventCache:true,sync:true,content:{xml:m.formToXML()},load:function(_4,_5){_2=_4.isValid;_3=_4.errorMsg;},error:function(_6,_7){_2=false;console.error("Process drawdown error due to limit violation",_6);}});if(!_2){m._config.onSubmitErrorMsg=_3;return false;}else{return true;}};function _8(){var _9=true;var _a;m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/ValidateRepricingLoanLimitAmount"),handleAs:"json",preventCache:true,sync:true,content:{xml:misys.formToXML()},load:function(_b,_c){_9=_b.isValid;_a=_b.errorMsg;},error:function(_d,_e){_9=false;console.error("Process repricing error due to limit violation",_d);}});if(!_9){m._config.onSubmitErrorMsg=_a;return false;}else{return true;}};d.mixin(m,{bind:function(){},toggleLoanInterestDetails:function(){var _f=d.byId("actionDown");var _10=d.byId("actionUp");var _11=d.byId("loanInterestDetailsContainer");if(d.style("loanInterestDetailsContainer","display")==="none"){m.animate("wipeIn",_11);dj.byId("gridLoanInterestDetails").resize();d.style("actionDown","display","none");d.style("actionUp","display","block");d.style("actionUp","cursor","pointer");}else{m.animate("wipeOut",_11);d.style("actionUp","display","none");d.style("actionDown","display","block");d.style("actionDown","cursor","pointer");}},toggleLegalTextDetails:function(){var _12=d.byId("actionDown");var _13=d.byId("actionUp");var _14=d.byId("LegalTextContainer");if(d.style("LegalTextContainer","display")==="none"){m.animate("wipeIn",_14);d.style("actionDown","display","none");d.style("actionUp","display","block");d.style("actionUp","cursor","pointer");}else{m.animate("wipeOut",_14);d.style("actionUp","display","none");d.style("actionDown","display","block");d.style("actionDown","cursor","pointer");}},onFormLoad:function(){},beforeSubmitValidations:function(){if(dj.byId("product_code").get("value")==="LN"&&dj.byId("prod_stat_code").get("value")==="02"){if(!_1()){return false;}}else{if(dj.byId("product_code").get("value")==="BK"&&dj.byId("prod_stat_code").get("value")==="02"){if(!_8()){return false;}}}return true;}});})(dojo,dijit,misys);dojo.require("misys.client.binding.loan.bank_reporting_ln_client");}