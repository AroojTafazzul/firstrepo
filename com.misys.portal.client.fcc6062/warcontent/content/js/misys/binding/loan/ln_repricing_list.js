/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.loan.ln_repricing_list"]){dojo._hasResource["misys.binding.loan.ln_repricing_list"]=true;dojo.provide("misys.binding.loan.ln_repricing_list");dojo.require("dojo.data.ItemFileReadStore");dojo.require("dojo.data.ItemFileWriteStore");dojo.require("dijit.form.FilteringSelect");dojo.require("misys.form.MultiSelect");dojo.require("dijit.layout.TabContainer");dojo.require("misys.form.common");dojo.require("misys.validation.common");dojo.require("dijit.form.Form");dojo.require("dijit.form.Button");dojo.require("dijit.form.TextBox");dojo.require("dijit.form.ValidationTextBox");dojo.require("dijit.form.CheckBox");dojo.require("dijit.layout.ContentPane");dojo.require("misys.form.CurrencyTextBox");dojo.require("dijit.form.RadioButton");dojo.require("misys.grid._base");(function(d,dj,m){var _1="[INFO] No deals for the borrower found.";function _2(){var _3=this;m._config=m._config||{};m._config.repricingFromDateValidationInprocess=false;if(_3.get("value")===null){return true;}var _4=dj.byId("repricing_date2");if(!m._config.repricingToDateValidationInprocess){if(!m.compareDateFields(_3,_4)){m._config.repricingFromDateValidationInprocess=true;var _5=dj.byId("repricing_date"),_6=misys.getLocalization("repricingFromGreaterThanRepricingTo");_5.focus();_5.set("state","Error");dj.hideTooltip(_5.domNode);dj.showTooltip(_6,_5.domNode,0);return false;}}m._config.repricingFromDateValidationInprocess=false;return true;};function _7(){var _8=this;m._config=m._config||{};m._config.repricingToDateValidationInprocess=false;if(_8.get("value")===null){return true;}var _9=dj.byId("repricing_date");if(!m._config.repricingFromDateValidationInprocess){if(!m.compareDateFields(_9,_8)){m._config.repricingToDateValidationInprocess=true;var _a=dj.byId("repricing_date2"),_b=misys.getLocalization("repricingToLesserThanRepricingFrom");_a.focus();_a.set("state","Error");dj.hideTooltip(_a.domNode);dj.showTooltip(_b,_a.domNode,0);return false;}}m._config.repricingToDateValidationInprocess=false;return true;};function _c(){if(dj.byId("intend_notice_validation_flag")){if(dj.byId("intend_notice_validation_flag").get("value")!=="Y"){if(!this.get("value")){return true;}m._config=m._config||{};m._config.repricingDatesValidationInprocess=false;var _d=new Date();var _e=dj.byId("repricing_date2");if(!m._config.repricingDatesValidationInprocess){var _f=d.date.compare(_d,m.localizeDate(this),"date")>0?false:true;if(!_f){m._config.repricingDatesValidationInprocess=true;var _10=d.date.locale.format(new Date(),{selector:"date"});this.invalidMessage=m.getLocalization("repricingPastDateCheckError",[_10]);return false;}else{if(!m.compareDateFields(this,_e)){m._config.repricingDatesValidationInprocess=true;this.invalidMessage=m.getLocalization("repricingFromToDateCompareCheckError");return false;}}}m._config.repricingDatesValidationInprocess=false;return true;}}};function _11(){if(dj.byId("intend_notice_validation_flag")){if(dj.byId("intend_notice_validation_flag").get("value")==="Y"){if(!this.get("value")){return true;}m._config=m._config||{};m._config.repricingDatesValidationInprocess=false;var _12=new Date();var _13=dj.byId("repricing_to_date_field");var _14=dj.byId("facility_pricing_option");var _15=dj.byId("deal_currency");if(!m._config.repricingDatesValidationInprocess){if(!m.compareDateFields(_13,this)){m._config.repricingDatesValidationInprocess=true;this.invalidMessage=m.getLocalization("intendNoticeDaysErrorMsg",[_14.get("value"),_15.get("value"),_16(_13)]);return false;}}m._config.repricingDatesValidationInprocess=false;return true;}}};function _17(){var _18=dj.byId("repricing_date");var rep=m.compareDateFields(_18,this);if(!m.compareDateFields(_18,this)){this.invalidMessage=m.getLocalization("repricingFromToDateCheckError");return false;}return true;};function _19(){var _1a=new Date();var _1b=dj.byId("repricing_date");var _1c=_1a.getMonth();var _1d=_1a.getFullYear();var day=_1a.getDate();var _1e=new Date(_1d,_1c+1,day-1);var _1f=dj.byId("repricing_date2");_1f.set("value",_1e);_1b.set("value",_1a);};function _20(){var _21=dj.byId("repricing_date");var _22=dj.byId("repricing_date2");_21.set("disabled",true);_22.set("disabled",true);};function _16(_23){if(_23.get("type")==="hidden"){return d.date.locale.format(m.localizeDate(_23),{selector:"date"});}return _23.get("displayedValue");};function _24(){var _25=dj.byId("borrowerid").get("value");var _26=dj.byId("bo_deal_id").get("value");var _27=dijit.byId("bo_facility_id");if(_27&&_27.get("value")!=""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetPricingOptionsIntendNoticeDays"),handleAs:"json",sync:true,content:{borrowerid:_25,dealId:_26},load:function(_28){misys._config.pricingOption=_28;},error:function(_29){}});}};function _2a(){var _2b=dj.byId("bo_facility_id").get("value");var _2c=dj.byId("deal_currency").get("value");var _2d=dj.byId("bo_deal_id").get("value");var _2e="N";var _2f=dijit.byId("facility_pricing_option").get("value");var _30=dj.byId("repricing_date");var _31=dj.byId("repricing_date2");var _32=dj.byId("repricing_to_date_field");var _33=dj.byId("operation").get("value");if(_2c!=""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetBusinessDayValidatedDate"),handleAs:"json",preventCache:true,sync:true,content:{dealId:_2d,boFacilityId:_2b,pricingOptionName:_2f,dateToValidate:_30.get("displayedValue"),currency:_2c,isRepricingDate:_2e,operation:_33},load:function(_34){misys._config.dateValuesResponse=_34;var _35=misys._config.dateValuesResponse["items"];_30.store=new dojo.data.ItemFileReadStore({data:{identifier:"id",label:"name",items:_35["dateValues"]}});var _36=0;var _37=function(_38,_39){_36=_38;};_30.get("store").fetch({query:{},onBegin:_37,start:0,count:0});if(_36!==0){var _3a=_30.store._arrayOfTopLevelItems[0].name[0];if(_3a!=""){var _3b=_3a.split("/");var _3c=new Date(parseInt(_3b[2],10),parseInt(_3b[1],10)-1,parseInt(_3b[0],10));var _3d=_3c.getMonth();var _3e=_3c.getFullYear();var day=_3c.getDate();var _3f=new Date(_3e,_3d+1,day);if(!_32.get("value")){_32.set("value",_3c);}if(_30.get("value")&&!m.compareDateFields(_32,_30)){this.invalidMessage=m.getLocalization("intendNoticeDaysErrorMsg",[_2f,_2c,_16(_32)]);}else{if(_30.get("value")&&(_3c>_30.get("value")||_3c<_30.get("value"))){var _40=m.getLocalization("repricingDateBusinessDayValidationErrorMsg",[_30.get("displayedValue")]);m.dialog.show("CUSTOM-NO-CANCEL",_40,"Info");_30.set("value",_3c);}else{_30.set("value",_3c);_31.set("value",_3f);_30.set("disabled",false);_31.set("disabled",false);}}}else{_30.set("disabled",true);_31.set("disabled",true);}}},error:function(_41){}});}};d.mixin(m,{bind:function(){},processRepricingOfRecords:function(_42){var _43=d.byId("batchContainer"),_44=_42.selection.getSelected(),_45="",_46=0,_47,xhr,_48=true;var _49=false;var _4a=[];var _4b=[];var _4c=false;var _4d;m.animate("wipeOut",_43);var _4e=dj.byId("repriceOption").get("value");var _4f=dj.byId("borrowerid")?dj.byId("borrowerid").get("value"):"";var _50=dj.byId("bo_deal_id")?dj.byId("bo_deal_id").get("value"):"";var _51=dj.byId("bo_facility_id")?dj.byId("bo_facility_id").get("value"):"";var _52=dj.byId("deal_currency")?dj.byId("deal_currency").get("value"):"";var _53=misys._config.pricingOption["items"];var _54=JSON.stringify(_53["facilityStore"]);if(_44.length===0){m.dialog.show("ERROR",m.getLocalization("selectLoanForRepricingError"));}if(_44.length){d.forEach(_44,function(_55){_47=_42.store.getValues(_55,"box_ref");var _56=_42.store.getValues(_55,"ln_access_type");var _57=_42.store.getValues(_55,"bo_facility_name");var _58=_42.store.getValues(_55,"repricing_date");if(_56[0]!=="A"){if(!(_4a.indexOf(_57[0])>-1)){_4a.push(_57[0]);}}if(_58!==""){_4b.push(_58[0]);}if("S"+_45!="S"){_45=_45+",";}_45=_45+_47;_46++;});for(var j=1;j<_4b.length;j++){if(_4b[j-1]!==_4b[j]){m.dialog.show("ERROR",m.getLocalization("repringingdatesnotsame"));return;}}if(_4a.length>0){var _59="";for(var i=0;i<_4a.length;i++){_59=_59+_4a[i]+",";}var _5a=misys.getLocalization("repricingListfacilityBlockError",[_59.substring(0,_59.length-1)]);m.dialog.show("ERROR",_5a);return;}m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/ValidateRepricingCurrency"),handleAs:"json",preventCache:true,sync:true,content:{borrowerid:_4f,facilityid:_51,currency:_52},load:function(_5b,_5c){_48=_5b.isValid;},error:function(_5d,_5e){_48=false;m.dialog.show("ERROR",m.getLocalization("technicalError"));console.error(" processRepricingOfRecord error",_5d);}});if(!_48){m.dialog.show("ERROR",m.getLocalization("currencyValidationError"));return;}if(_46>0){if(_46>1&&_4e.localeCompare("simple")===0){m.dialog.show("ERROR",m.getLocalization("repricingSimpleRollOverTransactionsError"));}else{m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/ValidateRepricingBatchCriteria"),handleAs:"json",preventCache:true,sync:true,content:{list_keys:_45,borrowerid:_4f,deal_id:_50,facilitydata:_54},load:function(_5f,_60){_48=_5f.isValid;_49=_5f.hasAutoRollOverLoans;_4c=_5f.isFacilityMatured;_4d=_5f.errorMsg;},error:function(_61,_62){console.error(" processRepricingOfRecords error",_61);}});if(!_48){m.dialog.show("ERROR",m.getLocalization("repricingBatchTransactionsError"));}else{if(_4c){m.dialog.show("ERROR",_4d);}else{if(_49){_63(_45);}else{_64(_45);}}}}}}}});function _64(_65){if(dj.byId("repriceOption").get("value")==="new"){var _66=misys._config.pricingOption["items"];var _67=[{name:"list_keys",value:_65},{name:"borrowerid",value:dj.byId("borrowerid").get("value")},{name:"operation",value:"NEW_REPRICING"},{name:"mode",value:dj.byId("repriceOption").get("value")},{name:"tnxtype",value:"01"},{name:"facilityStore",value:JSON.stringify(_66["facilityStore"])}];var _68={action:m.getServletURL("/screen/LoanScreen"),params:_67};m.post(_68);}else{m.dialog.show("ERROR",m.getLocalization("repriceOptionsWarning",[dj.byId("repriceOption").get("displayedValue")]));}};d.mixin(m,{bind:function(){},_cancelSubmit:function(){var _69=["/screen/LoanScreen?tnxtype=01","&operation=LIST_REPRICING"];window.location.href=misys.getServletURL(_69.join(""));}});function _6a(_6b){var _6c=dj.byId(_6b)?dj.byId(_6b).get("value"):"";m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetBorrowerDealsAndFacilitiesForRepricing"),handleAs:"json",sync:true,content:{borrowerid:_6c},load:function(_6d){misys._config.facilityListResponse=_6d;_71();},error:function(_6e){var _6f=m.getLocalization("requiredToolTip");var _70=function(){dj.hideTooltip(dj.byId("bo_deal_id").domNode);};dj.showTooltip(_6f,dj.byId("bo_deal_id").domNode,0);setTimeout(_70,5000);}});};function _71(){var _72=dj.byId("borrowerid")?dj.byId("borrowerid").get("value"):"";if(_72!==" "){var _73=dijit.byId("bo_deal_id");_73.set("value","");_73.set("state","");var _74=misys._config.facilityListResponse["items"];if(_74){_73.store=new dojo.data.ItemFileReadStore({data:{identifier:"id",label:"name",items:_74["dealNames"]}});}var _75=0;var _76=function(_77,_78){_75=_77;};_73.get("store").fetch({query:{},onBegin:_76,start:0,count:0});if(_75===0){dojo.query(".dojoxGridContent").forEach(function(_79,_7a,_7b){dojo.empty(_79);});dojo.query(".dojoxGridContent").style({height:"0px",width:"0px"});var _7c=m.getLocalization("noActiveLoans",[_72]);m.dialog.show("CUSTOM-NO-CANCEL",_7c,"Info");}else{_73.set("disabled",false);}if((_75===1&&_73.store&&_73.store._arrayOfTopLevelItems.length)||(m.getLocalization("loanBorrowerReferenceDefault")==="true"&&_75!==0)){_73.set("value",_73.store._arrayOfTopLevelItems[0].name[0]);_73.set("displayedValue",_73.store._arrayOfTopLevelItems[0].name[0]);}}};function _7d(){var _7e=dijit.byId("bo_deal_id").get("value");var _7f=dj.byId("deal_currency");if(_7f.get("value").length>1){_7f.set("value","");}var _80=misys._config.facilityListResponse["items"];var _81=_80["currency"];var _82;if(_80&&_7e!==""){_82=new dojo.data.ItemFileReadStore({data:{identifier:"id",label:"name",items:_81[_7e]}});}_7f.set("store",_82);};function _83(){var _84=dj.byId("bo_deal_id").get("value");var _85=dj.byId("bo_facility_id");if(_85.get("value").length>1){dj.byId("bo_facility_id").set("value","");dj.byId("bo_facility_id").set("displayedValue","");_85.set("required",false);}var _86=misys._config.facilityListResponse["items"];var _87=_86["facilities"];var _88;if(_86&&_84!==""){_88=new dojo.data.ItemFileReadStore({data:{identifier:"id",label:"name",items:_87[_84]}});}var _89=0;_85.set("store",_88);var _8a=dj.byId("repricing_date");var _8b=dj.byId("repricing_date2");_8a.set("value","");_8a.set("displayedValue","");_8a.set("disabled",true);_8b.set("value","");_8b.set("displayedValue","");_8b.set("disabled",true);};function _8c(){var _8d=dj.byId("facility_pricing_option");_8d.set("required",false);};function _8e(){var _8f=dj.byId("bo_facility_id");_8f.set("required",false);var _90=_8f.get("value");var _91=dj.byId("bo_deal_id").get("value");var _92=dj.byId("facility_pricing_option");if(_92.get("value").length>1){_92.set("value","");_92.set("required",false);}var _93=misys._config.facilityListResponse["items"];var _94=_93["facilityPricingOptions"];var _95;if(_93&&_90!==""){_95=new dojo.data.ItemFileReadStore({data:{identifier:"id",label:"name",items:_94[_91][_90]}});}_92.set("store",_95);if(_90<=1){_96();}var _97=dj.byId("repricing_date");var _98=dj.byId("repricing_date2");_97.set("value","");_97.set("displayedValue","");_97.set("disabled",true);_98.set("value","");_98.set("displayedValue","");_98.set("disabled",true);};function _99(){var _9a=dj.byId("bo_facility_id").get("value");var _9b=dj.byId("bo_deal_id").get("value");var _9c=dj.byId("deal_currency");if(_9c.get("value").length>1){_9c.set("value","");}var _9d=misys._config.facilityListResponse["items"];var _9e=_9d["facilityCurrency"];var _9f;if(_9d&&_9a!==""){_9f=new dojo.data.ItemFileReadStore({data:{identifier:"id",label:"name",items:_9e[_9b][_9a]}});}_9c.set("store",_9f);if(_9a<=1){_7d();}};function _a0(){var _a1=dj.byId("facility_pricing_option").get("value");var _a2=(dj.byId("bo_facility_id")&&dj.byId("bo_facility_id").get("value"))?dj.byId("bo_facility_id").get("value").trim():"";var _a3=dj.byId("bo_deal_id").get("value");var _a4=dj.byId("deal_currency");if(_a3&&_a1){if(_a4.get("value").length>1){_a4.set("value","");}var _a5=misys._config.facilityListResponse["items"];var _a6;if(_a2===""){var _a7=_a5["dealPricingOptionCurrencies"];if(_a7&&_a1!==""){_a6=new dojo.data.ItemFileReadStore({data:{identifier:"id",label:"name",items:_a7[_a3][_a1]}});}}else{var _a8=_a5["facilityPricingOptionCurrencies"];if(_a8&&_a1!==""){_a6=new dojo.data.ItemFileReadStore({data:{identifier:"id",label:"name",items:_a8[_a3][_a2][_a1]}});}}_a4.set("store",_a6);dijit.byId("deal_currency").set("disabled",false);}else{_a4.set("value","");_a4.set("disabled",true);}};function _96(){var _a9=dj.byId("bo_deal_id").get("value");var _aa=dj.byId("facility_pricing_option");if(_aa.get("value").length>1){_aa.set("value","");_aa.set("required",false);}var _ab=misys._config.facilityListResponse["items"];var _ac=_ab["pricingOptions"];var _ad;if(_ab&&_a9!==""){_ad=new dojo.data.ItemFileReadStore({data:{identifier:"id",label:"name",items:_ac[_a9]}});}_aa.set("store",_ad);};function _ae(_af){m._config=m._config||{};m._config.currencyValidationinProcess=false;var _b0=dj.byId(_af);var _b1=_b0?_b0.get("value"):"";if(_b1.length===0||!_b1.trim()){m._config.currencyValidationinProcess=true;var _b2=misys.getLocalization("dealFielIsRequired");_b0.set("state","Error");dj.hideTooltip(_b0.domNode);dj.showTooltip(_b2,_b0.domNode,100);return false;}m._config.currencyValidationinProcess=false;return true;};function _b3(_b4){if(dj.byId("intend_notice_validation_flag")){if(dj.byId("intend_notice_validation_flag").get("value")==="Y"){m._config=m._config||{};m._config.pricingOptionValidationinProcess=false;var _b5=dj.byId(_b4);var _b6=_b5?_b5.get("value"):"";if(_b6.length===0||!_b6.trim()){m._config.pricingOptionValidationinProcess=true;var _b7=misys.getLocalization("dealFielIsRequired");_b5.set("state","Error");dj.hideTooltip(_b5.domNode);dj.showTooltip(_b7,_b5.domNode,100);return false;}m._config.pricingOptionValidationinProcess=false;return true;}else{return true;}}else{return true;}};function _b8(_b9){m._config=m._config||{};m._config.facilityOptionValidationinProcess=false;var _ba=dj.byId(_b9);var _bb=_ba?_ba.get("value"):"";if(_bb.length===0||!_bb.trim()){m._config.facilityOptionValidationinProcess=true;var _bc=misys.getLocalization("facilityFieldIsRequired");_ba.set("state","Error");dj.hideTooltip(_ba.domNode);dj.showTooltip(_bc,_ba.domNode,100);return false;}m._config.facilityOptionValidationinProcess=false;return true;};function _bd(_be){if(dj.byId("intend_notice_validation_flag")){if(dj.byId("intend_notice_validation_flag").get("value")==="Y"){m._config=m._config||{};m._config.reprcingDateValidationinProcess=false;var _bf=dj.byId(_be);var _c0=_bf?_bf.get("value"):"";if(_c0===null){m._config.reprcingDateValidationinProcess=true;var _c1=misys.getLocalization("dealFielIsRequired");_bf.set("state","Error");dj.hideTooltip(_bf.domNode);dj.showTooltip(_c1,_bf.domNode,100);return false;}m._config.reprcingDateValidationinProcess=false;return true;}else{return true;}}else{return true;}};function _63(_c2){var _c3=function(){_64(_c2);};m.dialog.show("CONFIRMATION",misys.getLocalization("repricingAutoRollOverMsg"),"",null,null,"",_c3);};function _c4(_c5){m._config=m._config||{};m._config.dealValidationinProcess=false;var _c6=dj.byId(_c5);var _c7=_c6?_c6.get("value"):"";if(_c7.length===0||!_c7.trim()){m._config.dealValidationinProcess=true;var _c8=misys.getLocalization("dealFielIsRequired");_c6.set("state","Error");dijit.hideTooltip(_c6.domNode);dijit.showTooltip(_c8,_c6.domNode,100);return false;}m._config.dealValidationinProcess=false;return true;};d.mixin(m,{bind:function(){if(dj.byId("intend_notice_validation_flag")){if(dj.byId("intend_notice_validation_flag").get("value")==="Y"){m.setValidation("repricing_date",_11);}else{m.setValidation("repricing_date",_c);}}m.setValidation("repricing_date2",_17);m.connect("submitButton","onClick",function(){if(_c4("bo_deal_id")&&_b8("bo_facility_id")&&_b3("facility_pricing_option")&&_ae("deal_currency")){_bd("repricing_date");}});m.connect("borrowerid","onChange",function(){var _c9=dijit.byId("bo_deal_id");_c9.set("value","");_c9.set("state","");_c9.set("disabled",true);dijit.byId("bo_facility_id").set("disabled",true);dijit.byId("bo_facility_id").set("displayedValue","");dijit.byId("facility_pricing_option").set("disabled",true);dijit.byId("facility_pricing_option").set("displayedValue","");dijit.byId("deal_currency").set("disabled",true);dijit.byId("deal_currency").set("displayedValue","");if(dj.byId("borrowerid").get("value")){_6a("borrowerid");}});m.connect("bo_deal_id","onChange",function(){dijit.byId("bo_facility_id").set("disabled",true);dijit.byId("bo_facility_id").set("displayedValue","");dijit.byId("facility_pricing_option").set("disabled",true);dijit.byId("facility_pricing_option").set("displayedValue","");dijit.byId("deal_currency").set("disabled",true);dijit.byId("deal_currency").set("displayedValue","");if(this.get("value").length>1){dijit.byId("bo_facility_id").set("disabled",false);}});m.connect("bo_deal_id","onChange",_83);m.connect("bo_deal_id","onChange",_96);m.connect("bo_deal_id","onChange",_7d);m.connect("bo_facility_id","onChange",function(){dijit.byId("facility_pricing_option").set("disabled",true);dijit.byId("deal_currency").set("disabled",true);dijit.byId("deal_currency").set("displayedValue","");if(this.get("value").length>1){dijit.byId("facility_pricing_option").set("disabled",false);}});m.connect("bo_facility_id","onChange",_8e);m.connect("bo_facility_id","onChange",_99);m.connect("facility_pricing_option","onChange",_8c);m.connect("facility_pricing_option","onChange",_a0);m.connect("facility_pricing_option","onChange",_24);m.connect("deal_currency","onChange",function(){dj.byId("repricing_date").set("disabled",true);dj.byId("repricing_date2").set("disabled",true);if(this.get("value").lenght>1){dj.byId("repricing_date").set("disabled",false);dj.byId("repricing_date2").set("disabled",false);}if(dj.byId("repricing_date").get("value")!==""){dj.byId("repricing_date").set("value","");dj.byId("repricing_date").set("displayedValue","");dj.byId("repricing_date2").set("value","");dj.byId("repricing_date2").set("displayedValue","");}_2a();});m.connect("repricing_date","onChange",function(){_2a();});},onFormLoad:function(){if(dj.byId("intend_notice_validation_flag")){if(dj.byId("intend_notice_validation_flag").get("value")!=="Y"){_19();}else{_20();}}dijit.byId("bo_deal_id").set("disabled",true);dijit.byId("bo_facility_id").set("disabled",true);dijit.byId("facility_pricing_option").set("disabled",true);dijit.byId("deal_currency").set("disabled",true);m.animate("fadeOut","is_auto_rollover_row");m.animate("fadeOut","intend_notice_validation_flag_row");m.animate("fadeOut","pricing_option_field_row");m.animate("fadeOut","repricing_to_date_field_row");if(dijit.byId("borrowerid")&&dijit.byId("borrowerid").get("value")!==""){dijit.byId("borrowerid").onChange();}}});})(dojo,dijit,misys);dojo.require("misys.client.binding.loan.ln_repricing_list_client");}