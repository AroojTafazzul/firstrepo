/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.news"]){dojo._hasResource["misys.binding.news"]=true;dojo.provide("misys.binding.news");dojo.require("misys.form.common");dojo.require("misys.validation.common");dojo.require("misys.form.file");dojo.require("dijit.form.Form");dojo.require("dijit.form.Button");dojo.require("dijit.form.TextBox");dojo.require("misys.widget.Dialog");dojo.require("dijit.ProgressBar");dojo.require("dijit.form.ValidationTextBox");dojo.require("dijit.form.CheckBox");dojo.require("dijit.layout.ContentPane");dojo.require("misys.editor.plugins.ProductFieldChoice");dojo.require("dojo.data.ItemFileReadStore");dojo.require("dijit.layout.TabContainer");dojo.require("dijit.form.DateTextBox");dojo.require("misys.form.CurrencyTextBox");dojo.require("dijit.form.FilteringSelect");dojo.require("misys.form.SimpleTextarea");dojo.require("dijit.Editor");dojo.require("dijit._editor.plugins.FontChoice");dojo.require("dojox.editor.plugins.ToolbarLineBreak");dojo.require("misys.widget.Collaboration");(function(d,dj,m){d.mixin(m,{bind:function(){m.setValidation("start_display_date",m.validateNewsStartDate);m.setValidation("end_display_date",m.validateNewsEndDate);},beforeSubmitValidations:function(){var _1=12000,_2=dj.byId("description").get("value").replace(/(<[^>]+>)/g,"").replace(/\n {2,}/g,"").length;if(_2>_1){m._config.onSubmitErrorMsg=m.getLocalization("textareaLinesCharsError",[_1]);return false;}if(dj.byId("attachment-file")&&dj.byId("link").get("value")!==""&&dj.byId("attachment-file").store&&dj.byId("attachment-file").store._arrayOfTopLevelItems.length!==0){m._config.onSubmitErrorMsg=m.getLocalization("tooManyNewsLinksError");return false;}return true;}});d.subscribe("ready",function(){if(d.isIE<9){var _3=dj.byId("description");if(_3.value){_3.execCommand("bold");_3.undo();}}});})(dojo,dijit,misys);}