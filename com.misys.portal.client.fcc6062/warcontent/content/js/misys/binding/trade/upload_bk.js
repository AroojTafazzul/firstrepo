/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.trade.upload_bk"]){dojo._hasResource["misys.binding.trade.upload_bk"]=true;dojo.provide("misys.binding.trade.upload_bk");dojo.require("dojo.parser");dojo.require("dijit.layout.TabContainer");dojo.require("dijit.form.DateTextBox");dojo.require("misys.form.CurrencyTextBox");dojo.require("dijit.form.NumberTextBox");dojo.require("dijit.form.FilteringSelect");dojo.require("dijit.form.Form");dojo.require("dijit.form.Button");dojo.require("dijit.form.TextBox");dojo.require("misys.widget.Dialog");dojo.require("dijit.ProgressBar");dojo.require("dijit.form.ValidationTextBox");dojo.require("dijit.form.CheckBox");dojo.require("misys.form.PercentNumberTextBox");dojo.require("misys.form.SimpleTextarea");dojo.require("misys.widget.Collaboration");dojo.require("misys.form.common");dojo.require("misys.form.file");dojo.require("misys.validation.common");dojo.require("misys.common.FormLcEvents");dojo.require("misys.form.BusinessDateTextBox");(function(d,dj,m){function _1(){var _2=dj.byId("attIds");var _3=false;var _4=0;if(_2){var _5=[dj.byId("attachment-file"),dj.byId("attachment-fileOTHER")];d.forEach(_5,function(_6){if(_6&&_6.grid){var _7=_6.grid.store._arrayOfAllItems;d.forEach(_7,function(_8,i){if(_8!==null){_3=true;_4++;}});}});}m._config.onSubmitErrorMsg=m.getLocalization("mandatoryMinimumFileUploadTypeError");return _3;};d.mixin(m,{bind:function(){m.setValidation("exp_date",m.validateTradeExpiryDate);m.setValidation("lc_cur_code",m.validateCurrency);m.connect("issuing_bank_abbv_name","onChange",m.populateReferences);m.connect("issuing_bank_customer_reference","onChange",m.setApplicantReference);if(dj.byId("issuing_bank_abbv_name")){m.connect("entity","onChange",function(){dj.byId("issuing_bank_abbv_name").onChange();});}m.connect("lc_cur_code","onChange",function(){m.setCurrency(this,["lc_amt"]);});m.connect("lc_amt","onBlur",function(){m.setTnxAmt(this.get("value"));});m.connect("eucp_flag","onClick",function(){m.toggleFields(this.checked,null,["eucp_details"]);});},onFormLoad:function(){var _9=dj.byId("eucp_flag");if(_9){m.toggleFields(_9.checked,null,["eucp_details"]);}m.setCurrency(dj.byId("lc_cur_code"),["lc_amt"]);var _a=dj.byId("issuing_bank_abbv_name");if(_a){_a.onChange();}var _b=dj.byId("issuing_bank_customer_reference");if(_b){_b.onChange();}},beforeSubmitValidations:function(){return _1();}});})(dojo,dijit,misys);dojo.require("misys.client.binding.trade.upload_bk_client");}