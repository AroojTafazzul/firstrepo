/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.trade.message_ls"]){dojo._hasResource["misys.binding.trade.message_ls"]=true;dojo.provide("misys.binding.trade.message_ls");dojo.require("misys.form.common");dojo.require("misys.validation.common");dojo.require("dijit.form.Form");dojo.require("dijit.form.Button");dojo.require("dijit.form.TextBox");dojo.require("dijit.form.ValidationTextBox");dojo.require("dijit.form.CheckBox");dojo.require("dijit.layout.ContentPane");dojo.require("dijit.TooltipDialog");dojo.require("dojo.data.ItemFileReadStore");dojo.require("dijit.form.FilteringSelect");dojo.require("dojo.data.ItemFileReadStore");dojo.require("misys.form.SimpleTextarea");dojo.require("misys.form.file");dojo.require("dijit.form.DateTextBox");dojo.require("misys.form.CurrencyTextBox");(function(d,dj,m){var _1="deletegridrecord";d.mixin(m._config,{initReAuthParams:function(){var _2={productCode:"LS",subProductCode:"",transactionTypeCode:"13",entity:"",currency:"",amount:"",es_field1:"",es_field2:""};return _2;}});d.mixin(m,{bind:function(){m.connect("sub_tnx_type_code","onChange",m.toggleSettlementDetails);m.connect("sub_tnx_type_code","onChange",function(){var _3=d.byId("free_format_msg");if(this.get("value")==="96"){_3.innerHTML=dj.byId("reason_for_cancellation").get("value");}else{_3.innerHTML=dj.byId("message_free_format").get("value");}});m.connect("ls_settlement_amt","onBlur",m.validateLicenseSettlementAmt);m.connect("add_settlement_amt","onBlur",m.validateAddLicenseSettlementAmt);m.connect("ls_settlement_amt","onChange",function(){var _4=d.number.parse(dj.byId("ls_settlement_amt").get("value"));var _5=d.number.parse(dj.byId("ls_amt").get("value"));_5=!isNaN(_5)?_5:0;_4=!isNaN(_4)?_4:0;if(dj.byId("add_settlement_amt")&&dj.byId("tnx_amt")&&dj.byId("add_settlement_amt").get("value")!==null){var _6=d.number.parse(dj.byId("add_settlement_amt").get("value"));_6=!isNaN(_6)?_6:0;dj.byId("tnx_amt").set("value",_4);}else{dj.byId("tnx_amt").set("value",_4);}});m.connect("add_settlement_amt","onChange",function(){var _7=d.number.parse(dj.byId("add_settlement_amt").get("value"));_7=!isNaN(_7)?_7:0;if(dj.byId("ls_settlement_amt")&&dj.byId("tnx_amt")&&dj.byId("ls_settlement_amt").get("value")!==null){var _8=d.number.parse(dj.byId("ls_settlement_amt").get("value"));_8=!isNaN(_8)?_8:0;}});},toggleSettlementDetails:function(){var _9="ls",_a=dj.byId("sub_tnx_type_code").get("value")==="25",_b,_c,_d;_b=function(){m.toggleFields(_a,["add_settlement_amt","ls_settlement_amt"],["tnx_amt"],false);dj.byId("tnx_amt").set("readOnly",true);};_d=(_a)?"fadeIn":"fadeOut";m.animate(_d,d.byId("settlement-details"),_b);},onFormLoad:function(){var _e=dj.byId("sub_tnx_type_code");var _f=d.byId("free_format_msg");if(dj.byId("ls_cur_code")&&dj.byId("tnx_amt")&&dj.byId("ls_settlement_amt")&&dj.byId("add_settlement_amt")){m.setCurrency(dj.byId("ls_cur_code"),["tnx_amt","ls_settlement_amt","add_settlement_amt"]);}if(_e){m.toggleSettlementDetails();}if(_e&&_e.get("value")==="96"){_f.innerHTML=dj.byId("reason_for_cancellation").get("value");}else{_f.innerHTML=dj.byId("message_free_format").get("value");}},beforeSubmitValidations:function(){if(dj.byId("sub_tnx_type_code")&&dj.byId("tnx_amt")){if(dj.byId("sub_tnx_type_code").get("value")!=="25"){dj.byId("tnx_amt").set("value","");}else{if(dj.byId("tnx_amt").get("value")===0){m._config.onSubmitErrorMsg=m.getLocalization("tnxAmtZeroError");return false;}}}if(dj.byId("ls_liab_amt")&&dj.byId("tnx_amt")){var _10=d.number.parse(dj.byId("ls_liab_amt").get("value"));var _11=d.number.parse(dj.byId("tnx_amt").get("value"));_10=!isNaN(_10)?_10:0;_11=!isNaN(_11)?_11:0;if(_11>_10){m._config.onSubmitErrorMsg=m.getLocalization("totalSettlementAmtGreaterThanOSAmtError",[_11,_10]);return false;}}return true;}});})(dojo,dijit,misys);dojo.require("misys.client.binding.trade.message_ls_client");}