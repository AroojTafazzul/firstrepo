/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.binding.trade.amend_si_swift2018"]){dojo._hasResource["misys.binding.trade.amend_si_swift2018"]=true;dojo.provide("misys.binding.trade.amend_si_swift2018");dojo.require("dijit.form.Form");dojo.require("dijit.form.Button");dojo.require("dijit.form.TextBox");dojo.require("misys.widget.Dialog");dojo.require("dijit.ProgressBar");dojo.require("dijit.form.ValidationTextBox");dojo.require("dijit.form.CheckBox");dojo.require("dijit.layout.ContentPane");dojo.require("dojo.data.ItemFileReadStore");dojo.require("dijit.layout.TabContainer");dojo.require("dijit.form.DateTextBox");dojo.require("misys.form.CurrencyTextBox");dojo.require("dijit.form.NumberTextBox");dojo.require("dijit.form.FilteringSelect");dojo.require("misys.form.SimpleTextarea");dojo.require("misys.widget.Collaboration");dojo.require("misys.validation.common");dojo.require("misys.form.common");dojo.require("misys.form.file");dojo.require("misys.form.static_document");dojo.require("misys.widget.Amendments");(function(d,dj,m){var _1="deletegridrecord";function _2(){dj.byId("principal_act_no").set("value","");dj.byId("fee_act_no").set("value","");};function _3(){if(d.number.parse(dijit.byId("org_lc_amt").get("displayedValue"))<d.number.parse(dijit.byId("dec_amt").get("displayedValue"))){m.showTooltip(m.getLocalization("decreaseAmountShouldBeLessThanLCAmount",[dj.byId("dec_amt").get("displayedValue")]),d.byId("dec_amt"),["after"],5000);misys.dialog.show("ERROR",dj.byId("dec_amt").invalidMessage,"",function(){dj.byId("dec_amt").focus();dj.byId("dec_amt").set("state","Error");});return false;}if(d.number.parse(dijit.byId("dec_amt").get("displayedValue"))<0){dj.byId("lc_amt").set("value",d.number.parse(dj.byId("org_lc_amt").get("displayedValue")));m.showTooltip(m.getLocalization("valueShouldBeGreaterThanZero",[dj.byId("dec_amt").get("displayedValue")]),d.byId("dec_amt"),["after"],5000);misys.dialog.show("ERROR",dj.byId("dec_amt").invalidMessage,"",function(){dj.byId("dec_amt").focus();dj.byId("dec_amt").set("state","Error");});return false;}return true;};d.mixin(m._config,{initReAuthParams:function(){var _4={productCode:"SI",subProductCode:"",transactionTypeCode:"03",subTransactionTypeCode:dj.byId("sub_tnx_type_code")?dj.byId("sub_tnx_type_code").get("value"):"",entity:dj.byId("entity")?dj.byId("entity").get("value"):"",currency:dj.byId("lc_cur_code")?dj.byId("lc_cur_code").get("value"):"",amount:dj.byId("lc_amt")?m.trimAmount(dj.byId("lc_amt").get("value")):"",tnxAmt:dj.byId("tnx_amt")?m.trimAmount(dj.byId("tnx_amt").get("value")):"",es_field1:dj.byId("lc_amt")?m.trimAmount(dj.byId("lc_amt").get("value")):"",es_field2:""};return _4;},xmlTransform:function(_5){var _6="<si_tnx_record>";if(_5.indexOf(_6)!=-1){var _7=m._config.xmlTagName,_8=_7?["<",_7,">"]:[],_9="</si_tnx_record>",_a="",_b=-1;_a=_5.substring(_6.length,(_5.length-_9.length));if(m._config.swift2018Enabled){var _c;var _d=["narrative_description_goods","narrative_documents_required","narrative_additional_instructions","narrative_special_beneficiary"];var _e=[m._config.narrativeDescGoodsDataStore,m._config.narrativeDocsReqDataStore,m._config.narrativeAddInstrDataStore,m._config.narrativeSpBeneDataStore];for(var _f=0;_f<4;_f++){_c=_f==0?_a.substring(0,_a.indexOf("<"+_d[_f]+">")):(_c.indexOf("<"+_d[_f]+">")>0?_c.substring(0,_c.indexOf("<"+_d[_f]+">")):_c);if(_a.indexOf("<"+_d[_f]+">")<0){continue;}var i=0,_10,_11;if(_e[_f]){_c=_c.concat("<"+_d[_f]+">");_c=_c.concat("<![CDATA[");_c=_c.concat("<amendments>");_c=_c.concat("<amendment>");_c=_c.concat("<sequence>");_c=_c.concat("");_c=_c.concat("</sequence>");_c=_c.concat("<data>");d.forEach(_e[_f],function(){_10=_e[_f][i].verb[0];_c=_c.concat("<datum>");_c=_c.concat("<id>");_c=_c.concat(i);_c=_c.concat("</id>");_c=_c.concat("<verb>");_c=_c.concat(_10);_c=_c.concat("</verb>");_c=_c.concat("<text>");_c=_c.concat("]]><![CDATA["+dojo.trim(_e[_f][i].content[0]));_c=_c.concat("</text>");_c=_c.concat("</datum>");i++;});_c=_c.concat("</data>");_c=_c.concat("</amendment>");_c=_c.concat("</amendments>");_c=_c.concat("]]>");_c=_c.concat(_a.substring(_a.indexOf("</"+_d[_f]+">"),_a.length));}else{_c=_c.concat("<"+_d[_f]+">");_c=_c.concat(_a.substring(_a.indexOf("</"+_d[_f]+">"),_a.length));}}_8.push(_c);}else{_8.push(_a);}if(_7){_8.push("</",_7,">");}return _8.join("");}else{return _5;}}});d.mixin(m,{bind:function(){m.setValidation("template_id",m.validateTemplateId);m.setValidation("exp_date",m.validateTradeExpiryDate);m.setValidation("amd_date",m.validateAmendmentDate);m.setValidation("pstv_tol_pct",m.validateTolerance);m.setValidation("neg_tol_pct",m.validateTolerance);m.setValidation("max_cr_desc_code",m.validateMaxCreditTerm);m.setValidation("beneficiary_country",m.validateCountry);m.setValidation("last_ship_date",m.validateLastShipmentDate);m.setValidation("lc_cur_code",m.validateCurrency);m.setValidation("renew_for_nb",m.validateRenewFor);m.setValidation("advise_renewal_days_nb",m.validateDaysNotice);m.setValidation("rolling_renewal_nb",m.validateNumberOfRenewals);m.setValidation("rolling_cancellation_days",m.validateCancellationNotice);m.setValidation("renewal_calendar_date",m.validateRenewalCalendarDate);m.connect("ntrf_flag","onClick",m.toggleTransferIndicatorFlag);m.connect("irv_flag","onClick",m.checkIrrevocableFlag);m.connect("ntrf_flag","onClick",m.checkNonTransferableFlag);m.connect("stnd_by_lc_flag","onClick",m.checkStandByFlag);m.connect("cfm_inst_code_1","onClick",m.resetConfirmationChargesLC);m.connect("cfm_inst_code_2","onClick",m.resetConfirmationChargesLC);m.connect("cfm_inst_code_3","onClick",m.resetConfirmationChargesLC);m.connect("amd_chrg_brn_by_code_1","onClick",m.amendChargesLC);m.connect("amd_chrg_brn_by_code_2","onClick",m.amendChargesLC);m.connect("amd_chrg_brn_by_code_3","onClick",m.amendChargesLC);m.connect("amd_chrg_brn_by_code_4","onClick",m.amendChargesLC);m.setValidation("advising_bank_iso_code",m.validateBICFormat);m.setValidation("advise_thru_bank_iso_code",m.validateBICFormat);m.connect("inco_term_year","onChange",m.getIncoTerm);m.setValidation("requested_confirmation_party_iso_code",m.validateBICFormat);m.connect("advising_bank_iso_code","onChange",function(){var _12=this.get("value");if(_12.length>0){m.setRequiredFields(["advising_bank_name","advising_bank_address_line_1"],false);}});m.connect("advise_thru_bank_iso_code","onChange",function(){var _13=this.get("value");if(_13.length>0){m.setRequiredFields(["advise_thru_bank_name","advise_thru_bank_address_line_1"],false);}});m.connect("requested_confirmation_party_iso_code","onChange",function(){var _14=this.get("value");if(_14.length>0){m.setRequiredFields(["requested_confirmation_party_name","requested_confirmation_party_address_line_1"],false);}});m.connect("req_conf_party_flag","onChange",function(){var _15=this.get("value");if(_15=="Other"){d.byId("requested-conf-party-bank-details").style.display="block";m.toggleFields(true,["requested_confirmation_party_name","requested_confirmation_party_address_line_1","requested_confirmation_party_address_line_2","requested_confirmation_party_dom","requested_confirmation_party_iso_code"],null,null,true);}else{d.byId("requested-conf-party-bank-details").style.display="none";m.toggleFields(false,["requested_confirmation_party_name","requested_confirmation_party_address_line_1","requested_confirmation_party_address_line_2","requested_confirmation_party_dom","requested_confirmation_party_iso_code"],null,null,false);}});m.connect("cfm_chrg_brn_by_code_1","onClick",m.checkConfirmationCharges);m.connect("cfm_chrg_brn_by_code_2","onClick",m.checkConfirmationCharges);m.connect("cr_avl_by_code_1","onClick",m.togglePaymentDraftAt);m.connect("cr_avl_by_code_1","onClick",m.setDraftTerm);m.connect("cr_avl_by_code_2","onClick",m.togglePaymentDraftAt);m.connect("cr_avl_by_code_3","onClick",m.togglePaymentDraftAt);m.connect("cr_avl_by_code_4","onClick",m.togglePaymentDraftAt);m.connect("cr_avl_by_code_5","onClick",m.togglePaymentDraftAt);m.connect("cr_avl_by_code_6","onClick",m.togglePaymentDraftAt);m.connect("tenor_type_1","onClick",m.toggleDraftTerm);m.connect("tenor_type_1","onClick",m.setDraftTerm);m.connect("tenor_type_2","onClick",m.toggleDraftTerm);m.connect("tenor_type_3","onClick",m.toggleDraftTerm);m.connect("renew_flag","onClick",function(){if(dj.byId("is_bank")&&dj.byId("is_bank").get("value")==="N"){m.toggleFields(this.get("checked"),["advise_renewal_flag","rolling_renewal_flag","final_expiry_date","renew_on_code","renew_for_nb","renew_for_period"],["renew_on_code","renew_for_nb","renew_for_period"]);}else{m.toggleFields(this.get("checked"),["advise_renewal_flag","rolling_renewal_flag","projected_expiry_date","final_expiry_date","renew_on_code","renew_for_nb","renew_for_period"],["renew_on_code","renew_for_nb","renew_for_period"]);}if(!this.get("checked")){dj.byId("renew_on_code").set("value","");dj.byId("renew_for_nb").set("value","");dj.byId("renew_for_period").set("value","");dj.byId("advise_renewal_flag").set("checked",false);dj.byId("rolling_renewal_flag").set("checked",false);dj.byId("renew_amt_code_1").set("disabled",true);dj.byId("renew_amt_code_2").set("disabled",true);if(dj.byId("projected_expiry_date")){dj.byId("projected_expiry_date").set("value",null);}dj.byId("final_expiry_date").set("value",null);}else{dj.byId("renew_amt_code_1").set("disabled",false);dj.byId("renew_amt_code_2").set("disabled",false);dj.byId("renew_amt_code_2").set("checked",true);}});m.connect("renew_flag","onClick",function(){if(!this.get("checked")){dj.byId("rolling_renewal_nb").set("value","");}else{if(!dj.byId("rolling_renewal_flag").get("checked")){dj.byId("rolling_renewal_nb").set("value",m.getLocalization("default_rewnewalNumber"));}}});m.connect("final_expiry_date","onChange",function(){var _16=dj.byId("exp_date");var _17=dj.byId("projected_expiry_date");var _18=function(){dj.hideTooltip(dj.byId("final_expiry_date").domNode);};var _19=this.get("displayedValue");if(_16&&!m.compareDateFields(_16,this)){this.set("value",null);dj.showTooltip(m.getLocalization("finalExpDateLessThanTransactionExpDtError",[_19,_16.get("displayedValue")]),dj.byId("final_expiry_date").domNode,0);setTimeout(_18,2000);}else{if(_17&&!m.compareDateFields(_17,this)){this.set("value",null);dj.showTooltip(m.getLocalization("finalExpDateLessThanProjectedExpDtError",[_19,_17.get("displayedValue")]),dj.byId("final_expiry_date").domNode,0);setTimeout(_18,2000);}}});m.connect("advise_renewal_flag","onClick",function(){m.toggleFields(this.get("checked"),["advise_renewal_days_nb"],["advise_renewal_days_nb"]);});m.connect("advise_renewal_flag","onChange",function(){m.toggleFields(this.get("checked"),["advise_renewal_days_nb"],["advise_renewal_days_nb"]);});m.connect("rolling_renewal_flag","onClick",function(){m.toggleFields(this.get("checked"),["final_expiry_date","rolling_renewal_nb","rolling_cancellation_days","rolling_renew_on_code"],["rolling_renew_on_code","rolling_renewal_nb","rolling_cancellation_days"]);if(!this.get("checked")){dj.byId("rolling_renew_for_nb").set("value","");dj.byId("rolling_renew_for_period").set("value","");dj.byId("rolling_day_in_month").set("value","");if(dj.byId("renew_flag").get("checked")){dj.byId("rolling_renewal_nb").set("value",m.getLocalization("default_rewnewalNumber"));}}});m.connect("rolling_renewal_flag","onChange",function(){m.toggleFields(this.get("checked"),["final_expiry_date","rolling_renewal_nb","rolling_cancellation_days","rolling_renew_on_code"],["rolling_renew_on_code","rolling_renewal_nb","rolling_cancellation_days"]);if(!this.get("checked")){dj.byId("rolling_renew_for_nb").set("value","");dj.byId("rolling_renew_for_period").set("value","");dj.byId("rolling_day_in_month").set("value","");if(dj.byId("renew_flag").get("checked")){dj.byId("rolling_renewal_nb").set("value",m.getLocalization("default_rewnewalNumber"));}}});m.connect("rolling_renewal_nb","onBlur",function(){if(dj.byId("rolling_renewal_flag").get("checked")&&d.number.parse(this.get("value"))===1){m.showTooltip(m.getLocalization("invalidNumberOfRollingRenewals"),this.domNode,["after"]);this.state="Error";this._setStateClass();dj.setWaiState(this.focusNode,"invalid","true");}});m.connect("rolling_day_in_month","onBlur",function(){if(dj.byId("rolling_day_in_month").get("value")===0){dj.byId("rolling_day_in_month").set("state","Error");dj.showTooltip(m.getLocalization("dayInMonthZeroNotApplicableError"),dj.byId("rolling_day_in_month").domNode,0);var _1a=function(){dj.hideTooltip(dj.byId("rolling_day_in_month").domNode);};setTimeout(_1a,4500);}});m.connect("rolling_day_in_month","onChange",function(){if(dj.byId("rolling_renew_for_period").get("value")==="D"){this.set("value","");dj.showTooltip(m.getLocalization("dayInMonthNotApplicableForDaysError"),dj.byId("rolling_day_in_month").domNode,0);var _1b=function(){dj.hideTooltip(dj.byId("rolling_day_in_month").domNode);};setTimeout(_1b,1500);}});m.connect("rolling_renew_for_period","onChange",function(){if(dj.byId("rolling_renew_for_period").get("value")==="D"&&!isNaN(dj.byId("rolling_day_in_month").get("value"))){dj.byId("rolling_day_in_month").set("value","");dj.showTooltip(m.getLocalization("dayInMonthNotApplicableForDaysError"),dj.byId("rolling_renew_for_period").domNode,0);var _1c=function(){dj.hideTooltip(dj.byId("rolling_day_in_month").domNode);};setTimeout(_1c,1500);}});m.connect("rolling_renew_on_code","onChange",function(){m.toggleFields(this.get("value")==="03",["rolling_day_in_month","rolling_renew_for_nb"],["rolling_renew_for_nb"],true);if(this.get("value")==="01"){dj.byId("rolling_renew_for_nb").set("value","");dj.byId("rolling_renew_for_period").set("value","");dj.byId("rolling_day_in_month").set("value","");}else{if(dj.byId("rolling_renew_on_code").get("value")==="03"&&dj.byId("rolling_renewal_flag").get("checked")&&dj.byId("renew_for_period").get("value")!==""){dj.byId("rolling_renew_for_period").set("value",dj.byId("renew_for_period").get("value"));}}});m.connect("rolling_renew_for_nb","onBlur",function(){m.validateRollingRenewalFrequency(dj.byId("rolling_renew_for_nb"));});m.connect("renew_for_nb","onBlur",function(){m.validateRollingRenewalFrequency(dj.byId("renew_for_nb"));});m.connect("renew_for_period","onChange",function(){if(dj.byId("rolling_renew_on_code").get("value")==="03"&&dj.byId("rolling_renewal_flag").get("checked")&&dj.byId("renew_for_period").get("value")!==""){dj.byId("rolling_renew_for_period").set("value",dj.byId("renew_for_period").get("value"));}});m.connect("lc_amt","onBlur",m.calculateAmendTransactionAmount);m.connect("last_ship_date","onChange",function(){m.toggleDependentFields(this,dj.byId("narrative_shipment_period"),m.getLocalization("shipmentDateOrPeriodExclusivityError"));});m.connect("last_ship_date","onClick",function(){m.toggleDependentFields(this,dj.byId("narrative_shipment_period"),m.getLocalization("shipmentDateOrPeriodExclusivityError"));});m.connect("tenor_maturity_date","onBlur",m.setDraftTerm);m.connect("tenor_days_type","onBlur",m.setDraftTerm);m.connect("tenor_type_details","onBlur",m.setDraftTerm);m.connect("lc_cur_code","onChange",function(){m.setCurrency(this,["lc_amt"]);});m.connect("credit_available_with_bank_type","onChange",m.setCreditAvailBy);m.connect("tenor_period","onChange",m.setDraftTerm);m.connect("tenor_from_after","onChange",m.setDraftTerm);m.connect("tenor_days","onChange",m.setDraftTerm);m.connect("tenor_days_type","onChange",function(){m.toggleFields((this.get("value")=="99"),null,["tenor_type_details"]);});m.connect("drawee_details_bank_name","onChange",m.initDraweeFields);m.connect("adv_send_mode","onChange",function(){m.toggleMT798Fields("issuing_bank_abbv_name");if(dj.byId("adv_send_mode").get("value")=="01"){m.toggleRequired("amd_details",true);}else{m.toggleRequired("amd_details",false);}});m.connect("issuing_bank_abbv_name","onChange",m.populateReferences);if(dj.byId("issuing_bank_abbv_name")){m.connect("entity","onChange",function(){dj.byId("issuing_bank_abbv_name").onChange();});}m.connect("issuing_bank_customer_reference","onChange",m.setApplicantReference);m.connect("part_ship_detl_nosend","onChange",function(){var _1d=this.get("value");dj.byId("part_ship_detl").set("value",this.get("value"));if(_1d=="CONDITIONAL"){document.getElementById("infoMessagePartialShipment").style.display="block";document.getElementById("infoMessagePartialShipment").style.paddingLeft="250px";}else{document.getElementById("infoMessagePartialShipment").style.display="none";}m.toggleFields(_1d&&_1d!=="ALLOWED"&&_1d!=="NOT ALLOWED"&&_1d!=="NONE",null,["part_ship_detl_text_nosend"]);});m.connect("part_ship_detl_text_nosend","onBlur",function(){dj.byId("part_ship_detl").set("value",this.get("value"));});m.connect("tran_ship_detl_nosend","onChange",function(){var _1e=this.get("value");dj.byId("tran_ship_detl").set("value",_1e);if(_1e=="CONDITIONAL"){document.getElementById("infoMessageTranshipment").style.display="block";document.getElementById("infoMessageTranshipment").style.paddingLeft="250px";}else{document.getElementById("infoMessageTranshipment").style.display="none";}m.toggleFields(_1e&&_1e!=="ALLOWED"&&_1e!=="NOT ALLOWED"&&_1e!=="NONE",null,["tran_ship_detl_text_nosend"]);});m.connect("tran_ship_detl_text_nosend","onBlur",function(){dj.byId("tran_ship_detl").set("value",this.get("value"));});m.connect("renew_on_code","onChange",function(){m.toggleFields(this.get("value")==="02",["renewal_calendar_date"],["renewal_calendar_date"]);});m.connect("tenor_days","onFocus",m.setDraftDaysReadOnly);m.connect("tenor_period","onFocus",m.setDraftDaysReadOnly);m.connect("tenor_from_after","onFocus",m.setDraftDaysReadOnly);m.connect("tenor_days_type","onFocus",m.setDraftDaysReadOnly);m.connect("draft_term","onFocus",function(){this.set("readOnly",!dj.byId("cr_avl_by_code_5").get("checked"));});m.connect("narrative_shipment_period","onChange",function(){m.toggleDependentFields(this,dj.byId("last_ship_date"),m.getLocalization("shipmentDateOrPeriodExclusivityError"));});m.connect("narrative_shipment_period","onClick",function(){m.toggleDependentFields(this,dj.byId("last_ship_date"),m.getLocalization("shipmentDateOrPeriodExclusivityError"));});m.connect("eucp_flag","onClick",function(){m.toggleFields(this.get("checked"),null,["eucp_details"]);});m.connect("inco_term_year","onChange",function(){m.toggleFields(this.get("value"),null,["inco_term"],false,true);});m.connect("inco_term","onChange",function(){m.toggleFields(this.get("value"),null,["inco_place"],false,false);});m.connect("adv_send_mode","onChange",function(){m.toggleMT798Fields("issuing_bank_abbv_name");});m.connect("issuing_bank_abbv_name","onChange",function(){m.toggleMT798Fields("issuing_bank_abbv_name");});m.connect("transport_mode_nosend","onChange",function(){var _1f=this.get("value");dj.byId("transport_mode").set("value",_1f);m.toggleFields(_1f&&_1f!=="AIRT"&&_1f!=="SEAT"&&_1f!=="RAIL"&&_1f!=="ROAD"&&_1f!=="MULT",null,["transport_mode_text_nosend"],false,false);});m.connect("transport_mode_text_nosend","onBlur",function(){dj.byId("transport_mode").set("value",this.get("value"));});m.connect("product_type_code","onChange",function(){if(dj.byId("product_type_code").get("value")!=="99"){d.style("product_type_details_row","display","none");}else{d.style("product_type_details_row","display","block");}});m.connect("standby_rule_code","onChange",function(){m.toggleFields((this.get("value")=="99"),["standby_rule_other"],null);});m.connect("entity_img_label","onClick",_2);m.connect("renew_amt_code_1","onClick",function(){m.setRenewalAmount(this);});m.connect("renew_amt_code_2","onClick",function(){m.setRenewalAmount(this);});m.connect("narrative_period_presentation","onBlur",function(){var _20=dj.byId("narrative_period_presentation").get("value");dj.byId("narrative_period_presentation_nosend").set("value",_20);});m.connect("delv_org","onChange",function(){if(this.get("value")==="99"||this.get("value")==="02"){if(this.get("value")==="99"){m.toggleFields((this.get("value")==="99"),null,["delv_org_text"]);m.toggleRequired("delv_org_text",true);dj.byId("delv_org_text").set("value","");}if(this.get("value")==="02"){m.toggleFields((this.get("value")==="02"),null,["delv_org_text"]);m.toggleRequired("delv_org_text",true);dj.byId("delv_org_text").set("value","");}}else{dj.byId("delv_org_text").set("disabled",true);m.toggleRequired("delv_org_text",false);dj.byId("delv_org_text").set("value","");}});m.connect("lc_exp_date_type_code","onChange",function(){m.toggleFields((this.get("value")==="01"||this.get("value")==="02"),null,["exp_date"]);if(this.get("value")==="02"){m.toggleRequired("exp_date",false);m.animate("fadeIn",d.byId("exp-event"));m.toggleRequired("exp_event",true);}else{m.animate("fadeOut",d.byId("exp-event"));dj.byId("exp_event").set("value","");m.toggleRequired("exp_event",false);}});m.setValidation("period_presentation_days",m.validatePeriodPresentationDays);m.connect("applicant_address_line_4","onFocus",function(){m.showTooltip(m.getLocalization("addressLine4ToolTip",[dj.byId("applicant_address_line_4").get("displayedValue"),dj.byId("applicant_address_line_4").get("value")]),d.byId("applicant_address_line_4"),["right"],5000);});m.connect("beneficiary_address_line_4","onFocus",function(){m.showTooltip(m.getLocalization("addressLine4ToolTip",[dj.byId("beneficiary_address_line_4").get("displayedValue"),dj.byId("beneficiary_address_line_4").get("value")]),d.byId("beneficiary_address_line_4"),["right"],5000);});m.connect("credit_available_with_bank_address_line_4","onFocus",function(){m.showTooltip(m.getLocalization("addressLine4ToolTip",[dj.byId("credit_available_with_bank_address_line_4").get("displayedValue"),dj.byId("credit_available_with_bank_address_line_4").get("value")]),d.byId("credit_available_with_bank_address_line_4"),["right"],5000);});if(dj.byId("dec_amt")&&!isNaN(dj.byId("dec_amt").get("value"))){dj.byId("inc_amt").set("disabled",true);}if(dj.byId("inc_amt")&&!isNaN(dj.byId("inc_amt").get("value"))){dj.byId("dec_amt").set("disabled",true);}m.connect("inc_amt","onBlur",m.amendTransaction);m.connect("dec_amt","onBlur",m.amendTransaction);m.connect("inc_amt","onBlur",function(){m.validateAmendAmount(true,this,"lc");if(!isNaN(dj.byId("inc_amt").value)&&d.number.parse(dijit.byId("inc_amt").get("displayedValue"))>0){dj.byId("lc_amt").set("value",d.number.parse(dj.byId("org_lc_amt").get("displayedValue"))+d.number.parse(dj.byId("inc_amt").get("displayedValue")));dj.byId("inc_amt").set("disabled",false);dj.byId("dec_amt").set("disabled",true);dj.byId("dec_amt").set("value","");}else{if(d.number.parse(dijit.byId("inc_amt").get("displayedValue"))<0){dj.byId("lc_amt").set("value",d.number.parse(dj.byId("org_lc_amt").get("displayedValue")));m.showTooltip(m.getLocalization("valueShouldBeGreaterThanZero",[dj.byId("inc_amt").get("displayedValue")]),d.byId("inc_amt"),["after"],5000);misys.dialog.show("ERROR",dj.byId("inc_amt").invalidMessage,"",function(){dj.byId("inc_amt").focus();dj.byId("inc_amt").set("state","Error");});return false;}}return true;});m.connect("dec_amt","onBlur",function(){_3();m.validateAmendAmount(true,this,"lc");if(!isNaN(dj.byId("dec_amt").value)){if(d.number.parse(dj.byId("org_lc_amt").get("displayedValue"))<d.number.parse(dj.byId("dec_amt").get("displayedValue"))){m.showTooltip(m.getLocalization("decreaseAmountShouldBeLessThanLCAmount",[dj.byId("dec_amt").get("displayedValue")]),d.byId("dec_amt"),["after"],5000);misys.dialog.show("ERROR",dj.byId("dec_amt").invalidMessage,"",function(){dj.byId("dec_amt").focus();dj.byId("dec_amt").set("state","Error");});return false;}else{if(d.number.parse(dijit.byId("dec_amt").get("displayedValue"))<0){dj.byId("lc_amt").set("value",d.number.parse(dj.byId("org_lc_amt").get("displayedValue")));m.showTooltip(m.getLocalization("valueShouldBeGreaterThanZero",[dj.byId("dec_amt").get("displayedValue")]),d.byId("dec_amt"),["after"],5000);misys.dialog.show("ERROR",dj.byId("dec_amt").invalidMessage,"",function(){dj.byId("dec_amt").focus();dj.byId("dec_amt").set("state","Error");});return false;}else{if(d.number.parse(dj.byId("dec_amt").get("displayedValue"))>0){dj.byId("lc_amt").set("value",d.number.parse(dj.byId("org_lc_amt").get("displayedValue"))-d.number.parse(dj.byId("dec_amt").get("displayedValue")));dj.byId("dec_amt").set("disabled",false);dj.byId("inc_amt").set("disabled",true);dj.byId("inc_amt").set("value","");}}}}return true;});m.connect("lc_amt","onBlur",function(){var _21=d.number.parse(dj.byId("org_lc_amt").get("displayedValue")),_22=d.number.parse(dj.byId("lc_amt").get("displayedValue"));if(!isNaN(_22)){if(_21>_22){dj.byId("dec_amt").set("value",_21-_22);dj.byId("dec_amt").set("disabled",false);dj.byId("inc_amt").set("disabled",true);dj.byId("inc_amt").set("value","");}if(_21<_22){dj.byId("inc_amt").set("value",_22-_21);dj.byId("inc_amt").set("disabled",false);dj.byId("dec_amt").set("disabled",true);dj.byId("dec_amt").set("value","");}if(_21===_22){dj.byId("inc_amt").set("value","");dj.byId("inc_amt").set("disabled",false);dj.byId("dec_amt").set("value","");dj.byId("dec_amt").set("disabled",false);}}if(d.number.parse(dj.byId("lc_amt").get("displayedValue"))<=0){m.showTooltip(m.getLocalization("valueShouldBeGreaterThanZero",[dj.byId("lc_amt").get("displayedValue")]),d.byId("lc_amt"),["after"],5000);misys.dialog.show("ERROR",dj.byId("lc_amt").invalidMessage,"",function(){dj.byId("dec_amt").set("value","");dj.byId("inc_amt").set("value","");dj.byId("dec_amt").set("disabled",false);dj.byId("inc_amt").set("disabled",false);dj.byId("lc_amt").set("state","Error");});return false;}if(isNaN(d.number.parse(dj.byId("lc_amt").get("displayedValue")))){dj.byId("dec_amt").set("value","");dj.byId("inc_amt").set("value","");dj.byId("dec_amt").set("disabled",false);dj.byId("inc_amt").set("disabled",false);dj.byId("lc_amt").set("state","Error");return false;}return true;});m.connect("delivery_to","onChange",function(){if(this.get("value")===""||this.get("value")==="04"){if(this.get("value")===""){dj.byId("narrative_delivery_to").set("disabled",false);dj.byId("narrative_delivery_to").set("value","");m.toggleRequired("narrative_delivery_to",false);document.getElementById("narrative_delivery_to_img").style.display="block";}else{m.toggleFields((this.get("value")==="04"),null,["narrative_delivery_to"]);m.toggleRequired("narrative_delivery_to",false);dj.byId("narrative_delivery_to").set("value","");dj.byId("narrative_delivery_to").set("disabled",true);document.getElementById("narrative_delivery_to_img").style.display="none";}}else{dj.byId("narrative_delivery_to").set("disabled",false);dj.byId("narrative_delivery_to").set("value","");m.toggleRequired("narrative_delivery_to",true);document.getElementById("narrative_delivery_to_img").style.display="block";}});},onFormLoad:function(){m.xhrPost({url:misys.getServletURL("/screen/AjaxScreen/action/GetAmendmentWarning"),handleAs:"json",sync:true,content:{refId:dj.byId("ref_id").get("value"),companyId:dj.byId("company_id").get("value"),productCode:"SI"},load:function(_23,_24){m._config.showWarningBene=_23.showWarningBene?_23.showWarningBene:false;}});if(m._config.showWarningBene){m.dialog.show("CONFIRMATION",m.getLocalization("warningMsgAmendLC"),"","","","","",function(){var _25="/screen/StandbyIssuedScreen?option=EXISTING&tnxtype=03";window.location.href=misys.getServletURL(_25);return;});}m.setCurrency(dj.byId("lc_cur_code"),["inc_amt","dec_amt","lc_amt","org_lc_amt"]);m._config.productCode="lc";var _26=dj.byId("credit_available_with_bank_type");if(_26){_26.onChange(_26.get("value"));}var _27=dj.byId("part_ship_detl_nosend");if(_27){var _28=_27.get("value");if(_28=="CONDITIONAL"){document.getElementById("infoMessagePartialShipment").style.display="block";document.getElementById("infoMessagePartialShipment").style.paddingLeft="250px";}else{document.getElementById("infoMessagePartialShipment").style.display="none";}m.toggleFields(_28&&_28!=="ALLOWED"&&_28!=="NOT ALLOWED"&&_28!=="NONE",null,["part_ship_detl_text_nosend"],true);}var _29=dj.byId("part_ship_detl");if(_29&&_29.get("value")===""){_29.set("value",_27.get("value"));}var _2a=dj.byId("cr_avl_by_code_1").get("checked"),_2b=dj.byId("cr_avl_by_code_2").get("checked"),_2c=dj.byId("cr_avl_by_code_3").get("checked"),_2d=dj.byId("cr_avl_by_code_5").get("checked");if(!_2a&&!_2b&&!_2c&&!_2d){m.setDraftTerm();}var _2e=dj.byId("tran_ship_detl_nosend");if(_2e){var _2f=_2e.get("value");if(_2f=="CONDITIONAL"){document.getElementById("infoMessageTranshipment").style.display="block";document.getElementById("infoMessageTranshipment").style.paddingLeft="250px";}else{document.getElementById("infoMessageTranshipment").style.display="none";}m.toggleFields(_2f&&_2f!=="ALLOWED"&&_2f!=="NOT ALLOWED"&&_2f!=="NONE",null,["tran_ship_detl_text_nosend"]);}var _30=dj.byId("tran_ship_detl");if(_30&&_30.get("value")===""){_30.set("value",_2e.get("value"));}m.resetRequestedConfirmationParty();if(dj.byId("req_conf_party_flag")){var _31=dj.byId("req_conf_party_flag").value;if(_31=="Other"){d.byId("requested-conf-party-bank-details").style.display="block";}else{d.byId("requested-conf-party-bank-details").style.display="none";}}if(dj.byId("amd_chrg_brn_by_code_4")){if(!dj.byId("amd_chrg_brn_by_code_4").get("value")){var _32=dj.byId("narrative_amend_charges_other");if(_32){_32.set("value","");_32.set("disabled",true);}}}var _33=["cr_avl_by_code_1","cr_avl_by_code_2","cr_avl_by_code_3","cr_avl_by_code_4","cr_avl_by_code_5","cr_avl_by_code_6"];var _34=dj.byId("product_type_code");if(_34&&_34.get("value")!=="99"){d.style("product_type_details_row","display","none");}else{d.style("product_type_details_row","display","block");dj.byId("product_type_details").set("disabled",true);}if(dj.byId("stand_by_lc_code")&&dj.byId("stand_by_lc_code").get("value")!=null){dj.byId("product_type_code").set("disabled",true);}d.forEach(_33,function(id){var _35=dj.byId(id);if(_35&&_35.get("checked")){_35.onClick();}});var _36=dj.byId("renew_flag");if(_36){if(dj.byId("is_bank")&&dj.byId("is_bank").get("value")==="N"){m.toggleFields(_36.get("checked"),["advise_renewal_flag","rolling_renewal_flag","final_expiry_date","renew_on_code","renew_for_nb","renew_for_period"],["renew_on_code","renew_for_nb","renew_for_period"]);}else{m.toggleFields(_36.get("checked"),["advise_renewal_flag","rolling_renewal_flag","projected_expiry_date","final_expiry_date","renew_on_code","renew_for_nb","renew_for_period"],["renew_on_code","renew_for_nb","renew_for_period"]);}if(!_36.get("checked")){dj.byId("renew_on_code").set("value","");dj.byId("renew_for_nb").set("value","");dj.byId("renew_for_period").set("value","");dj.byId("advise_renewal_flag").set("checked",false);dj.byId("rolling_renewal_flag").set("checked",false);dj.byId("renew_amt_code_1").set("disabled",true);dj.byId("renew_amt_code_2").set("disabled",true);if(dj.byId("projected_expiry_date")){dj.byId("projected_expiry_date").set("value",null);}dj.byId("final_expiry_date").set("value",null);}else{dj.byId("renew_amt_code_1").set("disabled",false);dj.byId("renew_amt_code_2").set("disabled",false);dj.byId("renew_amt_code_2").set("checked",true);}}var _37=dj.byId("renew_on_code");if(_37){m.toggleFields(_37.get("value")==="02",["renewal_calendar_date"],["renewal_calendar_date"],true);}var _38=dj.byId("advise_renewal_flag");if(_38){m.toggleFields(_38.get("checked"),["advise_renewal_days_nb"],["advise_renewal_days_nb"],true);}var _39=dj.byId("rolling_renewal_flag");if(_39){m.toggleFields(_39.get("checked"),["final_expiry_date","rolling_renewal_nb","rolling_cancellation_days","rolling_renew_on_code"],["rolling_renew_on_code","rolling_renewal_nb","rolling_cancellation_days"],true);}var _3a=dj.byId("rolling_renew_on_code");if(_3a){m.toggleFields(_3a.get("value")==="03",["rolling_day_in_month","rolling_renew_for_nb"],["rolling_renew_for_nb"],true);}var _3b=dj.byId("eucp_flag");if(_3b){m.toggleFields(_3b.get("checked"),null,["eucp_details"]);}var _3c=dj.byId("tenor_days_type")?dj.byId("tenor_days_type").get("value"):"";if(_3c){m.toggleFields(_3c==="99",null,["tenor_type_details"],true);m.setDraftTerm();}var _3d=dj.byId("issuing_bank_abbv_name");if(_3d){_3d.onChange();}if(_3d&&_3d.get("value")!==""&&dj.byId("stand_by_lc_code")&&dj.byId("stand_by_lc_code").get("value")!==""){_3d.set("disabled",true);}var _3e=dj.byId("issuing_bank_customer_reference");if(_3e){_3e.onChange();}var _3f=dj.byId("drawee_details_bank_name");if(_3f){_3f.onChange();}var _40=dj.byId("inco_term")?dj.byId("inco_term").get("value"):"";if(_40){m.toggleFields(_40,null,["inco_place"],false,true);}else{m.toggleFields(_40,null,["inco_place"],false,false);}var _41=dojo.subscribe(_1,function(){m.toggleFields(m._config.customerBanksMT798Channel[_3d]===true&&m.hasAttachments(),null,["delivery_channel"],false,false);});var _42=dj.byId("transport_mode_nosend");if(_42){var _43=_42.get("value");m.toggleFields(_43&&_43!=="AIRT"&&_43!=="SEAT"&&_43!=="RAIL"&&_43!=="ROAD"&&_43!=="MULT",null,["transport_mode_text_nosend"]);}var _44=dj.byId("transport_mode");if(_44&&_44.get("value")===""){_44.set("value",_42.get("value"));}var _45=dj.byId("standby_rule_code");if(_45){m.toggleFields((_45.get("value")=="99"),["standby_rule_other"],null);}m.setRenewalAmountOnFormLoad();m.toggleNarrativeDivStatus(true,"");if(dj.byId("ntrf_flag")&&dj.byId("narrative_transfer_conditions")){if(dj.byId("ntrf_flag").get("checked")){dj.byId("narrative_transfer_conditions").set("disabled",true);dj.byId("narrative_transfer_conditions").set("value","");document.getElementById("narrative_transfer_conditions_img").style.display="none";}else{dj.byId("narrative_transfer_conditions").set("disabled",false);document.getElementById("narrative_transfer_conditions_img").style.display="block";}}if(dj.byId("lc_exp_date_type_code")&&dj.byId("lc_exp_date_type_code").value=="02"){m.animate("fadeIn",d.byId("exp-event"));m.toggleRequired("exp_event",true);}else{m.animate("fadeOut",d.byId("exp-event"));m.toggleRequired("exp_event",false);}if(dj.byId("dec_amt")&&!isNaN(dj.byId("dec_amt").get("value"))){dj.byId("inc_amt").set("disabled",true);}if(dj.byId("inc_amt")&&!isNaN(dj.byId("inc_amt").get("value"))){dj.byId("dec_amt").set("disabled",true);}if(dj.byId("delv_org")&&dj.byId("delv_org_text")){if(dj.byId("delv_org").value==="99"||dj.byId("delv_org").value==="02"){dj.byId("delv_org_text").set("disabled",false);m.toggleRequired("delv_org_text",true);}else{dj.byId("delv_org_text").set("disabled",true);dj.byId("delv_org_text").set("value","");m.toggleRequired("delv_org_text",false);}}if(dj.byId("delivery_to")&&dj.byId("narrative_delivery_to")){if(dj.byId("delivery_to").get("value")==="04"){m.toggleFields((dj.byId("delivery_to").get("value")==="04"),null,["narrative_delivery_to"]);m.toggleRequired("narrative_delivery_to",false);dj.byId("narrative_delivery_to").set("value","");dj.byId("narrative_delivery_to").set("disabled",true);document.getElementById("narrative_delivery_to_img").style.display="none";}else{if(dj.byId("delivery_to").get("value")!==""){dj.byId("narrative_delivery_to").set("disabled",false);m.toggleRequired("narrative_delivery_to",true);document.getElementById("narrative_delivery_to_img").style.display="block";}}}if(dj.byId("inco_term_year")){m.getIncoYear();dijit.byId("inco_term_year").set("value",dj.byId("org_term_year").get("value"));}if(dj.byId("inco_term")){if(dj.byId("inco_term_year")&&dj.byId("inco_term_year").get("value")!=""){m.getIncoTerm();}dijit.byId("inco_term").set("value",dj.byId("org_inco_term").get("value"));}},beforeSaveValidations:function(){var _46=dj.byId("entity");var _47=dj.byId("fee_act_no");var _48=dj.byId("principal_act_no");if(_48&&_48.get("value")!==""){if(!m.validatePricipleAccount("")){m._config.onSubmitErrorMsg=m.getLocalization("invalidPrincipleAccountError",[_48.get("displayedValue")]);m.showTooltip(m.getLocalization("invalidPrincipleAccountError",[_48.get("displayedValue")]),_48.domNode);_48.focus();return false;}}if(_47&&_47.get("value")!==""){if(!m.validateFeeAccount("")){m._config.onSubmitErrorMsg=m.getLocalization("invalidFeeAccountError",[_47.get("displayedValue")]);m.showTooltip(m.getLocalization("invalidFeeAccountError",[_47.get("displayedValue")]),_47.domNode);_47.focus();return false;}}if(_46&&_46.get("value")===""){return false;}else{return true;}},beforeSubmitValidations:function(){var _49=["renew_on_code","adv_send_mode","applicant_name","applicant_address_line_1","applicant_address_line_2","applicant_dom","applicant_address_line_4","beneficiary_name","beneficiary_address_line_1","beneficiary_address_line_2","beneficiary_address_line_4","beneficiary_dom","beneficiary_country","beneficiary_reference","ship_from","ship_loading","ship_discharge","ship_to","part_ship_detl","tran_ship_detl","narrative_period_presentation","narrative_shipment_period","narrative_additional_amount","standby_rule_code","req_conf_party_flag","requested_confirmation_party_name","requested_confirmation_party_address_line_1","requested_confirmation_party_address_line_2","requested_confirmation_party_address_line_4","requested_confirmation_party_iso_code","drawee_details_bank_name","product_type_code","inco_place","amd_details"];var _4a=["irv_flag","ntrf_flag","renew_flag"];var _4b=["cfm_inst_code_1","cfm_inst_code_2","cfm_inst_code_3","open_chrg_brn_by_code_1","open_chrg_brn_by_code_2","corr_chrg_brn_by_code_1","corr_chrg_brn_by_code_2","cfm_chrg_brn_by_code_1","cfm_chrg_brn_by_code_2","amd_chrg_brn_by_code_1","amd_chrg_brn_by_code_3","amd_chrg_brn_by_code_4","cr_avl_by_code_1","cr_avl_by_code_2","cr_avl_by_code_3","cr_avl_by_code_4","cr_avl_by_code_5","tenor_type_1","tenor_type_2","tenor_type_3"];var _4c=["pstv_tol_pct","neg_tol_pct","lc_amt"];var _4d=["exp_date","last_ship_date"];if(m._config.displayMode==="edit"){var _4e=d.every(_4d,function(id){var _4f=dj.byId(id).get("value")+"";var _50=d.date.locale.parse(dj.byId("org_"+id).get("displayedValue"),{selector:"date",datePattern:m.getLocalization("g_strGlobalDateFormat")})+"";if(_4f==="null"||_4f===_50){return true;}return false;});var _51=d.every(_4c,function(id){var _52=dj.byId(id).get("value");var org=dj.byId("org_"+id);var _53="";if(org){_53=dj.byId("org_"+id).get("value");}if(isNaN(_52)||_52=="null"||_52=="undefined"){_52="";}if(_52==_53){return true;}return false;});var _54=[m._config.narrativeDescGoodsDataStore,m._config.narrativeDocsReqDataStore,m._config.narrativeAddInstrDataStore,m._config.narrativeSpBeneDataStore,m._config.narrativeSpRecvbankDataStore];var _55=false;for(var itr=0;itr<5;itr++){d.forEach(_54[itr],function(){if(!(_54[itr].length==0||_54[itr]==undefined)){_55=true;}});}var _56=m.compareTransactionMaster(_49,"TXT");var _57=m.compareTransactionMaster(_4a,"CHECK");var _58=m.compareTransactionMasterRadio(_4b);if(!_56&&!_57&&!_58&&_4e&&_51&&!_55){m._config.onSubmitErrorMsg=m.getLocalization("noAmendmentError");return false;}}if(dj.byId("lc_amt")){if(!m.validateAmount((dj.byId("lc_amt"))?dj.byId("lc_amt"):0)){m._config.onSubmitErrorMsg=m.getLocalization("amountcannotzero");dj.byId("lc_amt").set("value","");return false;}}if(dj.byId("adv_send_mode")&&dj.byId("adv_send_mode").get("value")==1){var _59=dj.byId("issuing_bank_abbv_name").get("value");var i,_5a=0,_5b=0,_5c=0,_5d="narrative-details-tabcontainer",_5e=true,_5f,_60=m._config.customerBanksMT798Channel[_59];var _61=dj.byId("swiftregexzcharValue").get("value");var _62=new RegExp(_61);m._config.isNarrativeZCharValidArray=[true,true,true,true,true];var _63=[0,0,0,0,0];m._config.isSingleNarrativeValid=[true,true,true,true,true];var _64=["tabNarrativeDescriptionGoods","tabNarrativeDocumentsRequired","tabNarrativeAdditionalInstructions","tabNarrativeSpecialBeneficiary","tabNarrativeSpecialReceivingBank"];if(document.getElementById("tabNarrativeDescriptionGoods").status==true){for(itr=0;itr<5;itr++){i=0;_5f=true;if(_54&&_54[itr]){d.forEach(_54[itr],function(){if(_54[itr][i]&&_54[itr][i]!==null&&_5f){_54[itr][i].content[0].replace(/&#xa;/g,"\n");_5c+=_54[itr][i].content[0].length;_5a+=_54[itr][i].text_size[0];_63[itr]+=_54[itr][i].text_size[0];_5f=_62.test(_54[itr][i].content[0]);m._config.isNarrativeZCharValidArray[itr]=_5f;}i++;});}if(!m._config.isNarrativeZCharValidArray[itr]||(dojo.some(_63,function(_65){return _65>(_60?792:800);}))){if(!m._config.isNarrativeZCharValidArray[itr]){m.toggleNarrativeDivStatus(m._config.isNarrativeZCharValidArray[itr],_64[itr]);}else{if(_63[itr]>(_60?792:800)){m._config.isSingleNarrativeValid[itr]=false;m.toggleNarrativeDivStatus(m._config.isSingleNarrativeValid[itr],_64[itr]);_5e=false;}}}}if(_5a>(_60?992:1000)){d.forEach(m._config.isSingleNarrativeValid,function(){m._config.isSingleNarrativeValid[_5b]=true;});m.toggleNarrativeDivStatus(false);_5e=false;}}else{if(_5a>(_60?992:1000)||document.getElementById("tabNarrativeDescriptionGoods").status==false){_5b=0;d.forEach(m._config.isSingleNarrativeValid,function(){m._config.isSingleNarrativeValid[_5b]=true;});if(document.getElementById("tabNarrativeDescriptionGoods").status==true){m.toggleNarrativeDivStatus(false);}_5e=false;}}if(!_5e||(dojo.some(m._config.isNarrativeZCharValidArray,function(_66){return _66==false;}))){if(m._config.isNarrativeZCharValidArray.indexOf(false)>3){_5d="narrative-special-payments-beneficiary-tabcontainer";}dojox.fx.smoothScroll({node:document.getElementById(_5d),win:window}).play();return false;}}if(dj.byId("req_conf_party_flag")&&dj.byId("req_conf_party_flag").get("value")!==""){if(dj.byId("req_conf_party_flag").get("value")==="Other"){if(!m.validateBankEntry("requested_confirmation_party")){m._config.onSubmitErrorMsg=m.getLocalization("requestedConfirmationPartyError");return false;}}}if(dj.byId("narrative_period_presentation_nosend")&&dj.byId("narrative_period_presentation_nosend").get("value")!==""){var _67=dj.byId("narrative_period_presentation_nosend").get("value");if(_67.indexOf("\n")!=-1){m._config.onSubmitErrorMsg=m.getLocalization("periodOfPresentaionError");return false;}}if(dj.byId("req_conf_party_flag")&&dj.byId("req_conf_party_flag").get("value")!==""){if(dj.byId("req_conf_party_flag").get("value")==="Other"){if(!m.validateBankEntry("requested_confirmation_party")){m._config.onSubmitErrorMsg=m.getLocalization("requestedConfirmationPartyError");return false;}}}var _68=dj.byId("rolling_day_in_month");if(dj.byId("lc_amt")){if(!m.validateAmount((dj.byId("lc_amt"))?dj.byId("lc_amt"):0)){m._config.onSubmitErrorMsg=m.getLocalization("amountcannotzero");dj.byId("lc_amt").set("value","");return false;}}if(_68&&_68.get("value")===0){m._config.onSubmitErrorMsg=m.getLocalization("dayInMonthZeroNotApplicableError");_68.set("value","");return false;}var _69=dj.byId("exp_date");var _6a=dj.byId("projected_expiry_date");var _6b=dj.byId("final_expiry_date");if(_6b){if(_69&&!m.compareDateFields(_69,_6b)){m._config.onSubmitErrorMsg=m.getLocalization("finalExpDateLessThanTransactionExpDtError",[_6b.get("displayedValue"),_69.get("displayedValue")]);m.showTooltip(m.getLocalization("finalExpDateLessThanTransactionExpDtError",[_6b.get("displayedValue"),_69.get("displayedValue")]),_6b.domNode);return false;}else{if(_6a&&!m.compareDateFields(_6a,_6b)){m._config.onSubmitErrorMsg=m.getLocalization("finalExpDateLessThanProjectedExpDtError",[_6b.get("displayedValue"),_6a.get("displayedValue")]);m.showTooltip(m.getLocalization("finalExpDateLessThanProjectedExpDtError",[_6b.get("displayedValue"),_6a.get("displayedValue")]),_6b.domNode);return false;}}}if(dj.byId("rolling_renewal_flag")&&dj.byId("rolling_renewal_nb")&&dj.byId("rolling_renewal_flag").get("checked")&&d.number.parse(dj.byId("rolling_renewal_nb").get("value"))===1){m._config.onSubmitErrorMsg=m.getLocalization("invalidNumberOfRollingRenewals");dj.byId("rolling_renewal_nb").focus();return false;}var _6c=dj.byId("principal_act_no");if(_6c&&_6c.get("value")!==""){if(!m.validatePricipleAccount()){m._config.onSubmitErrorMsg=m.getLocalization("invalidPrincipleAccountError",[_6c.get("displayedValue")]);m.showTooltip(m.getLocalization("invalidPrincipleAccountError",[_6c.get("displayedValue")]),_6c.domNode);_6c.focus();return false;}}var _6d=dj.byId("fee_act_no");if(_6d&&_6d.get("value")!==""){if(!m.validateFeeAccount()){m._config.onSubmitErrorMsg=m.getLocalization("invalidFeeAccountError",[_6d.get("displayedValue")]);m.showTooltip(m.getLocalization("invalidFeeAccountError",[_6d.get("displayedValue")]),_6d.domNode);_6d.focus();return false;}}return true;},beforeSubmit:function(){m.updateSubTnxTypeCode("lc");}});})(dojo,dijit,misys);dojo.require("misys.client.binding.trade.amend_si_swift2018_client");}