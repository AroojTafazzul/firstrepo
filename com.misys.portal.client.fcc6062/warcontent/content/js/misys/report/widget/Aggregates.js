/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.report.widget.Aggregates"]){dojo._hasResource["misys.report.widget.Aggregates"]=true;dojo.provide("misys.report.widget.Aggregates");dojo.experimental("misys.report.widget.Aggregates");dojo.require("misys.grid.GridMultipleItems");dojo.require("misys.report.widget.Aggregate");dojo.declare("misys.report.widget.Aggregates",[misys.grid.GridMultipleItems],{data:{identifier:"store_id",label:"store_id",items:[]},templatePath:null,templateString:dojo.byId("aggregates-template").innerHTML,dialogId:"aggregate-dialog-template",xmlTagName:"aggregates",xmlSubTagName:"aggregate",gridColumns:["column","type","eqv_cur_code","label_en","label_fr","label_us","label_it","label_nl","label_pt","label_br","label_de","label_zh","label_ca","label_es","label_th"],propertiesMap:{column:{_fieldName:"aggregate_column"},type:{_fieldName:"aggregate_type"},eqv_cur_code:{_fieldName:"aggregate_eqv_cur_code"},label_en:{_fieldName:"aggregate_label_en"},label_fr:{_fieldName:"aggregate_label_fr"},label_us:{_fieldName:"aggregate_label_us"},label_it:{_fieldName:"aggregate_label_it"},label_nl:{_fieldName:"aggregate_label_nl"},label_pt:{_fieldName:"aggregate_label_pt"},label_br:{_fieldName:"aggregate_label_br"},label_de:{_fieldName:"aggregate_label_de"},label_zh:{_fieldName:"aggregate_label_zh"},label_ca:{_fieldName:"aggregate_label_ca"},label_es:{_fieldName:"aggregate_label_es"},label_th:{_fieldName:"aggregate_label_th"}},layout:[{name:"Column",field:"column",formatter:misys.getColumnDecode,width:"40%"},{name:"Type",field:"type",formatter:misys.getAggregateOperatorDecode,width:"40%"},{name:" ",field:"actions",formatter:misys.grid.formatReportActions,width:"10%"}],startup:function(){if(this._started){return;}this.dataList=[];if(this.hasChildren()){dojo.forEach(this.getChildren(),function(_1){var _2={column:_1.get("column"),type:_1.get("type"),eqv_cur_code:_1.get("eqv_cur_code")};for(var i=0,_3=languages.length;i<_3;i++){_2["label_"+languages[i]]=_1.get("label_"+languages[i]);}this.dataList.push(_2);},this);}this.inherited(arguments);},openDialogFromExistingItem:function(_4,_5){misys.dialog.isActive=false;var _6=misys.retrieveCandidate();misys.setAggregateColumns(_6);misys.setAggregatesList(_4[0].column[0]);this.inherited(arguments);misys.toggleCurrencySection();var _7=dijit.byId("aggregate_eqv_cur_code").get("value");dijit.byId("aggregate_use_product_currency").set("checked",(_7===""));},addItem:function(_8){misys.dialog.isActive=false;this.inherited(arguments);var _9=misys.retrieveCandidate();misys.setAggregateColumns(_9);misys.setAggregatesList();misys.toggleCurrencySection();document.body.style.overflow="hidden";}});}