/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.report.widget.Entities"]){dojo._hasResource["misys.report.widget.Entities"]=true;dojo.provide("misys.report.widget.Entities");dojo.experimental("misys.report.widget.Entities");dojo.require("misys.grid.GridMultipleItems");dojo.require("misys.report.widget.Entity");dojo.declare("misys.report.widget.Entities",[misys.grid.GridMultipleItems],{data:{identifier:"store_id",label:"store_id",items:[]},templatePath:null,templateString:dojo.byId("entities-template").innerHTML,dialogId:"entity-dialog-template",xmlTagName:"entities",xmlSubTagName:"entity",gridColumns:["abbv_name"],propertiesMap:{abbv_name:{_fieldName:"entity"}},layout:[{name:"Abbreviated Name",field:"abbv_name",width:"90%",noresize:true},{name:" ",field:"actions",formatter:misys.grid.formatReportActions,width:"5%",noresize:true},{name:"Id",field:"store_id",headerStyles:"display:none",cellStyles:"display:none",noresize:true}],startup:function(){this.dataList=[];if(this.hasChildren()){dojo.forEach(this.getChildren(),function(_1){var _2={abbv_name:_1.get("abbv_name")};this.dataList.push(_2);},this);}this.inherited(arguments);},openDialogFromExistingItem:function(_3,_4){this.inherited(arguments);},addItem:function(_5){this.inherited(arguments);},updateData:function(){var _6=true;if(this.grid&&this.grid.store&&this.grid.store._arrayOfAllItems&&this.grid.store._arrayOfAllItems.length>0){var _7=this.dialog.value.entity;dojo.forEach(this.grid.store._arrayOfAllItems,function(_8){if(_8&&_8.abbv_name&&_7===_8.abbv_name[0]){_6=false;}});}if(!_6){misys.dialog.show("ERROR",misys.getLocalization("duplicateEntity"));return;}this.inherited(arguments);}});}