/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.report.widget.Columns"]){dojo._hasResource["misys.report.widget.Columns"]=true;dojo.provide("misys.report.widget.Columns");dojo.experimental("misys.report.widget.Columns");dojo.require("misys.grid.GridMultipleItems");dojo.require("misys.report.widget.Column");dojo.declare("misys.report.widget.Columns",[misys.grid.GridMultipleItems],{data:{identifier:"store_id",label:"store_id",items:[]},templatePath:null,templateString:dojo.byId("columns-template").innerHTML,dialogId:"column-dialog-template",xmlTagName:"columns",xmlSubTagName:"column",gridColumns:["column","label_en","label_ar","label_fr","label_us","label_it","label_nl","label_pt","label_br","label_de","label_zh","label_ca","label_es","label_th","alignment","width","eqv_cur_code","open_details_window","abbreviation","computed_field_id","operation","operand"],propertiesMap:{column:{_fieldName:"column"},label_en:{_fieldName:"label_en"},label_fr:{_fieldName:"label_fr"},label_us:{_fieldName:"label_us"},label_it:{_fieldName:"label_it"},label_nl:{_fieldName:"label_nl"},label_pt:{_fieldName:"label_pt"},label_br:{_fieldName:"label_br"},label_de:{_fieldName:"label_de"},label_zh:{_fieldName:"label_zh"},label_ca:{_fieldName:"label_ca"},label_es:{_fieldName:"label_es"},label_th:{_fieldName:"label_th"},label_ar:{_fieldName:"label_ar"},alignment:{_fieldName:"alignment"},width:{_fieldName:"width"},eqv_cur_code:{_fieldName:"eqv_cur_code"},open_details_window:{_fieldName:"open_details_window"},abbreviation:{_fieldName:"abbreviation"},computed_field_id:{_fieldName:"computed_field_id"},operation:{_fieldName:"operation"},operand:{_fieldName:"operand"}},layout:[{name:"Description",get:misys.getDisplayedColumnLabel,width:"45%"},{name:"Column",get:misys.getDisplayedColumn,width:"45%"},{name:" ",field:"actions",formatter:misys.grid.formatReportActions,width:"10%"}],startup:function(){if(this._started){return;}this.layout[0].field="label_"+language;this.dataList=[];if(this.hasChildren()){dojo.forEach(this.getChildren(),function(_1){var _2={column:_1.get("column"),alignment:_1.get("alignment"),width:_1.get("width"),eqv_cur_code:_1.get("eqv_cur_code"),abbreviation:_1.get("abbreviation"),computed_field_id:_1.get("computed_field_id"),operation:_1.get("operation"),operand:_1.get("operand")};for(var i=0,_3=languages.length;i<_3;i++){_2["label_"+languages[i]]=_1.get("label_"+languages[i]);}this.dataList.push(_2);},this);}this.inherited(arguments);},openDialogFromExistingItem:function(_4,_5){misys.dialog.isActive=false;var _6=_4[0];this.inherited(arguments);var _7=misys.retrieveCandidate();misys.setColumns("column",_7);var _8=dojo.isArray(_6.computed_field_id)?_6.computed_field_id[0]:_6.computed_field_id;dijit.byId("computed_field").set("checked",_8);dojo.byId("computation_section").style.display=(_8?"block":"none");if(_8){misys.dialog.isActive=true;misys.setOperatorsList(_6);misys.setOperands(_6);}misys.dialog.isActive=false;},addItem:function(_9){misys.dialog.isActive=false;if(dojo.byId("eqv_currency_section")){dojo.attr("eqv_currency_section","style","display:"+"none");}this.inherited(arguments);var _a=misys.retrieveCandidate();misys.setColumns("column",_a);misys.setOperatorsList();misys.setOperands();dijit.byId("computed_field").set("checked",false);dojo.byId("computation_section").style.display="none";document.body.style.overflow="hidden";}});}