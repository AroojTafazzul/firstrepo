/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.report.widget.Filter"]){dojo._hasResource["misys.report.widget.Filter"]=true;dojo.provide("misys.report.widget.Filter");dojo.experimental("misys.report.widget.Filter");dojo.require("dijit._Templated");dojo.require("dijit._Container");dojo.require("misys.layout.SingleItem");dojo.require("misys.layout.SimpleItem");dojo.declare("misys.report.widget.Filter",[dijit._Templated,misys.layout.SingleItem,misys.layout.SimpleItem],{templatePath:null,templateString:dojo.byId("filter-template").innerHTML,widgetsInTemplate:true,name:"",xmlTagName:"filter",startup:function(){this.name=this.id;this.inherited(arguments);if(this.createdByUser){var _1=new misys.report.widget.Criteria({dialogAddItemTitle:misys.getLocalization("addCriterium"),dialogUpdateItemTitle:misys.getLocalization("updateCriterium")},document.createElement("div"));dojo.place(_1.domNode,this.criteriaNode);_1.startup();}},buildRendering:function(){this._attachPoints=[];var _2=dijit._Templated.getCachedTemplate(this.templatePath,this.templateString,this._skipNodeCache);var _3;if(dojo.isString(_2)){_3=dojo._toDom(this._stringRepl(_2));if(_3.nodeType!=1){throw new Error("Invalid template: "+_2);}}else{_3=_2.cloneNode(true);}this.domNode=_3;this._attachTemplateNodes(_3);if(this.widgetsInTemplate){var _4=dojo.parser,_5,_6;if(_4._query!="[dojoType]"){_5=_4._query;_6=_4._attrName;_4._query="[dojoType]";_4._attrName="dojoType";}var cw=(this._startupWidgets=dojo.parser.parse(_3,{noStart:!this._earlyTemplatedStartup}));if(_5){_4._query=_5;_4._attrName=_6;}this._supportingWidgets=dijit.findWidgets(_3);this._attachTemplateNodes(cw,function(n,p){return n[p];});}this._fillContentNodes(dojo.query("[dojotype='misys.report.widget.Criteria']",this.srcNodeRef),this.criteriaNode);},_fillContentNodes:function(_7,_8){if(_7&&_7 instanceof Array){_7=_7[0];}if(_7&&_8){_8.appendChild(_7);}},getChildren:function(){return dojo.query("> [widgetId]",this.criteriaNode).map(dijit.byNode);},toXML:function(){var _9=["<",this.xmlTagName,">"];this.getChildren().forEach(function(_a){_9.push(_a.toXML());});_9.push("</",this.xmlTagName,">");return _9.join("");}});}