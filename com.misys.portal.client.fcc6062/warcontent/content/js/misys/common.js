/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.common"]){dojo._hasResource["misys.common"]=true;var originalOperationValue="";var consoleMSG="widget invalid: ";var attachmntFile="attachment-file";var tabContainr=".tabcontainer";var colbortionWindow="#collaborationWindow";var ariaDescrib="aria-describedby";var langMenu="#languagesMenu .dijitReset.dijitStretch.dijitButtonContents.dijitDownArrowButton";var bookmrkMenu="#bookmarkMenu .dijitReset.dijitStretch.dijitButtonContents.dijitDownArrowButton";var popuMenuItem=".dijitReset.dijitInline.dijitMenuItem.dijitMenuItemLabel.portalPopupMenuBarItem";var h1portletTitle="h1.portlet-title";var h2portletTitle="h2.portlet-title";var homepagePortlet=".homepage .portlet";var inlneBlock="inline-block";var prductCode="&productcode=";var refrnceId="&referenceid=";var entitlementCod="&entitlementcode=";var entitlementDescp="&entitlementdescription=";var scrhCrieteria="#searchCriteria > div > p";var GTPRootPotlet="#GTPRootPortlet > div.portlet-section-header.portlet-font > h1";var reportingPopup="/screen/ReportingPopup";var footerHtml="footerHtml";dojo.provide("misys.common");dojo.require("misys.grid._base");dojo.require("misys.widget.Bookmark");dojo.require("misys.binding.SessionTimer");dojo.require("dojox.html.entities");dojo.require("dojox.fx.scroll");dojo.require("dojox.NodeList.delegate");dojo.require("dijit.Editor");dojo.require("dijit.layout.TabContainer");dojo.require("misys.form.SimpleTextarea");dojo.require("dijit.form.MultiSelect");dojo.require("dijit.form.Form");dojo.require("dojo.data.ItemFileReadStore");dojo.require("misys.binding.AsyncMessage");dojo.require("dojox.lang.aspect");dojo.require("dojox.collections.ArrayList");dojo.require("dojo.io.iframe");dojo.require("dojo.NodeList-traverse");dojo.extend(dijit.Editor,{toXML:function(){var _1=this.get("value").replace("<br _moz_editor_bogus_node=\"TRUE\" />","");_1=dojo.trim(_1);return _1!==""?"<![CDATA["+dojo.trim(dojox.html.entities.encode(_1,dojox.html.entities.html))+"]]>":"";}});dojo.extend(misys.form.SimpleTextarea,{toXML:function(){var _2=this.get("value");_2=dojo.trim(_2);return _2!==""?"<![CDATA["+dojo.trim(_2)+"]]>":"";}});dojo.extend(dijit.form.MultiSelect,{_getValueAttr:function(){return dojo.query("option",this.containerNode).map(function(n){return n.value;});}});function getErrorSection(){var _3=0,_4=0;var _5=[];misys._config=misys._config||{};dojo.query(".toplevel-header").forEach(function(_6){var _7;var i;var _8;var _9=_6.childNodes;for(i=0;i<_9.length;i++){_7=_9[i];if(_7.className==="toc-item"){_8=_7.firstChild.innerHTML;}else{if(_7.className==="fieldset-content"){var _a=[];dojo.forEach(_7.querySelectorAll("*"),function(_b){var _c=dijit.byId(_b.id);if(_c){_c._hasBeenBlurred=true;var _d=_c.disabled||!_c.validate||_c.validate();if(!_d){var _e={"widget":_c};var _f=_c.declaredClass;_a.push(_e);}}});}}if(_8&&_a&&_a.length>0){var _10={"header":_8,"widgetArray":_a,"child":_7};_5.push(_10);}}});if(_5.length>0){var _11=dojo.byId("errorContent");if(_11){_11.innerHTML="";var _12=dojo.create("ul");dojo.forEach(_5,function(_13){_13.child.id="mylink"+_4++;var _14="mylink"+_3++;var li=dojo.create("li");var a=dojo.create("a",{href:"#"+_14,id:"goto_"+_14,innerHTML:_13.header},li);dojo.place(li,_12);});dojo.empty(_11);dojo.style(dojo.byId("errorSection"),"display","block");dojo.place(_12,_11);}}else{if(dojo.byId("errorSection")){dojo.style(dojo.byId("errorSection"),"display","none");}}};dojo.extend(dijit.form.Form,{validate:function(){var _15=false;misys._config=misys._config||{};return dojo.every(dojo.map(this.getDescendants(),function(_16){_16._hasBeenBlurred=true;var _17=_16.disabled||!_16.validate||_16.validate();if(!_17){}if(!_17&&!_15){if(_16.hasOwnProperty("parentTab")){dijit.byId(_16.get("tabContainer")).selectChild(_16.get("parentTab"));}var _18=_16.focus||function(){};if(dojo.isIE<=6||misys._config.popupType){dojo.window.scrollIntoView(_16.containerNode||_16.domNode);_18();}else{dojox.fx.smoothScroll({node:_16.containerNode||_16.domNode,win:window,onEnd:function(){_18();}}).play();}_15=true;}return _17;}),function(_19){return _19;});}});(function(d,dj,m){var _1a=".validate",_1b="realform",_1c="transactionDetails",_1d=attachmntFile,_1e="attachment-fileinvoice",_1f="attachment-filepurchaseorder",_20="attachment-filepurchaseorderupload",_21="files_master_table",_22="attachment-fileOTHER",_23=".swift",_24=100,_25="popup_fakeform1",_26=".subscribeTopic",_27="subscribe_topic",_28="tabChangeStyle",_29=tabContainr,_2a=".dojoxGrid",_2b="TransactionSearchForm",_2c="export_list",_2d="filename",_2e="collaborationWindowContainer",_2f=".toc-item",_30=5000,_31=".chartImg",_32="400px",_33="600",_34="800",_35=500,_36,_37,_38,_39;function _3a(_3b){var _3c=[function(){return true;}],_3d=_3b,_3e,_3f,_40,_41,_42,_43,_44;switch(_3b){case "VALIDATE":_3c.push(misys.validateSummitTransaction);_3e=m.getLocalization("validatingTransactionMessage");break;case "SAVE":_3c.push(_81,m.beforeSaveValidations);if(m.client&&m.client.beforeSaveValidations){_3c.push(m.client.beforeSaveValidations);}_40=m.getLocalization("mandatoryEntityMessage");var _45=dj.byId("product_code")?dj.byId("product_code").get("value"):null;if(_45!==null){var _46=dj.byId(_45.toLowerCase()+"_cur_code");}var _47=_46?_46.get("value"):"";if(_46&&_47!==""&&_46.state==="Error"){_46.set("value","");}_3e=m.getLocalization("savingTransactionMessage");_3f=function(){dijit.byId("entity")?dijit.byId("entity").focus():null;if(misys._config.swiftError&&misys._config.swiftError.length!==0){for(var i in misys._config.swiftError){var _48=dijit.byId(m._config.swiftError[i]);_48.set("state","Error");_48._setStateClass();dj.setWaiState(_48.focusNode,"invalid","true");}_48=dijit.byId(m._config.swiftError[0]);if(_48.hasOwnProperty("parentTab")){dj.byId(_48.get("tabContainer")).selectChild(_48.get("parentTab"));_7a();}dojox.fx.smoothScroll({node:_48.containerNode||_48.domNode,win:window}).play();}};break;case "ADD_BULK":_3c.push(_81,_72,m.beforeSubmitValidations);if(m.client&&m.client.beforeSubmitValidations){_3c.push(m.client.beforeSubmitValidations);}_40=m.getLocalization("mandatoryFieldsToSubmitError");_3e=m.getLocalization("validatingAndSubmittingMessage");_3f=function(){if(d.byId(_1c)){m.toggleTransaction(true,false,function(){_72(true);});}else{_72(true);}if(misys._config.swiftError&&misys._config.swiftError.length!==0){for(var i in misys._config.swiftError){var _49=dijit.byId(m._config.swiftError[i]);_49.set("state","Error");_49._setStateClass();dj.setWaiState(_49.focusNode,"invalid","true");}_49=dijit.byId(m._config.swiftError[0]);dojox.fx.smoothScroll({node:_49.containerNode||_49.domNode,win:window}).play();}};break;case "UPDATE_BULK":_3c.push(_81,_72,m.beforeSubmitValidations);if(m.client&&m.client.beforeSubmitValidations){_3c.push(m.client.beforeSubmitValidations);}_40=m.getLocalization("mandatoryFieldsToSubmitError");_3e=m.getLocalization("validatingAndSubmittingMessage");_3f=function(){if(d.byId(_1c)){m.toggleTransaction(true,false,function(){_72(true);});}else{_72(true);}if(misys._config.swiftError&&misys._config.swiftError.length!==0){for(var i in misys._config.swiftError){var _4a=dijit.byId(m._config.swiftError[i]);_4a.set("state","Error");_4a._setStateClass();dj.setWaiState(_4a.focusNode,"invalid","true");}_4a=dijit.byId(m._config.swiftError[0]);dojox.fx.smoothScroll({node:_4a.containerNode||_4a.domNode,win:window}).play();}};break;case "SYSTEM_SUBMIT":_3d="SUBMIT";_3c.push(_72,m.beforeSubmitValidations);if(m.client&&m.client.beforeSubmitValidations){_3c.push(m.client.beforeSubmitValidations);}_40=m.getLocalization("mandatoryFieldsToSubmitError");_3e=m.getLocalization("validatingAndSubmittingMessage");_3f=function(){setTimeout(function(){_72(true);},dj.defaultDuration);};break;case "SUBMIT":_3c.push(_81,_72,_7b,m.beforeSubmitValidations);if(m.client&&m.client.beforeSubmitValidations){_3c.push(m.client.beforeSubmitValidations);}_40=m.getLocalization("mandatoryFieldsToSubmitError");_3e=m.getLocalization("validatingAndSubmittingMessage");if(dj.byId("return_comments")){dj.byId("return_comments").set("required",false);}getErrorSection();_3f=function(){_72(true);if(misys._config.swiftError&&misys._config.swiftError.length!==0){for(var i in misys._config.swiftError){var _4b=dijit.byId(m._config.swiftError[i]);_4b.set("state","Error");_4b._setStateClass();dj.setWaiState(_4b.focusNode,"invalid","true");}_4b=dijit.byId(m._config.swiftError[0]);if(_4b.hasOwnProperty("parentTab")){dj.byId(_4b.get("tabContainer")).selectChild(_4b.get("parentTab"));_7a();}if(d.byId(_1c)){m.toggleTransaction(true,false,function(){dojox.fx.smoothScroll({node:_4b.containerNode||_4b.domNode,win:window}).play();});}else{dojox.fx.smoothScroll({node:_4b.containerNode||_4b.domNode,win:window}).play();}}};break;case "SAVE_TEMPLATE":var _4c=dj.byId("template_id"),_4d=_4c.get("value");if(_4d.indexOf("<")!==-1){_4d=_4d.replaceAll("<","&lt;");}if(misys._config.isMultiBank){var _4e=dj.byId("bk_type");var _4f=dj.byId("bk_type_hidden");var _50=dj.byId("payroll_type");var _51=dj.byId("payroll_type_hidden");if(_4e&&_4e.get("value")===""&&_4f&&_4f.get("value")!==""){_4e.set("value",_4f.get("value"));}if(_50&&_50.get("value")===""&&_51&&_51.get("value")!==""){_50.set("value",_51.get("value"));}}_3e=m.getLocalization("savingTemplateMessage",[_4d]);_40=m.getLocalization("mandatoryTemplateFieldError");_3c.push(function(){if(_4c.get("value")===""){_40=m.getLocalization("mandatoryTemplateFieldError");return false;}return true;});_3f=function(){_4c.focus();};break;case "SAVE_REPORT_TEMPLATE":_3d="SAVE_TEMPLATE";_3c.push(_72);_40=m.getLocalization("mandatoryFieldsToSubmitError");_3e=m.getLocalization("validatingAndSubmittingMessage");_3f=function(){setTimeout(function(){_72(true);},dj.defaultDuration);};break;case "CANCEL":document.location.href=m.onCancelNavigation();return;break;case "CANCEL_BULK_TRANSACTION":var _52=dj.byId("ref_id").get("value");var _53=["/screen/BulkScreen?referenceid=",_52,"&mode=CANCEL"];window.location.href=misys.getServletURL(_53.join(""));return;break;case "CANCEL_BULK":var _54=dj.byId("bulk_ref_id").get("value");var _55=dj.byId("bulk_tnx_id").get("value");var _56=dj.byId("ref_id").get("value");var _57=dj.byId("tnx_id").get("value");var _58=["/screen/BulkScreen?referenceid=",_54,"&tnxid=",_55,"&childrefid=",_56,"&childtnxid=",_57,"&tnxtype=01&mode=DRAFT"];window.location.href=misys.getServletURL(_58.join(""));return;break;case "RETURN":_41=dj.byId("return_comments");if(_41&&dojo.string.trim(_41.get("value"))===""){_41.set("value","");_41.set("required",true);if(dj.byId("fakeform1")){dj.byId("fakeform1").validate();}_40=m.getLocalization("requiredToolTip");_41.focus();return;}else{if(_41&&dojo.string.trim(_41.get("value"))!==""){_41.set("value",dojo.string.trim(_41.get("value")));}}break;case "REJECT":_3d="REJECT";if(dj.byId("reject_comments")){_42=dj.byId("reject_comments");if(_42&&dojo.string.trim(_42.get("value"))===""){_42.set("required",true);_40=m.getLocalization("requiredToolTip");_42.focus();return;}}if(dj.byId("free_format_text")){_43=dj.byId("free_format_text");if(_43&&dojo.string.trim(_43.get("value"))===""){_43.set("required",true);_40=m.getLocalization("requiredToolTip");_43.focus();return;}}_3e=m.getLocalization("rejectingTransactionMessage");break;case "RETURN_TRANSACTION":_3d="RETURN_TRANSACTION";_3e=m.getLocalization("returningTransactionMessage");_41=dj.byId("return_comments");if(_41){if(_41&&_41.get("value")===""){_41.set("required",true);dj.byId("fakeform1").validate();_40=m.getLocalization("requiredToolTip");_41.focus();return;}else{var _59=dojo.string.trim(dj.byId("return_comments").get("value"));if(_59===""){dj.byId("return_comments").set("value",_59);_41.set("required",true);dj.byId("fakeform1").validate();_40=m.getLocalization("requiredToolTip");_41.focus();return;}}}break;case "AUTO_FORWARD_SUBMIT":_3d="AUTO_FORWARD_SUBMIT";if(m.client&&m.client.beforeSubmitValidations){_3c.push(m.client.beforeSubmitValidations);}_3e=m.getLocalization("submitAutoForwardMsg");break;case "LEGAL_TEXT_SUBMIT":_3d="SUBMIT";if(m.client&&m.client.beforeSubmitValidations){_3c.push(m.client.beforeSubmitValidations);}_3e=m.getLocalization("validatingAndSubmittingMessage");break;case "DRAFT":_3d="DRAFT";_3c.push(m.beforeSaveValidations);if(m.client&&m.client.beforeSaveValidations){_3c.push(m.client.beforeSaveValidations);}break;case "MAKER_SUBMIT":_3d="SUBMIT";_3c.push(_81,_72,m.beforeSubmitValidations);if(m.client&&m.client.beforeSubmitValidations){_3c.push(m.client.beforeSubmitValidations);}_40=m.getLocalization("mandatoryFieldsToSubmitError");_3e=m.getLocalization("validatingAndSubmittingMessage");_3f=function(){_72(true);if(misys._config.swiftError&&misys._config.swiftError.length!==0){for(var i in misys._config.swiftError){var _5a=dijit.byId(m._config.swiftError[i]);_5a.set("state","Error");_5a._setStateClass();dj.setWaiState(_5a.focusNode,"invalid","true");}_5a=dijit.byId(m._config.swiftError[0]);dojox.fx.smoothScroll({node:_5a.containerNode||_5a.domNode,win:window}).play();}};break;case "RESUBMIT":_3d="SUBMIT";_3e=m.getLocalization("resubmitMessage");break;case "MAKER_BENE_FILE_UPLOAD_SUBMIT":_3d="SUBMIT";_3c.push(_81,_72,m.beforeSubmitValidations);if(m.client&&m.client.beforeSubmitValidations){_3c.push(m.client.beforeSubmitValidations);}_40=m.getLocalization("mandatoryFieldsToSubmitError");_3e=m.getLocalization("validatingAndSubmittingMessage");_3f=function(){_72(true);if(misys._config.swiftError&&misys._config.swiftError.length!==0){for(var i in misys._config.swiftError){var _5b=dijit.byId(m._config.swiftError[i]);_5b.set("state","Error");_5b._setStateClass();dj.setWaiState(_5b.focusNode,"invalid","true");}_5b=dijit.byId(m._config.swiftError[0]);dojox.fx.smoothScroll({node:_5b.containerNode||_5b.domNode,win:window}).play();}};break;case "MAKER_BENE_SUBMIT":_3d="SUBMIT";_3c.push(_81,_72,m.beforeSubmitValidations);if(m.client&&m.client.beforeSubmitValidations){_3c.push(m.client.beforeSubmitValidations);}_40=m.getLocalization("mandatoryFieldsToSubmitError");_3e=m.getLocalization("validatingAndSubmittingMessage");_3f=function(){_72(true);if(misys._config.swiftError&&misys._config.swiftError.length!==0){for(var i in misys._config.swiftError){var _5c=dijit.byId(m._config.swiftError[i]);_5c.set("state","Error");_5c._setStateClass();dj.setWaiState(_5c.focusNode,"invalid","true");}_5c=dijit.byId(m._config.swiftError[0]);dojox.fx.smoothScroll({node:_5c.containerNode||_5c.domNode,win:window}).play();}};break;default:break;}if(_3e&&_3e!==""){m.dialog.show("PROGRESS",_3e);}if((d.every(_3c,function(f){return f();}))||(dj.byId("tnxtype")&&dj.byId("tnxtype").get("value")==="55")){var _5d=dj.byId("realform_operation");if(_5d&&_5d.get("value")===""){_5d.set("value",_3d);}else{if(_3d!==""&&(_3d==="CHECKER_BENE_SUBMIT"||_3d==="CHECKER_BENE_FILE_UPLOAD_SUBMIT")){_5d.set("value","APPROVE_FEATURES");}}_69();if(_3b==="SAVE_TEMPLATE"&&!_102(dijit.byId("template_id"))){m.dialog.show("CONFIRMATION",m.getLocalization("nonUniqueTemplateIDError"),"",function(){if(m.isFormDirty&&m.isFormDirty===true){m.isFormDirty=false;}dj.byId("TransactionData").set("value",m.formToXML());dj.byId("realform").submit();});return;}var _5e=dj.byId("transaction_confirmation_details");if(_5e&&_5e.get("value")==="Y"&&(_3b==="SUBMIT"||_3b==="AUTO_FORWARD_SUBMIT")){m.checkAndShowTnxConfirmationDetailsDialog();}else{if(_3b==="SUBMIT"||_3b==="MAKER_SUBMIT"||_3b==="LEGAL_TEXT_SUBMIT"||_3b==="AUTO_FORWARD_SUBMIT"||_3b==="APPROVE"||_3b==="REJECT"||_3b==="RETURN_TRANSACTION"||_3b==="REVERT"||_3b==="RETURN"||_3b==="DELETE"||_3b==="SYSTEM_SUBMIT"||_3b==="RESUBMIT"||_3b==="CHECKER_BENE_FILE_UPLOAD_SUBMIT"||_3b==="CHECKER_BENE_SUBMIT"||_3b==="MAKER_BENE_FILE_UPLOAD_SUBMIT"||_3b==="MAKER_BENE_SUBMIT"){m.performReauthentication();}else{if(m.isFormDirty&&m.isFormDirty===true){m.isFormDirty=false;}dj.byId("TransactionData").set("value",m.formToXML());dj.byId(_1b).submit();}}}else{var _5f=m._config.holidayCutOffEnabled;var _60=m._config.legalTextEnabled;if(_5f&&_5f===true){m._config.holidayCutOffEnabled=false;}else{if(_60&&_60==true){m._config.legalTextEnabled=false;}else{var _61=m._config.onSubmitErrorMsg;_40=(_61&&_61!=="")?_61:_40;m._config.onSubmitErrorMsg="";if(_40&&_40!==""){m.dialog.show("ERROR",_40,"",_3f);}}}}};function _62(_63){var _64=[function(){return true;}],_65=_63,_66,_67;_64.push(m.beforeSaveValidations);_67=m.getLocalization("mandatoryEntityMessage");_66=function(){dijit.byId("entity")?dijit.byId("entity").focus():null;};if(d.every(_64,function(f){return f();})){var _68=dj.byId("realform_operation");if(_68.get("value")===""){_68.set("value",_65);}_69();_67="";dj.byId("TransactionData").set("value",m.formToXML());}else{var _6a=m._config.holidayCutOffEnabled;if(_6a&&_6a===true){m._config.holidayCutOffEnabled=false;}else{var _6b=m._config.onSubmitErrorMsg;_67=(_6b&&_6b!=="")?_6b:_67;m._config.onSubmitErrorMsg="";if(_67&&_67!==""){m.dialog.show("ERROR",_67,"",_66);}}}return _67;};function _6c(_6d,_6e){m.dialog.show("PROGRESS",m.getLocalization("validatingAndSubmittingMessage"),"",null,function(){setTimeout(function(){m.xhrPost({form:_6d,load:function(_6f,_70){var _71=_6f.substring(_6f.indexOf("<div id='GTPRootPortlet' class='portlet'>"));_71=_71.substring(_71.indexOf("<div class='portlet-font portlet-section-body'><p>"));_71=_71.substring(_71.indexOf("<p>"),_71.indexOf("</div>"));dj.byId("alertDialog").hide();m.dialog.clear(d.byId(m._config.popupType+"data"),dj.byId("contentPane"),_6e,_71);},contentType:""});},1000);});};function _72(_73,_74){var _75=(_74||d.query(_1a)).reverse(),_76=dj.byId("draft_term"),_77=true;if(_76){_76.validate();}d.forEach(_75,function(_78){var _79=dj.byId(_78.id);if(_79._getState()!==""||_79.state!==""){if(_73){_79.validate();}_77=false;}});if(!_77&&_73){_7a();}return _77;};function _7b(){var _7c=dj.byId(_1d);var _7d=dj.byId("delivery_channel");var _7e=false;if(_7d&&(_7d.get("value")=="FACT")&&_7c&&_7c.grid.selection&&_7c.fileActVisible){d.forEach(_7c.grid.selection.getSelected(),function(_7f,_80){if(_7f&&_7f!=null){_7e=true;}});}else{_7e=true;}if(!_7e){m._config.onSubmitErrorMsg=m.getLocalization("selectAtleastOneFileForFileAct");}return _7e;};function _81(){var _82=dj.byId("adv_send_mode");var _83,_84,_85=false,_86=false,_87=false;var _88=false;var _89=false;var _8a;if(document.getElementById("_userType")){_8a=document.getElementById("_userType").getAttribute("value");}misys._config=misys._config||{};misys._config.swiftRelatedSections=misys._config.swiftRelatedSections||[];dojo.mixin(misys._config,{swiftError:new Array()});var _8b=false;var _8c=true;if(m._config.isBank){if(m._config.isBank===true){_8b=true;_8c=false;}}if((_82&&_82.get("value")==="01")||m._config.forceSWIFTValidation){if(_8c||((_8b&&misys._config.productCode!="SR")&&(_8b&&misys._config.productCode!="EL"))){var _8d=[];misys._config.swiftRelatedSections.forEach(function(_8e){var _8f=dj.byId(_8e.concat("_name"));var _90=dj.byId(_8e.concat("_address_line_4"));if(_8f){if(!_99(_8f)){_8d.push(_8f);_86=true;}}if(_90&&_90.get("value")!==""){if(_8c||((_8b&&misys._config.productCode!="SR")&&(_8b&&misys._config.productCode!="EL"))){_8d.push(_90);_87=true;}}});d.query(_23).forEach(function(_91){var _92=dj.byId(_91.getAttribute("widgetid"));var _93=misys._config.productCode;var _94=dj.byId("is798")?dj.byId("is798").get("value"):"";m._config.is798=_94;if((_92&&_92.id!="cust_ref_id")||(_92&&_92.id=="cust_ref_id"&&misys._config.is798=="Y")){_92.onBlur(_92);if(!_9c(_92)&&!(_93!="LC"||_93!="SI"||_93!="EL"||_93!="SR")){m.showTooltip(m.getLocalization("invalidSWIFTFieldSizeError"),_91);_8d.push(_92);m.connect(_92,"onBlur",function(){m.setFieldState(this,_9c(this));});_84=true;}else{if(!_a5(_92)&&_92.id!="template_id"){_8d.push(_92);m.connect(_92,"onBlur",function(){m.setFieldState(this,_a5(this));});_83=true;}else{if(m._config.swift2018Enabled&&_97(_91)&&!_ad(_92)){_8d.push(_92);m.connect(_92,"onBlur",function(){m.setFieldState(this,_ad(this));});_85=true;}else{if(!(_92.get("required")&&(_92.get("value")===""||isNaN(_92.get("value"))))){m.setFieldState(_92,true);}}}}}});if(_8d.length>0){d.forEach(_8d,function(_95,_96){m.setFieldState(_95,false);if(m._config.swift2018Enabled&&_97(_95)){_88=true;}else{_89=true;}_95.invalidMessage=m.getLocalization("invalidSWIFTTransactionError");misys._config.swiftError[_96]=_95.get("id");});if(_84){_7a();m._config.onSubmitErrorMsg=m.getLocalization("invalidSWIFTFieldSizeError");return false;}else{if(_86){_7a();m._config.onSubmitErrorMsg=m.getLocalization("invalidSWIFTFieldSizeErrorForTrade");return false;}else{if(_83){_7a();var _98=m.getLocalization("invalidSWIFTTransactionErrorMsg");if(_89&&!_88&&_8a){_98=_98+m.getLocalization("invalidSWIFTTransactionValidValues");}if(!_89&&_88&&_8a){_98=_98+m.getLocalization("invalidSWIFTTransactionValidValuesExt");}if(_89&&_88&&_8a){if(_8a=="03"||_8a=="06"){_98=_98+m.getLocalization("invalidSWIFTTransactionValidValuesWithExt");}else{_98=_98+m.getLocalization("invalidSWIFTTransactionValidValuesWithExtBank");}}m._config.onSubmitErrorMsg=_98;return false;}else{if(_87){_7a();m._config.onSubmitErrorMsg=m.getLocalization("invalidSWIFTAddressFieldErrorForTrade");return false;}else{if(_85){_7a();m._config.onSubmitErrorMsg=m.getLocalization("invalidSWIFTFirstCharErrorMsg");return false;}}}}}}}}return true;};function _99(_9a){var _9b=dj.byId(_9a);if(_9b.get("value").length>35){return false;}return true;};function _9c(_9d){var _9e=dj.byId(_9d);if(/SimpleTextarea/.test(_9e.declaredClass)){var _9f=1,_a0=_9e.get("value");return d.every(_a0,function(c){if(c==="\n"){return (++_9f<=_24);}return true;});}return true;};function _97(_a1){if(!m._config.swift2018Enabled){return false;}var _a2=dj.byId("product_code");var _a3="";if(_a2){_a3=_a2.get("value");}var _a4=["narrative_documents_required","narrative_description_goods","narrative_additional_instructions","narrative_full_details","narrative_charges","narrative_special_beneficiary","narrative_special_recvbank","narrative_sender_to_receiver","narrative_amend_charges_other","free_format_text","narrative_transfer_conditions","line_item_product_name"];if((_a3==="LC"&&new RegExp(_a4.join("|")).test(_a1.id))||(_a3==="EL"&&new RegExp(_a4.join("|")).test(_a1.id))||(_a3==="SI"&&new RegExp(_a4.join("|")).test(_a1.id))||(_a3==="SR"&&new RegExp(_a4.join("|")).test(_a1.id))){return true;}else{return false;}};function _a5(_a6){var _a7=dj.byId(_a6),_a8=_a7.get("value");if(_a7.datePackage&&_a7.datePackage==="dojo.date"){_a8=_a7.get("displayedValue");}if(_a8===null||_a8===""){return true;}var _a9=true;try{var _aa=dj.byId("swiftregexValue")?dj.byId("swiftregexValue").get("value"):"";if(m._config.swift2018Enabled&&_97(_a6)){_aa=dj.byId("swiftregexzcharValue")?dj.byId("swiftregexzcharValue").get("value"):"";}var _ab=_a8;var _ac=new RegExp(_aa);_a9=_ac.test(_ab);}catch(err){return _a9;}return _a9;};function _ad(_ae){var _af=dj.byId(_ae),_b0=_af.get("value");if(_b0===null||_b0===""){return true;}if(_b0.indexOf("\n:")!=-1||_b0.indexOf("\n-")!=-1){return false;}return true;};function _b1(_b2,_b3){if(d.isArray(_b2)){if(/CheckBox/.test(_b3)){if(_b2.length===1&&_b2[0]==="on"){return "Y";}return "N";}}if(_b2===null||_b2===""||((_b2+"")==="NaN")){return "";}if(/Date/.test(_b3)){return d.date.locale.format(_b2,{selector:"date",datePattern:misys.getLocalization("g_strGlobalDateFormat")});}if(/Time/.test(_b3)){return d.date.locale.format(_b2,{datePattern:"dd/MM/yyyy",timePattern:"HH:mm:ss"});}return dojo.isString(_b2)?dojox.html.entities.encode(_b2,dojox.html.entities.html):_b2;};function _69(){var _b4=dj.byId("attIds");var _b5=dj.byId("fileActIds");if(_b4){var _b6=[];var _b7=[];if(d.query("table[id^="+_21+"]").length>0){d.query("table[id^="+_21+"] tr[id^='file_row_']]").forEach(function(_b8,i){var _b9=_b8.id;if(i!==0){_b6.push("|");}_b6.push(_b9.substring(_b9.indexOf("row_")+4,_b9.length));});}else{var _ba=[dj.byId(_1d),dj.byId(_22),dj.byId(_1e),dj.byId(_1f),dj.byId(_20)];var _bb=false;d.forEach(_ba,function(_bc){if(_bc&&_bc.grid){var arr=_bc.grid.store._arrayOfAllItems;d.forEach(arr,function(_bd,i){if(_bd&&_bd!=null){if(_bb){_b6.push("|");}else{_bb=true;}_b6.push(_bd.attachment_id);}});}});var _be=dj.byId(_1d);if(_b5&&_be&&_be.grid&&_be.grid.selection){_bb=false;d.forEach(_be.grid.selection.getSelected(),function(_bf,_c0){if(_bf&&_bf!=null){if(_bb){_b7.push("|");}else{_bb=true;}_b7.push(_bf.attachment_id);}});_b5.set("value",_b7.join(""));}}_b4.set("value",_b6.join(""));}};function _7a(_c1){d.query(_29,_c1).forEach(function(_c2){var _c3=dj.byId(_c2.getAttribute("widgetid"));if(_c3){d.forEach(_c3.getChildren(),function(tab){d.some(tab.getChildren(),function(_c4){if(_c4.get("state")==="Error"){m.connect(_c4,"onChange",function(){_c5(tab,_c4);});_c4.onChange();return true;}return false;});});}});};function _c5(tab,_c6){var _c7=d.create("img",{"class":"errorIcon",src:m.getContextualURL(m._config.imagesSrc+m._config.imageStore.warningIcon),alt:m.getLocalization("tabErrorWarning"),title:m.getLocalization("tabErrorWarning")}),_c8=m._config.requiredFieldPrefix||"*",_c9=tab.get("title"),_ca,_cb;if(_c6.declaredClass){var _cc=_c6.get("value");_cb={"isRequired":_c6.get("required"),"isNonEmpty":_cc!==null&&_cc!=="","isInError":_c6.get("state")==="Error"};}else{_cb=_c6;}if(_cb.isRequired&&(_c9.indexOf(_c8)===-1)){_c8+=" ";_c9=_c8+_c9;}if(_cb.isInError&&_c9.indexOf("<img")===-1){_ca=d.create("div");_ca.innerHTML=_c9;if(!(dojo.isIE&&dojo.isIE===6)){d.place(_c7,_ca);}_c9=_ca.innerHTML;}if(!_cb.isInError&&_c9.indexOf("<img")!==-1){_c9=_c9.substr(0,_c9.indexOf("<img"));}if(_cb.isNonEmpty&&_c9.indexOf(_28)===-1){_ca=d.create("div");d.create("span",{"class":_28,innerHTML:_c9},_ca);_c9=_ca.innerHTML;}if(_c9!==tab.get("title")){tab.set("title",_c9);}};function _cd(_ce){var _cf=false,_d0=false,_d1=false,_d2,_d3;d.query(_29,_ce).forEach(function(_d4){var _d5=dj.byId(_d4.getAttribute("widgetid"));if(_d5){_d3=_d5.get("id");d.forEach(_d5.getChildren(),function(tab){_cf=false;_d0=false;_d1=false;_d2=tab.get("id");d.forEach(tab.getChildren(),function(_d6){var _d7=_d6.get("value");if(!_cf&&_d6.get("required")){_cf=true;}if(!_d0&&(_d7!==null&&_d7!=="")){_d0=true;}if(!_d1&&_d6.get("state")==="Error"){_d1=true;}m.connect(_d6,"onChange",function(){_c5(tab,{"isRequired":_d6.get("required"),"isNonEmpty":_d6.get("value")!==null&&_d6.get("value")!=="","isInError":false});});_d6.set("parentTab",_d2);_d6.set("tabContainer",_d3);});_c5(tab,{"isRequired":_cf,"isNonEmpty":_d0,"isInError":_d1});});}});};function _d8(){var _d9,_da;d.query(_26).forEach(function(_db){_d9=dj.byId(dojo.attr(_db,"widgetid"))||dj.byId(dojo.attr(_db,"id"));if(_d9){_da=_d9.get(_27);if(_da){d.forEach(_da.split(" "),function(_dc){d.subscribe(_dc,_d9,function(_dd){if(this.handleTopicEvent){this.handleTopicEvent(_dd,_dc);}});});}}});};function _de(){if(d.byId(_2b)){m.connect(_2b,"onSubmit",function(e){var _df=dj.byId(_2c)?dj.byId(_2c).get("value"):"screen";if(e&&_df==="screen"){e.preventDefault();}d.forEach(dj.byId("TransactionSearchForm").getDescendants(),function(fld){if(fld.state==="Incomplete"&&fld.required===true){fld._hasBeenBlurred=true;fld.validate(false);}});if(this.isValid()){if(_df!=="screen"){if(_df==="pdf"){dj.byId(_2d).set("value","AccountStatement."+_df);}else{dj.byId(_2d).set("value","inquiry."+_df);}return true;}else{m.grid.reloadForSearchTerms();m.reloadChartImg();return false;}}else{if(dojo.byId("hugeDiv")){dojo.byId("hugeDiv").style.display="none";}return true;}});}};function _e0(){d.query(_2a).forEach(function(_e1){var _e2;var _e3=dj.byId(_e1.id);if(_e3){if(d.hasClass(_e1,"ischarted")){m.grid.toggleAllGroups(_e3,false);}if(!window.isTopElementToBeFocussed){_e3.resize();}}});};function _e4(){var _e5=d.byId(_2e),_e6;if(_e5){d.parser.parse(_e5);_e6=dj.byId("collaborationWindow");_e6.placeAt(dojo.body());if((!d.isIE||d.isIE>7)&&_e6.show){d.style(_e6.domNode,"opacity",0);_e6.show();}else{d.style(_e6.domNode,"opacity",1);}}};function _e7(){var _e8=/ValidationTextBox/;if(!m._config.disableFocusTrap){d.query(".widgetContainer *[id].dijitTextBox:not(.dijitReadOnly):not(.nofocusonerror)").forEach(function(_e9){var _ea=dj.byId(_e9.getAttribute("widgetid"));if(_e8.test(_ea.get("declaredClass"))&&!_ea.focusonerror){}else{m.connect(_ea,"onBlur",_eb);}});}};function _eb(){var _ec=this.get("value")+"";if(this.state==="Error"&&(!m._config.fieldInError||m._config.fieldInError===this.id)&&((typeof _ec==="undefined")||(_ec!==""&&_ec!=="null"&&_ec!=="NaN")||(/Select/.test(this.declaredClass)&&this.get("displayedValue")!==""&&!this.item))){m._config.fieldInError=this.id;var _ed=this;m.dialog.show("ERROR",m.getLocalization("focusOnErrorAlert"),"",function(){_ed.focus();});}else{if(misys._config.fieldInError===this.id){delete misys._config.fieldInError;}}};function _ee(_ef,_f0){_ef.forEach(function(_f1){var _f2=_f1.parentNode.offsetWidth;if(_f2!==0){_39=_f2;}if(_f0){d.attr(_f1,"width",_39);d.attr(_f1,"height",_32);}else{d.attr(_f1,"src",d.attr(_f1,"alt")+"&chartwidth="+_39);}});};function _f3(url,key,_f4){key=encodeURI(key);_f4=encodeURI(_f4);var _f5;if(url.indexOf("?")===-1){_f5=url+"?"+key+"="+_f4;}else{var _f6=url.split("?")[0];var _f7=url.split("?")[1].split("&");var i=_f7.length;var x;while(i--){x=_f7[i].split("=");if(x[0]==key){x[1]=_f4;_f7[i]=x.join("=");break;}}if(i<0){_f7[_f7.length]=[key,_f4].join("=");}_f5=_f6+"?"+_f7.join("&");}return _f5;};function _f8(_f9){_f9.forEach(function(_fa){var _fb=dj.byId(_fa.id);if(_fb){if(!window.isTopElementToBeFocussed||!window.isToPreventTableHeaderFocusAlways){_fb.resize();}_fb.update();}});};function _fc(url,_fd,_fe){var _ff=_fd||misys.getLocalization("transactionPopupWindowTitle"),_100=_fe||"width=800,height=500,resizable=yes,scrollbars=yes",_101=d.global.open(url,_ff,_100);if(!_101.opener){_101.opener=self;}_101.focus();};function _102(node){var _103=dj.byId(node),_104=_103.get("value"),_105=true;var _106;if(dj.byId("sub_product_code")){_106=dj.byId("sub_product_code").get("value");}else{_106="*";}if(_104!==""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/ValidateTemplateId"),handleAs:"text",content:{productcode:m._config.productCode,templateid:_104,companyid:dj.byId("company_id").get("value"),subproductcode:_106},sync:true,load:function(_107,_108){_105=(_107.toLowerCase()==="true");},customError:function(_109,_10a){console.error("[misys.common] _isUniqueTemplateId error",_109,_10a);_105=false;}});}return _105;};function _10b(){if(d.query(".cancelButton").length>0||d.query(".cancelBkButton").length>0){d.query(".saveButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("SAVE");});});d.query(".systemSaveButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("SYSTEM_SUBMIT");});});d.query(".saveTemplateButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("SAVE_TEMPLATE");});});d.query(".submitButton").forEach(function(btn){var _10c=dj.byId("transaction_confirmation_details");var _10d=function(){if(m.commonclient&&m.commonclient.submit){m.commonclient.submit("SUBMIT");}else{m.submit("SUBMIT");}};if(_10c&&_10c.get("value")==="Y"){_10d=function(){window.onbeforeunload=null;m.beforeSubmit();_3a("SUBMIT");};}m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",_10d);});d.query(".validateButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("VALIDATE");});});d.query(".forwardButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("FORWARD");});});d.query(".rejectButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("REJECT");});});d.query(".returnTransactionButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("RETURN_TRANSACTION");});});d.query(".cancelButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("CANCEL");});});d.query(".cancelBkButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("CANCEL_BULK_TRANSACTION");});});d.query(".helpButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("HELP");});});d.query(".resubmitButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("RESUBMIT");});});d.query(".submitBulkButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("SUBMITBULK");});});}if(d.query(".cancelBulkButton").length>0){dj.byId("realform").set("action",m.getServletURL("/screen/BulkScreen"));d.query(".addBulkButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("ADD_BULK");});});d.query(".updateBulkButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("UPDATE_BULK");});});d.query(".saveTemplateBulkButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("SAVE_TEMPLATE_BULK");});});d.query(".cancelBulkButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("CANCEL_BULK");});});d.query(".helpButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("HELP");});});}d.query("#toc").delegate("a","onclick",function(evt){if(this.id==="toggleTocLink"){m.toggleTOC();return;}if(this.id&&this.id.indexOf("_")!==-1){var _10e=this.id.substr(this.id.indexOf("_")+1),_10f=d.byId(_10e),_110=d.byId("transactionDetails"),fnc=function(){if(d.isIE<=6){d.window.scrollIntoView(_10f);}else{dojox.fx.smoothScroll({node:_10f,win:window}).play();}};if(_110&&d.isDescendant(_10f,_110)&&(d.style(_110,"display")==="none"||d.style(_110,"position")==="absolute")){m.toggleTransaction(true,false,fnc);}else{fnc();}}});d.query("#errorSection").delegate("a","onclick",function(evt){if(this.id==="errorLink"){m.toggleErrorSection();return;}});if(dj.byId("editTransactionDetails")){m.connect("editTransactionDetails","onclick",function(){m.toggleTransaction(true,true);});}if(dj.byId("hideTransactionDetails")){m.connect("hideTransactionDetails","onclick",function(){m.toggleTransaction(false);});}};function _111(){d.query(".savePopupButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.dialog.submit("SUBMIT");});});d.query(".cancelPopupButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.dialog.submit("CANCEL");});});d.query(".helpPopupButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.dialog.submit("HELP");});});};function _112(){if(m.unloadListener){window.onbeforeunload=m.unloadListener;}dojo.forEach(m.excludedMethods,function(item,idx){dojox.lang.aspect.advise(item.object,item.method,{before:function(){m.isSystemButtonClicked=true;window.onbeforeunload=null;}});});if(dijit.byId(attachmntFile)){dojox.lang.aspect.advise(dijit.byId(attachmntFile).grid.store,["onSet","onNew","onDelete"],{after:function(){m.isFormDirty=true;}});}dojox.lang.aspect.advise(m.dialog,"show",{before:function(){window.onbeforeunload=null;}});dojox.lang.aspect.advise(m,["addTransactionAddon","deleteTransactionAddon","editTransactionAddon"],{after:function(){m.isFormDirty=true;}});d.query("#fakeform0, #fakeform1").forEach(function(node){var form=dj.byId(node.id);d.forEach(form.getDescendants(),function(_113){m.connect(_113,"onChange",m.markFormDirty);});});d.query("#fakeform0 a, #fakeform1 a, #fakeform0 img[onclick], #fakeform1 img[onclick]").forEach(function(node){dojox.lang.aspect.advise(node,"onclick",{before:function(){m.isSystemButtonClicked=true;window.onbeforeunload=null;setTimeout(function(){window.onbeforeunload=m.unloadListener;},50);}});});dojox.lang.aspect.advise(misys,"downloadFile",{before:function(){m.isSystemButtonClicked=true;window.onbeforeunload=null;setTimeout(function(){window.onbeforeunload=m.unloadListener;},50);}});dojo.query(".header a, .footer a, .portalMenuItem *").forEach(function(node,idx){m.connect(node,"onClick",function(_114){if(m.isPopupRequired()){var evt=_114;var _115=_11f(evt);if(_115!==""){dojo.stopEvent(evt);m.showUnsavedDataDialog();}var _116=dojo.connect(m,"setUnsavedDataOption",function(){if(m.unsavedDataOption!=="notset"){var _117="";if(m.unsavedDataOption==="save"){m.saveAsync(_115);}else{if(_115!==""&&_117===""&&m.unsavedDataOption==="nosave"){location.href=_115;}}}dojo.disconnect(_116);});}});});var _118=dj.byId("menu_tree");if(_118){d.connect(_118,"onOpen",function(item,node,_119){d.forEach(dojo.query("#"+node.id+" span.dijitTreeLabel"),function(_11a,idx){m.connect(_11a,"onClick",function(_11b){if(m.isPopupRequired()){var evt=_11b;var _11c=_11f(evt);if(_11c!==""){dojo.stopEvent(evt);m.showUnsavedDataDialog();}var _11d=dojo.connect(m,"setUnsavedDataOption",function(){if(m.unsavedDataOption!=="notset"){var _11e="";if(m.unsavedDataOption==="save"){m.saveAsync(_11c);}else{if(_11c!==""&&_11e===""&&m.unsavedDataOption==="nosave"){location.href=_11c;}}}dojo.disconnect(_11d);});}});});});}};function _11f(evt){var _120=evt.target;var _121="";if(_120.nodeName==="IMG"&&_120.parentNode.nodeName==="A"){if(_120.parentNode.href){_121=_120.parentNode.href;}}else{if(_120.href){_121=_120.href;}else{if(dojo.hasClass(_120,"dijitTreeLabel")){var _122=dijit.byId("menu_tree");var _123=_122.attr("path");var _124=dojo.filter(_123,function(_125){return _125.hasOwnProperty("url");});if(_124.length===1&&_124[0].url){_121=_124[0].url;}}}}return _121;};function _126(){var _127="";var path=misys._config.homeUrl;if(misys._config.homeUrl.indexOf("?")!=-1){path=misys._config.homeUrl.split("?")[0];}_127=path.substr(path.lastIndexOf("/")+1);return _127;};function _128(_129){var _12a=["LC","BG","EC","EL","IC","BR","TF","SG","SI","SR","IR","FT","BK","SE","LN","TD","LI"];if(_12a.indexOf(_129)!==-1){if(_129==="FT"||_129==="BK"){return m.formToXML({ignoreDisabled:true});}return m.formToXML();}else{return "";}};d.mixin(m,{performReauthentication:function(){var _12b=dj.byId("reauth_perform");if(_12b&&_12b.get("value")==="Y"){var _12c={};if(d.isFunction(m._config.initReAuthParams)){_12c=m._config.initReAuthParams();m.checkAndShowReAuthDialog(_12c);}else{m.setContentInReAuthDialog("ERROR","");dj.byId("reauth_dialog").show();}}else{if(m.isFormDirty&&m.isFormDirty===true){m.isFormDirty=false;}dj.byId("TransactionData").set("value",m.formToXML());dj.byId(_1b).submit();}},submitCommon:function(type){_3a(type);},validateFormsCommon:function(){return _72(true);},openPopupCommon:function(url,name,_12d){_fc(url,name,_12d);},setContentInReAuthDialog:function(_12e,_12f){var _130;switch(_12e){case "01":if(d.isFunction(m._config.nonReauthSubmit)){m._config.nonReauthSubmit();}else{if(dj.byId("TransactionData")){dj.byId("TransactionData").set("value",m.formToXML());}dj.byId(_1b).submit();}break;case "ERROR":if(d.byId("reauth_dialog_content")){_130=dj.findWidgets(d.byId("reauth_dialog_content"));d.forEach(_130,function(w){w.destroyRecursive(false);});d.empty("reauth_dialog_content");}d.byId("reauth_dialog_content").innerHTML=m.getLocalization("technicalErrorReauth");d.parser.parse("reauth_dialog_content");dj.byId("reauth_password").set("required",false);m.animate("wipeOut",d.byId("reauth_otp_response_sb"));m.toggleClassInlineBlock("reauth_sb",false);break;case "EXCHANGE_RATE_ERROR":if(d.byId("reauth_dialog_content")){_130=dj.findWidgets(d.byId("reauth_dialog_content"));d.forEach(_130,function(w){w.destroyRecursive(false);});d.empty("reauth_dialog_content");}d.byId("reauth_dialog_content").innerHTML=m.getLocalization("technicalErrorExchangeRate");d.parser.parse("reauth_dialog_content");dj.byId("reauth_password").set("required",false);m.animate("wipeOut",d.byId("reauth_otp_response_sb"));m.toggleClassInlineBlock("reauth_dialog_password",false);m.toggleClassInlineBlock("reauth_sb",false);break;default:if(d.byId("reauth_dialog_content")){_130=dj.findWidgets(dojo.byId("reauth_dialog_content"));d.forEach(_130,function(w){w.destroyRecursive(false);});d.empty("reauth_dialog_content");}d.byId("reauth_dialog_content").innerHTML=_12e;d.parser.parse("reauth_dialog_content");m.toggleClassInlineBlock("reauth_sb",true);break;}},checkAndShowReAuthDialog:function(_131){if(misys.commonclient&&misys.commonclient.checkAndShowReAuthDialog){misys.commonclient.checkAndShowReAuthDialog(_131);return;}m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/ReAuthenticationAjax"),handleAs:"text",sync:true,preventCache:true,content:{productCode:_131.productCode,subProductCode:_131.subProductCode,transactionTypeCode:_131.transactionTypeCode,subTransactionTypeCode:(_131.subTransactionTypeCode)?_131.subTransactionTypeCode:"",entity:(_131.entity)?_131.entity:"",currency:(_131.currency)?_131.currency:"",amount:(_131.amount)?_131.amount:"",tnxAmt:(_131.tnxAmt)?_131.tnxAmt:"",bank_abbv_name:(_131.bankAbbvName)?_131.bankAbbvName:"",xml:_128(_131.productCode),mode:dj.byId("mode")?dj.byId("mode").get("value"):"",operation:dj.byId("realform_operation")?dj.byId("realform_operation").get("value"):"",option:_131.option?_131.option:""},load:function(_132,_133){if(!(_132.indexOf("SC_UNAUTHORIZED")===-1)){misys.showSessionOverDialog();}else{m.setContentInReAuthDialog(_132,_133);if(""+_132+""!="01"){dj.byId("reauth_dialog").show();}}},customError:function(_134,_135){console.error(_134);m.setContentInReAuthDialog("ERROR",_135);dj.byId("reauth_dialog").show();}});},getQueryParameterByName:function(name,url){name=name.replace(/[\[\]]/g,"\\$&");var _136=new RegExp("[?&]"+name+"(=([^&#]*)|&|#|$)"),_137=_136.exec(url);if(!_137){return null;}if(!_137[2]){return "";}return decodeURIComponent(_137[2].replace(/\+/g," "));},isAngularProductUrl:function(_138,_139){if(!_139||_139==="null"||_139===""){var ret=misys._config.angularProducts&&misys._config.angularProducts.indexOf(_138)>-1;var _13a=misys._config.restrictedangularscreen.replace(/[\[\]']+/g,"").split(", ");var _13b=false;for(var i=0;i<_13a.length;i++){if(window.location.href.indexOf(_13a[i])>-1){_13b=true;}}if(ret&&_138&&_138!==""&&misys._config.restrictedangularproductcode.indexOf(_138)>-1&&((_13b)||(window.location.href.indexOf("MessageCenterScreen")>-1)||(window.location.href.indexOf("classicUXHome")>-1))){ret=false;}return ret;}else{return misys._config.angularSubProducts&&misys._config.angularProducts&&misys._config.angularProducts.indexOf(_138)>-1&&m.isSubProductCodeValidForAngularUrl(misys._config.angularSubProducts,_139);}},isSubProductCodeValidForAngularUrl:function contains(_13c,_13d){var _13e=_13c.replace("[","").replace("]","");var _13f=_13e.split(", ");if(_13f.includes(_13d)){return true;}return false;},setTnxConfirmationDetailsInDialog:function(_140,_141){switch(_140){case "ERROR":undefined;m.dialog.show("ERROR",m.getLocalization("technicalErrorTnxConfirmationDetails"));break;default:undefined;var _142=function(){m.performReauthentication();};var _143=function(){var _144=dj.byId("realform_operation");_144.set("value","");m.dialog.hide();};m.dialog.show("CONFIRMATION",_140,"",null,null,"",_142,_143,null);break;}},checkAndShowTnxConfirmationDetailsDialog:function(){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/TransactionConfirmationDetailsAction"),handleAs:"text",sync:true,preventCache:true,content:{transactionData:m.formToXML()},load:function(_145,_146){if(!(_145.indexOf("SC_UNAUTHORIZED")===-1)){misys.showSessionOverDialog();}else{m.setTnxConfirmationDetailsInDialog(_145,_146);}},customError:function(_147,_148){console.error(_147);m.setTnxConfirmationDetailsInDialog("ERROR",_148);}});},angularMenuReSize:function(){var _149=document.querySelector(".ui-menubar-root-list").offsetHeight;var _14a=document.querySelector(".colmask");if(_14a&&_14a!=="undefined"){if(_149>=42){_14a.style.top="80px";}}},_setupFocus:function(_14b){m.hideCollabWindow();if(_14b){m.setAccessibilityFlags();}if(window.isTopElementToBeFocussed){m.focusTopElement();}if(window.isTopElementToBeFocussed&&_14b){setTimeout(function(){window.isTopElementToBeFocussed=false;},window.topElementFocusTimeout);}},hideCollabWindow:function(){if(!window.isFloatingFormSummaryMenuEnabled){if(dojo.query(colbortionWindow)&&dojo.query(colbortionWindow)[0]!=undefined){dojo.style(dojo.query(colbortionWindow)[0],"display","none");}if(dojo.query("#toc")&&dojo.query("#toc")[0]!=undefined){dojo.style(dojo.query("#toc")[0],"display","none");}}},skipToMenuLink:function(){if(!dojo.byId("portalMenuBar")){dojo.style(dojo.byId("skipToMenu"),"display","none");}else{dojo.style(dojo.byId("skipToMenu"),"display","inline");}},skipToContentLink:function(){if(!dojo.byId("GTPRootPortlet")){var _14c=dojo.query(".portlet-title")[0];var _14d=dojo.attr(_14c,"id");if(_14d){dojo.attr(dojo.byId("skipToContent"),"href","#"+_14d);dojo.style(dojo.byId("skipToContent"),"display","block");}else{dojo.style(dojo.byId("skipToContent"),"display","none");}}},setAccessibilityFlags:function(){dojo.query("label").forEach(function(_14e){try{if(dojo.hasAttr(_14e,"for")&&dojo.attr(_14e,"for")===""){dojo.removeAttr(_14e,"for");}}catch(exe){}});var _14f=["validateButton","validateButton2","saveButton","saveButton2","submitButton","submitButton2","forwardButton","forwardButton2","rejectButton","rejectButton2","returnTransactionButton","returnTransactionButton2","templateButton","templateButton2","menuCancelButton","cancelButton2","helpButton","helpButton2","previewButton","previewButton2","submitBulkButton","submitBulkButton2","addBulkButton","addBulkButton2","updateBulkButton","updateBulkButton2","templateBulkButton","templateBulkButton2","cancelBulkButton","cancelBulkButton2","helpButton","helpButton2","uploadFormButton","uploadFormButton2","resubmitButton","resubmitButton2","sySubmitButton"];dojo.forEach(_14f,function(_150,i){if(dojo.query("#"+_150)[0]){dojo.attr(dojo.query("#"+_150)[0],ariaDescrib,"mainScreenHeadingText");}});if(dojo.query(langMenu)&&dojo.query(langMenu)[0]!==undefined){dojo.attr(dojo.query(langMenu)[0],"role","menu");dojo.attr(dojo.query(langMenu)[0],ariaDescrib,"language-menu-instructions");}if(dojo.query(bookmrkMenu)&&dojo.query(bookmrkMenu)[0]!==undefined){dojo.attr(dojo.query(bookmrkMenu)[0],ariaDescrib,"bookmark-menu-instructions");dojo.attr(dojo.query(langMenu)[0],"role","listbox");}dojo.query("#bookmarkToolTipDialog .bookmark").forEach(function(_151){var _152=dojo.query("a",_151)[0];var _153=dojo.query("a",_151)[1];var _154=dojo.attr(dojo.query("img",_153)[0],"title")+" "+dojo.attr(_152,"innerHTML")+" "+misys.getLocalization("bookmark");dojo.style(_153,"display","inline");dojo.attr(_153,"aria-label",_154);});dojo.query(".dojoxGridHeader table.dojoxGridRowTable").forEach(function(_155){try{dojo.attr(dojo.query("tbody>tr>th",_155)[0],ariaDescrib,"table-head-instructions");}catch(exc){}});dojo.query(".dojoxGridContent ").forEach(function(_156){try{if(dojo.query("div>div.dojoxGridRow>table>tbody>tr>td",_156)[0]){dojo.attr(dojo.query("div>div.dojoxGridRow>table>tbody>tr>td",_156)[0],ariaDescrib,"table-body-instructions");}}catch(exc){}});if(dojo.query(popuMenuItem)&&dojo.query(popuMenuItem)[0]!=undefined){try{dojo.attr(dojo.query(popuMenuItem)[0],ariaDescrib,"top-menu-instructions");}catch(exc){}}dojo.query(".collapsingImgSpan, .collapsingImgSpanLeftSide").forEach(function(_157){var _158="toggle-box-inst";if(dojo.attr(_157,"onclick")==="javascript:misys.toggleSearchGrid();"){if(dojo.query(scrhCrieteria)&&dojo.query(scrhCrieteria)[0]!==undefined){var _159;var _15a=dojo.query(scrhCrieteria)[0];if(dojo.attr(_15a,"id")){_159=dojo.attr(_15a,"id");}else{dojo.attr(_15a,"id","searchHelpText");_159=dojo.attr(_15a,"id");}_158=_158+" "+_159;}}dojo.attr(_157,ariaDescrib,_158);});dojo.query("#GTPRootPortlet img, #GTPRootPortlet a, #GTPRootPortlet button, #GTPRootPortlet span, #GTPRootPortlet div ").forEach(function(_15b){try{var _15c="";if(dojo.attr(_15b,"onClick")){_15c=dojo.attr(_15b,"onClick");}else{if(dojo.attr(_15b,"href")){_15c=dojo.attr(_15b,"href");}}if(_15c&&_15c.length>0){if(_15c.indexOf("misys.showSearchDialog")!==-1||_15c.indexOf("misys.popup.showReporting")!==-1||_15c.indexOf("misys.popup.showPreview")!==-1||_15c.indexOf("misys.showBankTypeDialog")!==-1||_15c.indexOf("misys.showSearchUserAccountsDialog")!==-1||_15c.indexOf("misys.showEntityDialog")!==-1){dojo.attr(_15b,ariaDescrib,"dialog-link-inst");}}else{var _15d="";if(dojo.attr(_15b,"src")){_15d=dojo.attr(_15b,"src");if(_15d.indexOf("open_dialog.png")!==-1||_15d.indexOf("search.png")!==-1){var _15e=_15b.parentNode;if(dojo.attr(_15e,"dojoattachpoint")&&(dojo.attr(_15e,"dojoattachpoint")==="containerNode")&&!(dojo.attr(_15e,"onClick"))){_15e=_15e.parentNode;}dojo.attr(_15e,ariaDescrib,"dialog-link-inst");}}}}catch(exc){}});},focusTopElement:function(){var _15f="";var _160;if(window.isTopElementFirstH1&&dojo.query(GTPRootPotlet)){try{dojo.query(GTPRootPotlet)[0].focus();_15f=dojo.attr(dojo.query(GTPRootPotlet)[0],"innerHTML");dojo.attr(dojo.query(GTPRootPotlet)[0],"id","mainScreenHeadingText");}catch(exc){if(dojo.query(h1portletTitle)&&dojo.query(h1portletTitle)[0]!==undefined){dojo.query(h1portletTitle)[0].focus();}else{if(dojo.query(h2portletTitle)&&dojo.query(h2portletTitle)[0]!==undefined){dojo.query(h2portletTitle)[0].focus();_160=dojo.query(h2portletTitle)[0];}}}}else{if(dojo.byId("skipToMenu")){dojo.byId("skipToMenu").focus();}else{if(dojo.byId("helpDesk")){dojo.byId("helpDesk").focus();}else{if(dojo.byId("manageProfile")){dojo.byId("manageProfile").focus();}}}}if(_160&&_160!==undefined){dojo.attr(_160,ariaDescrib,"welcome userId lastLoginSpanID");}},onLoad:function(){m.onBeforeLoad();var _161=function(elem,_162){if(!Element.prototype.matches){Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(s){var _163=(this.document||this.ownerDocument).querySelectorAll(s),i=_163.length;while(--i>=0&&_163.item(i)!==this){}return i>-1;};}for(;elem&&elem!==document;elem=elem.parentNode){if(elem.matches(_162)){return elem;}}return null;};function _164(n1,n2){var p1=n1.parentNode;var p2=n2.parentNode;var i1,i2;if(!p1||!p2||p1.isEqualNode(n2)||p2.isEqualNode(n1)){return;}for(var i=0;i<p1.children.length;i++){if(p1.children[i].isEqualNode(n1)){i1=i;}}for(i=0;i<p2.children.length;i++){if(p2.children[i].isEqualNode(n2)){i2=i;}}if(p1.isEqualNode(p2)&&i1<i2){i2++;}p1.insertBefore(n2,p1.children[i1]);p2.insertBefore(n1,p2.children[i2]);};window.onresize=function(){var _165=document.getElementsByClassName("dijitPopup dijitComboBoxMenuPopup");for(var i=0;i<_165.length;i++){_165[i].style.display="none";}};window.setTimeout(function(){if(dojo.byId("saveDashboard")){dojo.byId("saveDashboard").addEventListener("click",function(){var _166={"level1":[],"level2":[],"level3":[]};for(var i=0;i<d.query(homepagePortlet).length;i++){var obj={};var ele=d.query(homepagePortlet)[i];if(ele&&!_161(d.query(homepagePortlet)[i],".colmid")){if(ele&&_161(d.query(homepagePortlet)[i],".colLeft")){obj["position"]=ele.getAttribute("position");obj["id"]=ele.id;_166.level1.push(obj);}else{if(ele&&_161(d.query(homepagePortlet)[i],".colRight")){obj["position"]=ele.getAttribute("position");obj["id"]=ele.id;_166.level2.push(obj);}}}else{obj["position"]=ele.getAttribute("position");obj["id"]=ele.id;_166.level3.push(obj);}}document.getElementById("_dashboardpositions").value=JSON.stringify(_166);m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/UserPreferencesAction"),handleAs:"text",sync:true,preventCache:true,content:{portletPositions:document.getElementById("_dashboardpositions").value,PSML:document.getElementById("DashboardPSML").value,operation:"SAVE",themeColor:document.documentElement.style.getPropertyValue("--main-bg-color"),textColor:document.documentElement.style.getPropertyValue("--main-text-color"),fontType:document.documentElement.style.getPropertyValue("--main-font-family"),fontSize:document.documentElement.style.getPropertyValue("--main-font-size")},load:function(_167,_168){window.location.href=m.getServletURL("");},customError:function(_169,_16a){console.error(_169);}});},false);}},100);var _16b=function(e){var _16c=_161(e.target,".portlet");_16c.style.display="none";};if(d.query(".delIcon")[0]){for(var i=0;i<d.query(".delIcon").length;i++){d.query(".delIcon")[i].addEventListener("click",_16b,true);}}if(dojo.byId("saveDashboard")&&d.query(homepagePortlet)[0]){for(i=0;i<d.query(homepagePortlet).length;i++){var dEle=d.query(homepagePortlet)[i];dEle.setAttribute("draggable","true");dEle.setAttribute("position",i);dEle.addEventListener("dragstart",function(e){e.dataTransfer.effectAllowed="copy";e.dataTransfer.setData("Text",this.id);});}if(d.query(".colContainer")[0]){var _16d=d.query(".colContainer")[0];_16d.addEventListener("dragover",function(e){if(e.preventDefault){e.preventDefault();}this.className="over";e.dataTransfer.dropEffect="copy";return false;});_16d.addEventListener("dragenter",function(e){this.className="over";return false;});_16d.addEventListener("dragleave",function(){this.className="";});_16d.addEventListener("drop",function(e){if(e.stopPropagation){e.stopPropagation();}var _16e=document.getElementById(e.dataTransfer.getData("Text"));var _16f=_161(e.target,".homepage .portlet");var _170=_16e.getAttribute("position");var _171=_16f.getAttribute("position");_164(_16e,_16f);_16e.setAttribute("position",_171);_16f.setAttribute("position",_170);});}}if(dojo.query(".maincontent.homepage")&&dojo.query(".maincontent.homepage")[0]!==undefined){var _172=dojo.byId("CustomerOngoingTasksList")?true:false;var _173=dojo.byId("InternalNewsPortlet")?true:false;var _174=dojo.byId("OutstandingPerProductChartPortlet")?true:false;var _175=dojo.byId("TradeEventsGridPortlet")?true:false;var _176=dojo.byId("HomeAccountSummaryListPortlet")?true:false;var _177=dojo.byId("ActionRequiredPortlet")?true:false;var _178=dojo.byId("OpicsAccountListPortletPlusBalance")?true:false;if(!_172&&!_173&&!_174&&!_175&&!_176&&!_177&&!_178){if(dojo.byId("RatePortlet")){dojo.style("RatePortlet","width",10);dojo.style("RatePortlet","position","relative");dojo.style("RatePortlet","left","100%");}if(dojo.byId("ratesGrid")){dojo.style("ratesGrid","width",10);dojo.style("ratesGrid","position","relative");}}}var p1=function(){try{if(dojo.byId("footerMain")&&dojo.byId("footerHtml")){dojo.byId("footerHtml").style.cssText="display:none !important";}if(dojo.query(".homepage")&&window.dontShowRouter&&window.dontShowRouter===true){dojo.style(dojo.query(".colContainer")[0],"padding-top","70px");dojo.byId("layout").style.cssText="padding:0px 24px 0px 24px !important";if(dojo.query(".colMask")[0]){dojo.style(dojo.query(".colMask")[0],"position","static");}}}catch(err){}m._setupFocus(false);_e0();_de();if(m._config.saveUnsavedData&&m._config.saveUnsavedData===true){_112();}var _179=document.querySelector(".ui-menubar-root-list");if(_179&&_179!=="undefined"){m.angularMenuReSize();window.addEventListener("resize",m.angularMenuReSize());}},p2=function(){_d8();_cd();_e7();m.resizeCharts();_e4();_10b();m._setupFocus(true);};return this._onLoad(p1,p2);},onBeforeLoad:function(){if(window.isAccessibilitySkiptoLinksEnabled){m.skipToMenuLink();m.skipToContentLink();}},submit:function(type){if(misys.commonclient&&misys.commonclient.submit){misys.commonclient.submit(type);}else{var _17a=m.getLocalization("saveTransactionConfirmation"),_17b=function(){if(type==="SUBMITBULK"){m.submitBulk(_72);}else{m.beforeSubmit();_3a(type);}};if(dj.byId("realform_operation")&&(dj.byId("realform_operation").get("_resetValue")!=="")){originalOperationValue=dj.byId("realform_operation").get("_resetValue");}switch(type){case "VALIDATE":_3a(type);return;break;case "SUBMITBULK":case "SUBMIT":m.setCustomConfirmMessage();var _17c=m._config.globalSubmitConfirmationMsg;var _17d=misys._config.warningMessages?misys._config.warningMessages.length:0;if(_17d>0){var i;var _17e="<b><ol>";for(i=0;i<_17d;i++){_17e+=("<li>"+misys._config.warningMessages[i]+"</li>");}_17e+="</ol></b>";_17c=misys.getLocalization("submitTransactionConfirmationWithWarning",[_17e]);}_17a=(_17c&&_17c!=="")?_17c:m.getLocalization("submitTransactionConfirmation");var eucp=dj.byId("eucp_flag");if(eucp&&!eucp.get("disabled")){_17a=m.getLocalization("submitEUCPTransactionConfirmation");}break;case "SYSTEM_SUBMIT":var _17f=m.formApplicableWarningMsg();_17a=_17f?_17f:_17a;_17b=function(){_3a(type);};break;case "SAVE_TEMPLATE":_17a=m.getLocalization("saveTemplateConfirmation");_17b=function(){_3a(type);};break;case "SAVE_REPORT_TEMPLATE":_17a=m.getLocalization("saveTemplateConfirmation");_17b=function(){_3a(type);};break;case "CANCEL":_17a=m.getLocalization("cancelTransactionConfirmation");_17b=function(){_3a(type);};break;case "CANCEL_BULK_TRANSACTION":_17a=m.getLocalization("cancelTransactionConfirmation");_17b=function(){_3a(type);};break;case "REJECT":_17a=m.getLocalization("rejectTransactionConfirmation");_17b=function(){_3a(type);};break;case "RETURN_TRANSACTION":_17a=m.getLocalization("returnTransactionConfirmation");_17b=function(){_3a(type);};break;case "HELP":_fc(m._config.onlineHelpUrl,m.getLocalization("onlineHelpWindowTitle"),"width=1000,height=700,resizable=yes,scrollbars=yes");return;break;case "APPROVE":_17a=m.getLocalization("submitTransactionConfirmation");dj.byId("realform_operation").set("value","APPROVE_FEATURES");_17b=function(){_3a(type);};break;case "DELETE":_17a=m.getLocalization("deleteMCTransactionsConfirmation");dj.byId("realform_operation").set("value","APPROVE_FEATURES");_17b=function(){_3a(type);};break;case "CHECKER_WARN_DELETE_ROLE_SUBMIT":var _180=dijit.byId("featureid").get("value");var _181=dijit.byId("roletype").get("value");var _182=false;m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckRoleMapping"),handleAs:"json",preventCache:true,sync:true,content:{role_name:_180,role_type:_181},load:function(_183,args){_182=_183.isRoleMapped;},error:function(_184,args){_182=false;console.error("Checking Role mapping  error ",_184);}});if(_182){_17a=m.getLocalization("deleteMappedRoleConfirmation");}else{_17a=m.getLocalization("deleteRoleConfirmation");}dj.byId("realform_operation").set("value","APPROVE_FEATURES");_17b=function(){_3a(type);};break;case "REVERT":_17a=m.getLocalization("revertMCTransactionsConfirmation");dj.byId("realform_operation").set("value","REVERT_FEATURES");_17b=function(){_3a(type);};break;case "RETURN":_17a=m.getLocalization("returnMCTransactionsConfirmation");dj.byId("realform_operation").set("value","RETURN_FEATURES");_17b=function(){_3a(type);};break;case "DRAFT":dj.byId("realform_operation").set("value","DRAFT_FEATURES");_17b=function(){_3a(type);};break;case "MAKER_SUBMIT":m.setCustomConfirmMessage();_17c=m._config.globalSubmitConfirmationMsg;_17a=m.getLocalization("submitTransactionConfirmation");_17a=_17c?_17c:_17a;_17b=function(){_3a(type);};break;case "MAKER_BENE_SUBMIT":_17a=m.getLocalization("submitTransactionConfirmationForMasterBeneficiary");_17b=function(){_3a("MAKER_SUBMIT");};break;case "MAKER_BENE_FILE_UPLOAD_SUBMIT":_17a=m.getLocalization("submitTransactionConfirmationForBeneficiaryFileUpload");_17b=function(){_3a("MAKER_SUBMIT");};break;case "CHECKER_BENE_SUBMIT":_17a=m.getLocalization("submitTransactionConfirmationForMasterBeneficiary");dj.byId("realform_operation").set("value","APPROVE_FEATURES");_17b=function(){_3a("APPROVE");};break;case "CHECKER_BENE_FILE_UPLOAD_SUBMIT":_17a=m.getLocalization("submitTransactionConfirmationForBeneficiaryFileUpload");dj.byId("realform_operation").set("value","APPROVE_FEATURES");_17b=function(){_3a("APPROVE");};break;case "AUTO_FORWARD_SUBMIT":_17a=m.getLocalization("submitAutoForwardTransactionConfirmation");_17b=function(){_3a(type);};break;case "ADD_BULK":_17a=m.getLocalization("addBulkConfirmation");_17b=function(){_3a(type);};break;case "UPDATE_BULK":_17a=m.getLocalization("updateBulkConfirmation");_17b=function(){_3a("ADD_BULK");};break;case "CANCEL_BULK":_17a=m.getLocalization("cancelBulkConfirmation");_17b=function(){_3a(type);};break;case "SAVE_TEMPLATE_BULK":_17a=m.getLocalization("saveTemplateBulkConfirmation");_17b=function(){_3a(type);};break;case "RESUBMIT":_17a=m.getLocalization("resubmitConfirmation");_17b=function(){_3a(type);};break;default:break;}var _185=function(){if(originalOperationValue!==""){dj.byId("realform_operation").set("value",originalOperationValue);}if(m.unloadListener){window.onbeforeunload=m.unloadListener;}};m.dialog.show("CONFIRMATION",_17a,"",_17b,"","","",_185);}},acceptLegalText:function(){_3a("LEGAL_TEXT_SUBMIT");},submitBulkNoAutoForward:function(type){_3a(type);},saveAsync:function(_186){var type;if(d.query("#draftButton").length>0){type="DRAFT";dj.byId("realform_operation").set("value","DRAFT_FEATURES");}else{type="SAVE";}var _187=_62(type);if(_187!==""){m.unsavedDataOption="notset";var _188=function(){dijit.byId("entity")?dijit.byId("entity").focus():null;};m.dialog.show("ERROR",_187,"",_188);}else{var _189=d.byId("realform");d.attr(_189,"action",m.getServletURL("/screen/AsyncScreen"));var _18a={realscreen:_126()};m.xhrPost({url:m.getServletURL("/screen/AsyncScreen")+"?"+d.objectToQuery(_18a),preventCache:true,sync:true,form:_189,handleAs:"json",load:function(_18b,args){if(_18b.status==="success"){location.href=_186;m.isFormDirty=false;}else{if(_18b.status==="failure"){m.unsavedDataOption="notset";m.dialog.show("ERROR",m.getLocalization(_18b.message));}}},error:function(_18c,args){console.error("Error during Save");m.dialog.show("ERROR",m.getLocalization("technicalError"));}});}},formToXML:function(init){var _18d={selector:".validate",xmlRoot:m._config.xmlTagName,ignoreDisabled:false},xml=[];d.mixin(_18d,init);if(_18d.xmlRoot){xml=["<",_18d.xmlRoot,">"];}if(!_18d.ignoreDisabled){d.query(".dijitDisabled").forEach(function(w){var _18e=dj.byId(d.attr(w,"widgetid"));if(_18e){_18e.set("disabled",false);}});}d.query(_18d.selector).forEach(function(node){var form=dj.byId(node.id),_18f={},_190,_191,_192,_193;d.forEach(form.getDescendants(),function(_194){if(!_194.name||_18f[_194.name]){return;}_18f[_194.name]=_194;});_190=form.get("value");for(var name in _190){if(_18f.hasOwnProperty(name)){_191=_18f[name];_192=_191.declaredClass;if(_191.toXML){_193=_191.toXML();_193=(!_193)?"":_193;}else{if(name==="org_narrative_description_goods"||name==="org_narrative_documents_required"||name==="org_narrative_additional_instructions"||name==="org_narrative_special_beneficiary"||name==="org_narrative_special_recvbank"){_193=dojox.html.entities.decode(_191.value,dojox.html.entities.map);}else{_193=_b1(_190[name],_192);}}if(_191.xmlTagName){xml.push(_193);}else{xml.push("<",name,">",_193,"</",name,">");}}}});if(_18d.xmlRoot){xml.push("</",_18d.xmlRoot,">");}var _195=false;if(dj.byId("xhrDialog")&&dj.byId("xhrDialog").open){_195=true;}if(m._config.hasOwnProperty("xmlTransform")&&d.isFunction(m._config.xmlTransform)){if(m.e2ee_transaction&&m.e2ee_transaction.enabled===true&&!_195){return m.e2ee_transaction.encryptData(m._config.xmlTransform(xml.join("")));}else{return m._config.xmlTransform(xml.join(""));}}if(m.e2ee_transaction&&m.e2ee_transaction.enabled===true&&!_195){return m.e2ee_transaction.encryptData(xml.join(""));}else{return xml.join("");}},fieldToXML:function(node){var _196=dj.byId(node),_197=_196.get("name"),tag=[];if(_197){tag.push("<",_197,">",d.trim(dojox.html.entities.encode(_196.get("value"),dojox.html.entities.html)),"</",_197,">");}return tag.join("");},getDomNode:function(dom,_198){var _199=dom.getElementsByTagName(_198),xml=[],node;if(_199.length>0){xml.push("<",_198,">");node=_199[0].childNodes[0];if(node&&node.nodeValue){xml.push(dojo.isString(node.nodeValue)?dojox.html.entities.encode(node.nodeValue,dojox.html.entities.html):node.nodeValue);}xml.push("</",_198,">");}return xml.join("");},getDomValue:function(dom,_19a){var _19b=dom.getElementsByTagName(_19a),xml=[],node;if(_19b.length>0){node=_19b[0].childNodes[0];if(node&&node.nodeValue){xml.push(dojo.isString(node.nodeValue)?dojox.html.entities.encode(node.nodeValue,dojox.html.entities.html):node.nodeValue);}}return xml.join("");},toggleFields:function(_19c,_19d,_19e,_19f,_1a0){var _1a1=m._config.requiredFieldPrefix||"*",_1a2=_19e,_1a3=0,_1a4=/Check/,_1a5=/Date/,_1a6=/Time/;if(_19d&&d.isArray(_19d)){if(_19e&&d.isArray(_19e)){_1a2=_19d.concat(_19e);}else{_1a2=_19d;}_1a3=_19d.length;}d.forEach(_1a2,function(id,i){var _1a7=dj.byId(id);if(_1a7){if(!_19c&&!_19f){var _1a8=_1a7.declaredClass;var _1a9="";if(_1a4.test(_1a8)){_1a9=false;}else{if(_1a5.test(_1a8)||(_1a6.test(_1a8))){_1a9=null;}}_1a7.set("value",_1a9);}if(_1a0){_1a7.set("readOnly",false);_1a7.set("disabled",false);}else{_1a7.set("readOnly",!_19c);_1a7.set("disabled",!_19c);}if(i>=_1a3){_1a7.set("required",_19c);if(!_19c&&_1a7.validate){_1a7.validate(false);}var row=d.byId(id+"_row");if(row){var _1aa=d.query("label[for="+id+"]")[0];d.toggleClass(row,"required",_19c);var _1ab="";if(_19c){if(_1aa&&_1aa.innerHTML.indexOf(_1a1)===-1){if(!(_1a4.test(_1a8))){d.place(d.create("span",{"class":"required-field-symbol",innerHTML:_1a1}),_1aa,"first");}}}else{if(_1aa&&_1aa.innerHTML.indexOf(_1a1)!=-1){d.query("span",_1aa).orphan();}}}}}});},toggleRequired:function(node,_1ac){var _1ad=dj.byId(node);if(_1ad){_1ad.set("required",_1ac);var _1ae=d.query("#"+_1ad.id+"_row > label");_1ae.forEach(function(_1af){d.query("span",_1af).orphan();if(_1ac){d.create("span",{innerHTML:"*","class":"required-field-symbol"},_1af,"first");}});}},setFieldState:function(node,_1b0){node.state=(_1b0)?"":"Error";node._setStateClass();dj.setWaiState(node.focusNode,"invalid",!_1b0);},confirmDelete:function(_1b1,args){if(_1b1.indexOf("<")!==-1){_1b1=_1b1.replaceAll("<","&lt;");}if(_1b1!==""){this.dialog.show("CONFIRMATION",this.getLocalization("deleteTransactionConfirmation",[_1b1]),"",function(){m.post(args);});}else{this.dialog.show("CONFIRMATION",this.getLocalization("deleteTransactionConfirmationforEmptyTitle"),"",function(){m.post(args);});}},warnDeleteRole:function(_1b2,args){if(_1b2.indexOf("<")!==-1){_1b2=_1b2.replaceAll("<","&lt;");}if(_1b2!==""){var _1b3=false;var _1b4=null;for(var arg=0;arg<args.params.length;arg++){var arr=args.params[arg].name;if(arr=="Role_Type"){_1b4=args.params[arg].value;break;}}m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckRoleMapping"),handleAs:"json",preventCache:true,sync:true,content:{role_name:_1b2,role_type:_1b4},load:function(_1b5,args){_1b3=_1b5.isRoleMapped;},error:function(_1b6,args){_1b3=false;console.error("Checking Role mapping  error ",_1b6);}});if(_1b3){this.dialog.show("CONFIRMATION",this.getLocalization("deleteMappedRoleConfirmation",[_1b2]),"",function(){m.post(args);});}else{this.dialog.show("CONFIRMATION",this.getLocalization("deleteRoleConfirmation",[_1b2]),"",function(){m.post(args);});}}else{this.dialog.show("CONFIRMATION",this.getLocalization("deleteTransactionConfirmationforEmptyTitle"),"",function(){m.post(args);});}},showTooltip:function(_1b7,node,_1b8,_1b9){var _1ba=d.byId(node);if(_1ba){setTimeout(function(){dj.hideTooltip(_1ba);},(_1b9||_30));return dj.showTooltip(_1b7,_1ba,_1b8);}},toggleTransaction:function(show,_1bb,_1bc){var _1bd=d.byId("transactionDetails"),_1be=d.byId("editTransactionDetails"),_1bf=d.byId("hideTransactionDetails"),_1c0=_1bc||function(){},_1c1=dojo.fx.chain([]);if(d.style(_1bd,"position")==="absolute"){d.style(_1bd,"position","inherit");d.style(_1bd,"display","none");if(d.isIE!==6){d.style(_1bd,"left",0);}else{d.style(_1bd,"right","auto");}}if(show){var _1c2=function(){if(_1be){return m.animate("fadeOut",_1be,function(){dojo.style(_1bd,"display","none");dojo.removeClass(_1bd,"offscreen");m.animate("wipeIn",_1bd,function(){m.animate("fadeIn",_1bf,_1c0);dojo.query(tabContainr).forEach(function(t){var tabc=dijit.byId(t.id);if(tabc.resize&&d.isFunction(tabc.resize)){tabc.resize();}});});});}else{return _1c0();}};if(_1bb){m.dialog.show("CONFIRMATION",m.getLocalization("editTransactionConfirmation"),null,_1c2);}else{return _1c2();}}else{return m.animate("wipeOut",_1bd,function(){dojo.addClass(_1bd,"offscreen");m.animate("fadeOut",_1bf,function(){m.animate("fadeIn",_1be,_1c0);});});}return _1c1;},toggleAmdDetails:function(show,_1c3,_1c4){var _1c5=d.byId("amdDetails"),_1c6=d.byId("showAmdDetails"),_1c7=d.byId("hideAmdDetails"),_1c8=_1c4||function(){},_1c9=dojo.fx.chain([]);if(d.style(_1c5,"position")==="absolute"){d.style(_1c5,"position","inherit");d.style(_1c5,"display","none");if(d.isIE!==6){d.style(_1c5,"left",0);}else{d.style(_1c5,"right","auto");}}if(show){var _1ca=function(){if(_1c6){return m.animate("fadeOut",_1c6,function(){dojo.style(_1c5,"display","none");dojo.removeClass(_1c5,"offscreen");m.animate("wipeIn",_1c5,function(){m.animate("fadeIn",_1c7,_1c8);dojo.query(tabContainr).forEach(function(t){var tabc=dijit.byId(t.id);if(tabc.resize&&d.isFunction(tabc.resize)){tabc.resize();}});});});}else{return _1c8();}};if(_1c3){m.dialog.show("CONFIRMATION",m.getLocalization("editTransactionConfirmation"),null,_1ca);}else{return _1ca();}}else{return m.animate("wipeOut",_1c5,function(){dojo.addClass(_1c5,"offscreen");m.animate("fadeOut",_1c7,function(){m.animate("fadeIn",_1c6,_1c8);});});}return _1c9;},createTOC:function(){var toc=d.byId("toccontent");if(toc){if(d.style(toc,"display")==="block"){m.toggleTOC();}var _1cb=0,_1cc=d.create("ul");d.query(_2f).forEach(function(_1cd){var _1ce=_1cd.id||"link"+_1cb++;_1cd.id=_1ce;var _1cf;try{var _1d0=_1cd.firstChild;if(_1d0){_1cf=_1d0.innerHTML;}}catch(err){console.error("[m.form.common] There was an error building the TOC!");console.error(err);}if(_1cf&&_1cf!==""){var li=d.create("li");var a=d.create("a",{href:"javascript:void(0)",id:"goto_"+_1ce,innerHTML:_1cf},li);d.place(li,_1cc);}});d.empty(toc);d.place(_1cc,toc);}},toggleTOC:function(_1d1){var _1d2=d.byId("toccontent");if(_1d2){if(_1d2.innerHTML===""){m.createTOC();}var _1d3=d.byId("toggleTocLink"),_1d4=d.byId("toc"),show=(d.style(_1d2,"display")==="none"),_1d5=(show)?d.style(d.byId("toc"),"width")+6:d.style(d.byId("toc"),"width")-6,_1d6=(show)?0.9:1,_1d7=(show)?"wipeIn":"wipeOut",_1d8=(show)?m.getLocalization("hideFormSummaryMessage"):m.getLocalization("showFormSummaryMessage"),_1d9=[],_1da=[];_1d9.push(d.animateProperty({node:_1d4,properties:{width:_1d5}}));_1da=_1da.concat(m.animate(_1d7,_1d2,null,true)._animations);_1da.push(d.animateProperty({node:_1d4,properties:{opacity:_1d6}}));_1d9=dojo.fx.chain(_1d9.concat(_1da));d.connect(_1d9,"onBegin",function(){setTimeout(function(){_1d3.innerHTML=_1d8;},500);});d.connect(_1d9,"onEnd",function(){if(_1d1&&d.isFunction(_1d1)){_1d1();}});return _1d9.play();}},trim:function(str){var _1db=str+"",_1dc=[];d.forEach(_1db,function(c){if((c!=="\r")&&(c!=="\n")){_1dc.push(c);}});return d.trim(_1dc.join(""));},addMultiSelectItems:function(_1dd,_1de){var _1df=dijit.byId(_1dd),_1e0=dijit.byId(_1de);_1df.addSelected(_1e0);_1e0.focus();_1df.focus();},insertAtCursor:function(_1e1,text){var _1e2=_1e1.domNode,_1e3=_1e1.get("value");if(document.selection){_1e1.focus();var sel=window.getSelection();sel.text=text;_1e1.set("value",_1e3+text);}else{if(_1e2.selectionStart||_1e2.selectionStart=="0"){_1e1.set("value",_1e3+text);}else{_1e1.set("value",_1e3+text);}}},resizeCharts:function(){var _1e4=d.query(_31);if(_1e4.length>0){if(_37){clearTimeout(_37);}_37=setTimeout(function(){_ee(_1e4);},_35);}},resizeGrids:function(){var _1e5=d.query(_2a),_1e6=(d.isIE<=6)?2000:200;if(_1e5.length>0){if(_36){clearTimeout(_36);}_36=setTimeout(function(){_f8(_1e5);},_1e6);}},getChartImageMap:function(url,_1e7,_1e8,_1e9){m.xhrGet({url:m.getServletURL("/screen/AjaxScreen/action/"+url),handleAs:"text",contentType:"text/html; charset=utf-8",content:{getmap:"true",dealID:_1e8,borrowerID:_1e9},load:function(_1ea){d.byId(_1e7).innerHTML=_1ea;}});},showChartDialog:function(id){var _1eb=d.create("img",{src:d.attr(d.byId(id),"alt")+"&chartwidth="+_34+"&chartheight="+_33,width:_34,height:_33,alt:"Chart"});if(!_38){_38=new misys.widget.Dialog({onLoad:function(){var that=this;setTimeout(function(){that.show();},dj.defaultDuration);}});}_38.set("width",_34+50);_38.set("height",_33+50);_38.set("content",_1eb);_38.show();},isVisible:function(node){if(!node){return false;}var p;if(node.domNode){node=node.domNode;}return (dojo.style(node,"display")!="none")&&(dojo.style(node,"visibility")!="hidden")&&(p=dojo.position(node),(p.y+p.h>=0)&&(p.x+p.w>=0)&&(p.h&&p.w));},beforeSubmitValidations:function(){return true;},beforeSaveValidations:function(){return true;},onCancelNavigation:function(){return m._config.homeUrl;},setCustomConfirmMessage:function(){},localizeDate:function(_1ec){var _1ed=_1ec.get("value");if(_1ec.get("type")==="hidden"){return d.date.locale.parse(_1ed,{selector:"date",datePattern:m.getLocalization("g_strGlobalDateFormat")});}return _1ed;},validateSearchStartEndDates:function(){var _1ee=dj.byId("dttm_begin"),end=dj.byId("dttm_end");if(end&&end.get("value")===null){return true;}if(_1ee&&end){if(!m.compareDateFields(_1ee,end)){this.invalidMessage=m.getLocalization("dateRangeValidityMessage");return false;}}return true;},compareDateFields:function(_1ef,_1f0){var _1f1,_1f2,_1f3,_1f4;if(_1ef&&_1f0){_1f2=_1ef.get("value");_1f1=_1f0.get("value");if(_1f2&&_1f1){_1f3=m.localizeDate(_1ef);_1f4=m.localizeDate(_1f0);if(d.date.compare(_1f4,_1f3)<0){return false;}}}return true;},confirmMCCancel:function(_1f5,args){this.dialog.show("CONFIRMATION",this.getLocalization("cancelMCTransactionConfirmation",[_1f5]),"",function(){m.post(args);});},trimAmount:function(_1f6){var _1f7=(""+_1f6+"").replace(/[^\d.]/g,"");var _1f8=_1f7.indexOf(".");var _1f9=_1f7.length;var _1fa=_1f7;if(_1f8!==-1){for(var v=_1f9;v>_1f8;v--){var n=_1f7.charAt(v-1);if(n==="0"||n==="."){_1fa=_1fa.substring(0,v-1);}else{break;}}}return _1fa;},exportListToFormat:function(_1fb){if(d.byId(_2b)){dj.byId("export_list").set("value",_1fb);d.create("input",{type:"hidden",name:"searchFlag",value:"true"},TransactionSearchForm);dj.byId("TransactionSearchForm").submit();dj.byId("export_list").set("value","screen");}},exportListFormat:function(_1fc){if(d.byId(_2b)){dj.byId("export_list").set("value",_1fc);var form=dj.byId("TransactionSearchForm");var _1fd=dj.byId("account_no");var _1fe=dj.byId("account_no").get("value");var _1ff=dj.byId("entity");var _200;if(dj.byId("operation")&&dj.byId("operation").get("value")==="LIST_BALANCES"){if(_1ff&&_1ff.get("value")===""){m.dialog.show("ERROR",m.getLocalization("entityNotSelectedError"));return;}}else{if(dj.byId("operation")&&dj.byId("operation").get("value")==="LIST_STATEMENTS"){if(_1ff&&_1ff.get("value")===""){m.dialog.show("ERROR",m.getLocalization("entityNotSelectedError"));dj.byId("export_list").set("value","");return;}if(_1fd.get("value")===""){m.dialog.show("ERROR","Please select an account.");dj.byId("export_list").set("value","");return;}}}if(dijit.byId("is_acc_mandatory")&&_1fe==""){m.dialog.show("ERROR",m.getLocalization("EmptyAccountError"));}else{if(dijit.byId("account_id")&&dijit.byId("account_id").get("value")){dijit.byId("account_no").set("required",false);dijit.byId("account_no").set("value","");}var _201;var _202;var _203;var _204;var _205;if(_1fc==="swift941"||_1fc==="swift942"){if(dijit.byId("owner_type").get("value")=="05"){m.dialog.show("ERROR",m.getLocalization("ExternalAccountError"));}else{var _206=dj.byId("Current Day").get("value");_201=dj.byId("dateRange").get("value");_202=dj.byId("create_date").get("value");_203=dj.byId("create_date2").get("value");_204=dj.byId("today").get("value");_205=dojo.date.locale.format(_203,{datePattern:misys.getLocalization("g_strGlobalDateFormat"),selector:"date"});if((_206==="1")||((_201==="5")&&(dojo.date.compare(_202,_203)==0)&&(_204===_205))){if(_1fc==="swift942"){dj.byId("export_list").set("value","swift");}form.submit();}else{m.dialog.show("ERROR",m.getLocalization("MT941942ExportError"));}}}else{form.submit();}}if(dijit.byId("account_id")&&dijit.byId("account_id").get("value")){dijit.byId("account_no").set("value",_1fe);dijit.byId("account_no").set("required",true);}dj.byId("export_list").set("value","screen");}},exportListToFormatInXsl:function(_207){var _208=dijit.byId("facility_id")?dijit.byId("facility_id").value:"";dojo.io.iframe._currentDfd=null;dojo.io.iframe.send({url:m.getServletURL("/screen/AjaxScreen/action/GetLimitData"),handleAs:"json",sync:true,content:{option:_207,facility_id:_208,token:document.getElementById("_token").getAttribute("value")}});},exportListToFormatInXslPdfRpmntSc:function(_209,_20a){dojo.io.iframe._currentDfd=null;var form=document.createElement("FORM");form.setAttribute("id","dummyform");document.body.appendChild(form);dojo.io.iframe.send({url:m.getServletURL("/screen/AjaxScreen/action/LoanRepaymentScheduleAction"),handleAs:"json",form:"dummyform",method:"POST",sync:true,content:{option:_209,allColumn:_20a,token:document.getElementById("_token").getAttribute("value")}});},getFrequencyCodeData:function(_20b){var _20c;m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetFrequencyCodeData"),handleAs:"json",sync:true,content:{frequencyValue:_20b},load:function(_20d){_20c=_20d.items.long_desc;},error:function(){_20c=_20b;}});return _20c;},getBalanceTypeCodeData:function(_20e){var _20f;m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetBalanceTypeCodeData"),handleAs:"json",sync:true,content:{balance_type_Value:_20e},load:function(_210){_20f=_210.items.long_desc;},error:function(){_20f=_20e;}});return _20f;},getsubGroupTypeData:function(_211){var _212;m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetSubGrpTypeCodeData"),handleAs:"json",sync:true,content:{subGrp_type_Value:_211},load:function(_213){_212=_213.items.long_desc;},error:function(){_212=_211;}});return _212;},preDisplayAssigneeType:function(_214){var _215=m._config.task_mode||"userandbank";dojo.forEach(_214,function(_216){if(_216.description==="user_to_bank"&&dj.byId(_216.id)){if(_215==="userandbank"){if(dj.byId(_216.id)){dj.byId(_216.id).set("disabled",false);}else{console.error("Could not find widget with id "+_216.id);}}else{if(dj.byId(_216.id)){dj.byId(_216.id).set("disabled",true);}else{console.error("Could not find widget with id "+_216.id);}}}});},isFormDirty:false,isSystemButtonClicked:false,unsavedDataOption:"notset",excludedMethods:[{object:m,method:"submit"}],markFormDirty:function(){m.isFormDirty=true;},isPopupRequired:function(){var _217=false;if(m.isFormDirty&&m.unsavedDataOption==="notset"){if(dojo.query(".saveButton").length>0){_217=true;}}return _217;},unloadListener:function(){if(misys.isFormDirty&&misys.isFormDirty===true&&m._config.saveUnsavedData&&m._config.saveUnsavedData===true){if(m.unsavedDataOption==="save"){return undefined;}else{if(m.unsavedDataOption==="nosave"){return undefined;}else{return m.getLocalization("unsavedData");}}}},setUnsavedDataOption:function(val){misys.unsavedDataOption=val;},showUnsavedDataDialog:function(){var _218=dijit.byId("unsavedDataDialog");var _219=dojo.byId("unsavedDataDialogButtons");var _21a=dijit.byId("SaveContButton").domNode;var _21b=dijit.byId("ContButton").domNode;var _21c=dijit.byId("CancelButton").domNode;var _21d=dijit.byId("unsavedDataDialog").domNode;dojo.style(_219,"display","block");dojo.style(_21a,"display",inlneBlock);dojo.style(_21b,"display",inlneBlock);dojo.style(_21c,"display",inlneBlock);dojo.style(_21d,"display",inlneBlock);_218.set("title",misys.getLocalization("unsavedDataPreUnload"));misys.dialog.connect(_218,"onKeyPress",function(evt){if(evt.keyCode===dojo.keys.ESCAPE){dojo.stopEvent(evt);}});misys.dialog.connect(dijit.byId("SaveContButton"),"onMouseUp",function(){misys.dialog.disconnect(_218);_218.hide();},_218.id);misys.dialog.connect(dijit.byId("ContButton"),"onMouseUp",function(){misys.dialog.disconnect(_218);_218.hide();},_218.id);misys.dialog.connect(dijit.byId("CancelButton"),"onMouseUp",function(){misys.dialog.disconnect(_218);_218.hide();},_218.id);misys.dialog.connect(_218,"onHide",function(){misys.dialog.disconnect(_218);});_218.show();},reloadChartImg:function(){var _21e=dojo.query("#GTPRootPortlet > .portlet-section-body > div.widgetContainer");var form=dj.byId("TransactionSearchForm");var _21f=/Date/;var _220=/Time/;if(form&&_21e&&_21e[0]&&_21e[0].id){var _221=_21e[0].id.split("id")[1];var _222=dojo.query("#chart"+_221)[0];if(_222&&_222.src&&_222.alt){var _223=_222.alt;form.getDescendants().forEach(function(_224,i){if(_224.name){var _225;if(_224.declaredClass=="dijit.form.RadioButton"){var _226=dojo.query("[name='"+_224.name+"']",form.domNode);d.some(_226,function(_227){var _228=dj.byNode(_227.parentNode);if(_228.checked){_225=_228.params.value;}});}else{_225=_224.get("value");}if(_21f.test(_224.declaredClass)||(_220.test(_224.declaredClass))){_225=_224.get("displayedValue");}if(_225===" "){_225="";}if(_224.type!=="hidden"){_223=_f3(_223,_224.get("name"),_225);}}});_222.alt=_223;m.resizeCharts();}}},formApplicableWarningMsg:function(){var _229=m._config.globalSubmitConfirmationMsg;var _22a=misys._config.warningMessages?misys._config.warningMessages.length:0;if(_22a>0){var i;var _22b="<b><ol>";for(i=0;i<_22a;i++){_22b+=("<li>"+misys._config.warningMessages[i]+"</li>");}_22b+="</ol></b>";_229=misys.getLocalization("submitTransactionConfirmationWithWarning",[_22b]);}return (_229&&_229!=="")?_229:"";},toggleErrorSection:function(_22c){var _22d=d.byId("errorContent");if(_22d){var _22e=d.byId("errorLink"),_22f=d.byId("errorSection"),show=(d.style(_22d,"display")==="none"),_230=(show)?d.style(d.byId("errorSection"),"width")+6:d.style(d.byId("errorSection"),"width")-6,_231=(show)?0.9:1,_232=(show)?"wipeIn":"wipeOut",_233=(show)?m.getLocalization("hideErrorSectionMessage"):m.getLocalization("showErrorSectionMessage"),_234=[],_235=[];_234.push(d.animateProperty({node:_22f,properties:{width:_230}}));_235=_235.concat(m.animate(_232,_22d,null,true)._animations);_235.push(d.animateProperty({node:_22f,properties:{opacity:_231}}));_234=dojo.fx.chain(_234.concat(_235));d.connect(_234,"onBegin",function(){setTimeout(function(){_22e.innerHTML=_233;},500);});d.connect(_234,"onEnd",function(){if(_22c&&d.isFunction(_22c)){_22c();}});return _234.play();}},encryptText:function(_236){if(misys._config.clientSideEncryption){var rsa=new RSAKey();var _237=misys._config.htmlUsedModulus;var _238=misys._config.cr_seq;rsa.setPublic(_237,"10001");return rsa.encrypt(_236)+_238;}else{return _236;}}});m.popup=m.popup||{};d.mixin(m.popup,{showPreview:function(type,_239,_23a,_23b,_23c,_23d,_23e){var _23f="ReportingPopup",url=[];if(misys._config.isBank==="false"&&misys._config.fccuiEnabled&&misys._config.fccuiEnabled==="true"&&m.isAngularProductUrl(_239,"")){url.push("/view?");url.push("referenceid=",_23a);url.push("&tnxid=",_23b);url.push("&productCode=",_239);url.push("&subProductCode=","");url.push("&mode=","view");url.push("&operation=","PREVIEW");url.push("&tnxTypeCode=",_23c);url.push("&subTnxTypeCode=",_23d);url.push("&eventTnxStatCode=","");var _240=window.open(m.getServletURL("").replace(/.$/,"#")+url.join(""),"_blank","top=100,left=200,height=400,width=900,toolbar=no,resizable=no");_240.onload=function(){var _241=misys.getLocalization("mainTitle");var _242=misys.getLocalization(_239);_240.document.title=_241+" - "+_242;};}else{var _243="",_244="",_245="",_246="";if(_23b){_243="&tnxid="+_23b;}if(_23c&&_23c!==""){_244="&tnxtype="+_23c;}if(_23d&&_23d!==""){_245="&subtnxtype="+_23d;}if(_23e){_23f=_23e;}url=["/screen/",_23f];url.push("?option=",type,"&titlecode=INFO_MSG_PREVIEW_UNCONTROLLED&referenceid=",_23a,_243);url.push(_244);url.push(_245);url.push(prductCode,_239);if(window.isAccessibilityEnabled&&window.document.title&&window.document.title!==""){url.push("&parenttitle=",window.document.title);}_fc(m.getServletURL(url.join("")));}},showSummary:function(type,_247,_248,_249,_24a){switch(type.toLowerCase()){case "print":d.global.print();break;case "close":d.global.close();break;case "export":if(_247){_247=_247.toLowerCase();var _24b=_247;if(_247==="summary"){_24b="EXPORT_PDF_SUMMARY";}else{if(_247==="full"){_24b="EXPORT_PDF_FULL";}else{if(_247==="details"){_24b="EXPORT_PDF_DETAILS";}else{if(_247==="pdf_ec_details"){_24b="PDF_EC_DETAILS";}else{if(_247==="csv_bk_details"){_24b="CSV_BK_DETAILS";}else{if(_247==="snapshot_pdf"){_24b="SNAPSHOT_PDF";}else{if(_247==="updated"){_24b="EXPORT_PDF_FULL";}}}}}}}_24b=_24b.toUpperCase();var url=[reportingPopup];url.push("?option=",_24b);url.push(refrnceId,_248);if(_249&&_249!==""){url.push("&tnxid=",_249);}url.push(prductCode,_24a);_fc(misys.getServletURL(url.join("")));}break;default:break;}},showPDF:function(url){_fc(misys.getServletURL(url));},showReporting:function(type,_24c,_24d,_24e,_24f,_250,_251,_252,_253){var _254,_255=[],_256=[],_257=[],_258=[],_259="ReportingPopup",url=[],_25a=[],_25b=[],_25c=[];if(misys._config.isBank==="false"&&misys._config.fccuiEnabled&&misys._config.fccuiEnabled==="true"&&m.isAngularProductUrl(_24c,_253)){url.push("/view?");url.push("referenceid=",_24d);url.push("&tnxid=",_24e);url.push("&productCode=",_24c);url.push("&subProductCode=",_253);url.push("&mode=","view");url.push("&operation=","PREVIEW");url.push("&tnxTypeCode=",_24f);url.push("&subTnxTypeCode=",_250);url.push("&eventTnxStatCode=",_251);var _25d=window.open(m.getServletURL("").replace(/.$/,"#")+url.join(""),"_blank","top=100,left=200,height=400,width=900,toolbar=no,resizable=no");_25d.onload=function(){var _25e=misys.getLocalization("mainTitle");var _25f=misys.getLocalization(_24c);_25d.document.title=_25e+" - "+_25f;};}else{if(_24c&&_24c!==""){_255.push(prductCode,_24c);}if(_24d&&_24d!==""){_256.push(refrnceId,_24d);}if(_24e&&_24e!==""){_257.push("&tnxid=",_24e);}if(_24f&&_24f!==""){_25a.push("&tnxtype=",_24f);}if(_250&&_250!==""){_25b.push("&subtnxtype=",_250);}if(_251&&_251!==""){_25c.push("&tnxstatus=",_251);}if(_252&&_252!==""){_259=_252;}url.push("/screen/",_259);url.push("?option=",type);url.push(_256.join(""),_257.join(""),_255.join(""),_25a.join(""),_25b.join(""),_25c.join(""));if(window.isAccessibilityEnabled&&window.document.title&&window.document.title!==""){_258.push("&parentTitle=",window.document.title);url.push(_258.join(""));}_fc(m.getServletURL(url.join("")));}},openIframePopup:function(type,_260,_261,_262){var _263=[],_264=[],_265=[],_266=[],_267="IframePopup",url=[];if(misys._config.isBank==="false"&&misys._config.fccuiEnabled&&misys._config.fccuiEnabled==="true"&&m.isAngularProductUrl(prodCode,subProductCode)){url.push("/view?");url.push("entitlementcode=",_260);url.push("&companyabbvname=",_262);url.push("&entitlementdescription=",entitlementdescription);url.push("&mode=","view");url.push("&operation=","PREVIEW");window.open(m.getServletURL("").replace(/.$/,"#")+url.join(""),"_blank","top=100,left=200,height=400,width=900,toolbar=no,resizable=no");}else{if(_260&&_260!==""){_263.push(entitlementCod,_260);}if(_261&&_261!==""){_264.push(entitlementDescp,_261);}if(_262&&_262!==""){_265.push("&companyAbbvName=",_262);}url.push("/screen/",_267);url.push("?option=",type);url.push(_264.join(""),_265.join(""),_263.join(""));if(window.isAccessibilityEnabled&&window.document.title&&window.document.title!==""){_266.push("&parentTitle=",window.document.title);url.push(_266.join(""));}_fc(m.getServletURL(url.join("")));}},showPopup:function(_268,_269){var url=[];url.push("/screen/","ReportingPopup");url.push("?option=",_269);var _26a=misys.getLocalization("transactionPopupWindowTitle");var _26b=document.createElement("form");_26b.target=_26a;_26b.method="POST";_26b.action=m.getServletURL(url.join(""));if(window.isAccessibilityEnabled&&window.document.title&&window.document.title!==""){_268=_268+"&parenttitle="+window.document.title;}if(_268){var _26c=_268.split("&");for(var i=0;i<_26c.length;i++){if(_26c[i]){if(_26c[i].indexOf("=")==-1){_26c[i-1]=_26c[i-1]+"&"+_26c[i];var _26d=Array.from(_26c);_26d.splice(i,1);_26c=_26d;}}}for(i=0;i<_26c.length;i++){if(_26c[i]){var _26e=_26c[i].split("=");var _26f=document.createElement("input");_26f.type="hidden";_26f.name=_26e[0];var _270=_26e[1];if(_26e.length>2){for(var j=2;j<_26e.length;j++){_270=_270+"="+_26e[j];}}_26f.value=_270;_26b.appendChild(_26f);}}}document.body.appendChild(_26b);var _271;if(misys._config.showAddressBarInPopup&&misys._config.showAddressBarInPopup==true){_271=d.global.open("",_26a,"width=800,height=500,resizable=yes,scrollbars=yes,location=yes");}else{_271=d.global.open("",_26a,"width=800,height=500,resizable=yes,scrollbars=yes");}if(!_271.opener){_271.opener=self;}_271.focus();if(_271){_26b.submit();}},generateDocument:function(type,_272,_273,_274,_275,_276,_277){switch(type.toLowerCase()){case "bg-document":var url=[reportingPopup];url.push("?option=",_272);if(_273&&_273!==""){url.push(refrnceId,_273);}if(_274&&_274!==""){url.push("&tnxid=",_274);}url.push(prductCode,_275);if(_276&&!(_276==="")){url.push("&featureid=",_276);}if(_277&&!(_277==="")){url.push("&companyId=",_277);}_fc(m.getServletURL(url.join(""),null,m.getLocalization("pdfSummaryWindowTitle")));break;case "si-document":var _278=[reportingPopup];_278.push("?option=",_272);if(_273&&_273!==""){_278.push(refrnceId,_273);}if(_274&&_274!==""){_278.push("&tnxid=",_274);}_278.push(prductCode,_275);if(_276&&!(_276==="")){_278.push("&featureid=",_276);}if(_277&&!(_277==="")){_278.push("&companyId=",_277);}_fc(m.getServletURL(_278.join(""),null,m.getLocalization("pdfSummaryWindowTitle")));break;default:break;}},showBulkSummary:function(type,_279,_27a,_27b,_27c,_27d){var _27e;if(!_27d){if(dj.byId("export_field")){_27e=dj.byId("export_field").get("value");m.popup.showSummary(type,_27e,_27a,_27b,_27c);}}else{if(_27d){if(dj.byId("export_field_bottom")){_27e=dj.byId("export_field_bottom").get("value");m.popup.showSummary(type,_27e,_27a,_27b,_27c);}}}}});m.dialog=m.dialog||{};d.mixin(m.dialog,{populate:function(type,url,_27f,_280){var _281=_27f||"misys.binding.dialog";m._config.popupType=type;d["require"](_281+"."+type);var _282=d.byId(type+"data");if(!_282){console.error("[misys.common] Cannot populate the dialog with content for URL",url);console.error("[misys.common] Check that the dialog content has an element with","ID equal to",(type+"data"));return;}var dim=d.coords(_282),_283=d.create("div",{id:"contentPaneContainer"});var _284;if(!dj.byId("contentPane")){_284=new dijit.layout.ContentPane({id:"contentPane",style:{height:dim.h+"px",width:dim.w+"px",overflow:"auto",position:"relative"}});}else{_284=dj.byId("contentPane");}_284.placeAt(_283,"first");d.style(_283,"visibility","hidden");d.style(_283,"height","0px");d.place(_283,_282,"after");m.animate("wipeOut",_282,function(){m.animate("wipeIn",_283,function(){m.connect(_284.get("id"),"onLoad",function(){m.dialog.bind();_111();_cd(_25);});if(_280){_284.set("ioMethod",m.xhrPost);_284.set("ioArgs",{content:_280});}_284.set("href",url);_284.startup();_284.resize();},null,null,true);},null,null,true);},clear:function(_285,_286,_287,_288){var _289=d.byId("contentPaneContainer");if(_288){if(d.byId("responseXHRDialogDiv")){d.destroy(d.byId("responseXHRDialogDiv"));}var _28a=dojo.create("div");_28a.id="responseXHRDialogDiv";dojo.addClass(_28a,"responseXHRDialogDiv");d.place(_288,_28a,"first");}m.animate("wipeOut",_289,function(){d.place(_289,d.body(),"last");if(_288){d.place(_28a,_285,"first");}m.animate("wipeIn",_285,function(){_286.destroyRecursive();d.destroy(_289);if(_287&&d.isFunction(_287)){_287();}delete m._config.popupType;});});},submit:function(_28b){switch(_28b){case "SUBMIT":undefined;var _28c=dj.byId("product_code")?dj.byId("product_code").get("value"):null;var _28d=false;if(_28c==="LC"||_28c==="EL"||_28c==="SI"||_28c==="SR"){_28d=true;}var _28e=d.query("#"+_25);if(_72(false,_28e)){var _28f=m.getLocalization("submitTransactionConfirmation");m.dialog.show("CONFIRMATION",_28f,"",function(){var _290=dj.byId("popup_realform_operation");if(_290.get("value")===""){_290.set("value","SUBMIT");}dj.byId("popup_TransactionData").set("value",m.formToXML({ignoreDisabled:_28d,selector:"#"+_25,xmlRoot:dj.byId("node_name").get("value")}));_6c("popup_realform",function(){m.grid.setStoreURL(dj.byId(m._config.popupType+"data_grid"));});});}else{_7a(_25);m.dialog.show("ERROR",m.getLocalization("mandatoryFieldsToSubmitError"),"",function(){_72(true,_28e);});}break;case "CANCEL":m.dialog.clear(d.byId(m._config.popupType+"data"),dj.byId("contentPane"));break;case "HELP":_fc(m._config.onlineHelpUrl,m.getLocalization("onlineHelpWindowTitle"),"width=1000,height=700,resizable=yes,scrollbars=yes");return;break;default:break;}},passBack:function(_291,_292,_293,type){var _294=null;var _295=null;var _296=null;var _297=null;var _298=null;var _299=null;var _29a=null;var _29b=_291.indexOf("applicant_act_nickname")!==-1?_291.indexOf("applicant_act_nickname"):_291.indexOf("applicant_collection_act_nickname");var _29c=_291.indexOf("beneficiary_account_nickname");var _29d=_291.indexOf("beneficiary_nickname");_296=_291.indexOf("customer_associated_bank");_297=_292[_29b];_299=_292[_29d];_298=_292[_29c];var _29e=_292[_296];if(_29e!==""&&_29e!==null){m._config.customerBankName=_29e;}if(_297!==undefined&&_297!==""&&_297!==null&&dj.byId("applicant_act_nickname")){dj.byId("applicant_act_nickname").set("value",_297);}if(_299!==undefined&&_299!==""&&_299!==null&&dj.byId("beneficiary_nickname")){dj.byId("beneficiary_nickname").set("value",_299);}if(_298!==undefined&&_298!==""&&_298!==null&&dj.byId("beneficiary_act_nickname")){dj.byId("beneficiary_act_nickname").set("value",_298);}var _29f=dj.byId("childXhrDialog"),_2a0=/SimpleTextArea/,_2a1=/SimpleTextarea/,_2a2=/FilteringSelect/,obj;if(type==="swift_bic"){m._config.isBankDetailsPopulated=true;}else{if(type==="beneficiary_accounts"){m._config.isBeneficiaryAccountsPopulated=true;}}d.forEach(_291,function(id,_2a3){var _2a4=["seller_account_type"];obj=dj.byId(id);if(obj){var _2a5=_292[_2a3];if(_2a0.test(obj.declaredClass)||_2a1.test(obj.declaredClass)){if(obj.get("value")!==""){_2a5="\n"+_2a5;}m.insertAtCursor(obj,_2a5);}else{if(_2a2.test(obj.declaredClass)){if(_2a4.indexOf(obj.id)>-1){obj.set("value",_2a5);}else{if(type==="treasury_beneficiary_accounts"){obj.set("value",_2a5);obj.set("displayedValue",_2a5);}else{obj.set("value","");obj.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_2a5}});}}}else{obj.set("value",_2a5);}}obj.onChange();obj.onFocus();obj.onBlur();}});var _2a6="false";if(dj.byId("show_bic_code")){_2a6=dj.byId("show_bic_code").get("value");}if(_2a6==="true"){if(type==="treasury_beneficiary_accounts"&&dj.byId("beneficiary_bank_bic")&&dj.byId("beneficiary_bank_bic").get("value")!==""){dj.byId("beneficiary_bank").set("value","");dj.byId("beneficiary_bank_branch").set("value","");dj.byId("beneficiary_bank_address").set("value","");dj.byId("beneficiary_bank_city").set("value","");dj.byId("beneficiary_bank_country").set("value","");dj.byId("beneficiary_bank_bic").set("disabled",true);}}if(_29f){if(_293){m.dialog.connect(_29f,"onHide",function(){setTimeout(function(){dj.byId("xhrDialog").hide();},dj.defaultDuration);});}_29f.hide();}else{if(dj.byId("xhrDialog")){dj.byId("xhrDialog").hide();}}var _2a7=dj.byId("01entity");var _2a8=dj.byId("02entity");var _2a9=dj.byId("03entity");if(_2a7){_2a7.set("value",_292[0]);}if(_2a8){_2a8.set("value",_292[0]);}if(_2a9){_2a9.set("value",_292[0]);}var _2aa=_292[_291.indexOf("swift_charges_type")];if(_2aa){if(_2aa==="01"){document.getElementById("swift_charges_type_1").click();}else{if(_2aa==="02"){document.getElementById("swift_charges_type_2").click();}else{if(_2aa==="05"){document.getElementById("swift_charges_type_3").click();}}}}if(d.isFunction(m._config.passBack)){return m._config.passBack(_291,_292,_293);}}});d.subscribe("ready",function(){if(d.query(_31).length>0){m.connect(window,"onresize",m.resizeCharts);}if(d.query(_2a).length>0){m.connect(window,"onresize",m.resizeGrids);}});})(dojo,dijit,misys);dojo.require("misys.client.common_client");}