/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["misys.validation.login"]){dojo._hasResource["misys.validation.login"]=true;dojo.provide("misys.validation.login");(function(d,m){function _1(_2){var _3;if(dijit.byId("new_user_name")){_3=dijit.byId("new_user_name");}else{if(dijit.byId("login_id")){_3=dijit.byId("login_id");}}var _4="";if(_2.items.valid===true){if(_3!=undefined){_3.focus();_4=m.getLocalization("userNameExists",[_3.get("value")]);_3.set("value","");_3.set("state","Error");dijit.hideTooltip(_3.domNode);dijit.showTooltip(_4,_3.domNode,0);}}else{}};d.mixin(m,{checkUserExists:function(){var _5;var _6=dijit.byId("new_user_name");var _7=dijit.byId("password_value");var _8;if(_7&&_7.get("value")!=""){if(_6&&_6!=""&&_6.get("value")==dijit.byId("password_value").get("value").toUpperCase()){_7.set("state","Error");dijit.showTooltip(m.getLocalization("passwordContainsLoginIdError"),_7.domNode,0);}else{if(_6&&_6!=""&&(_7.get("value").toUpperCase().indexOf(_6.get("value").toUpperCase()))!==-1&&"false"===misys._e2ee.allowUserNameInPasswordValue){_7.set("state","Error");dijit.showTooltip(m.getLocalization("passwordContainsLoginIdError"),_7.domNode,0);}}}if(dijit.byId("new_user_name")){_5=dijit.byId("new_user_name");}else{if(dijit.byId("login_id")){_5=dijit.byId("login_id");}}var _9=(_5!=undefined)?_5.get("value"):"";var _a=dijit.byId("company");var _b=_a.get("value");if(_9!=""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckUserNameAction"),handleAs:"json",sync:true,content:{new_user_name:_9,company_name:_b},load:_1});}},checkEmailExists:function(){var _c=dijit.byId("email");var _d=dijit.byId("login_id");var _e=dijit.byId("company");var _f=_c?_c.get("value"):"";var _10=_d?_d.get("value"):"";var _11=_e?_e.get("value"):"";var _12=(_c&&(_c.get("state")==="Error"||_c.get("state")==="Incomplete"||_c.readOnly||_c.disabled))?false:true;if(_f&&_12){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckEmailUniquenessAction"),handleAs:"json",sync:true,content:{emailInContext:_f,loginInContext:_10,companyInContext:_11},load:function(_13){var _14="";if(!_13.items.isEmailUnique){_12=true;_14=m.getLocalization("emailIdExists",[_f]);m.dialog.show("CUSTOM-NO-CANCEL",_14,"Email Error",function(){dj.hideTooltip(_c.domNode);dj.showTooltip(_14,_c.domNode,0);});setTimeout(function(){dj.hideTooltip(_c.domNode);},5000);}}});}return _12;}});})(dojo,misys);dojo.require("misys.client.validation.login_client");}