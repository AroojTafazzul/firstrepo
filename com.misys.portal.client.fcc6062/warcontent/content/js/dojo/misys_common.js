/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

/*
	This is an optimized version of Dojo, built for deployment and not for
	development. To get sources and documentation, please visit:

		http://dojotoolkit.org
*/

dojo.provide("misys.layer.common");if(!dojo._hasResource["dojo.cldr.supplemental"]){dojo._hasResource["dojo.cldr.supplemental"]=true;dojo.provide("dojo.cldr.supplemental");dojo.getObject("cldr.supplemental",true,dojo);dojo.cldr.supplemental.getFirstDayOfWeek=function(_1){var _2={mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,er:6,et:6,iq:6,ir:6,jo:6,ke:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,so:6,sy:6,tn:6,ye:6,ar:0,as:0,az:0,bw:0,ca:0,cn:0,fo:0,ge:0,gl:0,gu:0,hk:0,il:0,"in":0,jm:0,jp:0,kg:0,kr:0,la:0,mh:0,mn:0,mo:0,mp:0,mt:0,nz:0,ph:0,pk:0,sg:0,th:0,tt:0,tw:0,um:0,us:0,uz:0,vi:0,zw:0};var _3=dojo.cldr.supplemental._region(_1);var _4=_2[_3];return (_4===undefined)?1:_4;};dojo.cldr.supplemental._region=function(_5){_5=dojo.i18n.normalizeLocale(_5);var _6=_5.split("-");var _7=_6[1];if(!_7){_7={de:"de",en:"us",es:"es",fi:"fi",fr:"fr",he:"il",hu:"hu",it:"it",ja:"jp",ko:"kr",nl:"nl",pt:"br",sv:"se",zh:"cn"}[_6[0]];}else{if(_7.length==4){_7=_6[2];}}return _7;};dojo.cldr.supplemental.getWeekend=function(_8){var _9={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5};var _a={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6};var _b=dojo.cldr.supplemental._region(_8);var _c=_9[_b];var _d=_a[_b];if(_c===undefined){_c=6;}if(_d===undefined){_d=0;}return {start:_c,end:_d};};}if(!dojo._hasResource["dojo.date"]){dojo._hasResource["dojo.date"]=true;dojo.provide("dojo.date");dojo.getObject("date",true,dojo);dojo.date.getDaysInMonth=function(_e){var _f=_e.getMonth();var _10=[31,28,31,30,31,30,31,31,30,31,30,31];if(_f==1&&dojo.date.isLeapYear(_e)){return 29;}return _10[_f];};dojo.date.isLeapYear=function(_11){var _12=_11.getFullYear();return !(_12%400)||(!(_12%4)&&!!(_12%100));};dojo.date.getTimezoneName=function(_13){var str=_13.toString();var tz="";var _14;var pos=str.indexOf("(");if(pos>-1){tz=str.substring(++pos,str.indexOf(")"));}else{var pat=/([A-Z\/]+) \d{4}$/;if((_14=str.match(pat))){tz=_14[1];}else{str=_13.toLocaleString();pat=/ ([A-Z\/]+)$/;if((_14=str.match(pat))){tz=_14[1];}}}return (tz=="AM"||tz=="PM")?"":tz;};dojo.date.compare=function(_15,_16,_17){_15=new Date(+_15);_16=new Date(+(_16||new Date()));if(_17=="date"){_15.setHours(0,0,0,0);_16.setHours(0,0,0,0);}else{if(_17=="time"){_15.setFullYear(0,0,0);_16.setFullYear(0,0,0);}}if(_15>_16){return 1;}if(_15<_16){return -1;}return 0;};dojo.date.add=function(_18,_19,_1a){var sum=new Date(+_18);var _1b=false;var _1c="Date";switch(_19){case "day":break;case "weekday":var _1d,_1e;var mod=_1a%5;if(!mod){_1d=(_1a>0)?5:-5;_1e=(_1a>0)?((_1a-5)/5):((_1a+5)/5);}else{_1d=mod;_1e=parseInt(_1a/5);}var _1f=_18.getDay();var adj=0;if(_1f==6&&_1a>0){adj=1;}else{if(_1f==0&&_1a<0){adj=-1;}}var _20=_1f+_1d;if(_20==0||_20==6){adj=(_1a>0)?2:-2;}_1a=(7*_1e)+_1d+adj;break;case "year":_1c="FullYear";_1b=true;break;case "week":_1a*=7;break;case "quarter":_1a*=3;case "month":_1b=true;_1c="Month";break;default:_1c="UTC"+_19.charAt(0).toUpperCase()+_19.substring(1)+"s";}if(_1c){sum["set"+_1c](sum["get"+_1c]()+_1a);}if(_1b&&(sum.getDate()<_18.getDate())){sum.setDate(0);}return sum;};dojo.date.difference=function(_21,_22,_23){_22=_22||new Date();_23=_23||"day";var _24=_22.getFullYear()-_21.getFullYear();var _25=1;switch(_23){case "quarter":var m1=_21.getMonth();var m2=_22.getMonth();var q1=Math.floor(m1/3)+1;var q2=Math.floor(m2/3)+1;q2+=(_24*4);_25=q2-q1;break;case "weekday":var _26=Math.round(dojo.date.difference(_21,_22,"day"));var _27=parseInt(dojo.date.difference(_21,_22,"week"));var mod=_26%7;if(mod==0){_26=_27*5;}else{var adj=0;var _28=_21.getDay();var _29=_22.getDay();_27=parseInt(_26/7);mod=_26%7;var _2a=new Date(_21);_2a.setDate(_2a.getDate()+(_27*7));var _2b=_2a.getDay();if(_26>0){switch(true){case _28==6:adj=-1;break;case _28==0:adj=0;break;case _29==6:adj=-1;break;case _29==0:adj=-2;break;case (_2b+mod)>5:adj=-2;}}else{if(_26<0){switch(true){case _28==6:adj=0;break;case _28==0:adj=1;break;case _29==6:adj=2;break;case _29==0:adj=1;break;case (_2b+mod)<0:adj=2;}}}_26+=adj;_26-=(_27*2);}_25=_26;break;case "year":_25=_24;break;case "month":_25=(_22.getMonth()-_21.getMonth())+(_24*12);break;case "week":_25=parseInt(dojo.date.difference(_21,_22,"day")/7);break;case "day":_25/=24;case "hour":_25/=60;case "minute":_25/=60;case "second":_25/=1000;case "millisecond":_25*=_22.getTime()-_21.getTime();}return Math.round(_25);};}if(!dojo._hasResource["dojo.date.locale"]){dojo._hasResource["dojo.date.locale"]=true;dojo.provide("dojo.date.locale");dojo.getObject("date.locale",true,dojo);(function(){function _2c(_2d,_2e,_2f,_30){return _30.replace(/([a-z])\1*/ig,function(_31){var s,pad,c=_31.charAt(0),l=_31.length,_32=["abbr","wide","narrow"];switch(c){case "G":s=_2e[(l<4)?"eraAbbr":"eraNames"][_2d.getFullYear()<0?0:1];break;case "y":s=_2d.getFullYear();switch(l){case 1:break;case 2:if(!_2f.fullYear){s=String(s);s=s.substr(s.length-2);break;}default:pad=true;}break;case "Q":case "q":s=Math.ceil((_2d.getMonth()+1)/3);pad=true;break;case "M":var m=_2d.getMonth();if(l<3){s=m+1;pad=true;}else{var _33=["months","format",_32[l-3]].join("-");s=_2e[_33][m];}break;case "w":var _34=0;s=dojo.date.locale._getWeekOfYear(_2d,_34);pad=true;break;case "d":s=_2d.getDate();pad=true;break;case "D":s=dojo.date.locale._getDayOfYear(_2d);pad=true;break;case "E":var d=_2d.getDay();if(l<3){s=d+1;pad=true;}else{var _35=["days","format",_32[l-3]].join("-");s=_2e[_35][d];}break;case "a":var _36=(_2d.getHours()<12)?"am":"pm";s=_2f[_36]||_2e["dayPeriods-format-wide-"+_36];break;case "h":case "H":case "K":case "k":var h=_2d.getHours();switch(c){case "h":s=(h%12)||12;break;case "H":s=h;break;case "K":s=(h%12);break;case "k":s=h||24;break;}pad=true;break;case "m":s=_2d.getMinutes();pad=true;break;case "s":s=_2d.getSeconds();pad=true;break;case "S":s=Math.round(_2d.getMilliseconds()*Math.pow(10,l-3));pad=true;break;case "v":case "z":s=dojo.date.locale._getZone(_2d,true,_2f);if(s){break;}l=4;case "Z":var _37=dojo.date.locale._getZone(_2d,false,_2f);var tz=[(_37<=0?"+":"-"),dojo.string.pad(Math.floor(Math.abs(_37)/60),2),dojo.string.pad(Math.abs(_37)%60,2)];if(l==4){tz.splice(0,0,"GMT");tz.splice(3,0,":");}s=tz.join("");break;default:throw new Error("dojo.date.locale.format: invalid pattern char: "+_30);}if(pad){s=dojo.string.pad(s,l);}return s;});};dojo.date.locale._getZone=function(_38,_39,_3a){if(_39){return dojo.date.getTimezoneName(_38);}else{return _38.getTimezoneOffset();}};dojo.date.locale.format=function(_3b,_3c){_3c=_3c||{};var _3d=dojo.i18n.normalizeLocale(_3c.locale),_3e=_3c.formatLength||"short",_3f=dojo.date.locale._getGregorianBundle(_3d),str=[],_40=dojo.hitch(this,_2c,_3b,_3f,_3c);if(_3c.selector=="year"){return _41(_3f["dateFormatItem-yyyy"]||"yyyy",_40);}var _42;if(_3c.selector!="date"){_42=_3c.timePattern||_3f["timeFormat-"+_3e];if(_42){str.push(_41(_42,_40));}}if(_3c.selector!="time"){_42=_3c.datePattern||_3f["dateFormat-"+_3e];if(_42){str.push(_41(_42,_40));}}return str.length==1?str[0]:_3f["dateTimeFormat-"+_3e].replace(/\{(\d+)\}/g,function(_43,key){return str[key];});};dojo.date.locale.regexp=function(_44){return dojo.date.locale._parseInfo(_44).regexp;};dojo.date.locale._parseInfo=function(_45){_45=_45||{};var _46=dojo.i18n.normalizeLocale(_45.locale),_47=dojo.date.locale._getGregorianBundle(_46),_48=_45.formatLength||"short",_49=_45.datePattern||_47["dateFormat-"+_48],_4a=_45.timePattern||_47["timeFormat-"+_48],_4b;if(_45.selector=="date"){_4b=_49;}else{if(_45.selector=="time"){_4b=_4a;}else{_4b=_47["dateTimeFormat-"+_48].replace(/\{(\d+)\}/g,function(_4c,key){return [_4a,_49][key];});}}var _4d=[],re=_41(_4b,dojo.hitch(this,_4e,_4d,_47,_45));return {regexp:re,tokens:_4d,bundle:_47};};dojo.date.locale.parse=function(_4f,_50){var _51=/[\u200E\u200F\u202A\u202E]/g,_52=dojo.date.locale._parseInfo(_50),_53=_52.tokens,_54=_52.bundle,re=new RegExp("^"+_52.regexp.replace(_51,"")+"$",_52.strict?"":"i"),_55=re.exec(_4f&&_4f.replace(_51,""));if(!_55){return null;}var _56=["abbr","wide","narrow"],_57=[1970,0,1,0,0,0,0],_58="",_59=dojo.every(_55,function(v,i){if(!i){return true;}var _5a=_53[i-1];var l=_5a.length;switch(_5a.charAt(0)){case "y":if(l!=2&&_50.strict){_57[0]=v;}else{if(v<100){v=Number(v);var _5b=""+new Date().getFullYear(),_5c=_5b.substring(0,2)*100,_5d=Math.min(Number(_5b.substring(2,4))+20,99),num=(v<_5d)?_5c+v:_5c-100+v;_57[0]=num;}else{if(_50.strict){return false;}_57[0]=v;}}break;case "M":if(l>2){var _5e=_54["months-format-"+_56[l-3]].concat();if(!_50.strict){v=v.replace(".","").toLowerCase();_5e=dojo.map(_5e,function(s){return s.replace(".","").toLowerCase();});}v=dojo.indexOf(_5e,v);if(v==-1){return false;}}else{v--;}_57[1]=v;break;case "E":case "e":var _5f=_54["days-format-"+_56[l-3]].concat();if(!_50.strict){v=v.toLowerCase();_5f=dojo.map(_5f,function(d){return d.toLowerCase();});}v=dojo.indexOf(_5f,v);if(v==-1){return false;}break;case "D":_57[1]=0;case "d":_57[2]=v;break;case "a":var am=_50.am||_54["dayPeriods-format-wide-am"],pm=_50.pm||_54["dayPeriods-format-wide-pm"];if(!_50.strict){var _60=/\./g;v=v.replace(_60,"").toLowerCase();am=am.replace(_60,"").toLowerCase();pm=pm.replace(_60,"").toLowerCase();}if(_50.strict&&v!=am&&v!=pm){return false;}_58=(v==pm)?"p":(v==am)?"a":"";break;case "K":if(v==24){v=0;}case "h":case "H":case "k":if(v>23){return false;}_57[3]=v;break;case "m":_57[4]=v;break;case "s":_57[5]=v;break;case "S":_57[6]=v;}return true;});var _61=+_57[3];if(_58==="p"&&_61<12){_57[3]=_61+12;}else{if(_58==="a"&&_61==12){_57[3]=0;}}var _62=new Date(_57[0],_57[1],_57[2],_57[3],_57[4],_57[5],_57[6]);if(_50.strict){_62.setFullYear(_57[0]);}var _63=_53.join(""),_64=_63.indexOf("d")!=-1,_65=_63.indexOf("M")!=-1;if(!_59||(_65&&_62.getMonth()>_57[1])||(_64&&_62.getDate()>_57[2])){return null;}if((_65&&_62.getMonth()<_57[1])||(_64&&_62.getDate()<_57[2])){_62=dojo.date.add(_62,"hour",1);}return _62;};function _41(_66,_67,_68,_69){var _6a=function(x){return x;};_67=_67||_6a;_68=_68||_6a;_69=_69||_6a;var _6b=_66.match(/(''|[^'])+/g),_6c=_66.charAt(0)=="'";dojo.forEach(_6b,function(_6d,i){if(!_6d){_6b[i]="";}else{_6b[i]=(_6c?_68:_67)(_6d.replace(/''/g,"'"));_6c=!_6c;}});return _69(_6b.join(""));};function _4e(_6e,_6f,_70,_71){_71=dojo.regexp.escapeString(_71);if(!_70.strict){_71=_71.replace(" a"," ?a");}return _71.replace(/([a-z])\1*/ig,function(_72){var s,c=_72.charAt(0),l=_72.length,p2="",p3="";if(_70.strict){if(l>1){p2="0"+"{"+(l-1)+"}";}if(l>2){p3="0"+"{"+(l-2)+"}";}}else{p2="0?";p3="0{0,2}";}switch(c){case "y":s="\\d{2,4}";break;case "M":s=(l>2)?"\\S+?":"1[0-2]|"+p2+"[1-9]";break;case "D":s="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+p3+"[1-9][0-9]|"+p2+"[1-9]";break;case "d":s="3[01]|[12]\\d|"+p2+"[1-9]";break;case "w":s="[1-4][0-9]|5[0-3]|"+p2+"[1-9]";break;case "E":s="\\S+";break;case "h":s="1[0-2]|"+p2+"[1-9]";break;case "k":s="1[01]|"+p2+"\\d";break;case "H":s="1\\d|2[0-3]|"+p2+"\\d";break;case "K":s="1\\d|2[0-4]|"+p2+"[1-9]";break;case "m":case "s":s="[0-5]\\d";break;case "S":s="\\d{"+l+"}";break;case "a":var am=_70.am||_6f["dayPeriods-format-wide-am"],pm=_70.pm||_6f["dayPeriods-format-wide-pm"];s=am+"|"+pm;if(!_70.strict){if(am!=am.toLowerCase()){s+="|"+am.toLowerCase();}if(pm!=pm.toLowerCase()){s+="|"+pm.toLowerCase();}if(s.indexOf(".")!=-1){s+="|"+s.replace(/\./g,"");}}s=s.replace(/\./g,"\\.");break;default:s=".*";}if(_6e){_6e.push(_72);}return "("+s+")";}).replace(/[\xa0 ]/g,"[\\s\\xa0]");};})();(function(){var _73=[];dojo.date.locale.addCustomFormats=function(_74,_75){_73.push({pkg:_74,name:_75});};dojo.date.locale._getGregorianBundle=function(_76){var _77={};dojo.forEach(_73,function(_78){var _79=dojo.i18n.getLocalization(_78.pkg,_78.name,_76);_77=dojo.mixin(_77,_79);},this);return _77;};})();dojo.date.locale.addCustomFormats("dojo.cldr","gregorian");dojo.date.locale.getNames=function(_7a,_7b,_7c,_7d){var _7e,_7f=dojo.date.locale._getGregorianBundle(_7d),_80=[_7a,_7c,_7b];if(_7c=="standAlone"){var key=_80.join("-");_7e=_7f[key];if(_7e[0]==1){_7e=undefined;}}_80[1]="format";return (_7e||_7f[_80.join("-")]).concat();};dojo.date.locale.isWeekend=function(_81,_82){var _83=dojo.cldr.supplemental.getWeekend(_82),day=(_81||new Date()).getDay();if(_83.end<_83.start){_83.end+=7;if(day<_83.start){day+=7;}}return day>=_83.start&&day<=_83.end;};dojo.date.locale._getDayOfYear=function(_84){return dojo.date.difference(new Date(_84.getFullYear(),0,1,_84.getHours()),_84)+1;};dojo.date.locale._getWeekOfYear=function(_85,_86){if(arguments.length==1){_86=0;}var _87=new Date(_85.getFullYear(),0,1).getDay(),adj=(_87-_86+7)%7,_88=Math.floor((dojo.date.locale._getDayOfYear(_85)+adj-1)/7);if(_87==_86){_88++;}return _88;};}if(!dojo._hasResource["dijit.form.DropDownButton"]){dojo._hasResource["dijit.form.DropDownButton"]=true;dojo.provide("dijit.form.DropDownButton");}if(!dojo._hasResource["dijit.Calendar"]){dojo._hasResource["dijit.Calendar"]=true;dojo.provide("dijit.Calendar");dojo.declare("dijit.Calendar",[dijit._Widget,dijit._Templated,dijit._CssStateMixin],{templateString:dojo.cache("dijit","templates/Calendar.html","<table cellspacing=\"0\" cellpadding=\"0\" class=\"dijitCalendarContainer\" role=\"grid\" dojoAttachEvent=\"onkeypress: _onKeyPress\" aria-labelledby=\"${id}_year\">\n\t<thead>\n\t\t<tr class=\"dijitReset dijitCalendarMonthContainer\" valign=\"top\">\n\t\t\t<th class='dijitReset dijitCalendarArrow' dojoAttachPoint=\"decrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarDecrease\" role=\"presentation\"/>\n\t\t\t\t<span dojoAttachPoint=\"decreaseArrowNode\" class=\"dijitA11ySideArrow\">-</span>\n\t\t\t</th>\n\t\t\t<th class='dijitReset' colspan=\"5\">\n\t\t\t\t<div dojoType=\"dijit.form.DropDownButton\" dojoAttachPoint=\"monthDropDownButton\"\n\t\t\t\t\tid=\"${id}_mddb\" tabIndex=\"-1\">\n\t\t\t\t</div>\n\t\t\t</th>\n\t\t\t<th class='dijitReset dijitCalendarArrow' dojoAttachPoint=\"incrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarIncrease\" role=\"presentation\"/>\n\t\t\t\t<span dojoAttachPoint=\"increaseArrowNode\" class=\"dijitA11ySideArrow\">+</span>\n\t\t\t</th>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<th class=\"dijitReset dijitCalendarDayLabelTemplate\" role=\"columnheader\"><span class=\"dijitCalendarDayLabel\"></span></th>\n\t\t</tr>\n\t</thead>\n\t<tbody dojoAttachEvent=\"onclick: _onDayClick, onmouseover: _onDayMouseOver, onmouseout: _onDayMouseOut, onmousedown: _onDayMouseDown, onmouseup: _onDayMouseUp\" class=\"dijitReset dijitCalendarBodyContainer\">\n\t\t<tr class=\"dijitReset dijitCalendarWeekTemplate\" role=\"row\">\n\t\t\t<td class=\"dijitReset dijitCalendarDateTemplate\" role=\"gridcell\"><span class=\"dijitCalendarDateLabel\"></span></td>\n\t\t</tr>\n\t</tbody>\n\t<tfoot class=\"dijitReset dijitCalendarYearContainer\">\n\t\t<tr>\n\t\t\t<td class='dijitReset' valign=\"top\" colspan=\"7\">\n\t\t\t\t<h3 class=\"dijitCalendarYearLabel\">\n\t\t\t\t\t<span dojoAttachPoint=\"previousYearLabelNode\" class=\"dijitInline dijitCalendarPreviousYear\"></span>\n\t\t\t\t\t<span dojoAttachPoint=\"currentYearLabelNode\" class=\"dijitInline dijitCalendarSelectedYear\" id=\"${id}_year\"></span>\n\t\t\t\t\t<span dojoAttachPoint=\"nextYearLabelNode\" class=\"dijitInline dijitCalendarNextYear\"></span>\n\t\t\t\t</h3>\n\t\t\t</td>\n\t\t</tr>\n\t</tfoot>\n</table>\n"),widgetsInTemplate:true,value:new Date(""),datePackage:"dojo.date",dayWidth:"narrow",tabIndex:"0",currentFocus:new Date(),baseClass:"dijitCalendar",cssStateNodes:{"decrementMonth":"dijitCalendarArrow","incrementMonth":"dijitCalendarArrow","previousYearLabelNode":"dijitCalendarPreviousYear","nextYearLabelNode":"dijitCalendarNextYear"},_isValidDate:function(_89){return _89&&!isNaN(_89)&&typeof _89=="object"&&_89.toString()!=this.constructor.prototype.value.toString();},setValue:function(_8a){dojo.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",_8a);},_getValueAttr:function(){var _8b=new this.dateClassObj(this.value);_8b.setHours(0,0,0,0);if(_8b.getDate()<this.value.getDate()){_8b=this.dateFuncObj.add(_8b,"hour",1);}return _8b;},_setValueAttr:function(_8c,_8d){if(_8c){_8c=new this.dateClassObj(_8c);}if(this._isValidDate(_8c)){if(!this._isValidDate(this.value)||this.dateFuncObj.compare(_8c,this.value)){_8c.setHours(1,0,0,0);if(!this.isDisabledDate(_8c,this.lang)){this._set("value",_8c);this.set("currentFocus",_8c);if(_8d||typeof _8d=="undefined"){this.onChange(this.get("value"));this.onValueSelected(this.get("value"));}}}}else{this._set("value",null);this.set("currentFocus",this.currentFocus);}},_setText:function(_8e,_8f){while(_8e.firstChild){_8e.removeChild(_8e.firstChild);}_8e.appendChild(dojo.doc.createTextNode(_8f));},_populateGrid:function(){var _90="";if(dijit.byId("customer_bank")&&dijit.byId("customer_bank").get("value")!==""&&misys&&misys._config&&misys._config.businessDateForBank&&misys._config.businessDateForBank&&[dijit.byId("customer_bank").get("value")][0]&&misys._config.businessDateForBank&&[dijit.byId("customer_bank").get("value")][0].value!==""){_90=misys._config.businessDateForBank[dijit.byId("customer_bank").get("value")][0].value;}else{if(dijit.byId("issuing_bank_abbv_name")&&dijit.byId("issuing_bank_abbv_name").get("value")!==""&&misys&&misys._config&&misys._config.businessDateForBank&&[dijit.byId("issuing_bank_abbv_name").get("value")][0]&&misys._config.businessDateForBank&&[dijit.byId("issuing_bank_abbv_name").get("value")][0].value!==""){_90=misys._config.businessDateForBank[dijit.byId("issuing_bank_abbv_name").get("value")][0].value;}else{if(dijit.byId("remitting_bank_abbv_name")&&dijit.byId("remitting_bank_abbv_name").get("value")!==""&&misys&&misys._config&&misys._config.businessDateForBank&&[dijit.byId("remitting_bank_abbv_name").get("value")][0]&&misys._config.businessDateForBank&&[dijit.byId("remitting_bank_abbv_name").get("value")][0].value!==""){_90=misys._config.businessDateForBank[dijit.byId("remitting_bank_abbv_name").get("value")][0].value;}else{if(dijit.byId("recipient_bank_abbv_name")&&dijit.byId("recipient_bank_abbv_name").get("value")!==""&&misys&&misys._config&&misys._config.businessDateForBank&&[dijit.byId("recipient_bank_abbv_name").get("value")][0]&&misys._config.businessDateForBank&&[dijit.byId("recipient_bank_abbv_name").get("value")][0].value!==""){_90=misys._config.businessDateForBank[dijit.byId("recipient_bank_abbv_name").get("value")][0].value;}else{if(dijit.byId("advising_bank_abbv_name")&&dijit.byId("advising_bank_abbv_name").get("value")!==""&&misys&&misys._config&&misys._config.businessDateForBank&&[dijit.byId("advising_bank_abbv_name").get("value")][0]&&misys._config.businessDateForBank&&[dijit.byId("advising_bank_abbv_name").get("value")][0].value!==""){_90=misys._config.businessDateForBank[dijit.byId("advising_bank_abbv_name").get("value")][0].value;}else{if(dijit.byId("bank_abbv_name")&&dijit.byId("bank_abbv_name").get("value")!==""&&misys&&misys._config&&misys._config.businessDateForBank&&[dijit.byId("bank_abbv_name").get("value")][0]&&misys._config.businessDateForBank&&[dijit.byId("bank_abbv_name").get("value")][0].value!==""){_90=misys._config.businessDateForBank[dijit.byId("bank_abbv_name").get("value")][0].value;}else{if(misys&&misys._config&&misys._config.bankBusinessDate&&misys._config.bankBusinessDate!==""){_90=misys._config.bankBusinessDate;}}}}}}}var _91=new this.dateClassObj(this.currentFocus);_91.setDate(1);var _92=_91.getDay(),_93=this.dateFuncObj.getDaysInMonth(_91),_94=this.dateFuncObj.getDaysInMonth(this.dateFuncObj.add(_91,"month",-1)),_95=null;if(_90!==""){var _96=_90.substring(0,4);var _97=_90.substring(5,7);var _98=_90.substring(8,10);_95=new this.dateClassObj(_96,_97-1,_98);}else{_95=new this.dateClassObj();}var _99=dojo.cldr.supplemental.getFirstDayOfWeek(this.lang);if(_99>_92){_99-=7;}dojo.query(".dijitCalendarDateTemplate",this.domNode).forEach(function(_9a,i){i+=_99;var _9b=new this.dateClassObj(_91),_9c,_9d="dijitCalendar",adj=0;if(i<_92){_9c=_94-_92+i+1;adj=-1;_9d+="Previous";}else{if(i>=(_92+_93)){_9c=i-_92-_93+1;adj=1;_9d+="Next";}else{_9c=i-_92+1;_9d+="Current";}}if(adj){_9b=this.dateFuncObj.add(_9b,"month",adj);}_9b.setDate(_9c);if(!this.dateFuncObj.compare(_9b,_95,"date")){_9d="dijitCalendarCurrentDate "+_9d;}if(this._isSelectedDate(_9b,this.lang)){_9d="dijitCalendarSelectedDate "+_9d;}if(this.isDisabledDate(_9b,this.lang)){_9d="dijitCalendarDisabledDate "+_9d;}var _9e=this.getClassForDate(_9b,this.lang);if(_9e){_9d=_9e+" "+_9d;}_9a.className=_9d+"Month dijitCalendarDateTemplate";_9a.dijitDateValue=_9b.valueOf();dojo.attr(_9a,"dijitDateValue",_9b.valueOf());var _9f=dojo.query(".dijitCalendarDateLabel",_9a)[0],_a0=_9b.getDateLocalized?_9b.getDateLocalized(this.lang):_9b.getDate();this._setText(_9f,_a0);},this);var _a1=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,_91);this.monthDropDownButton.dropDown.set("months",_a1);this.monthDropDownButton.containerNode.innerHTML=(dojo.isIE==6?"":"<div class='dijitSpacer'>"+this.monthDropDownButton.dropDown.domNode.innerHTML+"</div>")+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+_a1[_91.getMonth()]+"</div>";var y=_91.getFullYear()-1;var d=new this.dateClassObj();dojo.forEach(["previous","current","next"],function(_a2){d.setFullYear(y++);this._setText(this[_a2+"YearLabelNode"],this.dateLocaleModule.format(d,{selector:"year",locale:this.lang}));},this);},goToToday:function(){this.set("value",new this.dateClassObj());},constructor:function(_a3){var _a4=(_a3.datePackage&&(_a3.datePackage!="dojo.date"))?_a3.datePackage+".Date":"Date";this.dateClassObj=dojo.getObject(_a4,false);this.datePackage=_a3.datePackage||this.datePackage;this.dateFuncObj=dojo.getObject(this.datePackage,false);this.dateLocaleModule=dojo.getObject(this.datePackage+".locale",false);},postMixInProperties:function(){if(isNaN(this.value)){delete this.value;}this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);dojo.setSelectable(this.domNode,false);var _a5=dojo.hitch(this,function(_a6,n){var _a7=dojo.query(_a6,this.domNode)[0];for(var i=0;i<n;i++){_a7.parentNode.appendChild(_a7.cloneNode(true));}});_a5(".dijitCalendarDayLabelTemplate",6);_a5(".dijitCalendarDateTemplate",6);_a5(".dijitCalendarWeekTemplate",5);var _a8=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang);var _a9=dojo.cldr.supplemental.getFirstDayOfWeek(this.lang);dojo.query(".dijitCalendarDayLabel",this.domNode).forEach(function(_aa,i){this._setText(_aa,_a8[(i+_a9)%7]);},this);var _ab=new this.dateClassObj(this.currentFocus);this.monthDropDownButton.dropDown=new dijit.Calendar._MonthDropDown({id:this.id+"_mdd",onChange:dojo.hitch(this,"_onMonthSelect")});this.set("currentFocus",_ab,false);var _ac=this;var _ad=function(_ae,_af,adj){_ac._connects.push(dijit.typematic.addMouseListener(_ac[_ae],_ac,function(_b0){if(_b0>=0){_ac._adjustDisplay(_af,adj);}},0.8,500));};_ad("incrementMonth","month",1);_ad("decrementMonth","month",-1);_ad("nextYearLabelNode","year",1);_ad("previousYearLabelNode","year",-1);},_adjustDisplay:function(_b1,_b2){this._setCurrentFocusAttr(this.dateFuncObj.add(this.currentFocus,_b1,_b2));},_setCurrentFocusAttr:function(_b3,_b4){var _b5=this.currentFocus,_b6=_b5?dojo.query("[dijitDateValue="+_b5.valueOf()+"]",this.domNode)[0]:null;_b3=new this.dateClassObj(_b3);_b3.setHours(1,0,0,0);this._set("currentFocus",_b3);this._populateGrid();var _b7=dojo.query("[dijitDateValue="+_b3.valueOf()+"]",this.domNode)[0];_b7.setAttribute("tabIndex",this.tabIndex);if(this._focused||_b4){_b7.focus();}if(_b6&&_b6!=_b7){if(dojo.isWebKit){_b6.setAttribute("tabIndex","-1");}else{_b6.removeAttribute("tabIndex");}}},focus:function(){this._setCurrentFocusAttr(this.currentFocus,true);},_onMonthSelect:function(_b8){this.currentFocus=this.dateFuncObj.add(this.currentFocus,"month",_b8-this.currentFocus.getMonth());this._populateGrid();},_onDayClick:function(evt){dojo.stopEvent(evt);for(var _b9=evt.target;_b9&&!_b9.dijitDateValue;_b9=_b9.parentNode){}if(_b9&&!dojo.hasClass(_b9,"dijitCalendarDisabledDate")){this.set("value",_b9.dijitDateValue);}},_onDayMouseOver:function(evt){var _ba=dojo.hasClass(evt.target,"dijitCalendarDateLabel")?evt.target.parentNode:evt.target;if(_ba&&(_ba.dijitDateValue||_ba==this.previousYearLabelNode||_ba==this.nextYearLabelNode)){dojo.addClass(_ba,"dijitCalendarHoveredDate");this._currentNode=_ba;}},_onDayMouseOut:function(evt){if(!this._currentNode){return;}if(evt.relatedTarget&&evt.relatedTarget.parentNode==this._currentNode){return;}var cls="dijitCalendarHoveredDate";if(dojo.hasClass(this._currentNode,"dijitCalendarActiveDate")){cls+=" dijitCalendarActiveDate";}dojo.removeClass(this._currentNode,cls);this._currentNode=null;},_onDayMouseDown:function(evt){var _bb=evt.target.parentNode;if(_bb&&_bb.dijitDateValue){dojo.addClass(_bb,"dijitCalendarActiveDate");this._currentNode=_bb;}},_onDayMouseUp:function(evt){var _bc=evt.target.parentNode;if(_bc&&_bc.dijitDateValue){dojo.removeClass(_bc,"dijitCalendarActiveDate");}},handleKey:function(evt){var _bd=false;var dk=dojo.keys,_be=-1,_bf,_c0=this.currentFocus;switch(evt.keyCode){case dk.RIGHT_ARROW:_be=1;case dk.LEFT_ARROW:_bf="day";if(!this.isLeftToRight()){_be*=-1;}break;case dk.DOWN_ARROW:_be=1;case dk.UP_ARROW:_bf="week";break;case dk.PAGE_DOWN:_be=1;case dk.PAGE_UP:_bf=evt.ctrlKey||evt.altKey?"year":"month";break;case dk.END:_c0=this.dateFuncObj.add(_c0,"month",1);_bf="day";case dk.HOME:_c0=new this.dateClassObj(_c0);_c0.setDate(1);break;case dk.ENTER:case dk.SPACE:if(window.isAccessibilityEnabled==true){_bd=true;}this.set("value",this.currentFocus);break;default:return true;}if(_bf){_c0=this.dateFuncObj.add(_c0,_bf,_be);}this._setCurrentFocusAttr(_c0);if(_bd){this.domNode.tBodies[0].click();}return false;},_onKeyPress:function(evt){if(!this.handleKey(evt)){dojo.stopEvent(evt);}},onValueSelected:function(_c1){},onChange:function(_c2){},_isSelectedDate:function(_c3,_c4){return this._isValidDate(this.value)&&!this.dateFuncObj.compare(_c3,this.value,"date");},isDisabledDate:function(_c5,_c6){},getClassForDate:function(_c7,_c8){}});dojo.declare("dijit.Calendar._MonthDropDown",[dijit._Widget,dijit._Templated],{months:[],templateString:"<div class='dijitCalendarMonthMenu dijitMenu' "+"dojoAttachEvent='onclick:_onClick,onmouseover:_onMenuHover,onmouseout:_onMenuHover'></div>",_setMonthsAttr:function(_c9){this.domNode.innerHTML=dojo.map(_c9,function(_ca,idx){return _ca?"<div class='dijitCalendarMonthLabel' month='"+idx+"'>"+_ca+"</div>":"";}).join("");},_onClick:function(evt){this.onChange(dojo.attr(evt.target,"month"));},onChange:function(_cb){},_onMenuHover:function(evt){dojo.toggleClass(evt.target,"dijitCalendarMonthLabelHover",evt.type=="mouseover");}});}if(!dojo._hasResource["dijit.form._DateTimeTextBox"]){dojo._hasResource["dijit.form._DateTimeTextBox"]=true;dojo.provide("dijit.form._DateTimeTextBox");new Date("X");dojo.declare("dijit.form._DateTimeTextBox",[dijit.form.RangeBoundTextBox,dijit._HasDropDown],{templateString:dojo.cache("dijit.form","templates/DropDownBox.html","<div class=\"dijit dijitReset dijitInlineTable dijitLeft\"\n\tid=\"widget_${id}\"\n\trole=\"combobox\"\n\t><div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer'\n\t\tdojoAttachPoint=\"_buttonNode, _popupStateNode\" role=\"presentation\"\n\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input aria-label=\"Form field error\" class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' ${!nameAttrSetting} type=\"text\" autocomplete=\"off\"\n\t\t\tdojoAttachPoint=\"textbox,focusNode\" role=\"textbox\" aria-haspopup=\"true\"\n\t/></div\n></div>\n"),hasDownArrow:true,openOnClick:true,regExpGen:dojo.date.locale.regexp,datePackage:"dojo.date",compare:function(_cc,_cd){var _ce=this._isInvalidDate(_cc);var _cf=this._isInvalidDate(_cd);return _ce?(_cf?0:-1):(_cf?1:dojo.date.compare(_cc,_cd,this._selector));},forceWidth:true,format:function(_d0,_d1){if(!_d0){return "";}return this.dateLocaleModule.format(_d0,_d1);},"parse":function(_d2,_d3){return this.dateLocaleModule.parse(_d2,_d3)||(this._isEmpty(_d2)?null:undefined);},serialize:function(val,_d4){if(val.toGregorian){val=val.toGregorian();}return dojo.date.stamp.toISOString(val,_d4);},dropDownDefaultValue:new Date(),value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(_d5){var _d6=_d5.datePackage?_d5.datePackage+".Date":"Date";this.dateClassObj=dojo.getObject(_d6,false);this.value=new this.dateClassObj("");this.datePackage=_d5.datePackage||this.datePackage;this.dateLocaleModule=dojo.getObject(this.datePackage+".locale",false);this.regExpGen=this.dateLocaleModule.regexp;this._invalidDate=dijit.form._DateTimeTextBox.prototype.value.toString();if(misys&&misys._config&&misys._config.bankBusinessDate){var _d7=misys._config.bankBusinessDate.substring(0,4);var _d8=misys._config.bankBusinessDate.substring(5,7);var _d9=misys._config.bankBusinessDate.substring(8,10);this.dropDownDefaultValue=new Date(_d7,_d8-1,_d9);}},buildRendering:function(){this.inherited(arguments);if(!this.hasDownArrow){this._buttonNode.style.display="none";}if(this.openOnClick||!this.hasDownArrow){this._buttonNode=this.domNode;this.baseClass+=" dijitComboBoxOpenOnClick";}},_setConstraintsAttr:function(_da){_da.selector=this._selector;_da.fullYear=true;var _db=dojo.date.stamp.fromISOString;if(typeof _da.min=="string"){_da.min=_db(_da.min);}if(typeof _da.max=="string"){_da.max=_db(_da.max);}this.inherited(arguments);},_isInvalidDate:function(_dc){return !_dc||isNaN(_dc)||typeof _dc!="object"||_dc.toString()==this._invalidDate;},_setValueAttr:function(_dd,_de,_df){if(_dd!==undefined){if(typeof _dd=="string"){_dd=dojo.date.stamp.fromISOString(_dd);}if(this._isInvalidDate(_dd)){_dd=null;}if(_dd instanceof Date&&!(this.dateClassObj instanceof Date)){_dd=new this.dateClassObj(_dd);}}this.inherited(arguments);if(this.dropDown){this.dropDown.set("value",_dd,false);}},_set:function(_e0,_e1){if(_e0=="value"&&this.value instanceof Date&&this.compare(_e1,this.value)==0){return;}this.inherited(arguments);},_setDropDownDefaultValueAttr:function(val){var x=val.toString()==this._invalidDate;var y=!val;var z=isNaN(val);var p=typeof val!="object";var q=val.toString()==this._invalidDate;if(this._isInvalidDate(val)){if(misys&&misys._config&&misys._config.bankBusinessDate&&misys._config.bankBusinessDate!==""){var _e2=misys._config.bankBusinessDate.substring(0,4);var _e3=misys._config.bankBusinessDate.substring(5,7);var _e4=misys._config.bankBusinessDate.substring(8,10);val=new this.dateClassObj(_e2,_e3-1,_e4);}else{val=new this.dateClassObj();}}this.dropDownDefaultValue=val;},openDropDown:function(_e5){if(this.dropDown){this.dropDown.destroy();}var _e6=dojo.getObject(this.popupClass,false),_e7=this,_e8=this.get("value");this.dropDown=new _e6({onChange:function(_e9){dijit.form._DateTimeTextBox.superclass._setValueAttr.call(_e7,_e9,true);},id:this.id+"_popup",dir:_e7.dir,lang:_e7.lang,value:_e8,currentFocus:!this._isInvalidDate(_e8)?_e8:this.dropDownDefaultValue,constraints:_e7.constraints,filterString:_e7.filterString,datePackage:_e7.datePackage,isDisabledDate:function(_ea){return !_e7.rangeCheck(_ea,_e7.constraints);}});this.inherited(arguments);},_getDisplayedValueAttr:function(){return this.textbox.value;},_setDisplayedValueAttr:function(_eb,_ec){this._setValueAttr(this.parse(_eb,this.constraints),_ec,_eb);}});}if(!dojo._hasResource["dijit.form.DateTextBox"]){dojo._hasResource["dijit.form.DateTextBox"]=true;dojo.provide("dijit.form.DateTextBox");dojo.declare("dijit.form.DateTextBox",dijit.form._DateTimeTextBox,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:"dijit.Calendar",_selector:"date",value:new Date(""),buildRendering:function(){this.inherited(arguments);if(window.isAccessibilityEnabled){dijit.setWaiState(this.textbox,"describedby","date-instructions");}}});}if(!dojo._hasResource["dojo.cldr.monetary"]){dojo._hasResource["dojo.cldr.monetary"]=true;dojo.provide("dojo.cldr.monetary");dojo.getObject("cldr.monetary",true,dojo);dojo.cldr.monetary.getData=function(_ed){var _ee={ADP:0,AFN:0,ALL:2,AMD:0,BHD:3,BIF:0,BYR:0,CLF:0,CLP:0,CRC:0,DJF:0,ESP:0,GNF:0,GYD:0,IQD:3,IRR:3,ISK:0,ITL:0,JOD:3,JPY:0,KMF:0,KPW:0,KRW:0,KWD:3,LAK:0,LUF:0,LYD:3,MGA:0,MGF:0,MMK:2,MNT:0,MRO:0,OMR:3,PYG:0,RWF:0,SLL:0,SOS:0,STD:0,TMM:0,TND:3,TRL:0,TZS:0,UGX:0,UZS:0,VND:0,VUV:0,XAF:0,XOF:0,XPF:0,YER:0,ZMK:0,ZWD:0};var _ef={CHF:5};var _f0=_ee[_ed],_f1=_ef[_ed];if(typeof _f0=="undefined"){_f0=2;}if(typeof _f1=="undefined"){_f1=0;}return {places:_f0,round:_f1};};}if(!dojo._hasResource["dojo.currency"]){dojo._hasResource["dojo.currency"]=true;dojo.provide("dojo.currency");dojo.getObject("currency",true,dojo);dojo.currency._mixInDefaults=function(_f2){_f2=_f2||{};_f2.type="currency";var _f3=dojo.i18n.getLocalization("dojo.cldr","currency",_f2.locale)||{};var iso=_f2.currency;var _f4=dojo.cldr.monetary.getData(iso);dojo.forEach(["displayName","symbol","group","decimal"],function(_f5){_f4[_f5]=_f3[iso+"_"+_f5];});_f4.fractional=[true,false];return dojo.mixin(_f4,_f2);};dojo.currency.format=function(_f6,_f7){return dojo.number.format(_f6,dojo.currency._mixInDefaults(_f7));};dojo.currency.regexp=function(_f8){return dojo.number.regexp(dojo.currency._mixInDefaults(_f8));};dojo.currency.parse=function(_f9,_fa){return dojo.number.parse(_f9,dojo.currency._mixInDefaults(_fa));};}if(!dojo._hasResource["dijit.form.NumberTextBox"]){dojo._hasResource["dijit.form.NumberTextBox"]=true;dojo.provide("dijit.form.NumberTextBox");dojo.declare("dijit.form.NumberTextBoxMixin",null,{regExpGen:dojo.number.regexp,value:NaN,editOptions:{pattern:"#.######"},_formatter:dojo.number.format,_setConstraintsAttr:function(_fb){var _fc=typeof _fb.places=="number"?_fb.places:0;if(_fc){_fc++;}if(typeof _fb.max!="number"){_fb.max=9*Math.pow(10,15-_fc);}if(typeof _fb.min!="number"){_fb.min=-9*Math.pow(10,15-_fc);}this.inherited(arguments,[_fb]);if(this.focusNode&&this.focusNode.value&&!isNaN(this.value)){this.set("value",this.value);}},_onFocus:function(){if(this.disabled){return;}var val=this.get("value");if(typeof val=="number"&&!isNaN(val)){var _fd=this.format(val,this.constraints);if(_fd!==undefined){this.textbox.value=_fd;}}this.inherited(arguments);},format:function(_fe,_ff){var _100=String(_fe);if(typeof _fe!="number"){return _100;}if(isNaN(_fe)){return "";}if(!("rangeCheck" in this&&this.rangeCheck(_fe,_ff))&&_ff.exponent!==false&&/\de[-+]?\d/i.test(_100)){return _100;}if(this.editOptions&&this._focused){_ff=dojo.mixin({},_ff,this.editOptions);}return this._formatter(_fe,_ff);},_parser:dojo.number.parse,parse:function(_101,_102){var v=this._parser(_101,dojo.mixin({},_102,(this.editOptions&&this._focused)?this.editOptions:{}));if(this.editOptions&&this._focused&&isNaN(v)){v=this._parser(_101,_102);}return v;},_getDisplayedValueAttr:function(){var v=this.inherited(arguments);return isNaN(v)?this.textbox.value:v;},filter:function(_103){return (_103===null||_103===""||_103===undefined)?NaN:this.inherited(arguments);},serialize:function(_104,_105){return (typeof _104!="number"||isNaN(_104))?"":this.inherited(arguments);},_setBlurValue:function(){var val=dojo.hitch(dojo.mixin({},this,{_focused:true}),"get")("value");this._setValueAttr(val,true);},_setValueAttr:function(_106,_107,_108){if(_106!==undefined&&_108===undefined){_108=String(_106);if(typeof _106=="number"){if(isNaN(_106)){_108="";}else{if(("rangeCheck" in this&&this.rangeCheck(_106,this.constraints))||this.constraints.exponent===false||!/\de[-+]?\d/i.test(_108)){_108=undefined;}}}else{if(!_106){_108="";_106=NaN;}else{_106=undefined;}}}this.inherited(arguments,[_106,_107,_108]);},_getValueAttr:function(){var v=this.inherited(arguments);if(isNaN(v)&&this.textbox.value!==""){if(this.constraints.exponent!==false&&/\de[-+]?\d/i.test(this.textbox.value)&&(new RegExp("^"+dojo.number._realNumberRegexp(dojo.mixin({},this.constraints))+"$").test(this.textbox.value))){var n=Number(this.textbox.value);return isNaN(n)?undefined:n;}else{return undefined;}}else{return v;}},isValid:function(_109){if(!this._focused||this._isEmpty(this.textbox.value)){return this.inherited(arguments);}else{var v=this.get("value");if(!isNaN(v)&&this.rangeCheck(v,this.constraints)){if(this.constraints.exponent!==false&&/\de[-+]?\d/i.test(this.textbox.value)){return true;}else{return this.inherited(arguments);}}else{return false;}}}});dojo.declare("dijit.form.NumberTextBox",[dijit.form.RangeBoundTextBox,dijit.form.NumberTextBoxMixin],{baseClass:"dijitTextBox dijitNumberTextBox"});}if(!dojo._hasResource["dijit.form.CurrencyTextBox"]){dojo._hasResource["dijit.form.CurrencyTextBox"]=true;dojo.provide("dijit.form.CurrencyTextBox");dojo.declare("dijit.form.CurrencyTextBox",dijit.form.NumberTextBox,{currency:"",baseClass:"dijitTextBox dijitCurrencyTextBox",regExpGen:function(_10a){return "("+(this._focused?this.inherited(arguments,[dojo.mixin({},_10a,this.editOptions)])+"|":"")+dojo.currency.regexp(_10a)+")";},_formatter:dojo.currency.format,_parser:dojo.currency.parse,parse:function(_10b,_10c){var v=this.inherited(arguments);if(isNaN(v)&&/\d+/.test(_10b)){v=dojo.hitch(dojo.mixin({},this,{_parser:dijit.form.NumberTextBox.prototype._parser}),"inherited")(arguments);}return v;},_setConstraintsAttr:function(_10d){if(!_10d.currency&&this.currency){_10d.currency=this.currency;}this.inherited(arguments,[dojo.currency._mixInDefaults(dojo.mixin(_10d,{exponent:false}))]);}});}if(!dojo._hasResource["misys.form.CurrencyTextBox"]){dojo._hasResource["misys.form.CurrencyTextBox"]=true;dojo.provide("misys.form.CurrencyTextBox");dojo.experimental("misys.form.CurrencyTextBox");dojo.declare("misys.form.CurrencyTextBox",dijit.form.CurrencyTextBox,{validator:function(_10e,_10f){var _110,_111=_10e;if(_10f&&_10f.places&&_10e){var _112=dojo.i18n.normalizeLocale(_10f.locale),_113=dojo.i18n.getLocalization("dojo.cldr","number",_112),_114=_113.decimal;var _115=_10f.places;if(_10e.indexOf(_114)>=0){_110=_10e.substring(_10e.indexOf(_114)+1,_10e.length);if(_115>_110.length){while(_110.length<_115){_111=_111+"0";_110=_110+"0";}this.textbox.value=_111;this._set("displayedValue",this.get("displayedValue"));}}}return (new RegExp("^(?:"+this.regExpGen(_10f)+")"+(this.required?"":"?")+"$")).test(_111)&&(!this.required||!this._isEmpty(_10e))&&(this._isEmpty(_10e)||this.parse(_10e,_10f)!==undefined);}});}if(!dojo._hasResource["dojo.data.util.sorter"]){dojo._hasResource["dojo.data.util.sorter"]=true;dojo.provide("dojo.data.util.sorter");dojo.getObject("data.util.sorter",true,dojo);dojo.data.util.sorter.basicComparator=function(a,b){var r=-1;if(a===null){a=undefined;}if(b===null){b=undefined;}if(a==b){r=0;}else{if(a>b||a==null){r=1;}}return r;};dojo.data.util.sorter.createSortFunction=function(_116,_117){var _118=[];function _119(attr,dir,comp,s){return function(_11a,_11b){var a=s.getValue(_11a,attr);var b=s.getValue(_11b,attr);return dir*comp(a,b);};};var _11c;var map=_117.comparatorMap;var bc=dojo.data.util.sorter.basicComparator;for(var i=0;i<_116.length;i++){_11c=_116[i];var attr=_11c.attribute;if(attr){var dir=(_11c.descending)?-1:1;var comp=bc;if(map){if(typeof attr!=="string"&&("toString" in attr)){attr=attr.toString();}comp=map[attr]||bc;}_118.push(_119(attr,dir,comp,_117));}}return function(rowA,rowB){var i=0;while(i<_118.length){var ret=_118[i++](rowA,rowB);if(ret!==0){return ret;}}return 0;};};}if(!dojo._hasResource["dojo.data.util.simpleFetch"]){dojo._hasResource["dojo.data.util.simpleFetch"]=true;dojo.provide("dojo.data.util.simpleFetch");dojo.getObject("data.util.simpleFetch",true,dojo);dojo.data.util.simpleFetch.fetch=function(_11d){_11d=_11d||{};if(!_11d.store){_11d.store=this;}var self=this;var _11e=function(_11f,_120){if(_120.onError){var _121=_120.scope||dojo.global;_120.onError.call(_121,_11f,_120);}};var _122=function(_123,_124){var _125=_124.abort||null;var _126=false;var _127=_124.start?_124.start:0;var _128=(_124.count&&(_124.count!==Infinity))?(_127+_124.count):_123.length;_124.abort=function(){_126=true;if(_125){_125.call(_124);}};var _129=_124.scope||dojo.global;if(!_124.store){_124.store=self;}if(_124.onBegin){_124.onBegin.call(_129,_123.length,_124);}if(_124.sort){_123.sort(dojo.data.util.sorter.createSortFunction(_124.sort,self));}if(_124.onItem){for(var i=_127;(i<_123.length)&&(i<_128);++i){var item=_123[i];if(!_126){_124.onItem.call(_129,item,_124);}}}if(_124.onComplete&&!_126){var _12a=null;if(!_124.onItem){_12a=_123.slice(_127,_128);}_124.onComplete.call(_129,_12a,_124);}};this._fetchItems(_11d,_122,_11e);return _11d;};}if(!dojo._hasResource["dojo.data.util.filter"]){dojo._hasResource["dojo.data.util.filter"]=true;dojo.provide("dojo.data.util.filter");dojo.getObject("data.util.filter",true,dojo);dojo.data.util.filter.patternToRegExp=function(_12b,_12c){var rxp="^";var c=null;for(var i=0;i<_12b.length;i++){c=_12b.charAt(i);switch(c){case "\\":rxp+=c;i++;rxp+=_12b.charAt(i);break;case "*":rxp+=".*";break;case "?":rxp+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":rxp+="\\";default:rxp+=c;}}rxp+="$";if(_12c){return new RegExp(rxp,"mi");}else{return new RegExp(rxp,"m");}};}if(!dojo._hasResource["dijit.form.ComboBox"]){dojo._hasResource["dijit.form.ComboBox"]=true;dojo.provide("dijit.form.ComboBox");dojo.declare("dijit.form.ComboBoxMixin",dijit._HasDropDown,{item:null,pageSize:Infinity,store:null,fetchProperties:{},query:{},autoComplete:true,highlightMatch:"first",searchDelay:100,searchAttr:"name",labelAttr:"",labelType:"text",queryExpr:"${0}*",ignoreCase:true,hasDownArrow:true,templateString:dojo.cache("dijit.form","templates/DropDownBox.html","<div class=\"dijit dijitReset dijitInlineTable dijitLeft\"\n\tid=\"widget_${id}\"\n\trole=\"combobox\"\n\t><div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer'\n\t\tdojoAttachPoint=\"_buttonNode, _popupStateNode\" role=\"presentation\"\n\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input aria-label=\"Form field error\" class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' ${!nameAttrSetting} type=\"text\" autocomplete=\"off\"\n\t\t\tdojoAttachPoint=\"textbox,focusNode\" role=\"textbox\" aria-haspopup=\"true\"\n\t/></div\n></div>\n"),baseClass:"dijitTextBox dijitComboBox",dropDownClass:"dijit.form._ComboBoxMenu",cssStateNodes:{"_buttonNode":"dijitDownArrowButton"},maxHeight:-1,_stopClickEvents:false,_getCaretPos:function(_12d){var pos=0;if(typeof (_12d.selectionStart)=="number"){pos=_12d.selectionStart;}else{if(dojo.isIE){var tr=dojo.doc.selection.createRange().duplicate();var ntr=_12d.createTextRange();tr.move("character",0);ntr.move("character",0);try{ntr.setEndPoint("EndToEnd",tr);pos=String(ntr.text).replace(/\r/g,"").length;}catch(e){}}}return pos;},_setCaretPos:function(_12e,_12f){_12f=parseInt(_12f);dijit.selectInputText(_12e,_12f,_12f);},_setDisabledAttr:function(_130){this.inherited(arguments);dijit.setWaiState(this.domNode,"disabled",_130);},_abortQuery:function(){if(this.searchTimer){clearTimeout(this.searchTimer);this.searchTimer=null;}if(this._fetchHandle){if(this._fetchHandle.abort){this._fetchHandle.abort();}this._fetchHandle=null;}},_onInput:function(evt){if(!this.searchTimer&&(evt.type=="paste"||evt.type=="input")&&this._lastInput!=this.textbox.value){this.searchTimer=setTimeout(dojo.hitch(this,function(){this._onKey({charOrCode:229});}),100);}this.inherited(arguments);},_onKey:function(evt){var key=evt.charOrCode;if(evt.altKey||((evt.ctrlKey||evt.metaKey)&&(key!="x"&&key!="v"))||key==dojo.keys.SHIFT){return;}var _131=false;var pw=this.dropDown;var dk=dojo.keys;var _132=null;this._prev_key_backspace=false;this._abortQuery();this.inherited(arguments);if(this._opened){_132=pw.getHighlightedOption();}switch(key){case dk.PAGE_DOWN:case dk.DOWN_ARROW:case dk.PAGE_UP:case dk.UP_ARROW:if(this._opened){this._announceOption(_132);}dojo.stopEvent(evt);break;case dk.ENTER:if(_132){if(_132==pw.nextButton){this._nextSearch(1);dojo.stopEvent(evt);break;}else{if(_132==pw.previousButton){this._nextSearch(-1);dojo.stopEvent(evt);break;}}}else{this._setBlurValue();this._setCaretPos(this.focusNode,this.focusNode.value.length);}if(this._opened||this._fetchHandle){evt.preventDefault();}case dk.TAB:var _133=this.get("displayedValue");if(pw&&(_133==pw._messages["previousMessage"]||_133==pw._messages["nextMessage"])){break;}if(_132){this._selectOption();}if(this._opened){this._lastQuery=null;this.closeDropDown();}break;case " ":if(_132){dojo.stopEvent(evt);this._selectOption();this.closeDropDown();}else{_131=true;}break;case dk.DELETE:case dk.BACKSPACE:this._prev_key_backspace=true;_131=true;break;default:_131=typeof key=="string"||key==229;}if(_131){this.item=undefined;this.searchTimer=setTimeout(dojo.hitch(this,"_startSearchFromInput"),1);}},_autoCompleteText:function(text){var fn=this.focusNode;dijit.selectInputText(fn,fn.value.length);var _134=this.ignoreCase?"toLowerCase":"substr";if(text[_134](0).indexOf(this.focusNode.value[_134](0))==0){var cpos=this._getCaretPos(fn);if((cpos+1)>fn.value.length){fn.value=text;dijit.selectInputText(fn,cpos);}}else{fn.value=text;dijit.selectInputText(fn);}},_openResultList:function(_135,_136){this._fetchHandle=null;if(this.disabled||this.readOnly||(_136.query[this.searchAttr]!=this._lastQuery)){return;}var _137=this.dropDown._highlighted_option&&dojo.hasClass(this.dropDown._highlighted_option,"dijitMenuItemSelected");this.dropDown.clearResultList();if(!_135.length&&!this._maxOptions){this.closeDropDown();return;}_136._maxOptions=this._maxOptions;var _138=this.dropDown.createOptions(_135,_136,dojo.hitch(this,"_getMenuLabelFromItem"));this._showResultList();if(_136.direction){if(1==_136.direction){this.dropDown.highlightFirstOption();}else{if(-1==_136.direction){this.dropDown.highlightLastOption();}}if(_137){this._announceOption(this.dropDown.getHighlightedOption());}}else{if(this.autoComplete&&!this._prev_key_backspace&&!/^[*]+$/.test(_136.query[this.searchAttr])){this._announceOption(_138[1]);}}},_showResultList:function(){this.closeDropDown(true);this.displayMessage("");this.openDropDown();dijit.setWaiState(this.domNode,"expanded","true");},loadDropDown:function(_139){this._startSearchAll();},isLoaded:function(){return false;},closeDropDown:function(){this._abortQuery();if(this._opened){this.inherited(arguments);dijit.setWaiState(this.domNode,"expanded","false");dijit.removeWaiState(this.focusNode,"activedescendant");}},_setBlurValue:function(){var _13a=this.get("displayedValue");var pw=this.dropDown;if(pw&&(_13a==pw._messages["previousMessage"]||_13a==pw._messages["nextMessage"])){this._setValueAttr(this._lastValueReported,true);}else{if(typeof this.item=="undefined"){this.item=null;this.set("displayedValue",_13a);}else{if(this.value!=this._lastValueReported){dijit.form._FormValueWidget.prototype._setValueAttr.call(this,this.value,true);}this._refreshState();}}},_onBlur:function(){this.closeDropDown();this.inherited(arguments);},_setItemAttr:function(item,_13b,_13c){if(!_13c){_13c=this.store.getValue(item,this.searchAttr);}var _13d=this._getValueField()!=this.searchAttr?this.store.getIdentity(item):_13c;this._set("item",item);dijit.form.ComboBox.superclass._setValueAttr.call(this,_13d,_13b,_13c);},_announceOption:function(node){if(!node){return;}var _13e;if(node==this.dropDown.nextButton||node==this.dropDown.previousButton){_13e=node.innerHTML;this.item=undefined;this.value="";}else{_13e=this.store.getValue(node.item,this.searchAttr).toString();this.set("item",node.item,false,_13e);}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);dijit.setWaiState(this.focusNode,"activedescendant",dojo.attr(node,"id"));this._autoCompleteText(_13e);},_selectOption:function(evt){if(evt){this._announceOption(evt.target);}this.closeDropDown();this._setCaretPos(this.focusNode,this.focusNode.value.length);dijit.form._FormValueWidget.prototype._setValueAttr.call(this,this.value,true);},_startSearchAll:function(){this._startSearch("");},_startSearchFromInput:function(){this._startSearch(this.focusNode.value.replace(/([\\\*\?])/g,"\\$1"));},_getQueryString:function(text){return dojo.string.substitute(this.queryExpr,[text]);},_startSearch:function(key){if(!this.dropDown){var _13f=this.id+"_popup",_140=dojo.getObject(this.dropDownClass,false);this.dropDown=new _140({onChange:dojo.hitch(this,this._selectOption),id:_13f,dir:this.dir});dijit.removeWaiState(this.focusNode,"activedescendant");dijit.setWaiState(this.textbox,"owns",_13f);}var _141=dojo.clone(this.query);this._lastInput=key;this._lastQuery=_141[this.searchAttr]=this._getQueryString(key);this.searchTimer=setTimeout(dojo.hitch(this,function(_142,_143){this.searchTimer=null;var _144={queryOptions:{ignoreCase:this.ignoreCase,deep:true},query:_142,onBegin:dojo.hitch(this,"_setMaxOptions"),onComplete:dojo.hitch(this,"_openResultList"),onError:function(_145){_143._fetchHandle=null;console.error("dijit.form.ComboBox: "+_145);_143.closeDropDown();},start:0,count:this.pageSize};dojo.mixin(_144,_143.fetchProperties);this._fetchHandle=_143.store.fetch(_144);var _146=function(_147,_148){_147.start+=_147.count*_148;_147.direction=_148;this._fetchHandle=this.store.fetch(_147);this.focus();};this._nextSearch=this.dropDown.onPage=dojo.hitch(this,_146,this._fetchHandle);},_141,this),this.searchDelay);},_setMaxOptions:function(size,_149){this._maxOptions=size;},_getValueField:function(){return this.searchAttr;},constructor:function(){this.query={};this.fetchProperties={};},postMixInProperties:function(){if(!this.store){var _14a=this.srcNodeRef;this.store=new dijit.form._ComboBoxDataStore(_14a);if(!("value" in this.params)){var item=(this.item=this.store.fetchSelectedItem());if(item){var _14b=this._getValueField();this.value=this.store.getValue(item,_14b);}}}this.inherited(arguments);},postCreate:function(){var _14c=dojo.query("label[for=\""+this.id+"\"]");if(_14c.length){_14c[0].id=(this.id+"_label");dijit.setWaiState(this.domNode,"labelledby",_14c[0].id);}this.inherited(arguments);},_setHasDownArrowAttr:function(val){this.hasDownArrow=val;this._buttonNode.style.display=val?"":"none";},_getMenuLabelFromItem:function(item){var _14d=this.labelFunc(item,this.store),_14e=this.labelType;if(this.highlightMatch!="none"&&this.labelType=="text"&&this._lastInput){_14d=this.doHighlight(_14d,this._escapeHtml(this._lastInput));_14e="html";}return {html:_14e=="html",label:_14d};},doHighlight:function(_14f,find){var _150=(this.ignoreCase?"i":"")+(this.highlightMatch=="all"?"g":""),i=this.queryExpr.indexOf("${0}");find=dojo.regexp.escapeString(find);return this._escapeHtml(_14f).replace(new RegExp((i==0?"^":"")+"("+find+")"+(i==(this.queryExpr.length-4)?"$":""),_150),"<span class=\"dijitComboBoxHighlightMatch\">$1</span>");},_escapeHtml:function(str){str=String(str).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");return str;},reset:function(){this.item=null;this.inherited(arguments);},labelFunc:function(item,_151){return _151.getValue(item,this.labelAttr||this.searchAttr).toString();}});dojo.declare("dijit.form._ComboBoxMenu",[dijit._Widget,dijit._Templated,dijit._CssStateMixin],{templateString:"<ul class='dijitReset dijitMenu' dojoAttachEvent='onmousedown:_onMouseDown,onmouseup:_onMouseUp,onmouseover:_onMouseOver,onmouseout:_onMouseOut' style='overflow: \"auto\"; overflow-x: \"hidden\";'>"+"<li class='dijitMenuItem dijitMenuPreviousButton' dojoAttachPoint='previousButton' role='option'></li>"+"<li class='dijitMenuItem dijitMenuNextButton' dojoAttachPoint='nextButton' role='option'></li>"+"</ul>",_messages:null,baseClass:"dijitComboBoxMenu",postMixInProperties:function(){this.inherited(arguments);this._messages=dojo.i18n.getLocalization("dijit.form","ComboBox",this.lang);},buildRendering:function(){this.inherited(arguments);this.previousButton.innerHTML=this._messages["previousMessage"];this.nextButton.innerHTML=this._messages["nextMessage"];},_setValueAttr:function(_152){this.value=_152;this.onChange(_152);},onChange:function(_153){},onPage:function(_154){},onClose:function(){this._blurOptionNode();},_createOption:function(item,_155){var _156=dojo.create("li",{"class":"dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl"),role:"option"});var _157=_155(item);if(_157.html){_156.innerHTML=_157.label;}else{_156.appendChild(dojo.doc.createTextNode(_157.label));}if(_156.innerHTML==""){_156.innerHTML="&nbsp;";}_156.item=item;return _156;},createOptions:function(_158,_159,_15a){this.previousButton.style.display=(_159.start==0)?"none":"";dojo.attr(this.previousButton,"id",this.id+"_prev");dojo.forEach(_158,function(item,i){var _15b=this._createOption(item,_15a);dojo.attr(_15b,"id",this.id+i);this.domNode.insertBefore(_15b,this.nextButton);},this);var _15c=false;if(_159._maxOptions&&_159._maxOptions!=-1){if((_159.start+_159.count)<_159._maxOptions){_15c=true;}else{if((_159.start+_159.count)>_159._maxOptions&&_159.count==_158.length){_15c=true;}}}else{if(_159.count==_158.length){_15c=true;}}this.nextButton.style.display=_15c?"":"none";dojo.attr(this.nextButton,"id",this.id+"_next");return this.domNode.childNodes;},clearResultList:function(){while(this.domNode.childNodes.length>2){this.domNode.removeChild(this.domNode.childNodes[this.domNode.childNodes.length-2]);}this._blurOptionNode();},_onMouseDown:function(evt){dojo.stopEvent(evt);},_onMouseUp:function(evt){if(evt.target===this.domNode||!this._highlighted_option){return;}else{if(evt.target==this.previousButton){this._blurOptionNode();this.onPage(-1);}else{if(evt.target==this.nextButton){this._blurOptionNode();this.onPage(1);}else{var tgt=evt.target;while(!tgt.item){tgt=tgt.parentNode;}this._setValueAttr({target:tgt},true);}}}},_onMouseOver:function(evt){if(evt.target===this.domNode){return;}var tgt=evt.target;if(!(tgt==this.previousButton||tgt==this.nextButton)){while(!tgt.item){tgt=tgt.parentNode;}}this._focusOptionNode(tgt);},_onMouseOut:function(evt){if(evt.target===this.domNode){return;}this._blurOptionNode();},_focusOptionNode:function(node){if(this._highlighted_option!=node){this._blurOptionNode();this._highlighted_option=node;dojo.addClass(this._highlighted_option,"dijitMenuItemSelected");}},_blurOptionNode:function(){if(this._highlighted_option){dojo.removeClass(this._highlighted_option,"dijitMenuItemSelected");this._highlighted_option=null;}},_highlightNextOption:function(){if(!this.getHighlightedOption()){var fc=this.domNode.firstChild;this._focusOptionNode(fc.style.display=="none"?fc.nextSibling:fc);}else{var ns=this._highlighted_option.nextSibling;if(ns&&ns.style.display!="none"){this._focusOptionNode(ns);}else{this.highlightFirstOption();}}dojo.window.scrollIntoView(this._highlighted_option);},highlightFirstOption:function(){var _15d=this.domNode.firstChild;var _15e=_15d.nextSibling;this._focusOptionNode(_15e.style.display=="none"?_15d:_15e);dojo.window.scrollIntoView(this._highlighted_option);},highlightLastOption:function(){this._focusOptionNode(this.domNode.lastChild.previousSibling);dojo.window.scrollIntoView(this._highlighted_option);},_highlightPrevOption:function(){if(!this.getHighlightedOption()){var lc=this.domNode.lastChild;this._focusOptionNode(lc.style.display=="none"?lc.previousSibling:lc);}else{var ps=this._highlighted_option.previousSibling;if(ps&&ps.style.display!="none"){this._focusOptionNode(ps);}else{this.highlightLastOption();}}dojo.window.scrollIntoView(this._highlighted_option);},_page:function(up){var _15f=0;var _160=this.domNode.scrollTop;var _161=dojo.style(this.domNode,"height");if(!this.getHighlightedOption()){this._highlightNextOption();}while(_15f<_161){if(up){if(!this.getHighlightedOption().previousSibling||this._highlighted_option.previousSibling.style.display=="none"){break;}this._highlightPrevOption();}else{if(!this.getHighlightedOption().nextSibling||this._highlighted_option.nextSibling.style.display=="none"){break;}this._highlightNextOption();}var _162=this.domNode.scrollTop;_15f+=(_162-_160)*(up?-1:1);_160=_162;}},pageUp:function(){this._page(true);},pageDown:function(){this._page(false);},getHighlightedOption:function(){var ho=this._highlighted_option;return (ho&&ho.parentNode)?ho:null;},handleKey:function(evt){switch(evt.charOrCode){case dojo.keys.DOWN_ARROW:this._highlightNextOption();return false;case dojo.keys.PAGE_DOWN:this.pageDown();return false;case dojo.keys.UP_ARROW:this._highlightPrevOption();return false;case dojo.keys.PAGE_UP:this.pageUp();return false;default:return true;}}});dojo.declare("dijit.form.ComboBox",[dijit.form.ValidationTextBox,dijit.form.ComboBoxMixin],{_setValueAttr:function(_163,_164,_165){this._set("item",null);if(!_163){_163="";}dijit.form.ValidationTextBox.prototype._setValueAttr.call(this,_163,_164,_165);}});dojo.declare("dijit.form._ComboBoxDataStore",null,{constructor:function(root){this.root=root;if(root.tagName!="SELECT"&&root.firstChild){root=dojo.query("select",root);if(root.length>0){root=root[0];}else{this.root.innerHTML="<SELECT>"+this.root.innerHTML+"</SELECT>";root=this.root.firstChild;}this.root=root;}dojo.query("> option",root).forEach(function(node){node.innerHTML=dojo.trim(node.innerHTML);});},getValue:function(item,_166,_167){return (_166=="value")?item.value:(item.innerText||item.textContent||"");},isItemLoaded:function(_168){return true;},getFeatures:function(){return {"dojo.data.api.Read":true,"dojo.data.api.Identity":true};},_fetchItems:function(args,_169,_16a){if(!args.query){args.query={};}if(!args.query.name){args.query.name="";}if(!args.queryOptions){args.queryOptions={};}var _16b=dojo.data.util.filter.patternToRegExp(args.query.name,args.queryOptions.ignoreCase),_16c=dojo.query("> option",this.root).filter(function(_16d){return (_16d.innerText||_16d.textContent||"").match(_16b);});if(args.sort){_16c.sort(dojo.data.util.sorter.createSortFunction(args.sort,this));}_169(_16c,args);},close:function(_16e){return;},getLabel:function(item){return item.innerHTML;},getIdentity:function(item){return dojo.attr(item,"value");},fetchItemByIdentity:function(args){var item=dojo.query("> option[value='"+args.identity+"']",this.root)[0];args.onItem(item);},fetchSelectedItem:function(){var root=this.root,si=root.selectedIndex;return typeof si=="number"?dojo.query("> option:nth-child("+(si!=-1?si+1:1)+")",root)[0]:null;}});dojo.extend(dijit.form._ComboBoxDataStore,dojo.data.util.simpleFetch);}if(!dojo._hasResource["dijit.form.FilteringSelect"]){dojo._hasResource["dijit.form.FilteringSelect"]=true;dojo.provide("dijit.form.FilteringSelect");dojo.declare("dijit.form.FilteringSelect",[dijit.form.MappedTextBox,dijit.form.ComboBoxMixin],{required:true,_lastDisplayedValue:"",_isValidSubset:function(){return this._opened;},isValid:function(){return this.item||(!this.required&&this.get("displayedValue")=="");},_refreshState:function(){if(!this.searchTimer){this.inherited(arguments);}},_callbackSetLabel:function(_16f,_170,_171){if((_170&&_170.query[this.searchAttr]!=this._lastQuery)||(!_170&&_16f.length&&this.store.getIdentity(_16f[0])!=this._lastQuery)){return;}if(!_16f.length){this.valueNode.value="";dijit.form.TextBox.superclass._setValueAttr.call(this,"",_171||(_171===undefined&&!this._focused));this._set("item",null);this.validate(this._focused);}else{this.set("item",_16f[0],_171);}},_openResultList:function(_172,_173){if(_173.query[this.searchAttr]!=this._lastQuery){return;}dijit.form.ComboBoxMixin.prototype._openResultList.apply(this,arguments);if(this.item===undefined){this.validate(true);}},_getValueAttr:function(){return this.valueNode.value;},_getValueField:function(){return "value";},_setValueAttr:function(_174,_175){if(!this._onChangeActive){_175=null;}this._lastQuery=_174;if(_174===null||_174===""){this._setDisplayedValueAttr("",_175);return;}var self=this;this.store.fetchItemByIdentity({identity:_174,onItem:function(item){self._callbackSetLabel(item?[item]:[],undefined,_175);}});},_setItemAttr:function(item,_176,_177){this.inherited(arguments);this.valueNode.value=this.value;this._lastDisplayedValue=this.textbox.value;},_getDisplayQueryString:function(text){return text.replace(/([\\\*\?])/g,"\\$1");},_setDisplayedValueAttr:function(_178,_179){if(_178==null){_178="";}if(!this._created){if(!("displayedValue" in this.params)){return;}_179=false;}if(this.store){this.closeDropDown();var _17a=dojo.clone(this.query);this._lastQuery=_17a[this.searchAttr]=this._getDisplayQueryString(_178);this.textbox.value=_178;this._lastDisplayedValue=_178;this._set("displayedValue",_178);var _17b=this;var _17c={query:_17a,queryOptions:{ignoreCase:this.ignoreCase,deep:true},onComplete:function(_17d,_17e){_17b._fetchHandle=null;dojo.hitch(_17b,"_callbackSetLabel")(_17d,_17e,_179);},onError:function(_17f){_17b._fetchHandle=null;console.error("dijit.form.FilteringSelect: "+_17f);dojo.hitch(_17b,"_callbackSetLabel")([],undefined,false);}};dojo.mixin(_17c,this.fetchProperties);this._fetchHandle=this.store.fetch(_17c);}},undo:function(){this.set("displayedValue",this._lastDisplayedValue);}});}if(!dojo._hasResource["dojo.data.ItemFileReadStore"]){dojo._hasResource["dojo.data.ItemFileReadStore"]=true;dojo.provide("dojo.data.ItemFileReadStore");dojo.declare("dojo.data.ItemFileReadStore",null,{constructor:function(_180){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._jsonFileUrl=_180.url;this._ccUrl=_180.url;this.url=_180.url;this._jsonData=_180.data;this.data=null;this._datatypeMap=_180.typeMap||{};if(!this._datatypeMap["Date"]){this._datatypeMap["Date"]={type:Date,deserialize:function(_181){return dojo.date.stamp.fromISOString(_181);}};}this._features={"dojo.data.api.Read":true,"dojo.data.api.Identity":true};this._itemsByIdentity=null;this._storeRefPropName="_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=false;this._queuedFetches=[];if(_180.urlPreventCache!==undefined){this.urlPreventCache=_180.urlPreventCache?true:false;}if(_180.hierarchical!==undefined){this.hierarchical=_180.hierarchical?true:false;}if(_180.clearOnClose){this.clearOnClose=true;}if("failOk" in _180){this.failOk=_180.failOk?true:false;}},url:"",_ccUrl:"",data:null,typeMap:null,clearOnClose:false,urlPreventCache:false,failOk:false,hierarchical:true,_assertIsItem:function(item){if(!this.isItem(item)){if(!(window.isDrawdown&&window.isDrawdown===true)){throw new Error("dojo.data.ItemFileReadStore: Invalid item argument.");}}},_assertIsAttribute:function(_182){if(typeof _182!=="string"){throw new Error("dojo.data.ItemFileReadStore: Invalid attribute argument.");}},getValue:function(item,_183,_184){var _185=this.getValues(item,_183);return (_185.length>0)?_185[0]:_184;},getValues:function(item,_186){this._assertIsItem(item);this._assertIsAttribute(_186);return (item[_186]||[]).slice(0);},getAttributes:function(item){this._assertIsItem(item);var _187=[];for(var key in item){if((key!==this._storeRefPropName)&&(key!==this._itemNumPropName)&&(key!==this._rootItemPropName)&&(key!==this._reverseRefMap)){_187.push(key);}}return _187;},hasAttribute:function(item,_188){this._assertIsItem(item);this._assertIsAttribute(_188);return (_188 in item);},containsValue:function(item,_189,_18a){var _18b=undefined;if(typeof _18a==="string"){_18b=dojo.data.util.filter.patternToRegExp(_18a,false);}return this._containsValue(item,_189,_18a,_18b);},_containsValue:function(item,_18c,_18d,_18e){return dojo.some(this.getValues(item,_18c),function(_18f){if(_18f!==null&&!dojo.isObject(_18f)&&_18e){if(_18f.toString().match(_18e)){return true;}}else{if(_18d===_18f){return true;}}});},isItem:function(_190){if(_190&&_190[this._storeRefPropName]===this){if(this._arrayOfAllItems[_190[this._itemNumPropName]]===_190){return true;}}return false;},isItemLoaded:function(_191){return this.isItem(_191);},loadItem:function(_192){this._assertIsItem(_192.item);},getFeatures:function(){return this._features;},getLabel:function(item){if(this._labelAttr&&this.isItem(item)){return this.getValue(item,this._labelAttr);}return undefined;},getLabelAttributes:function(item){if(this._labelAttr){return [this._labelAttr];}return null;},_fetchItems:function(_193,_194,_195){var self=this,_196=function(_197,_198){var _199=[],i,key;if(_197.query){var _19a,_19b=_197.queryOptions?_197.queryOptions.ignoreCase:false;var _19c={};for(key in _197.query){_19a=_197.query[key];if(typeof _19a==="string"){_19c[key]=dojo.data.util.filter.patternToRegExp(_19a,_19b);}else{if(_19a instanceof RegExp){_19c[key]=_19a;}}}for(i=0;i<_198.length;++i){var _19d=true;var _19e=_198[i];if(_19e===null){_19d=false;}else{for(key in _197.query){_19a=_197.query[key];if(!self._containsValue(_19e,key,_19a,_19c[key])){_19d=false;}}}if(_19d){_199.push(_19e);}}_194(_199,_197);}else{for(i=0;i<_198.length;++i){var item=_198[i];if(item!==null){_199.push(item);}}_194(_199,_197);}};if(this._loadFinished){_196(_193,this._getItemsArray(_193.queryOptions));}else{if(this._jsonFileUrl!==this._ccUrl){dojo.deprecated("dojo.data.ItemFileReadStore: ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_193,filter:_196});}else{this._loadInProgress=true;var _19f={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _1a0=misys.xhrPost(_19f);_1a0.addCallback(function(data){try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;_196(_193,self._getItemsArray(_193.queryOptions));self._handleQueuedFetches();}catch(e){self._loadFinished=true;self._loadInProgress=false;_195(e,_193);}});_1a0.addErrback(function(_1a1){self._loadInProgress=false;_195(_1a1,_193);});var _1a2=null;if(_193.abort){_1a2=_193.abort;}_193.abort=function(){var df=_1a0;if(df&&df.fired===-1){df.cancel();df=null;}if(_1a2){_1a2.call(_193);}};}}else{if(this._jsonData){try{this._loadFinished=true;this._getItemsFromLoadedData(this._jsonData);this._jsonData=null;_196(_193,this._getItemsArray(_193.queryOptions));}catch(e){_195(e,_193);}}else{_195(new Error("dojo.data.ItemFileReadStore: No JSON source data was provided as either URL or a nested Javascript object."),_193);}}}},_handleQueuedFetches:function(){if(this._queuedFetches.length>0){for(var i=0;i<this._queuedFetches.length;i++){var _1a3=this._queuedFetches[i],_1a4=_1a3.args,_1a5=_1a3.filter;if(_1a5){_1a5(_1a4,this._getItemsArray(_1a4.queryOptions));}else{this.fetchItemByIdentity(_1a4);}}this._queuedFetches=[];}},_getItemsArray:function(_1a6){if(_1a6&&_1a6.deep){return this._arrayOfAllItems;}return this._arrayOfTopLevelItems;},close:function(_1a7){if(this.clearOnClose&&this._loadFinished&&!this._loadInProgress){if(((this._jsonFileUrl==""||this._jsonFileUrl==null)&&(this.url==""||this.url==null))&&this.data==null){}this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._itemsByIdentity=null;this._loadInProgress=false;this._queuedFetches=[];}},_getItemsFromLoadedData:function(_1a8){var _1a9=false,self=this;function _1aa(_1ab){var _1ac=((_1ab!==null)&&(typeof _1ab==="object")&&(!dojo.isArray(_1ab)||_1a9)&&(!dojo.isFunction(_1ab))&&(_1ab.constructor==Object||dojo.isArray(_1ab))&&(typeof _1ab._reference==="undefined")&&(typeof _1ab._type==="undefined")&&(typeof _1ab._value==="undefined")&&self.hierarchical);return _1ac;};function _1ad(_1ae){self._arrayOfAllItems.push(_1ae);for(var _1af in _1ae){var _1b0=_1ae[_1af];if(_1b0){if(dojo.isArray(_1b0)){var _1b1=_1b0;for(var k=0;k<_1b1.length;++k){var _1b2=_1b1[k];if(_1aa(_1b2)){_1ad(_1b2);}}}else{if(_1aa(_1b0)){_1ad(_1b0);}}}}};this._labelAttr=_1a8.label;var i,item;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=_1a8.items;if(this._arrayOfTopLevelItems){for(i=0;i<this._arrayOfTopLevelItems.length;++i){item=this._arrayOfTopLevelItems[i];if(dojo.isArray(item)){_1a9=true;}_1ad(item);item[this._rootItemPropName]=true;}}var _1b3={},key;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){if(key!==this._rootItemPropName){var _1b4=item[key];if(_1b4!==null){if(!dojo.isArray(_1b4)){item[key]=[_1b4];}}else{item[key]=[null];}}_1b3[key]=key;}}while(_1b3[this._storeRefPropName]){this._storeRefPropName+="_";}while(_1b3[this._itemNumPropName]){this._itemNumPropName+="_";}while(_1b3[this._reverseRefMap]){this._reverseRefMap+="_";}var _1b5;var _1b6=_1a8.identifier;if(_1b6){this._itemsByIdentity={};this._features["dojo.data.api.Identity"]=_1b6;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];_1b5=item[_1b6];var _1b7=_1b5[0];if(!Object.hasOwnProperty.call(this._itemsByIdentity,_1b7)){this._itemsByIdentity[_1b7]=item;}else{if(this._jsonFileUrl){throw new Error("dojo.data.ItemFileReadStore:  The json data as specified by: ["+this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+_1b6+"].  Value collided: ["+_1b7+"]");}else{if(this._jsonData){throw new Error("dojo.data.ItemFileReadStore:  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+_1b6+"].  Value collided: ["+_1b7+"]");}}}}}else{this._features["dojo.data.api.Identity"]=Number;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];item[this._storeRefPropName]=this;item[this._itemNumPropName]=i;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){_1b5=item[key];for(var j=0;j<_1b5.length;++j){_1b4=_1b5[j];if(_1b4!==null&&typeof _1b4=="object"){if(("_type" in _1b4)&&("_value" in _1b4)){var type=_1b4._type;var _1b8=this._datatypeMap[type];if(!_1b8){throw new Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+type+"'");}else{if(dojo.isFunction(_1b8)){_1b5[j]=new _1b8(_1b4._value);}else{if(dojo.isFunction(_1b8.deserialize)){_1b5[j]=_1b8.deserialize(_1b4._value);}else{throw new Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");}}}}if(_1b4._reference){var _1b9=_1b4._reference;if(!dojo.isObject(_1b9)){_1b5[j]=this._getItemByIdentity(_1b9);}else{for(var k=0;k<this._arrayOfAllItems.length;++k){var _1ba=this._arrayOfAllItems[k],_1bb=true;for(var _1bc in _1b9){if(_1ba[_1bc]!=_1b9[_1bc]){_1bb=false;}}if(_1bb){_1b5[j]=_1ba;}}}if(this.referenceIntegrity){var _1bd=_1b5[j];if(this.isItem(_1bd)){this._addReferenceToMap(_1bd,item,key);}}}else{if(this.isItem(_1b4)){if(this.referenceIntegrity){this._addReferenceToMap(_1b4,item,key);}}}}}}}},_addReferenceToMap:function(_1be,_1bf,_1c0){},getIdentity:function(item){var _1c1=this._features["dojo.data.api.Identity"];if(_1c1===Number){return item[this._itemNumPropName];}else{var _1c2=item[_1c1];if(_1c2){return _1c2[0];}}return null;},fetchItemByIdentity:function(_1c3){var item,_1c4;if(!this._loadFinished){var self=this;if(this._jsonFileUrl!==this._ccUrl){dojo.deprecated("dojo.data.ItemFileReadStore: ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null&&this._jsonData==null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_1c3});}else{this._loadInProgress=true;var _1c5={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _1c6=dojo.xhrGet(_1c5);_1c6.addCallback(function(data){var _1c7=_1c3.scope?_1c3.scope:dojo.global;try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;item=self._getItemByIdentity(_1c3.identity);if(_1c3.onItem){_1c3.onItem.call(_1c7,item);}self._handleQueuedFetches();}catch(error){self._loadInProgress=false;if(_1c3.onError){_1c3.onError.call(_1c7,error);}}});_1c6.addErrback(function(_1c8){self._loadInProgress=false;if(_1c3.onError){var _1c9=_1c3.scope?_1c3.scope:dojo.global;_1c3.onError.call(_1c9,_1c8);}});}}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;item=self._getItemByIdentity(_1c3.identity);if(_1c3.onItem){_1c4=_1c3.scope?_1c3.scope:dojo.global;_1c3.onItem.call(_1c4,item);}}}}else{item=this._getItemByIdentity(_1c3.identity);if(_1c3.onItem){_1c4=_1c3.scope?_1c3.scope:dojo.global;_1c3.onItem.call(_1c4,item);}}},_getItemByIdentity:function(_1ca){var item=null;if(this._itemsByIdentity&&Object.hasOwnProperty.call(this._itemsByIdentity,_1ca)){item=this._itemsByIdentity[_1ca];}else{if(Object.hasOwnProperty.call(this._arrayOfAllItems,_1ca)){item=this._arrayOfAllItems[_1ca];}}if(item===undefined){item=null;}return item;},getIdentityAttributes:function(item){var _1cb=this._features["dojo.data.api.Identity"];if(_1cb===Number){return null;}else{return [_1cb];}},_forceLoad:function(){var self=this;if(this._jsonFileUrl!==this._ccUrl){dojo.deprecated("dojo.data.ItemFileReadStore: ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){var _1cc={url:this._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk,sync:true};var _1cd=dojo.xhrGet(_1cc);_1cd.addCallback(function(data){try{if(self._loadInProgress!==true&&!self._loadFinished){self._getItemsFromLoadedData(data);self._loadFinished=true;}else{if(self._loadInProgress){throw new Error("dojo.data.ItemFileReadStore:  Unable to perform a synchronous load, an async load is in progress.");}}}catch(e){throw e;}});_1cd.addErrback(function(_1ce){throw _1ce;});}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;}}}});dojo.extend(dojo.data.ItemFileReadStore,dojo.data.util.simpleFetch);}if(!dojo._hasResource["misys.data.ItemFileReadStore"]){dojo._hasResource["misys.data.ItemFileReadStore"]=true;dojo.provide("misys.data.ItemFileReadStore");dojo.experimental("misys.data.ItemFileReadStore");dojo.declare("misys.data.ItemFileReadStore",dojo.data.ItemFileReadStore,{_fetchItems:function(_1cf,_1d0,_1d1){var _1d2=_1cf.serverQuery||_1cf.queryOptions||{};var self=this,_1d3=function(_1d4,_1d5){var _1d6=[],i,key;if(_1d4.query){var _1d7,_1d8=_1d4.queryOptions?_1d4.queryOptions.ignoreCase:false;var _1d9={};for(key in _1d4.query){_1d7=_1d4.query[key];if(typeof _1d7==="string"){_1d9[key]=dojo.data.util.filter.patternToRegExp(_1d7,_1d8);}else{if(_1d7 instanceof RegExp){_1d9[key]=_1d7;}}}for(i=0;i<_1d5.length;++i){var _1da=true;var _1db=_1d5[i];if(_1db===null){_1da=false;}else{for(key in _1d4.query){_1d7=_1d4.query[key];if(!self._containsValue(_1db,key,_1d7,_1d9[key])){_1da=false;}}}if(_1da){_1d6.push(_1db);}}_1d0(_1d6,_1d4);}else{if(_1d5){for(i=0;i<_1d5.length;++i){var item=_1d5[i];if(item!==null){_1d6.push(item);}}}_1d0(_1d6,_1d4);}};if(this._loadFinished){_1d3(_1cf,this._getItemsArray(_1cf.queryOptions));}else{if(this._jsonFileUrl!==this._ccUrl){dojo.deprecated("misys.data.ItemFileReadStore: ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_1cf,filter:_1d3});}else{this._loadInProgress=true;var _1dc={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk,content:_1d2};var _1dd=misys.xhrPost(_1dc);_1dd.addCallback(function(data){try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;_1d3(_1cf,self._getItemsArray(_1cf.queryOptions));self._handleQueuedFetches();}catch(e){self._loadFinished=true;self._loadInProgress=false;_1d1(e,_1cf);}});_1dd.addErrback(function(_1de){self._loadInProgress=false;_1d1(_1de,_1cf);});var _1df=null;if(_1cf.abort){_1df=_1cf.abort;}_1cf.abort=function(){var df=_1dd;if(df&&df.fired===-1){df.cancel();df=null;}if(_1df){_1df.call(_1cf);}};}}else{if(this._jsonData){try{this._loadFinished=true;this._getItemsFromLoadedData(this._jsonData);this._jsonData=null;_1d3(_1cf,this._getItemsArray(_1cf.queryOptions));}catch(e){_1d1(e,_1cf);}}else{_1d1(new Error("misys.data.ItemFileReadStore: No JSON source data was provided as either URL or a nested Javascript object."),_1cf);}}}}});}if(!dojo._hasResource["dojo.data.ItemFileWriteStore"]){dojo._hasResource["dojo.data.ItemFileWriteStore"]=true;dojo.provide("dojo.data.ItemFileWriteStore");dojo.declare("dojo.data.ItemFileWriteStore",dojo.data.ItemFileReadStore,{constructor:function(_1e0){this._features["dojo.data.api.Write"]=true;this._features["dojo.data.api.Notification"]=true;this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};if(!this._datatypeMap["Date"].serialize){this._datatypeMap["Date"].serialize=function(obj){return dojo.date.stamp.toISOString(obj,{zulu:true});};}if(_1e0&&(_1e0.referenceIntegrity===false)){this.referenceIntegrity=false;}this._saveInProgress=false;},referenceIntegrity:true,_assert:function(_1e1){if(!_1e1){throw new Error("assertion failed in ItemFileWriteStore");}},_getIdentifierAttribute:function(){var _1e2=this.getFeatures()["dojo.data.api.Identity"];return _1e2;},newItem:function(_1e3,_1e4){this._assert(!this._saveInProgress);if(!this._loadFinished){this._forceLoad();}if(typeof _1e3!="object"&&typeof _1e3!="undefined"){throw new Error("newItem() was passed something other than an object");}var _1e5=null;var _1e6=this._getIdentifierAttribute();if(_1e6===Number){_1e5=this._arrayOfAllItems.length;}else{_1e5=_1e3[_1e6];if(typeof _1e5==="undefined"){throw new Error("newItem() was not passed an identity for the new item");}if(dojo.isArray(_1e5)){throw new Error("newItem() was not passed an single-valued identity");}}if(this._itemsByIdentity){this._assert(typeof this._itemsByIdentity[_1e5]==="undefined");}this._assert(typeof this._pending._newItems[_1e5]==="undefined");this._assert(typeof this._pending._deletedItems[_1e5]==="undefined");var _1e7={};_1e7[this._storeRefPropName]=this;_1e7[this._itemNumPropName]=this._arrayOfAllItems.length;if(this._itemsByIdentity){this._itemsByIdentity[_1e5]=_1e7;_1e7[_1e6]=[_1e5];}this._arrayOfAllItems.push(_1e7);var _1e8=null;if(_1e4&&_1e4.parent&&_1e4.attribute){_1e8={item:_1e4.parent,attribute:_1e4.attribute,oldValue:undefined};var _1e9=this.getValues(_1e4.parent,_1e4.attribute);if(_1e9&&_1e9.length>0){var _1ea=_1e9.slice(0,_1e9.length);if(_1e9.length===1){_1e8.oldValue=_1e9[0];}else{_1e8.oldValue=_1e9.slice(0,_1e9.length);}_1ea.push(_1e7);this._setValueOrValues(_1e4.parent,_1e4.attribute,_1ea,false);_1e8.newValue=this.getValues(_1e4.parent,_1e4.attribute);}else{this._setValueOrValues(_1e4.parent,_1e4.attribute,_1e7,false);_1e8.newValue=_1e7;}}else{_1e7[this._rootItemPropName]=true;this._arrayOfTopLevelItems.push(_1e7);}this._pending._newItems[_1e5]=_1e7;for(var key in _1e3){if(key===this._storeRefPropName||key===this._itemNumPropName){throw new Error("encountered bug in ItemFileWriteStore.newItem");}var _1eb=_1e3[key];if(!dojo.isArray(_1eb)){_1eb=[_1eb];}_1e7[key]=_1eb;if(this.referenceIntegrity){for(var i=0;i<_1eb.length;i++){var val=_1eb[i];if(this.isItem(val)){this._addReferenceToMap(val,_1e7,key);}}}}this.onNew(_1e7,_1e8);return _1e7;},_removeArrayElement:function(_1ec,_1ed){var _1ee=dojo.indexOf(_1ec,_1ed);if(_1ee!=-1){_1ec.splice(_1ee,1);return true;}return false;},deleteItem:function(item){this._assert(!this._saveInProgress);this._assertIsItem(item);var _1ef=item[this._itemNumPropName];var _1f0=this.getIdentity(item);if(this.referenceIntegrity){var _1f1=this.getAttributes(item);if(item[this._reverseRefMap]){item["backup_"+this._reverseRefMap]=dojo.clone(item[this._reverseRefMap]);}dojo.forEach(_1f1,function(_1f2){dojo.forEach(this.getValues(item,_1f2),function(_1f3){if(this.isItem(_1f3)){if(!item["backupRefs_"+this._reverseRefMap]){item["backupRefs_"+this._reverseRefMap]=[];}item["backupRefs_"+this._reverseRefMap].push({id:this.getIdentity(_1f3),attr:_1f2});this._removeReferenceFromMap(_1f3,item,_1f2);}},this);},this);var _1f4=item[this._reverseRefMap];if(_1f4){for(var _1f5 in _1f4){var _1f6=null;if(this._itemsByIdentity){_1f6=this._itemsByIdentity[_1f5];}else{_1f6=this._arrayOfAllItems[_1f5];}if(_1f6){for(var _1f7 in _1f4[_1f5]){var _1f8=this.getValues(_1f6,_1f7)||[];var _1f9=dojo.filter(_1f8,function(_1fa){return !(this.isItem(_1fa)&&this.getIdentity(_1fa)==_1f0);},this);this._removeReferenceFromMap(item,_1f6,_1f7);if(_1f9.length<_1f8.length){this._setValueOrValues(_1f6,_1f7,_1f9,true);}}}}}}this._arrayOfAllItems[_1ef]=null;item[this._storeRefPropName]=null;if(this._itemsByIdentity){delete this._itemsByIdentity[_1f0];}this._pending._deletedItems[_1f0]=item;if(item[this._rootItemPropName]){this._removeArrayElement(this._arrayOfTopLevelItems,item);}this.onDelete(item);return true;},setValue:function(item,_1fb,_1fc){return this._setValueOrValues(item,_1fb,_1fc,true);},setValues:function(item,_1fd,_1fe){return this._setValueOrValues(item,_1fd,_1fe,true);},unsetAttribute:function(item,_1ff){return this._setValueOrValues(item,_1ff,[],true);},_setValueOrValues:function(item,_200,_201,_202){this._assert(!this._saveInProgress);this._assertIsItem(item);this._assert(dojo.isString(_200));this._assert(typeof _201!=="undefined");var _203=this._getIdentifierAttribute();if(_200==_203){throw new Error("ItemFileWriteStore does not have support for changing the value of an item's identifier.");}var _204=this._getValueOrValues(item,_200);var _205=this.getIdentity(item);if(!this._pending._modifiedItems[_205]){var _206={};for(var key in item){if((key===this._storeRefPropName)||(key===this._itemNumPropName)||(key===this._rootItemPropName)){_206[key]=item[key];}else{if(key===this._reverseRefMap){_206[key]=dojo.clone(item[key]);}else{_206[key]=item[key].slice(0,item[key].length);}}}this._pending._modifiedItems[_205]=_206;}var _207=false;if(dojo.isArray(_201)&&_201.length===0){_207=delete item[_200];_201=undefined;if(this.referenceIntegrity&&_204){var _208=_204;if(!dojo.isArray(_208)){_208=[_208];}for(var i=0;i<_208.length;i++){var _209=_208[i];if(this.isItem(_209)){this._removeReferenceFromMap(_209,item,_200);}}}}else{var _20a;if(dojo.isArray(_201)){var _20b=_201;_20a=_201.slice(0,_201.length);}else{_20a=[_201];}if(this.referenceIntegrity){if(_204){var _208=_204;if(!dojo.isArray(_208)){_208=[_208];}var map={};dojo.forEach(_208,function(_20c){if(this.isItem(_20c)){var id=this.getIdentity(_20c);map[id.toString()]=true;}},this);dojo.forEach(_20a,function(_20d){if(this.isItem(_20d)){var id=this.getIdentity(_20d);if(map[id.toString()]){delete map[id.toString()];}else{this._addReferenceToMap(_20d,item,_200);}}},this);for(var rId in map){var _20e;if(this._itemsByIdentity){_20e=this._itemsByIdentity[rId];}else{_20e=this._arrayOfAllItems[rId];}this._removeReferenceFromMap(_20e,item,_200);}}else{for(var i=0;i<_20a.length;i++){var _209=_20a[i];if(this.isItem(_209)){this._addReferenceToMap(_209,item,_200);}}}}item[_200]=_20a;_207=true;}if(_202){this.onSet(item,_200,_204,_201);}return _207;},_addReferenceToMap:function(_20f,_210,_211){var _212=this.getIdentity(_210);var _213=_20f[this._reverseRefMap];if(!_213){_213=_20f[this._reverseRefMap]={};}var _214=_213[_212];if(!_214){_214=_213[_212]={};}_214[_211]=true;},_removeReferenceFromMap:function(_215,_216,_217){var _218=this.getIdentity(_216);var _219=_215[this._reverseRefMap];var _21a;if(_219){for(_21a in _219){if(_21a==_218){delete _219[_21a][_217];if(this._isEmpty(_219[_21a])){delete _219[_21a];}}}if(this._isEmpty(_219)){delete _215[this._reverseRefMap];}}},_dumpReferenceMap:function(){var i;for(i=0;i<this._arrayOfAllItems.length;i++){var item=this._arrayOfAllItems[i];if(item&&item[this._reverseRefMap]){}}},_getValueOrValues:function(item,_21b){var _21c=undefined;if(this.hasAttribute(item,_21b)){var _21d=this.getValues(item,_21b);if(_21d.length==1){_21c=_21d[0];}else{_21c=_21d;}}return _21c;},_flatten:function(_21e){if(this.isItem(_21e)){var item=_21e;var _21f=this.getIdentity(item);var _220={_reference:_21f};return _220;}else{if(typeof _21e==="object"){for(var type in this._datatypeMap){var _221=this._datatypeMap[type];if(dojo.isObject(_221)&&!dojo.isFunction(_221)){if(_21e instanceof _221.type){if(!_221.serialize){throw new Error("ItemFileWriteStore:  No serializer defined for type mapping: ["+type+"]");}return {_type:type,_value:_221.serialize(_21e)};}}else{if(_21e instanceof _221){return {_type:type,_value:_21e.toString()};}}}}return _21e;}},_getNewFileContentString:function(){var _222={};var _223=this._getIdentifierAttribute();if(_223!==Number){_222.identifier=_223;}if(this._labelAttr){_222.label=this._labelAttr;}_222.items=[];for(var i=0;i<this._arrayOfAllItems.length;++i){var item=this._arrayOfAllItems[i];if(item!==null){var _224={};for(var key in item){if(key!==this._storeRefPropName&&key!==this._itemNumPropName&&key!==this._reverseRefMap&&key!==this._rootItemPropName){var _225=key;var _226=this.getValues(item,_225);if(_226.length==1){_224[_225]=this._flatten(_226[0]);}else{var _227=[];for(var j=0;j<_226.length;++j){_227.push(this._flatten(_226[j]));_224[_225]=_227;}}}}_222.items.push(_224);}}var _228=true;return dojo.toJson(_222,_228);},_isEmpty:function(_229){var _22a=true;if(dojo.isObject(_229)){var i;for(i in _229){_22a=false;break;}}else{if(dojo.isArray(_229)){if(_229.length>0){_22a=false;}}}return _22a;},save:function(_22b){this._assert(!this._saveInProgress);this._saveInProgress=true;var self=this;var _22c=function(){self._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};self._saveInProgress=false;if(_22b&&_22b.onComplete){var _22d=_22b.scope||dojo.global;_22b.onComplete.call(_22d);}};var _22e=function(err){self._saveInProgress=false;if(_22b&&_22b.onError){var _22f=_22b.scope||dojo.global;_22b.onError.call(_22f,err);}};if(this._saveEverything){var _230=this._getNewFileContentString();this._saveEverything(_22c,_22e,_230);}if(this._saveCustom){this._saveCustom(_22c,_22e);}if(!this._saveEverything&&!this._saveCustom){_22c();}},revert:function(){this._assert(!this._saveInProgress);var _231;for(_231 in this._pending._modifiedItems){var _232=this._pending._modifiedItems[_231];var _233=null;if(this._itemsByIdentity){_233=this._itemsByIdentity[_231];}else{_233=this._arrayOfAllItems[_231];}_232[this._storeRefPropName]=this;for(key in _233){delete _233[key];}dojo.mixin(_233,_232);}var _234;for(_231 in this._pending._deletedItems){_234=this._pending._deletedItems[_231];_234[this._storeRefPropName]=this;var _235=_234[this._itemNumPropName];if(_234["backup_"+this._reverseRefMap]){_234[this._reverseRefMap]=_234["backup_"+this._reverseRefMap];delete _234["backup_"+this._reverseRefMap];}this._arrayOfAllItems[_235]=_234;if(this._itemsByIdentity){this._itemsByIdentity[_231]=_234;}if(_234[this._rootItemPropName]){this._arrayOfTopLevelItems.push(_234);}}for(_231 in this._pending._deletedItems){_234=this._pending._deletedItems[_231];if(_234["backupRefs_"+this._reverseRefMap]){dojo.forEach(_234["backupRefs_"+this._reverseRefMap],function(_236){var _237;if(this._itemsByIdentity){_237=this._itemsByIdentity[_236.id];}else{_237=this._arrayOfAllItems[_236.id];}this._addReferenceToMap(_237,_234,_236.attr);},this);delete _234["backupRefs_"+this._reverseRefMap];}}for(_231 in this._pending._newItems){var _238=this._pending._newItems[_231];_238[this._storeRefPropName]=null;this._arrayOfAllItems[_238[this._itemNumPropName]]=null;if(_238[this._rootItemPropName]){this._removeArrayElement(this._arrayOfTopLevelItems,_238);}if(this._itemsByIdentity){delete this._itemsByIdentity[_231];}}this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};return true;},isDirty:function(item){if(item){var _239=this.getIdentity(item);return new Boolean(this._pending._newItems[_239]||this._pending._modifiedItems[_239]||this._pending._deletedItems[_239]).valueOf();}else{if(!this._isEmpty(this._pending._newItems)||!this._isEmpty(this._pending._modifiedItems)||!this._isEmpty(this._pending._deletedItems)){return true;}return false;}},onSet:function(item,_23a,_23b,_23c){},onNew:function(_23d,_23e){},onDelete:function(_23f){},close:function(_240){if(this.clearOnClose){if(!this.isDirty()){this.inherited(arguments);}else{throw new Error("dojo.data.ItemFileWriteStore: There are unsaved changes present in the store.  Please save or revert the changes before invoking close.");}}}});}if(!dojo._hasResource["dojox.uuid._base"]){dojo._hasResource["dojox.uuid._base"]=true;dojo.provide("dojox.uuid._base");dojox.uuid.NIL_UUID="00000000-0000-0000-0000-000000000000";dojox.uuid.version={UNKNOWN:0,TIME_BASED:1,DCE_SECURITY:2,NAME_BASED_MD5:3,RANDOM:4,NAME_BASED_SHA1:5};dojox.uuid.variant={NCS:"0",DCE:"10",MICROSOFT:"110",UNKNOWN:"111"};dojox.uuid.assert=function(_241,_242){if(!_241){if(!_242){_242="An assert statement failed.\n"+"The method dojox.uuid.assert() was called with a 'false' value.\n";}throw new Error(_242);}};dojox.uuid.generateNilUuid=function(){return dojox.uuid.NIL_UUID;};dojox.uuid.isValid=function(_243){_243=_243.toString();var _244=(dojo.isString(_243)&&(_243.length==36)&&(_243==_243.toLowerCase()));if(_244){var _245=_243.split("-");_244=((_245.length==5)&&(_245[0].length==8)&&(_245[1].length==4)&&(_245[2].length==4)&&(_245[3].length==4)&&(_245[4].length==12));var _246=16;for(var i in _245){var part=_245[i];var _247=parseInt(part,_246);_244=_244&&isFinite(_247);}}return _244;};dojox.uuid.getVariant=function(_248){if(!dojox.uuid._ourVariantLookupTable){var _249=dojox.uuid.variant;var _24a=[];_24a[0]=_249.NCS;_24a[1]=_249.NCS;_24a[2]=_249.NCS;_24a[3]=_249.NCS;_24a[4]=_249.NCS;_24a[5]=_249.NCS;_24a[6]=_249.NCS;_24a[7]=_249.NCS;_24a[8]=_249.DCE;_24a[9]=_249.DCE;_24a[10]=_249.DCE;_24a[11]=_249.DCE;_24a[12]=_249.MICROSOFT;_24a[13]=_249.MICROSOFT;_24a[14]=_249.UNKNOWN;_24a[15]=_249.UNKNOWN;dojox.uuid._ourVariantLookupTable=_24a;}_248=_248.toString();var _24b=_248.charAt(19);var _24c=16;var _24d=parseInt(_24b,_24c);dojox.uuid.assert((_24d>=0)&&(_24d<=16));return dojox.uuid._ourVariantLookupTable[_24d];};dojox.uuid.getVersion=function(_24e){var _24f="dojox.uuid.getVersion() was not passed a DCE Variant UUID.";dojox.uuid.assert(dojox.uuid.getVariant(_24e)==dojox.uuid.variant.DCE,_24f);_24e=_24e.toString();var _250=_24e.charAt(14);var _251=16;var _252=parseInt(_250,_251);return _252;};dojox.uuid.getNode=function(_253){var _254="dojox.uuid.getNode() was not passed a TIME_BASED UUID.";dojox.uuid.assert(dojox.uuid.getVersion(_253)==dojox.uuid.version.TIME_BASED,_254);_253=_253.toString();var _255=_253.split("-");var _256=_255[4];return _256;};dojox.uuid.getTimestamp=function(_257,_258){var _259="dojox.uuid.getTimestamp() was not passed a TIME_BASED UUID.";dojox.uuid.assert(dojox.uuid.getVersion(_257)==dojox.uuid.version.TIME_BASED,_259);_257=_257.toString();if(!_258){_258=null;}switch(_258){case "string":case String:return dojox.uuid.getTimestamp(_257,Date).toUTCString();break;case "hex":var _25a=_257.split("-");var _25b=_25a[0];var _25c=_25a[1];var _25d=_25a[2];_25d=_25d.slice(1);var _25e=_25d+_25c+_25b;dojox.uuid.assert(_25e.length==15);return _25e;break;case null:case "date":case Date:var _25f=3394248;var _260=16;var _261=_257.split("-");var _262=parseInt(_261[0],_260);var _263=parseInt(_261[1],_260);var _264=parseInt(_261[2],_260);var _265=_264&4095;_265<<=16;_265+=_263;_265*=4294967296;_265+=_262;var _266=_265/10000;var _267=60*60;var _268=_25f;var _269=_268*_267;var _26a=_269*1000;var _26b=_266-_26a;var _26c=new Date(_26b);return _26c;break;default:dojox.uuid.assert(false,"dojox.uuid.getTimestamp was not passed a valid returnType: "+_258);break;}};}if(!dojo._hasResource["dojox.uuid"]){dojo._hasResource["dojox.uuid"]=true;dojo.provide("dojox.uuid");}if(!dojo._hasResource["dojox.data.QueryReadStore"]){dojo._hasResource["dojox.data.QueryReadStore"]=true;dojo.provide("dojox.data.QueryReadStore");dojo.declare("dojox.data.QueryReadStore",null,{url:"",requestMethod:"get",_className:"dojox.data.QueryReadStore",_items:[],_lastServerQuery:null,_numRows:-1,lastRequestHash:null,doClientPaging:false,doClientSorting:false,_itemsByIdentity:null,_identifier:null,_features:{"dojo.data.api.Read":true,"dojo.data.api.Identity":true},_labelAttr:"label",constructor:function(_26d){dojo.mixin(this,_26d);},getValue:function(item,_26e,_26f){this._assertIsItem(item);if(!dojo.isString(_26e)){throw new Error(this._className+".getValue(): Invalid attribute, string expected!");}if(!this.hasAttribute(item,_26e)){if(_26f){return _26f;}}return item.i[_26e];},getValues:function(item,_270){this._assertIsItem(item);var ret=[];if(this.hasAttribute(item,_270)){ret.push(item.i[_270]);}return ret;},getAttributes:function(item){this._assertIsItem(item);var ret=[];for(var i in item.i){ret.push(i);}return ret;},hasAttribute:function(item,_271){return this.isItem(item)&&typeof item.i[_271]!="undefined";},containsValue:function(item,_272,_273){var _274=this.getValues(item,_272);var len=_274.length;for(var i=0;i<len;i++){if(_274[i]==_273){return true;}}return false;},isItem:function(_275){if(_275){return typeof _275.r!="undefined"&&_275.r==this;}return false;},isItemLoaded:function(_276){return this.isItem(_276);},loadItem:function(args){if(this.isItemLoaded(args.item)){return;}},fetch:function(_277){_277=_277||{};if(!_277.store){_277.store=this;}var self=this;var _278=function(_279,_27a){if(_27a.onError){var _27b=_27a.scope||dojo.global;_27a.onError.call(_27b,_279,_27a);}};var _27c=function(_27d,_27e,_27f){var _280=_27e.abort||null;var _281=false;var _282=_27e.start?_27e.start:0;if(self.doClientPaging==false){_282=0;}var _283=_27e.count?(_282+_27e.count):_27d.length;_27e.abort=function(){_281=true;if(_280){_280.call(_27e);}};var _284=_27e.scope||dojo.global;if(!_27e.store){_27e.store=self;}if(_27e.onBegin){_27e.onBegin.call(_284,_27f,_27e);}if(_27e.sort&&self.doClientSorting){_27d.sort(dojo.data.util.sorter.createSortFunction(_27e.sort,self));}if(_27e.onItem){for(var i=_282;(i<_27d.length)&&(i<_283);++i){var item=_27d[i];if(!_281){_27e.onItem.call(_284,item,_27e);}}}if(_27e.onComplete&&!_281){var _285=null;if(!_27e.onItem){_285=_27d.slice(_282,_283);}_27e.onComplete.call(_284,_285,_27e);}};this._fetchItems(_277,_27c,_278);return _277;},getFeatures:function(){return this._features;},close:function(_286){},getLabel:function(item){if(this._labelAttr&&this.isItem(item)){return this.getValue(item,this._labelAttr);}return undefined;},getLabelAttributes:function(item){if(this._labelAttr){return [this._labelAttr];}return null;},_xhrFetchHandler:function(data,_287,_288,_289){data=this._filterResponse(data);if(data.label){this._labelAttr=data.label;}var _28a=data.numRows||-1;this._items=[];dojo.forEach(data.items,function(e){this._items.push({i:e,r:this});},this);var _28b=data.identifier;this._itemsByIdentity={};if(_28b){this._identifier=_28b;var i;for(i=0;i<this._items.length;++i){var item=this._items[i].i;var _28c=item[_28b];if(!this._itemsByIdentity[_28c]){this._itemsByIdentity[_28c]=item;}else{throw new Error(this._className+":  The json data as specified by: ["+this.url+"] is malformed.  Items within the list have identifier: ["+_28b+"].  Value collided: ["+_28c+"]");}}}else{this._identifier=Number;for(i=0;i<this._items.length;++i){this._items[i].n=i;}}_28a=this._numRows=(_28a===-1)?this._items.length:_28a;_288(this._items,_287,_28a);this._numRows=_28a;},_fetchItems:function(_28d,_28e,_28f){var _290=_28d.serverQuery||_28d.query||{};if(!this.doClientPaging){_290.start=_28d.start||0;if(_28d.count){_290.count=_28d.count;}}if(!this.doClientSorting&&_28d.sort){var _291=[];dojo.forEach(_28d.sort,function(sort){if(sort&&sort.attribute){_291.push((sort.descending?"-":"")+sort.attribute);}});_290.sort=_291.join(",");}if(document.getElementById("_token")){_290.token=document.getElementById("_token").getAttribute("value");}if(this.doClientPaging&&this._lastServerQuery!==null&&dojo.toJson(_290)==dojo.toJson(this._lastServerQuery)){this._numRows=(this._numRows===-1)?this._items.length:this._numRows;_28e(this._items,_28d,this._numRows);}else{var _292=this.requestMethod.toLowerCase()=="post"?dojo.xhrPost:dojo.xhrGet;var _293=_292({url:this.url,handleAs:"json-comment-optional",content:_290,failOk:true});_28d.abort=function(){_293.cancel();};_293.addCallback(dojo.hitch(this,function(data){this._xhrFetchHandler(data,_28d,_28e,_28f);}));_293.addErrback(function(_294){_28f(_294,_28d);});this.lastRequestHash=new Date().getTime()+"-"+String(Math.random()).substring(2);this._lastServerQuery=dojo.mixin({},_290);}},_filterResponse:function(data){return data;},_assertIsItem:function(item){if(!this.isItem(item)){throw new Error(this._className+": Invalid item argument.");}},_assertIsAttribute:function(_295){if(typeof _295!=="string"){throw new Error(this._className+": Invalid attribute argument ('"+_295+"').");}},fetchItemByIdentity:function(_296){if(this._itemsByIdentity){var item=this._itemsByIdentity[_296.identity];if(!(item===undefined)){if(_296.onItem){var _297=_296.scope?_296.scope:dojo.global;_296.onItem.call(_297,{i:item,r:this});}return;}}var _298=function(_299,_29a){var _29b=_296.scope?_296.scope:dojo.global;if(_296.onError){_296.onError.call(_29b,_299);}};var _29c=function(_29d,_29e){var _29f=_296.scope?_296.scope:dojo.global;try{var item=null;if(_29d&&_29d.length==1){item=_29d[0];}if(_296.onItem){_296.onItem.call(_29f,item);}}catch(error){if(_296.onError){_296.onError.call(_29f,error);}}};var _2a0={serverQuery:{id:_296.identity}};this._fetchItems(_2a0,_29c,_298);},getIdentity:function(item){var _2a1=null;if(this._identifier===Number){_2a1=item.n;}else{_2a1=item.i[this._identifier];}return _2a1;},getIdentityAttributes:function(item){return [this._identifier];}});}if(!dojo._hasResource["dijit._KeyNavContainer"]){dojo._hasResource["dijit._KeyNavContainer"]=true;dojo.provide("dijit._KeyNavContainer");dojo.declare("dijit._KeyNavContainer",dijit._Container,{tabIndex:"0",_keyNavCodes:{},connectKeyNavHandlers:function(_2a2,_2a3){var _2a4=(this._keyNavCodes={});var prev=dojo.hitch(this,this.focusPrev);var next=dojo.hitch(this,this.focusNext);dojo.forEach(_2a2,function(code){_2a4[code]=prev;});dojo.forEach(_2a3,function(code){_2a4[code]=next;});_2a4[dojo.keys.HOME]=dojo.hitch(this,"focusFirstChild");_2a4[dojo.keys.END]=dojo.hitch(this,"focusLastChild");this.connect(this.domNode,"onkeypress","_onContainerKeypress");this.connect(this.domNode,"onfocus","_onContainerFocus");},startupKeyNavChildren:function(){dojo.forEach(this.getChildren(),dojo.hitch(this,"_startupChild"));},addChild:function(_2a5,_2a6){dijit._KeyNavContainer.superclass.addChild.apply(this,arguments);this._startupChild(_2a5);},focus:function(){this.focusFirstChild();},focusFirstChild:function(){var _2a7=this._getFirstFocusableChild();if(_2a7){this.focusChild(_2a7);}},focusLastChild:function(){var _2a8=this._getLastFocusableChild();if(_2a8){this.focusChild(_2a8);}},focusNext:function(){var _2a9=this._getNextFocusableChild(this.focusedChild,1);this.focusChild(_2a9);},focusPrev:function(){var _2aa=this._getNextFocusableChild(this.focusedChild,-1);this.focusChild(_2aa,true);},focusChild:function(_2ab,last){if(this.focusedChild&&_2ab!==this.focusedChild){this._onChildBlur(this.focusedChild);}_2ab.set("tabIndex",this.tabIndex);_2ab.focus(last?"end":"start");this._set("focusedChild",_2ab);},_startupChild:function(_2ac){_2ac.set("tabIndex","-1");this.connect(_2ac,"_onFocus",function(){_2ac.set("tabIndex",this.tabIndex);});this.connect(_2ac,"_onBlur",function(){_2ac.set("tabIndex","-1");});},_onContainerFocus:function(evt){if(evt.target!==this.domNode){return;}this.focusFirstChild();dojo.attr(this.domNode,"tabIndex","-1");},_onBlur:function(evt){if(this.tabIndex){dojo.attr(this.domNode,"tabIndex",this.tabIndex);}this.inherited(arguments);},_onContainerKeypress:function(evt){if(evt.ctrlKey||evt.altKey){return;}var func=this._keyNavCodes[evt.charOrCode];if(func){func();dojo.stopEvent(evt);}},_onChildBlur:function(_2ad){},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1);},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1);},_getNextFocusableChild:function(_2ae,dir){if(_2ae){_2ae=this._getSiblingOfChild(_2ae,dir);}var _2af=this.getChildren();for(var i=0;i<_2af.length;i++){if(!_2ae){_2ae=_2af[(dir>0)?0:(_2af.length-1)];}if(_2ae.isFocusable()){return _2ae;}_2ae=this._getSiblingOfChild(_2ae,dir);}return null;}});}if(!dojo._hasResource["dijit.MenuItem"]){dojo._hasResource["dijit.MenuItem"]=true;dojo.provide("dijit.MenuItem");dojo.declare("dijit.MenuItem",[dijit._Widget,dijit._Templated,dijit._Contained,dijit._CssStateMixin],{templateString:dojo.cache("dijit","templates/MenuItem.html","<tr class=\"dijitReset dijitMenuItem\" dojoAttachPoint=\"focusNode\" role=\"menuitem\" tabIndex=\"-1\"\n\t\tdojoAttachEvent=\"onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitIcon dijitMenuItemIcon\" dojoAttachPoint=\"iconNode\"/>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" dojoAttachPoint=\"containerNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" dojoAttachPoint=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">\n\t\t<div dojoAttachPoint=\"arrowWrapper\" style=\"visibility: hidden\">\n\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuExpand\"/>\n\t\t\t<span class=\"dijitMenuExpandA11y\">+</span>\n\t\t</div>\n\t</td>\n</tr>\n"),attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{label:{node:"containerNode",type:"innerHTML"},iconClass:{node:"iconNode",type:"class"}}),baseClass:"dijitMenuItem",label:"",iconClass:"",accelKey:"",disabled:false,_fillContent:function(_2b0){if(_2b0&&!("label" in this.params)){this.set("label",_2b0.innerHTML);}},buildRendering:function(){this.inherited(arguments);var _2b1=this.id+"_text";dojo.attr(this.containerNode,"id",_2b1);if(this.accelKeyNode){if(!window.isAccessibilityEnabled||(window.isAccessibilityEnabled&&this.accelKeyNode&&this.accelKeyNode.innerHTML&&this.accelKeyNode.innerHTML!=="")){dojo.attr(this.accelKeyNode,"id",this.id+"_accel");_2b1+=" "+this.id+"_accel";}}dijit.setWaiState(this.domNode,"labelledby",_2b1);dojo.setSelectable(this.domNode,false);},_onHover:function(){this.getParent().onItemHover(this);},_onUnhover:function(){this.getParent().onItemUnhover(this);this._set("hovering",false);},_onClick:function(evt){this.getParent().onItemClick(this,evt);dojo.stopEvent(evt);},onClick:function(evt){},focus:function(){try{if(dojo.isIE==8){this.containerNode.focus();}dijit.focus(this.focusNode);}catch(e){}},_onFocus:function(){this._setSelected(false);this.getParent()._onItemFocus(this);this.inherited(arguments);},_setSelected:function(_2b2){dojo.toggleClass(this.domNode,"dijitMenuItemSelected",_2b2);},setLabel:function(_2b3){dojo.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",_2b3);},setDisabled:function(_2b4){dojo.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",_2b4);},_setDisabledAttr:function(_2b5){dijit.setWaiState(this.focusNode,"disabled",_2b5?"true":"false");this._set("disabled",_2b5);},_setAccelKeyAttr:function(_2b6){this.accelKeyNode.style.display=_2b6?"":"none";this.accelKeyNode.innerHTML=_2b6;dojo.attr(this.containerNode,"colSpan",_2b6?"1":"2");this._set("accelKey",_2b6);}});}if(!dojo._hasResource["dijit.PopupMenuItem"]){dojo._hasResource["dijit.PopupMenuItem"]=true;dojo.provide("dijit.PopupMenuItem");dojo.declare("dijit.PopupMenuItem",dijit.MenuItem,{_fillContent:function(){if(this.srcNodeRef){var _2b7=dojo.query("*",this.srcNodeRef);dijit.PopupMenuItem.superclass._fillContent.call(this,_2b7[0]);this.dropDownContainer=this.srcNodeRef;}},startup:function(){if(this._started){return;}this.inherited(arguments);if(!this.popup){var node=dojo.query("[widgetId]",this.dropDownContainer)[0];this.popup=dijit.byNode(node);}dojo.body().appendChild(this.popup.domNode);this.popup.startup();this.popup.domNode.style.display="none";if(this.arrowWrapper){dojo.style(this.arrowWrapper,"visibility","");}dijit.setWaiState(this.focusNode,"haspopup","true");},destroyDescendants:function(){if(this.popup){if(!this.popup._destroyed){this.popup.destroyRecursive();}delete this.popup;}this.inherited(arguments);}});}if(!dojo._hasResource["dijit.CheckedMenuItem"]){dojo._hasResource["dijit.CheckedMenuItem"]=true;dojo.provide("dijit.CheckedMenuItem");dojo.declare("dijit.CheckedMenuItem",dijit.MenuItem,{templateString:dojo.cache("dijit","templates/CheckedMenuItem.html","<tr class=\"dijitReset dijitMenuItem\" dojoAttachPoint=\"focusNode\" role=\"menuitemcheckbox\" tabIndex=\"-1\"\n\t\tdojoAttachEvent=\"onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuItemIcon dijitCheckedMenuItemIcon\" dojoAttachPoint=\"iconNode\"/>\n\t\t<span class=\"dijitCheckedMenuItemIconChar\">&#10003;</span>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" dojoAttachPoint=\"containerNode,labelNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" dojoAttachPoint=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">&nbsp;</td>\n</tr>\n"),checked:false,_setCheckedAttr:function(_2b8){dojo.toggleClass(this.domNode,"dijitCheckedMenuItemChecked",_2b8);dijit.setWaiState(this.domNode,"checked",_2b8);this._set("checked",_2b8);},onChange:function(_2b9){},_onClick:function(e){if(!this.disabled){this.set("checked",!this.checked);this.onChange(this.checked);}this.inherited(arguments);}});}if(!dojo._hasResource["dijit.MenuSeparator"]){dojo._hasResource["dijit.MenuSeparator"]=true;dojo.provide("dijit.MenuSeparator");dojo.declare("dijit.MenuSeparator",[dijit._Widget,dijit._Templated,dijit._Contained],{templateString:dojo.cache("dijit","templates/MenuSeparator.html","<tr class=\"dijitMenuSeparator\">\n\t<td class=\"dijitMenuSeparatorIconCell\">\n\t\t<div class=\"dijitMenuSeparatorTop\"></div>\n\t\t<div class=\"dijitMenuSeparatorBottom\"></div>\n\t</td>\n\t<td colspan=\"3\" class=\"dijitMenuSeparatorLabelCell\">\n\t\t<div class=\"dijitMenuSeparatorTop dijitMenuSeparatorLabel\"></div>\n\t\t<div class=\"dijitMenuSeparatorBottom\"></div>\n\t</td>\n</tr>\n"),buildRendering:function(){this.inherited(arguments);dojo.setSelectable(this.domNode,false);},isFocusable:function(){return false;}});}if(!dojo._hasResource["dijit.Menu"]){dojo._hasResource["dijit.Menu"]=true;dojo.provide("dijit.Menu");dojo.declare("dijit._MenuBase",[dijit._Widget,dijit._Templated,dijit._KeyNavContainer],{parentMenu:null,popupDelay:500,startup:function(){if(this._started){return;}dojo.forEach(this.getChildren(),function(_2ba){_2ba.startup();});this.startupKeyNavChildren();this.inherited(arguments);},onExecute:function(){},onCancel:function(_2bb){},_moveToPopup:function(evt){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled){this.focusedChild._onClick(evt);}else{var _2bc=this._getTopMenu();if(_2bc&&_2bc._isMenuBar){_2bc.focusNext();}}},_onPopupHover:function(evt){if(this.currentPopup&&this.currentPopup._pendingClose_timer){var _2bd=this.currentPopup.parentMenu;if(_2bd.focusedChild){_2bd.focusedChild._setSelected(false);}_2bd.focusedChild=this.currentPopup.from_item;_2bd.focusedChild._setSelected(true);this._stopPendingCloseTimer(this.currentPopup);}},onItemHover:function(item){if(this.isActive){this.focusChild(item);if(this.focusedChild.popup&&!this.focusedChild.disabled&&!this.hover_timer){this.hover_timer=setTimeout(dojo.hitch(this,"_openPopup"),this.popupDelay);}}if(this.focusedChild){this.focusChild(item);}this._hoveredChild=item;},_onChildBlur:function(item){this._stopPopupTimer();item._setSelected(false);var _2be=item.popup;if(_2be){this._stopPendingCloseTimer(_2be);_2be._pendingClose_timer=setTimeout(function(){_2be._pendingClose_timer=null;if(_2be.parentMenu){_2be.parentMenu.currentPopup=null;}dijit.popup.close(_2be);},this.popupDelay);}},onItemUnhover:function(item){if(this.isActive){this._stopPopupTimer();item._setSelected(false);}if(this._hoveredChild==item){this._hoveredChild=null;}},_stopPopupTimer:function(){if(this.hover_timer){clearTimeout(this.hover_timer);this.hover_timer=null;}},_stopPendingCloseTimer:function(_2bf){if(_2bf._pendingClose_timer){clearTimeout(_2bf._pendingClose_timer);_2bf._pendingClose_timer=null;}},_stopFocusTimer:function(){if(this._focus_timer){clearTimeout(this._focus_timer);this._focus_timer=null;}},_getTopMenu:function(){for(var top=this;top.parentMenu;top=top.parentMenu){}return top;},onItemClick:function(item,evt){if(typeof this.isShowingNow=="undefined"){this._markActive();}this.focusChild(item);if(item.disabled){return false;}if(item.popup){this._openPopup();}else{this.onExecute();item.onClick(evt);}},_openPopup:function(){this._stopPopupTimer();var _2c0=this.focusedChild;if(!_2c0){return;}var _2c1=_2c0.popup;if(_2c1.isShowingNow){return;}if(this.currentPopup){this._stopPendingCloseTimer(this.currentPopup);dijit.popup.close(this.currentPopup);}_2c1.parentMenu=this;_2c1.from_item=_2c0;var self=this;dijit.popup.open({parent:this,popup:_2c1,around:_2c0.domNode,orient:this._orient||(this.isLeftToRight()?{"TR":"TL","TL":"TR","BR":"BL","BL":"BR"}:{"TL":"TR","TR":"TL","BL":"BR","BR":"BL"}),onCancel:function(){self.focusChild(_2c0);self._cleanUp();_2c0._setSelected(true);self.focusedChild=_2c0;},onExecute:dojo.hitch(this,"_cleanUp")});this.currentPopup=_2c1;_2c1.connect(_2c1.domNode,"onmouseenter",dojo.hitch(self,"_onPopupHover"));if(_2c1.focus){_2c1._focus_timer=setTimeout(dojo.hitch(_2c1,function(){this._focus_timer=null;this.focus();}),0);}},_markActive:function(){this.isActive=true;dojo.replaceClass(this.domNode,"dijitMenuActive","dijitMenuPassive");},onOpen:function(e){this.isShowingNow=true;this._markActive();},_markInactive:function(){this.isActive=false;dojo.replaceClass(this.domNode,"dijitMenuPassive","dijitMenuActive");},onClose:function(){this._stopFocusTimer();this._markInactive();this.isShowingNow=false;this.parentMenu=null;},_closeChild:function(){this._stopPopupTimer();var _2c2=this.focusedChild&&this.focusedChild.from_item;if(this.currentPopup){if(dijit._curFocus&&dojo.isDescendant(dijit._curFocus,this.currentPopup.domNode)){this.focusedChild.focusNode.focus();}dijit.popup.close(this.currentPopup);this.currentPopup=null;}if(this.focusedChild){this.focusedChild._setSelected(false);this.focusedChild._onUnhover();this.focusedChild=null;}},_onItemFocus:function(item){if(this._hoveredChild&&this._hoveredChild!=item){this._hoveredChild._onUnhover();}},_onBlur:function(){this._cleanUp();this.inherited(arguments);},_cleanUp:function(){this._closeChild();if(typeof this.isShowingNow=="undefined"){this._markInactive();}}});dojo.declare("dijit.Menu",dijit._MenuBase,{constructor:function(){this._bindings=[];},templateString:dojo.cache("dijit","templates/Menu.html","<table class=\"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable\" role=\"menu\" tabIndex=\"${tabIndex}\" dojoAttachEvent=\"onkeypress:_onKeyPress\" cellspacing=\"0\">\n\t<tbody class=\"dijitReset\" dojoAttachPoint=\"containerNode\"></tbody>\n</table>\n"),baseClass:"dijitMenu",targetNodeIds:[],contextMenuForWindow:false,leftClickToOpen:false,refocus:true,postCreate:function(){if(this.contextMenuForWindow){this.bindDomNode(dojo.body());}else{dojo.forEach(this.targetNodeIds,this.bindDomNode,this);}var k=dojo.keys,l=this.isLeftToRight();this._openSubMenuKey=l?k.RIGHT_ARROW:k.LEFT_ARROW;this._closeSubMenuKey=l?k.LEFT_ARROW:k.RIGHT_ARROW;this.connectKeyNavHandlers([k.UP_ARROW],[k.DOWN_ARROW]);},_onKeyPress:function(evt){if(evt.ctrlKey||evt.altKey){return;}switch(evt.charOrCode){case this._openSubMenuKey:this._moveToPopup(evt);dojo.stopEvent(evt);break;case this._closeSubMenuKey:if(this.parentMenu){if(this.parentMenu._isMenuBar){this.parentMenu.focusPrev();}else{this.onCancel(false);}}else{dojo.stopEvent(evt);}break;}},_iframeContentWindow:function(_2c3){var win=dojo.window.get(this._iframeContentDocument(_2c3))||this._iframeContentDocument(_2c3)["__parent__"]||(_2c3.name&&dojo.doc.frames[_2c3.name])||null;return win;},_iframeContentDocument:function(_2c4){var doc=_2c4.contentDocument||(_2c4.contentWindow&&_2c4.contentWindow.document)||(_2c4.name&&dojo.doc.frames[_2c4.name]&&dojo.doc.frames[_2c4.name].document)||null;return doc;},bindDomNode:function(node){node=dojo.byId(node);var cn;if(node.tagName.toLowerCase()=="iframe"){var _2c5=node,win=this._iframeContentWindow(_2c5);cn=dojo.withGlobal(win,dojo.body);}else{cn=(node==dojo.body()?dojo.doc.documentElement:node);}var _2c6={node:node,iframe:_2c5};dojo.attr(node,"_dijitMenu"+this.id,this._bindings.push(_2c6));var _2c7=dojo.hitch(this,function(cn){return [dojo.connect(cn,this.leftClickToOpen?"onclick":"oncontextmenu",this,function(evt){dojo.stopEvent(evt);this._scheduleOpen(evt.target,_2c5,{x:evt.pageX,y:evt.pageY});}),dojo.connect(cn,"onkeydown",this,function(evt){if(evt.shiftKey&&evt.keyCode==dojo.keys.F10){dojo.stopEvent(evt);this._scheduleOpen(evt.target,_2c5);}})];});_2c6.connects=cn?_2c7(cn):[];if(_2c5){_2c6.onloadHandler=dojo.hitch(this,function(){var win=this._iframeContentWindow(_2c5);cn=dojo.withGlobal(win,dojo.body);_2c6.connects=_2c7(cn);});if(_2c5.addEventListener){_2c5.addEventListener("load",_2c6.onloadHandler,false);}else{_2c5.attachEvent("onload",_2c6.onloadHandler);}}},unBindDomNode:function(_2c8){var node;try{node=dojo.byId(_2c8);}catch(e){return;}var _2c9="_dijitMenu"+this.id;if(node&&dojo.hasAttr(node,_2c9)){var bid=dojo.attr(node,_2c9)-1,b=this._bindings[bid];dojo.forEach(b.connects,dojo.disconnect);var _2ca=b.iframe;if(_2ca){if(_2ca.removeEventListener){_2ca.removeEventListener("load",b.onloadHandler,false);}else{_2ca.detachEvent("onload",b.onloadHandler);}}dojo.removeAttr(node,_2c9);delete this._bindings[bid];}},_scheduleOpen:function(_2cb,_2cc,_2cd){if(!this._openTimer){this._openTimer=setTimeout(dojo.hitch(this,function(){delete this._openTimer;this._openMyself({target:_2cb,iframe:_2cc,coords:_2cd});}),1);}},_openMyself:function(args){var _2ce=args.target,_2cf=args.iframe,_2d0=args.coords;if(_2d0){if(_2cf){var od=_2ce.ownerDocument,ifc=dojo.position(_2cf,true),win=this._iframeContentWindow(_2cf),_2d1=dojo.withGlobal(win,"_docScroll",dojo);var cs=dojo.getComputedStyle(_2cf),tp=dojo._toPixelValue,left=(dojo.isIE&&dojo.isQuirks?0:tp(_2cf,cs.paddingLeft))+(dojo.isIE&&dojo.isQuirks?tp(_2cf,cs.borderLeftWidth):0),top=(dojo.isIE&&dojo.isQuirks?0:tp(_2cf,cs.paddingTop))+(dojo.isIE&&dojo.isQuirks?tp(_2cf,cs.borderTopWidth):0);_2d0.x+=ifc.x+left-_2d1.x;_2d0.y+=ifc.y+top-_2d1.y;}}else{_2d0=dojo.position(_2ce,true);_2d0.x+=10;_2d0.y+=10;}var self=this;var _2d2=dijit.getFocus(this);function _2d3(){if(self.refocus){dijit.focus(_2d2);}dijit.popup.close(self);};dijit.popup.open({popup:this,x:_2d0.x,y:_2d0.y,onExecute:_2d3,onCancel:_2d3,orient:this.isLeftToRight()?"L":"R"});this.focus();this._onBlur=function(){this.inherited("_onBlur",arguments);dijit.popup.close(this);};},uninitialize:function(){dojo.forEach(this._bindings,function(b){if(b){this.unBindDomNode(b.node);}},this);this.inherited(arguments);}});}if(!dojo._hasResource["dojox.html.metrics"]){dojo._hasResource["dojox.html.metrics"]=true;dojo.provide("dojox.html.metrics");(function(){var dhm=dojox.html.metrics;dhm.getFontMeasurements=function(){var _2d4={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,"small":0,"medium":0,"large":0,"x-large":0,"xx-large":0};if(dojo.isIE){dojo.doc.documentElement.style.fontSize="100%";}var div=dojo.doc.createElement("div");var ds=div.style;ds.position="absolute";ds.left="-100px";ds.top="0";ds.width="30px";ds.height="1000em";ds.borderWidth="0";ds.margin="0";ds.padding="0";ds.outline="0";ds.lineHeight="1";ds.overflow="hidden";dojo.body().appendChild(div);for(var p in _2d4){ds.fontSize=p;_2d4[p]=Math.round(div.offsetHeight*12/16)*16/12/1000;}dojo.body().removeChild(div);div=null;return _2d4;};var _2d5=null;dhm.getCachedFontMeasurements=function(_2d6){if(_2d6||!_2d5){_2d5=dhm.getFontMeasurements();}return _2d5;};var _2d7=null,_2d8={};dhm.getTextBox=function(text,_2d9,_2da){var m,s;if(!_2d7){m=_2d7=dojo.doc.createElement("div");var c=dojo.doc.createElement("div");c.appendChild(m);s=c.style;s.overflow="scroll";s.position="absolute";s.left="0px";s.top="-10000px";s.width="1px";s.height="1px";s.visibility="hidden";s.borderWidth="0";s.margin="0";s.padding="0";s.outline="0";dojo.body().appendChild(c);}else{m=_2d7;}m.className="";s=m.style;s.borderWidth="0";s.margin="0";s.padding="0";s.outline="0";if(arguments.length>1&&_2d9){for(var i in _2d9){if(i in _2d8){continue;}s[i]=_2d9[i];}}if(arguments.length>2&&_2da){m.className=_2da;}m.innerHTML=text;var box=dojo.position(m);box.w=m.parentNode.scrollWidth;return box;};var _2db={w:16,h:16};dhm.getScrollbar=function(){return {w:_2db.w,h:_2db.h};};dhm._fontResizeNode=null;dhm.initOnFontResize=function(_2dc){var f=dhm._fontResizeNode=dojo.doc.createElement("iframe");var fs=f.style;fs.position="absolute";fs.width="5em";fs.height="10em";fs.top="-10000px";if(dojo.isIE){f.onreadystatechange=function(){if(f.contentWindow.document.readyState=="complete"){f.onresize=f.contentWindow.parent[dojox._scopeName].html.metrics._fontresize;}};}else{f.onload=function(){f.contentWindow.onresize=f.contentWindow.parent[dojox._scopeName].html.metrics._fontresize;};}f.setAttribute("src","javascript:'<html><head><script>if(\"loadFirebugConsole\" in window){window.loadFirebugConsole();}</script></head><body></body></html>'");dojo.body().appendChild(f);dhm.initOnFontResize=function(){};};dhm.onFontResize=function(){};dhm._fontresize=function(){dhm.onFontResize();};dojo.addOnUnload(function(){var f=dhm._fontResizeNode;if(f){if(dojo.isIE&&f.onresize){f.onresize=null;}else{if(f.contentWindow&&f.contentWindow.onresize){f.contentWindow.onresize=null;}}dhm._fontResizeNode=null;}});dojo.addOnLoad(function(){try{var n=dojo.doc.createElement("div");n.style.cssText="top:0;left:0;width:100px;height:100px;overflow:scroll;position:absolute;visibility:hidden;";dojo.body().appendChild(n);_2db.w=n.offsetWidth-n.clientWidth;_2db.h=n.offsetHeight-n.clientHeight;dojo.body().removeChild(n);delete n;}catch(e){}if("fontSizeWatch" in dojo.config&&!!dojo.config.fontSizeWatch){dhm.initOnFontResize();}});})();}if(!dojo._hasResource["dojox.grid.util"]){dojo._hasResource["dojox.grid.util"]=true;dojo.provide("dojox.grid.util");(function(){var dgu=dojox.grid.util;dgu.na="...";dgu.rowIndexTag="gridRowIndex";dgu.gridViewTag="gridView";dgu.fire=function(ob,ev,args){var fn=ob&&ev&&ob[ev];return fn&&(args?fn.apply(ob,args):ob[ev]());};dgu.setStyleHeightPx=function(_2dd,_2de){if(_2de>=0){var s=_2dd.style;var v=_2de+"px";if(_2dd&&s["height"]!=v){s["height"]=v;}}};dgu.mouseEvents=["mouseover","mouseout","mousedown","mouseup","click","dblclick","contextmenu"];dgu.keyEvents=["keyup","keydown","keypress"];dgu.funnelEvents=function(_2df,_2e0,_2e1,_2e2){var evts=(_2e2?_2e2:dgu.mouseEvents.concat(dgu.keyEvents));for(var i=0,l=evts.length;i<l;i++){_2e0.connect(_2df,"on"+evts[i],_2e1);}};dgu.removeNode=function(_2e3){_2e3=dojo.byId(_2e3);_2e3&&_2e3.parentNode&&_2e3.parentNode.removeChild(_2e3);return _2e3;};dgu.arrayCompare=function(inA,inB){for(var i=0,l=inA.length;i<l;i++){if(inA[i]!=inB[i]){return false;}}return (inA.length==inB.length);};dgu.arrayInsert=function(_2e4,_2e5,_2e6){if(_2e4.length<=_2e5){_2e4[_2e5]=_2e6;}else{_2e4.splice(_2e5,0,_2e6);}};dgu.arrayRemove=function(_2e7,_2e8){_2e7.splice(_2e8,1);};dgu.arraySwap=function(_2e9,inI,inJ){var _2ea=_2e9[inI];_2e9[inI]=_2e9[inJ];_2e9[inJ]=_2ea;};})();}if(!dojo._hasResource["dojox.grid._Scroller"]){dojo._hasResource["dojox.grid._Scroller"]=true;dojo.provide("dojox.grid._Scroller");(function(){var _2eb=function(_2ec){var i=0,n,p=_2ec.parentNode;while((n=p.childNodes[i++])){if(n==_2ec){return i-1;}}return -1;};var _2ed=function(_2ee){if(!_2ee){return;}var _2ef=function(inW){return inW.domNode&&dojo.isDescendant(inW.domNode,_2ee,true);};var ws=dijit.registry.filter(_2ef);for(var i=0,w;(w=ws[i]);i++){w.destroy();}delete ws;};var _2f0=function(_2f1){var node=dojo.byId(_2f1);return (node&&node.tagName?node.tagName.toLowerCase():"");};var _2f2=function(_2f3,_2f4){var _2f5=[];var i=0,n;while((n=_2f3.childNodes[i])){i++;if(_2f0(n)==_2f4){_2f5.push(n);}}return _2f5;};var _2f6=function(_2f7){return _2f2(_2f7,"div");};dojo.declare("dojox.grid._Scroller",null,{constructor:function(_2f8){this.setContentNodes(_2f8);this.pageHeights=[];this.pageNodes=[];this.stack=[];},rowCount:0,defaultRowHeight:32,keepRows:100,contentNode:null,scrollboxNode:null,defaultPageHeight:0,keepPages:10,pageCount:0,windowHeight:0,firstVisibleRow:0,lastVisibleRow:0,averageRowHeight:0,page:0,pageTop:0,init:function(_2f9,_2fa,_2fb){switch(arguments.length){case 3:this.rowsPerPage=_2fb;case 2:this.keepRows=_2fa;case 1:this.rowCount=_2f9;default:break;}this.defaultPageHeight=this.defaultRowHeight*this.rowsPerPage;this.pageCount=this._getPageCount(this.rowCount,this.rowsPerPage);this.setKeepInfo(this.keepRows);this.invalidate();if(this.scrollboxNode){this.scrollboxNode.scrollTop=0;this.scroll(0);this.scrollboxNode.onscroll=dojo.hitch(this,"onscroll");}},_getPageCount:function(_2fc,_2fd){return _2fc?(Math.ceil(_2fc/_2fd)||1):0;},destroy:function(){this.invalidateNodes();delete this.contentNodes;delete this.contentNode;delete this.scrollboxNode;},setKeepInfo:function(_2fe){this.keepRows=_2fe;this.keepPages=!this.keepRows?this.keepPages:Math.max(Math.ceil(this.keepRows/this.rowsPerPage),2);},setContentNodes:function(_2ff){this.contentNodes=_2ff;this.colCount=(this.contentNodes?this.contentNodes.length:0);this.pageNodes=[];for(var i=0;i<this.colCount;i++){this.pageNodes[i]=[];}},getDefaultNodes:function(){return this.pageNodes[0]||[];},invalidate:function(){this._invalidating=true;this.invalidateNodes();this.pageHeights=[];this.height=(this.pageCount?(this.pageCount-1)*this.defaultPageHeight+this.calcLastPageHeight():0);this.resize();this._invalidating=false;},updateRowCount:function(_300){this.invalidateNodes();this.rowCount=_300;var _301=this.pageCount;if(_301===0){this.height=1;}this.pageCount=this._getPageCount(this.rowCount,this.rowsPerPage);if(this.pageCount<_301){for(var i=_301-1;i>=this.pageCount;i--){this.height-=this.getPageHeight(i);delete this.pageHeights[i];}}else{if(this.pageCount>_301){this.height+=this.defaultPageHeight*(this.pageCount-_301-1)+this.calcLastPageHeight();}}this.resize();},pageExists:function(_302){return Boolean(this.getDefaultPageNode(_302));},measurePage:function(_303){if(this.grid.rowHeight){var _304=this.grid.rowHeight+1;return ((_303+1)*this.rowsPerPage>this.rowCount?this.rowCount-_303*this.rowsPerPage:this.rowsPerPage)*_304;}var n=this.getDefaultPageNode(_303);return (n&&n.innerHTML)?n.offsetHeight:undefined;},positionPage:function(_305,_306){for(var i=0;i<this.colCount;i++){this.pageNodes[i][_305].style.top=_306+"px";}},repositionPages:function(_307){var _308=this.getDefaultNodes();var last=0;for(var i=0;i<this.stack.length;i++){last=Math.max(this.stack[i],last);}var n=_308[_307];var y=(n?this.getPageNodePosition(n)+this.getPageHeight(_307):0);for(var p=_307+1;p<=last;p++){n=_308[p];if(n){if(this.getPageNodePosition(n)==y){return;}this.positionPage(p,y);}y+=this.getPageHeight(p);}},installPage:function(_309){for(var i=0;i<this.colCount;i++){this.contentNodes[i].appendChild(this.pageNodes[i][_309]);}},preparePage:function(_30a,_30b){var p=(_30b?this.popPage():null);for(var i=0;i<this.colCount;i++){var _30c=this.pageNodes[i];var _30d=(p===null?this.createPageNode():this.invalidatePageNode(p,_30c));_30d.pageIndex=_30a;_30c[_30a]=_30d;}},renderPage:function(_30e){var _30f=[];var i,j;for(i=0;i<this.colCount;i++){_30f[i]=this.pageNodes[i][_30e];}for(i=0,j=_30e*this.rowsPerPage;(i<this.rowsPerPage)&&(j<this.rowCount);i++,j++){this.renderRow(j,_30f);}},removePage:function(_310){for(var i=0,j=_310*this.rowsPerPage;i<this.rowsPerPage;i++,j++){this.removeRow(j);}},destroyPage:function(_311){for(var i=0;i<this.colCount;i++){var n=this.invalidatePageNode(_311,this.pageNodes[i]);if(n){dojo.destroy(n);}}},pacify:function(_312){},pacifying:false,pacifyTicks:200,setPacifying:function(_313){if(this.pacifying!=_313){this.pacifying=_313;this.pacify(this.pacifying);}},startPacify:function(){this.startPacifyTicks=new Date().getTime();},doPacify:function(){var _314=(new Date().getTime()-this.startPacifyTicks)>this.pacifyTicks;this.setPacifying(true);this.startPacify();return _314;},endPacify:function(){this.setPacifying(false);},resize:function(){if(this.scrollboxNode){this.windowHeight=this.scrollboxNode.clientHeight;}for(var i=0;i<this.colCount;i++){dojox.grid.util.setStyleHeightPx(this.contentNodes[i],Math.max(1,this.height));}var _315=(!this._invalidating);if(!_315){var ah=this.grid.get("autoHeight");if(typeof ah=="number"&&ah<=Math.min(this.rowsPerPage,this.rowCount)){_315=true;}}if(_315){this.needPage(this.page,this.pageTop);}var _316=(this.page<this.pageCount-1)?this.rowsPerPage:((this.rowCount%this.rowsPerPage)||this.rowsPerPage);var _317=this.getPageHeight(this.page);this.averageRowHeight=(_317>0&&_316>0)?(_317/_316):0;},calcLastPageHeight:function(){if(!this.pageCount){return 0;}var _318=this.pageCount-1;var _319=((this.rowCount%this.rowsPerPage)||(this.rowsPerPage))*this.defaultRowHeight;this.pageHeights[_318]=_319;return _319;},updateContentHeight:function(inDh){this.height+=inDh;this.resize();},updatePageHeight:function(_31a,_31b,_31c){if(this.pageExists(_31a)){var oh=this.getPageHeight(_31a);var h=(this.measurePage(_31a));if(h===undefined){h=oh;}this.pageHeights[_31a]=h;if(oh!=h){this.updateContentHeight(h-oh);var ah=this.grid.get("autoHeight");if((typeof ah=="number"&&ah>this.rowCount)||(ah===true&&!_31b)){if(!_31c){this.grid.sizeChange();}else{var ns=this.grid.viewsNode.style;ns.height=parseInt(ns.height)+h-oh+"px";this.repositionPages(_31a);}}else{this.repositionPages(_31a);}}return h;}return 0;},rowHeightChanged:function(_31d,_31e){this.updatePageHeight(Math.floor(_31d/this.rowsPerPage),false,_31e);},invalidateNodes:function(){while(this.stack.length){this.destroyPage(this.popPage());}},createPageNode:function(){var p=document.createElement("div");dojo.attr(p,"role","presentation");p.style.position="absolute";p.style[dojo._isBodyLtr()?"left":"right"]="0";return p;},getPageHeight:function(_31f){var ph=this.pageHeights[_31f];return (ph!==undefined?ph:this.defaultPageHeight);},pushPage:function(_320){return this.stack.push(_320);},popPage:function(){return this.stack.shift();},findPage:function(_321){var i=0,h=0;for(var ph=0;i<this.pageCount;i++,h+=ph){ph=this.getPageHeight(i);if(h+ph>=_321){break;}}this.page=i;this.pageTop=h;},buildPage:function(_322,_323,_324){this.preparePage(_322,_323);this.positionPage(_322,_324);this.installPage(_322);this.renderPage(_322);this.pushPage(_322);},needPage:function(_325,_326){var h=this.getPageHeight(_325),oh=h;if(!this.pageExists(_325)){this.buildPage(_325,(!this.grid._autoHeight&&this.keepPages&&(this.stack.length>=this.keepPages)),_326);h=this.updatePageHeight(_325,true);}else{this.positionPage(_325,_326);}return h;},onscroll:function(){this.scroll(this.scrollboxNode.scrollTop);},scroll:function(_327){this.grid.scrollTop=_327;if(this.colCount){this.startPacify();this.findPage(_327);var h=this.height;var b=this.getScrollBottom(_327);for(var p=this.page,y=this.pageTop;(p<this.pageCount)&&((b<0)||(y<b));p++){y+=this.needPage(p,y);}this.firstVisibleRow=this.getFirstVisibleRow(this.page,this.pageTop,_327);this.lastVisibleRow=this.getLastVisibleRow(p-1,y,b);if(h!=this.height){this.repositionPages(p-1);}this.endPacify();}},getScrollBottom:function(_328){return (this.windowHeight>=0?_328+this.windowHeight:-1);},processNodeEvent:function(e,_329){var t=e.target;while(t&&(t!=_329)&&t.parentNode&&(t.parentNode.parentNode!=_329)){t=t.parentNode;}if(!t||!t.parentNode||(t.parentNode.parentNode!=_329)){return false;}var page=t.parentNode;e.topRowIndex=page.pageIndex*this.rowsPerPage;e.rowIndex=e.topRowIndex+_2eb(t);e.rowTarget=t;return true;},processEvent:function(e){return this.processNodeEvent(e,this.contentNode);},renderRow:function(_32a,_32b){},removeRow:function(_32c){},getDefaultPageNode:function(_32d){return this.getDefaultNodes()[_32d];},positionPageNode:function(_32e,_32f){},getPageNodePosition:function(_330){return _330.offsetTop;},invalidatePageNode:function(_331,_332){var p=_332[_331];if(p){delete _332[_331];this.removePage(_331,p);_2ed(p);p.innerHTML="";}return p;},getPageRow:function(_333){return _333*this.rowsPerPage;},getLastPageRow:function(_334){return Math.min(this.rowCount,this.getPageRow(_334+1))-1;},getFirstVisibleRow:function(_335,_336,_337){if(!this.pageExists(_335)){return 0;}var row=this.getPageRow(_335);var _338=this.getDefaultNodes();var rows=_2f6(_338[_335]);for(var i=0,l=rows.length;i<l&&_336<_337;i++,row++){_336+=rows[i].offsetHeight;}return (row?row-1:row);},getLastVisibleRow:function(_339,_33a,_33b){if(!this.pageExists(_339)){return 0;}var _33c=this.getDefaultNodes();var row=this.getLastPageRow(_339);var rows=_2f6(_33c[_339]);for(var i=rows.length-1;i>=0&&_33a>_33b;i--,row--){_33a-=rows[i].offsetHeight;}return row+1;},findTopRow:function(_33d){var _33e=this.getDefaultNodes();var rows=_2f6(_33e[this.page]);for(var i=0,l=rows.length,t=this.pageTop,h;i<l;i++){h=rows[i].offsetHeight;t+=h;if(t>=_33d){this.offset=h-(t-_33d);return i+this.page*this.rowsPerPage;}}return -1;},findScrollTop:function(_33f){var _340=Math.floor(_33f/this.rowsPerPage);var t=0;var i,l;for(i=0;i<_340;i++){t+=this.getPageHeight(i);}this.pageTop=t;this.page=_340;this.needPage(_340,this.pageTop);var _341=this.getDefaultNodes();var rows=_2f6(_341[_340]);var r=_33f-this.rowsPerPage*_340;for(i=0,l=rows.length;i<l&&i<r;i++){t+=rows[i].offsetHeight;}return t;},dummy:0});})();}if(!dojo._hasResource["dojox.grid.cells._base"]){dojo._hasResource["dojox.grid.cells._base"]=true;dojo.provide("dojox.grid.cells._base");dojo.declare("dojox.grid._DeferredTextWidget",dijit._Widget,{deferred:null,_destroyOnRemove:true,postCreate:function(){if(this.deferred){this.deferred.addBoth(dojo.hitch(this,function(text){if(this.domNode){this.domNode.innerHTML=text;}}));}}});(function(){var _342=function(_343){try{dojox.grid.util.fire(_343,"focus");dojox.grid.util.fire(_343,"select");}catch(e){}};var _344=function(){setTimeout(dojo.hitch.apply(dojo,arguments),0);};var dgc=dojox.grid.cells;dojo.declare("dojox.grid.cells._Base",null,{styles:"",classes:"",editable:false,alwaysEditing:false,formatter:null,defaultValue:"...",value:null,hidden:false,noresize:false,draggable:true,_valueProp:"value",_formatPending:false,constructor:function(_345){this._props=_345||{};dojo.mixin(this,_345);if(this.draggable===undefined){this.draggable=true;}},_defaultFormat:function(_346,_347){var s=this.grid.formatterScope||this;var f=this.formatter;if(f&&s&&typeof f=="string"){f=this.formatter=s[f];}var v=(_346!=this.defaultValue&&f)?f.apply(s,_347):_346;if(typeof v=="undefined"){return this.defaultValue;}if(v&&v.addBoth){v=new dojox.grid._DeferredTextWidget({deferred:v},dojo.create("span",{innerHTML:this.defaultValue}));}if(v&&v.declaredClass&&v.startup){return "<div class='dojoxGridStubNode' linkWidget='"+v.id+"' cellIdx='"+this.index+"'>"+this.defaultValue+"</div>";}return v;},format:function(_348,_349){var f,i=this.grid.edit.info,d=this.get?this.get(_348,_349):(this.value||this.defaultValue);if(this.editable&&(this.alwaysEditing||(i.rowIndex==_348&&i.cell==this))){return this.formatEditing(d,_348);}else{return this._defaultFormat(d,[d,_348,this]);}},formatEditing:function(_34a,_34b){},getNode:function(_34c){return this.view.getCellNode(_34c,this.index);},getHeaderNode:function(){return this.view.getHeaderCellNode(this.index);},getEditNode:function(_34d){return (this.getNode(_34d)||0).firstChild||0;},canResize:function(){var uw=this.unitWidth;return uw&&(uw!=="auto");},isFlex:function(){var uw=this.unitWidth;return uw&&dojo.isString(uw)&&(uw=="auto"||uw.slice(-1)=="%");},applyEdit:function(_34e,_34f){this.grid.edit.applyCellEdit(_34e,this,_34f);},cancelEdit:function(_350){this.grid.doCancelEdit(_350);},_onEditBlur:function(_351){if(this.grid.edit.isEditCell(_351,this.index)){this.grid.edit.apply();}},registerOnBlur:function(_352,_353){if(this.commitOnBlur){dojo.connect(_352,"onblur",function(e){setTimeout(dojo.hitch(this,"_onEditBlur",_353),250);});}},needFormatNode:function(_354,_355){this._formatPending=true;_344(this,"_formatNode",_354,_355);},cancelFormatNode:function(){this._formatPending=false;},_formatNode:function(_356,_357){if(this._formatPending){this._formatPending=false;dojo.setSelectable(this.grid.domNode,true);this.formatNode(this.getEditNode(_357),_356,_357);}},formatNode:function(_358,_359,_35a){if(dojo.isIE){_344(this,"focus",_35a,_358);}else{this.focus(_35a,_358);}},dispatchEvent:function(m,e){if(m in this){return this[m](e);}},getValue:function(_35b){return this.getEditNode(_35b)[this._valueProp];},setValue:function(_35c,_35d){var n=this.getEditNode(_35c);if(n){n[this._valueProp]=_35d;}},focus:function(_35e,_35f){_342(_35f||this.getEditNode(_35e));},save:function(_360){this.value=this.value||this.getValue(_360);},restore:function(_361){this.setValue(_361,this.value);},_finish:function(_362){dojo.setSelectable(this.grid.domNode,false);this.cancelFormatNode();},apply:function(_363){this.applyEdit(this.getValue(_363),_363);this._finish(_363);},cancel:function(_364){this.cancelEdit(_364);this._finish(_364);}});dgc._Base.markupFactory=function(node,_365){var d=dojo;var _366=d.trim(d.attr(node,"formatter")||"");if(_366){_365.formatter=dojo.getObject(_366)||_366;}var get=d.trim(d.attr(node,"get")||"");if(get){_365.get=dojo.getObject(get);}var _367=function(attr,cell,_368){var _369=d.trim(d.attr(node,attr)||"");if(_369){cell[_368||attr]=!(_369.toLowerCase()=="false");}};_367("sortDesc",_365);_367("editable",_365);_367("alwaysEditing",_365);_367("noresize",_365);_367("draggable",_365);var _36a=d.trim(d.attr(node,"loadingText")||d.attr(node,"defaultValue")||"");if(_36a){_365.defaultValue=_36a;}var _36b=function(attr,cell,_36c){var _36d=d.trim(d.attr(node,attr)||"")||undefined;if(_36d){cell[_36c||attr]=_36d;}};_36b("styles",_365);_36b("headerStyles",_365);_36b("cellStyles",_365);_36b("classes",_365);_36b("headerClasses",_365);_36b("cellClasses",_365);};dojo.declare("dojox.grid.cells.Cell",dgc._Base,{constructor:function(){this.keyFilter=this.keyFilter;},keyFilter:null,formatEditing:function(_36e,_36f){this.needFormatNode(_36e,_36f);return "<input class=\"dojoxGridInput\" type=\"text\" value=\""+_36e+"\">";},formatNode:function(_370,_371,_372){this.inherited(arguments);this.registerOnBlur(_370,_372);},doKey:function(e){if(this.keyFilter){var key=String.fromCharCode(e.charCode);if(key.search(this.keyFilter)==-1){dojo.stopEvent(e);}}},_finish:function(_373){this.inherited(arguments);var n=this.getEditNode(_373);try{dojox.grid.util.fire(n,"blur");}catch(e){}}});dgc.Cell.markupFactory=function(node,_374){dgc._Base.markupFactory(node,_374);var d=dojo;var _375=d.trim(d.attr(node,"keyFilter")||"");if(_375){_374.keyFilter=new RegExp(_375);}};dojo.declare("dojox.grid.cells.RowIndex",dgc.Cell,{name:"Row",postscript:function(){this.editable=false;},get:function(_376){return _376+1;}});dgc.RowIndex.markupFactory=function(node,_377){dgc.Cell.markupFactory(node,_377);};dojo.declare("dojox.grid.cells.Select",dgc.Cell,{options:null,values:null,returnIndex:-1,constructor:function(_378){this.values=this.values||this.options;},formatEditing:function(_379,_37a){this.needFormatNode(_379,_37a);var h=["<select class=\"dojoxGridSelect\">"];for(var i=0,o,v;((o=this.options[i])!==undefined)&&((v=this.values[i])!==undefined);i++){h.push("<option",(_379==v?" selected":"")," value=\""+v+"\"",">",o,"</option>");}h.push("</select>");return h.join("");},getValue:function(_37b){var n=this.getEditNode(_37b);if(n){var i=n.selectedIndex,o=n.options[i];return this.returnIndex>-1?i:o.value||o.innerHTML;}}});dgc.Select.markupFactory=function(node,cell){dgc.Cell.markupFactory(node,cell);var d=dojo;var _37c=d.trim(d.attr(node,"options")||"");if(_37c){var o=_37c.split(",");if(o[0]!=_37c){cell.options=o;}}var _37d=d.trim(d.attr(node,"values")||"");if(_37d){var v=_37d.split(",");if(v[0]!=_37d){cell.values=v;}}};dojo.declare("dojox.grid.cells.AlwaysEdit",dgc.Cell,{alwaysEditing:true,_formatNode:function(_37e,_37f){this.formatNode(this.getEditNode(_37f),_37e,_37f);},applyStaticValue:function(_380){var e=this.grid.edit;e.applyCellEdit(this.getValue(_380),this,_380);e.start(this,_380,true);}});dgc.AlwaysEdit.markupFactory=function(node,cell){dgc.Cell.markupFactory(node,cell);};dojo.declare("dojox.grid.cells.Bool",dgc.AlwaysEdit,{_valueProp:"checked",formatEditing:function(_381,_382){return "<input class=\"dojoxGridInput\" type=\"checkbox\""+(_381?" checked=\"checked\"":"")+" style=\"width: auto\" />";},doclick:function(e){if(e.target.tagName=="INPUT"){this.applyStaticValue(e.rowIndex);}}});dgc.Bool.markupFactory=function(node,cell){dgc.AlwaysEdit.markupFactory(node,cell);};})();}if(!dojo._hasResource["dojox.grid.cells"]){dojo._hasResource["dojox.grid.cells"]=true;dojo.provide("dojox.grid.cells");}if(!dojo._hasResource["dojox.grid._Builder"]){dojo._hasResource["dojox.grid._Builder"]=true;dojo.provide("dojox.grid._Builder");(function(){var dg=dojox.grid;var _383=function(td){return td.cellIndex>=0?td.cellIndex:dojo.indexOf(td.parentNode.cells,td);};var _384=function(tr){return tr.rowIndex>=0?tr.rowIndex:dojo.indexOf(tr.parentNode.childNodes,tr);};var _385=function(_386,_387){return _386&&((_386.rows||0)[_387]||_386.childNodes[_387]);};var _388=function(node){for(var n=node;n&&n.tagName!="TABLE";n=n.parentNode){}return n;};var _389=function(_38a,_38b){for(var n=_38a;n&&_38b(n);n=n.parentNode){}return n;};var _38c=function(_38d){var name=_38d.toUpperCase();return function(node){return node.tagName!=name;};};var _38e=dojox.grid.util.rowIndexTag;var _38f=dojox.grid.util.gridViewTag;dg._Builder=dojo.extend(function(view){if(view){this.view=view;this.grid=view.grid;}},{view:null,_table:"<table class=\"dojoxGridRowTable\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" role=\"presentation\"",getTableArray:function(){var html=[this._table];if(this.view.viewWidth){html.push([" style=\"width:",this.view.viewWidth,";\""].join(""));}html.push(">");return html;},generateCellMarkup:function(_390,_391,_392,_393){var _394=[],html;if(_393){var _395=_390.index!=_390.grid.getSortIndex()?"":_390.grid.sortInfo>0?"aria-sort=\"ascending\"":"aria-sort=\"descending\"";if(!_390.id){_390.id=this.grid.id+"Hdr"+_390.index;}html=["<th tabIndex=\"-1\" aria-readonly=\"true\" role=\"columnheader\"",_395,"id=\"",_390.id,"\""];}else{var _396=this.grid.editable&&!_390.editable?"aria-readonly=\"true\"":"";html=["<td tabIndex=\"-1\" role=\"gridcell\"",_396];}if(_390.colSpan){html.push(" colspan=\"",_390.colSpan,"\"");}if(_390.rowSpan){html.push(" rowspan=\"",_390.rowSpan,"\"");}html.push(" class=\"dojoxGridCell ");if(_390.classes){html.push(_390.classes," ");}if(_392){html.push(_392," ");}_394.push(html.join(""));_394.push("");html=["\" idx=\"",_390.index,"\" style=\""];if(_391&&_391[_391.length-1]!=";"){_391+=";";}html.push(_390.styles,_391||"",_390.hidden?"display:none;":"");if(_390.unitWidth){html.push("width:",_390.unitWidth,";");}_394.push(html.join(""));_394.push("");html=["\""];if(_390.attrs){html.push(" ",_390.attrs);}html.push(">");_394.push(html.join(""));_394.push("");_394.push(_393?"</th>":"</td>");return _394;},isCellNode:function(_397){return Boolean(_397&&_397!=dojo.doc&&dojo.attr(_397,"idx"));},getCellNodeIndex:function(_398){return _398?Number(dojo.attr(_398,"idx")):-1;},getCellNode:function(_399,_39a){for(var i=0,row;((row=_385(_399.firstChild,i))&&row.cells);i++){for(var j=0,cell;(cell=row.cells[j]);j++){if(this.getCellNodeIndex(cell)==_39a){return cell;}}}return null;},findCellTarget:function(_39b,_39c){var n=_39b;while(n&&(!this.isCellNode(n)||(n.offsetParent&&_38f in n.offsetParent.parentNode&&n.offsetParent.parentNode[_38f]!=this.view.id))&&(n!=_39c)){n=n.parentNode;}return n!=_39c?n:null;},baseDecorateEvent:function(e){e.dispatch="do"+e.type;e.grid=this.grid;e.sourceView=this.view;e.cellNode=this.findCellTarget(e.target,e.rowNode);e.cellIndex=this.getCellNodeIndex(e.cellNode);e.cell=(e.cellIndex>=0?this.grid.getCell(e.cellIndex):null);},findTarget:function(_39d,_39e){var n=_39d;while(n&&(n!=this.domNode)&&(!(_39e in n)||(_38f in n&&n[_38f]!=this.view.id))){n=n.parentNode;}return (n!=this.domNode)?n:null;},findRowTarget:function(_39f){return this.findTarget(_39f,_38e);},isIntraNodeEvent:function(e){try{return (e.cellNode&&e.relatedTarget&&dojo.isDescendant(e.relatedTarget,e.cellNode));}catch(x){return false;}},isIntraRowEvent:function(e){try{var row=e.relatedTarget&&this.findRowTarget(e.relatedTarget);return !row&&(e.rowIndex==-1)||row&&(e.rowIndex==row.gridRowIndex);}catch(x){return false;}},dispatchEvent:function(e){if(e.dispatch in this){return this[e.dispatch](e);}return false;},domouseover:function(e){if(e.cellNode&&(e.cellNode!=this.lastOverCellNode)){this.lastOverCellNode=e.cellNode;this.grid.onMouseOver(e);}this.grid.onMouseOverRow(e);},domouseout:function(e){if(e.cellNode&&(e.cellNode==this.lastOverCellNode)&&!this.isIntraNodeEvent(e,this.lastOverCellNode)){this.lastOverCellNode=null;this.grid.onMouseOut(e);if(!this.isIntraRowEvent(e)){this.grid.onMouseOutRow(e);}}},domousedown:function(e){if(e.cellNode){this.grid.onMouseDown(e);}this.grid.onMouseDownRow(e);}});dg._ContentBuilder=dojo.extend(function(view){dg._Builder.call(this,view);},dg._Builder.prototype,{update:function(){this.prepareHtml();},prepareHtml:function(){var _3a0=this.grid.get,_3a1=this.view.structure.cells;for(var j=0,row;(row=_3a1[j]);j++){for(var i=0,cell;(cell=row[i]);i++){cell.get=cell.get||(cell.value==undefined)&&_3a0;cell.markup=this.generateCellMarkup(cell,cell.cellStyles,cell.cellClasses,false);if(!this.grid.editable&&cell.editable){this.grid.editable=true;}}}},generateHtml:function(_3a2,_3a3){var html=this.getTableArray(),v=this.view,_3a4=v.structure.cells,item=this.grid.getItem(_3a3);dojox.grid.util.fire(this.view,"onBeforeRow",[_3a3,_3a4]);for(var j=0,row;(row=_3a4[j]);j++){if(row.hidden||row.header){continue;}html.push(!row.invisible?"<tr>":"<tr class=\"dojoxGridInvisible\">");for(var i=0,cell,m,cc,cs;(cell=row[i]);i++){m=cell.markup;cc=cell.customClasses=[];cs=cell.customStyles=[];m[5]=cell.format(_3a3,item);m[1]=cc.join(" ");m[3]=cs.join(";");html.push.apply(html,m);}html.push("</tr>");}html.push("</table>");return html.join("");},decorateEvent:function(e){e.rowNode=this.findRowTarget(e.target);if(!e.rowNode){return false;}e.rowIndex=e.rowNode[_38e];this.baseDecorateEvent(e);e.cell=this.grid.getCell(e.cellIndex);return true;}});dg._HeaderBuilder=dojo.extend(function(view){this.moveable=null;dg._Builder.call(this,view);},dg._Builder.prototype,{_skipBogusClicks:false,overResizeWidth:4,minColWidth:1,update:function(){if(this.tableMap){this.tableMap.mapRows(this.view.structure.cells);}else{this.tableMap=new dg._TableMap(this.view.structure.cells);}},generateHtml:function(_3a5,_3a6){var html=this.getTableArray(),_3a7=this.view.structure.cells;dojox.grid.util.fire(this.view,"onBeforeRow",[-1,_3a7]);for(var j=0,row;(row=_3a7[j]);j++){if(row.hidden){continue;}html.push(!row.invisible?"<tr>":"<tr class=\"dojoxGridInvisible\">");for(var i=0,cell,_3a8;(cell=row[i]);i++){cell.customClasses=[];cell.customStyles=[];if(this.view.simpleStructure){if(cell.draggable){if(cell.headerClasses){if(cell.headerClasses.indexOf("dojoDndItem")==-1){cell.headerClasses+=" dojoDndItem";}}else{cell.headerClasses="dojoDndItem";}}if(cell.attrs){if(cell.attrs.indexOf("dndType='gridColumn_")==-1){cell.attrs+=" dndType='gridColumn_"+this.grid.id+"'";}}else{cell.attrs="dndType='gridColumn_"+this.grid.id+"'";}}_3a8=this.generateCellMarkup(cell,cell.headerStyles,cell.headerClasses,true);_3a8[5]=(_3a6!=undefined?_3a6:_3a5(cell));_3a8[3]=cell.customStyles.join(";");_3a8[1]=cell.customClasses.join(" ");html.push(_3a8.join(""));}html.push("</tr>");}html.push("</table>");return html.join("");},getCellX:function(e){var n,x=e.layerX;if(dojo.isMoz||dojo.isIE>=9){n=_389(e.target,_38c("th"));x-=(n&&n.offsetLeft)||0;var t=e.sourceView.getScrollbarWidth();if(!dojo._isBodyLtr()){table=_389(n,_38c("table"));x-=(table&&table.offsetLeft)||0;}}n=_389(e.target,function(){if(!n||n==e.cellNode){return false;}x+=(n.offsetLeft<0?0:n.offsetLeft);return true;});return x;},decorateEvent:function(e){this.baseDecorateEvent(e);e.rowIndex=-1;e.cellX=this.getCellX(e);return true;},prepareResize:function(e,mod){do{var i=_383(e.cellNode);e.cellNode=(i?e.cellNode.parentNode.cells[i+mod]:null);e.cellIndex=(e.cellNode?this.getCellNodeIndex(e.cellNode):-1);}while(e.cellNode&&e.cellNode.style.display=="none");return Boolean(e.cellNode);},canResize:function(e){if(!e.cellNode||e.cellNode.colSpan>1){return false;}var cell=this.grid.getCell(e.cellIndex);return !cell.noresize&&cell.canResize();},overLeftResizeArea:function(e){if(dojo.hasClass(dojo.body(),"dojoDndMove")){return false;}if(dojo.isIE){var tN=e.target;if(dojo.hasClass(tN,"dojoxGridArrowButtonNode")||dojo.hasClass(tN,"dojoxGridArrowButtonChar")){return false;}}if(dojo._isBodyLtr()){return (e.cellIndex>0)&&(e.cellX>0&&e.cellX<this.overResizeWidth)&&this.prepareResize(e,-1);}var t=e.cellNode&&(e.cellX>0&&e.cellX<this.overResizeWidth);return t;},overRightResizeArea:function(e){if(dojo.hasClass(dojo.body(),"dojoDndMove")){return false;}if(dojo.isIE){var tN=e.target;if(dojo.hasClass(tN,"dojoxGridArrowButtonNode")||dojo.hasClass(tN,"dojoxGridArrowButtonChar")){return false;}}if(dojo._isBodyLtr()){return e.cellNode&&(e.cellX>=e.cellNode.offsetWidth-this.overResizeWidth);}return (e.cellIndex>0)&&(e.cellX>=e.cellNode.offsetWidth-this.overResizeWidth)&&this.prepareResize(e,-1);},domousemove:function(e){if(!this.moveable){var c=(this.overRightResizeArea(e)?"dojoxGridColResize":(this.overLeftResizeArea(e)?"dojoxGridColResize":""));if(c&&!this.canResize(e)){c="dojoxGridColNoResize";}dojo.toggleClass(e.sourceView.headerNode,"dojoxGridColNoResize",(c=="dojoxGridColNoResize"));dojo.toggleClass(e.sourceView.headerNode,"dojoxGridColResize",(c=="dojoxGridColResize"));if(dojo.isIE){var t=e.sourceView.headerNode.scrollLeft;e.sourceView.headerNode.scrollLeft=t;}if(c){dojo.stopEvent(e);}}},domousedown:function(e){if(!this.moveable){if((this.overRightResizeArea(e)||this.overLeftResizeArea(e))&&this.canResize(e)){}else{this.grid.onMouseDown(e);this.grid.onMouseOverRow(e);}}},doclick:function(e){if(this._skipBogusClicks){dojo.stopEvent(e);return true;}return false;},colResizeSetup:function(e,_3a9){var _3aa=dojo.contentBox(e.sourceView.headerNode);if(_3a9){this.lineDiv=document.createElement("div");var vw=(dojo.position||dojo._abs)(e.sourceView.headerNode,true);var _3ab=dojo.contentBox(e.sourceView.domNode);var l=e.pageX;if(!dojo._isBodyLtr()&&dojo.isIE<8){l-=dojox.html.metrics.getScrollbar().w;}dojo.style(this.lineDiv,{top:vw.y+"px",left:l+"px",height:(_3ab.h+_3aa.h)+"px"});dojo.addClass(this.lineDiv,"dojoxGridResizeColLine");this.lineDiv._origLeft=l;dojo.body().appendChild(this.lineDiv);}var _3ac=[],_3ad=this.tableMap.findOverlappingNodes(e.cellNode);for(var i=0,cell;(cell=_3ad[i]);i++){_3ac.push({node:cell,index:this.getCellNodeIndex(cell),width:cell.offsetWidth});}var view=e.sourceView;var adj=dojo._isBodyLtr()?1:-1;var _3ae=e.grid.views.views;var _3af=[];for(var j=view.idx+adj,_3b0;(_3b0=_3ae[j]);j=j+adj){_3af.push({node:_3b0.headerNode,left:window.parseInt(_3b0.headerNode.style.left)});}var _3b1=view.headerContentNode.firstChild;var drag={scrollLeft:e.sourceView.headerNode.scrollLeft,view:view,node:e.cellNode,index:e.cellIndex,w:dojo.contentBox(e.cellNode).w,vw:_3aa.w,table:_3b1,tw:dojo.contentBox(_3b1).w,spanners:_3ac,followers:_3af};return drag;},beginColumnResize:function(e){this.moverDiv=document.createElement("div");dojo.style(this.moverDiv,{position:"absolute",left:0});dojo.body().appendChild(this.moverDiv);dojo.addClass(this.grid.domNode,"dojoxGridColumnResizing");var m=(this.moveable=new dojo.dnd.Moveable(this.moverDiv));var drag=this.colResizeSetup(e,true);m.onMove=dojo.hitch(this,"doResizeColumn",drag);dojo.connect(m,"onMoveStop",dojo.hitch(this,function(){this.endResizeColumn(drag);if(drag.node.releaseCapture){drag.node.releaseCapture();}this.moveable.destroy();delete this.moveable;this.moveable=null;dojo.removeClass(this.grid.domNode,"dojoxGridColumnResizing");}));if(e.cellNode.setCapture){e.cellNode.setCapture();}m.onMouseDown(e);},doResizeColumn:function(_3b2,_3b3,_3b4){var _3b5=_3b4.l;var data={deltaX:_3b5,w:_3b2.w+(dojo._isBodyLtr()?_3b5:-_3b5),vw:_3b2.vw+_3b5,tw:_3b2.tw+_3b5};this.dragRecord={inDrag:_3b2,mover:_3b3,leftTop:_3b4};if(data.w>=this.minColWidth){if(!_3b3){this.doResizeNow(_3b2,data);}else{dojo.style(this.lineDiv,"left",(this.lineDiv._origLeft+data.deltaX)+"px");}}},endResizeColumn:function(_3b6){if(this.dragRecord){var _3b7=this.dragRecord.leftTop;var _3b8=dojo._isBodyLtr()?_3b7.l:-_3b7.l;_3b8+=Math.max(_3b6.w+_3b8,this.minColWidth)-(_3b6.w+_3b8);if(dojo.isWebKit&&_3b6.spanners.length){_3b8+=dojo._getPadBorderExtents(_3b6.spanners[0].node).w;}var data={deltaX:_3b8,w:_3b6.w+_3b8,vw:_3b6.vw+_3b8,tw:_3b6.tw+_3b8};this.doResizeNow(_3b6,data);delete this.dragRecord;}dojo.destroy(this.lineDiv);dojo.destroy(this.moverDiv);dojo.destroy(this.moverDiv);delete this.moverDiv;this._skipBogusClicks=true;_3b6.view.update();this._skipBogusClicks=false;this.grid.onResizeColumn(_3b6.index);},doResizeNow:function(_3b9,data){_3b9.view.convertColPctToFixed();if(_3b9.view.flexCells&&!_3b9.view.testFlexCells()){var t=_388(_3b9.node);if(t){(t.style.width="");}}var i,s,sw,f,fl;for(i=0;(s=_3b9.spanners[i]);i++){sw=s.width+data.deltaX;if(sw>0){s.node.style.width=sw+"px";_3b9.view.setColWidth(s.index,sw);}}if(dojo._isBodyLtr()||!dojo.isIE){for(i=0;(f=_3b9.followers[i]);i++){fl=f.left+data.deltaX;f.node.style.left=fl+"px";}}_3b9.node.style.width=data.w+"px";_3b9.view.setColWidth(_3b9.index,data.w);_3b9.view.headerNode.style.width=data.vw+"px";_3b9.view.setColumnsWidth(data.tw);if(!dojo._isBodyLtr()){_3b9.view.headerNode.scrollLeft=_3b9.scrollLeft+data.deltaX;}}});dg._TableMap=dojo.extend(function(rows){this.mapRows(rows);},{map:null,mapRows:function(_3ba){var _3bb=_3ba.length;if(!_3bb){return;}this.map=[];var row;for(var k=0;(row=_3ba[k]);k++){this.map[k]=[];}for(var j=0;(row=_3ba[j]);j++){for(var i=0,x=0,cell,_3bc,_3bd;(cell=row[i]);i++){while(this.map[j][x]){x++;}this.map[j][x]={c:i,r:j};_3bd=cell.rowSpan||1;_3bc=cell.colSpan||1;for(var y=0;y<_3bd;y++){for(var s=0;s<_3bc;s++){this.map[j+y][x+s]=this.map[j][x];}}x+=_3bc;}}},dumpMap:function(){for(var j=0,row,h="";(row=this.map[j]);j++,h=""){for(var i=0,cell;(cell=row[i]);i++){h+=cell.r+","+cell.c+"   ";}}},getMapCoords:function(_3be,_3bf){for(var j=0,row;(row=this.map[j]);j++){for(var i=0,cell;(cell=row[i]);i++){if(cell.c==_3bf&&cell.r==_3be){return {j:j,i:i};}}}return {j:-1,i:-1};},getNode:function(_3c0,_3c1,_3c2){var row=_3c0&&_3c0.rows[_3c1];return row&&row.cells[_3c2];},_findOverlappingNodes:function(_3c3,_3c4,_3c5){var _3c6=[];var m=this.getMapCoords(_3c4,_3c5);for(var j=0,row;(row=this.map[j]);j++){if(j==m.j){continue;}var rw=row[m.i];var n=(rw?this.getNode(_3c3,rw.r,rw.c):null);if(n){_3c6.push(n);}}return _3c6;},findOverlappingNodes:function(_3c7){return this._findOverlappingNodes(_388(_3c7),_384(_3c7.parentNode),_383(_3c7));}});})();}if(!dojo._hasResource["dojo.dnd.Container"]){dojo._hasResource["dojo.dnd.Container"]=true;dojo.provide("dojo.dnd.Container");dojo.declare("dojo.dnd.Container",null,{skipForm:false,constructor:function(node,_3c8){this.node=dojo.byId(node);if(!_3c8){_3c8={};}this.creator=_3c8.creator||null;this.skipForm=_3c8.skipForm;this.parent=_3c8.dropParent&&dojo.byId(_3c8.dropParent);this.map={};this.current=null;this.containerState="";dojo.addClass(this.node,"dojoDndContainer");if(!(_3c8&&_3c8._skipStartup)){this.startup();}this.events=[dojo.connect(this.node,"onmouseover",this,"onMouseOver"),dojo.connect(this.node,"onmouseout",this,"onMouseOut"),dojo.connect(this.node,"ondragstart",this,"onSelectStart"),dojo.connect(this.node,"onselectstart",this,"onSelectStart")];},creator:function(){},getItem:function(key){return this.map[key];},setItem:function(key,data){this.map[key]=data;},delItem:function(key){delete this.map[key];},forInItems:function(f,o){o=o||dojo.global;var m=this.map,e=dojo.dnd._empty;for(var i in m){if(i in e){continue;}f.call(o,m[i],i,this);}return o;},clearItems:function(){this.map={};},getAllNodes:function(){return dojo.query("> .dojoDndItem",this.parent);},sync:function(){var map={};this.getAllNodes().forEach(function(node){if(node.id){var item=this.getItem(node.id);if(item){map[node.id]=item;return;}}else{node.id=dojo.dnd.getUniqueId();}var type=node.getAttribute("dndType"),data=node.getAttribute("dndData");map[node.id]={data:data||node.innerHTML,type:type?type.split(/\s*,\s*/):["text"]};},this);this.map=map;return this;},insertNodes:function(data,_3c9,_3ca){if(!this.parent.firstChild){_3ca=null;}else{if(_3c9){if(!_3ca){_3ca=this.parent.firstChild;}}else{if(_3ca){_3ca=_3ca.nextSibling;}}}if(_3ca){for(var i=0;i<data.length;++i){var t=this._normalizedCreator(data[i]);this.setItem(t.node.id,{data:t.data,type:t.type});this.parent.insertBefore(t.node,_3ca);}}else{for(var i=0;i<data.length;++i){var t=this._normalizedCreator(data[i]);this.setItem(t.node.id,{data:t.data,type:t.type});this.parent.appendChild(t.node);}}return this;},destroy:function(){dojo.forEach(this.events,dojo.disconnect);this.clearItems();this.node=this.parent=this.current=null;},markupFactory:function(_3cb,node){_3cb._skipStartup=true;return new dojo.dnd.Container(node,_3cb);},startup:function(){if(!this.parent){this.parent=this.node;if(this.parent.tagName.toLowerCase()=="table"){var c=this.parent.getElementsByTagName("tbody");if(c&&c.length){this.parent=c[0];}}}this.defaultCreator=dojo.dnd._defaultCreator(this.parent);this.sync();},onMouseOver:function(e){var n=e.relatedTarget;while(n){if(n==this.node){break;}try{n=n.parentNode;}catch(x){n=null;}}if(!n){this._changeState("Container","Over");this.onOverEvent();}n=this._getChildByEvent(e);if(this.current==n){return;}if(this.current){this._removeItemClass(this.current,"Over");}if(n){this._addItemClass(n,"Over");}this.current=n;},onMouseOut:function(e){for(var n=e.relatedTarget;n;){if(n==this.node){return;}try{n=n.parentNode;}catch(x){n=null;}}if(this.current){this._removeItemClass(this.current,"Over");this.current=null;}this._changeState("Container","");this.onOutEvent();},onSelectStart:function(e){if(!this.skipForm||!dojo.dnd.isFormElement(e)){dojo.stopEvent(e);}},onOverEvent:function(){},onOutEvent:function(){},_changeState:function(type,_3cc){var _3cd="dojoDnd"+type;var _3ce=type.toLowerCase()+"State";dojo.replaceClass(this.node,_3cd+_3cc,_3cd+this[_3ce]);this[_3ce]=_3cc;},_addItemClass:function(node,type){dojo.addClass(node,"dojoDndItem"+type);},_removeItemClass:function(node,type){dojo.removeClass(node,"dojoDndItem"+type);},_getChildByEvent:function(e){var node=e.target;if(node){for(var _3cf=node.parentNode;_3cf;node=_3cf,_3cf=node.parentNode){if(_3cf==this.parent&&dojo.hasClass(node,"dojoDndItem")){return node;}}}return null;},_normalizedCreator:function(item,hint){var t=(this.creator||this.defaultCreator).call(this,item,hint);if(!dojo.isArray(t.type)){t.type=["text"];}if(!t.node.id){t.node.id=dojo.dnd.getUniqueId();}dojo.addClass(t.node,"dojoDndItem");return t;}});dojo.dnd._createNode=function(tag){if(!tag){return dojo.dnd._createSpan;}return function(text){return dojo.create(tag,{innerHTML:text});};};dojo.dnd._createTrTd=function(text){var tr=dojo.create("tr");dojo.create("td",{innerHTML:text},tr);return tr;};dojo.dnd._createSpan=function(text){return dojo.create("span",{innerHTML:text});};dojo.dnd._defaultCreatorNodes={ul:"li",ol:"li",div:"div",p:"div"};dojo.dnd._defaultCreator=function(node){var tag=node.tagName.toLowerCase();var c=tag=="tbody"||tag=="thead"?dojo.dnd._createTrTd:dojo.dnd._createNode(dojo.dnd._defaultCreatorNodes[tag]);return function(item,hint){var _3d0=item&&dojo.isObject(item),data,type,n;if(_3d0&&item.tagName&&item.nodeType&&item.getAttribute){data=item.getAttribute("dndData")||item.innerHTML;type=item.getAttribute("dndType");type=type?type.split(/\s*,\s*/):["text"];n=item;}else{data=(_3d0&&item.data)?item.data:item;type=(_3d0&&item.type)?item.type:["text"];n=(hint=="avatar"?dojo.dnd._createSpan:c)(String(data));}if(!n.id){n.id=dojo.dnd.getUniqueId();}return {node:n,data:data,type:type};};};}if(!dojo._hasResource["dojo.dnd.Selector"]){dojo._hasResource["dojo.dnd.Selector"]=true;dojo.provide("dojo.dnd.Selector");dojo.declare("dojo.dnd.Selector",dojo.dnd.Container,{constructor:function(node,_3d1){if(!_3d1){_3d1={};}this.singular=_3d1.singular;this.autoSync=_3d1.autoSync;this.selection={};this.anchor=null;this.simpleSelection=false;this.events.push(dojo.connect(this.node,"onmousedown",this,"onMouseDown"),dojo.connect(this.node,"onmouseup",this,"onMouseUp"));},singular:false,getSelectedNodes:function(){var t=new dojo.NodeList();var e=dojo.dnd._empty;for(var i in this.selection){if(i in e){continue;}t.push(dojo.byId(i));}return t;},selectNone:function(){return this._removeSelection()._removeAnchor();},selectAll:function(){this.forInItems(function(data,id){this._addItemClass(dojo.byId(id),"Selected");this.selection[id]=1;},this);return this._removeAnchor();},deleteSelectedNodes:function(){var e=dojo.dnd._empty;for(var i in this.selection){if(i in e){continue;}var n=dojo.byId(i);this.delItem(i);dojo.destroy(n);}this.anchor=null;this.selection={};return this;},forInSelectedItems:function(f,o){o=o||dojo.global;var s=this.selection,e=dojo.dnd._empty;for(var i in s){if(i in e){continue;}f.call(o,this.getItem(i),i,this);}},sync:function(){dojo.dnd.Selector.superclass.sync.call(this);if(this.anchor){if(!this.getItem(this.anchor.id)){this.anchor=null;}}var t=[],e=dojo.dnd._empty;for(var i in this.selection){if(i in e){continue;}if(!this.getItem(i)){t.push(i);}}dojo.forEach(t,function(i){delete this.selection[i];},this);return this;},insertNodes:function(_3d2,data,_3d3,_3d4){var _3d5=this._normalizedCreator;this._normalizedCreator=function(item,hint){var t=_3d5.call(this,item,hint);if(_3d2){if(!this.anchor){this.anchor=t.node;this._removeItemClass(t.node,"Selected");this._addItemClass(this.anchor,"Anchor");}else{if(this.anchor!=t.node){this._removeItemClass(t.node,"Anchor");this._addItemClass(t.node,"Selected");}}this.selection[t.node.id]=1;}else{this._removeItemClass(t.node,"Selected");this._removeItemClass(t.node,"Anchor");}return t;};dojo.dnd.Selector.superclass.insertNodes.call(this,data,_3d3,_3d4);this._normalizedCreator=_3d5;return this;},destroy:function(){dojo.dnd.Selector.superclass.destroy.call(this);this.selection=this.anchor=null;},markupFactory:function(_3d6,node){_3d6._skipStartup=true;return new dojo.dnd.Selector(node,_3d6);},onMouseDown:function(e){if(this.autoSync){this.sync();}if(!this.current){return;}if(!this.singular&&!dojo.isCopyKey(e)&&!e.shiftKey&&(this.current.id in this.selection)){this.simpleSelection=true;if(e.button===dojo.mouseButtons.LEFT){dojo.stopEvent(e);}return;}if(!this.singular&&e.shiftKey){if(!dojo.isCopyKey(e)){this._removeSelection();}var c=this.getAllNodes();if(c.length){if(!this.anchor){this.anchor=c[0];this._addItemClass(this.anchor,"Anchor");}this.selection[this.anchor.id]=1;if(this.anchor!=this.current){var i=0;for(;i<c.length;++i){var node=c[i];if(node==this.anchor||node==this.current){break;}}for(++i;i<c.length;++i){var node=c[i];if(node==this.anchor||node==this.current){break;}this._addItemClass(node,"Selected");this.selection[node.id]=1;}this._addItemClass(this.current,"Selected");this.selection[this.current.id]=1;}}}else{if(this.singular){if(this.anchor==this.current){if(dojo.isCopyKey(e)){this.selectNone();}}else{this.selectNone();this.anchor=this.current;this._addItemClass(this.anchor,"Anchor");this.selection[this.current.id]=1;}}else{if(dojo.isCopyKey(e)){if(this.anchor==this.current){delete this.selection[this.anchor.id];this._removeAnchor();}else{if(this.current.id in this.selection){this._removeItemClass(this.current,"Selected");delete this.selection[this.current.id];}else{if(this.anchor){this._removeItemClass(this.anchor,"Anchor");this._addItemClass(this.anchor,"Selected");}this.anchor=this.current;this._addItemClass(this.current,"Anchor");this.selection[this.current.id]=1;}}}else{if(!(this.current.id in this.selection)){this.selectNone();this.anchor=this.current;this._addItemClass(this.current,"Anchor");this.selection[this.current.id]=1;}}}}dojo.stopEvent(e);},onMouseUp:function(e){if(!this.simpleSelection){return;}this.simpleSelection=false;this.selectNone();if(this.current){this.anchor=this.current;this._addItemClass(this.anchor,"Anchor");this.selection[this.current.id]=1;}},onMouseMove:function(e){this.simpleSelection=false;},onOverEvent:function(){this.onmousemoveEvent=dojo.connect(this.node,"onmousemove",this,"onMouseMove");},onOutEvent:function(){dojo.disconnect(this.onmousemoveEvent);delete this.onmousemoveEvent;},_removeSelection:function(){var e=dojo.dnd._empty;for(var i in this.selection){if(i in e){continue;}var node=dojo.byId(i);if(node){this._removeItemClass(node,"Selected");}}this.selection={};return this;},_removeAnchor:function(){if(this.anchor){this._removeItemClass(this.anchor,"Anchor");this.anchor=null;}return this;}});}if(!dojo._hasResource["dojo.dnd.Avatar"]){dojo._hasResource["dojo.dnd.Avatar"]=true;dojo.provide("dojo.dnd.Avatar");dojo.declare("dojo.dnd.Avatar",null,{constructor:function(_3d7){this.manager=_3d7;this.construct();},construct:function(){this.isA11y=dojo.hasClass(dojo.body(),"dijit_a11y");var a=dojo.create("table",{"class":"dojoDndAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}}),_3d8=this.manager.source,node,b=dojo.create("tbody",null,a),tr=dojo.create("tr",null,b),td=dojo.create("td",null,tr),icon=this.isA11y?dojo.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"<"},td):null,span=dojo.create("span",{innerHTML:_3d8.generateText?this._generateText():""},td),k=Math.min(5,this.manager.nodes.length),i=0;dojo.attr(tr,{"class":"dojoDndAvatarHeader",style:{opacity:0.9}});for(;i<k;++i){if(_3d8.creator){node=_3d8._normalizedCreator(_3d8.getItem(this.manager.nodes[i].id).data,"avatar").node;}else{node=this.manager.nodes[i].cloneNode(true);if(node.tagName.toLowerCase()=="tr"){var _3d9=dojo.create("table"),_3da=dojo.create("tbody",null,_3d9);_3da.appendChild(node);node=_3d9;}}node.id="";tr=dojo.create("tr",null,b);td=dojo.create("td",null,tr);td.appendChild(node);dojo.attr(tr,{"class":"dojoDndAvatarItem",style:{opacity:(9-i)/10}});}this.node=a;},destroy:function(){dojo.destroy(this.node);this.node=false;},update:function(){dojo[(this.manager.canDropFlag?"add":"remove")+"Class"](this.node,"dojoDndAvatarCanDrop");if(this.isA11y){var icon=dojo.byId("a11yIcon");var text="+";if(this.manager.canDropFlag&&!this.manager.copy){text="< ";}else{if(!this.manager.canDropFlag&&!this.manager.copy){text="o";}else{if(!this.manager.canDropFlag){text="x";}}}icon.innerHTML=text;}dojo.query(("tr.dojoDndAvatarHeader td span"+(this.isA11y?" span":"")),this.node).forEach(function(node){node.innerHTML=this._generateText();},this);},_generateText:function(){return this.manager.nodes.length.toString();}});}if(!dojo._hasResource["dojo.dnd.Manager"]){dojo._hasResource["dojo.dnd.Manager"]=true;dojo.provide("dojo.dnd.Manager");dojo.declare("dojo.dnd.Manager",null,{constructor:function(){this.avatar=null;this.source=null;this.nodes=[];this.copy=true;this.target=null;this.canDropFlag=false;this.events=[];},OFFSET_X:16,OFFSET_Y:16,overSource:function(_3db){if(this.avatar){this.target=(_3db&&_3db.targetState!="Disabled")?_3db:null;this.canDropFlag=Boolean(this.target);this.avatar.update();}dojo.publish("/dnd/source/over",[_3db]);},outSource:function(_3dc){if(this.avatar){if(this.target==_3dc){this.target=null;this.canDropFlag=false;this.avatar.update();dojo.publish("/dnd/source/over",[null]);}}else{dojo.publish("/dnd/source/over",[null]);}},startDrag:function(_3dd,_3de,copy){this.source=_3dd;this.nodes=_3de;this.copy=Boolean(copy);this.avatar=this.makeAvatar();dojo.body().appendChild(this.avatar.node);dojo.publish("/dnd/start",[_3dd,_3de,this.copy]);this.events=[dojo.connect(dojo.doc,"onmousemove",this,"onMouseMove"),dojo.connect(dojo.doc,"onmouseup",this,"onMouseUp"),dojo.connect(dojo.doc,"onkeydown",this,"onKeyDown"),dojo.connect(dojo.doc,"onkeyup",this,"onKeyUp"),dojo.connect(dojo.doc,"ondragstart",dojo.stopEvent),dojo.connect(dojo.body(),"onselectstart",dojo.stopEvent)];var c="dojoDnd"+(copy?"Copy":"Move");dojo.addClass(dojo.body(),c);},canDrop:function(flag){var _3df=Boolean(this.target&&flag);if(this.canDropFlag!=_3df){this.canDropFlag=_3df;this.avatar.update();}},stopDrag:function(){dojo.removeClass(dojo.body(),["dojoDndCopy","dojoDndMove"]);dojo.forEach(this.events,dojo.disconnect);this.events=[];this.avatar.destroy();this.avatar=null;this.source=this.target=null;this.nodes=[];},makeAvatar:function(){return new dojo.dnd.Avatar(this);},updateAvatar:function(){this.avatar.update();},onMouseMove:function(e){var a=this.avatar;if(a){dojo.dnd.autoScrollNodes(e);var s=a.node.style;s.left=(e.pageX+this.OFFSET_X)+"px";s.top=(e.pageY+this.OFFSET_Y)+"px";var copy=Boolean(this.source.copyState(dojo.isCopyKey(e)));if(this.copy!=copy){this._setCopyStatus(copy);}}},onMouseUp:function(e){if(this.avatar){if(this.target&&this.canDropFlag){var copy=Boolean(this.source.copyState(dojo.isCopyKey(e))),_3e0=[this.source,this.nodes,copy,this.target,e];dojo.publish("/dnd/drop/before",_3e0);dojo.publish("/dnd/drop",_3e0);}else{dojo.publish("/dnd/cancel");}this.stopDrag();}},onKeyDown:function(e){if(this.avatar){switch(e.keyCode){case dojo.keys.CTRL:var copy=Boolean(this.source.copyState(true));if(this.copy!=copy){this._setCopyStatus(copy);}break;case dojo.keys.ESCAPE:dojo.publish("/dnd/cancel");this.stopDrag();break;}}},onKeyUp:function(e){if(this.avatar&&e.keyCode==dojo.keys.CTRL){var copy=Boolean(this.source.copyState(false));if(this.copy!=copy){this._setCopyStatus(copy);}}},_setCopyStatus:function(copy){this.copy=copy;this.source._markDndStatus(this.copy);this.updateAvatar();dojo.replaceClass(dojo.body(),"dojoDnd"+(this.copy?"Copy":"Move"),"dojoDnd"+(this.copy?"Move":"Copy"));}});dojo.dnd._manager=null;dojo.dnd.manager=function(){if(!dojo.dnd._manager){dojo.dnd._manager=new dojo.dnd.Manager();}return dojo.dnd._manager;};}if(!dojo._hasResource["dojo.dnd.Source"]){dojo._hasResource["dojo.dnd.Source"]=true;dojo.provide("dojo.dnd.Source");dojo.declare("dojo.dnd.Source",dojo.dnd.Selector,{isSource:true,horizontal:false,copyOnly:false,selfCopy:false,selfAccept:true,skipForm:false,withHandles:false,autoSync:false,delay:0,accept:["text"],generateText:true,constructor:function(node,_3e1){dojo.mixin(this,dojo.mixin({},_3e1));var type=this.accept;if(type.length){this.accept={};for(var i=0;i<type.length;++i){this.accept[type[i]]=1;}}this.isDragging=false;this.mouseDown=false;this.targetAnchor=null;this.targetBox=null;this.before=true;this._lastX=0;this._lastY=0;this.sourceState="";if(this.isSource){dojo.addClass(this.node,"dojoDndSource");}this.targetState="";if(this.accept){dojo.addClass(this.node,"dojoDndTarget");}if(this.horizontal){dojo.addClass(this.node,"dojoDndHorizontal");}this.topics=[dojo.subscribe("/dnd/source/over",this,"onDndSourceOver"),dojo.subscribe("/dnd/start",this,"onDndStart"),dojo.subscribe("/dnd/drop",this,"onDndDrop"),dojo.subscribe("/dnd/cancel",this,"onDndCancel")];},checkAcceptance:function(_3e2,_3e3){if(this==_3e2){return !this.copyOnly||this.selfAccept;}for(var i=0;i<_3e3.length;++i){var type=_3e2.getItem(_3e3[i].id).type;var flag=false;for(var j=0;j<type.length;++j){if(type[j] in this.accept){flag=true;break;}}if(!flag){return false;}}return true;},copyState:function(_3e4,self){if(_3e4){return true;}if(arguments.length<2){self=this==dojo.dnd.manager().target;}if(self){if(this.copyOnly){return this.selfCopy;}}else{return this.copyOnly;}return false;},destroy:function(){dojo.dnd.Source.superclass.destroy.call(this);dojo.forEach(this.topics,dojo.unsubscribe);this.targetAnchor=null;},markupFactory:function(_3e5,node){_3e5._skipStartup=true;return new dojo.dnd.Source(node,_3e5);},onMouseMove:function(e){if(this.isDragging&&this.targetState=="Disabled"){return;}dojo.dnd.Source.superclass.onMouseMove.call(this,e);var m=dojo.dnd.manager();if(!this.isDragging){if(this.mouseDown&&this.isSource&&(Math.abs(e.pageX-this._lastX)>this.delay||Math.abs(e.pageY-this._lastY)>this.delay)){var _3e6=this.getSelectedNodes();if(_3e6.length){m.startDrag(this,_3e6,this.copyState(dojo.isCopyKey(e),true));}}}if(this.isDragging){var _3e7=false;if(this.current){if(!this.targetBox||this.targetAnchor!=this.current){this.targetBox=dojo.position(this.current,true);}if(this.horizontal){_3e7=(e.pageX-this.targetBox.x)<(this.targetBox.w/2);}else{_3e7=(e.pageY-this.targetBox.y)<(this.targetBox.h/2);}}if(this.current!=this.targetAnchor||_3e7!=this.before){this._markTargetAnchor(_3e7);m.canDrop(!this.current||m.source!=this||!(this.current.id in this.selection));}}},onMouseDown:function(e){if(!this.mouseDown&&this._legalMouseDown(e)&&(!this.skipForm||!dojo.dnd.isFormElement(e))){this.mouseDown=true;this._lastX=e.pageX;this._lastY=e.pageY;dojo.dnd.Source.superclass.onMouseDown.call(this,e);}},onMouseUp:function(e){if(this.mouseDown){this.mouseDown=false;dojo.dnd.Source.superclass.onMouseUp.call(this,e);}},onDndSourceOver:function(_3e8){if(this!=_3e8){this.mouseDown=false;if(this.targetAnchor){this._unmarkTargetAnchor();}}else{if(this.isDragging){var m=dojo.dnd.manager();m.canDrop(this.targetState!="Disabled"&&(!this.current||m.source!=this||!(this.current.id in this.selection)));}}},onDndStart:function(_3e9,_3ea,copy){if(this.autoSync){this.sync();}if(this.isSource){this._changeState("Source",this==_3e9?(copy?"Copied":"Moved"):"");}var _3eb=this.accept&&this.checkAcceptance(_3e9,_3ea);this._changeState("Target",_3eb?"":"Disabled");if(this==_3e9){dojo.dnd.manager().overSource(this);}this.isDragging=true;},onDndDrop:function(_3ec,_3ed,copy,_3ee){if(this==_3ee){this.onDrop(_3ec,_3ed,copy);}this.onDndCancel();},onDndCancel:function(){if(this.targetAnchor){this._unmarkTargetAnchor();this.targetAnchor=null;}this.before=true;this.isDragging=false;this.mouseDown=false;this._changeState("Source","");this._changeState("Target","");},onDrop:function(_3ef,_3f0,copy){if(this!=_3ef){this.onDropExternal(_3ef,_3f0,copy);}else{this.onDropInternal(_3f0,copy);}},onDropExternal:function(_3f1,_3f2,copy){var _3f3=this._normalizedCreator;if(this.creator){this._normalizedCreator=function(node,hint){return _3f3.call(this,_3f1.getItem(node.id).data,hint);};}else{if(copy){this._normalizedCreator=function(node,hint){var t=_3f1.getItem(node.id);var n=node.cloneNode(true);n.id=dojo.dnd.getUniqueId();return {node:n,data:t.data,type:t.type};};}else{this._normalizedCreator=function(node,hint){var t=_3f1.getItem(node.id);_3f1.delItem(node.id);return {node:node,data:t.data,type:t.type};};}}this.selectNone();if(!copy&&!this.creator){_3f1.selectNone();}this.insertNodes(true,_3f2,this.before,this.current);if(!copy&&this.creator){_3f1.deleteSelectedNodes();}this._normalizedCreator=_3f3;},onDropInternal:function(_3f4,copy){var _3f5=this._normalizedCreator;if(this.current&&this.current.id in this.selection){return;}if(copy){if(this.creator){this._normalizedCreator=function(node,hint){return _3f5.call(this,this.getItem(node.id).data,hint);};}else{this._normalizedCreator=function(node,hint){var t=this.getItem(node.id);var n=node.cloneNode(true);n.id=dojo.dnd.getUniqueId();return {node:n,data:t.data,type:t.type};};}}else{if(!this.current){return;}this._normalizedCreator=function(node,hint){var t=this.getItem(node.id);return {node:node,data:t.data,type:t.type};};}this._removeSelection();this.insertNodes(true,_3f4,this.before,this.current);this._normalizedCreator=_3f5;},onDraggingOver:function(){},onDraggingOut:function(){},onOverEvent:function(){dojo.dnd.Source.superclass.onOverEvent.call(this);dojo.dnd.manager().overSource(this);if(this.isDragging&&this.targetState!="Disabled"){this.onDraggingOver();}},onOutEvent:function(){dojo.dnd.Source.superclass.onOutEvent.call(this);dojo.dnd.manager().outSource(this);if(this.isDragging&&this.targetState!="Disabled"){this.onDraggingOut();}},_markTargetAnchor:function(_3f6){if(this.current==this.targetAnchor&&this.before==_3f6){return;}if(this.targetAnchor){this._removeItemClass(this.targetAnchor,this.before?"Before":"After");}this.targetAnchor=this.current;this.targetBox=null;this.before=_3f6;if(this.targetAnchor){this._addItemClass(this.targetAnchor,this.before?"Before":"After");}},_unmarkTargetAnchor:function(){if(!this.targetAnchor){return;}this._removeItemClass(this.targetAnchor,this.before?"Before":"After");this.targetAnchor=null;this.targetBox=null;this.before=true;},_markDndStatus:function(copy){this._changeState("Source",copy?"Copied":"Moved");},_legalMouseDown:function(e){if(!dojo.mouseButtons.isLeft(e)){return false;}if(!this.withHandles){return true;}for(var node=e.target;node&&node!==this.node;node=node.parentNode){if(dojo.hasClass(node,"dojoDndHandle")){return true;}if(dojo.hasClass(node,"dojoDndItem")||dojo.hasClass(node,"dojoDndIgnore")){break;}}return false;}});dojo.declare("dojo.dnd.Target",dojo.dnd.Source,{constructor:function(node,_3f7){this.isSource=false;dojo.removeClass(this.node,"dojoDndSource");},markupFactory:function(_3f8,node){_3f8._skipStartup=true;return new dojo.dnd.Target(node,_3f8);}});dojo.declare("dojo.dnd.AutoSource",dojo.dnd.Source,{constructor:function(node,_3f9){this.autoSync=true;},markupFactory:function(_3fa,node){_3fa._skipStartup=true;return new dojo.dnd.AutoSource(node,_3fa);}});}if(!dojo._hasResource["dojox.grid._View"]){dojo._hasResource["dojox.grid._View"]=true;dojo.provide("dojox.grid._View");(function(){var _3fb=function(_3fc,_3fd){return _3fc.style.cssText==undefined?_3fc.getAttribute("style"):_3fc.style.cssText;};dojo.declare("dojox.grid._View",[dijit._Widget,dijit._Templated],{defaultWidth:"18em",viewWidth:"",templateString:"<div class=\"dojoxGridView\" role=\"presentation\">\n\t<div class=\"dojoxGridHeader\" dojoAttachPoint=\"headerNode\" role=\"presentation\">\n\t\t<div dojoAttachPoint=\"headerNodeContainer\" style=\"width:100%\" role=\"presentation\">\n\t\t\t<div dojoAttachPoint=\"headerContentNode\" role=\"row\"></div>\n\t\t</div>\n\t</div>\n\t<input type=\"checkbox\" class=\"dojoxGridHiddenFocus\" dojoAttachPoint=\"hiddenFocusNode\" role=\"presentation\" aria-hidden=\"true\"/>\n\t<input type=\"checkbox\" class=\"dojoxGridHiddenFocus\" role=\"presentation\" aria-hidden=\"true\"/>\n\t<div class=\"dojoxGridScrollbox\" dojoAttachPoint=\"scrollboxNode\" role=\"presentation\">\n\t\t<div class=\"dojoxGridContent\" dojoAttachPoint=\"contentNode\" hidefocus=\"hidefocus\" role=\"presentation\"></div>\n\t</div>\n</div>\n",themeable:false,classTag:"dojoxGrid",marginBottom:0,rowPad:2,_togglingColumn:-1,_headerBuilderClass:dojox.grid._HeaderBuilder,_contentBuilderClass:dojox.grid._ContentBuilder,postMixInProperties:function(){this.rowNodes={};},postCreate:function(){this.connect(this.scrollboxNode,"onscroll","doscroll");dojox.grid.util.funnelEvents(this.contentNode,this,"doContentEvent",["mouseover","mouseout","click","dblclick","contextmenu","mousedown"]);dojox.grid.util.funnelEvents(this.headerNode,this,"doHeaderEvent",["dblclick","mouseover","mouseout","mousemove","mousedown","click","contextmenu"]);this.content=new this._contentBuilderClass(this);this.header=new this._headerBuilderClass(this);if(!dojo._isBodyLtr()){this.headerNodeContainer.style.width="";}},destroy:function(){dojo.destroy(this.headerNode);delete this.headerNode;for(var i in this.rowNodes){dojo.destroy(this.rowNodes[i]);}this.rowNodes={};if(this.source){this.source.destroy();}this.inherited(arguments);},focus:function(){if(dojo.isIE||dojo.isWebKit||dojo.isOpera){this.hiddenFocusNode.focus();}else{this.scrollboxNode.focus();}},setStructure:function(_3fe){var vs=(this.structure=_3fe);if(vs.width&&!isNaN(vs.width)){this.viewWidth=vs.width+"em";}else{this.viewWidth=vs.width||(vs.noscroll?"auto":this.viewWidth);}this._onBeforeRow=vs.onBeforeRow||function(){};this._onAfterRow=vs.onAfterRow||function(){};this.noscroll=vs.noscroll;if(this.noscroll){this.scrollboxNode.style.overflow="hidden";}this.simpleStructure=Boolean(vs.cells.length==1);this.testFlexCells();this.updateStructure();},_cleanupRowWidgets:function(_3ff){if(_3ff){dojo.forEach(dojo.query("[widgetId]",_3ff).map(dijit.byNode),function(w){if(w._destroyOnRemove){w.destroy();delete w;}else{if(w.domNode&&w.domNode.parentNode){w.domNode.parentNode.removeChild(w.domNode);}}});}},onBeforeRow:function(_400,_401){this._onBeforeRow(_400,_401);if(_400>=0){this._cleanupRowWidgets(this.getRowNode(_400));}},onAfterRow:function(_402,_403,_404){this._onAfterRow(_402,_403,_404);var g=this.grid;dojo.forEach(dojo.query(".dojoxGridStubNode",_404),function(n){if(n&&n.parentNode){var lw=n.getAttribute("linkWidget");var _405=window.parseInt(dojo.attr(n,"cellIdx"),10);var _406=g.getCell(_405);var w=dijit.byId(lw);if(w){n.parentNode.replaceChild(w.domNode,n);if(!w._started){w.startup();}}else{n.innerHTML="";}}},this);},testFlexCells:function(){this.flexCells=false;for(var j=0,row;(row=this.structure.cells[j]);j++){for(var i=0,cell;(cell=row[i]);i++){cell.view=this;this.flexCells=this.flexCells||cell.isFlex();}}return this.flexCells;},updateStructure:function(){this.header.update();this.content.update();},getScrollbarWidth:function(){var _407=this.hasVScrollbar();var _408=dojo.style(this.scrollboxNode,"overflow");if(this.noscroll||!_408||_408=="hidden"){_407=false;}else{if(_408=="scroll"){_407=true;}}return (_407?dojox.html.metrics.getScrollbar().w:0);},getColumnsWidth:function(){var h=this.headerContentNode;return h&&h.firstChild?h.firstChild.offsetWidth:0;},setColumnsWidth:function(_409){this.headerContentNode.firstChild.style.width=_409+"px";if(this.viewWidth){this.viewWidth=_409+"px";}},getWidth:function(){return this.viewWidth||(this.getColumnsWidth()+this.getScrollbarWidth())+"px";},getContentWidth:function(){return Math.max(0,dojo._getContentBox(this.domNode).w-this.getScrollbarWidth())+"px";},render:function(){this.scrollboxNode.style.height="";this.renderHeader();if(this._togglingColumn>=0){this.setColumnsWidth(this.getColumnsWidth()-this._togglingColumn);this._togglingColumn=-1;}var _40a=this.grid.layout.cells;var _40b=dojo.hitch(this,function(node,_40c){!dojo._isBodyLtr()&&(_40c=!_40c);var inc=_40c?-1:1;var idx=this.header.getCellNodeIndex(node)+inc;var cell=_40a[idx];while(cell&&cell.getHeaderNode()&&cell.getHeaderNode().style.display=="none"){idx+=inc;cell=_40a[idx];}if(cell){return cell.getHeaderNode();}return null;});if(this.grid.columnReordering&&this.simpleStructure){if(this.source){this.source.destroy();}var _40d="dojoxGrid_bottomMarker";var _40e="dojoxGrid_topMarker";if(this.bottomMarker){dojo.destroy(this.bottomMarker);}this.bottomMarker=dojo.byId(_40d);if(this.topMarker){dojo.destroy(this.topMarker);}this.topMarker=dojo.byId(_40e);if(!this.bottomMarker){this.bottomMarker=dojo.create("div",{"id":_40d,"class":"dojoxGridColPlaceBottom"},dojo.body());this._hide(this.bottomMarker);this.topMarker=dojo.create("div",{"id":_40e,"class":"dojoxGridColPlaceTop"},dojo.body());this._hide(this.topMarker);}this.arrowDim=dojo.contentBox(this.bottomMarker);var _40f=dojo.contentBox(this.headerContentNode.firstChild.rows[0]).h;this.source=new dojo.dnd.Source(this.headerContentNode.firstChild.rows[0],{horizontal:true,accept:["gridColumn_"+this.grid.id],viewIndex:this.index,generateText:false,onMouseDown:dojo.hitch(this,function(e){this.header.decorateEvent(e);if((this.header.overRightResizeArea(e)||this.header.overLeftResizeArea(e))&&this.header.canResize(e)&&!this.header.moveable){}else{if(this.grid.headerMenu){this.grid.headerMenu.onCancel(true);}if(e.button===(dojo.isIE?1:0)){dojo.dnd.Source.prototype.onMouseDown.call(this.source,e);}}}),onMouseOver:dojo.hitch(this,function(e){var src=this.source;if(src._getChildByEvent(e)){dojo.dnd.Source.prototype.onMouseOver.apply(src,arguments);}}),_markTargetAnchor:dojo.hitch(this,function(_410){var src=this.source;if(src.current==src.targetAnchor&&src.before==_410){return;}if(src.targetAnchor&&_40b(src.targetAnchor,src.before)){src._removeItemClass(_40b(src.targetAnchor,src.before),src.before?"After":"Before");}dojo.dnd.Source.prototype._markTargetAnchor.call(src,_410);var _411=_410?src.targetAnchor:_40b(src.targetAnchor,src.before);var _412=0;if(!_411){_411=src.targetAnchor;_412=dojo.contentBox(_411).w+this.arrowDim.w/2+2;}var pos=(dojo.position||dojo._abs)(_411,true);var left=Math.floor(pos.x-this.arrowDim.w/2+_412);dojo.style(this.bottomMarker,"visibility","visible");dojo.style(this.topMarker,"visibility","visible");dojo.style(this.bottomMarker,{"left":left+"px","top":(_40f+pos.y)+"px"});dojo.style(this.topMarker,{"left":left+"px","top":(pos.y-this.arrowDim.h)+"px"});if(src.targetAnchor&&_40b(src.targetAnchor,src.before)){src._addItemClass(_40b(src.targetAnchor,src.before),src.before?"After":"Before");}}),_unmarkTargetAnchor:dojo.hitch(this,function(){var src=this.source;if(!src.targetAnchor){return;}if(src.targetAnchor&&_40b(src.targetAnchor,src.before)){src._removeItemClass(_40b(src.targetAnchor,src.before),src.before?"After":"Before");}this._hide(this.bottomMarker);this._hide(this.topMarker);dojo.dnd.Source.prototype._unmarkTargetAnchor.call(src);}),destroy:dojo.hitch(this,function(){dojo.disconnect(this._source_conn);dojo.unsubscribe(this._source_sub);dojo.dnd.Source.prototype.destroy.call(this.source);if(this.bottomMarker){dojo.destroy(this.bottomMarker);delete this.bottomMarker;}if(this.topMarker){dojo.destroy(this.topMarker);delete this.topMarker;}}),onDndCancel:dojo.hitch(this,function(){dojo.dnd.Source.prototype.onDndCancel.call(this.source);this._hide(this.bottomMarker);this._hide(this.topMarker);})});this._source_conn=dojo.connect(this.source,"onDndDrop",this,"_onDndDrop");this._source_sub=dojo.subscribe("/dnd/drop/before",this,"_onDndDropBefore");this.source.startup();}},_hide:function(node){dojo.style(node,{left:"-10000px",top:"-10000px","visibility":"hidden"});},_onDndDropBefore:function(_413,_414,copy){if(dojo.dnd.manager().target!==this.source){return;}this.source._targetNode=this.source.targetAnchor;this.source._beforeTarget=this.source.before;var _415=this.grid.views.views;var _416=_415[_413.viewIndex];var _417=_415[this.index];if(_417!=_416){_416.convertColPctToFixed();_417.convertColPctToFixed();}},_onDndDrop:function(_418,_419,copy){if(dojo.dnd.manager().target!==this.source){if(dojo.dnd.manager().source===this.source){this._removingColumn=true;}return;}this._hide(this.bottomMarker);this._hide(this.topMarker);var _41a=function(n){return n?dojo.attr(n,"idx"):null;};var w=dojo.marginBox(_419[0]).w;if(_418.viewIndex!==this.index){var _41b=this.grid.views.views;var _41c=_41b[_418.viewIndex];var _41d=_41b[this.index];if(_41c.viewWidth&&_41c.viewWidth!="auto"){_41c.setColumnsWidth(_41c.getColumnsWidth()-w);}if(_41d.viewWidth&&_41d.viewWidth!="auto"){_41d.setColumnsWidth(_41d.getColumnsWidth());}}var stn=this.source._targetNode;var stb=this.source._beforeTarget;!dojo._isBodyLtr()&&(stb=!stb);var _41e=this.grid.layout;var idx=this.index;delete this.source._targetNode;delete this.source._beforeTarget;_41e.moveColumn(_418.viewIndex,idx,_41a(_419[0]),_41a(stn),stb);},renderHeader:function(){this.headerContentNode.innerHTML=this.header.generateHtml(this._getHeaderContent);if(this.flexCells){this.contentWidth=this.getContentWidth();this.headerContentNode.firstChild.style.width=this.contentWidth;}dojox.grid.util.fire(this,"onAfterRow",[-1,this.structure.cells,this.headerContentNode]);},_getHeaderContent:function(_41f){var n=_41f.name||_41f.grid.getCellName(_41f);var ret=["<div class=\"dojoxGridSortNode"];if(_41f.index!=_41f.grid.getSortIndex()){ret.push("\">");}else{ret=ret.concat([" ",_41f.grid.sortInfo>0?"dojoxGridSortUp":"dojoxGridSortDown","\"><div class=\"dojoxGridArrowButtonChar\">",_41f.grid.sortInfo>0?"&#9650;":"&#9660;","</div><div class=\"dojoxGridArrowButtonNode\" role=\"presentation\"></div>","<div class=\"dojoxGridColCaption\">"]);}ret=ret.concat([n,"</div></div>"]);return ret.join("");},resize:function(){this.adaptHeight();this.adaptWidth();},hasHScrollbar:function(_420){var _421=this._hasHScroll||false;if(this._hasHScroll==undefined||_420){if(this.noscroll){this._hasHScroll=false;}else{var _422=dojo.style(this.scrollboxNode,"overflow");if(_422=="hidden"){this._hasHScroll=false;}else{if(_422=="scroll"){this._hasHScroll=true;}else{this._hasHScroll=(this.scrollboxNode.offsetWidth-this.getScrollbarWidth()<this.contentNode.offsetWidth);}}}}if(_421!==this._hasHScroll){this.grid.update();}return this._hasHScroll;},hasVScrollbar:function(_423){var _424=this._hasVScroll||false;if(this._hasVScroll==undefined||_423){if(this.noscroll){this._hasVScroll=false;}else{var _425=dojo.style(this.scrollboxNode,"overflow");if(_425=="hidden"){this._hasVScroll=false;}else{if(_425=="scroll"){this._hasVScroll=true;}else{this._hasVScroll=(this.scrollboxNode.scrollHeight>this.scrollboxNode.clientHeight);}}}}if(_424!==this._hasVScroll){this.grid.update();}return this._hasVScroll;},convertColPctToFixed:function(){var _426=false;this.grid.initialWidth="";var _427=dojo.query("th",this.headerContentNode);var _428=dojo.map(_427,function(c,vIdx){var w=c.style.width;dojo.attr(c,"vIdx",vIdx);if(w&&w.slice(-1)=="%"){_426=true;}else{if(w&&w.slice(-2)=="px"){return window.parseInt(w,10);}}return dojo.contentBox(c).w;});if(_426){dojo.forEach(this.grid.layout.cells,function(cell,idx){if(cell.view==this){var _429=cell.view.getHeaderCellNode(cell.index);if(_429&&dojo.hasAttr(_429,"vIdx")){var vIdx=window.parseInt(dojo.attr(_429,"vIdx"));this.setColWidth(idx,_428[vIdx]);dojo.removeAttr(_429,"vIdx");}}},this);return true;}return false;},adaptHeight:function(_42a){if(!this.grid._autoHeight){var h=(this.domNode.style.height&&parseInt(this.domNode.style.height.replace(/px/,""),10))||this.domNode.clientHeight;var self=this;var _42b=function(){var v;for(var i in self.grid.views.views){v=self.grid.views.views[i];if(v!==self&&v.hasHScrollbar()){return true;}}return false;};if(_42a||(this.noscroll&&_42b())){h-=dojox.html.metrics.getScrollbar().h;}dojox.grid.util.setStyleHeightPx(this.scrollboxNode,h);}this.hasVScrollbar(true);},adaptWidth:function(){if(this.flexCells){this.contentWidth=this.getContentWidth();this.headerContentNode.firstChild.style.width=this.contentWidth;}var w=this.scrollboxNode.offsetWidth-this.getScrollbarWidth();if(!this._removingColumn){w=Math.max(w,this.getColumnsWidth())+"px";}else{w=Math.min(w,this.getColumnsWidth())+"px";this._removingColumn=false;}var cn=this.contentNode;cn.style.width=w;this.hasHScrollbar(true);},setSize:function(w,h){var ds=this.domNode.style;var hs=this.headerNode.style;if(w){ds.width=w;hs.width=w;}ds.height=(h>=0?h+"px":"");},renderRow:function(_42c){var _42d=this.createRowNode(_42c);this.buildRow(_42c,_42d);this.grid.edit.restore(this,_42c);return _42d;},createRowNode:function(_42e){var node=document.createElement("div");node.className=this.classTag+"Row";if(this instanceof dojox.grid._RowSelector){dojo.attr(node,"role","presentation");}else{dojo.attr(node,"role","row");if(this.grid.selectionMode!="none"){dojo.attr(node,"aria-selected","false");}}node[dojox.grid.util.gridViewTag]=this.id;node[dojox.grid.util.rowIndexTag]=_42e;this.rowNodes[_42e]=node;return node;},buildRow:function(_42f,_430){this.buildRowContent(_42f,_430);this.styleRow(_42f,_430);},buildRowContent:function(_431,_432){_432.innerHTML=this.content.generateHtml(_431,_431);if(this.flexCells&&this.contentWidth){_432.firstChild.style.width=this.contentWidth;}dojox.grid.util.fire(this,"onAfterRow",[_431,this.structure.cells,_432]);},rowRemoved:function(_433){if(_433>=0){this._cleanupRowWidgets(this.getRowNode(_433));}this.grid.edit.save(this,_433);delete this.rowNodes[_433];},getRowNode:function(_434){return this.rowNodes[_434];},getCellNode:function(_435,_436){var row=this.getRowNode(_435);if(row){return this.content.getCellNode(row,_436);}},getHeaderCellNode:function(_437){if(this.headerContentNode){return this.header.getCellNode(this.headerContentNode,_437);}},styleRow:function(_438,_439){_439._style=_3fb(_439);this.styleRowNode(_438,_439);},styleRowNode:function(_43a,_43b){if(_43b){this.doStyleRowNode(_43a,_43b);}},doStyleRowNode:function(_43c,_43d){this.grid.styleRowNode(_43c,_43d);},updateRow:function(_43e){var _43f=this.getRowNode(_43e);if(_43f){_43f.style.height="";this.buildRow(_43e,_43f);}return _43f;},updateRowStyles:function(_440){this.styleRowNode(_440,this.getRowNode(_440));},lastTop:0,firstScroll:0,doscroll:function(_441){var _442=dojo._isBodyLtr();if(this.firstScroll<2){if((!_442&&this.firstScroll==1)||(_442&&this.firstScroll===0)){var s=dojo.marginBox(this.headerNodeContainer);if(dojo.isIE){this.headerNodeContainer.style.width=s.w+this.getScrollbarWidth()+"px";}else{if(dojo.isMoz){this.headerNodeContainer.style.width=s.w-this.getScrollbarWidth()+"px";this.scrollboxNode.scrollLeft=_442?this.scrollboxNode.clientWidth-this.scrollboxNode.scrollWidth:this.scrollboxNode.scrollWidth-this.scrollboxNode.clientWidth;}}}this.firstScroll++;}this.headerNode.scrollLeft=this.scrollboxNode.scrollLeft;var top=this.scrollboxNode.scrollTop;if(top!==this.lastTop){this.grid.scrollTo(top);}},setScrollTop:function(_443){this.lastTop=_443;this.scrollboxNode.scrollTop=_443;return this.scrollboxNode.scrollTop;},doContentEvent:function(e){if(this.content.decorateEvent(e)){this.grid.onContentEvent(e);}},doHeaderEvent:function(e){if(this.header.decorateEvent(e)){this.grid.onHeaderEvent(e);}},dispatchContentEvent:function(e){return this.content.dispatchEvent(e);},dispatchHeaderEvent:function(e){return this.header.dispatchEvent(e);},setColWidth:function(_444,_445){this.grid.setCellWidth(_444,_445+"px");},update:function(){if(!this.domNode){return;}this.content.update();this.grid.update();var left=this.scrollboxNode.scrollLeft;this.scrollboxNode.scrollLeft=left;this.headerNode.scrollLeft=left;}});dojo.declare("dojox.grid._GridAvatar",dojo.dnd.Avatar,{construct:function(){var dd=dojo.doc;var a=dd.createElement("table");a.cellPadding=a.cellSpacing="0";a.className="dojoxGridDndAvatar";a.style.position="absolute";a.style.zIndex=1999;a.style.margin="0px";var b=dd.createElement("tbody");var tr=dd.createElement("tr");var td=dd.createElement("td");var img=dd.createElement("td");tr.className="dojoxGridDndAvatarItem";img.className="dojoxGridDndAvatarItemImage";img.style.width="16px";var _446=this.manager.source,node;if(_446.creator){node=_446._normalizedCreator(_446.getItem(this.manager.nodes[0].id).data,"avatar").node;}else{node=this.manager.nodes[0].cloneNode(true);var _447,_448;if(node.tagName.toLowerCase()=="tr"){_447=dd.createElement("table");_448=dd.createElement("tbody");_448.appendChild(node);_447.appendChild(_448);node=_447;}else{if(node.tagName.toLowerCase()=="th"){_447=dd.createElement("table");_448=dd.createElement("tbody");var r=dd.createElement("tr");_447.cellPadding=_447.cellSpacing="0";r.appendChild(node);_448.appendChild(r);_447.appendChild(_448);node=_447;}}}node.id="";td.appendChild(node);tr.appendChild(img);tr.appendChild(td);dojo.style(tr,"opacity",0.9);b.appendChild(tr);a.appendChild(b);this.node=a;var m=dojo.dnd.manager();this.oldOffsetY=m.OFFSET_Y;m.OFFSET_Y=1;},destroy:function(){dojo.dnd.manager().OFFSET_Y=this.oldOffsetY;this.inherited(arguments);}});var _449=dojo.dnd.manager().makeAvatar;dojo.dnd.manager().makeAvatar=function(){var src=this.source;if(src.viewIndex!==undefined&&!dojo.hasClass(dojo.body(),"dijit_a11y")){return new dojox.grid._GridAvatar(this);}return _449.call(dojo.dnd.manager());};})();}if(!dojo._hasResource["dojox.grid._RowSelector"]){dojo._hasResource["dojox.grid._RowSelector"]=true;dojo.provide("dojox.grid._RowSelector");dojo.declare("dojox.grid._RowSelector",dojox.grid._View,{defaultWidth:"2em",noscroll:true,padBorderWidth:2,buildRendering:function(){this.inherited("buildRendering",arguments);this.scrollboxNode.style.overflow="hidden";this.headerNode.style.visibility="hidden";},getWidth:function(){return this.viewWidth||this.defaultWidth;},buildRowContent:function(_44a,_44b){var w=this.contentWidth||0;_44b.innerHTML="<table class=\"dojoxGridRowbarTable\" style=\"width:"+w+"px;height:1px;\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" role=\"presentation\"><tr><td class=\"dojoxGridRowbarInner\">&nbsp;</td></tr></table>";},renderHeader:function(){},updateRow:function(){},resize:function(){this.adaptHeight();},adaptWidth:function(){if(!("contentWidth" in this)&&this.contentNode){this.contentWidth=this.contentNode.offsetWidth-this.padBorderWidth;}},doStyleRowNode:function(_44c,_44d){var n=["dojoxGridRowbar dojoxGridNonNormalizedCell"];if(this.grid.rows.isOver(_44c)){n.push("dojoxGridRowbarOver");}if(this.grid.selection.isSelected(_44c)){n.push("dojoxGridRowbarSelected");}_44d.className=n.join(" ");},domouseover:function(e){this.grid.onMouseOverRow(e);},domouseout:function(e){if(!this.isIntraRowEvent(e)){this.grid.onMouseOutRow(e);}}});}if(!dojo._hasResource["dojox.grid._Layout"]){dojo._hasResource["dojox.grid._Layout"]=true;dojo.provide("dojox.grid._Layout");dojo.declare("dojox.grid._Layout",null,{constructor:function(_44e){this.grid=_44e;},cells:[],structure:null,defaultWidth:"6em",moveColumn:function(_44f,_450,_451,_452,_453){var _454=this.structure[_44f].cells[0];var _455=this.structure[_450].cells[0];var cell=null;var _456=0;var _457=0;for(var i=0,c;c=_454[i];i++){if(c.index==_451){_456=i;break;}}cell=_454.splice(_456,1)[0];cell.view=this.grid.views.views[_450];for(i=0,c=null;c=_455[i];i++){if(c.index==_452){_457=i;break;}}if(!_453){_457+=1;}_455.splice(_457,0,cell);var _458=this.grid.getCell(this.grid.getSortIndex());if(_458){_458._currentlySorted=this.grid.getSortAsc();}this.cells=[];_451=0;var v;for(i=0;v=this.structure[i];i++){for(var j=0,cs;cs=v.cells[j];j++){for(var k=0;c=cs[k];k++){c.index=_451;this.cells.push(c);if("_currentlySorted" in c){var si=_451+1;si*=c._currentlySorted?1:-1;this.grid.sortInfo=si;delete c._currentlySorted;}_451++;}}}dojo.forEach(this.cells,function(c){var _459=c.markup[2].split(" ");var _45a=parseInt(_459[1].substring(5));if(_45a!=c.index){_459[1]="idx=\""+c.index+"\"";c.markup[2]=_459.join(" ");}});this.grid.setupHeaderMenu();},setColumnVisibility:function(_45b,_45c){var cell=this.cells[_45b];if(cell.hidden==_45c){cell.hidden=!_45c;var v=cell.view,w=v.viewWidth;if(w&&w!="auto"){v._togglingColumn=dojo.marginBox(cell.getHeaderNode()).w||0;}v.update();return true;}else{return false;}},addCellDef:function(_45d,_45e,_45f){var self=this;var _460=function(_461){var w=0;if(_461.colSpan>1){w=0;}else{w=_461.width||self._defaultCellProps.width||self.defaultWidth;if(!isNaN(w)){w=w+"em";}}return w;};var _462={grid:this.grid,subrow:_45d,layoutIndex:_45e,index:this.cells.length};if(_45f&&_45f instanceof dojox.grid.cells._Base){var _463=dojo.clone(_45f);_462.unitWidth=_460(_463._props);_463=dojo.mixin(_463,this._defaultCellProps,_45f._props,_462);return _463;}var _464=_45f.type||_45f.cellType||this._defaultCellProps.type||this._defaultCellProps.cellType||dojox.grid.cells.Cell;_462.unitWidth=_460(_45f);return new _464(dojo.mixin({},this._defaultCellProps,_45f,_462));},addRowDef:function(_465,_466){var _467=[];var _468=0,_469=0,_46a=true;for(var i=0,def,cell;(def=_466[i]);i++){cell=this.addCellDef(_465,i,def);_467.push(cell);this.cells.push(cell);if(_46a&&cell.relWidth){_468+=cell.relWidth;}else{if(cell.width){var w=cell.width;if(typeof w=="string"&&w.slice(-1)=="%"){_469+=window.parseInt(w,10);}else{if(w=="auto"){_46a=false;}}}}}if(_468&&_46a){dojo.forEach(_467,function(cell){if(cell.relWidth){cell.width=cell.unitWidth=((cell.relWidth/_468)*(100-_469))+"%";}});}return _467;},addRowsDef:function(_46b){var _46c=[];if(dojo.isArray(_46b)){if(dojo.isArray(_46b[0])){for(var i=0,row;_46b&&(row=_46b[i]);i++){_46c.push(this.addRowDef(i,row));}}else{_46c.push(this.addRowDef(0,_46b));}}return _46c;},addViewDef:function(_46d){this._defaultCellProps=_46d.defaultCell||{};if(_46d.width&&_46d.width=="auto"){delete _46d.width;}return dojo.mixin({},_46d,{cells:this.addRowsDef(_46d.rows||_46d.cells)});},setStructure:function(_46e){this.fieldIndex=0;this.cells=[];var s=this.structure=[];if(this.grid.rowSelector){var sel={type:dojox._scopeName+".grid._RowSelector"};if(dojo.isString(this.grid.rowSelector)){var _46f=this.grid.rowSelector;if(_46f=="false"){sel=null;}else{if(_46f!="true"){sel["width"]=_46f;}}}else{if(!this.grid.rowSelector){sel=null;}}if(sel){s.push(this.addViewDef(sel));}}var _470=function(def){return ("name" in def||"field" in def||"get" in def);};var _471=function(def){if(dojo.isArray(def)){if(dojo.isArray(def[0])||_470(def[0])){return true;}}return false;};var _472=function(def){return (def!==null&&dojo.isObject(def)&&("cells" in def||"rows" in def||("type" in def&&!_470(def))));};if(dojo.isArray(_46e)){var _473=false;for(var i=0,st;(st=_46e[i]);i++){if(_472(st)){_473=true;break;}}if(!_473){s.push(this.addViewDef({cells:_46e}));}else{for(i=0;(st=_46e[i]);i++){if(_471(st)){s.push(this.addViewDef({cells:st}));}else{if(_472(st)){s.push(this.addViewDef(st));}}}}}else{if(_472(_46e)){s.push(this.addViewDef(_46e));}}this.cellCount=this.cells.length;this.grid.setupHeaderMenu();}});}if(!dojo._hasResource["dojox.grid._ViewManager"]){dojo._hasResource["dojox.grid._ViewManager"]=true;dojo.provide("dojox.grid._ViewManager");dojo.declare("dojox.grid._ViewManager",null,{constructor:function(_474){this.grid=_474;},defaultWidth:200,views:[],resize:function(){this.onEach("resize");},render:function(){this.onEach("render");},addView:function(_475){_475.idx=this.views.length;this.views.push(_475);},destroyViews:function(){for(var i=0,v;v=this.views[i];i++){v.destroy();}this.views=[];},getContentNodes:function(){var _476=[];for(var i=0,v;v=this.views[i];i++){_476.push(v.contentNode);}return _476;},forEach:function(_477){for(var i=0,v;v=this.views[i];i++){_477(v,i);}},onEach:function(_478,_479){_479=_479||[];for(var i=0,v;v=this.views[i];i++){if(_478 in v){v[_478].apply(v,_479);}}},normalizeHeaderNodeHeight:function(){var _47a=[];for(var i=0,v;(v=this.views[i]);i++){if(v.headerContentNode.firstChild){_47a.push(v.headerContentNode);}}this.normalizeRowNodeHeights(_47a);},normalizeRowNodeHeights:function(_47b){var h=0;var _47c=[];if(this.grid.rowHeight){h=this.grid.rowHeight;}else{if(_47b.length<=1){return;}for(var i=0,n;(n=_47b[i]);i++){if(!dojo.hasClass(n,"dojoxGridNonNormalizedCell")){_47c[i]=n.firstChild.offsetHeight;h=Math.max(h,_47c[i]);}}h=(h>=0?h:0);if(dojo.isMoz&&h){h++;}}for(i=0;(n=_47b[i]);i++){if(_47c[i]!=h){n.firstChild.style.height=h+"px";}}},resetHeaderNodeHeight:function(){for(var i=0,v,n;(v=this.views[i]);i++){n=v.headerContentNode.firstChild;if(n){n.style.height="";}}},renormalizeRow:function(_47d){var _47e=[];for(var i=0,v,n;(v=this.views[i])&&(n=v.getRowNode(_47d));i++){n.firstChild.style.height="";_47e.push(n);}this.normalizeRowNodeHeights(_47e);},getViewWidth:function(_47f){return this.views[_47f].getWidth()||this.defaultWidth;},measureHeader:function(){this.resetHeaderNodeHeight();this.forEach(function(_480){_480.headerContentNode.style.height="";});var h=0;this.forEach(function(_481){h=Math.max(_481.headerNode.offsetHeight,h);});return h;},measureContent:function(){var h=0;this.forEach(function(_482){h=Math.max(_482.domNode.offsetHeight,h);});return h;},findClient:function(_483){var c=this.grid.elasticView||-1;if(c<0){for(var i=1,v;(v=this.views[i]);i++){if(v.viewWidth){for(i=1;(v=this.views[i]);i++){if(!v.viewWidth){c=i;break;}}break;}}}if(c<0){c=Math.floor(this.views.length/2);}return c;},arrange:function(l,w){var i,v,vw,len=this.views.length;var c=(w<=0?len:this.findClient());var _484=function(v,l){var ds=v.domNode.style;var hs=v.headerNode.style;if(!dojo._isBodyLtr()){ds.right=l+"px";if(dojo.isMoz){hs.right=l+"px";hs.width=parseInt(hs.width,10)-v.getScrollbarWidth()+"px";}else{if(dojo.isChrome){if(v.hasHScrollbar()||v.hasVScrollbar()){hs.left=0+"px";hs.width=parseInt(hs.width,10)-v.getScrollbarWidth()+"px";}else{hs.right=0+"px";}}else{hs.right=l+"px";}}}else{ds.left=l+"px";hs.left=l+"px";}ds.top=0+"px";hs.top=0;};for(i=0;(v=this.views[i])&&(i<c);i++){vw=this.getViewWidth(i);v.setSize(vw,0);_484(v,l);if(v.headerContentNode&&v.headerContentNode.firstChild){vw=v.getColumnsWidth()+v.getScrollbarWidth();}else{vw=v.domNode.offsetWidth;}l+=vw;}i++;var r=w;for(var j=len-1;(v=this.views[j])&&(i<=j);j--){vw=this.getViewWidth(j);v.setSize(vw,0);vw=v.domNode.offsetWidth;r-=vw;_484(v,r);}if(c<len){v=this.views[c];vw=Math.max(1,r-l);v.setSize(vw+"px",0);_484(v,l);}return l;},renderRow:function(_485,_486,_487){var _488=[];for(var i=0,v,n,_489;(v=this.views[i])&&(n=_486[i]);i++){_489=v.renderRow(_485);n.appendChild(_489);_488.push(_489);}if(!_487){this.normalizeRowNodeHeights(_488);}},rowRemoved:function(_48a){this.onEach("rowRemoved",[_48a]);},updateRow:function(_48b,_48c){for(var i=0,v;v=this.views[i];i++){v.updateRow(_48b);}if(!_48c){this.renormalizeRow(_48b);}},updateRowStyles:function(_48d){this.onEach("updateRowStyles",[_48d]);},setScrollTop:function(_48e){var top=_48e;for(var i=0,v;v=this.views[i];i++){top=v.setScrollTop(_48e);if(dojo.isIE&&v.headerNode&&v.scrollboxNode){v.headerNode.scrollLeft=v.scrollboxNode.scrollLeft;}}return top;},getFirstScrollingView:function(){for(var i=0,v;(v=this.views[i]);i++){if(v.hasHScrollbar()||v.hasVScrollbar()){return v;}}return null;}});}if(!dojo._hasResource["dojox.grid._RowManager"]){dojo._hasResource["dojox.grid._RowManager"]=true;dojo.provide("dojox.grid._RowManager");(function(){var _48f=function(_490,_491){if(_490.style.cssText==undefined){_490.setAttribute("style",_491);}else{_490.style.cssText=_491;}};dojo.declare("dojox.grid._RowManager",null,{constructor:function(_492){this.grid=_492;},linesToEms:2,overRow:-2,prepareStylingRow:function(_493,_494){return {index:_493,node:_494,odd:Boolean(_493&1),selected:!!this.grid.selection.isSelected(_493),over:this.isOver(_493),customStyles:"",customClasses:"dojoxGridRow"};},styleRowNode:function(_495,_496){var row=this.prepareStylingRow(_495,_496);this.grid.onStyleRow(row);this.applyStyles(row);},applyStyles:function(_497){var i=_497;i.node.className=i.customClasses;var h=i.node.style.height;_48f(i.node,i.customStyles+";"+(i.node._style||""));i.node.style.height=h;},updateStyles:function(_498){this.grid.updateRowStyles(_498);},setOverRow:function(_499){var last=this.overRow;this.overRow=_499;if((last!=this.overRow)&&(dojo.isString(last)||last>=0)){this.updateStyles(last);}this.updateStyles(this.overRow);},isOver:function(_49a){return (this.overRow==_49a&&!dojo.hasClass(this.grid.domNode,"dojoxGridColumnResizing"));}});})();}if(!dojo._hasResource["dojox.grid._FocusManager"]){dojo._hasResource["dojox.grid._FocusManager"]=true;dojo.provide("dojox.grid._FocusManager");dojo.declare("dojox.grid._FocusManager",null,{constructor:function(_49b){this.grid=_49b;this.cell=null;this.rowIndex=-1;this._connects=[];this._headerConnects=[];this.headerMenu=this.grid.headerMenu;this._connects.push(dojo.connect(this.grid.domNode,"onfocus",this,"doFocus"));this._connects.push(dojo.connect(this.grid.domNode,"onblur",this,"doBlur"));this._connects.push(dojo.connect(this.grid.domNode,"oncontextmenu",this,"doContextMenu"));this._connects.push(dojo.connect(this.grid.lastFocusNode,"onfocus",this,"doLastNodeFocus"));this._connects.push(dojo.connect(this.grid.lastFocusNode,"onblur",this,"doLastNodeBlur"));this._connects.push(dojo.connect(this.grid,"_onFetchComplete",this,"_delayedCellFocus"));this._connects.push(dojo.connect(this.grid,"postrender",this,"_delayedHeaderFocus"));},destroy:function(){dojo.forEach(this._connects,dojo.disconnect);dojo.forEach(this._headerConnects,dojo.disconnect);delete this.grid;delete this.cell;},_colHeadNode:null,_colHeadFocusIdx:null,_contextMenuBindNode:null,tabbingOut:false,focusClass:"dojoxGridCellFocus",focusView:null,initFocusView:function(){this.focusView=this.grid.views.getFirstScrollingView()||this.focusView||this.grid.views.views[0];this._initColumnHeaders();},isFocusCell:function(_49c,_49d){return (this.cell==_49c)&&(this.rowIndex==_49d);},isLastFocusCell:function(){if(this.cell){return (this.rowIndex==this.grid.rowCount-1)&&(this.cell.index==this.grid.layout.cellCount-1);}return false;},isFirstFocusCell:function(){if(this.cell){return (this.rowIndex===0)&&(this.cell.index===0);}return false;},isNoFocusCell:function(){return (this.rowIndex<0)||!this.cell;},isNavHeader:function(){return (!!this._colHeadNode);},getHeaderIndex:function(){if(this._colHeadNode){return dojo.indexOf(this._findHeaderCells(),this._colHeadNode);}else{return -1;}},_focusifyCellNode:function(_49e){var n=this.cell&&this.cell.getNode(this.rowIndex);if(n){dojo.toggleClass(n,this.focusClass,_49e);if(_49e){var sl=this.scrollIntoView();try{if(!this.grid.edit.isEditing()){dojox.grid.util.fire(n,"focus");if(sl){this.cell.view.scrollboxNode.scrollLeft=sl;}}}catch(e){}}}},_delayedCellFocus:function(){if(this.isNavHeader()||!this.grid._focused){return;}var n=this.cell&&this.cell.getNode(this.rowIndex);if(n){try{var _49f=true;if(window.preventTableHeaderFocus||window.isToPreventTableHeaderFocusAlways||window.isTopElementToBeFocussed){_49f=!(window.preventTableHeaderFocus||window.isToPreventTableHeaderFocusAlways||window.isTopElementToBeFocussed);}if(_49f){if(!this.grid.edit.isEditing()){dojo.toggleClass(n,this.focusClass,true);this.blurHeader();dojox.grid.util.fire(n,"focus");}}}catch(e){}}},_delayedHeaderFocus:function(){var _4a0=true;if(window.preventTableHeaderFocus||window.isToPreventTableHeaderFocusAlways||window.isTopElementToBeFocussed){_4a0=!(window.preventTableHeaderFocus||window.isToPreventTableHeaderFocusAlways||window.isTopElementToBeFocussed);}if(_4a0){if(this.isNavHeader()){this.focusHeader();this.grid.domNode.focus();}}},_initColumnHeaders:function(){dojo.forEach(this._headerConnects,dojo.disconnect);this._headerConnects=[];var _4a1=this._findHeaderCells();for(var i=0;i<_4a1.length;i++){this._headerConnects.push(dojo.connect(_4a1[i],"onfocus",this,"doColHeaderFocus"));this._headerConnects.push(dojo.connect(_4a1[i],"onblur",this,"doColHeaderBlur"));}},_findHeaderCells:function(){var _4a2=dojo.query("th",this.grid.viewsHeaderNode);var _4a3=[];for(var i=0;i<_4a2.length;i++){var _4a4=_4a2[i];var _4a5=dojo.hasAttr(_4a4,"tabIndex");var _4a6=dojo.attr(_4a4,"tabIndex");if(_4a5&&_4a6<0){_4a3.push(_4a4);}}return _4a3;},_setActiveColHeader:function(_4a7,_4a8,_4a9){dojo.attr(this.grid.domNode,"aria-activedescendant",_4a7.id);if(_4a9!=null&&_4a9>=0&&_4a9!=_4a8){dojo.toggleClass(this._findHeaderCells()[_4a9],this.focusClass,false);}dojo.toggleClass(_4a7,this.focusClass,true);this._colHeadNode=_4a7;this._colHeadFocusIdx=_4a8;this._scrollHeader(this._colHeadFocusIdx);},scrollIntoView:function(){var info=(this.cell?this._scrollInfo(this.cell):null);if(!info||!info.s){return null;}var rt=this.grid.scroller.findScrollTop(this.rowIndex);if(info.n&&info.sr){if(info.n.offsetLeft+info.n.offsetWidth>info.sr.l+info.sr.w){info.s.scrollLeft=info.n.offsetLeft+info.n.offsetWidth-info.sr.w;}else{if(info.n.offsetLeft<info.sr.l){info.s.scrollLeft=info.n.offsetLeft;}}}if(info.r&&info.sr){if(rt+info.r.offsetHeight>info.sr.t+info.sr.h){this.grid.setScrollTop(rt+info.r.offsetHeight-info.sr.h);}else{if(rt<info.sr.t){this.grid.setScrollTop(rt);}}}return info.s.scrollLeft;},_scrollInfo:function(cell,_4aa){if(cell){var cl=cell,sbn=cl.view.scrollboxNode,sbnr={w:sbn.clientWidth,l:sbn.scrollLeft,t:sbn.scrollTop,h:sbn.clientHeight},rn=cl.view.getRowNode(this.rowIndex);return {c:cl,s:sbn,sr:sbnr,n:(_4aa?_4aa:cell.getNode(this.rowIndex)),r:rn};}return null;},_scrollHeader:function(_4ab){var info=null;if(this._colHeadNode){var cell=this.grid.getCell(_4ab);info=this._scrollInfo(cell,cell.getNode(0));}if(info&&info.s&&info.sr&&info.n){var _4ac=info.sr.l+info.sr.w;if(info.n.offsetLeft+info.n.offsetWidth>_4ac){info.s.scrollLeft=info.n.offsetLeft+info.n.offsetWidth-info.sr.w;}else{if(info.n.offsetLeft<info.sr.l){info.s.scrollLeft=info.n.offsetLeft;}else{if(dojo.isIE<=7&&cell&&cell.view.headerNode){cell.view.headerNode.scrollLeft=info.s.scrollLeft;}}}}},_isHeaderHidden:function(){var _4ad=this.focusView;if(!_4ad){for(var i=0,_4ae;(_4ae=this.grid.views.views[i]);i++){if(_4ae.headerNode){_4ad=_4ae;break;}}}return (_4ad&&dojo.getComputedStyle(_4ad.headerNode).display=="none");},colSizeAdjust:function(e,_4af,_4b0){var _4b1=this._findHeaderCells();var view=this.focusView;if(!view){for(var i=0,_4b2;(_4b2=this.grid.views.views[i]);i++){if(_4b2.header.tableMap.map){view=_4b2;break;}}}var _4b3=_4b1[_4af];if(!view||(_4af==_4b1.length-1&&_4af===0)){return;}view.content.baseDecorateEvent(e);e.cellNode=_4b3;e.cellIndex=view.content.getCellNodeIndex(e.cellNode);e.cell=(e.cellIndex>=0?this.grid.getCell(e.cellIndex):null);if(view.header.canResize(e)){var _4b4={l:_4b0};var drag=view.header.colResizeSetup(e,false);view.header.doResizeColumn(drag,null,_4b4);view.update();}},styleRow:function(_4b5){return;},setFocusIndex:function(_4b6,_4b7){this.setFocusCell(this.grid.getCell(_4b7),_4b6);},setFocusCell:function(_4b8,_4b9){if(_4b8&&!this.isFocusCell(_4b8,_4b9)){this.tabbingOut=false;if(this._colHeadNode){this.blurHeader();}this._colHeadNode=this._colHeadFocusIdx=null;this.focusGridView();this._focusifyCellNode(false);this.cell=_4b8;this.rowIndex=_4b9;this._focusifyCellNode(true);}if(dojo.isOpera){setTimeout(dojo.hitch(this.grid,"onCellFocus",this.cell,this.rowIndex),1);}else{this.grid.onCellFocus(this.cell,this.rowIndex);}},next:function(){if(this.cell){var row=this.rowIndex,col=this.cell.index+1,cc=this.grid.layout.cellCount-1,rc=this.grid.rowCount-1;if(col>cc){col=0;row++;}if(row>rc){col=cc;row=rc;}if(this.grid.edit.isEditing()){var _4ba=this.grid.getCell(col);if(!this.isLastFocusCell()&&(!_4ba.editable||this.grid.canEdit&&!this.grid.canEdit(_4ba,row))){this.cell=_4ba;this.rowIndex=row;this.next();return;}}this.setFocusIndex(row,col);}},previous:function(){if(this.cell){var row=(this.rowIndex||0),col=(this.cell.index||0)-1;if(col<0){col=this.grid.layout.cellCount-1;row--;}if(row<0){row=0;col=0;}if(this.grid.edit.isEditing()){var _4bb=this.grid.getCell(col);if(!this.isFirstFocusCell()&&!_4bb.editable){this.cell=_4bb;this.rowIndex=row;this.previous();return;}}this.setFocusIndex(row,col);}},move:function(_4bc,_4bd){var _4be=_4bd<0?-1:1;if(this.isNavHeader()){var _4bf=this._findHeaderCells();var _4c0=currentIdx=dojo.indexOf(_4bf,this._colHeadNode);currentIdx+=_4bd;while(currentIdx>=0&&currentIdx<_4bf.length&&_4bf[currentIdx].style.display=="none"){currentIdx+=_4be;}if((currentIdx>=0)&&(currentIdx<_4bf.length)){this._setActiveColHeader(_4bf[currentIdx],currentIdx,_4c0);}}else{if(this.cell){var sc=this.grid.scroller,r=this.rowIndex,rc=this.grid.rowCount-1,row=Math.min(rc,Math.max(0,r+_4bc));if(_4bc){if(_4bc>0){if(row>sc.getLastPageRow(sc.page)){this.grid.setScrollTop(this.grid.scrollTop+sc.findScrollTop(row)-sc.findScrollTop(r));}}else{if(_4bc<0){if(row<=sc.getPageRow(sc.page)){this.grid.setScrollTop(this.grid.scrollTop-sc.findScrollTop(r)-sc.findScrollTop(row));}}}}var cc=this.grid.layout.cellCount-1,i=this.cell.index,col=Math.min(cc,Math.max(0,i+_4bd));var cell=this.grid.getCell(col);while(col>=0&&col<cc&&cell&&cell.hidden===true){col+=_4be;cell=this.grid.getCell(col);}if(!cell||cell.hidden===true){col=i;}var n=cell.getNode(row);if(!n&&_4bc){if((row+_4bc)>=0&&(row+_4bc)<=rc){this.move(_4bc>0?++_4bc:--_4bc,_4bd);}return;}else{if((!n||dojo.style(n,"display")==="none")&&_4bd){if((col+_4bc)>=0&&(col+_4bc)<=cc){this.move(_4bc,_4bd>0?++_4bd:--_4bd);}return;}}this.setFocusIndex(row,col);if(_4bc){this.grid.updateRow(r);}}}},previousKey:function(e){if(this.grid.edit.isEditing()){dojo.stopEvent(e);this.previous();}else{if(!this.isNavHeader()&&!this._isHeaderHidden()){this.grid.domNode.focus();dojo.stopEvent(e);}else{this.tabOut(this.grid.domNode);if(this._colHeadFocusIdx!=null){dojo.toggleClass(this._findHeaderCells()[this._colHeadFocusIdx],this.focusClass,false);this._colHeadFocusIdx=null;}this._focusifyCellNode(false);}}},nextKey:function(e){var _4c1=(this.grid.rowCount===0);if(e.target===this.grid.domNode&&this._colHeadFocusIdx==null){this.focusHeader();dojo.stopEvent(e);}else{if(this.isNavHeader()){this.blurHeader();if(!this.findAndFocusGridCell()){this.tabOut(this.grid.lastFocusNode);}this._colHeadNode=this._colHeadFocusIdx=null;}else{if(this.grid.edit.isEditing()){dojo.stopEvent(e);this.next();}else{this.tabOut(this.grid.lastFocusNode);}}}},tabOut:function(_4c2){this.tabbingOut=true;_4c2.focus();},focusGridView:function(){dojox.grid.util.fire(this.focusView,"focus");},focusGrid:function(_4c3){this.focusGridView();this._focusifyCellNode(true);},findAndFocusGridCell:function(){var _4c4=true;var _4c5=(this.grid.rowCount===0);if(this.isNoFocusCell()&&!_4c5){var _4c6=0;var cell=this.grid.getCell(_4c6);if(cell.hidden){_4c6=this.isNavHeader()?this._colHeadFocusIdx:0;}this.setFocusIndex(0,_4c6);}else{if(this.cell&&!_4c5){if(this.focusView&&!this.focusView.rowNodes[this.rowIndex]){this.grid.scrollToRow(this.rowIndex);}this.focusGrid();}else{_4c4=false;}}this._colHeadNode=this._colHeadFocusIdx=null;return _4c4;},focusHeader:function(){var _4c7=this._findHeaderCells();var _4c8=this._colHeadFocusIdx;if(this._isHeaderHidden()){this.findAndFocusGridCell();}else{if(!this._colHeadFocusIdx){if(this.isNoFocusCell()){this._colHeadFocusIdx=0;}else{this._colHeadFocusIdx=this.cell.index;}}}this._colHeadNode=_4c7[this._colHeadFocusIdx];while(this._colHeadNode&&this._colHeadFocusIdx>=0&&this._colHeadFocusIdx<_4c7.length&&this._colHeadNode.style.display=="none"){this._colHeadFocusIdx++;this._colHeadNode=_4c7[this._colHeadFocusIdx];}if(this._colHeadNode&&this._colHeadNode.style.display!="none"){if(this.headerMenu&&this._contextMenuBindNode!=this.grid.domNode){this.headerMenu.unBindDomNode(this.grid.viewsHeaderNode);this.headerMenu.bindDomNode(this.grid.domNode);this._contextMenuBindNode=this.grid.domNode;}this._setActiveColHeader(this._colHeadNode,this._colHeadFocusIdx,_4c8);this._scrollHeader(this._colHeadFocusIdx);this._focusifyCellNode(false);}else{this.findAndFocusGridCell();}},blurHeader:function(){dojo.removeClass(this._colHeadNode,this.focusClass);dojo.removeAttr(this.grid.domNode,"aria-activedescendant");if(this.headerMenu&&this._contextMenuBindNode==this.grid.domNode){var _4c9=this.grid.viewsHeaderNode;this.headerMenu.unBindDomNode(this.grid.domNode);this.headerMenu.bindDomNode(_4c9);this._contextMenuBindNode=_4c9;}},doFocus:function(e){if(e&&e.target!=e.currentTarget){dojo.stopEvent(e);return;}if(!this.tabbingOut){this.focusHeader();}this.tabbingOut=false;dojo.stopEvent(e);},doBlur:function(e){dojo.stopEvent(e);},doContextMenu:function(e){if(!this.headerMenu){dojo.stopEvent(e);}},doLastNodeFocus:function(e){if(this.tabbingOut){this._focusifyCellNode(false);}else{if(this.grid.rowCount>0){if(this.isNoFocusCell()){this.setFocusIndex(0,0);}this._focusifyCellNode(true);}else{this.focusHeader();}}this.tabbingOut=false;dojo.stopEvent(e);},doLastNodeBlur:function(e){dojo.stopEvent(e);},doColHeaderFocus:function(e){this._setActiveColHeader(e.target,dojo.attr(e.target,"idx"),this._colHeadFocusIdx);this._scrollHeader(this.getHeaderIndex());dojo.stopEvent(e);},doColHeaderBlur:function(e){dojo.toggleClass(e.target,this.focusClass,false);}});}if(!dojo._hasResource["dojox.grid._EditManager"]){dojo._hasResource["dojox.grid._EditManager"]=true;dojo.provide("dojox.grid._EditManager");dojo.declare("dojox.grid._EditManager",null,{constructor:function(_4ca){this.grid=_4ca;if(dojo.isIE){this.connections=[dojo.connect(document.body,"onfocus",dojo.hitch(this,"_boomerangFocus"))];}else{this.connections=[dojo.connect(this.grid,"onBlur",this,"apply")];}},info:{},destroy:function(){dojo.forEach(this.connections,dojo.disconnect);},cellFocus:function(_4cb,_4cc){if(this.grid.singleClickEdit||this.isEditRow(_4cc)){this.setEditCell(_4cb,_4cc);}else{this.apply();}if(this.isEditing()||(_4cb&&_4cb.editable&&_4cb.alwaysEditing)){this._focusEditor(_4cb,_4cc);}},rowClick:function(e){if(this.isEditing()&&!this.isEditRow(e.rowIndex)){this.apply();}},styleRow:function(_4cd){if(_4cd.index==this.info.rowIndex){_4cd.customClasses+=" dojoxGridRowEditing";}},dispatchEvent:function(e){var c=e.cell,ed=(c&&c["editable"])?c:0;return ed&&ed.dispatchEvent(e.dispatch,e);},isEditing:function(){return this.info.rowIndex!==undefined;},isEditCell:function(_4ce,_4cf){return (this.info.rowIndex===_4ce)&&(this.info.cell.index==_4cf);},isEditRow:function(_4d0){return this.info.rowIndex===_4d0;},setEditCell:function(_4d1,_4d2){if(!this.isEditCell(_4d2,_4d1.index)&&this.grid.canEdit&&this.grid.canEdit(_4d1,_4d2)){this.start(_4d1,_4d2,this.isEditRow(_4d2)||_4d1.editable);}},_focusEditor:function(_4d3,_4d4){dojox.grid.util.fire(_4d3,"focus",[_4d4]);},focusEditor:function(){if(this.isEditing()){this._focusEditor(this.info.cell,this.info.rowIndex);}},_boomerangWindow:500,_shouldCatchBoomerang:function(){return this._catchBoomerang>new Date().getTime();},_boomerangFocus:function(){if(this._shouldCatchBoomerang()){this.grid.focus.focusGrid();this.focusEditor();this._catchBoomerang=0;}},_doCatchBoomerang:function(){if(dojo.isIE){this._catchBoomerang=new Date().getTime()+this._boomerangWindow;}},start:function(_4d5,_4d6,_4d7){this.grid.beginUpdate();this.editorApply();if(this.isEditing()&&!this.isEditRow(_4d6)){this.applyRowEdit();this.grid.updateRow(_4d6);}if(_4d7){this.info={cell:_4d5,rowIndex:_4d6};this.grid.doStartEdit(_4d5,_4d6);this.grid.updateRow(_4d6);}else{this.info={};}this.grid.endUpdate();this.grid.focus.focusGrid();this._focusEditor(_4d5,_4d6);this._doCatchBoomerang();},_editorDo:function(_4d8){var c=this.info.cell;if(c&&c.editable){c[_4d8](this.info.rowIndex);}},editorApply:function(){this._editorDo("apply");},editorCancel:function(){this._editorDo("cancel");},applyCellEdit:function(_4d9,_4da,_4db){if(this.grid.canEdit(_4da,_4db)){this.grid.doApplyCellEdit(_4d9,_4db,_4da.field);}},applyRowEdit:function(){this.grid.doApplyEdit(this.info.rowIndex,this.info.cell.field);},apply:function(){if(this.isEditing()){this.grid.beginUpdate();this.editorApply();this.applyRowEdit();this.info={};this.grid.endUpdate();this.grid.focus.focusGrid();this._doCatchBoomerang();}},cancel:function(){if(this.isEditing()){this.grid.beginUpdate();this.editorCancel();this.info={};this.grid.endUpdate();this.grid.focus.focusGrid();this._doCatchBoomerang();}},save:function(_4dc,_4dd){var c=this.info.cell;if(this.isEditRow(_4dc)&&(!_4dd||c.view==_4dd)&&c.editable){c.save(c,this.info.rowIndex);}},restore:function(_4de,_4df){var c=this.info.cell;if(this.isEditRow(_4df)&&c.view==_4de&&c.editable){c.restore(c,this.info.rowIndex);}}});}if(!dojo._hasResource["dojox.grid.Selection"]){dojo._hasResource["dojox.grid.Selection"]=true;dojo.provide("dojox.grid.Selection");dojo.declare("dojox.grid.Selection",null,{constructor:function(_4e0){this.grid=_4e0;this.selected=[];this.setMode(_4e0.selectionMode);},mode:"extended",selected:null,updating:0,selectedIndex:-1,setMode:function(mode){if(this.selected.length){this.deselectAll();}if(mode!="extended"&&mode!="multiple"&&mode!="single"&&mode!="none"){this.mode="extended";}else{this.mode=mode;}},onCanSelect:function(_4e1){return this.grid.onCanSelect(_4e1);},onCanDeselect:function(_4e2){return this.grid.onCanDeselect(_4e2);},onSelected:function(_4e3){},onDeselected:function(_4e4){},onChanging:function(){},onChanged:function(){},isSelected:function(_4e5){if(this.mode=="none"){return false;}return this.selected[_4e5];},getFirstSelected:function(){if(!this.selected.length||this.mode=="none"){return -1;}for(var i=0,l=this.selected.length;i<l;i++){if(this.selected[i]){return i;}}return -1;},getNextSelected:function(_4e6){if(this.mode=="none"){return -1;}for(var i=_4e6+1,l=this.selected.length;i<l;i++){if(this.selected[i]){return i;}}return -1;},getSelected:function(){var _4e7=[];for(var i=0,l=this.selected.length;i<l;i++){if(this.selected[i]){_4e7.push(i);}}return _4e7;},getSelectedCount:function(){var c=0;for(var i=0;i<this.selected.length;i++){if(this.selected[i]){c++;}}return c;},_beginUpdate:function(){if(this.updating===0){this.onChanging();}this.updating++;},_endUpdate:function(){this.updating--;if(this.updating===0){this.onChanged();}},select:function(_4e8){if(this.mode=="none"){return;}if(this.mode!="multiple"){this.deselectAll(_4e8);this.addToSelection(_4e8);}else{this.toggleSelect(_4e8);}},addToSelection:function(_4e9){if(this.mode=="none"){return;}if(dojo.isArray(_4e9)){dojo.forEach(_4e9,this.addToSelection,this);return;}_4e9=Number(_4e9);if(this.selected[_4e9]){this.selectedIndex=_4e9;}else{if(this.onCanSelect(_4e9)!==false){this.selectedIndex=_4e9;var _4ea=this.grid.getRowNode(_4e9);if(_4ea){dojo.attr(_4ea,"aria-selected","true");}this._beginUpdate();this.selected[_4e9]=true;this.onSelected(_4e9);this._endUpdate();}}},deselect:function(_4eb){if(this.mode=="none"){return;}if(dojo.isArray(_4eb)){dojo.forEach(_4eb,this.deselect,this);return;}_4eb=Number(_4eb);if(this.selectedIndex==_4eb){this.selectedIndex=-1;}if(this.selected[_4eb]){if(this.onCanDeselect(_4eb)===false){return;}var _4ec=this.grid.getRowNode(_4eb);if(_4ec){dojo.attr(_4ec,"aria-selected","false");}this._beginUpdate();delete this.selected[_4eb];this.onDeselected(_4eb);this._endUpdate();}},setSelected:function(_4ed,_4ee){this[(_4ee?"addToSelection":"deselect")](_4ed);},toggleSelect:function(_4ef){if(dojo.isArray(_4ef)){dojo.forEach(_4ef,this.toggleSelect,this);return;}this.setSelected(_4ef,!this.selected[_4ef]);},_range:function(_4f0,inTo,func){var s=(_4f0>=0?_4f0:inTo),e=inTo;if(s>e){e=s;s=inTo;}for(var i=s;i<=e;i++){func(i);}},selectRange:function(_4f1,inTo){this._range(_4f1,inTo,dojo.hitch(this,"addToSelection"));},deselectRange:function(_4f2,inTo){this._range(_4f2,inTo,dojo.hitch(this,"deselect"));},insert:function(_4f3){this.selected.splice(_4f3,0,false);if(this.selectedIndex>=_4f3){this.selectedIndex++;}},remove:function(_4f4){this.selected.splice(_4f4,1);if(this.selectedIndex>=_4f4){this.selectedIndex--;}},deselectAll:function(_4f5){for(var i in this.selected){if((i!=_4f5)&&(this.selected[i]===true)){this.deselect(i);}}},clickSelect:function(_4f6,_4f7,_4f8){if(this.mode=="none"){return;}this._beginUpdate();if(this.mode!="extended"){this.select(_4f6);}else{var _4f9=this.selectedIndex;if(!_4f7){this.deselectAll(_4f6);}if(_4f8){this.selectRange(_4f9,_4f6);}else{if(_4f7){this.toggleSelect(_4f6);}else{this.addToSelection(_4f6);}}}this._endUpdate();},clickSelectEvent:function(e){this.clickSelect(e.rowIndex,dojo.isCopyKey(e),e.shiftKey);},clear:function(){this._beginUpdate();this.deselectAll();this._endUpdate();}});}if(!dojo._hasResource["dojox.grid._Events"]){dojo._hasResource["dojox.grid._Events"]=true;dojo.provide("dojox.grid._Events");dojo.declare("dojox.grid._Events",null,{cellOverClass:"dojoxGridCellOver",onKeyEvent:function(e){this.dispatchKeyEvent(e);},onContentEvent:function(e){this.dispatchContentEvent(e);},onHeaderEvent:function(e){this.dispatchHeaderEvent(e);},onStyleRow:function(_4fa){var i=_4fa;i.customClasses+=(i.odd?" dojoxGridRowOdd":"")+(i.selected?" dojoxGridRowSelected":"")+(i.over?" dojoxGridRowOver":"");this.focus.styleRow(_4fa);this.edit.styleRow(_4fa);},onKeyDown:function(e){if(e.altKey||e.metaKey){return;}var dk=dojo.keys;var _4fb;switch(e.keyCode){case dk.ESCAPE:this.edit.cancel();break;case dk.ENTER:if(!this.edit.isEditing()){_4fb=this.focus.getHeaderIndex();if(_4fb>=0){this.setSortIndex(_4fb);break;}else{this.selection.clickSelect(this.focus.rowIndex,dojo.isCopyKey(e),e.shiftKey);}dojo.stopEvent(e);}if(!e.shiftKey){var _4fc=this.edit.isEditing();this.edit.apply();if(!_4fc){this.edit.setEditCell(this.focus.cell,this.focus.rowIndex);}}if(!this.edit.isEditing()){var _4fd=this.focus.focusView||this.views.views[0];_4fd.content.decorateEvent(e);this.onRowClick(e);dojo.stopEvent(e);}break;case dk.SPACE:if(!this.edit.isEditing()){_4fb=this.focus.getHeaderIndex();if(_4fb>=0){this.setSortIndex(_4fb);break;}else{this.selection.clickSelect(this.focus.rowIndex,dojo.isCopyKey(e),e.shiftKey);}dojo.stopEvent(e);}break;case dk.TAB:this.focus[e.shiftKey?"previousKey":"nextKey"](e);break;case dk.LEFT_ARROW:case dk.RIGHT_ARROW:if(!this.edit.isEditing()){var _4fe=e.keyCode;dojo.stopEvent(e);_4fb=this.focus.getHeaderIndex();if(_4fb>=0&&(e.shiftKey&&e.ctrlKey)){this.focus.colSizeAdjust(e,_4fb,(_4fe==dk.LEFT_ARROW?-1:1)*5);}else{var _4ff=(_4fe==dk.LEFT_ARROW)?1:-1;if(dojo._isBodyLtr()){_4ff*=-1;}this.focus.move(0,_4ff);}}break;case dk.UP_ARROW:if(!this.edit.isEditing()&&this.focus.rowIndex!==0){dojo.stopEvent(e);this.focus.move(-1,0);}break;case dk.DOWN_ARROW:if(!this.edit.isEditing()&&this.focus.rowIndex+1!=this.rowCount){dojo.stopEvent(e);this.focus.move(1,0);}break;case dk.PAGE_UP:if(!this.edit.isEditing()&&this.focus.rowIndex!==0){dojo.stopEvent(e);if(this.focus.rowIndex!=this.scroller.firstVisibleRow+1){this.focus.move(this.scroller.firstVisibleRow-this.focus.rowIndex,0);}else{this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex-1));this.focus.move(this.scroller.firstVisibleRow-this.scroller.lastVisibleRow+1,0);}}break;case dk.PAGE_DOWN:if(!this.edit.isEditing()&&this.focus.rowIndex+1!=this.rowCount){dojo.stopEvent(e);if(this.focus.rowIndex!=this.scroller.lastVisibleRow-1){this.focus.move(this.scroller.lastVisibleRow-this.focus.rowIndex-1,0);}else{this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex+1));this.focus.move(this.scroller.lastVisibleRow-this.scroller.firstVisibleRow-1,0);}}break;default:break;}},onMouseOver:function(e){e.rowIndex==-1?this.onHeaderCellMouseOver(e):this.onCellMouseOver(e);},onMouseOut:function(e){e.rowIndex==-1?this.onHeaderCellMouseOut(e):this.onCellMouseOut(e);},onMouseDown:function(e){e.rowIndex==-1?this.onHeaderCellMouseDown(e):this.onCellMouseDown(e);},onMouseOverRow:function(e){if(!this.rows.isOver(e.rowIndex)){this.rows.setOverRow(e.rowIndex);e.rowIndex==-1?this.onHeaderMouseOver(e):this.onRowMouseOver(e);}},onMouseOutRow:function(e){if(this.rows.isOver(-1)){this.onHeaderMouseOut(e);}else{if(!this.rows.isOver(-2)){this.rows.setOverRow(-2);this.onRowMouseOut(e);}}},onMouseDownRow:function(e){if(e.rowIndex!=-1){this.onRowMouseDown(e);}},onCellMouseOver:function(e){if(e.cellNode){dojo.addClass(e.cellNode,this.cellOverClass);}},onCellMouseOut:function(e){if(e.cellNode){dojo.removeClass(e.cellNode,this.cellOverClass);}},onCellMouseDown:function(e){},onCellClick:function(e){this._click[0]=this._click[1];this._click[1]=e;if(!this.edit.isEditCell(e.rowIndex,e.cellIndex)){this.focus.setFocusCell(e.cell,e.rowIndex);}this.onRowClick(e);},onCellDblClick:function(e){if(this._click.length>1&&dojo.isIE){this.edit.setEditCell(this._click[1].cell,this._click[1].rowIndex);}else{if(this._click.length>1&&this._click[0].rowIndex!=this._click[1].rowIndex){this.edit.setEditCell(this._click[0].cell,this._click[0].rowIndex);}else{this.edit.setEditCell(e.cell,e.rowIndex);}}this.onRowDblClick(e);},onCellContextMenu:function(e){this.onRowContextMenu(e);},onCellFocus:function(_500,_501){this.edit.cellFocus(_500,_501);},onRowClick:function(e){this.edit.rowClick(e);this.selection.clickSelectEvent(e);},onRowDblClick:function(e){},onRowMouseOver:function(e){},onRowMouseOut:function(e){},onRowMouseDown:function(e){},onRowContextMenu:function(e){dojo.stopEvent(e);},onHeaderMouseOver:function(e){},onHeaderMouseOut:function(e){},onHeaderCellMouseOver:function(e){if(e.cellNode){dojo.addClass(e.cellNode,this.cellOverClass);}},onHeaderCellMouseOut:function(e){if(e.cellNode){dojo.removeClass(e.cellNode,this.cellOverClass);}},onHeaderCellMouseDown:function(e){},onHeaderClick:function(e){},onHeaderCellClick:function(e){this.setSortIndex(e.cell.index);this.onHeaderClick(e);},onHeaderDblClick:function(e){},onHeaderCellDblClick:function(e){this.onHeaderDblClick(e);},onHeaderCellContextMenu:function(e){this.onHeaderContextMenu(e);},onHeaderContextMenu:function(e){if(!this.headerMenu){dojo.stopEvent(e);}},onStartEdit:function(_502,_503){},onApplyCellEdit:function(_504,_505,_506){},onCancelEdit:function(_507){},onApplyEdit:function(_508){},onCanSelect:function(_509){return true;},onCanDeselect:function(_50a){return true;},onSelected:function(_50b){this.updateRowStyles(_50b);},onDeselected:function(_50c){this.updateRowStyles(_50c);},onSelectionChanged:function(){}});}if(!dojo._hasResource["dojox.grid._Grid"]){dojo._hasResource["dojox.grid._Grid"]=true;dojo.provide("dojox.grid._Grid");(function(){if(!dojo.isCopyKey){dojo.isCopyKey=dojo.dnd.getCopyKeyState;}dojo.declare("dojox.grid._Grid",[dijit._Widget,dijit._Templated,dojox.grid._Events],{templateString:"<div hidefocus=\"hidefocus\" role=\"grid\" dojoAttachEvent=\"onmouseout:_mouseOut\">\n\t<div class=\"dojoxGridMasterHeader\" dojoAttachPoint=\"viewsHeaderNode\" role=\"presentation\"></div>\n\t<div class=\"dojoxGridMasterView\" dojoAttachPoint=\"viewsNode\" role=\"presentation\"></div>\n\t<div class=\"dojoxGridMasterMessages\" style=\"display: none;\" dojoAttachPoint=\"messagesNode\"></div>\n\t<span dojoAttachPoint=\"lastFocusNode\" tabindex=\"0\"></span>\n</div>\n",classTag:"dojoxGrid",rowCount:5,keepRows:75,rowsPerPage:1000,autoWidth:false,initialWidth:"",autoHeight:"",rowHeight:0,autoRender:true,defaultHeight:"15em",height:"",structure:null,elasticView:-1,singleClickEdit:false,selectionMode:"extended",rowSelector:"",columnReordering:false,headerMenu:null,placeholderLabel:"GridColumns",selectable:false,_click:null,loadingMessage:"<span class='dojoxGridLoading'>${loadingState}</span>",errorMessage:"<span class='dojoxGridError'>${errorState}</span>",noDataMessage:"",escapeHTMLInData:true,formatterScope:null,editable:false,sortInfo:0,themeable:true,_placeholders:null,_layoutClass:dojox.grid._Layout,buildRendering:function(){this.inherited(arguments);if(!this.domNode.getAttribute("tabIndex")){this.domNode.tabIndex="0";}this.createScroller();this.createLayout();this.createViews();this.createManagers();this.createSelection();this.connect(this.selection,"onSelected","onSelected");this.connect(this.selection,"onDeselected","onDeselected");this.connect(this.selection,"onChanged","onSelectionChanged");dojox.html.metrics.initOnFontResize();this.connect(dojox.html.metrics,"onFontResize","textSizeChanged");dojox.grid.util.funnelEvents(this.domNode,this,"doKeyEvent",dojox.grid.util.keyEvents);if(this.selectionMode!="none"){dojo.attr(this.domNode,"aria-multiselectable",this.selectionMode=="single"?"false":"true");}dojo.addClass(this.domNode,this.classTag);if(!this.isLeftToRight()){dojo.addClass(this.domNode,this.classTag+"Rtl");}},postMixInProperties:function(){this.inherited(arguments);var _50d=dojo.i18n.getLocalization("dijit","loading",this.lang);this.loadingMessage=dojo.string.substitute(this.loadingMessage,_50d);this.errorMessage=dojo.string.substitute(this.errorMessage,_50d);if(this.srcNodeRef&&this.srcNodeRef.style.height){this.height=this.srcNodeRef.style.height;}this._setAutoHeightAttr(this.autoHeight,true);this.lastScrollTop=this.scrollTop=0;},postCreate:function(){this._placeholders=[];this._setHeaderMenuAttr(this.headerMenu);this._setStructureAttr(this.structure);this._click=[];this.inherited(arguments);if(this.domNode&&this.autoWidth&&this.initialWidth){this.domNode.style.width=this.initialWidth;}if(this.domNode&&!this.editable){dojo.attr(this.domNode,"aria-readonly","true");}},destroy:function(){this.domNode.onReveal=null;this.domNode.onSizeChange=null;delete this._click;this.edit.destroy();delete this.edit;this.views.destroyViews();if(this.scroller){this.scroller.destroy();delete this.scroller;}if(this.focus){this.focus.destroy();delete this.focus;}if(this.headerMenu&&this._placeholders.length){dojo.forEach(this._placeholders,function(p){p.unReplace(true);});this.headerMenu.unBindDomNode(this.viewsHeaderNode);}this.inherited(arguments);},_setAutoHeightAttr:function(ah,_50e){if(typeof ah=="string"){if(!ah||ah=="false"){ah=false;}else{if(ah=="true"){ah=true;}else{ah=window.parseInt(ah,10);}}}if(typeof ah=="number"){if(isNaN(ah)){ah=false;}if(ah<0){ah=true;}else{if(ah===0){ah=false;}}}this.autoHeight=ah;if(typeof ah=="boolean"){this._autoHeight=ah;}else{if(typeof ah=="number"){this._autoHeight=(ah>=this.get("rowCount"));}else{this._autoHeight=false;}}if(this._started&&!_50e){this.render();}},_getRowCountAttr:function(){return this.updating&&this.invalidated&&this.invalidated.rowCount!=undefined?this.invalidated.rowCount:this.rowCount;},textSizeChanged:function(){this.render();},sizeChange:function(){this.update();},createManagers:function(){this.rows=new dojox.grid._RowManager(this);this.focus=new dojox.grid._FocusManager(this);this.edit=new dojox.grid._EditManager(this);},createSelection:function(){this.selection=new dojox.grid.Selection(this);},createScroller:function(){this.scroller=new dojox.grid._Scroller();this.scroller.grid=this;this.scroller.renderRow=dojo.hitch(this,"renderRow");this.scroller.removeRow=dojo.hitch(this,"rowRemoved");},createLayout:function(){this.layout=new this._layoutClass(this);this.connect(this.layout,"moveColumn","onMoveColumn");},onMoveColumn:function(){this.render();},onResizeColumn:function(_50f){},createViews:function(){this.views=new dojox.grid._ViewManager(this);this.views.createView=dojo.hitch(this,"createView");},createView:function(_510,idx){var c=dojo.getObject(_510);var view=new c({grid:this,index:idx});this.viewsNode.appendChild(view.domNode);this.viewsHeaderNode.appendChild(view.headerNode);this.views.addView(view);dojo.attr(this.domNode,"align",dojo._isBodyLtr()?"left":"right");return view;},buildViews:function(){for(var i=0,vs;(vs=this.layout.structure[i]);i++){this.createView(vs.type||dojox._scopeName+".grid._View",i).setStructure(vs);}this.scroller.setContentNodes(this.views.getContentNodes());},_setStructureAttr:function(_511){var s=_511;if(s&&dojo.isString(s)){dojo.deprecated("dojox.grid._Grid.set('structure', 'objVar')","use dojox.grid._Grid.set('structure', objVar) instead","2.0");s=dojo.getObject(s);}this.structure=s;if(!s){if(this.layout.structure){s=this.layout.structure;}else{return;}}this.views.destroyViews();this.focus.focusView=null;if(s!==this.layout.structure){this.layout.setStructure(s);}this._structureChanged();},setStructure:function(_512){dojo.deprecated("dojox.grid._Grid.setStructure(obj)","use dojox.grid._Grid.set('structure', obj) instead.","2.0");this._setStructureAttr(_512);},getColumnTogglingItems:function(){return dojo.map(this.layout.cells,function(cell){if(!cell.menuItems){cell.menuItems=[];}var self=this;var item=new dijit.CheckedMenuItem({label:cell.name,checked:!cell.hidden,_gridCell:cell,onChange:function(_513){if(self.layout.setColumnVisibility(this._gridCell.index,_513)){var _514=this._gridCell.menuItems;if(_514.length>1){dojo.forEach(_514,function(item){if(item!==this){item.setAttribute("checked",_513);}},this);}_513=dojo.filter(self.layout.cells,function(c){if(c.menuItems.length>1){dojo.forEach(c.menuItems,"item.set('disabled', false);");}else{c.menuItems[0].set("disabled",false);}return !c.hidden;});if(_513.length==1){dojo.forEach(_513[0].menuItems,"item.set('disabled', true);");}}},destroy:function(){var _515=dojo.indexOf(this._gridCell.menuItems,this);this._gridCell.menuItems.splice(_515,1);delete this._gridCell;dijit.CheckedMenuItem.prototype.destroy.apply(this,arguments);}});cell.menuItems.push(item);return item;},this);},_setHeaderMenuAttr:function(menu){if(this._placeholders&&this._placeholders.length){dojo.forEach(this._placeholders,function(p){p.unReplace(true);});this._placeholders=[];}if(this.headerMenu){this.headerMenu.unBindDomNode(this.viewsHeaderNode);}this.headerMenu=menu;if(!menu){return;}this.headerMenu.bindDomNode(this.viewsHeaderNode);if(this.headerMenu.getPlaceholders){this._placeholders=this.headerMenu.getPlaceholders(this.placeholderLabel);}},setHeaderMenu:function(menu){dojo.deprecated("dojox.grid._Grid.setHeaderMenu(obj)","use dojox.grid._Grid.set('headerMenu', obj) instead.","2.0");this._setHeaderMenuAttr(menu);},setupHeaderMenu:function(){if(this._placeholders&&this._placeholders.length){dojo.forEach(this._placeholders,function(p){if(p._replaced){p.unReplace(true);}p.replace(this.getColumnTogglingItems());},this);}},_fetch:function(_516){this.setScrollTop(0);},getItem:function(_517){return null;},showMessage:function(_518){if(_518){this.messagesNode.innerHTML=_518;this.messagesNode.style.display="";}else{this.messagesNode.innerHTML="";this.messagesNode.style.display="none";}},_structureChanged:function(){this.buildViews();if(this.autoRender&&this._started){this.render();}},hasLayout:function(){return this.layout.cells.length;},resize:function(_519,_51a){this._pendingChangeSize=_519;this._pendingResultSize=_51a;this.sizeChange();},_getPadBorder:function(){this._padBorder=this._padBorder||dojo._getPadBorderExtents(this.domNode);return this._padBorder;},_getHeaderHeight:function(){var vns=this.viewsHeaderNode.style,t=vns.display=="none"?0:this.views.measureHeader();vns.height=t+"px";this.views.normalizeHeaderNodeHeight();return t;},_resize:function(_51b,_51c){_51b=_51b||this._pendingChangeSize;_51c=_51c||this._pendingResultSize;delete this._pendingChangeSize;delete this._pendingResultSize;if(!this.domNode){return;}var pn=this.domNode.parentNode;if(!pn||pn.nodeType!=1||!this.hasLayout()||pn.style.visibility=="hidden"||pn.style.display=="none"){return;}var _51d=this._getPadBorder();var hh=undefined;var h;if(this._autoHeight){this.domNode.style.height="auto";}else{if(typeof this.autoHeight=="number"){h=hh=this._getHeaderHeight();h+=(this.scroller.averageRowHeight*this.autoHeight);this.domNode.style.height=h+"px";}else{if(this.domNode.clientHeight<=_51d.h){if(pn==document.body){this.domNode.style.height=this.defaultHeight;}else{if(this.height){this.domNode.style.height=this.height;}else{this.fitTo="parent";}}}}}if(_51c){_51b=_51c;}if(_51b){dojo.marginBox(this.domNode,_51b);this.height=this.domNode.style.height;delete this.fitTo;}else{if(this.fitTo=="parent"){h=this._parentContentBoxHeight=this._parentContentBoxHeight||dojo._getContentBox(pn).h;this.domNode.style.height=Math.max(0,h)+"px";}}var _51e=dojo.some(this.views.views,function(v){return v.flexCells;});if(!this._autoHeight&&(h||dojo._getContentBox(this.domNode).h)===0){this.viewsHeaderNode.style.display="none";}else{this.viewsHeaderNode.style.display="block";if(!_51e&&hh===undefined){hh=this._getHeaderHeight();}}if(_51e){hh=undefined;}this.adaptWidth();this.adaptHeight(hh);this.postresize();},adaptWidth:function(){var _51f=(!this.initialWidth&&this.autoWidth);var w=_51f?0:this.domNode.clientWidth||(this.domNode.offsetWidth-this._getPadBorder().w),vw=this.views.arrange(1,w);this.views.onEach("adaptWidth");if(_51f){this.domNode.style.width=vw+"px";}},adaptHeight:function(_520){var t=_520===undefined?this._getHeaderHeight():_520;var h=(this._autoHeight?-1:Math.max(this.domNode.clientHeight-t,0)||0);this.views.onEach("setSize",[0,h]);this.views.onEach("adaptHeight");if(!this._autoHeight){var _521=0,_522=0;var _523=dojo.filter(this.views.views,function(v){var has=v.hasHScrollbar();if(has){_521++;}else{_522++;}return (!has);});if(_521>0&&_522>0){dojo.forEach(_523,function(v){v.adaptHeight(true);});}}if(this.autoHeight===true||h!=-1||(typeof this.autoHeight=="number"&&this.autoHeight>=this.get("rowCount"))){this.scroller.windowHeight=h;}else{this.scroller.windowHeight=Math.max(this.domNode.clientHeight-t,0);}},startup:function(){if(this._started){return;}this.inherited(arguments);if(this.autoRender){this.render();}},render:function(){if(!this.domNode){return;}if(!this._started){return;}if(!this.hasLayout()){this.scroller.init(0,this.keepRows,this.rowsPerPage);return;}this.update=this.defaultUpdate;this._render();},_render:function(){this.scroller.init(this.get("rowCount"),this.keepRows,this.rowsPerPage);this.prerender();this.setScrollTop(0);this.postrender();},prerender:function(){this.keepRows=this._autoHeight?0:this.keepRows;this.scroller.setKeepInfo(this.keepRows);this.views.render();this._resize();},postrender:function(){this.postresize();this.focus.initFocusView();dojo.setSelectable(this.domNode,this.selectable);},postresize:function(){if(this._autoHeight){var size=Math.max(this.views.measureContent())+"px";this.viewsNode.style.height=size;}},renderRow:function(_524,_525){this.views.renderRow(_524,_525,this._skipRowRenormalize);},rowRemoved:function(_526){this.views.rowRemoved(_526);},invalidated:null,updating:false,beginUpdate:function(){this.invalidated=[];this.updating=true;},endUpdate:function(){this.updating=false;var i=this.invalidated,r;if(i.all){this.update();}else{if(i.rowCount!=undefined){this.updateRowCount(i.rowCount);}else{for(r in i){this.updateRow(Number(r));}}}this.invalidated=[];},defaultUpdate:function(){if(!this.domNode){return;}if(this.updating){this.invalidated.all=true;return;}this.lastScrollTop=this.scrollTop;this.prerender();this.scroller.invalidateNodes();this.setScrollTop(this.lastScrollTop);this.postrender();},update:function(){this.render();},updateRow:function(_527){_527=Number(_527);if(this.updating){this.invalidated[_527]=true;}else{this.views.updateRow(_527);this.scroller.rowHeightChanged(_527);}},updateRows:function(_528,_529){_528=Number(_528);_529=Number(_529);var i;if(this.updating){for(i=0;i<_529;i++){this.invalidated[i+_528]=true;}}else{for(i=0;i<_529;i++){this.views.updateRow(i+_528,this._skipRowRenormalize);}this.scroller.rowHeightChanged(_528);}},updateRowCount:function(_52a){if(this.updating){this.invalidated.rowCount=_52a;}else{this.rowCount=_52a;this._setAutoHeightAttr(this.autoHeight,true);if(this.layout.cells.length){this.scroller.updateRowCount(_52a);}this._resize();if(this.layout.cells.length){this.setScrollTop(this.scrollTop);}}},updateRowStyles:function(_52b){this.views.updateRowStyles(_52b);},getRowNode:function(_52c){if(this.focus.focusView&&!(this.focus.focusView instanceof dojox.grid._RowSelector)){return this.focus.focusView.rowNodes[_52c];}else{for(var i=0,_52d;(_52d=this.views.views[i]);i++){if(!(_52d instanceof dojox.grid._RowSelector)){return _52d.rowNodes[_52c];}}}return null;},rowHeightChanged:function(_52e){this.views.renormalizeRow(_52e);this.scroller.rowHeightChanged(_52e);},fastScroll:true,delayScroll:false,scrollRedrawThreshold:(dojo.isIE?100:50),scrollTo:function(_52f){if(!this.fastScroll){this.setScrollTop(_52f);return;}var _530=Math.abs(this.lastScrollTop-_52f);this.lastScrollTop=_52f;if(_530>this.scrollRedrawThreshold||this.delayScroll){this.delayScroll=true;this.scrollTop=_52f;this.views.setScrollTop(_52f);if(this._pendingScroll){window.clearTimeout(this._pendingScroll);}var _531=this;this._pendingScroll=window.setTimeout(function(){delete _531._pendingScroll;_531.finishScrollJob();},200);}else{this.setScrollTop(_52f);}},finishScrollJob:function(){this.delayScroll=false;this.setScrollTop(this.scrollTop);},setScrollTop:function(_532){this.scroller.scroll(this.views.setScrollTop(_532));},scrollToRow:function(_533){this.setScrollTop(this.scroller.findScrollTop(_533)+1);},styleRowNode:function(_534,_535){if(_535){this.rows.styleRowNode(_534,_535);}},_mouseOut:function(e){this.rows.setOverRow(-2);},getCell:function(_536){return this.layout.cells[_536];},setCellWidth:function(_537,_538){this.getCell(_537).unitWidth=_538;},getCellName:function(_539){return "Cell "+_539.index;},canSort:function(_53a){},sort:function(){},getSortAsc:function(_53b){_53b=_53b==undefined?this.sortInfo:_53b;return Boolean(_53b>0);},getSortIndex:function(_53c){_53c=_53c==undefined?this.sortInfo:_53c;return Math.abs(_53c)-1;},setSortIndex:function(_53d,_53e){var si=_53d+1;if(_53e!=undefined){si*=(_53e?1:-1);}else{if(this.getSortIndex()==_53d){si=-this.sortInfo;}}this.setSortInfo(si);},setSortInfo:function(_53f){if(this.canSort(_53f)){window.callFromSortHeaderClick=true;this.sortInfo=_53f;this.sort();this.update();setTimeout(function(){window.callFromSortHeaderClick=false;},5000);}},doKeyEvent:function(e){e.dispatch="do"+e.type;this.onKeyEvent(e);},_dispatch:function(m,e){if(m in this){return this[m](e);}return false;},dispatchKeyEvent:function(e){this._dispatch(e.dispatch,e);},dispatchContentEvent:function(e){this.edit.dispatchEvent(e)||e.sourceView.dispatchContentEvent(e)||this._dispatch(e.dispatch,e);},dispatchHeaderEvent:function(e){e.sourceView.dispatchHeaderEvent(e)||this._dispatch("doheader"+e.type,e);},dokeydown:function(e){this.onKeyDown(e);},doclick:function(e){if(e.cellNode){this.onCellClick(e);}else{this.onRowClick(e);}},dodblclick:function(e){if(e.cellNode){this.onCellDblClick(e);}else{this.onRowDblClick(e);}},docontextmenu:function(e){if(e.cellNode){this.onCellContextMenu(e);}else{this.onRowContextMenu(e);}},doheaderclick:function(e){if(e.cellNode){this.onHeaderCellClick(e);}else{this.onHeaderClick(e);}},doheaderdblclick:function(e){if(e.cellNode){this.onHeaderCellDblClick(e);}else{this.onHeaderDblClick(e);}},doheadercontextmenu:function(e){if(e.cellNode){this.onHeaderCellContextMenu(e);}else{this.onHeaderContextMenu(e);}},doStartEdit:function(_540,_541){this.onStartEdit(_540,_541);},doApplyCellEdit:function(_542,_543,_544){this.onApplyCellEdit(_542,_543,_544);},doCancelEdit:function(_545){this.onCancelEdit(_545);},doApplyEdit:function(_546){this.onApplyEdit(_546);},addRow:function(){this.updateRowCount(this.get("rowCount")+1);},removeSelectedRows:function(){if(this.allItemsSelected){this.updateRowCount(0);}else{this.updateRowCount(Math.max(0,this.get("rowCount")-this.selection.getSelected().length));}this.selection.clear();}});dojox.grid._Grid.markupFactory=function(_547,node,ctor,_548){var d=dojo;var _549=function(n){var w=d.attr(n,"width")||"auto";if((w!="auto")&&(w.slice(-2)!="em")&&(w.slice(-1)!="%")){w=parseInt(w,10)+"px";}return w;};if(!_547.structure&&node.nodeName.toLowerCase()=="table"){_547.structure=d.query("> colgroup",node).map(function(cg){var sv=d.attr(cg,"span");var v={noscroll:(d.attr(cg,"noscroll")=="true")?true:false,__span:(!!sv?parseInt(sv,10):1),cells:[]};if(d.hasAttr(cg,"width")){v.width=_549(cg);}return v;});if(!_547.structure.length){_547.structure.push({__span:Infinity,cells:[]});}d.query("thead > tr",node).forEach(function(tr,_54a){var _54b=0;var _54c=0;var _54d;var _54e=null;d.query("> th",tr).map(function(th){if(!_54e){_54d=0;_54e=_547.structure[0];}else{if(_54b>=(_54d+_54e.__span)){_54c++;_54d+=_54e.__span;var _54f=_54e;_54e=_547.structure[_54c];}}var cell={name:d.trim(d.attr(th,"name")||th.innerHTML),colSpan:parseInt(d.attr(th,"colspan")||1,10),type:d.trim(d.attr(th,"cellType")||""),id:d.trim(d.attr(th,"id")||"")};_54b+=cell.colSpan;var _550=d.attr(th,"rowspan");if(_550){cell.rowSpan=_550;}if(d.hasAttr(th,"width")){cell.width=_549(th);}if(d.hasAttr(th,"relWidth")){cell.relWidth=window.parseInt(dojo.attr(th,"relWidth"),10);}if(d.hasAttr(th,"hidden")){cell.hidden=(d.attr(th,"hidden")=="true"||d.attr(th,"hidden")===true);}if(_548){_548(th,cell);}cell.type=cell.type?dojo.getObject(cell.type):dojox.grid.cells.Cell;if(cell.type&&cell.type.markupFactory){cell.type.markupFactory(th,cell);}if(!_54e.cells[_54a]){_54e.cells[_54a]=[];}_54e.cells[_54a].push(cell);});});}return new ctor(_547,node);};})();}if(!dojo._hasResource["dojox.grid.DataSelection"]){dojo._hasResource["dojox.grid.DataSelection"]=true;dojo.provide("dojox.grid.DataSelection");dojo.declare("dojox.grid.DataSelection",dojox.grid.Selection,{getFirstSelected:function(){var idx=dojox.grid.Selection.prototype.getFirstSelected.call(this);if(idx==-1){return null;}return this.grid.getItem(idx);},getNextSelected:function(_551){var _552=this.grid.getItemIndex(_551);var idx=dojox.grid.Selection.prototype.getNextSelected.call(this,_552);if(idx==-1){return null;}return this.grid.getItem(idx);},getSelected:function(){var _553=[];if(!Object.keys){Object.keys=(function(){var _554=Object.prototype.hasOwnProperty,_555=!({toString:null}).propertyIsEnumerable("toString"),_556=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],_557=_556.length;return function(obj){if(typeof obj!=="function"&&(typeof obj!=="object"||obj===null)){throw new TypeError("Object.keys called on non-object");}var _558=[],prop,i;for(prop in obj){if(_554.call(obj,prop)){_558.push(prop);}}if(_555){for(i=0;i<_557;i++){if(_554.call(obj,_556[i])){_558.push(_556[i]);}}}return _558;};}());}if(!Object.entries){Object.entries=function(obj){var _559=Object.keys(obj),i=_559.length,_55a=new Array(i);while(i--){_55a[i]=[_559[i],obj[_559[i]]];}return _55a;};}if(this.grid.multipleSelectItems&&Object.entries(this.grid.multipleSelectItems).length!=0){for(var _55b in this.grid.multipleSelectItems){_553.push(this.grid.multipleSelectItems[_55b]);}}else{for(var i=0,l=this.selected.length;i<l;i++){if(this.selected[i]){_553.push(this.grid.getItem(i));}}}return _553;},addToSelection:function(_55c){if(this.mode=="none"){return;}var idx=null,_55d="";if(typeof _55c=="number"||typeof _55c=="string"){idx=_55c;}else{idx=this.grid.getItemIndex(_55c);}dojox.grid.Selection.prototype.addToSelection.call(this,idx);if(this.grid.getItem(idx)&&this.grid.getItem(idx).i){if(this.grid.getItem(idx).i.ref_id){_55d=this.grid.getItem(idx).i.ref_id;}if(this.grid.getItem(idx).i.tnx_id){_55d+="_"+this.grid.getItem(idx).i.tnx_id;}if(this.grid.getItem(idx).loan_alias){_55d=this.grid.getItem(idx).loan_alias;}}if(this.grid.multipleSelectItems&&!this.grid.multipleSelectItems.hasOwnProperty(_55d)&&this.grid.getItem(idx).i){this.grid.multipleSelectItems[_55d]=this.grid.getItem(idx);}},deselect:function(_55e){if(this.mode=="none"){return;}var idx=null;var idx=null,_55f="";if(typeof _55e=="number"||typeof _55e=="string"){idx=_55e;}else{idx=this.grid.getItemIndex(_55e);}dojox.grid.Selection.prototype.deselect.call(this,idx);if(this.grid.getItem(idx)&&this.grid.getItem(idx).i){if(this.grid.getItem(idx).i.ref_id){_55f=this.grid.getItem(idx).i.ref_id;}if(this.grid.getItem(idx).i.tnx_id){_55f+="_"+this.grid.getItem(idx).i.tnx_id;}if(this.grid.getItem(idx).loan_alias){_55f=this.grid.getItem(idx).loan_alias;}}if(!this.selected[idx]&&this.grid.multipleSelectItems&&this.grid.multipleSelectItems.hasOwnProperty(_55f)){delete this.grid.multipleSelectItems[_55f];}},deselectAll:function(_560){var idx=null;if(_560||typeof _560=="number"){if(typeof _560=="number"||typeof _560=="string"){idx=_560;}else{idx=this.grid.getItemIndex(_560);}dojox.grid.Selection.prototype.deselectAll.call(this,idx);}else{this.inherited(arguments);}}});}if(!dojo._hasResource["dojox.grid.DataGrid"]){dojo._hasResource["dojox.grid.DataGrid"]=true;dojo.provide("dojox.grid.DataGrid");dojo.declare("dojox.grid.DataGrid",dojox.grid._Grid,{store:null,query:null,queryOptions:null,fetchText:"...",sortFields:null,updateDelay:1,items:null,_store_connects:null,_by_idty:null,_by_idx:null,_cache:null,_pages:null,_pending_requests:null,_bop:-1,_eop:-1,_requests:0,rowCount:0,_isLoaded:false,_isLoading:false,postCreate:function(){this._pages=[];this._store_connects=[];this._by_idty={};this._by_idx=[];this._cache=[];this._pending_requests={};this._setStore(this.store);this.inherited(arguments);},createSelection:function(){this.selection=new dojox.grid.DataSelection(this);},get:function(_561,_562){if(_562&&this.field=="_item"&&!this.fields){return _562;}else{if(_562&&this.fields){var ret=[];var s=this.grid.store;dojo.forEach(this.fields,function(f){ret=ret.concat(s.getValues(_562,f));});return ret;}else{if(!_562&&typeof _561==="string"){return this.inherited(arguments);}}}return (!_562?this.defaultValue:(!this.field?this.value:(this.field=="_item"?_562:this.grid.store.getValue(_562,this.field))));},_checkUpdateStatus:function(){if(this.updateDelay>0){var _563=false;if(this._endUpdateDelay){clearTimeout(this._endUpdateDelay);delete this._endUpdateDelay;_563=true;}if(!this.updating){this.beginUpdate();_563=true;}if(_563){var _564=this;this._endUpdateDelay=setTimeout(function(){delete _564._endUpdateDelay;_564.endUpdate();},this.updateDelay);}}},_onSet:function(item,_565,_566,_567){this._checkUpdateStatus();var idx=this.getItemIndex(item);if(idx>-1){this.updateRow(idx);}},_createItem:function(item,_568){var idty=this._hasIdentity?this.store.getIdentity(item):dojo.toJson(this.query)+":idx:"+_568+":sort:"+dojo.toJson(this.getSortProps());var o=this._by_idty[idty]={idty:idty,item:item};return o;},_addItem:function(item,_569,_56a){this._by_idx[_569]=this._createItem(item,_569);if(!_56a){this.updateRow(_569);}},_onNew:function(item,_56b){this._checkUpdateStatus();var _56c=this.get("rowCount");this._addingItem=true;this.updateRowCount(_56c+1);this._addingItem=false;this._addItem(item,_56c);this.showMessage();},_onDelete:function(item){this._checkUpdateStatus();var idx=this._getItemIndex(item,true);if(item.attachment_id){var _56d=false;misys.xhrPost({url:misys.getServletURL("/screen/AjaxScreen/action/DeleteAttachmentById"),handleAs:"json",sync:true,content:{attachmentId:item.attachment_id},load:function(_56e,args){_56d=_56e.isDeleted;_isError=false;},error:function(_56f,args){console.error("Technical error while deleting attachment");console.error(_56f);_isError=true;misys._config=misys._config||{};}});}if(idx>=0){this._pages=[];this._bop=-1;this._eop=-1;var o=this._by_idx[idx];this._by_idx.splice(idx,1);delete this._by_idty[o.idty];this.updateRowCount(this.get("rowCount")-1);if(this.get("rowCount")===0){this.showMessage(this.noDataMessage);}}},_onRevert:function(){this._refresh();},setStore:function(_570,_571,_572){this._setQuery(_571,_572);this._setStore(_570);this._refresh(true);},setQuery:function(_573,_574){this._setQuery(_573,_574);this._refresh(true);},setItems:function(_575){this.items=_575;this._setStore(this.store);this._refresh(true);},_setQuery:function(_576,_577){this.query=_576;this.queryOptions=_577||this.queryOptions;},_setStore:function(_578){if(this.store&&this._store_connects){dojo.forEach(this._store_connects,this.disconnect,this);}this.store=_578;if(this.store){var f=this.store.getFeatures();var h=[];this._canEdit=!!f["dojo.data.api.Write"]&&!!f["dojo.data.api.Identity"];this._hasIdentity=!!f["dojo.data.api.Identity"];if(!!f["dojo.data.api.Notification"]&&!this.items){h.push(this.connect(this.store,"onSet","_onSet"));h.push(this.connect(this.store,"onNew","_onNew"));h.push(this.connect(this.store,"onDelete","_onDelete"));}if(this._canEdit){h.push(this.connect(this.store,"revert","_onRevert"));}this._store_connects=h;}},_onFetchBegin:function(size,req){if(!this.scroller){return;}if(this.rowCount!=size){if(req.isRender){this.scroller.init(size,this.keepRows,this.rowsPerPage);this.rowCount=size;this._setAutoHeightAttr(this.autoHeight,true);this._skipRowRenormalize=true;this.prerender();this._skipRowRenormalize=false;}else{this.updateRowCount(size);}}if(size<1){this.views.render();this._resize();this.showMessage(this.noDataMessage);this.focus.initFocusView();}else{this.showMessage();}},_onFetchComplete:function(_579,req){if(!this.scroller){return;}if(_579&&_579.length>0){dojo.forEach(_579,function(item,idx){this._addItem(item,req.start+idx,true);},this);this.updateRows(req.start,_579.length);if(req.isRender){this.setScrollTop(0);this.postrender();}else{if(this._lastScrollTop){this.setScrollTop(this._lastScrollTop);}}}delete this._lastScrollTop;if(!this._isLoaded){this._isLoading=false;this._isLoaded=true;}this._pending_requests[req.start]=false;},_onFetchError:function(err,req){delete this._lastScrollTop;if(!this._isLoaded){this._isLoading=false;this._isLoaded=true;this.showMessage(this.errorMessage);}this._pending_requests[req.start]=false;this.onFetchError(err,req);},onFetchError:function(err,req){},_fetch:function(_57a,_57b){_57a=_57a||0;if(this.store&&!this._pending_requests[_57a]){if(!this._isLoaded&&!this._isLoading){this._isLoading=true;this.showMessage(this.loadingMessage);}this._pending_requests[_57a]=true;try{if(this.items){var _57c=this.items;var _57d=this.store;this.rowsPerPage=_57c.length;var req={start:_57a,count:this.rowsPerPage,isRender:_57b};this._onFetchBegin(_57c.length,req);var _57e=0;dojo.forEach(_57c,function(i){if(!_57d.isItemLoaded(i)){_57e++;}});if(_57e===0){this._onFetchComplete(_57c,req);}else{var _57f=function(item){_57e--;if(_57e===0){this._onFetchComplete(_57c,req);}};dojo.forEach(_57c,function(i){if(!_57d.isItemLoaded(i)){_57d.loadItem({item:i,onItem:_57f,scope:this});}},this);}}else{this.store.fetch({start:_57a,count:this.rowsPerPage,query:this.query,sort:this.getSortProps(),queryOptions:this.queryOptions,isRender:_57b,onBegin:dojo.hitch(this,"_onFetchBegin"),onComplete:dojo.hitch(this,"_onFetchComplete"),onError:dojo.hitch(this,"_onFetchError")});}}catch(e){this._onFetchError(e,{start:_57a,count:this.rowsPerPage});}}},_clearData:function(){this.updateRowCount(0);this._by_idty={};this._by_idx=[];this._pages=[];this._bop=this._eop=-1;this._isLoaded=false;this._isLoading=false;},getItem:function(idx){var data=this._by_idx[idx];if(!data||(data&&!data.item)){this._preparePage(idx);return null;}return data.item;},getItemIndex:function(item){return this._getItemIndex(item,false);},_getItemIndex:function(item,_580){if(!_580&&!this.store.isItem(item)){return -1;}var idty=this._hasIdentity?this.store.getIdentity(item):null;for(var i=0,l=this._by_idx.length;i<l;i++){var d=this._by_idx[i];if(d&&((idty&&d.idty==idty)||(d.item===item))){return i;}}return -1;},filter:function(_581,_582){this.query=_581;if(_582){this._clearData();}this._fetch();},_getItemAttr:function(idx,attr){var item=this.getItem(idx);return (!item?this.fetchText:this.store.getValue(item,attr));},_render:function(){if(this.domNode.parentNode){this.scroller.init(this.get("rowCount"),this.keepRows,this.rowsPerPage);this.prerender();this._fetch(0,true);}},_requestsPending:function(_583){return this._pending_requests[_583];},_rowToPage:function(_584){return (this.rowsPerPage?Math.floor(_584/this.rowsPerPage):_584);},_pageToRow:function(_585){return (this.rowsPerPage?this.rowsPerPage*_585:_585);},_preparePage:function(_586){if((_586<this._bop||_586>=this._eop)&&!this._addingItem){var _587=this._rowToPage(_586);this._needPage(_587);this._bop=_587*this.rowsPerPage;this._eop=this._bop+(this.rowsPerPage||this.get("rowCount"));}},_needPage:function(_588){if(!this._pages[_588]){this._pages[_588]=true;this._requestPage(_588);}},_requestPage:function(_589){var row=this._pageToRow(_589);var _58a=Math.min(this.rowsPerPage,this.get("rowCount")-row);if(_58a>0){this._requests++;if(!this._requestsPending(row)){setTimeout(dojo.hitch(this,"_fetch",row,false),1);}}},getCellName:function(_58b){return _58b.field;},_refresh:function(_58c){this._clearData();this._fetch(0,_58c);},sort:function(){this.edit.apply();this._lastScrollTop=this.scrollTop;this._refresh();},canSort:function(){return (!this._isLoading);},getSortProps:function(){var c=this.getCell(this.getSortIndex());if(!c){if(this.sortFields){return this.sortFields;}return null;}else{var desc=c["sortDesc"];var si=!(this.sortInfo>0);if(typeof desc=="undefined"){desc=si;}else{desc=si?!desc:desc;}return [{attribute:c.field,descending:desc}];}},styleRowState:function(_58d){if(this.store&&this.store.getState){var _58e=this.store.getState(_58d.index),c="";for(var i=0,ss=["inflight","error","inserting"],s;s=ss[i];i++){if(_58e[s]){c=" dojoxGridRow-"+s;break;}}_58d.customClasses+=c;}},onStyleRow:function(_58f){this.styleRowState(_58f);this.inherited(arguments);},canEdit:function(_590,_591){return this._canEdit;},_copyAttr:function(idx,attr){var row={};var _592={};var src=this.getItem(idx);return this.store.getValue(src,attr);},doStartEdit:function(_593,_594){if(!this._cache[_594]){this._cache[_594]=this._copyAttr(_594,_593.field);}this.onStartEdit(_593,_594);},doApplyCellEdit:function(_595,_596,_597){this.store.fetchItemByIdentity({identity:this._by_idx[_596].idty,onItem:dojo.hitch(this,function(item){var _598=this.store.getValue(item,_597);if(typeof _598=="number"){_595=isNaN(_595)?_595:parseFloat(_595);}else{if(typeof _598=="boolean"){_595=_595=="true"?true:_595=="false"?false:_595;}else{if(_598 instanceof Date){var _599=new Date(_595);_595=isNaN(_599.getTime())?_595:_599;}}}this.store.setValue(item,_597,_595);this.onApplyCellEdit(_595,_596,_597);})});},doCancelEdit:function(_59a){var _59b=this._cache[_59a];if(_59b){this.updateRow(_59a);delete this._cache[_59a];}this.onCancelEdit.apply(this,arguments);},doApplyEdit:function(_59c,_59d){var _59e=this._cache[_59c];this.onApplyEdit(_59c);},removeSelectedRows:function(){if(this._canEdit){this.edit.apply();var fx=dojo.hitch(this,function(_59f){if(_59f.length){dojo.forEach(_59f,this.store.deleteItem,this.store);this.selection.clear();}});if(this.allItemsSelected){this.store.fetch({query:this.query,queryOptions:this.queryOptions,onComplete:fx});}else{fx(this.selection.getSelected());}}}});dojox.grid.DataGrid.cell_markupFactory=function(_5a0,node,_5a1){var _5a2=dojo.trim(dojo.attr(node,"field")||"");if(_5a2){_5a1.field=_5a2;}_5a1.field=_5a1.field||_5a1.name;var _5a3=dojo.trim(dojo.attr(node,"fields")||"");if(_5a3){_5a1.fields=_5a3.split(",");}if(_5a0){_5a0(node,_5a1);}};dojox.grid.DataGrid.markupFactory=function(_5a4,node,ctor,_5a5){return dojox.grid._Grid.markupFactory(_5a4,node,ctor,dojo.partial(dojox.grid.DataGrid.cell_markupFactory,_5a5));};}if(!dojo._hasResource["dojox.grid.enhanced._Events"]){dojo._hasResource["dojox.grid.enhanced._Events"]=true;dojo.provide("dojox.grid.enhanced._Events");dojo.declare("dojox.grid.enhanced._Events",null,{_events:null,headerCellActiveClass:"dojoxGridHeaderActive",cellActiveClass:"dojoxGridCellActive",rowActiveClass:"dojoxGridRowActive",constructor:function(_5a6){this._events=new dojox.grid._Events();for(var p in this._events){if(!this[p]){this.p=this._events.p;}}_5a6.mixin(_5a6,this);},dokeyup:function(e){this.focus.currentArea().keyup(e);},onKeyDown:function(e){if(e.altKey||e.metaKey){return;}var dk=dojo.keys;var _5a7=this.focus;switch(e.keyCode){case dk.TAB:if(e.ctrlKey){return;}_5a7.tab(e.shiftKey?-1:1,e);break;case dk.UP_ARROW:case dk.DOWN_ARROW:_5a7.currentArea().move(e.keyCode==dk.UP_ARROW?-1:1,0,e);break;case dk.LEFT_ARROW:case dk.RIGHT_ARROW:var _5a8=(e.keyCode==dk.LEFT_ARROW)?1:-1;if(dojo._isBodyLtr()){_5a8*=-1;}_5a7.currentArea().move(0,_5a8,e);break;case dk.F10:if(this.menus&&e.shiftKey){this.onRowContextMenu(e);}break;case dk.ENTER:if(window.isAccessibilityEnabled&&e.grid&&dojo.attr(e.grid.domNode,"data-row-click-set")&&dojo.attr(e.grid.domNode,"data-row-click-set")==="true"){if(!this.edit.isEditing()){colIdx=this.focus.getHeaderIndex();if(colIdx>=0){this.setSortIndex(colIdx);break;}else{this.selection.clickSelect(this.focus.rowIndex,dojo.isCopyKey(e),e.shiftKey);}dojo.stopEvent(e);}if(!e.shiftKey){var _5a9=this.edit.isEditing();this.edit.apply();if(!_5a9){this.edit.setEditCell(this.focus.cell,this.focus.rowIndex);}}if(!this.edit.isEditing()){var _5aa=this.focus.focusView||this.views.views[0];_5aa.content.decorateEvent(e);this.onRowClick(e);dojo.stopEvent(e);}break;}else{_5a7.currentArea().keydown(e);break;}default:_5a7.currentArea().keydown(e);break;}},domouseup:function(e){if(e.cellNode){this.onMouseUp(e);}else{this.onRowSelectorMouseUp(e);}},domousedown:function(e){if(!e.cellNode){this.onRowSelectorMouseDown(e);}},onMouseUp:function(e){this[e.rowIndex==-1?"onHeaderCellMouseUp":"onCellMouseUp"](e);},onCellMouseDown:function(e){dojo.addClass(e.cellNode,this.cellActiveClass);dojo.addClass(e.rowNode,this.rowActiveClass);},onCellMouseUp:function(e){dojo.removeClass(e.cellNode,this.cellActiveClass);dojo.removeClass(e.rowNode,this.rowActiveClass);},onCellClick:function(e){this._events.onCellClick.call(this,e);this.focus.contentMouseEvent(e);},onCellDblClick:function(e){if(this.pluginMgr.isFixedCell(e.cell)){return;}if(this._click.length>1&&(!this._click[0]||!this._click[1])){this._click[0]=this._click[1]=e;}this._events.onCellDblClick.call(this,e);},onRowClick:function(e){this.edit.rowClick(e);if(!e.cell||(!e.cell.isRowSelector&&(!this.rowSelectCell||!this.rowSelectCell.disabled(e.rowIndex)))){this.selection.clickSelectEvent(e);}},onRowContextMenu:function(e){if(!this.edit.isEditing()&&this.menus){this.showMenu(e);}},onSelectedRegionContextMenu:function(e){if(this.selectedRegionMenu){this.selectedRegionMenu._openMyself({target:e.target,coords:e.keyCode!==dojo.keys.F10&&"pageX" in e?{x:e.pageX,y:e.pageY}:null});dojo.stopEvent(e);}},onHeaderCellMouseOut:function(e){if(e.cellNode){dojo.removeClass(e.cellNode,this.cellOverClass);dojo.removeClass(e.cellNode,this.headerCellActiveClass);}},onHeaderCellMouseDown:function(e){if(e.cellNode){dojo.addClass(e.cellNode,this.headerCellActiveClass);}},onHeaderCellMouseUp:function(e){if(e.cellNode){dojo.removeClass(e.cellNode,this.headerCellActiveClass);}},onHeaderCellClick:function(e){this.focus.currentArea("header");if(!e.cell.isRowSelector){this._events.onHeaderCellClick.call(this,e);}this.focus.headerMouseEvent(e);},onRowSelectorMouseDown:function(e){this.focus.focusArea("rowHeader",e);},onRowSelectorMouseUp:function(e){},onMouseUpRow:function(e){if(e.rowIndex!=-1){this.onRowMouseUp(e);}},onRowMouseUp:function(e){}});}if(!dojo._hasResource["dojox.grid.enhanced._FocusManager"]){dojo._hasResource["dojox.grid.enhanced._FocusManager"]=true;dojo.provide("dojox.grid.enhanced._FocusManager");dojo.declare("dojox.grid.enhanced._FocusArea",null,{constructor:function(area,_5ab){this._fm=_5ab;this._evtStack=[area.name];var _5ac=function(){return true;};area.onFocus=area.onFocus||_5ac;area.onBlur=area.onBlur||_5ac;area.onMove=area.onMove||_5ac;area.onKeyUp=area.onKeyUp||_5ac;area.onKeyDown=area.onKeyDown||_5ac;dojo.mixin(this,area);},move:function(_5ad,_5ae,evt){if(this.name){var i,len=this._evtStack.length;for(i=len-1;i>=0;--i){if(this._fm._areas[this._evtStack[i]].onMove(_5ad,_5ae,evt)===false){return false;}}}return true;},_onKeyEvent:function(evt,_5af){if(this.name){var i,len=this._evtStack.length;for(i=len-1;i>=0;--i){if(this._fm._areas[this._evtStack[i]][_5af](evt,false)===false){return false;}}for(i=0;i<len;++i){if(this._fm._areas[this._evtStack[i]][_5af](evt,true)===false){return false;}}}return true;},keydown:function(evt){return this._onKeyEvent(evt,"onKeyDown");},keyup:function(evt){return this._onKeyEvent(evt,"onKeyUp");},contentMouseEventPlanner:function(){return 0;},headerMouseEventPlanner:function(){return 0;}});dojo.declare("dojox.grid.enhanced._FocusManager",dojox.grid._FocusManager,{_stopEvent:function(evt){try{if(evt&&evt.preventDefault){dojo.stopEvent(evt);}}catch(e){}},constructor:function(grid){this.grid=grid;this._areas={};this._areaQueue=[];this._contentMouseEventHandlers=[];this._headerMouseEventHandlers=[];this._currentAreaIdx=-1;this._gridBlured=true;this._connects.push(dojo.connect(grid,"onBlur",this,"_doBlur"));this._connects.push(dojo.connect(grid.scroller,"renderPage",this,"_delayedCellFocus"));this.addArea({name:"header",onFocus:dojo.hitch(this,this.focusHeader),onBlur:dojo.hitch(this,this._blurHeader),onMove:dojo.hitch(this,this._navHeader),getRegions:dojo.hitch(this,this._findHeaderCells),onRegionFocus:dojo.hitch(this,this.doColHeaderFocus),onRegionBlur:dojo.hitch(this,this.doColHeaderBlur),onKeyDown:dojo.hitch(this,this._onHeaderKeyDown)});this.addArea({name:"content",onFocus:dojo.hitch(this,this._focusContent),onBlur:dojo.hitch(this,this._blurContent),onMove:dojo.hitch(this,this._navContent),onKeyDown:dojo.hitch(this,this._onContentKeyDown)});this.addArea({name:"editableCell",onFocus:dojo.hitch(this,this._focusEditableCell),onBlur:dojo.hitch(this,this._blurEditableCell),onKeyDown:dojo.hitch(this,this._onEditableCellKeyDown),onContentMouseEvent:dojo.hitch(this,this._onEditableCellMouseEvent),contentMouseEventPlanner:function(evt,_5b0){return -1;}});this.placeArea("header");this.placeArea("content");this.placeArea("editableCell");this.placeArea("editableCell","above","content");},destroy:function(){for(var name in this._areas){var area=this._areas[name];dojo.forEach(area._connects,dojo.disconnect);area._connects=null;if(area.uninitialize){area.uninitialize();}}this.inherited(arguments);},addArea:function(area){if(area.name&&dojo.isString(area.name)){if(this._areas[area.name]){dojo.forEach(area._connects,dojo.disconnect);}this._areas[area.name]=new dojox.grid.enhanced._FocusArea(area,this);if(area.onHeaderMouseEvent){this._headerMouseEventHandlers.push(area.name);}if(area.onContentMouseEvent){this._contentMouseEventHandlers.push(area.name);}}},getArea:function(_5b1){return this._areas[_5b1];},_bindAreaEvents:function(){var area,hdl,_5b2=this._areas;dojo.forEach(this._areaQueue,function(name){area=_5b2[name];if(!area._initialized&&dojo.isFunction(area.initialize)){area.initialize();area._initialized=true;}if(area.getRegions){area._regions=area.getRegions()||[];dojo.forEach(area._connects||[],dojo.disconnect);area._connects=[];dojo.forEach(area._regions,function(r){if(area.onRegionFocus){hdl=dojo.connect(r,"onfocus",area.onRegionFocus);area._connects.push(hdl);}if(area.onRegionBlur){hdl=dojo.connect(r,"onblur",area.onRegionBlur);area._connects.push(hdl);}});}});},removeArea:function(_5b3){var area=this._areas[_5b3];if(area){this.ignoreArea(_5b3);var i=dojo.indexOf(this._contentMouseEventHandlers,_5b3);if(i>=0){this._contentMouseEventHandlers.splice(i,1);}i=dojo.indexOf(this._headerMouseEventHandlers,_5b3);if(i>=0){this._headerMouseEventHandlers.splice(i,1);}dojo.forEach(area._connects,dojo.disconnect);if(area.uninitialize){area.uninitialize();}delete this._areas[_5b3];}},currentArea:function(_5b4,_5b5){var idx,cai=this._currentAreaIdx;if(dojo.isString(_5b4)&&(idx=dojo.indexOf(this._areaQueue,_5b4))>=0){if(cai!=idx){this.tabbingOut=false;if(_5b5&&cai>=0&&cai<this._areaQueue.length){this._areas[this._areaQueue[cai]].onBlur();}this._currentAreaIdx=idx;}}else{return (cai<0||cai>=this._areaQueue.length)?new dojox.grid.enhanced._FocusArea({},this):this._areas[this._areaQueue[this._currentAreaIdx]];}return null;},placeArea:function(name,pos,_5b6){if(!this._areas[name]){return;}var idx=dojo.indexOf(this._areaQueue,_5b6);switch(pos){case "after":if(idx>=0){++idx;}case "before":if(idx>=0){this._areaQueue.splice(idx,0,name);break;}default:this._areaQueue.push(name);break;case "above":var _5b7=true;case "below":var _5b8=this._areas[_5b6];if(_5b8){if(_5b7){_5b8._evtStack.push(name);}else{_5b8._evtStack.splice(0,0,name);}}}},ignoreArea:function(name){this._areaQueue=dojo.filter(this._areaQueue,function(_5b9){return _5b9!=name;});},focusArea:function(_5ba,evt){var idx;if(typeof _5ba=="number"){idx=_5ba<0?this._areaQueue.length+_5ba:_5ba;}else{idx=dojo.indexOf(this._areaQueue,dojo.isString(_5ba)?_5ba:(_5ba&&_5ba.name));}if(idx<0){idx=0;}var step=idx-this._currentAreaIdx;this._gridBlured=false;if(step){this.tab(step,evt);}else{this.currentArea().onFocus(evt,step);}},tab:function(step,evt){var _5bb=this._currentAreaIdx;this._gridBlured=false;this.tabbingOut=false;if(step===0){return;}var cai=this._currentAreaIdx;var dir=step>0?1:-1;if(cai<0||cai>=this._areaQueue.length){cai=(this._currentAreaIdx+=step);}else{var _5bc=this._areas[this._areaQueue[cai]].onBlur(evt,step);if(_5bc===true){cai=(this._currentAreaIdx+=step);}else{if(dojo.isString(_5bc)&&this._areas[_5bc]){cai=this._currentAreaIdx=dojo.indexOf(this._areaQueue,_5bc);}}}for(;cai>=0&&cai<this._areaQueue.length;cai+=dir){this._currentAreaIdx=cai;if(this._areaQueue[cai]&&this._areas[this._areaQueue[cai]].onFocus(evt,step)){if(_5bb===this._currentAreaIdx&&window.preventTabToPages){var _5bd=cai+dir;if(_5bd<this._areaQueue.length){this._currentAreaIdx=_5bd;cai=_5bd;var _5be=this._areas[this._areaQueue[cai]];if(_5be){}}}return;}}this.tabbingOut=true;if(step<0){this._currentAreaIdx=-1;dijit.focus(this.grid.domNode);}else{this._currentAreaIdx=this._areaQueue.length;dijit.focus(this.grid.lastFocusNode);}},_onMouseEvent:function(type,evt){var _5bf=type.toLowerCase(),_5c0=this["_"+_5bf+"MouseEventHandlers"],res=dojo.map(_5c0,function(_5c1){return {"area":_5c1,"idx":this._areas[_5c1][_5bf+"MouseEventPlanner"](evt,_5c0)};},this).sort(function(a,b){return b.idx-a.idx;}),_5c2=dojo.map(res,function(_5c3){return res.area;}),i=res.length;while(--i>=0){if(this._areas[res[i].area]["on"+type+"MouseEvent"](evt,_5c2)===false){return;}}},contentMouseEvent:function(evt){this._onMouseEvent("Content",evt);},headerMouseEvent:function(evt){this._onMouseEvent("Header",evt);},initFocusView:function(){this.focusView=this.grid.views.getFirstScrollingView()||this.focusView||this.grid.views.views[0];this._bindAreaEvents();},isNavHeader:function(){return this._areaQueue[this._currentAreaIdx]=="header";},previousKey:function(e){this.tab(-1,e);},nextKey:function(e){this.tab(1,e);},setFocusCell:function(_5c4,_5c5){if(_5c4){this.currentArea(this.grid.edit.isEditing()?"editableCell":"content",true);this._focusifyCellNode(false);this.cell=_5c4;this.rowIndex=_5c5;this._focusifyCellNode(true);}this.grid.onCellFocus(this.cell,this.rowIndex);},doFocus:function(e){if(e&&e.target==e.currentTarget&&!this.tabbingOut){if(this._gridBlured){this._gridBlured=false;if(this._currentAreaIdx<0||this._currentAreaIdx>=this._areaQueue.length){this.focusArea(0,e);}else{this.focusArea(this._currentAreaIdx,e);}}}else{this.tabbingOut=false;}dojo.stopEvent(e);},_doBlur:function(){this._gridBlured=true;},doLastNodeFocus:function(e){if(this.tabbingOut){this.tabbingOut=false;}else{this.focusArea(-1,e);}},_delayedHeaderFocus:function(){var _5c6=true;if(window.preventTableHeaderFocus||window.isToPreventTableHeaderFocusAlways||window.isTopElementToBeFocussed){_5c6=!(window.preventTableHeaderFocus||window.isToPreventTableHeaderFocusAlways||window.isTopElementToBeFocussed);}if(_5c6||window.callFromSortHeaderClick){if(this.isNavHeader()){this.focusHeader();}}},_delayedCellFocus:function(){var _5c7=true;if(window.preventTableHeaderFocus||window.isToPreventTableHeaderFocusAlways||window.isTopElementToBeFocussed){_5c7=!(window.preventTableHeaderFocus||window.isToPreventTableHeaderFocusAlways||window.isTopElementToBeFocussed);}if(_5c7){this.currentArea("header",true);this.focusArea(this._currentAreaIdx);}if(window.isAccessibilityEnabled){dojo.query("div>div.dojoxGridRow>table>tbody>tr>td>a>img").forEach(function(_5c8){try{if(dojo.hasAttr(_5c8,"title")&&!dojo.hasAttr(_5c8,"alt")){dojo.attr(_5c8,"alt",dojo.attr(_5c8,"title"));if(!window.isTitleToDisplayInTableImageIcons){dojo.removeAttr(_5c8,"title");}}}catch(exc){}});}},_changeMenuBindNode:function(_5c9,_5ca){var hm=this.grid.headerMenu;if(hm&&this._contextMenuBindNode==_5c9){hm.unBindDomNode(_5c9);hm.bindDomNode(_5ca);this._contextMenuBindNode=_5ca;}},focusHeader:function(evt,step){var _5cb=false;this.inherited(arguments);if(this._colHeadNode&&dojo.style(this._colHeadNode,"display")!="none"){dijit.focus(this._colHeadNode);this._stopEvent(evt);_5cb=true;}return _5cb;},_blurHeader:function(evt,step){if(this._colHeadNode){dojo.removeClass(this._colHeadNode,this.focusClass);}dojo.removeAttr(this.grid.domNode,"aria-activedescendant");this._changeMenuBindNode(this.grid.domNode,this.grid.viewsHeaderNode);this._colHeadNode=this._colHeadFocusIdx=null;return true;},_navHeader:function(_5cc,_5cd,evt){var _5ce=_5cd<0?-1:1,_5cf=dojo.indexOf(this._findHeaderCells(),this._colHeadNode);if(_5cf>=0&&(evt.shiftKey&&evt.ctrlKey)){this.colSizeAdjust(evt,_5cf,_5ce*5);return;}this.move(_5cc,_5cd);},_onHeaderKeyDown:function(e,_5d0){if(_5d0){var dk=dojo.keys;switch(e.keyCode){case dk.ENTER:case dk.SPACE:var _5d1=this.getHeaderIndex();if(_5d1>=0&&!this.grid.pluginMgr.isFixedCell(e.cell)){this.grid.setSortIndex(_5d1,null,e);dojo.stopEvent(e);}break;}}return true;},_setActiveColHeader:function(){this.inherited(arguments);dijit.focus(this._colHeadNode);},findAndFocusGridCell:function(){this._focusContent();},_focusContent:function(evt,step){var _5d2=true;var _5d3=(this.grid.rowCount===0);if(this.isNoFocusCell()&&!_5d3){for(var i=0,cell=this.grid.getCell(0);cell&&cell.hidden;cell=this.grid.getCell(++i)){}this.setFocusIndex(0,cell?i:0);}else{if(this.cell&&!_5d3){if(this.focusView&&!this.focusView.rowNodes[this.rowIndex]){this.grid.scrollToRow(this.rowIndex);this.focusGrid();}else{this.setFocusIndex(this.rowIndex,this.cell.index);}}else{_5d2=false;}}if(_5d2){this._stopEvent(evt);}return _5d2;},_blurContent:function(evt,step){this._focusifyCellNode(false);return true;},_navContent:function(_5d4,_5d5,evt){if((this.rowIndex===0&&_5d4<0)||(this.rowIndex===this.grid.rowCount-1&&_5d4>0)){return;}this._colHeadNode=null;this.move(_5d4,_5d5,evt);if(evt){dojo.stopEvent(evt);}},_onContentKeyDown:function(e,_5d6){if(_5d6){var dk=dojo.keys,s=this.grid.scroller;switch(e.keyCode){case dk.ENTER:case dk.SPACE:var g=this.grid;if(g.indirectSelection||g.misysIndirectSelection){break;}g.selection.clickSelect(this.rowIndex,dojo.isCopyKey(e),e.shiftKey);g.onRowClick(e);dojo.stopEvent(e);break;case dk.PAGE_UP:if(this.rowIndex!==0){if(this.rowIndex!=s.firstVisibleRow+1){this._navContent(s.firstVisibleRow-this.rowIndex,0);}else{this.grid.setScrollTop(s.findScrollTop(this.rowIndex-1));this._navContent(s.firstVisibleRow-s.lastVisibleRow+1,0);}dojo.stopEvent(e);}break;case dk.PAGE_DOWN:if(this.rowIndex+1!=this.grid.rowCount){dojo.stopEvent(e);if(this.rowIndex!=s.lastVisibleRow-1){this._navContent(s.lastVisibleRow-this.rowIndex-1,0);}else{this.grid.setScrollTop(s.findScrollTop(this.rowIndex+1));this._navContent(s.lastVisibleRow-s.firstVisibleRow-1,0);}dojo.stopEvent(e);}break;}}return true;},_blurFromEditableCell:false,_isNavigating:false,_navElems:null,_focusEditableCell:function(evt,step){var _5d7=false;if(this._isNavigating){_5d7=true;}else{if(this.grid.edit.isEditing()&&this.cell){if(this._blurFromEditableCell||!this._blurEditableCell(evt,step)){this.setFocusIndex(this.rowIndex,this.cell.index);_5d7=true;}this._stopEvent(evt);}}return _5d7;},_applyEditableCell:function(){try{this.grid.edit.apply();}catch(e){console.warn("_FocusManager._applyEditableCell() error:",e);}},_blurEditableCell:function(evt,step){this._blurFromEditableCell=false;if(this._isNavigating){var _5d8=true;if(evt){var _5d9=this._navElems;var _5da=_5d9.lowest||_5d9.first;var _5db=_5d9.last||_5d9.highest||_5da;var _5dc=dojo.isIE?evt.srcElement:evt.target;_5d8=_5dc==(step>0?_5db:_5da);}if(_5d8){this._isNavigating=false;return "content";}return false;}else{if(this.grid.edit.isEditing()&&this.cell){if(!step||typeof step!="number"){return false;}var dir=step>0?1:-1;var cc=this.grid.layout.cellCount;for(var cell,col=this.cell.index+dir;col>=0&&col<cc;col+=dir){cell=this.grid.getCell(col);if(cell.editable){this.cell=cell;this._blurFromEditableCell=true;return false;}}if((this.rowIndex>0||dir==1)&&(this.rowIndex<this.grid.rowCount||dir==-1)){this.rowIndex+=dir;for(col=dir>0?0:cc-1;col>=0&&col<cc;col+=dir){cell=this.grid.getCell(col);if(cell.editable){this.cell=cell;break;}}this._applyEditableCell();return "content";}}}return true;},_initNavigatableElems:function(){this._navElems=dijit._getTabNavigable(this.cell.getNode(this.rowIndex));},_onEditableCellKeyDown:function(e,_5dd){var dk=dojo.keys,g=this.grid,edit=g.edit,_5de=false,_5df=true;switch(e.keyCode){case dk.ENTER:if(_5dd&&edit.isEditing()){this._applyEditableCell();_5de=true;dojo.stopEvent(e);}case dk.SPACE:if(!_5dd&&this._isNavigating){_5df=false;break;}if(_5dd){if(!this.cell.editable&&this.cell.navigatable){this._initNavigatableElems();var _5e0=this._navElems.lowest||this._navElems.first;if(_5e0){this._isNavigating=true;dijit.focus(_5e0);dojo.stopEvent(e);this.currentArea("editableCell",true);break;}}if(!_5de&&!edit.isEditing()&&!g.pluginMgr.isFixedCell(this.cell)){edit.setEditCell(this.cell,this.rowIndex);}if(_5de){this.currentArea("content",true);}else{if(this.cell.editable&&g.canEdit()){this.currentArea("editableCell",true);}}}break;case dk.PAGE_UP:case dk.PAGE_DOWN:if(!_5dd&&edit.isEditing()){_5df=false;}break;case dk.ESCAPE:if(!_5dd){edit.cancel();this.currentArea("content",true);}}return _5df;},_onEditableCellMouseEvent:function(evt){if(evt.type=="click"){var cell=this.cell||evt.cell;if(cell&&!cell.editable&&cell.navigatable){this._initNavigatableElems();if(this._navElems.lowest||this._navElems.first){var _5e1=dojo.isIE?evt.srcElement:evt.target;if(_5e1!=cell.getNode(evt.rowIndex)){this._isNavigating=true;this.focusArea("editableCell",evt);dijit.focus(_5e1);return false;}}}else{if(this.grid.singleClickEdit){this.currentArea("editableCell");return false;}}}return true;}});}if(!dojo._hasResource["dojox.grid.enhanced._PluginManager"]){dojo._hasResource["dojox.grid.enhanced._PluginManager"]=true;dojo.provide("dojox.grid.enhanced._PluginManager");dojo.declare("dojox.grid.enhanced._PluginManager",null,{_options:null,_plugins:null,_connects:null,constructor:function(_5e2){this.grid=_5e2;this._store=_5e2.store;this._options={};this._plugins=[];this._connects=[];this._parseProps(this.grid.plugins);_5e2.connect(_5e2,"_setStore",dojo.hitch(this,function(_5e3){if(this._store!==_5e3){this.forEach("onSetStore",[_5e3,this._store]);this._store=_5e3;}}));},startup:function(){this.forEach("onStartUp");},preInit:function(){this.grid.focus.destroy();this.grid.focus=new dojox.grid.enhanced._FocusManager(this.grid);new dojox.grid.enhanced._Events(this.grid);this._init(true);this.forEach("onPreInit");},postInit:function(){this._init(false);dojo.forEach(this.grid.views.views,this._initView,this);this._connects.push(dojo.connect(this.grid.views,"addView",dojo.hitch(this,this._initView)));if(this._plugins.length>0){var edit=this.grid.edit;if(edit){edit.styleRow=function(_5e4){};}}this.forEach("onPostInit");},forEach:function(func,args){dojo.forEach(this._plugins,function(p){if(!p||!p[func]){return;}p[func].apply(p,args?args:[]);});},_parseProps:function(_5e5){if(!_5e5){return;}var p,_5e6={},_5e7=this._options,grid=this.grid;var _5e8=dojox.grid.enhanced._PluginManager.registry;for(p in _5e5){if(_5e5[p]){this._normalize(p,_5e5,_5e8,_5e6);}}if(_5e7.dnd||_5e7.indirectSelection){_5e7.columnReordering=false;}dojo.mixin(grid,_5e7);},_normalize:function(p,_5e9,_5ea,_5eb){if(!_5ea[p]){throw new Error("Plugin "+p+" is required.");}if(_5eb[p]){throw new Error("Recursive cycle dependency is not supported.");}var _5ec=this._options;if(_5ec[p]){return _5ec[p];}_5eb[p]=true;_5ec[p]=dojo.mixin({},_5ea[p],dojo.isObject(_5e9[p])?_5e9[p]:{});var _5ed=_5ec[p]["dependency"];if(_5ed){if(!dojo.isArray(_5ed)){_5ed=_5ec[p]["dependency"]=[_5ed];}dojo.forEach(_5ed,function(_5ee){if(!this._normalize(_5ee,_5e9,_5ea,_5eb)){throw new Error("Plugin "+_5ee+" is required.");}},this);}delete _5eb[p];return _5ec[p];},_init:function(pre){var p,_5ef,_5f0=this._options;for(p in _5f0){_5ef=_5f0[p]["preInit"];if((pre?_5ef:!_5ef)&&_5f0[p]["class"]&&!this.pluginExisted(p)){this.loadPlugin(p);}}},loadPlugin:function(name){var _5f1=this._options[name];if(!_5f1){return null;}var _5f2=this.getPlugin(name);if(_5f2){return _5f2;}var _5f3=_5f1["dependency"];dojo.forEach(_5f3,function(_5f4){if(!this.loadPlugin(_5f4)){throw new Error("Plugin "+_5f4+" is required.");}},this);var cls=_5f1["class"];delete _5f1["class"];_5f2=new this.getPluginClazz(cls)(this.grid,_5f1);this._plugins.push(_5f2);return _5f2;},_initView:function(view){if(!view){return;}dojox.grid.util.funnelEvents(view.contentNode,view,"doContentEvent",["mouseup","mousemove"]);dojox.grid.util.funnelEvents(view.headerNode,view,"doHeaderEvent",["mouseup"]);},pluginExisted:function(name){return !!this.getPlugin(name);},getPlugin:function(name){var _5f5=this._plugins;name=name.toLowerCase();for(var i=0,len=_5f5.length;i<len;i++){if(name==_5f5[i]["name"].toLowerCase()){return _5f5[i];}}return null;},getPluginClazz:function(_5f6){if(dojo.isFunction(_5f6)){return _5f6;}var _5f7="Please make sure Plugin \""+_5f6+"\" is existed.";try{var cls=dojo.getObject(_5f6);if(!cls){throw new Error(_5f7);}return cls;}catch(e){throw new Error(_5f7);}},isFixedCell:function(cell){return cell&&(cell.isRowSelector||cell.fixedPos);},destroy:function(){dojo.forEach(this._connects,dojo.disconnect);this.forEach("destroy");if(this.grid.unwrap){this.grid.unwrap();}delete this._connects;delete this._plugins;delete this._options;}});dojox.grid.enhanced._PluginManager.registerPlugin=function(_5f8,_5f9){if(!_5f8){console.warn("Failed to register plugin, class missed!");return;}var cls=dojox.grid.enhanced._PluginManager;cls.registry=cls.registry||{};cls.registry[_5f8.prototype.name]=dojo.mixin({"class":_5f8},(_5f9?_5f9:{}));};}if(!dojo._hasResource["dojox.grid.enhanced.plugins._SelectionPreserver"]){dojo._hasResource["dojox.grid.enhanced.plugins._SelectionPreserver"]=true;dojo.provide("dojox.grid.enhanced.plugins._SelectionPreserver");dojo.declare("dojox.grid.enhanced.plugins._SelectionPreserver",null,{_connects:[],constructor:function(_5fa){this.selection=_5fa;var grid=this.grid=_5fa.grid;grid.onSelectedById=this.onSelectedById;this.reset();var _5fb=grid._clearData;var _5fc=this;grid._clearData=function(){_5fc._updateMapping(!grid._noInternalMapping);_5fc._trustSelection=[];_5fb.apply(grid,arguments);};this.connect(grid,"_setStore","reset");this.connect(grid,"_addItem","_reSelectById");this.connect(_5fa,"addToSelection",dojo.hitch(this,"_selectById",true));this.connect(_5fa,"deselect",dojo.hitch(this,"_selectById",false));this.connect(_5fa,"selectRange",dojo.hitch(this,"_updateMapping",true,true,false));this.connect(_5fa,"deselectRange",dojo.hitch(this,"_updateMapping",true,false,false));this.connect(_5fa,"deselectAll",dojo.hitch(this,"_updateMapping",true,false,true));},destroy:function(){this.reset();dojo.forEach(this._connects,dojo.disconnect);delete this._connects;},connect:function(obj,_5fd,_5fe){var conn=dojo.connect(obj,_5fd,this,_5fe);this._connects.push(conn);return conn;},reset:function(){this._idMap=[];this._selectedById={};this._trustSelection=[];this._defaultSelected=false;},_reSelectById:function(item,_5ff){var s=this.selection,g=this.grid;if(item&&g._hasIdentity){var id=g.store.getIdentity(item);if(this._selectedById[id]===undefined){if(!this._trustSelection[_5ff]){s.selected[_5ff]=this._defaultSelected;}}else{s.selected[_5ff]=this._selectedById[id];}this._idMap.push(id);g.onSelectedById(id,_5ff,s.selected[_5ff]);}},_selectById:function(_600,_601){if(this.selection.mode=="none"||!this.grid._hasIdentity){return;}var item=_601;if(typeof _601=="number"||typeof _601=="string"){var _602=this.grid._by_idx[_601];item=_602&&_602.item;}if(item){var id=this.grid.store.getIdentity(item);this._selectedById[id]=!!_600;}else{this._trustSelection[_601]=true;}},onSelectedById:function(id,_603,_604){},_updateMapping:function(_605,_606,_607,from,to){var s=this.selection,g=this.grid,flag=0,_608=0,i,id;for(i=g.rowCount-1;i>=0;--i){if(!g._by_idx[i]){++_608;flag+=s.selected[i]?1:-1;}else{id=g._by_idx[i].idty;if(id&&(_605||this._selectedById[id]===undefined)){this._selectedById[id]=!!s.selected[i];}}}if(_608){this._defaultSelected=flag>0;}if(!_607&&from!==undefined&&to!==undefined){_607=!g.usingPagination&&Math.abs(to-from+1)===g.rowCount;}if(_607&&!g.usingPagination){for(i=this._idMap.length;i>=0;--i){this._selectedById[this._idMap[i]]=_606;}}}});}if(!dojo._hasResource["dojox.grid.EnhancedGrid"]){dojo._hasResource["dojox.grid.EnhancedGrid"]=true;dojo.provide("dojox.grid.EnhancedGrid");dojo.experimental("dojox.grid.EnhancedGrid");dojo.declare("dojox.grid.EnhancedGrid",dojox.grid.DataGrid,{plugins:null,noSortColumnIndex:null,multipleSelectItems:new Object(),pluginMgr:null,keepSelection:false,domIdArray:null,jsonArray:null,_pluginMgrClass:dojox.grid.enhanced._PluginManager,postMixInProperties:function(){this._nls=dojo.i18n.getLocalization("dojox.grid.enhanced","EnhancedGrid",this.lang);this.inherited(arguments);},postCreate:function(){this.pluginMgr=new this._pluginMgrClass(this);this.pluginMgr.preInit();this.inherited(arguments);this.pluginMgr.postInit();if(window.isAccessibilityEnabled){dojo.connect(this,"onCellFocus",function(cell,_609){if(cell.headerSelector){var _60a=cell.view.getCellNode(_609,cell.index);if(_60a){dojo.attr(_60a,"aria-describedby",cell.grid.id+"_rowSelector_"+_609+"_a11y_text");}}cell.navigatable="true";});}},plugin:function(name){return this.pluginMgr.getPlugin(name);},startup:function(){this.inherited(arguments);this.pluginMgr.startup();},createSelection:function(){this.selection=new dojox.grid.enhanced.DataSelection(this);},canSort:function(_60b,_60c){return true;},doKeyEvent:function(e){try{var view=this.focus.focusView;view.content.decorateEvent(e);if(!e.cell){view.header.decorateEvent(e);}}catch(e){}this.inherited(arguments);},doApplyCellEdit:function(_60d,_60e,_60f){if(!_60f){this.invalidated[_60e]=true;return;}this.inherited(arguments);},mixin:function(_610,_611){var _612={};for(var p in _611){if(p=="_inherited"||p=="declaredClass"||p=="constructor"||_611["privates"]&&_611["privates"][p]){continue;}_612[p]=_611[p];}dojo.mixin(_610,_612);},_copyAttr:function(idx,attr){if(!attr){return;}return this.inherited(arguments);},_getHeaderHeight:function(){this.inherited(arguments);return dojo.marginBox(this.viewsHeaderNode).h;},_fetch:function(_613,_614){if(this.items){return this.inherited(arguments);}_613=_613||0;if(this.store&&!this._pending_requests[_613]){if(!this._isLoaded&&!this._isLoading){this._isLoading=true;this.showMessage(this.loadingMessage);}this._pending_requests[_613]=true;try{var req={start:_613,count:this.rowsPerPage,query:this.query,sort:this.getSortProps(),queryOptions:this.queryOptions,isRender:_614,onBegin:dojo.hitch(this,"_onFetchBegin"),onComplete:dojo.hitch(this,"_onFetchComplete"),onError:dojo.hitch(this,"_onFetchError")};this._storeLayerFetch(req);}catch(e){this._onFetchError(e,{start:_613,count:this.rowsPerPage});}}return 0;},_storeLayerFetch:function(req){this.store.fetch(req);},getCellByField:function(_615){return dojo.filter(this.layout.cells,function(cell){return cell.field==_615;})[0];},onMouseUp:function(e){},createView:function(){var view=this.inherited(arguments);if(dojo.isMoz){var _616=function(_617,_618){for(var n=_617;n&&_618(n);n=n.parentNode){}return n;};var _619=function(_61a){var name=_61a.toUpperCase();return function(node){return node.tagName!=name;};};var func=view.header.getCellX;view.header.getCellX=function(e){var x=func.call(view.header,e);var n=_616(e.target,_619("th"));if(n&&n!==e.target&&dojo.isDescendant(e.target,n)){x+=n.firstChild.offsetLeft;}return x;};}return view;},destroy:function(){delete this._nls;this.selection.destroy();this.pluginMgr.destroy();this.inherited(arguments);}});dojo.provide("dojox.grid.enhanced.DataSelection");dojo.declare("dojox.grid.enhanced.DataSelection",dojox.grid.DataSelection,{constructor:function(grid){if(grid.keepSelection){this.preserver=new dojox.grid.enhanced.plugins._SelectionPreserver(this);}},_range:function(_61b,inTo){this.grid._selectingRange=true;this.inherited(arguments);this.grid._selectingRange=false;this.onChanged();},deselectAll:function(_61c){this.grid._selectingRange=true;this.inherited(arguments);this.grid._selectingRange=false;this.onChanged();},destroy:function(){if(this.preserver){this.preserver.destroy();}}});dojox.grid.EnhancedGrid.markupFactory=function(_61d,node,ctor,_61e){return dojox.grid._Grid.markupFactory(_61d,node,ctor,dojo.partial(dojox.grid.DataGrid.cell_markupFactory,_61e));};dojox.grid.EnhancedGrid.registerPlugin=function(_61f,_620){dojox.grid.enhanced._PluginManager.registerPlugin(_61f,_620);};}if(!dojo._hasResource["dijit._TimePicker"]){dojo._hasResource["dijit._TimePicker"]=true;dojo.provide("dijit._TimePicker");dojo.declare("dijit._TimePicker",[dijit._Widget,dijit._Templated],{templateString:dojo.cache("dijit","templates/TimePicker.html","<div id=\"widget_${id}\" class=\"dijitMenu\"\n    ><div dojoAttachPoint=\"upArrow\" class=\"dijitButtonNode dijitUpArrowButton\" dojoAttachEvent=\"onmouseenter:_buttonMouse,onmouseleave:_buttonMouse\"\n\t\t><div class=\"dijitReset dijitInline dijitArrowButtonInner\" role=\"presentation\">&nbsp;</div\n\t\t><div class=\"dijitArrowButtonChar\">&#9650;</div></div\n    ><div dojoAttachPoint=\"timeMenu,focusNode\" dojoAttachEvent=\"onclick:_onOptionSelected,onmouseover,onmouseout\"></div\n    ><div dojoAttachPoint=\"downArrow\" class=\"dijitButtonNode dijitDownArrowButton\" dojoAttachEvent=\"onmouseenter:_buttonMouse,onmouseleave:_buttonMouse\"\n\t\t><div class=\"dijitReset dijitInline dijitArrowButtonInner\" role=\"presentation\">&nbsp;</div\n\t\t><div class=\"dijitArrowButtonChar\">&#9660;</div></div\n></div>\n"),baseClass:"dijitTimePicker",clickableIncrement:"T00:15:00",visibleIncrement:"T01:00:00",visibleRange:"T05:00:00",value:new Date(),_visibleIncrement:2,_clickableIncrement:1,_totalIncrements:10,constraints:{},serialize:dojo.date.stamp.toISOString,setValue:function(_621){dojo.deprecated("dijit._TimePicker:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",_621);},_setValueAttr:function(date){this._set("value",date);this._showText();},_setFilterStringAttr:function(val){this._set("filterString",val);this._showText();},isDisabledDate:function(_622,_623){return false;},_getFilteredNodes:function(_624,_625,_626,_627){var _628=[],_629=_627?_627.date:this._refDate,n,i=_624,max=this._maxIncrement+Math.abs(i),chk=_626?-1:1,dec=_626?1:0,inc=1-dec;do{i=i-dec;n=this._createOption(i);if(n){if((_626&&n.date>_629)||(!_626&&n.date<_629)){break;}_628[_626?"unshift":"push"](n);_629=n.date;}i=i+inc;}while(_628.length<_625&&(i*chk)<max);return _628;},_showText:function(){var _62a=dojo.date.stamp.fromISOString;this.timeMenu.innerHTML="";this._clickableIncrementDate=_62a(this.clickableIncrement);this._visibleIncrementDate=_62a(this.visibleIncrement);this._visibleRangeDate=_62a(this.visibleRange);var _62b=function(date){return date.getHours()*60*60+date.getMinutes()*60+date.getSeconds();},_62c=_62b(this._clickableIncrementDate),_62d=_62b(this._visibleIncrementDate),_62e=_62b(this._visibleRangeDate),time=(this.value||this.currentFocus).getTime();this._refDate=new Date(time-time%(_62d*1000));this._refDate.setFullYear(1970,0,1);this._clickableIncrement=1;this._totalIncrements=_62e/_62c;this._visibleIncrement=_62d/_62c;this._maxIncrement=(60*60*24)/_62c;var _62f=this._getFilteredNodes(0,Math.min(this._totalIncrements>>1,10)-1),_630=this._getFilteredNodes(0,Math.min(this._totalIncrements,10)-_62f.length,true,_62f[0]);dojo.forEach(_630.concat(_62f),function(n){this.timeMenu.appendChild(n);},this);},constructor:function(){this.constraints={};},postMixInProperties:function(){this.inherited(arguments);this._setConstraintsAttr(this.constraints);},_setConstraintsAttr:function(_631){dojo.mixin(this,_631);if(!_631.locale){_631.locale=this.lang;}},postCreate:function(){this.connect(this.timeMenu,dojo.isIE?"onmousewheel":"DOMMouseScroll","_mouseWheeled");this._connects.push(dijit.typematic.addMouseListener(this.upArrow,this,"_onArrowUp",33,250));this._connects.push(dijit.typematic.addMouseListener(this.downArrow,this,"_onArrowDown",33,250));this.inherited(arguments);},_buttonMouse:function(e){dojo.toggleClass(e.currentTarget,e.currentTarget==this.upArrow?"dijitUpArrowHover":"dijitDownArrowHover",e.type=="mouseenter"||e.type=="mouseover");},_createOption:function(_632){var date=new Date(this._refDate);var _633=this._clickableIncrementDate;date.setHours(date.getHours()+_633.getHours()*_632,date.getMinutes()+_633.getMinutes()*_632,date.getSeconds()+_633.getSeconds()*_632);if(this.constraints.selector=="time"){date.setFullYear(1970,0,1);}var _634=dojo.date.locale.format(date,this.constraints);if(this.filterString&&_634.toLowerCase().indexOf(this.filterString)!==0){return null;}var div=dojo.create("div",{"class":this.baseClass+"Item"});div.date=date;div.index=_632;dojo.create("div",{"class":this.baseClass+"ItemInner",innerHTML:_634},div);if(_632%this._visibleIncrement<1&&_632%this._visibleIncrement>-1){dojo.addClass(div,this.baseClass+"Marker");}else{if(!(_632%this._clickableIncrement)){dojo.addClass(div,this.baseClass+"Tick");}}if(this.isDisabledDate(date)){dojo.addClass(div,this.baseClass+"ItemDisabled");}if(this.value&&!dojo.date.compare(this.value,date,this.constraints.selector)){div.selected=true;dojo.addClass(div,this.baseClass+"ItemSelected");if(dojo.hasClass(div,this.baseClass+"Marker")){dojo.addClass(div,this.baseClass+"MarkerSelected");}else{dojo.addClass(div,this.baseClass+"TickSelected");}this._highlightOption(div,true);}return div;},_onOptionSelected:function(tgt){var _635=tgt.target.date||tgt.target.parentNode.date;if(!_635||this.isDisabledDate(_635)){return;}this._highlighted_option=null;this.set("value",_635);this.onChange(_635);},onChange:function(time){},_highlightOption:function(node,_636){if(!node){return;}if(_636){if(this._highlighted_option){this._highlightOption(this._highlighted_option,false);}this._highlighted_option=node;}else{if(this._highlighted_option!==node){return;}else{this._highlighted_option=null;}}dojo.toggleClass(node,this.baseClass+"ItemHover",_636);if(dojo.hasClass(node,this.baseClass+"Marker")){dojo.toggleClass(node,this.baseClass+"MarkerHover",_636);}else{dojo.toggleClass(node,this.baseClass+"TickHover",_636);}},onmouseover:function(e){this._keyboardSelected=null;var tgr=(e.target.parentNode===this.timeMenu)?e.target:e.target.parentNode;if(!dojo.hasClass(tgr,this.baseClass+"Item")){return;}this._highlightOption(tgr,true);},onmouseout:function(e){this._keyboardSelected=null;var tgr=(e.target.parentNode===this.timeMenu)?e.target:e.target.parentNode;this._highlightOption(tgr,false);},_mouseWheeled:function(e){this._keyboardSelected=null;dojo.stopEvent(e);var _637=(dojo.isIE?e.wheelDelta:-e.detail);this[(_637>0?"_onArrowUp":"_onArrowDown")]();},_onArrowUp:function(_638){if(typeof _638=="number"&&_638==-1){return;}if(!this.timeMenu.childNodes.length){return;}var _639=this.timeMenu.childNodes[0].index;var divs=this._getFilteredNodes(_639,1,true,this.timeMenu.childNodes[0]);if(divs.length){this.timeMenu.removeChild(this.timeMenu.childNodes[this.timeMenu.childNodes.length-1]);this.timeMenu.insertBefore(divs[0],this.timeMenu.childNodes[0]);}},_onArrowDown:function(_63a){if(typeof _63a=="number"&&_63a==-1){return;}if(!this.timeMenu.childNodes.length){return;}var _63b=this.timeMenu.childNodes[this.timeMenu.childNodes.length-1].index+1;var divs=this._getFilteredNodes(_63b,1,false,this.timeMenu.childNodes[this.timeMenu.childNodes.length-1]);if(divs.length){this.timeMenu.removeChild(this.timeMenu.childNodes[0]);this.timeMenu.appendChild(divs[0]);}},handleKey:function(e){var dk=dojo.keys;if(e.charOrCode==dk.DOWN_ARROW||e.charOrCode==dk.UP_ARROW){dojo.stopEvent(e);if(this._highlighted_option&&!this._highlighted_option.parentNode){this._highlighted_option=null;}var _63c=this.timeMenu,tgt=this._highlighted_option||dojo.query("."+this.baseClass+"ItemSelected",_63c)[0];if(!tgt){tgt=_63c.childNodes[0];}else{if(_63c.childNodes.length){if(e.charOrCode==dk.DOWN_ARROW&&!tgt.nextSibling){this._onArrowDown();}else{if(e.charOrCode==dk.UP_ARROW&&!tgt.previousSibling){this._onArrowUp();}}if(e.charOrCode==dk.DOWN_ARROW){tgt=tgt.nextSibling;}else{tgt=tgt.previousSibling;}}}this._highlightOption(tgt,true);this._keyboardSelected=tgt;return false;}else{if(e.charOrCode==dk.ENTER||e.charOrCode===dk.TAB){if(!this._keyboardSelected&&e.charOrCode===dk.TAB){return true;}if(this._highlighted_option){this._onOptionSelected({target:this._highlighted_option});}return e.charOrCode===dk.TAB;}}}});}if(!dojo._hasResource["dijit.form.TimeTextBox"]){dojo._hasResource["dijit.form.TimeTextBox"]=true;dojo.provide("dijit.form.TimeTextBox");dojo.declare("dijit.form.TimeTextBox",dijit.form._DateTimeTextBox,{baseClass:"dijitTextBox dijitComboBox dijitTimeTextBox",popupClass:"dijit._TimePicker",_selector:"time",value:new Date(""),_onKey:function(evt){this.inherited(arguments);switch(evt.keyCode){case dojo.keys.ENTER:case dojo.keys.TAB:case dojo.keys.ESCAPE:case dojo.keys.DOWN_ARROW:case dojo.keys.UP_ARROW:break;default:setTimeout(dojo.hitch(this,function(){var val=this.get("displayedValue");this.filterString=(val&&!this.parse(val,this.constraints))?val.toLowerCase():"";if(this._opened){this.closeDropDown();}this.openDropDown();}),0);}}});}if(!dojo._hasResource["dijit.form._Spinner"]){dojo._hasResource["dijit.form._Spinner"]=true;dojo.provide("dijit.form._Spinner");dojo.declare("dijit.form._Spinner",dijit.form.RangeBoundTextBox,{defaultTimeout:500,minimumTimeout:10,timeoutChangeRate:0.9,smallDelta:1,largeDelta:10,templateString:dojo.cache("dijit.form","templates/Spinner.html","<div class=\"dijit dijitReset dijitInlineTable dijitLeft\"\n\tid=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitButtonNode dijitSpinnerButtonContainer\"\n\t\t><input class=\"dijitReset dijitInputField dijitSpinnerButtonInner\" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t/><div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton\"\n\t\t\tdojoAttachPoint=\"upArrowNode\"\n\t\t\t><div class=\"dijitArrowButtonInner\"\n\t\t\t\t><input class=\"dijitReset dijitInputField\" value=\"&#9650;\" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t\t><div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton\"\n\t\t\tdojoAttachPoint=\"downArrowNode\"\n\t\t\t><div class=\"dijitArrowButtonInner\"\n\t\t\t\t><input class=\"dijitReset dijitInputField\" value=\"&#9660;\" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input aria-label=\"Form field error\" class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935;\" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' dojoAttachPoint=\"textbox,focusNode\" type=\"${type}\" dojoAttachEvent=\"onkeypress:_onKeyPress\"\n\t\t\trole=\"spinbutton\" autocomplete=\"off\" ${!nameAttrSetting}\n\t/></div\n></div>\n"),baseClass:"dijitTextBox dijitSpinner",cssStateNodes:{"upArrowNode":"dijitUpArrowButton","downArrowNode":"dijitDownArrowButton"},adjust:function(val,_63d){return val;},_arrowPressed:function(_63e,_63f,_640){if(this.disabled||this.readOnly){return;}this._setValueAttr(this.adjust(this.get("value"),_63f*_640),false);dijit.selectInputText(this.textbox,this.textbox.value.length);},_arrowReleased:function(node){this._wheelTimer=null;if(this.disabled||this.readOnly){return;}},_typematicCallback:function(_641,node,evt){var inc=this.smallDelta;if(node==this.textbox){var k=dojo.keys;var key=evt.charOrCode;inc=(key==k.PAGE_UP||key==k.PAGE_DOWN)?this.largeDelta:this.smallDelta;node=(key==k.UP_ARROW||key==k.PAGE_UP)?this.upArrowNode:this.downArrowNode;}if(_641==-1){this._arrowReleased(node);}else{this._arrowPressed(node,(node==this.upArrowNode)?1:-1,inc);}},_wheelTimer:null,_mouseWheeled:function(evt){dojo.stopEvent(evt);var _642=evt.detail?(evt.detail*-1):(evt.wheelDelta/120);if(_642!==0){var node=this[(_642>0?"upArrowNode":"downArrowNode")];this._arrowPressed(node,_642,this.smallDelta);if(!this._wheelTimer){clearTimeout(this._wheelTimer);}this._wheelTimer=setTimeout(dojo.hitch(this,"_arrowReleased",node),50);}},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,!dojo.isMozilla?"onmousewheel":"DOMMouseScroll","_mouseWheeled");this._connects.push(dijit.typematic.addListener(this.upArrowNode,this.textbox,{charOrCode:dojo.keys.UP_ARROW,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout));this._connects.push(dijit.typematic.addListener(this.downArrowNode,this.textbox,{charOrCode:dojo.keys.DOWN_ARROW,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout));this._connects.push(dijit.typematic.addListener(this.upArrowNode,this.textbox,{charOrCode:dojo.keys.PAGE_UP,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout));this._connects.push(dijit.typematic.addListener(this.downArrowNode,this.textbox,{charOrCode:dojo.keys.PAGE_DOWN,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout));}});}if(!dojo._hasResource["dijit.form.NumberSpinner"]){dojo._hasResource["dijit.form.NumberSpinner"]=true;dojo.provide("dijit.form.NumberSpinner");dojo.declare("dijit.form.NumberSpinner",[dijit.form._Spinner,dijit.form.NumberTextBoxMixin],{adjust:function(val,_643){var tc=this.constraints,v=isNaN(val),_644=!isNaN(tc.max),_645=!isNaN(tc.min);if(v&&_643!=0){val=(_643>0)?_645?tc.min:_644?tc.max:0:_644?this.constraints.max:_645?tc.min:0;}var _646=val+_643;if(v||isNaN(_646)){return val;}if(_644&&(_646>tc.max)){_646=tc.max;}if(_645&&(_646<tc.min)){_646=tc.min;}return _646;},_onKeyPress:function(e){if((e.charOrCode==dojo.keys.HOME||e.charOrCode==dojo.keys.END)&&!(e.ctrlKey||e.altKey||e.metaKey)&&typeof this.get("value")!="undefined"){var _647=this.constraints[(e.charOrCode==dojo.keys.HOME?"min":"max")];if(typeof _647=="number"){this._setValueAttr(_647,false);}dojo.stopEvent(e);}}});}if(!dojo._hasResource["dijit.form.HorizontalSlider"]){dojo._hasResource["dijit.form.HorizontalSlider"]=true;dojo.provide("dijit.form.HorizontalSlider");dojo.declare("dijit.form.HorizontalSlider",[dijit.form._FormValueWidget,dijit._Container],{templateString:dojo.cache("dijit.form","templates/HorizontalSlider.html","<table class=\"dijit dijitReset dijitSlider dijitSliderH\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" rules=\"none\" dojoAttachEvent=\"onkeypress:_onKeyPress,onkeyup:_onKeyUp\"\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t\t><td dojoAttachPoint=\"topDecoration\" class=\"dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH\"></td\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH\"\n\t\t\t><div class=\"dijitSliderDecrementIconH\" style=\"display:none\" dojoAttachPoint=\"decrementButton\"><span class=\"dijitSliderButtonInner\">-</span></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper\" dojoAttachEvent=\"onmousedown:_onClkDecBumper\"></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><input dojoAttachPoint=\"valueNode\" type=\"hidden\" ${!nameAttrSetting}\n\t\t\t/><div class=\"dijitReset dijitSliderBarContainerH\" role=\"presentation\" dojoAttachPoint=\"sliderBarContainer\"\n\t\t\t\t><div role=\"presentation\" dojoAttachPoint=\"progressBar\" class=\"dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH\" dojoAttachEvent=\"onmousedown:_onBarClick\"\n\t\t\t\t\t><div class=\"dijitSliderMoveable dijitSliderMoveableH\"\n\t\t\t\t\t\t><div dojoAttachPoint=\"sliderHandle,focusNode\" class=\"dijitSliderImageHandle dijitSliderImageHandleH\" dojoAttachEvent=\"onmousedown:_onHandleClick\" role=\"slider\" valuemin=\"${minimum}\" valuemax=\"${maximum}\"></div\n\t\t\t\t\t></div\n\t\t\t\t></div\n\t\t\t\t><div role=\"presentation\" dojoAttachPoint=\"remainingBar\" class=\"dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH\" dojoAttachEvent=\"onmousedown:_onBarClick\"></div\n\t\t\t></div\n\t\t></td\n\t\t><td class=\"dijitReset\"\n\t\t\t><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper\" dojoAttachEvent=\"onmousedown:_onClkIncBumper\"></div\n\t\t></td\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH\"\n\t\t\t><div class=\"dijitSliderIncrementIconH\" style=\"display:none\" dojoAttachPoint=\"incrementButton\"><span class=\"dijitSliderButtonInner\">+</span></div\n\t\t></td\n\t></tr\n\t><tr class=\"dijitReset\"\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t\t><td dojoAttachPoint=\"containerNode,bottomDecoration\" class=\"dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH\"></td\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\n\t></tr\n></table>\n"),value:0,showButtons:true,minimum:0,maximum:100,discreteValues:Infinity,pageIncrement:2,clickSelect:true,slideDuration:dijit.defaultDuration,widgetsInTemplate:true,attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{id:""}),baseClass:"dijitSlider",cssStateNodes:{incrementButton:"dijitSliderIncrementButton",decrementButton:"dijitSliderDecrementButton",focusNode:"dijitSliderThumb"},_mousePixelCoord:"pageX",_pixelCount:"w",_startingPixelCoord:"x",_startingPixelCount:"l",_handleOffsetCoord:"left",_progressPixelSize:"width",_onKeyUp:function(e){if(this.disabled||this.readOnly||e.altKey||e.ctrlKey||e.metaKey){return;}this._setValueAttr(this.value,true);},_onKeyPress:function(e){if(this.disabled||this.readOnly||e.altKey||e.ctrlKey||e.metaKey){return;}switch(e.charOrCode){case dojo.keys.HOME:this._setValueAttr(this.minimum,false);break;case dojo.keys.END:this._setValueAttr(this.maximum,false);break;case ((this._descending||this.isLeftToRight())?dojo.keys.RIGHT_ARROW:dojo.keys.LEFT_ARROW):case (this._descending===false?dojo.keys.DOWN_ARROW:dojo.keys.UP_ARROW):case (this._descending===false?dojo.keys.PAGE_DOWN:dojo.keys.PAGE_UP):this.increment(e);break;case ((this._descending||this.isLeftToRight())?dojo.keys.LEFT_ARROW:dojo.keys.RIGHT_ARROW):case (this._descending===false?dojo.keys.UP_ARROW:dojo.keys.DOWN_ARROW):case (this._descending===false?dojo.keys.PAGE_UP:dojo.keys.PAGE_DOWN):this.decrement(e);break;default:return;}dojo.stopEvent(e);},_onHandleClick:function(e){if(this.disabled||this.readOnly){return;}if(!dojo.isIE){dijit.focus(this.sliderHandle);}dojo.stopEvent(e);},_isReversed:function(){return !this.isLeftToRight();},_onBarClick:function(e){if(this.disabled||this.readOnly||!this.clickSelect){return;}dijit.focus(this.sliderHandle);dojo.stopEvent(e);var _648=dojo.position(this.sliderBarContainer,true);var _649=e[this._mousePixelCoord]-_648[this._startingPixelCoord];this._setPixelValue(this._isReversed()?(_648[this._pixelCount]-_649):_649,_648[this._pixelCount],true);this._movable.onMouseDown(e);},_setPixelValue:function(_64a,_64b,_64c){if(this.disabled||this.readOnly){return;}_64a=_64a<0?0:_64b<_64a?_64b:_64a;var _64d=this.discreteValues;if(_64d<=1||_64d==Infinity){_64d=_64b;}_64d--;var _64e=_64b/_64d;var _64f=Math.round(_64a/_64e);this._setValueAttr((this.maximum-this.minimum)*_64f/_64d+this.minimum,_64c);},_setValueAttr:function(_650,_651){this._set("value",_650);this.valueNode.value=_650;dijit.setWaiState(this.focusNode,"valuenow",_650);this.inherited(arguments);var _652=(_650-this.minimum)/(this.maximum-this.minimum);var _653=(this._descending===false)?this.remainingBar:this.progressBar;var _654=(this._descending===false)?this.progressBar:this.remainingBar;if(this._inProgressAnim&&this._inProgressAnim.status!="stopped"){this._inProgressAnim.stop(true);}if(_651&&this.slideDuration>0&&_653.style[this._progressPixelSize]){var _655=this;var _656={};var _657=parseFloat(_653.style[this._progressPixelSize]);var _658=this.slideDuration*(_652-_657/100);if(_658==0){return;}if(_658<0){_658=0-_658;}_656[this._progressPixelSize]={start:_657,end:_652*100,units:"%"};this._inProgressAnim=dojo.animateProperty({node:_653,duration:_658,onAnimate:function(v){_654.style[_655._progressPixelSize]=(100-parseFloat(v[_655._progressPixelSize]))+"%";},onEnd:function(){delete _655._inProgressAnim;},properties:_656});this._inProgressAnim.play();}else{_653.style[this._progressPixelSize]=(_652*100)+"%";_654.style[this._progressPixelSize]=((1-_652)*100)+"%";}},_bumpValue:function(_659,_65a){if(this.disabled||this.readOnly){return;}var s=dojo.getComputedStyle(this.sliderBarContainer);var c=dojo._getContentBox(this.sliderBarContainer,s);var _65b=this.discreteValues;if(_65b<=1||_65b==Infinity){_65b=c[this._pixelCount];}_65b--;var _65c=(this.value-this.minimum)*_65b/(this.maximum-this.minimum)+_659;if(_65c<0){_65c=0;}if(_65c>_65b){_65c=_65b;}_65c=_65c*(this.maximum-this.minimum)/_65b+this.minimum;this._setValueAttr(_65c,_65a);},_onClkBumper:function(val){if(this.disabled||this.readOnly||!this.clickSelect){return;}this._setValueAttr(val,true);},_onClkIncBumper:function(){this._onClkBumper(this._descending===false?this.minimum:this.maximum);},_onClkDecBumper:function(){this._onClkBumper(this._descending===false?this.maximum:this.minimum);},decrement:function(e){this._bumpValue(e.charOrCode==dojo.keys.PAGE_DOWN?-this.pageIncrement:-1);},increment:function(e){this._bumpValue(e.charOrCode==dojo.keys.PAGE_UP?this.pageIncrement:1);},_mouseWheeled:function(evt){dojo.stopEvent(evt);var _65d=!dojo.isMozilla;var _65e=evt[(_65d?"wheelDelta":"detail")]*(_65d?1:-1);this._bumpValue(_65e<0?-1:1,true);},startup:function(){if(this._started){return;}dojo.forEach(this.getChildren(),function(_65f){if(this[_65f.container]!=this.containerNode){this[_65f.container].appendChild(_65f.domNode);}},this);this.inherited(arguments);},_typematicCallback:function(_660,_661,e){if(_660==-1){this._setValueAttr(this.value,true);}else{this[(_661==(this._descending?this.incrementButton:this.decrementButton))?"decrement":"increment"](e);}},buildRendering:function(){this.inherited(arguments);if(this.showButtons){this.incrementButton.style.display="";this.decrementButton.style.display="";}var _662=dojo.query("label[for=\""+this.id+"\"]");if(_662.length){_662[0].id=(this.id+"_label");dijit.setWaiState(this.focusNode,"labelledby",_662[0].id);}dijit.setWaiState(this.focusNode,"valuemin",this.minimum);dijit.setWaiState(this.focusNode,"valuemax",this.maximum);},postCreate:function(){this.inherited(arguments);if(this.showButtons){this._connects.push(dijit.typematic.addMouseListener(this.decrementButton,this,"_typematicCallback",25,500));this._connects.push(dijit.typematic.addMouseListener(this.incrementButton,this,"_typematicCallback",25,500));}this.connect(this.domNode,!dojo.isMozilla?"onmousewheel":"DOMMouseScroll","_mouseWheeled");var _663=dojo.declare(dijit.form._SliderMover,{widget:this});this._movable=new dojo.dnd.Moveable(this.sliderHandle,{mover:_663});this._layoutHackIE7();},destroy:function(){this._movable.destroy();if(this._inProgressAnim&&this._inProgressAnim.status!="stopped"){this._inProgressAnim.stop(true);}this._supportingWidgets=dijit.findWidgets(this.domNode);this.inherited(arguments);}});dojo.declare("dijit.form._SliderMover",dojo.dnd.Mover,{onMouseMove:function(e){var _664=this.widget;var _665=_664._abspos;if(!_665){_665=_664._abspos=dojo.position(_664.sliderBarContainer,true);_664._setPixelValue_=dojo.hitch(_664,"_setPixelValue");_664._isReversed_=_664._isReversed();}var _666=e.touches?e.touches[0]:e,_667=_666[_664._mousePixelCoord]-_665[_664._startingPixelCoord];_664._setPixelValue_(_664._isReversed_?(_665[_664._pixelCount]-_667):_667,_665[_664._pixelCount],false);},destroy:function(e){dojo.dnd.Mover.prototype.destroy.apply(this,arguments);var _668=this.widget;_668._abspos=null;_668._setValueAttr(_668.value,true);}});}if(!dojo._hasResource["dijit._editor.selection"]){dojo._hasResource["dijit._editor.selection"]=true;dojo.provide("dijit._editor.selection");dojo.getObject("_editor.selection",true,dijit);dojo.mixin(dijit._editor.selection,{getType:function(){if(dojo.isIE<9){return dojo.doc.selection.type.toLowerCase();}else{var _669="text";var oSel;try{oSel=dojo.global.getSelection();}catch(e){}if(oSel&&oSel.rangeCount==1){var _66a=oSel.getRangeAt(0);if((_66a.startContainer==_66a.endContainer)&&((_66a.endOffset-_66a.startOffset)==1)&&(_66a.startContainer.nodeType!=3)){_669="control";}}return _669;}},getSelectedText:function(){if(dojo.isIE<9){if(dijit._editor.selection.getType()=="control"){return null;}return dojo.doc.selection.createRange().text;}else{var _66b=dojo.global.getSelection();if(_66b){return _66b.toString();}}return "";},getSelectedHtml:function(){if(dojo.isIE<9){if(dijit._editor.selection.getType()=="control"){return null;}return dojo.doc.selection.createRange().htmlText;}else{var _66c=dojo.global.getSelection();if(_66c&&_66c.rangeCount){var i;var html="";for(i=0;i<_66c.rangeCount;i++){var frag=_66c.getRangeAt(i).cloneContents();var div=dojo.doc.createElement("div");div.appendChild(frag);html+=div.innerHTML;}return html;}return null;}},getSelectedElement:function(){if(dijit._editor.selection.getType()=="control"){if(dojo.isIE<9){var _66d=dojo.doc.selection.createRange();if(_66d&&_66d.item){return dojo.doc.selection.createRange().item(0);}}else{var _66e=dojo.global.getSelection();return _66e.anchorNode.childNodes[_66e.anchorOffset];}}return null;},getParentElement:function(){if(dijit._editor.selection.getType()=="control"){var p=this.getSelectedElement();if(p){return p.parentNode;}}else{if(dojo.isIE<9){var r=dojo.doc.selection.createRange();r.collapse(true);return r.parentElement();}else{var _66f=dojo.global.getSelection();if(_66f){var node=_66f.anchorNode;while(node&&(node.nodeType!=1)){node=node.parentNode;}return node;}}}return null;},hasAncestorElement:function(_670){return this.getAncestorElement.apply(this,arguments)!=null;},getAncestorElement:function(_671){var node=this.getSelectedElement()||this.getParentElement();return this.getParentOfType(node,arguments);},isTag:function(node,tags){if(node&&node.tagName){var _672=node.tagName.toLowerCase();for(var i=0;i<tags.length;i++){var _673=String(tags[i]).toLowerCase();if(_672==_673){return _673;}}}return "";},getParentOfType:function(node,tags){while(node){if(this.isTag(node,tags).length){return node;}node=node.parentNode;}return null;},collapse:function(_674){if(window.getSelection){var _675=dojo.global.getSelection();if(_675.removeAllRanges){if(_674){_675.collapseToStart();}else{_675.collapseToEnd();}}else{_675.collapse(_674);}}else{if(dojo.isIE){var _676=dojo.doc.selection.createRange();_676.collapse(_674);_676.select();}}},remove:function(){var sel=dojo.doc.selection;if(dojo.isIE<9){if(sel.type.toLowerCase()!="none"){sel.clear();}return sel;}else{sel=dojo.global.getSelection();sel.deleteFromDocument();return sel;}},selectElementChildren:function(_677,_678){var win=dojo.global;var doc=dojo.doc;var _679;_677=dojo.byId(_677);if(doc.selection&&dojo.isIE<9&&dojo.body().createTextRange){_679=_677.ownerDocument.body.createTextRange();_679.moveToElementText(_677);if(!_678){try{_679.select();}catch(e){}}}else{if(win.getSelection){var _67a=dojo.global.getSelection();if(dojo.isOpera){if(_67a.rangeCount){_679=_67a.getRangeAt(0);}else{_679=doc.createRange();}_679.setStart(_677,0);_679.setEnd(_677,(_677.nodeType==3)?_677.length:_677.childNodes.length);_67a.addRange(_679);}else{if(_677.innerText&&_677.innerText!==""){_67a.selectAllChildren(_677);}}}}},selectElement:function(_67b,_67c){var _67d;var doc=dojo.doc;var win=dojo.global;_67b=dojo.byId(_67b);if(dojo.isIE<9&&dojo.body().createTextRange){try{var tg=_67b.tagName?_67b.tagName.toLowerCase():"";if(tg==="img"||tg==="table"){_67d=dojo.body().createControlRange();}else{_67d=dojo.body().createRange();}_67d.addElement(_67b);if(!_67c){_67d.select();}}catch(e){this.selectElementChildren(_67b,_67c);}}else{if(dojo.global.getSelection){var _67e=win.getSelection();_67d=doc.createRange();if(_67e.removeAllRanges){if(dojo.isOpera){if(_67e.getRangeAt(0)){_67d=_67e.getRangeAt(0);}}_67d.selectNode(_67b);_67e.removeAllRanges();_67e.addRange(_67d);}}}},inSelection:function(node){if(node){var _67f;var doc=dojo.doc;var _680;if(dojo.global.getSelection){var sel=dojo.global.getSelection();if(sel&&sel.rangeCount>0){_680=sel.getRangeAt(0);}if(_680&&_680.compareBoundaryPoints&&doc.createRange){try{_67f=doc.createRange();_67f.setStart(node,0);if(_680.compareBoundaryPoints(_680.START_TO_END,_67f)===1){return true;}}catch(e){}}}else{if(doc.selection){_680=doc.selection.createRange();try{_67f=node.ownerDocument.body.createControlRange();if(_67f){_67f.addElement(node);}}catch(e1){try{_67f=node.ownerDocument.body.createTextRange();_67f.moveToElementText(node);}catch(e2){}}if(_680&&_67f){if(_680.compareEndPoints("EndToStart",_67f)===1){return true;}}}}}return false;}});}if(!dojo._hasResource["dijit._editor.range"]){dojo._hasResource["dijit._editor.range"]=true;dojo.provide("dijit._editor.range");dijit.range={};dijit.range.getIndex=function(node,_681){var ret=[],retR=[];var stop=_681;var _682=node;var _683,n;while(node!=stop){var i=0;_683=node.parentNode;while((n=_683.childNodes[i++])){if(n===node){--i;break;}}ret.unshift(i);retR.unshift(i-_683.childNodes.length);node=_683;}if(ret.length>0&&_682.nodeType==3){n=_682.previousSibling;while(n&&n.nodeType==3){ret[ret.length-1]--;n=n.previousSibling;}n=_682.nextSibling;while(n&&n.nodeType==3){retR[retR.length-1]++;n=n.nextSibling;}}return {o:ret,r:retR};};dijit.range.getNode=function(_684,_685){if(!dojo.isArray(_684)||_684.length==0){return _685;}var node=_685;dojo.every(_684,function(i){if(i>=0&&i<node.childNodes.length){node=node.childNodes[i];}else{node=null;return false;}return true;});return node;};dijit.range.getCommonAncestor=function(n1,n2,root){root=root||n1.ownerDocument.body;var _686=function(n){var as=[];while(n){as.unshift(n);if(n!==root){n=n.parentNode;}else{break;}}return as;};var n1as=_686(n1);var n2as=_686(n2);var m=Math.min(n1as.length,n2as.length);var com=n1as[0];for(var i=1;i<m;i++){if(n1as[i]===n2as[i]){com=n1as[i];}else{break;}}return com;};dijit.range.getAncestor=function(node,_687,root){root=root||node.ownerDocument.body;while(node&&node!==root){var name=node.nodeName.toUpperCase();if(_687.test(name)){return node;}node=node.parentNode;}return null;};dijit.range.BlockTagNames=/^(?:P|DIV|H1|H2|H3|H4|H5|H6|ADDRESS|PRE|OL|UL|LI|DT|DE)$/;dijit.range.getBlockAncestor=function(node,_688,root){root=root||node.ownerDocument.body;_688=_688||dijit.range.BlockTagNames;var _689=null,_68a;while(node&&node!==root){var name=node.nodeName.toUpperCase();if(!_689&&_688.test(name)){_689=node;}if(!_68a&&(/^(?:BODY|TD|TH|CAPTION)$/).test(name)){_68a=node;}node=node.parentNode;}return {blockNode:_689,blockContainer:_68a||node.ownerDocument.body};};dijit.range.atBeginningOfContainer=function(_68b,node,_68c){var _68d=false;var _68e=(_68c==0);if(!_68e&&node.nodeType==3){if(/^[\s\xA0]+$/.test(node.nodeValue.substr(0,_68c))){_68e=true;}}if(_68e){var _68f=node;_68d=true;while(_68f&&_68f!==_68b){if(_68f.previousSibling){_68d=false;break;}_68f=_68f.parentNode;}}return _68d;};dijit.range.atEndOfContainer=function(_690,node,_691){var _692=false;var _693=(_691==(node.length||node.childNodes.length));if(!_693&&node.nodeType==3){if(/^[\s\xA0]+$/.test(node.nodeValue.substr(_691))){_693=true;}}if(_693){var _694=node;_692=true;while(_694&&_694!==_690){if(_694.nextSibling){_692=false;break;}_694=_694.parentNode;}}return _692;};dijit.range.adjacentNoneTextNode=function(_695,next){var node=_695;var len=(0-_695.length)||0;var prop=next?"nextSibling":"previousSibling";while(node){if(node.nodeType!=3){break;}len+=node.length;node=node[prop];}return [node,len];};dijit.range._w3c=Boolean(window["getSelection"]);dijit.range.create=function(win){if(dijit.range._w3c){return (win||dojo.global).document.createRange();}else{return new dijit.range.W3CRange;}};dijit.range.getSelection=function(win,_696){if(dijit.range._w3c){return win.getSelection();}else{var s=new dijit.range.ie.selection(win);if(!_696){s._getCurrentSelection();}return s;}};if(!dijit.range._w3c){dijit.range.ie={cachedSelection:{},selection:function(win){this._ranges=[];this.addRange=function(r,_697){this._ranges.push(r);if(!_697){r._select();}this.rangeCount=this._ranges.length;};this.removeAllRanges=function(){this._ranges=[];this.rangeCount=0;};var _698=function(){var r=win.document.selection.createRange();var type=win.document.selection.type.toUpperCase();if(type=="CONTROL"){return new dijit.range.W3CRange(dijit.range.ie.decomposeControlRange(r));}else{return new dijit.range.W3CRange(dijit.range.ie.decomposeTextRange(r));}};this.getRangeAt=function(i){return this._ranges[i];};this._getCurrentSelection=function(){this.removeAllRanges();var r=_698();if(r){this.addRange(r,true);}};},decomposeControlRange:function(_699){var _69a=_699.item(0),_69b=_699.item(_699.length-1);var _69c=_69a.parentNode,_69d=_69b.parentNode;var _69e=dijit.range.getIndex(_69a,_69c).o;var _69f=dijit.range.getIndex(_69b,_69d).o+1;return [_69c,_69e,_69d,_69f];},getEndPoint:function(_6a0,end){var _6a1=_6a0.duplicate();_6a1.collapse(!end);var _6a2="EndTo"+(end?"End":"Start");var _6a3=_6a1.parentElement();var _6a4,_6a5,_6a6;if(_6a3.childNodes.length>0){dojo.every(_6a3.childNodes,function(node,i){var _6a7;if(node.nodeType!=3){_6a1.moveToElementText(node);if(_6a1.compareEndPoints(_6a2,_6a0)>0){if(_6a6&&_6a6.nodeType==3){_6a4=_6a6;_6a7=true;}else{_6a4=_6a3;_6a5=i;return false;}}else{if(i==_6a3.childNodes.length-1){_6a4=_6a3;_6a5=_6a3.childNodes.length;return false;}}}else{if(i==_6a3.childNodes.length-1){_6a4=node;_6a7=true;}}if(_6a7&&_6a4){var _6a8=dijit.range.adjacentNoneTextNode(_6a4)[0];if(_6a8){_6a4=_6a8.nextSibling;}else{_6a4=_6a3.firstChild;}var _6a9=dijit.range.adjacentNoneTextNode(_6a4);_6a8=_6a9[0];var _6aa=_6a9[1];if(_6a8){_6a1.moveToElementText(_6a8);_6a1.collapse(false);}else{_6a1.moveToElementText(_6a3);}_6a1.setEndPoint(_6a2,_6a0);_6a5=_6a1.text.length-_6aa;return false;}_6a6=node;return true;});}else{_6a4=_6a3;_6a5=0;}if(!end&&_6a4.nodeType==1&&_6a5==_6a4.childNodes.length){var _6ab=_6a4.nextSibling;if(_6ab&&_6ab.nodeType==3){_6a4=_6ab;_6a5=0;}}return [_6a4,_6a5];},setEndPoint:function(_6ac,_6ad,_6ae){var _6af=_6ac.duplicate(),node,len;if(_6ad.nodeType!=3){if(_6ae>0){node=_6ad.childNodes[_6ae-1];if(node){if(node.nodeType==3){_6ad=node;_6ae=node.length;}else{if(node.nextSibling&&node.nextSibling.nodeType==3){_6ad=node.nextSibling;_6ae=0;}else{_6af.moveToElementText(node.nextSibling?node:_6ad);var _6b0=node.parentNode;var _6b1=_6b0.insertBefore(node.ownerDocument.createTextNode(" "),node.nextSibling);_6af.collapse(false);_6b0.removeChild(_6b1);}}}}else{_6af.moveToElementText(_6ad);_6af.collapse(true);}}if(_6ad.nodeType==3){var _6b2=dijit.range.adjacentNoneTextNode(_6ad);var _6b3=_6b2[0];len=_6b2[1];if(_6b3){_6af.moveToElementText(_6b3);_6af.collapse(false);if(_6b3.contentEditable!="inherit"){len++;}}else{_6af.moveToElementText(_6ad.parentNode);_6af.collapse(true);}_6ae+=len;if(_6ae>0){if(_6af.move("character",_6ae)!=_6ae){console.error("Error when moving!");}}}return _6af;},decomposeTextRange:function(_6b4){var _6b5=dijit.range.ie.getEndPoint(_6b4);var _6b6=_6b5[0],_6b7=_6b5[1];var _6b8=_6b5[0],_6b9=_6b5[1];if(_6b4.htmlText.length){if(_6b4.htmlText==_6b4.text){_6b9=_6b7+_6b4.text.length;}else{_6b5=dijit.range.ie.getEndPoint(_6b4,true);_6b8=_6b5[0],_6b9=_6b5[1];}}return [_6b6,_6b7,_6b8,_6b9];},setRange:function(_6ba,_6bb,_6bc,_6bd,_6be,_6bf){var _6c0=dijit.range.ie.setEndPoint(_6ba,_6bb,_6bc);_6ba.setEndPoint("StartToStart",_6c0);if(!_6bf){var end=dijit.range.ie.setEndPoint(_6ba,_6bd,_6be);}_6ba.setEndPoint("EndToEnd",end||_6c0);return _6ba;}};dojo.declare("dijit.range.W3CRange",null,{constructor:function(){if(arguments.length>0){this.setStart(arguments[0][0],arguments[0][1]);this.setEnd(arguments[0][2],arguments[0][3]);}else{this.commonAncestorContainer=null;this.startContainer=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=true;}},_updateInternal:function(){if(this.startContainer!==this.endContainer){this.commonAncestorContainer=dijit.range.getCommonAncestor(this.startContainer,this.endContainer);}else{this.commonAncestorContainer=this.startContainer;}this.collapsed=(this.startContainer===this.endContainer)&&(this.startOffset==this.endOffset);},setStart:function(node,_6c1){_6c1=parseInt(_6c1);if(this.startContainer===node&&this.startOffset==_6c1){return;}delete this._cachedBookmark;this.startContainer=node;this.startOffset=_6c1;if(!this.endContainer){this.setEnd(node,_6c1);}else{this._updateInternal();}},setEnd:function(node,_6c2){_6c2=parseInt(_6c2);if(this.endContainer===node&&this.endOffset==_6c2){return;}delete this._cachedBookmark;this.endContainer=node;this.endOffset=_6c2;if(!this.startContainer){this.setStart(node,_6c2);}else{this._updateInternal();}},setStartAfter:function(node,_6c3){this._setPoint("setStart",node,_6c3,1);},setStartBefore:function(node,_6c4){this._setPoint("setStart",node,_6c4,0);},setEndAfter:function(node,_6c5){this._setPoint("setEnd",node,_6c5,1);},setEndBefore:function(node,_6c6){this._setPoint("setEnd",node,_6c6,0);},_setPoint:function(what,node,_6c7,ext){var _6c8=dijit.range.getIndex(node,node.parentNode).o;this[what](node.parentNode,_6c8.pop()+ext);},_getIERange:function(){var r=(this._body||this.endContainer.ownerDocument.body).createTextRange();dijit.range.ie.setRange(r,this.startContainer,this.startOffset,this.endContainer,this.endOffset,this.collapsed);return r;},getBookmark:function(body){this._getIERange();return this._cachedBookmark;},_select:function(){var r=this._getIERange();r.select();},deleteContents:function(){var r=this._getIERange();r.pasteHTML("");this.endContainer=this.startContainer;this.endOffset=this.startOffset;this.collapsed=true;},cloneRange:function(){var r=new dijit.range.W3CRange([this.startContainer,this.startOffset,this.endContainer,this.endOffset]);r._body=this._body;return r;},detach:function(){this._body=null;this.commonAncestorContainer=null;this.startContainer=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=true;}});}}if(!dojo._hasResource["dijit._editor.html"]){dojo._hasResource["dijit._editor.html"]=true;dojo.provide("dijit._editor.html");dojo.getObject("_editor",true,dijit);dijit._editor.escapeXml=function(str,_6c9){str=str.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");if(!_6c9){str=str.replace(/'/gm,"&#39;");}return str;};dijit._editor.getNodeHtml=function(node){var _6ca;switch(node.nodeType){case 1:var _6cb=node.nodeName.toLowerCase();if(!_6cb||_6cb.charAt(0)=="/"){return "";}_6ca="<"+_6cb;var _6cc=[];var attr;if(dojo.isIE&&node.outerHTML){var s=node.outerHTML;s=s.substr(0,s.indexOf(">")).replace(/(['"])[^"']*\1/g,"");var reg=/(\b\w+)\s?=/g;var m,key;while((m=reg.exec(s))){key=m[1];if(key.substr(0,3)!="_dj"){if(key=="src"||key=="href"){if(node.getAttribute("_djrealurl")){_6cc.push([key,node.getAttribute("_djrealurl")]);continue;}}var val,_6cd;switch(key){case "style":val=node.style.cssText.toLowerCase();break;case "class":val=node.className;break;case "width":if(_6cb==="img"){_6cd=/width=(\S+)/i.exec(s);if(_6cd){val=_6cd[1];}break;}case "height":if(_6cb==="img"){_6cd=/height=(\S+)/i.exec(s);if(_6cd){val=_6cd[1];}break;}default:val=node.getAttribute(key);}if(val!=null){_6cc.push([key,val.toString()]);}}}}else{var i=0;while((attr=node.attributes[i++])){var n=attr.name;if(n.substr(0,3)!="_dj"){var v=attr.value;if(n=="src"||n=="href"){if(node.getAttribute("_djrealurl")){v=node.getAttribute("_djrealurl");}}_6cc.push([n,v]);}}}_6cc.sort(function(a,b){return a[0]<b[0]?-1:(a[0]==b[0]?0:1);});var j=0;while((attr=_6cc[j++])){_6ca+=" "+attr[0]+"=\""+(dojo.isString(attr[1])?dijit._editor.escapeXml(attr[1],true):attr[1])+"\"";}if(_6cb==="script"){_6ca+=">"+node.innerHTML+"</"+_6cb+">";}else{if(node.childNodes.length){_6ca+=">"+dijit._editor.getChildrenHtml(node)+"</"+_6cb+">";}else{switch(_6cb){case "br":case "hr":case "img":case "input":case "base":case "meta":case "area":case "basefont":_6ca+=" />";break;default:_6ca+="></"+_6cb+">";}}}break;case 4:case 3:_6ca=dijit._editor.escapeXml(node.nodeValue,true);break;case 8:_6ca="<!--"+dijit._editor.escapeXml(node.nodeValue,true)+"-->";break;default:_6ca="<!-- Element not recognized - Type: "+node.nodeType+" Name: "+node.nodeName+"-->";}return _6ca;};dijit._editor.getChildrenHtml=function(dom){var out="";if(!dom){return out;}var _6ce=dom["childNodes"]||dom;var _6cf=!dojo.isIE||_6ce!==dom;var node,i=0;while((node=_6ce[i++])){if(!_6cf||node.parentNode==dom){out+=dijit._editor.getNodeHtml(node);}}return out;};}if(!dojo._hasResource["dijit._editor.RichText"]){dojo._hasResource["dijit._editor.RichText"]=true;dojo.provide("dijit._editor.RichText");if(!dojo.config["useXDomain"]||dojo.config["allowXdRichTextSave"]){if(dojo._postLoad){(function(){var _6d0=dojo.doc.createElement("textarea");_6d0.id=dijit._scopeName+"._editor.RichText.value";dojo.style(_6d0,{display:"none",position:"absolute",top:"-100px",height:"3px",width:"3px"});dojo.body().appendChild(_6d0);})();}else{try{dojo.doc.write("<textarea id=\""+dijit._scopeName+"._editor.RichText.value\" "+"style=\"display:none;position:absolute;top:-100px;left:-100px;height:3px;width:3px;overflow:hidden;\"></textarea>");}catch(e){}}}dojo.declare("dijit._editor.RichText",[dijit._Widget,dijit._CssStateMixin],{constructor:function(_6d1){this.contentPreFilters=[];this.contentPostFilters=[];this.contentDomPreFilters=[];this.contentDomPostFilters=[];this.editingAreaStyleSheets=[];this.events=[].concat(this.events);this._keyHandlers={};if(_6d1&&dojo.isString(_6d1.value)){this.value=_6d1.value;}this.onLoadDeferred=new dojo.Deferred();},baseClass:"dijitEditor",inheritWidth:false,focusOnLoad:false,name:"",styleSheets:"",height:"300px",minHeight:"1em",isClosed:true,isLoaded:false,_SEPARATOR:"@@**%%__RICHTEXTBOUNDRY__%%**@@",_NAME_CONTENT_SEP:"@@**%%:%%**@@",onLoadDeferred:null,isTabIndent:false,disableSpellCheck:false,postCreate:function(){if("textarea"==this.domNode.tagName.toLowerCase()){console.warn("RichText should not be used with the TEXTAREA tag.  See dijit._editor.RichText docs.");}this.contentPreFilters=[dojo.hitch(this,"_preFixUrlAttributes")].concat(this.contentPreFilters);if(dojo.isMoz){this.contentPreFilters=[this._normalizeFontStyle].concat(this.contentPreFilters);this.contentPostFilters=[this._removeMozBogus].concat(this.contentPostFilters);}if(dojo.isWebKit){this.contentPreFilters=[this._removeWebkitBogus].concat(this.contentPreFilters);this.contentPostFilters=[this._removeWebkitBogus].concat(this.contentPostFilters);}if(dojo.isIE){this.contentPostFilters=[this._normalizeFontStyle].concat(this.contentPostFilters);}this.inherited(arguments);dojo.publish(dijit._scopeName+"._editor.RichText::init",[this]);this.open();this.setupDefaultShortcuts();},setupDefaultShortcuts:function(){var exec=dojo.hitch(this,function(cmd,arg){return function(){return !this.execCommand(cmd,arg);};});var _6d2={b:exec("bold"),i:exec("italic"),u:exec("underline"),a:exec("selectall"),s:function(){this.save(true);},m:function(){this.isTabIndent=!this.isTabIndent;},"1":exec("formatblock","h1"),"2":exec("formatblock","h2"),"3":exec("formatblock","h3"),"4":exec("formatblock","h4"),"\\":exec("insertunorderedlist")};if(!dojo.isIE){_6d2.Z=exec("redo");}for(var key in _6d2){this.addKeyHandler(key,true,false,_6d2[key]);}},events:["onKeyPress","onKeyDown","onKeyUp"],captureEvents:[],_editorCommandsLocalized:false,_localizeEditorCommands:function(){if(dijit._editor._editorCommandsLocalized){this._local2NativeFormatNames=dijit._editor._local2NativeFormatNames;this._native2LocalFormatNames=dijit._editor._native2LocalFormatNames;return;}dijit._editor._editorCommandsLocalized=true;dijit._editor._local2NativeFormatNames={};dijit._editor._native2LocalFormatNames={};this._local2NativeFormatNames=dijit._editor._local2NativeFormatNames;this._native2LocalFormatNames=dijit._editor._native2LocalFormatNames;var _6d3=["div","p","pre","h1","h2","h3","h4","h5","h6","ol","ul","address"];var _6d4="",_6d5,i=0;while((_6d5=_6d3[i++])){if(_6d5.charAt(1)!=="l"){_6d4+="<"+_6d5+"><span>content</span></"+_6d5+"><br/>";}else{_6d4+="<"+_6d5+"><li>content</li></"+_6d5+"><br/>";}}var _6d6={position:"absolute",top:"0px",zIndex:10,opacity:0.01};var div=dojo.create("div",{style:_6d6,innerHTML:_6d4});dojo.body().appendChild(div);var _6d7=dojo.hitch(this,function(){var node=div.firstChild;while(node){try{dijit._editor.selection.selectElement(node.firstChild);var _6d8=node.tagName.toLowerCase();this._local2NativeFormatNames[_6d8]=document.queryCommandValue("formatblock");this._native2LocalFormatNames[this._local2NativeFormatNames[_6d8]]=_6d8;node=node.nextSibling.nextSibling;}catch(e){}}div.parentNode.removeChild(div);div.innerHTML="";});setTimeout(_6d7,0);},open:function(_6d9){if(!this.onLoadDeferred||this.onLoadDeferred.fired>=0){this.onLoadDeferred=new dojo.Deferred();}if(!this.isClosed){this.close();}dojo.publish(dijit._scopeName+"._editor.RichText::open",[this]);if(arguments.length==1&&_6d9.nodeName){this.domNode=_6d9;}var dn=this.domNode;var html;if(dojo.isString(this.value)){html=this.value;delete this.value;dn.innerHTML="";}else{if(dn.nodeName&&dn.nodeName.toLowerCase()=="textarea"){var ta=(this.textarea=dn);this.name=ta.name;html=ta.value;dn=this.domNode=dojo.doc.createElement("div");dn.setAttribute("widgetId",this.id);ta.removeAttribute("widgetId");dn.cssText=ta.cssText;dn.className+=" "+ta.className;dojo.place(dn,ta,"before");var _6da=dojo.hitch(this,function(){dojo.style(ta,{display:"block",position:"absolute",top:"-1000px"});if(dojo.isIE){var s=ta.style;this.__overflow=s.overflow;s.overflow="hidden";}});if(dojo.isIE){setTimeout(_6da,10);}else{_6da();}if(ta.form){var _6db=ta.value;this.reset=function(){var _6dc=this.getValue();if(_6dc!=_6db){this.replaceValue(_6db);}};dojo.connect(ta.form,"onsubmit",this,function(){dojo.attr(ta,"disabled",this.disabled);ta.value=this.getValue();});}}else{html=dijit._editor.getChildrenHtml(dn);dn.innerHTML="";}}var _6dd=dojo.contentBox(dn);this._oldHeight=_6dd.h;this._oldWidth=_6dd.w;this.value=html;if(dn.nodeName&&dn.nodeName=="LI"){dn.innerHTML=" <br>";}this.header=dn.ownerDocument.createElement("div");dn.appendChild(this.header);this.editingArea=dn.ownerDocument.createElement("div");dn.appendChild(this.editingArea);this.footer=dn.ownerDocument.createElement("div");dn.appendChild(this.footer);if(!this.name){this.name=this.id+"_AUTOGEN";}if(this.name!==""&&(!dojo.config["useXDomain"]||dojo.config["allowXdRichTextSave"])){var _6de=dojo.byId(dijit._scopeName+"._editor.RichText.value");if(_6de&&_6de.value!==""){var _6df=_6de.value.split(this._SEPARATOR),i=0,dat;while((dat=_6df[i++])){var data=dat.split(this._NAME_CONTENT_SEP);if(data[0]==this.name){html=data[1];_6df=_6df.splice(i,1);_6de.value=_6df.join(this._SEPARATOR);break;}}}if(!dijit._editor._globalSaveHandler){dijit._editor._globalSaveHandler={};dojo.addOnUnload(function(){var id;for(id in dijit._editor._globalSaveHandler){var f=dijit._editor._globalSaveHandler[id];if(dojo.isFunction(f)){f();}}});}dijit._editor._globalSaveHandler[this.id]=dojo.hitch(this,"_saveContent");}this.isClosed=false;var ifr=(this.editorObject=this.iframe=dojo.doc.createElement("iframe"));ifr.id=this.id+"_iframe";this._iframeSrc=this._getIframeDocTxt();ifr.style.border="none";ifr.style.width="100%";if(this._layoutMode){ifr.style.height="100%";}else{if(dojo.isIE>=7){if(this.height){ifr.style.height=this.height;}if(this.minHeight){ifr.style.minHeight=this.minHeight;}}else{ifr.style.height=this.height?this.height:this.minHeight;}}ifr.frameBorder=0;ifr._loadFunc=dojo.hitch(this,function(win){this.window=win;this.document=this.window.document;if(dojo.isIE){this._localizeEditorCommands();}this.onLoad(html);});var s="javascript:parent."+dijit._scopeName+".byId(\""+this.id+"\")._iframeSrc";ifr.setAttribute("src",s);this.editingArea.appendChild(ifr);if(dojo.isSafari<=4){var src=ifr.getAttribute("src");if(!src||src.indexOf("javascript")==-1){setTimeout(function(){ifr.setAttribute("src",s);},0);}}if(dn.nodeName=="LI"){dn.lastChild.style.marginTop="-1.2em";}dojo.addClass(this.domNode,this.baseClass);},_local2NativeFormatNames:{},_native2LocalFormatNames:{},_getIframeDocTxt:function(){var _6e0=dojo.getComputedStyle(this.domNode);var html="";var _6e1=true;if(dojo.isIE||dojo.isWebKit||(!this.height&&!dojo.isMoz)){html="<div id='dijitEditorBody'></div>";_6e1=false;}else{if(dojo.isMoz){this._cursorToStart=true;html="&nbsp;";}}var font=[_6e0.fontWeight,_6e0.fontSize,_6e0.fontFamily].join(" ");var _6e2=_6e0.lineHeight;if(_6e2.indexOf("px")>=0){_6e2=parseFloat(_6e2)/parseFloat(_6e0.fontSize);}else{if(_6e2.indexOf("em")>=0){_6e2=parseFloat(_6e2);}else{_6e2="normal";}}var _6e3="";var self=this;this.style.replace(/(^|;)\s*(line-|font-?)[^;]+/ig,function(_6e4){_6e4=_6e4.replace(/^;/ig,"")+";";var s=_6e4.split(":")[0];if(s){s=dojo.trim(s);s=s.toLowerCase();var i;var sC="";for(i=0;i<s.length;i++){var c=s.charAt(i);switch(c){case "-":i++;c=s.charAt(i).toUpperCase();default:sC+=c;}}dojo.style(self.domNode,sC,"");}_6e3+=_6e4+";";});var _6e5=dojo.query("label[for=\""+this.id+"\"]");return [this.isLeftToRight()?"<html>\n<head>\n":"<html dir='rtl'>\n<head>\n",(dojo.isMoz&&_6e5.length?"<title>"+_6e5[0].innerHTML+"</title>\n":""),"<meta http-equiv='Content-Type' content='text/html'>\n","<style>\n","\tbody,html {\n","\t\tbackground:transparent;\n","\t\tpadding: 1px 0 0 0;\n","\t\tmargin: -1px 0 0 0;\n",((dojo.isWebKit)?"\t\twidth: 100%;\n":""),((dojo.isWebKit)?"\t\theight: 100%;\n":""),"\t}\n","\tbody{\n","\t\ttop:0px;\n","\t\tleft:0px;\n","\t\tright:0px;\n","\t\tfont:",font,";\n",((this.height||dojo.isOpera)?"":"\t\tposition: fixed;\n"),"\t\tmin-height:",this.minHeight,";\n","\t\tline-height:",_6e2,";\n","\t}\n","\tp{ margin: 1em 0; }\n",(!_6e1&&!this.height?"\tbody,html {overflow-y: hidden;}\n":""),"\t#dijitEditorBody{overflow-x: auto; overflow-y:"+(this.height?"auto;":"hidden;")+" outline: 0px;}\n","\tli > ul:-moz-first-node, li > ol:-moz-first-node{ padding-top: 1.2em; }\n",(!dojo.isIE?"\tli{ min-height:1.2em; }\n":""),"</style>\n",this._applyEditingAreaStyleSheets(),"\n","</head>\n<body ",(_6e1?"id='dijitEditorBody' ":""),"onload='frameElement._loadFunc(window,document)' style='"+_6e3+"'>",html,"</body>\n</html>"].join("");},_applyEditingAreaStyleSheets:function(){var _6e6=[];if(this.styleSheets){_6e6=this.styleSheets.split(";");this.styleSheets="";}_6e6=_6e6.concat(this.editingAreaStyleSheets);this.editingAreaStyleSheets=[];var text="",i=0,url;while((url=_6e6[i++])){var _6e7=(new dojo._Url(dojo.global.location,url)).toString();this.editingAreaStyleSheets.push(_6e7);text+="<link rel=\"stylesheet\" type=\"text/css\" href=\""+_6e7+"\"/>";}return text;},addStyleSheet:function(uri){var url=uri.toString();if(url.charAt(0)=="."||(url.charAt(0)!="/"&&!uri.host)){url=(new dojo._Url(dojo.global.location,url)).toString();}if(dojo.indexOf(this.editingAreaStyleSheets,url)>-1){return;}this.editingAreaStyleSheets.push(url);this.onLoadDeferred.addCallback(dojo.hitch(this,function(){if(this.document.createStyleSheet){this.document.createStyleSheet(url);}else{var head=this.document.getElementsByTagName("head")[0];var _6e8=this.document.createElement("link");_6e8.rel="stylesheet";_6e8.type="text/css";_6e8.href=url;head.appendChild(_6e8);}}));},removeStyleSheet:function(uri){var url=uri.toString();if(url.charAt(0)=="."||(url.charAt(0)!="/"&&!uri.host)){url=(new dojo._Url(dojo.global.location,url)).toString();}var _6e9=dojo.indexOf(this.editingAreaStyleSheets,url);if(_6e9==-1){return;}delete this.editingAreaStyleSheets[_6e9];dojo.withGlobal(this.window,"query",dojo,["link:[href=\""+url+"\"]"]).orphan();},disabled:false,_mozSettingProps:{"styleWithCSS":false},_setDisabledAttr:function(_6ea){_6ea=!!_6ea;this._set("disabled",_6ea);if(!this.isLoaded){return;}if(dojo.isIE||dojo.isWebKit||dojo.isOpera){var _6eb=dojo.isIE&&(this.isLoaded||!this.focusOnLoad);if(_6eb){this.editNode.unselectable="on";}this.editNode.contentEditable=!_6ea;if(_6eb){var _6ec=this;setTimeout(function(){_6ec.editNode.unselectable="off";},0);}}else{try{this.document.designMode=(_6ea?"off":"on");}catch(e){return;}if(!_6ea&&this._mozSettingProps){var ps=this._mozSettingProps;for(var n in ps){if(ps.hasOwnProperty(n)){try{this.document.execCommand(n,false,ps[n]);}catch(e2){}}}}}this._disabledOK=true;},onLoad:function(html){if(!this.window.__registeredWindow){this.window.__registeredWindow=true;this._iframeRegHandle=dijit.registerIframe(this.iframe);}if(!dojo.isIE&&!dojo.isWebKit&&(this.height||dojo.isMoz)){this.editNode=this.document.body;}else{this.editNode=this.document.body.firstChild;var _6ed=this;if(dojo.isIE){this.tabStop=dojo.create("div",{tabIndex:-1},this.editingArea);this.iframe.onfocus=function(){_6ed.editNode.setActive();};}}this.focusNode=this.editNode;var _6ee=this.events.concat(this.captureEvents);var ap=this.iframe?this.document:this.editNode;dojo.forEach(_6ee,function(item){this.connect(ap,item.toLowerCase(),item);},this);this.connect(ap,"onmouseup","onClick");if(dojo.isIE){this.connect(this.document,"onmousedown","_onIEMouseDown");this.editNode.style.zoom=1;}else{this.connect(this.document,"onmousedown",function(){delete this._cursorToStart;});}if(dojo.isWebKit){this._webkitListener=this.connect(this.document,"onmouseup","onDisplayChanged");this.connect(this.document,"onmousedown",function(e){var t=e.target;if(t&&(t===this.document.body||t===this.document)){setTimeout(dojo.hitch(this,"placeCursorAtEnd"),0);}});}if(dojo.isIE){try{this.document.execCommand("RespectVisibilityInDesign",true,null);}catch(e){}}this.isLoaded=true;this.set("disabled",this.disabled);var _6ef=dojo.hitch(this,function(){this.setValue(html);if(this.onLoadDeferred){this.onLoadDeferred.callback(true);}this.onDisplayChanged();if(this.focusOnLoad){dojo.addOnLoad(dojo.hitch(this,function(){setTimeout(dojo.hitch(this,"focus"),this.updateInterval);}));}this.value=this.getValue(true);});if(this.setValueDeferred){this.setValueDeferred.addCallback(_6ef);}else{_6ef();}},onKeyDown:function(e){if(e.keyCode===dojo.keys.TAB&&this.isTabIndent){dojo.stopEvent(e);if(this.queryCommandEnabled((e.shiftKey?"outdent":"indent"))){this.execCommand((e.shiftKey?"outdent":"indent"));}}if(dojo.isIE){if(e.keyCode==dojo.keys.TAB&&!this.isTabIndent){if(e.shiftKey&&!e.ctrlKey&&!e.altKey){this.iframe.focus();}else{if(!e.shiftKey&&!e.ctrlKey&&!e.altKey){this.tabStop.focus();}}}else{if(e.keyCode===dojo.keys.BACKSPACE&&this.document.selection.type==="Control"){dojo.stopEvent(e);this.execCommand("delete");}else{if((65<=e.keyCode&&e.keyCode<=90)||(e.keyCode>=37&&e.keyCode<=40)){e.charCode=e.keyCode;this.onKeyPress(e);}}}}return true;},onKeyUp:function(e){return;},setDisabled:function(_6f0){dojo.deprecated("dijit.Editor::setDisabled is deprecated","use dijit.Editor::attr(\"disabled\",boolean) instead",2);this.set("disabled",_6f0);},_setValueAttr:function(_6f1){this.setValue(_6f1);},_setDisableSpellCheckAttr:function(_6f2){if(this.document){dojo.attr(this.document.body,"spellcheck",!_6f2);}else{this.onLoadDeferred.addCallback(dojo.hitch(this,function(){dojo.attr(this.document.body,"spellcheck",!_6f2);}));}this._set("disableSpellCheck",_6f2);},onKeyPress:function(e){var c=(e.keyChar&&e.keyChar.toLowerCase())||e.keyCode,_6f3=this._keyHandlers[c],args=arguments;if(_6f3&&!e.altKey){dojo.some(_6f3,function(h){if(!(h.shift^e.shiftKey)&&!(h.ctrl^(e.ctrlKey||e.metaKey))){if(!h.handler.apply(this,args)){e.preventDefault();}return true;}},this);}if(!this._onKeyHitch){this._onKeyHitch=dojo.hitch(this,"onKeyPressed");}setTimeout(this._onKeyHitch,1);return true;},addKeyHandler:function(key,ctrl,_6f4,_6f5){if(!dojo.isArray(this._keyHandlers[key])){this._keyHandlers[key]=[];}this._keyHandlers[key].push({shift:_6f4||false,ctrl:ctrl||false,handler:_6f5});},onKeyPressed:function(){this.onDisplayChanged();},onClick:function(e){this.onDisplayChanged(e);},_onIEMouseDown:function(e){if(!this._focused&&!this.disabled){this.focus();}},_onBlur:function(e){this.inherited(arguments);var _6f6=this.getValue(true);if(_6f6!=this.value){this.onChange(_6f6);}this._set("value",_6f6);},_onFocus:function(e){if(!this.disabled){if(!this._disabledOK){this.set("disabled",false);}this.inherited(arguments);}},blur:function(){if(!dojo.isIE&&this.window.document.documentElement&&this.window.document.documentElement.focus){this.window.document.documentElement.focus();}else{if(dojo.doc.body.focus){dojo.doc.body.focus();}}},focus:function(){if(!this.isLoaded){this.focusOnLoad=true;return;}if(this._cursorToStart){delete this._cursorToStart;if(this.editNode.childNodes){this.placeCursorAtStart();return;}}if(!dojo.isIE){dijit.focus(this.iframe);}else{if(this.editNode&&this.editNode.focus){this.iframe.fireEvent("onfocus",document.createEventObject());}}},updateInterval:200,_updateTimer:null,onDisplayChanged:function(e){if(this._updateTimer){clearTimeout(this._updateTimer);}if(!this._updateHandler){this._updateHandler=dojo.hitch(this,"onNormalizedDisplayChanged");}this._updateTimer=setTimeout(this._updateHandler,this.updateInterval);},onNormalizedDisplayChanged:function(){delete this._updateTimer;},onChange:function(_6f7){},_normalizeCommand:function(cmd,_6f8){var _6f9=cmd.toLowerCase();if(_6f9=="formatblock"){if(dojo.isSafari&&_6f8===undefined){_6f9="heading";}}else{if(_6f9=="hilitecolor"&&!dojo.isMoz){_6f9="backcolor";}}return _6f9;},_qcaCache:{},queryCommandAvailable:function(_6fa){var ca=this._qcaCache[_6fa];if(ca!==undefined){return ca;}return (this._qcaCache[_6fa]=this._queryCommandAvailable(_6fa));},_queryCommandAvailable:function(_6fb){var ie=1;var _6fc=1<<1;var _6fd=1<<2;var _6fe=1<<3;function _6ff(_700){return {ie:Boolean(_700&ie),mozilla:Boolean(_700&_6fc),webkit:Boolean(_700&_6fd),opera:Boolean(_700&_6fe)};};var _701=null;switch(_6fb.toLowerCase()){case "bold":case "italic":case "underline":case "subscript":case "superscript":case "fontname":case "fontsize":case "forecolor":case "hilitecolor":case "justifycenter":case "justifyfull":case "justifyleft":case "justifyright":case "delete":case "selectall":case "toggledir":_701=_6ff(_6fc|ie|_6fd|_6fe);break;case "createlink":case "unlink":case "removeformat":case "inserthorizontalrule":case "insertimage":case "insertorderedlist":case "insertunorderedlist":case "indent":case "outdent":case "formatblock":case "inserthtml":case "undo":case "redo":case "strikethrough":case "tabindent":_701=_6ff(_6fc|ie|_6fe|_6fd);break;case "blockdirltr":case "blockdirrtl":case "dirltr":case "dirrtl":case "inlinedirltr":case "inlinedirrtl":_701=_6ff(ie);break;case "cut":case "copy":case "paste":_701=_6ff(ie|_6fc|_6fd);break;case "inserttable":_701=_6ff(_6fc|ie);break;case "insertcell":case "insertcol":case "insertrow":case "deletecells":case "deletecols":case "deleterows":case "mergecells":case "splitcell":_701=_6ff(ie|_6fc);break;default:return false;}return (dojo.isIE&&_701.ie)||(dojo.isMoz&&_701.mozilla)||(dojo.isWebKit&&_701.webkit)||(dojo.isOpera&&_701.opera);},execCommand:function(_702,_703){var _704;this.focus();_702=this._normalizeCommand(_702,_703);if(_703!==undefined){if(_702=="heading"){throw new Error("unimplemented");}else{if((_702=="formatblock")&&dojo.isIE){_703="<"+_703+">";}}}var _705="_"+_702+"Impl";if(this[_705]){_704=this[_705](_703);}else{_703=arguments.length>1?_703:null;if(_703||_702!="createlink"){_704=this.document.execCommand(_702,false,_703);}}this.onDisplayChanged();return _704;},queryCommandEnabled:function(_706){if(this.disabled||!this._disabledOK){return false;}_706=this._normalizeCommand(_706);if(dojo.isMoz||dojo.isWebKit){if(_706=="unlink"){return this._sCall("hasAncestorElement",["a"]);}else{if(_706=="inserttable"){return true;}}}if(dojo.isWebKit){if(_706=="cut"||_706=="copy"){var sel=this.window.getSelection();if(sel){sel=sel.toString();}return !!sel;}else{if(_706=="paste"){return true;}}}var elem=dojo.isIE?this.document.selection.createRange():this.document;try{return elem.queryCommandEnabled(_706);}catch(e){return false;}},queryCommandState:function(_707){if(this.disabled||!this._disabledOK){return false;}_707=this._normalizeCommand(_707);try{return this.document.queryCommandState(_707);}catch(e){return false;}},queryCommandValue:function(_708){if(this.disabled||!this._disabledOK){return false;}var r;_708=this._normalizeCommand(_708);if(dojo.isIE&&_708=="formatblock"){r=this._native2LocalFormatNames[this.document.queryCommandValue(_708)];}else{if(dojo.isMoz&&_708==="hilitecolor"){var _709;try{_709=this.document.queryCommandValue("styleWithCSS");}catch(e){_709=false;}this.document.execCommand("styleWithCSS",false,true);r=this.document.queryCommandValue(_708);this.document.execCommand("styleWithCSS",false,_709);}else{r=this.document.queryCommandValue(_708);}}return r;},_sCall:function(name,args){return dojo.withGlobal(this.window,name,dijit._editor.selection,args);},placeCursorAtStart:function(){this.focus();var _70a=false;if(dojo.isMoz){var _70b=this.editNode.firstChild;while(_70b){if(_70b.nodeType==3){if(_70b.nodeValue.replace(/^\s+|\s+$/g,"").length>0){_70a=true;this._sCall("selectElement",[_70b]);break;}}else{if(_70b.nodeType==1){_70a=true;var tg=_70b.tagName?_70b.tagName.toLowerCase():"";if(/br|input|img|base|meta|area|basefont|hr|link/.test(tg)){this._sCall("selectElement",[_70b]);}else{this._sCall("selectElementChildren",[_70b]);}break;}}_70b=_70b.nextSibling;}}else{_70a=true;this._sCall("selectElementChildren",[this.editNode]);}if(_70a){this._sCall("collapse",[true]);}},placeCursorAtEnd:function(){this.focus();var _70c=false;if(dojo.isMoz){var last=this.editNode.lastChild;while(last){if(last.nodeType==3){if(last.nodeValue.replace(/^\s+|\s+$/g,"").length>0){_70c=true;this._sCall("selectElement",[last]);break;}}else{if(last.nodeType==1){_70c=true;if(last.lastChild){this._sCall("selectElement",[last.lastChild]);}else{this._sCall("selectElement",[last]);}break;}}last=last.previousSibling;}}else{_70c=true;this._sCall("selectElementChildren",[this.editNode]);}if(_70c){this._sCall("collapse",[false]);}},getValue:function(_70d){if(this.textarea){if(this.isClosed||!this.isLoaded){return this.textarea.value;}}return this._postFilterContent(null,_70d);},_getValueAttr:function(){return this.getValue(true);},setValue:function(html){if(!this.isLoaded){this.onLoadDeferred.addCallback(dojo.hitch(this,function(){this.setValue(html);}));return;}this._cursorToStart=true;if(this.textarea&&(this.isClosed||!this.isLoaded)){this.textarea.value=html;}else{html=this._preFilterContent(html);var node=this.isClosed?this.domNode:this.editNode;if(html&&dojo.isMoz&&html.toLowerCase()=="<p></p>"){html="<p>&nbsp;</p>";}if(!html&&dojo.isWebKit){html="&nbsp;";}node.innerHTML=html;this._preDomFilterContent(node);}this.onDisplayChanged();this._set("value",this.getValue(true));},replaceValue:function(html){if(this.isClosed){this.setValue(html);}else{if(this.window&&this.window.getSelection&&!dojo.isMoz){this.setValue(html);}else{if(this.window&&this.window.getSelection){html=this._preFilterContent(html);this.execCommand("selectall");if(!html){this._cursorToStart=true;html="&nbsp;";}this.execCommand("inserthtml",html);this._preDomFilterContent(this.editNode);}else{if(this.document&&this.document.selection){this.setValue(html);}}}}this._set("value",this.getValue(true));},_preFilterContent:function(html){var ec=html;dojo.forEach(this.contentPreFilters,function(ef){if(ef){ec=ef(ec);}});return ec;},_preDomFilterContent:function(dom){dom=dom||this.editNode;dojo.forEach(this.contentDomPreFilters,function(ef){if(ef&&dojo.isFunction(ef)){ef(dom);}},this);},_postFilterContent:function(dom,_70e){var ec;if(!dojo.isString(dom)){dom=dom||this.editNode;if(this.contentDomPostFilters.length){if(_70e){dom=dojo.clone(dom);}dojo.forEach(this.contentDomPostFilters,function(ef){dom=ef(dom);});}ec=dijit._editor.getChildrenHtml(dom);}else{ec=dom;}if(!dojo.trim(ec.replace(/^\xA0\xA0*/,"").replace(/\xA0\xA0*$/,"")).length){ec="";}dojo.forEach(this.contentPostFilters,function(ef){ec=ef(ec);});return ec;},_saveContent:function(e){var _70f=dojo.byId(dijit._scopeName+"._editor.RichText.value");if(_70f.value){_70f.value+=this._SEPARATOR;}_70f.value+=this.name+this._NAME_CONTENT_SEP+this.getValue(true);},escapeXml:function(str,_710){str=str.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");if(!_710){str=str.replace(/'/gm,"&#39;");}return str;},getNodeHtml:function(node){dojo.deprecated("dijit.Editor::getNodeHtml is deprecated","use dijit._editor.getNodeHtml instead",2);return dijit._editor.getNodeHtml(node);},getNodeChildrenHtml:function(dom){dojo.deprecated("dijit.Editor::getNodeChildrenHtml is deprecated","use dijit._editor.getChildrenHtml instead",2);return dijit._editor.getChildrenHtml(dom);},close:function(save){if(this.isClosed){return;}if(!arguments.length){save=true;}if(save){this._set("value",this.getValue(true));}if(this.interval){clearInterval(this.interval);}if(this._webkitListener){this.disconnect(this._webkitListener);delete this._webkitListener;}if(dojo.isIE){this.iframe.onfocus=null;}this.iframe._loadFunc=null;if(this._iframeRegHandle){dijit.unregisterIframe(this._iframeRegHandle);delete this._iframeRegHandle;}if(this.textarea){var s=this.textarea.style;s.position="";s.left=s.top="";if(dojo.isIE){s.overflow=this.__overflow;this.__overflow=null;}this.textarea.value=this.value;dojo.destroy(this.domNode);this.domNode=this.textarea;}else{this.domNode.innerHTML=this.value;}delete this.iframe;dojo.removeClass(this.domNode,this.baseClass);this.isClosed=true;this.isLoaded=false;delete this.editNode;delete this.focusNode;if(this.window&&this.window._frameElement){this.window._frameElement=null;}this.window=null;this.document=null;this.editingArea=null;this.editorObject=null;},destroy:function(){if(!this.isClosed){this.close(false);}this.inherited(arguments);if(dijit._editor._globalSaveHandler){delete dijit._editor._globalSaveHandler[this.id];}},_removeMozBogus:function(html){return html.replace(/\stype="_moz"/gi,"").replace(/\s_moz_dirty=""/gi,"").replace(/_moz_resizing="(true|false)"/gi,"");},_removeWebkitBogus:function(html){html=html.replace(/\sclass="webkit-block-placeholder"/gi,"");html=html.replace(/\sclass="apple-style-span"/gi,"");html=html.replace(/<meta charset=\"utf-8\" \/>/gi,"");return html;},_normalizeFontStyle:function(html){return html.replace(/<(\/)?strong([ \>])/gi,"<$1b$2").replace(/<(\/)?em([ \>])/gi,"<$1i$2");},_preFixUrlAttributes:function(html){return html.replace(/(?:(<a(?=\s).*?\shref=)("|')(.*?)\2)|(?:(<a\s.*?href=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2").replace(/(?:(<img(?=\s).*?\ssrc=)("|')(.*?)\2)|(?:(<img\s.*?src=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2");},_inserthorizontalruleImpl:function(_711){if(dojo.isIE){return this._inserthtmlImpl("<hr>");}return this.document.execCommand("inserthorizontalrule",false,_711);},_unlinkImpl:function(_712){if((this.queryCommandEnabled("unlink"))&&(dojo.isMoz||dojo.isWebKit)){var a=this._sCall("getAncestorElement",["a"]);this._sCall("selectElement",[a]);return this.document.execCommand("unlink",false,null);}return this.document.execCommand("unlink",false,_712);},_hilitecolorImpl:function(_713){var _714;if(dojo.isMoz){this.document.execCommand("styleWithCSS",false,true);_714=this.document.execCommand("hilitecolor",false,_713);this.document.execCommand("styleWithCSS",false,false);}else{_714=this.document.execCommand("hilitecolor",false,_713);}return _714;},_backcolorImpl:function(_715){if(dojo.isIE){_715=_715?_715:null;}return this.document.execCommand("backcolor",false,_715);},_forecolorImpl:function(_716){if(dojo.isIE){_716=_716?_716:null;}return this.document.execCommand("forecolor",false,_716);},_inserthtmlImpl:function(_717){_717=this._preFilterContent(_717);var rv=true;var _718=window.navigator.userAgent;if(dojo.isIE){var _719=this.document.selection.createRange();if(this.document.selection.type.toUpperCase()=="CONTROL"){var n=_719.item(0);while(_719.length){_719.remove(_719.item(0));}n.outerHTML=_717;}else{_719.pasteHTML(_717);}_719.select();}else{if(_718.indexOf("Trident/")!=-1){var sel,_71a,_71b;sel=this.document.getSelection();_71a=sel.getRangeAt(0);_71b=_71a.createContextualFragment(_717);_71a.insertNode(_71b);sel.removeAllRanges();sel.addRange(_71a);sel.collapseToEnd();}else{if(dojo.isMoz&&!_717.length){this._sCall("remove");}else{rv=this.document.execCommand("inserthtml",false,_717);}}}return rv;},_boldImpl:function(_71c){if(dojo.isIE){this._adaptIESelection();}return this.document.execCommand("bold",false,_71c);},_italicImpl:function(_71d){if(dojo.isIE){this._adaptIESelection();}return this.document.execCommand("italic",false,_71d);},_underlineImpl:function(_71e){if(dojo.isIE){this._adaptIESelection();}return this.document.execCommand("underline",false,_71e);},_strikethroughImpl:function(_71f){if(dojo.isIE){this._adaptIESelection();}return this.document.execCommand("strikethrough",false,_71f);},getHeaderHeight:function(){return this._getNodeChildrenHeight(this.header);},getFooterHeight:function(){return this._getNodeChildrenHeight(this.footer);},_getNodeChildrenHeight:function(node){var h=0;if(node&&node.childNodes){var i;for(i=0;i<node.childNodes.length;i++){var size=dojo.position(node.childNodes[i]);h+=size.h;}}return h;},_isNodeEmpty:function(node,_720){if(node.nodeType==1){if(node.childNodes.length>0){return this._isNodeEmpty(node.childNodes[0],_720);}return true;}else{if(node.nodeType==3){return (node.nodeValue.substring(_720)=="");}}return false;},_removeStartingRangeFromRange:function(node,_721){if(node.nextSibling){_721.setStart(node.nextSibling,0);}else{var _722=node.parentNode;while(_722&&_722.nextSibling==null){_722=_722.parentNode;}if(_722){_721.setStart(_722.nextSibling,0);}}return _721;},_adaptIESelection:function(){var _723=dijit.range.getSelection(this.window);if(_723&&_723.rangeCount&&!_723.isCollapsed){var _724=_723.getRangeAt(0);var _725=_724.startContainer;var _726=_724.startOffset;while(_725.nodeType==3&&_726>=_725.length&&_725.nextSibling){_726=_726-_725.length;_725=_725.nextSibling;}var _727=null;while(this._isNodeEmpty(_725,_726)&&_725!=_727){_727=_725;_724=this._removeStartingRangeFromRange(_725,_724);_725=_724.startContainer;_726=0;}_723.removeAllRanges();_723.addRange(_724);}}});}if(!dojo._hasResource["dijit.ToolbarSeparator"]){dojo._hasResource["dijit.ToolbarSeparator"]=true;dojo.provide("dijit.ToolbarSeparator");dojo.declare("dijit.ToolbarSeparator",[dijit._Widget,dijit._Templated],{templateString:"<div class=\"dijitToolbarSeparator dijitInline\" role=\"presentation\"></div>",buildRendering:function(){this.inherited(arguments);dojo.setSelectable(this.domNode,false);},isFocusable:function(){return false;}});}if(!dojo._hasResource["dijit.Toolbar"]){dojo._hasResource["dijit.Toolbar"]=true;dojo.provide("dijit.Toolbar");dojo.declare("dijit.Toolbar",[dijit._Widget,dijit._Templated,dijit._KeyNavContainer],{templateString:"<div class=\"dijit\" role=\"toolbar\" tabIndex=\"${tabIndex}\" dojoAttachPoint=\"containerNode\">"+"</div>",baseClass:"dijitToolbar",postCreate:function(){this.inherited(arguments);this.connectKeyNavHandlers(this.isLeftToRight()?[dojo.keys.LEFT_ARROW]:[dojo.keys.RIGHT_ARROW],this.isLeftToRight()?[dojo.keys.RIGHT_ARROW]:[dojo.keys.LEFT_ARROW]);},startup:function(){if(this._started){return;}this.startupKeyNavChildren();this.inherited(arguments);}});}if(!dojo._hasResource["dijit._editor._Plugin"]){dojo._hasResource["dijit._editor._Plugin"]=true;dojo.provide("dijit._editor._Plugin");dojo.declare("dijit._editor._Plugin",null,{constructor:function(args,node){this.params=args||{};dojo.mixin(this,this.params);this._connects=[];this._attrPairNames={};},editor:null,iconClassPrefix:"dijitEditorIcon",button:null,command:"",useDefaultCommand:true,buttonClass:dijit.form.Button,disabled:false,getLabel:function(key){return this.editor.commands[key];},_initButton:function(){if(this.command.length){var _728=this.getLabel(this.command),_729=this.editor,_72a=this.iconClassPrefix+" "+this.iconClassPrefix+this.command.charAt(0).toUpperCase()+this.command.substr(1);if(!this.button){var _72b=dojo.mixin({label:_728,dir:_729.dir,lang:_729.lang,showLabel:false,iconClass:_72a,dropDown:this.dropDown,tabIndex:"-1"},this.params||{});this.button=new this.buttonClass(_72b);}}if(this.get("disabled")&&this.button){this.button.set("disabled",this.get("disabled"));}},destroy:function(){dojo.forEach(this._connects,dojo.disconnect);if(this.dropDown){this.dropDown.destroyRecursive();}},connect:function(o,f,tf){this._connects.push(dojo.connect(o,f,this,tf));},updateState:function(){var e=this.editor,c=this.command,_72c,_72d;if(!e||!e.isLoaded||!c.length){return;}var _72e=this.get("disabled");if(this.button){try{_72d=!_72e&&e.queryCommandEnabled(c);if(this.enabled!==_72d){this.enabled=_72d;this.button.set("disabled",!_72d);}if(typeof this.button.checked=="boolean"){_72c=e.queryCommandState(c);if(this.checked!==_72c){this.checked=_72c;this.button.set("checked",e.queryCommandState(c));}}}catch(e){}}},setEditor:function(_72f){this.editor=_72f;this._initButton();if(this.button&&this.useDefaultCommand){if(this.editor.queryCommandAvailable(this.command)){this.connect(this.button,"onClick",dojo.hitch(this.editor,"execCommand",this.command,this.commandArg));}else{this.button.domNode.style.display="none";}}this.connect(this.editor,"onNormalizedDisplayChanged","updateState");},setToolbar:function(_730){if(this.button){_730.addChild(this.button);}},set:function(name,_731){if(typeof name==="object"){for(var x in name){this.set(x,name[x]);}return this;}var _732=this._getAttrNames(name);if(this[_732.s]){var _733=this[_732.s].apply(this,Array.prototype.slice.call(arguments,1));}else{this._set(name,_731);}return _733||this;},get:function(name){var _734=this._getAttrNames(name);return this[_734.g]?this[_734.g]():this[name];},_setDisabledAttr:function(_735){this.disabled=_735;this.updateState();},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}var uc=name.charAt(0).toUpperCase()+name.substr(1);return (apn[name]={s:"_set"+uc+"Attr",g:"_get"+uc+"Attr"});},_set:function(name,_736){var _737=this[name];this[name]=_736;}});}if(!dojo._hasResource["dojox.editor.plugins.ToolbarLineBreak"]){dojo._hasResource["dojox.editor.plugins.ToolbarLineBreak"]=true;dojo.provide("dojox.editor.plugins.ToolbarLineBreak");dojo.declare("dojox.editor.plugins.ToolbarLineBreak",[dijit._Widget,dijit._Templated],{templateString:"<span class='dijit dijitReset'><br></span>",postCreate:function(){dojo.setSelectable(this.domNode,false);},isFocusable:function(){return false;}});dojo.subscribe(dijit._scopeName+".Editor.getPlugin",null,function(o){if(o.plugin){return;}var name=o.args.name.toLowerCase();if(name==="||"||name==="toolbarlinebreak"){o.plugin=new dijit._editor._Plugin({button:new dojox.editor.plugins.ToolbarLineBreak(),setEditor:function(_738){this.editor=_738;}});}});}if(!dojo._hasResource["dijit._editor.plugins.FontChoice"]){dojo._hasResource["dijit._editor.plugins.FontChoice"]=true;dojo.provide("dijit._editor.plugins.FontChoice");dojo.declare("dijit._editor.plugins._FontDropDown",[dijit._Widget,dijit._Templated],{label:"",widgetsInTemplate:true,plainText:false,templateString:"<span style='white-space: nowrap' class='dijit dijitReset dijitInline'>"+"<label class='dijitLeft dijitInline' for='${selectId}'>${label}</label>"+"<input dojoType='dijit.form.FilteringSelect' required='false' labelType='html' labelAttr='label' searchAttr='name' "+"tabIndex='-1' id='${selectId}' dojoAttachPoint='select' value=''/>"+"</span>",postMixInProperties:function(){this.inherited(arguments);this.strings=dojo.i18n.getLocalization("dijit._editor","FontChoice");this.label=this.strings[this.command];this.id=dijit.getUniqueId(this.declaredClass.replace(/\./g,"_"));this.selectId=this.id+"_select";this.inherited(arguments);},postCreate:function(){var _739=dojo.map(this.values,function(_73a){var name=this.strings[_73a]||_73a;return {label:this.getLabel(_73a,name),name:name,value:_73a};},this);this.select.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",items:_739}});this.select.set("value","",false);this.disabled=this.select.get("disabled");},_setValueAttr:function(_73b,_73c){_73c=_73c!==false?true:false;this.select.set("value",dojo.indexOf(this.values,_73b)<0?"":_73b,_73c);if(!_73c){this.select._lastValueReported=null;}},_getValueAttr:function(){return this.select.get("value");},focus:function(){this.select.focus();},_setDisabledAttr:function(_73d){this.disabled=_73d;this.select.set("disabled",_73d);}});dojo.declare("dijit._editor.plugins._FontNameDropDown",dijit._editor.plugins._FontDropDown,{generic:false,command:"fontName",postMixInProperties:function(){if(!this.values){this.values=this.generic?["serif","sans-serif","monospace","cursive","fantasy"]:["Arial","Times New Roman","Comic Sans MS","Courier New"];}this.inherited(arguments);},getLabel:function(_73e,name){if(this.plainText){return name;}else{return "<div style='font-family: "+_73e+"'>"+name+"</div>";}},_setValueAttr:function(_73f,_740){_740=_740!==false?true:false;if(this.generic){var map={"Arial":"sans-serif","Helvetica":"sans-serif","Myriad":"sans-serif","Times":"serif","Times New Roman":"serif","Comic Sans MS":"cursive","Apple Chancery":"cursive","Courier":"monospace","Courier New":"monospace","Papyrus":"fantasy"};_73f=map[_73f]||_73f;}if(_73f.indexOf("Arial")!==-1){_73f="Arial";}this.inherited(arguments,[_73f,_740]);}});dojo.declare("dijit._editor.plugins._FontSizeDropDown",dijit._editor.plugins._FontDropDown,{command:"fontSize",values:[1,2,3,4,5,6,7],getLabel:function(_741,name){if(this.plainText){return name;}else{return "<font size="+_741+"'>"+name+"</font>";}},_setValueAttr:function(_742,_743){_743=_743!==false?true:false;if(_742.indexOf&&_742.indexOf("px")!=-1){var _744=parseInt(_742,10);_742={10:1,13:2,16:3,18:4,24:5,32:6,48:7}[_744]||_742;}this.inherited(arguments,[_742,_743]);}});dojo.declare("dijit._editor.plugins._FormatBlockDropDown",dijit._editor.plugins._FontDropDown,{command:"formatBlock",values:["noFormat","p","h1","h2","h3","pre"],postCreate:function(){this.inherited(arguments);this.set("value","noFormat",false);},getLabel:function(_745,name){if(this.plainText||_745=="noFormat"){return name;}else{return "<"+_745+">"+name+"</"+_745+">";}},_execCommand:function(_746,_747,_748){if(_748==="noFormat"){var _749;var end;var sel=dijit.range.getSelection(_746.window);if(sel&&sel.rangeCount>0){var _74a=sel.getRangeAt(0);var node,tag;if(_74a){_749=_74a.startContainer;end=_74a.endContainer;while(_749&&_749!==_746.editNode&&_749!==_746.document.body&&_749.nodeType!==1){_749=_749.parentNode;}while(end&&end!==_746.editNode&&end!==_746.document.body&&end.nodeType!==1){end=end.parentNode;}var _74b=dojo.hitch(this,function(node,_74c){if(node.childNodes&&node.childNodes.length){var i;for(i=0;i<node.childNodes.length;i++){var c=node.childNodes[i];if(c.nodeType==1){if(dojo.withGlobal(_746.window,"inSelection",dijit._editor.selection,[c])){var tag=c.tagName?c.tagName.toLowerCase():"";if(dojo.indexOf(this.values,tag)!==-1){_74c.push(c);}_74b(c,_74c);}}}}});var _74d=dojo.hitch(this,function(_74e){if(_74e&&_74e.length){_746.beginEditing();while(_74e.length){this._removeFormat(_746,_74e.pop());}_746.endEditing();}});var _74f=[];if(_749==end){var _750;node=_749;while(node&&node!==_746.editNode&&node!==_746.document.body){if(node.nodeType==1){tag=node.tagName?node.tagName.toLowerCase():"";if(dojo.indexOf(this.values,tag)!==-1){_750=node;break;}}node=node.parentNode;}_74b(_749,_74f);if(_750){_74f=[_750].concat(_74f);}_74d(_74f);}else{node=_749;while(dojo.withGlobal(_746.window,"inSelection",dijit._editor.selection,[node])){if(node.nodeType==1){tag=node.tagName?node.tagName.toLowerCase():"";if(dojo.indexOf(this.values,tag)!==-1){_74f.push(node);}_74b(node,_74f);}node=node.nextSibling;}_74d(_74f);}_746.onDisplayChanged();}}}else{_746.execCommand(_747,_748);}},_removeFormat:function(_751,node){if(_751.customUndo){while(node.firstChild){dojo.place(node.firstChild,node,"before");}node.parentNode.removeChild(node);}else{dojo.withGlobal(_751.window,"selectElementChildren",dijit._editor.selection,[node]);var html=dojo.withGlobal(_751.window,"getSelectedHtml",dijit._editor.selection,[null]);dojo.withGlobal(_751.window,"selectElement",dijit._editor.selection,[node]);_751.execCommand("inserthtml",html||"");}}});dojo.declare("dijit._editor.plugins.FontChoice",dijit._editor._Plugin,{useDefaultCommand:false,_initButton:function(){var _752={fontName:dijit._editor.plugins._FontNameDropDown,fontSize:dijit._editor.plugins._FontSizeDropDown,formatBlock:dijit._editor.plugins._FormatBlockDropDown}[this.command],_753=this.params;if(this.params.custom){_753.values=this.params.custom;}var _754=this.editor;this.button=new _752(dojo.delegate({dir:_754.dir,lang:_754.lang},_753));this.connect(this.button.select,"onChange",function(_755){this.editor.focus();if(this.command=="fontName"&&_755.indexOf(" ")!=-1){_755="'"+_755+"'";}if(this.button._execCommand){this.button._execCommand(this.editor,this.command,_755);}else{this.editor.execCommand(this.command,_755);}});},updateState:function(){var _756=this.editor;var _757=this.command;if(!_756||!_756.isLoaded||!_757.length){return;}if(this.button){var _758=this.get("disabled");this.button.set("disabled",_758);if(_758){return;}var _759;try{_759=_756.queryCommandValue(_757)||"";}catch(e){_759="";}var _75a=dojo.isString(_759)&&(_759.match(/'([^']*)'/)||_759.match(/"([^"]*)"/));if(_75a){_759=_75a[1];}if(_757==="formatBlock"){if(!_759||_759=="p"){_759=null;var elem;var sel=dijit.range.getSelection(this.editor.window);if(sel&&sel.rangeCount>0){var _75b=sel.getRangeAt(0);if(_75b){elem=_75b.endContainer;}}while(elem&&elem!==_756.editNode&&elem!==_756.document){var tg=elem.tagName?elem.tagName.toLowerCase():"";if(tg&&dojo.indexOf(this.button.values,tg)>-1){_759=tg;break;}elem=elem.parentNode;}if(!_759){_759="noFormat";}}else{if(dojo.indexOf(this.button.values,_759)<0){_759="noFormat";}}}if(_759!==""&&_759!==this.button.get("value")){this.button.set("value",_759,false);}}}});dojo.subscribe(dijit._scopeName+".Editor.getPlugin",null,function(o){if(o.plugin){return;}switch(o.args.name){case "fontName":case "fontSize":case "formatBlock":o.plugin=new dijit._editor.plugins.FontChoice({command:o.args.name,plainText:o.args.plainText?o.args.plainText:false});}});}if(!dojo._hasResource["dojo.colors"]){dojo._hasResource["dojo.colors"]=true;dojo.provide("dojo.colors");dojo.getObject("colors",true,dojo);(function(){var _75c=function(m1,m2,h){if(h<0){++h;}if(h>1){--h;}var h6=6*h;if(h6<1){return m1+(m2-m1)*h6;}if(2*h<1){return m2;}if(3*h<2){return m1+(m2-m1)*(2/3-h)*6;}return m1;};dojo.colorFromRgb=function(_75d,obj){var m=_75d.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(m){var c=m[2].split(/\s*,\s*/),l=c.length,t=m[1],a;if((t=="rgb"&&l==3)||(t=="rgba"&&l==4)){var r=c[0];if(r.charAt(r.length-1)=="%"){a=dojo.map(c,function(x){return parseFloat(x)*2.56;});if(l==4){a[3]=c[3];}return dojo.colorFromArray(a,obj);}return dojo.colorFromArray(c,obj);}if((t=="hsl"&&l==3)||(t=="hsla"&&l==4)){var H=((parseFloat(c[0])%360)+360)%360/360,S=parseFloat(c[1])/100,L=parseFloat(c[2])/100,m2=L<=0.5?L*(S+1):L+S-L*S,m1=2*L-m2;a=[_75c(m1,m2,H+1/3)*256,_75c(m1,m2,H)*256,_75c(m1,m2,H-1/3)*256,1];if(l==4){a[3]=c[3];}return dojo.colorFromArray(a,obj);}}return null;};var _75e=function(c,low,high){c=Number(c);return isNaN(c)?high:c<low?low:c>high?high:c;};dojo.Color.prototype.sanitize=function(){var t=this;t.r=Math.round(_75e(t.r,0,255));t.g=Math.round(_75e(t.g,0,255));t.b=Math.round(_75e(t.b,0,255));t.a=_75e(t.a,0,1);return this;};})();dojo.colors.makeGrey=function(g,a){return dojo.colorFromArray([g,g,g,a]);};dojo.mixin(dojo.Color.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],transparent:[0,0,0,0],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});}if(!dojo._hasResource["dijit._PaletteMixin"]){dojo._hasResource["dijit._PaletteMixin"]=true;dojo.provide("dijit._PaletteMixin");dojo.declare("dijit._PaletteMixin",[dijit._CssStateMixin],{defaultTimeout:500,timeoutChangeRate:0.9,value:null,_selectedCell:-1,tabIndex:"0",cellClass:"dijitPaletteCell",dyeClass:"",_preparePalette:function(_75f,_760,_761){this._cells=[];var url=this._blankGif;_761=_761||dojo.getObject(this.dyeClass);for(var row=0;row<_75f.length;row++){var _762=dojo.create("tr",{tabIndex:"-1"},this.gridNode);for(var col=0;col<_75f[row].length;col++){var _763=_75f[row][col];if(_763){var _764=new _761(_763,row,col);var _765=dojo.create("td",{"class":this.cellClass,tabIndex:"-1",title:_760[_763]});_764.fillCell(_765,url);this.connect(_765,"ondijitclick","_onCellClick");this._trackMouseState(_765,this.cellClass);dojo.place(_765,_762);_765.index=this._cells.length;this._cells.push({node:_765,dye:_764});}}}this._xDim=_75f[0].length;this._yDim=_75f.length;var _766={UP_ARROW:-this._xDim,DOWN_ARROW:this._xDim,RIGHT_ARROW:this.isLeftToRight()?1:-1,LEFT_ARROW:this.isLeftToRight()?-1:1};for(var key in _766){this._connects.push(dijit.typematic.addKeyListener(this.domNode,{charOrCode:dojo.keys[key],ctrlKey:false,altKey:false,shiftKey:false},this,function(){var _767=_766[key];return function(_768){this._navigateByKey(_767,_768);};}(),this.timeoutChangeRate,this.defaultTimeout));}},postCreate:function(){this.inherited(arguments);this._setCurrent(this._cells[0].node);},focus:function(){dijit.focus(this._currentFocus);},_onCellClick:function(evt){var _769=evt.currentTarget,_76a=this._getDye(_769).getValue();this._setCurrent(_769);setTimeout(dojo.hitch(this,function(){dijit.focus(_769);this._setValueAttr(_76a,true);}));dojo.removeClass(_769,"dijitPaletteCellHover");dojo.stopEvent(evt);},_setCurrent:function(node){if("_currentFocus" in this){dojo.attr(this._currentFocus,"tabIndex","-1");}this._currentFocus=node;if(node){dojo.attr(node,"tabIndex",this.tabIndex);}},_setValueAttr:function(_76b,_76c){if(this._selectedCell>=0){dojo.removeClass(this._cells[this._selectedCell].node,"dijitPaletteCellSelected");}this._selectedCell=-1;if(_76b){for(var i=0;i<this._cells.length;i++){if(_76b==this._cells[i].dye.getValue()){this._selectedCell=i;dojo.addClass(this._cells[i].node,"dijitPaletteCellSelected");break;}}}this._set("value",this._selectedCell>=0?_76b:null);if(_76c||_76c===undefined){this.onChange(_76b);}},onChange:function(_76d){},_navigateByKey:function(_76e,_76f){if(_76f==-1){return;}var _770=this._currentFocus.index+_76e;if(_770<this._cells.length&&_770>-1){var _771=this._cells[_770].node;this._setCurrent(_771);setTimeout(dojo.hitch(dijit,"focus",_771),0);}},_getDye:function(cell){return this._cells[cell.index].dye;}});}if(!dojo._hasResource["dijit.ColorPalette"]){dojo._hasResource["dijit.ColorPalette"]=true;dojo.provide("dijit.ColorPalette");dojo.declare("dijit.ColorPalette",[dijit._Widget,dijit._Templated,dijit._PaletteMixin],{palette:"7x10",_palettes:{"7x10":[["white","seashell","cornsilk","lemonchiffon","lightyellow","palegreen","paleturquoise","lightcyan","lavender","plum"],["lightgray","pink","bisque","moccasin","khaki","lightgreen","lightseagreen","lightskyblue","cornflowerblue","violet"],["silver","lightcoral","sandybrown","orange","palegoldenrod","chartreuse","mediumturquoise","skyblue","mediumslateblue","orchid"],["gray","red","orangered","darkorange","yellow","limegreen","darkseagreen","royalblue","slateblue","mediumorchid"],["dimgray","crimson","chocolate","coral","gold","forestgreen","seagreen","blue","blueviolet","darkorchid"],["darkslategray","firebrick","saddlebrown","sienna","olive","green","darkcyan","mediumblue","darkslateblue","darkmagenta"],["black","darkred","maroon","brown","darkolivegreen","darkgreen","midnightblue","navy","indigo","purple"]],"3x4":[["white","lime","green","blue"],["silver","yellow","fuchsia","navy"],["gray","red","purple","black"]]},templateString:dojo.cache("dijit","templates/ColorPalette.html","<div class=\"dijitInline dijitColorPalette\">\n\t<table class=\"dijitPaletteTable\" cellSpacing=\"0\" cellPadding=\"0\">\n\t\t<tbody dojoAttachPoint=\"gridNode\"></tbody>\n\t</table>\n</div>\n"),baseClass:"dijitColorPalette",buildRendering:function(){this.inherited(arguments);this._preparePalette(this._palettes[this.palette],dojo.i18n.getLocalization("dojo","colors",this.lang),dojo.declare(dijit._Color,{hc:dojo.hasClass(dojo.body(),"dijit_a11y"),palette:this.palette}));}});dojo.declare("dijit._Color",dojo.Color,{template:"<span class='dijitInline dijitPaletteImg'>"+"<img src='${blankGif}' alt='${alt}' class='dijitColorPaletteSwatch' style='background-color: ${color}'/>"+"</span>",hcTemplate:"<span class='dijitInline dijitPaletteImg' style='position: relative; overflow: hidden; height: 12px; width: 14px;'>"+"<img src='${image}' alt='${alt}' style='position: absolute; left: ${left}px; top: ${top}px; ${size}'/>"+"</span>",_imagePaths:{"7x10":dojo.moduleUrl("dijit.themes","a11y/colors7x10.png"),"3x4":dojo.moduleUrl("dijit.themes","a11y/colors3x4.png")},constructor:function(_772,row,col){this._alias=_772;this._row=row;this._col=col;this.setColor(dojo.Color.named[_772]);},getValue:function(){return this.toHex();},fillCell:function(cell,_773){var html=dojo.string.substitute(this.hc?this.hcTemplate:this.template,{color:this.toHex(),blankGif:_773,alt:this._alias,image:this._imagePaths[this.palette].toString(),left:this._col*-20-5,top:this._row*-20-5,size:this.palette=="7x10"?"height: 145px; width: 206px":"height: 64px; width: 86px"});dojo.place(html,cell);}});}if(!dojo._hasResource["dijit._editor.plugins.TextColor"]){dojo._hasResource["dijit._editor.plugins.TextColor"]=true;dojo.provide("dijit._editor.plugins.TextColor");dojo.declare("dijit._editor.plugins.TextColor",dijit._editor._Plugin,{buttonClass:dijit.form.DropDownButton,useDefaultCommand:false,constructor:function(){this.dropDown=new dijit.ColorPalette();this.connect(this.dropDown,"onChange",function(_774){this.editor.execCommand(this.command,_774);});},updateState:function(){var _775=this.editor;var _776=this.command;if(!_775||!_775.isLoaded||!_776.length){return;}if(this.button){var _777=this.get("disabled");this.button.set("disabled",_777);if(_777){return;}var _778;try{_778=_775.queryCommandValue(_776)||"";}catch(e){_778="";}}if(_778==""){_778="#000000";}if(_778=="transparent"){_778="#ffffff";}if(typeof _778=="string"){if(_778.indexOf("rgb")>-1){_778=dojo.colorFromRgb(_778).toHex();}}else{_778=((_778&255)<<16)|(_778&65280)|((_778&16711680)>>>16);_778=_778.toString(16);_778="#000000".slice(0,7-_778.length)+_778;}if(_778!==this.dropDown.get("value")){this.dropDown.set("value",_778,false);}}});dojo.subscribe(dijit._scopeName+".Editor.getPlugin",null,function(o){if(o.plugin){return;}switch(o.args.name){case "foreColor":case "hiliteColor":o.plugin=new dijit._editor.plugins.TextColor({command:o.args.name});}});}if(!dojo._hasResource["dijit._editor.plugins.EnterKeyHandling"]){dojo._hasResource["dijit._editor.plugins.EnterKeyHandling"]=true;dojo.provide("dijit._editor.plugins.EnterKeyHandling");dojo.declare("dijit._editor.plugins.EnterKeyHandling",dijit._editor._Plugin,{blockNodeForEnter:"BR",constructor:function(args){if(args){if("blockNodeForEnter" in args){args.blockNodeForEnter=args.blockNodeForEnter.toUpperCase();}dojo.mixin(this,args);}},setEditor:function(_779){if(this.editor===_779){return;}this.editor=_779;if(this.blockNodeForEnter=="BR"){this.editor.customUndo=true;_779.onLoadDeferred.addCallback(dojo.hitch(this,function(d){this.connect(_779.document,"onkeypress",function(e){if(e.charOrCode==dojo.keys.ENTER){var ne=dojo.mixin({},e);ne.shiftKey=true;if(!this.handleEnterKey(ne)){dojo.stopEvent(e);}}});return d;}));}else{if(this.blockNodeForEnter){var h=dojo.hitch(this,this.handleEnterKey);_779.addKeyHandler(13,0,0,h);_779.addKeyHandler(13,0,1,h);this.connect(this.editor,"onKeyPressed","onKeyPressed");}}},onKeyPressed:function(e){if(this._checkListLater){if(dojo.withGlobal(this.editor.window,"isCollapsed",dijit)){var _77a=dojo.withGlobal(this.editor.window,"getAncestorElement",dijit._editor.selection,["LI"]);if(!_77a){dijit._editor.RichText.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter);var _77b=dojo.withGlobal(this.editor.window,"getAncestorElement",dijit._editor.selection,[this.blockNodeForEnter]);if(_77b){_77b.innerHTML=this.bogusHtmlContent;if(dojo.isIE){var r=this.editor.document.selection.createRange();r.move("character",-1);r.select();}}else{console.error("onKeyPressed: Cannot find the new block node");}}else{if(dojo.isMoz){if(_77a.parentNode.parentNode.nodeName=="LI"){_77a=_77a.parentNode.parentNode;}}var fc=_77a.firstChild;if(fc&&fc.nodeType==1&&(fc.nodeName=="UL"||fc.nodeName=="OL")){_77a.insertBefore(fc.ownerDocument.createTextNode(" "),fc);var _77c=dijit.range.create(this.editor.window);_77c.setStart(_77a.firstChild,0);var _77d=dijit.range.getSelection(this.editor.window,true);_77d.removeAllRanges();_77d.addRange(_77c);}}}this._checkListLater=false;}if(this._pressedEnterInBlock){if(this._pressedEnterInBlock.previousSibling){this.removeTrailingBr(this._pressedEnterInBlock.previousSibling);}delete this._pressedEnterInBlock;}},bogusHtmlContent:"&nbsp;",blockNodes:/^(?:P|H1|H2|H3|H4|H5|H6|LI)$/,handleEnterKey:function(e){var _77e,_77f,_780,_781,_782,_783,doc=this.editor.document,br,rs,txt;if(e.shiftKey){var _784=dojo.withGlobal(this.editor.window,"getParentElement",dijit._editor.selection);var _785=dijit.range.getAncestor(_784,this.blockNodes);if(_785){if(_785.tagName=="LI"){return true;}_77e=dijit.range.getSelection(this.editor.window);_77f=_77e.getRangeAt(0);if(!_77f.collapsed){_77f.deleteContents();_77e=dijit.range.getSelection(this.editor.window);_77f=_77e.getRangeAt(0);}if(dijit.range.atBeginningOfContainer(_785,_77f.startContainer,_77f.startOffset)){br=doc.createElement("br");_780=dijit.range.create(this.editor.window);_785.insertBefore(br,_785.firstChild);_780.setStartBefore(br.nextSibling);_77e.removeAllRanges();_77e.addRange(_780);}else{if(dijit.range.atEndOfContainer(_785,_77f.startContainer,_77f.startOffset)){_780=dijit.range.create(this.editor.window);br=doc.createElement("br");_785.appendChild(br);_785.appendChild(doc.createTextNode(" "));_780.setStart(_785.lastChild,0);_77e.removeAllRanges();_77e.addRange(_780);}else{rs=_77f.startContainer;if(rs&&rs.nodeType==3){txt=rs.nodeValue;dojo.withGlobal(this.editor.window,function(){_781=doc.createTextNode(txt.substring(0,_77f.startOffset));_782=doc.createTextNode(txt.substring(_77f.startOffset));_783=doc.createElement("br");if(_782.nodeValue==""&&dojo.isWebKit){_782=doc.createTextNode(" ");}dojo.place(_781,rs,"after");dojo.place(_783,_781,"after");dojo.place(_782,_783,"after");dojo.destroy(rs);_780=dijit.range.create(dojo.gobal);_780.setStart(_782,0);_77e.removeAllRanges();_77e.addRange(_780);});return false;}return true;}}}else{_77e=dijit.range.getSelection(this.editor.window);if(_77e.rangeCount){_77f=_77e.getRangeAt(0);if(_77f&&_77f.startContainer){if(!_77f.collapsed){_77f.deleteContents();_77e=dijit.range.getSelection(this.editor.window);_77f=_77e.getRangeAt(0);}rs=_77f.startContainer;if(rs&&rs.nodeType==3){dojo.withGlobal(this.editor.window,dojo.hitch(this,function(){var _786=false;var _787=_77f.startOffset;if(rs.length<_787){ret=this._adjustNodeAndOffset(rs,_787);rs=ret.node;_787=ret.offset;}txt=rs.nodeValue;_781=doc.createTextNode(txt.substring(0,_787));_782=doc.createTextNode(txt.substring(_787));_783=doc.createElement("br");if(!_782.length){_782=doc.createTextNode(" ");_786=true;}if(_781.length){dojo.place(_781,rs,"after");}else{_781=rs;}dojo.place(_783,_781,"after");dojo.place(_782,_783,"after");dojo.destroy(rs);_780=dijit.range.create(dojo.gobal);_780.setStart(_782,0);_780.setEnd(_782,_782.length);_77e.removeAllRanges();_77e.addRange(_780);if(_786&&!dojo.isWebKit){dijit._editor.selection.remove();}else{dijit._editor.selection.collapse(true);}}));}else{dojo.withGlobal(this.editor.window,dojo.hitch(this,function(){var _788=doc.createElement("br");rs.appendChild(_788);var _789=doc.createTextNode(" ");rs.appendChild(_789);_780=dijit.range.create(dojo.global);_780.setStart(_789,0);_780.setEnd(_789,_789.length);_77e.removeAllRanges();_77e.addRange(_780);dijit._editor.selection.collapse(true);}));}}}else{dijit._editor.RichText.prototype.execCommand.call(this.editor,"inserthtml","<br>");}}return false;}var _78a=true;_77e=dijit.range.getSelection(this.editor.window);_77f=_77e.getRangeAt(0);if(!_77f.collapsed){_77f.deleteContents();_77e=dijit.range.getSelection(this.editor.window);_77f=_77e.getRangeAt(0);}var _78b=dijit.range.getBlockAncestor(_77f.endContainer,null,this.editor.editNode);var _78c=_78b.blockNode;if((this._checkListLater=(_78c&&(_78c.nodeName=="LI"||_78c.parentNode.nodeName=="LI")))){if(dojo.isMoz){this._pressedEnterInBlock=_78c;}if(/^(\s|&nbsp;|\xA0|<span\b[^>]*\bclass=['"]Apple-style-span['"][^>]*>(\s|&nbsp;|\xA0)<\/span>)?(<br>)?$/.test(_78c.innerHTML)){_78c.innerHTML="";if(dojo.isWebKit){_780=dijit.range.create(this.editor.window);_780.setStart(_78c,0);_77e.removeAllRanges();_77e.addRange(_780);}this._checkListLater=false;}return true;}if(!_78b.blockNode||_78b.blockNode===this.editor.editNode){try{dijit._editor.RichText.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter);}catch(e2){}_78b={blockNode:dojo.withGlobal(this.editor.window,"getAncestorElement",dijit._editor.selection,[this.blockNodeForEnter]),blockContainer:this.editor.editNode};if(_78b.blockNode){if(_78b.blockNode!=this.editor.editNode&&(!(_78b.blockNode.textContent||_78b.blockNode.innerHTML).replace(/^\s+|\s+$/g,"").length)){this.removeTrailingBr(_78b.blockNode);return false;}}else{_78b.blockNode=this.editor.editNode;}_77e=dijit.range.getSelection(this.editor.window);_77f=_77e.getRangeAt(0);}var _78d=doc.createElement(this.blockNodeForEnter);_78d.innerHTML=this.bogusHtmlContent;this.removeTrailingBr(_78b.blockNode);var _78e=_77f.endOffset;var node=_77f.endContainer;if(node.length<_78e){var ret=this._adjustNodeAndOffset(node,_78e);node=ret.node;_78e=ret.offset;}if(dijit.range.atEndOfContainer(_78b.blockNode,node,_78e)){if(_78b.blockNode===_78b.blockContainer){_78b.blockNode.appendChild(_78d);}else{dojo.place(_78d,_78b.blockNode,"after");}_78a=false;_780=dijit.range.create(this.editor.window);_780.setStart(_78d,0);_77e.removeAllRanges();_77e.addRange(_780);if(this.editor.height){dojo.window.scrollIntoView(_78d);}}else{if(dijit.range.atBeginningOfContainer(_78b.blockNode,_77f.startContainer,_77f.startOffset)){dojo.place(_78d,_78b.blockNode,_78b.blockNode===_78b.blockContainer?"first":"before");if(_78d.nextSibling&&this.editor.height){_780=dijit.range.create(this.editor.window);_780.setStart(_78d.nextSibling,0);_77e.removeAllRanges();_77e.addRange(_780);dojo.window.scrollIntoView(_78d.nextSibling);}_78a=false;}else{if(_78b.blockNode===_78b.blockContainer){_78b.blockNode.appendChild(_78d);}else{dojo.place(_78d,_78b.blockNode,"after");}_78a=false;if(_78b.blockNode.style){if(_78d.style){if(_78b.blockNode.style.cssText){_78d.style.cssText=_78b.blockNode.style.cssText;}}}rs=_77f.startContainer;var _78f;if(rs&&rs.nodeType==3){var _790,_791;_78e=_77f.endOffset;if(rs.length<_78e){ret=this._adjustNodeAndOffset(rs,_78e);rs=ret.node;_78e=ret.offset;}txt=rs.nodeValue;_781=doc.createTextNode(txt.substring(0,_78e));_782=doc.createTextNode(txt.substring(_78e,txt.length));dojo.place(_781,rs,"before");dojo.place(_782,rs,"after");dojo.destroy(rs);var _792=_781.parentNode;while(_792!==_78b.blockNode){var tg=_792.tagName;var _793=doc.createElement(tg);if(_792.style){if(_793.style){if(_792.style.cssText){_793.style.cssText=_792.style.cssText;}}}if(_792.tagName==="FONT"){if(_792.color){_793.color=_792.color;}if(_792.face){_793.face=_792.face;}if(_792.size){_793.size=_792.size;}}_790=_782;while(_790){_791=_790.nextSibling;_793.appendChild(_790);_790=_791;}dojo.place(_793,_792,"after");_781=_792;_782=_793;_792=_792.parentNode;}_790=_782;if(_790.nodeType==1||(_790.nodeType==3&&_790.nodeValue)){_78d.innerHTML="";}_78f=_790;while(_790){_791=_790.nextSibling;_78d.appendChild(_790);_790=_791;}}_780=dijit.range.create(this.editor.window);var _794;var _795=_78f;if(this.blockNodeForEnter!=="BR"){while(_795){_794=_795;_791=_795.firstChild;_795=_791;}if(_794&&_794.parentNode){_78d=_794.parentNode;_780.setStart(_78d,0);_77e.removeAllRanges();_77e.addRange(_780);if(this.editor.height){dijit.scrollIntoView(_78d);}if(dojo.isMoz){this._pressedEnterInBlock=_78b.blockNode;}}else{_78a=true;}}else{_780.setStart(_78d,0);_77e.removeAllRanges();_77e.addRange(_780);if(this.editor.height){dijit.scrollIntoView(_78d);}if(dojo.isMoz){this._pressedEnterInBlock=_78b.blockNode;}}}}return _78a;},_adjustNodeAndOffset:function(node,_796){while(node.length<_796&&node.nextSibling&&node.nextSibling.nodeType==3){_796=_796-node.length;node=node.nextSibling;}var ret={"node":node,"offset":_796};return ret;},removeTrailingBr:function(_797){var para=/P|DIV|LI/i.test(_797.tagName)?_797:dijit._editor.selection.getParentOfType(_797,["P","DIV","LI"]);if(!para){return;}if(para.lastChild){if((para.childNodes.length>1&&para.lastChild.nodeType==3&&/^[\s\xAD]*$/.test(para.lastChild.nodeValue))||para.lastChild.tagName=="BR"){dojo.destroy(para.lastChild);}}if(!para.childNodes.length){para.innerHTML=this.bogusHtmlContent;}}});}if(!dojo._hasResource["dijit.Editor"]){dojo._hasResource["dijit.Editor"]=true;dojo.provide("dijit.Editor");dojo.declare("dijit.Editor",dijit._editor.RichText,{plugins:null,extraPlugins:null,constructor:function(){if(!dojo.isArray(this.plugins)){this.plugins=["undo","redo","|","cut","copy","paste","|","bold","italic","underline","strikethrough","|","insertOrderedList","insertUnorderedList","indent","outdent","|","justifyLeft","justifyRight","justifyCenter","justifyFull","|","foreColor","hiliteColor","||","fontName","||","fontSize","||","formatBlock","dijit._editor.plugins.EnterKeyHandling"];}this._plugins=[];this._editInterval=this.editActionInterval*1000;if(dojo.isIE){this.events.push("onBeforeDeactivate");this.events.push("onBeforeActivate");}},setupDefaultShortcuts:function(){},postMixInProperties:function(){this.setValueDeferred=new dojo.Deferred();this.inherited(arguments);},postCreate:function(){this._steps=this._steps.slice(0);this._undoedSteps=this._undoedSteps.slice(0);if(dojo.isArray(this.extraPlugins)){this.plugins=this.plugins.concat(this.extraPlugins);}this.inherited(arguments);this.commands=dojo.i18n.getLocalization("dijit._editor","commands",this.lang);if(!this.toolbar){this.toolbar=new dijit.Toolbar({dir:this.dir,lang:this.lang});this.header.appendChild(this.toolbar.domNode);}dojo.forEach(this.plugins,this.addPlugin,this);this.setValueDeferred.callback(true);dojo.addClass(this.iframe.parentNode,"dijitEditorIFrameContainer");dojo.addClass(this.iframe,"dijitEditorIFrame");dojo.attr(this.iframe,"allowTransparency",true);if(dojo.isWebKit){dojo.style(this.domNode,"KhtmlUserSelect","none");}this.toolbar.startup();this.onNormalizedDisplayChanged();},destroy:function(){dojo.forEach(this._plugins,function(p){if(p&&p.destroy){p.destroy();}});this._plugins=[];this.toolbar.destroyRecursive();delete this.toolbar;this.inherited(arguments);},addPlugin:function(_798,_799){var args=dojo.isString(_798)?{name:_798}:_798;if(!args.setEditor){var o={"args":args,"plugin":null,"editor":this};dojo.publish(dijit._scopeName+".Editor.getPlugin",[o]);if(!o.plugin){var pc=dojo.getObject(args.name);if(pc){o.plugin=new pc(args);}}if(!o.plugin){console.warn("Cannot find plugin",_798);return;}_798=o.plugin;}if(arguments.length>1){this._plugins[_799]=_798;}else{this._plugins.push(_798);}_798.setEditor(this);if(dojo.isFunction(_798.setToolbar)){_798.setToolbar(this.toolbar);}},startup:function(){},resize:function(size){if(size){dijit.layout._LayoutWidget.prototype.resize.apply(this,arguments);}},layout:function(){var _79a=(this._contentBox.h-(this.getHeaderHeight()+this.getFooterHeight()+dojo._getPadBorderExtents(this.iframe.parentNode).h+dojo._getMarginExtents(this.iframe.parentNode).h));this.editingArea.style.height=_79a+"px";if(this.iframe){this.iframe.style.height="100%";}this._layoutMode=true;},_onIEMouseDown:function(e){var _79b;var b=this.document.body;var _79c=b.clientWidth;var _79d=b.clientHeight;var _79e=b.clientLeft;var _79f=b.offsetWidth;var _7a0=b.offsetHeight;var _7a1=b.offsetLeft;bodyDir=b.dir?b.dir.toLowerCase():"";if(bodyDir!="rtl"){if(_79c<_79f&&e.x>_79c&&e.x<_79f){_79b=true;}}else{if(e.x<_79e&&e.x>_7a1){_79b=true;}}if(!_79b){if(_79d<_7a0&&e.y>_79d&&e.y<_7a0){_79b=true;}}if(!_79b){delete this._cursorToStart;delete this._savedSelection;if(e.target.tagName=="BODY"){setTimeout(dojo.hitch(this,"placeCursorAtEnd"),0);}this.inherited(arguments);}},onBeforeActivate:function(e){this._restoreSelection();},onBeforeDeactivate:function(e){if(this.customUndo){this.endEditing(true);}if(e.target.tagName!="BODY"){this._saveSelection();}},customUndo:true,editActionInterval:3,beginEditing:function(cmd){if(!this._inEditing){this._inEditing=true;this._beginEditing(cmd);}if(this.editActionInterval>0){if(this._editTimer){clearTimeout(this._editTimer);}this._editTimer=setTimeout(dojo.hitch(this,this.endEditing),this._editInterval);}},_steps:[],_undoedSteps:[],execCommand:function(cmd){if(this.customUndo&&(cmd=="undo"||cmd=="redo")){return this[cmd]();}else{if(this.customUndo){this.endEditing();this._beginEditing();}var r;var _7a2=/copy|cut|paste/.test(cmd);try{r=this.inherited(arguments);if(dojo.isWebKit&&_7a2&&!r){throw {code:1011};}}catch(e){if(e.code==1011&&_7a2){var sub=dojo.string.substitute,_7a3={cut:"X",copy:"C",paste:"V"};alert(sub(this.commands.systemShortcut,[this.commands[cmd],sub(this.commands[dojo.isMac?"appleKey":"ctrlKey"],[_7a3[cmd]])]));}r=false;}if(this.customUndo){this._endEditing();}return r;}},queryCommandEnabled:function(cmd){if(this.customUndo&&(cmd=="undo"||cmd=="redo")){return cmd=="undo"?(this._steps.length>1):(this._undoedSteps.length>0);}else{return this.inherited(arguments);}},_moveToBookmark:function(b){var _7a4=b.mark;var mark=b.mark;var col=b.isCollapsed;var r,_7a5,_7a6,sel;if(mark){if(dojo.isIE<9){if(dojo.isArray(mark)){_7a4=[];dojo.forEach(mark,function(n){_7a4.push(dijit.range.getNode(n,this.editNode));},this);dojo.withGlobal(this.window,"moveToBookmark",dijit,[{mark:_7a4,isCollapsed:col}]);}else{if(mark.startContainer&&mark.endContainer){sel=dijit.range.getSelection(this.window);if(sel&&sel.removeAllRanges){sel.removeAllRanges();r=dijit.range.create(this.window);_7a5=dijit.range.getNode(mark.startContainer,this.editNode);_7a6=dijit.range.getNode(mark.endContainer,this.editNode);if(_7a5&&_7a6){r.setStart(_7a5,mark.startOffset);r.setEnd(_7a6,mark.endOffset);sel.addRange(r);}}}}}else{sel=dijit.range.getSelection(this.window);if(sel&&sel.removeAllRanges){sel.removeAllRanges();r=dijit.range.create(this.window);_7a5=dijit.range.getNode(mark.startContainer,this.editNode);_7a6=dijit.range.getNode(mark.endContainer,this.editNode);if(_7a5&&_7a6){r.setStart(_7a5,mark.startOffset);r.setEnd(_7a6,mark.endOffset);sel.addRange(r);}}}}},_changeToStep:function(from,to){this.setValue(to.text);var b=to.bookmark;if(!b){return;}this._moveToBookmark(b);},undo:function(){var ret=false;if(!this._undoRedoActive){this._undoRedoActive=true;this.endEditing(true);var s=this._steps.pop();if(s&&this._steps.length>0){this.focus();this._changeToStep(s,this._steps[this._steps.length-1]);this._undoedSteps.push(s);this.onDisplayChanged();delete this._undoRedoActive;ret=true;}delete this._undoRedoActive;}return ret;},redo:function(){var ret=false;if(!this._undoRedoActive){this._undoRedoActive=true;this.endEditing(true);var s=this._undoedSteps.pop();if(s&&this._steps.length>0){this.focus();this._changeToStep(this._steps[this._steps.length-1],s);this._steps.push(s);this.onDisplayChanged();ret=true;}delete this._undoRedoActive;}return ret;},endEditing:function(_7a7){if(this._editTimer){clearTimeout(this._editTimer);}if(this._inEditing){this._endEditing(_7a7);this._inEditing=false;}},_getBookmark:function(){var b=dojo.withGlobal(this.window,dijit.getBookmark);var tmp=[];if(b&&b.mark){var mark=b.mark;if(dojo.isIE<9){var sel=dijit.range.getSelection(this.window);if(!dojo.isArray(mark)){if(sel){var _7a8;if(sel.rangeCount){_7a8=sel.getRangeAt(0);}if(_7a8){b.mark=_7a8.cloneRange();}else{b.mark=dojo.withGlobal(this.window,dijit.getBookmark);}}}else{dojo.forEach(b.mark,function(n){tmp.push(dijit.range.getIndex(n,this.editNode).o);},this);b.mark=tmp;}}try{if(b.mark&&b.mark.startContainer){tmp=dijit.range.getIndex(b.mark.startContainer,this.editNode).o;b.mark={startContainer:tmp,startOffset:b.mark.startOffset,endContainer:b.mark.endContainer===b.mark.startContainer?tmp:dijit.range.getIndex(b.mark.endContainer,this.editNode).o,endOffset:b.mark.endOffset};}}catch(e){b.mark=null;}}return b;},_beginEditing:function(cmd){if(this._steps.length===0){this._steps.push({"text":dijit._editor.getChildrenHtml(this.editNode),"bookmark":this._getBookmark()});}},_endEditing:function(_7a9){var v=dijit._editor.getChildrenHtml(this.editNode);this._undoedSteps=[];this._steps.push({text:v,bookmark:this._getBookmark()});},onKeyDown:function(e){if(!dojo.isIE&&!this.iframe&&e.keyCode==dojo.keys.TAB&&!this.tabIndent){this._saveSelection();}if(!this.customUndo){this.inherited(arguments);return;}var k=e.keyCode,ks=dojo.keys;if(e.ctrlKey&&!e.altKey){if(k==90||k==122){dojo.stopEvent(e);this.undo();return;}else{if(k==89||k==121){dojo.stopEvent(e);this.redo();return;}}}this.inherited(arguments);switch(k){case ks.ENTER:case ks.BACKSPACE:case ks.DELETE:this.beginEditing();break;case 88:case 86:if(e.ctrlKey&&!e.altKey&&!e.metaKey){this.endEditing();if(e.keyCode==88){this.beginEditing("cut");setTimeout(dojo.hitch(this,this.endEditing),1);}else{this.beginEditing("paste");setTimeout(dojo.hitch(this,this.endEditing),1);}break;}case ks.ALT:this.endEditing();break;case ks.UP_ARROW:case ks.DOWN_ARROW:case ks.LEFT_ARROW:case ks.RIGHT_ARROW:case ks.HOME:case ks.END:case ks.PAGE_UP:case ks.PAGE_DOWN:this.endEditing(true);break;case ks.CTRL:case ks.SHIFT:case ks.TAB:break;default:if(!e.ctrlKey&&!e.altKey&&!e.metaKey&&(e.keyCode<dojo.keys.F1||e.keyCode>dojo.keys.F15)){this.beginEditing();break;}}},_onBlur:function(){this.inherited(arguments);this.endEditing(true);},_saveSelection:function(){try{this._savedSelection=this._getBookmark();}catch(e){}},_restoreSelection:function(){if(this._savedSelection){delete this._cursorToStart;if(dojo.withGlobal(this.window,"isCollapsed",dijit)){this._moveToBookmark(this._savedSelection);}delete this._savedSelection;}},onClick:function(){this.endEditing(true);this.inherited(arguments);},replaceValue:function(html){if(!this.customUndo){this.inherited(arguments);}else{if(this.isClosed){this.setValue(html);}else{this.beginEditing();if(!html){html="&nbsp;";}this.setValue(html);this.endEditing();}}},_setDisabledAttr:function(_7aa){var _7ab=dojo.hitch(this,function(){if((!this.disabled&&_7aa)||(!this._buttonEnabledPlugins&&_7aa)){dojo.forEach(this._plugins,function(p){p.set("disabled",true);});}else{if(this.disabled&&!_7aa){dojo.forEach(this._plugins,function(p){p.set("disabled",false);});}}});this.setValueDeferred.addCallback(_7ab);this.inherited(arguments);},_setStateClass:function(){try{this.inherited(arguments);if(this.document&&this.document.body){dojo.style(this.document.body,"color",dojo.style(this.iframe,"color"));}}catch(e){}}});dojo.subscribe(dijit._scopeName+".Editor.getPlugin",null,function(o){if(o.plugin){return;}var args=o.args,p;var _7ac=dijit._editor._Plugin;var _7ad=dijit._editor.plugins._FontNameDropDown;var _7ae=dijit._editor.plugins._FontSizeDropDown;var _7af=dijit._editor.plugins._FormatBlockDropDown;var _7b0=dijit._editor.plugins.TextColor;var name=args.name;switch(name){case "undo":case "redo":case "cut":case "copy":case "paste":case "insertOrderedList":case "insertUnorderedList":case "indent":case "outdent":case "justifyCenter":case "justifyFull":case "justifyLeft":case "justifyRight":case "delete":case "selectAll":case "removeFormat":case "unlink":case "insertHorizontalRule":p=new _7ac({command:name});break;case "fontName":p=new _7ad({command:name});break;case "fontSize":p=new _7ae({command:name});break;case "formatBlock":p=new _7af({command:name});break;case "bold":case "italic":case "underline":case "strikethrough":case "subscript":case "superscript":p=new _7ac({buttonClass:dijit.form.ToggleButton,command:name});break;case "|":p=new _7ac({button:new dijit.ToolbarSeparator(),setEditor:function(_7b1){this.editor=_7b1;}});break;default:break;}o.plugin=p;});}if(!dojo._hasResource["dojox.grid.cells.dijit"]){dojo._hasResource["dojox.grid.cells.dijit"]=true;dojo.provide("dojox.grid.cells.dijit");(function(){var dgc=dojox.grid.cells;dojo.declare("dojox.grid.cells._Widget",dgc._Base,{widgetClass:dijit.form.TextBox,constructor:function(_7b2){this.widget=null;if(typeof this.widgetClass=="string"){dojo.deprecated("Passing a string to widgetClass is deprecated","pass the widget class object instead","2.0");this.widgetClass=dojo.getObject(this.widgetClass);}},formatEditing:function(_7b3,_7b4){this.needFormatNode(_7b3,_7b4);return "<div></div>";},getValue:function(_7b5){return this.widget.get("value");},setValue:function(_7b6,_7b7){if(this.widget&&this.widget.set){if(this.widget.onLoadDeferred){var self=this;this.widget.onLoadDeferred.addCallback(function(){self.widget.set("value",_7b7===null?"":_7b7);});}else{this.widget.set("value",_7b7);}}else{this.inherited(arguments);}},getWidgetProps:function(_7b8){return dojo.mixin({dir:this.dir,lang:this.lang},this.widgetProps||{},{constraints:dojo.mixin({},this.constraint)||{},value:_7b8});},createWidget:function(_7b9,_7ba,_7bb){return new this.widgetClass(this.getWidgetProps(_7ba),_7b9);},attachWidget:function(_7bc,_7bd,_7be){_7bc.appendChild(this.widget.domNode);this.setValue(_7be,_7bd);},formatNode:function(_7bf,_7c0,_7c1){if(!this.widgetClass){return _7c0;}if(!this.widget){this.widget=this.createWidget.apply(this,arguments);}else{this.attachWidget.apply(this,arguments);}this.sizeWidget.apply(this,arguments);this.grid.views.renormalizeRow(_7c1);this.grid.scroller.rowHeightChanged(_7c1,true);this.focus();return undefined;},sizeWidget:function(_7c2,_7c3,_7c4){var p=this.getNode(_7c4),box=dojo.contentBox(p);dojo.marginBox(this.widget.domNode,{w:box.w});},focus:function(_7c5,_7c6){if(this.widget){setTimeout(dojo.hitch(this.widget,function(){dojox.grid.util.fire(this,"focus");}),0);}},_finish:function(_7c7){this.inherited(arguments);dojox.grid.util.removeNode(this.widget.domNode);if(dojo.isIE){dojo.setSelectable(this.widget.domNode,true);}}});dgc._Widget.markupFactory=function(node,cell){dgc._Base.markupFactory(node,cell);var d=dojo;var _7c8=d.trim(d.attr(node,"widgetProps")||"");var _7c9=d.trim(d.attr(node,"constraint")||"");var _7ca=d.trim(d.attr(node,"widgetClass")||"");if(_7c8){cell.widgetProps=d.fromJson(_7c8);}if(_7c9){cell.constraint=d.fromJson(_7c9);}if(_7ca){cell.widgetClass=d.getObject(_7ca);}};dojo.declare("dojox.grid.cells.ComboBox",dgc._Widget,{widgetClass:dijit.form.ComboBox,getWidgetProps:function(_7cb){var _7cc=[];dojo.forEach(this.options,function(o){_7cc.push({name:o,value:o});});var _7cd=new dojo.data.ItemFileReadStore({data:{identifier:"name",items:_7cc}});return dojo.mixin({},this.widgetProps||{},{value:_7cb,store:_7cd});},getValue:function(){var e=this.widget;e.set("displayedValue",e.get("displayedValue"));return e.get("value");}});dgc.ComboBox.markupFactory=function(node,cell){dgc._Widget.markupFactory(node,cell);var d=dojo;var _7ce=d.trim(d.attr(node,"options")||"");if(_7ce){var o=_7ce.split(",");if(o[0]!=_7ce){cell.options=o;}}};dojo.declare("dojox.grid.cells.DateTextBox",dgc._Widget,{widgetClass:dijit.form.DateTextBox,setValue:function(_7cf,_7d0){if(this.widget){this.widget.set("value",new Date(_7d0));}else{this.inherited(arguments);}},getWidgetProps:function(_7d1){return dojo.mixin(this.inherited(arguments),{value:new Date(_7d1)});}});dgc.DateTextBox.markupFactory=function(node,cell){dgc._Widget.markupFactory(node,cell);};dojo.declare("dojox.grid.cells.CheckBox",dgc._Widget,{widgetClass:dijit.form.CheckBox,getValue:function(){return this.widget.checked;},setValue:function(_7d2,_7d3){if(this.widget&&this.widget.attributeMap.checked){this.widget.set("checked",_7d3);}else{this.inherited(arguments);}},sizeWidget:function(_7d4,_7d5,_7d6){return;}});dgc.CheckBox.markupFactory=function(node,cell){dgc._Widget.markupFactory(node,cell);};dojo.declare("dojox.grid.cells.Editor",dgc._Widget,{widgetClass:dijit.Editor,getWidgetProps:function(_7d7){return dojo.mixin({},this.widgetProps||{},{height:this.widgetHeight||"100px"});},createWidget:function(_7d8,_7d9,_7da){var _7db=new this.widgetClass(this.getWidgetProps(_7d9),_7d8);dojo.connect(_7db,"onLoad",dojo.hitch(this,"populateEditor"));return _7db;},formatNode:function(_7dc,_7dd,_7de){this.content=_7dd;this.inherited(arguments);if(dojo.isMoz){var e=this.widget;e.open();if(this.widgetToolbar){dojo.place(e.toolbar.domNode,e.editingArea,"before");}}},populateEditor:function(){this.widget.set("value",this.content);this.widget.placeCursorAtEnd();}});dgc.Editor.markupFactory=function(node,cell){dgc._Widget.markupFactory(node,cell);var d=dojo;var h=dojo.trim(dojo.attr(node,"widgetHeight")||"");if(h){if((h!="auto")&&(h.substr(-2)!="em")){h=parseInt(h,10)+"px";}cell.widgetHeight=h;}};})();}if(!dojo._hasResource["dojox.grid.enhanced._Plugin"]){dojo._hasResource["dojox.grid.enhanced._Plugin"]=true;dojo.provide("dojox.grid.enhanced._Plugin");dojo.declare("dojox.grid.enhanced._Plugin",null,{name:"plugin",grid:null,option:{},_connects:[],_subscribes:[],privates:{},constructor:function(_7df,_7e0){this.grid=_7df;this.option=_7e0;this._connects=[];this._subscribes=[];this.privates=dojo.mixin({},dojox.grid.enhanced._Plugin.prototype);this.init();},init:function(){},onPreInit:function(){},onPostInit:function(){},onStartUp:function(){},connect:function(obj,_7e1,_7e2){var conn=dojo.connect(obj,_7e1,this,_7e2);this._connects.push(conn);return conn;},disconnect:function(_7e3){dojo.some(this._connects,function(conn,i,_7e4){if(conn==_7e3){dojo.disconnect(_7e3);_7e4.splice(i,1);return true;}return false;});},subscribe:function(_7e5,_7e6){var _7e7=dojo.subscribe(_7e5,this,_7e6);this._subscribes.push(_7e7);return _7e7;},unsubscribe:function(_7e8){dojo.some(this._subscribes,function(_7e9,i,_7ea){if(_7e9==_7e8){dojo.unsubscribe(_7e8);_7ea.splice(i,1);return true;}return false;});},onSetStore:function(_7eb){},destroy:function(){dojo.forEach(this._connects,dojo.disconnect);dojo.forEach(this._subscribes,dojo.unsubscribe);delete this._connects;delete this._subscribes;delete this.option;delete this.privates;}});}if(!dojo._hasResource["dojox.grid.enhanced.plugins.IndirectSelection"]){dojo._hasResource["dojox.grid.enhanced.plugins.IndirectSelection"]=true;dojo.provide("dojox.grid.enhanced.plugins.IndirectSelection");dojo.declare("dojox.grid.enhanced.plugins.IndirectSelection",dojox.grid.enhanced._Plugin,{name:"indirectSelection",constructor:function(){var _7ec=this.grid.layout;this.connect(_7ec,"setStructure",dojo.hitch(_7ec,this.addRowSelectCell,this.option));},addRowSelectCell:function(_7ed){if(!this.grid.indirectSelection||this.grid.selectionMode=="none"){return;}var _7ee=false,_7ef=["get","formatter","field","fields"],_7f0={type:dojox.grid.cells.MultipleRowSelector,name:"",width:"30px",styles:"text-align: center;"};if(_7ed.headerSelector){_7ed.name="";}if(this.grid.rowSelectCell){this.grid.rowSelectCell.destroy();}dojo.forEach(this.structure,function(view){var _7f1=view.cells;if(_7f1&&_7f1.length>0&&!_7ee){var _7f2=_7f1[0];if(_7f2[0]&&_7f2[0].isRowSelector){_7ee=true;return;}var _7f3,_7f4=this.grid.selectionMode=="single"?dojox.grid.cells.SingleRowSelector:dojox.grid.cells.MultipleRowSelector;_7f3=dojo.mixin(_7f0,_7ed,{type:_7f4,editable:false,notselectable:true,filterable:false,navigatable:true,nosort:true});dojo.forEach(_7ef,function(_7f5){if(_7f5 in _7f3){delete _7f3[_7f5];}});if(_7f1.length>1){_7f3.rowSpan=_7f1.length;}dojo.forEach(this.cells,function(cell,i){if(cell.index>=0){cell.index+=1;}else{console.warn("Error:IndirectSelection.addRowSelectCell()-  cell "+i+" has no index!");}});var _7f6=this.addCellDef(0,0,_7f3);_7f6.index=0;_7f2.unshift(_7f6);this.cells.unshift(_7f6);this.grid.rowSelectCell=_7f6;_7ee=true;}},this);this.cellCount=this.cells.length;},destroy:function(){if(this.grid&&this.grid.rowSelectCell){this.grid.rowSelectCell.destroy();delete this.grid.rowSelectCell;}this.inherited(arguments);}});dojo.declare("dojox.grid.cells.RowSelector",dojox.grid.cells._Widget,{inputType:"",map:null,disabledMap:null,isRowSelector:true,_connects:null,_subscribes:null,checkedText:"&#8730;",unCheckedText:"O",constructor:function(){this.map={};this.disabledMap={},this.disabledCount=0;this._connects=[];this._subscribes=[];this.inA11YMode=dojo.hasClass(dojo.body(),"dijit_a11y");this.baseClass="dojoxGridRowSelector dijitReset dijitInline dijit"+this.inputType;this.checkedClass=" dijit"+this.inputType+"Checked";this.disabledClass=" dijit"+this.inputType+"Disabled";this.checkedDisabledClass=" dijit"+this.inputType+"CheckedDisabled";this.statusTextClass=" dojoxGridRowSelectorStatusText";this._connects.push(dojo.connect(this.grid,"dokeyup",this,"_dokeyup"));this._connects.push(dojo.connect(this.grid.selection,"onSelected",this,"_onSelected"));this._connects.push(dojo.connect(this.grid.selection,"onDeselected",this,"_onDeselected"));this._connects.push(dojo.connect(this.grid.scroller,"invalidatePageNode",this,"_pageDestroyed"));this._connects.push(dojo.connect(this.grid,"onCellClick",this,"_onClick"));this._connects.push(dojo.connect(this.grid,"updateRow",this,"_onUpdateRow"));},formatter:function(data,_7f7){var _7f8=this.baseClass;var _7f9=this.getValue(_7f7);var _7fa=!!this.disabledMap[_7f7];if(_7f9){_7f8+=this.checkedClass;if(_7fa){_7f8+=this.checkedDisabledClass;}}else{if(_7fa){_7f8+=this.disabledClass;}}if(window.isAccessibilityEnabled){var _7fb=(_7f9)?(this.inputType+" "+misys.getLocalization("checked")):(this.inputType+" "+misys.getLocalization("unchecked"));return ["<div tabindex = -1 ","id = '"+this.grid.id+"_rowSelector_"+_7f7+"' ","name = '"+this.grid.id+"_rowSelector' class = '"+_7f8+"' ","role = 'presentation' aria-checked = '"+_7f9+"' aria-disabled = '"+_7fa+"' aria-label = '"+dojo.string.substitute(this.grid._nls["indirectSelection"+this.inputType],[_7f7+1])+" "+_7fb+"' >","<span class = '"+this.statusTextClass+"'>"+(_7f9?this.checkedText:this.unCheckedText)+"</span>","<span class = 'sr-only' aria-live='polite' id='"+this.grid.id+"_rowSelector_"+_7f7+"live' />","</div>"].join("");}else{return ["<div tabindex = -1 ","id = '"+this.grid.id+"_rowSelector_"+_7f7+"' ","name = '"+this.grid.id+"_rowSelector' class = '"+_7f8+"' ","role = 'presentation' aria-pressed = '"+_7f9+"' aria-disabled = '"+_7fa+"' aria-label = '"+dojo.string.substitute(this.grid._nls["indirectSelection"+this.inputType],[_7f7+1])+"'>","<span class = '"+this.statusTextClass+"'>"+(_7f9?this.checkedText:this.unCheckedText)+"</span>","</div>"].join("");}},setValue:function(_7fc,_7fd){},getValue:function(_7fe){return this.grid.selection.isSelected(_7fe);},toggleRow:function(_7ff,_800){this._nativeSelect(_7ff,_800);},setDisabled:function(_801,_802){if(_801<0){return;}this._toggleDisabledStyle(_801,_802);},disabled:function(_803){return !!this.disabledMap[_803];},_onClick:function(e){if(e.cell===this){this._selectRow(e);}},_dokeyup:function(e){if(e.cellIndex==this.index&&e.rowIndex>=0&&e.keyCode==dojo.keys.SPACE){this._selectRow(e);}},focus:function(_804){var _805=this.map[_804];if(_805){_805.focus();}},_focusEndingCell:function(_806,_807){var cell=this.grid.getCell(_807);this.grid.focus.setFocusCell(cell,_806);},_nativeSelect:function(_808,_809){this.grid.selection[_809?"select":"deselect"](_808);},_onSelected:function(_80a){this._toggleCheckedStyle(_80a,true);},_onDeselected:function(_80b){this._toggleCheckedStyle(_80b,false);},_onUpdateRow:function(_80c){delete this.map[_80c];},_toggleCheckedStyle:function(_80d,_80e){var _80f=this._getSelector(_80d);if(_80f){dojo.toggleClass(_80f,this.checkedClass,_80e);if(this.disabledMap[_80d]){dojo.toggleClass(_80f,this.checkedDisabledClass,_80e);}dijit.setWaiState(_80f,"checked",_80e);if(this.inA11YMode){dojo.attr(_80f.firstChild,"innerHTML",_80e?this.checkedText:this.unCheckedText);}if(dojo.query("#"+this.grid.id+"_rowSelector_"+_80d+"live")&&dojo.query("#"+this.grid.id+"_rowSelector_"+_80d+"live").length>0){var _810=(_80e)?(this.inputType+" "+misys.getLocalization("checked")):(this.inputType+" "+misys.getLocalization("unchecked"));dojo.attr(dojo.query("#"+this.grid.id+"_rowSelector_"+_80d)[0],"aria-label",dojo.string.substitute(this.grid._nls["indirectSelection"+this.inputType],[_80d+1])+" "+_810);var temp=dojo.query("#"+this.grid.id+"_rowSelector_"+_80d+"live")[0];var _811="";if(_80e){_811=this.inputType+" "+misys.getLocalization("checked");_811=_811+" "+dojo.string.substitute(this.grid._nls["indirectSelection"+this.inputType],[_80d+1])+" "+misys.getLocalization("checked")+".";}else{_811=this.inputType+" "+misys.getLocalization("unchecked");_811=_811+" "+dojo.string.substitute(this.grid._nls["indirectSelection"+this.inputType],[_80d+1])+" "+misys.getLocalization("unchecked")+".";}dojo.attr(temp,"innerHTML",_811);}}},_toggleDisabledStyle:function(_812,_813){var _814=this._getSelector(_812);if(_814){dojo.toggleClass(_814,this.disabledClass,_813);if(this.getValue(_812)){dojo.toggleClass(_814,this.checkedDisabledClass,_813);}dijit.setWaiState(_814,"disabled",_813);}this.disabledMap[_812]=_813;if(_812>=0){this.disabledCount+=_813?1:-1;}},_getSelector:function(_815){var _816=this.map[_815];if(!_816){var _817=this.view.rowNodes[_815];if(_817){_816=dojo.query(".dojoxGridRowSelector",_817)[0];if(_816){this.map[_815]=_816;}}}return _816;},_pageDestroyed:function(_818){var _819=this.grid.scroller.rowsPerPage;var _81a=_818*_819,end=_81a+_819-1;for(var i=_81a;i<=end;i++){if(!this.map[i]){continue;}dojo.destroy(this.map[i]);delete this.map[i];}},destroy:function(){for(var i in this.map){dojo.destroy(this.map[i]);delete this.map[i];}for(i in this.disabledMap){delete this.disabledMap[i];}dojo.forEach(this._connects,dojo.disconnect);dojo.forEach(this._subscribes,dojo.unsubscribe);delete this._connects;delete this._subscribes;}});dojo.declare("dojox.grid.cells.SingleRowSelector",dojox.grid.cells.RowSelector,{inputType:"Radio",_selectRow:function(e){var _81b=e.rowIndex;if(this.disabledMap[_81b]){return;}this._focusEndingCell(_81b,0);this._nativeSelect(_81b,!this.grid.selection.selected[_81b]);},toggleAllSelection:function(_81c){var grid=this.grid,_81d=grid.selection;if(_81c){_81d.selectRange(0,grid.rowCount-1);}else{_81d.deselectAll();}this.toggleAllTrigerred=true;var _81e=this.grid.rowCount;for(var i=0;i<_81e;i++){var item=this.grid.getItem(i);var flag;if(item){flag=this.grid.store.getValue(item,"disable_selection");}if(flag==="Y"){this.grid.rowSelectCell.toggleRow(i,false);}}}});dojo.declare("dojox.grid.cells.MultipleRowSelector",dojox.grid.cells.RowSelector,{inputType:"CheckBox",swipeStartRowIndex:-1,swipeMinRowIndex:-1,swipeMaxRowIndex:-1,toSelect:false,lastClickRowIdx:-1,toggleAllTrigerred:false,unCheckedText:"&#9633;",constructor:function(){this._connects.push(dojo.connect(dojo.doc,"onmouseup",this,"_domouseup"));this._connects.push(dojo.connect(this.grid,"onRowMouseOver",this,"_onRowMouseOver"));this._connects.push(dojo.connect(this.grid.focus,"move",this,"_swipeByKey"));this._connects.push(dojo.connect(this.grid,"onCellMouseDown",this,"_onMouseDown"));if(this.headerSelector){this._connects.push(dojo.connect(this.grid.views,"render",this,"_addHeaderSelector"));this._connects.push(dojo.connect(this.grid,"onSelectionChanged",this,"_onSelectionChanged"));this._connects.push(dojo.connect(this.grid,"onKeyDown",this,function(e){if(e.rowIndex==-1&&e.cellIndex==this.index&&e.keyCode==dojo.keys.SPACE){this._toggletHeader();}}));}},toggleAllSelection:function(_81f){var grid=this.grid,_820=grid.selection;if(_81f){_820.selectRange(0,grid.rowCount-1);}else{_820.deselectAll();}this.toggleAllTrigerred=true;},_onMouseDown:function(e){if(e.cell==this){this._startSelection(e.rowIndex);dojo.stopEvent(e);}},_onRowMouseOver:function(e){this._updateSelection(e,0);},_domouseup:function(e){if(dojo.isIE){this.view.content.decorateEvent(e);}var _821=e.cellIndex>=0&&this.inSwipeSelection()&&!this.grid.edit.isEditRow(e.rowIndex);if(_821){this._focusEndingCell(e.rowIndex,e.cellIndex);}this._finishSelect();},_dokeyup:function(e){this.inherited(arguments);if(!e.shiftKey){this._finishSelect();}},_startSelection:function(_822){this.swipeStartRowIndex=this.swipeMinRowIndex=this.swipeMaxRowIndex=_822;this.toSelect=!this.getValue(_822);},_updateSelection:function(e,_823){if(!this.inSwipeSelection()){return;}var _824=_823!==0;var _825=e.rowIndex,_826=_825-this.swipeStartRowIndex+_823;if(_826>0&&this.swipeMaxRowIndex<_825+_823){this.swipeMaxRowIndex=_825+_823;}if(_826<0&&this.swipeMinRowIndex>_825+_823){this.swipeMinRowIndex=_825+_823;}var min=_826>0?this.swipeStartRowIndex:_825+_823;var max=_826>0?_825+_823:this.swipeStartRowIndex;for(var i=this.swipeMinRowIndex;i<=this.swipeMaxRowIndex;i++){if(this.disabledMap[i]||i<0){continue;}if(i>=min&&i<=max){this._nativeSelect(i,this.toSelect);}else{if(!_824){this._nativeSelect(i,!this.toSelect);}}}},_swipeByKey:function(_827,_828,e){if(!e||_827===0||!e.shiftKey||e.cellIndex!=this.index||this.grid.focus.rowIndex<0){return;}var _829=e.rowIndex;if(this.swipeStartRowIndex<0){this.swipeStartRowIndex=_829;if(_827>0){this.swipeMaxRowIndex=_829+_827;this.swipeMinRowIndex=_829;}else{this.swipeMinRowIndex=_829+_827;this.swipeMaxRowIndex=_829;}this.toSelect=this.getValue(_829);}this._updateSelection(e,_827);},_finishSelect:function(){this.swipeStartRowIndex=-1;this.swipeMinRowIndex=-1;this.swipeMaxRowIndex=-1;this.toSelect=false;},inSwipeSelection:function(){return this.swipeStartRowIndex>=0;},_nativeSelect:function(_82a,_82b){this.grid.selection[_82b?"addToSelection":"deselect"](_82a);},_selectRow:function(e){var _82c=e.rowIndex;if(this.disabledMap[_82c]){return;}dojo.stopEvent(e);this._focusEndingCell(_82c,0);var _82d=_82c-this.lastClickRowIdx;var _82e=!this.grid.selection.selected[_82c];if(this.lastClickRowIdx>=0&&!e.ctrlKey&&!e.altKey&&e.shiftKey){var min=_82d>0?this.lastClickRowIdx:_82c;var max=_82d>0?_82c:this.lastClickRowIdx;for(var i=min;i>=0&&i<=max;i++){this._nativeSelect(i,_82e);}}else{this._nativeSelect(_82c,_82e);}this.lastClickRowIdx=_82c;},getValue:function(_82f){if(_82f==-1){var g=this.grid;return g.rowCount>0&&g.rowCount<=g.selection.getSelectedCount();}return this.inherited(arguments);},_addHeaderSelector:function(){var _830=this.view.getHeaderCellNode(this.index);if(!_830){return;}dojo.empty(_830);var g=this.grid;var _831=_830.appendChild(dojo.create("div",{"tabindex":-1,"id":g.id+"_rowSelector_-1","class":this.baseClass,"role":"presentation","innerHTML":"<span class = '"+this.statusTextClass+"'></span><span style='height: 0; width: 0; overflow: hidden; display: block;'>"+g._nls["selectAll"]+"</span>"}));this.map[-1]=_831;var idx=this._headerSelectorConnectIdx;if(idx!==undefined){dojo.disconnect(this._connects[idx]);this._connects.splice(idx,1);}this._headerSelectorConnectIdx=this._connects.length;this._connects.push(dojo.connect(_831,"onclick",this,"_toggletHeader"));this._onSelectionChanged();},_toggletHeader:function(){if(!!this.disabledMap[-1]){return;}this.grid._selectingRange=true;this.toggleAllSelection(!this.getValue(-1));this._onSelectionChanged();this.grid._selectingRange=false;},_onSelectionChanged:function(){var g=this.grid;if(!this.map[-1]||g._selectingRange){return;}this._toggleCheckedStyle(-1,this.getValue(-1));},_toggleDisabledStyle:function(_832,_833){this.inherited(arguments);if(this.headerSelector){var _834=(this.grid.rowCount==this.disabledCount);if(_834!=!!this.disabledMap[-1]){arguments[0]=-1;arguments[1]=_834;this.inherited(arguments);}}}});dojox.grid.EnhancedGrid.registerPlugin(dojox.grid.enhanced.plugins.IndirectSelection,{"preInit":true});}if(!dojo._hasResource["dojo.NodeList-traverse"]){dojo._hasResource["dojo.NodeList-traverse"]=true;dojo.provide("dojo.NodeList-traverse");dojo.extend(dojo.NodeList,{_buildArrayFromCallback:function(_835){var ary=[];for(var i=0;i<this.length;i++){var _836=_835.call(this[i],this[i],ary);if(_836){ary=ary.concat(_836);}}return ary;},_getUniqueAsNodeList:function(_837){var ary=[];for(var i=0,node;node=_837[i];i++){if(node.nodeType==1&&dojo.indexOf(ary,node)==-1){ary.push(node);}}return this._wrap(ary,null,this._NodeListCtor);},_getUniqueNodeListWithParent:function(_838,_839){var ary=this._getUniqueAsNodeList(_838);ary=(_839?dojo._filterQueryResult(ary,_839):ary);return ary._stash(this);},_getRelatedUniqueNodes:function(_83a,_83b){return this._getUniqueNodeListWithParent(this._buildArrayFromCallback(_83b),_83a);},children:function(_83c){return this._getRelatedUniqueNodes(_83c,function(node,ary){return dojo._toArray(node.childNodes);});},closest:function(_83d,root){return this._getRelatedUniqueNodes(null,function(node,ary){do{if(dojo._filterQueryResult([node],_83d,root).length){return node;}}while(node!=root&&(node=node.parentNode)&&node.nodeType==1);return null;});},parent:function(_83e){return this._getRelatedUniqueNodes(_83e,function(node,ary){return node.parentNode;});},parents:function(_83f){return this._getRelatedUniqueNodes(_83f,function(node,ary){var pary=[];while(node.parentNode){node=node.parentNode;pary.push(node);}return pary;});},siblings:function(_840){return this._getRelatedUniqueNodes(_840,function(node,ary){var pary=[];var _841=(node.parentNode&&node.parentNode.childNodes);for(var i=0;i<_841.length;i++){if(_841[i]!=node){pary.push(_841[i]);}}return pary;});},next:function(_842){return this._getRelatedUniqueNodes(_842,function(node,ary){var next=node.nextSibling;while(next&&next.nodeType!=1){next=next.nextSibling;}return next;});},nextAll:function(_843){return this._getRelatedUniqueNodes(_843,function(node,ary){var pary=[];var next=node;while((next=next.nextSibling)){if(next.nodeType==1){pary.push(next);}}return pary;});},prev:function(_844){return this._getRelatedUniqueNodes(_844,function(node,ary){var prev=node.previousSibling;while(prev&&prev.nodeType!=1){prev=prev.previousSibling;}return prev;});},prevAll:function(_845){return this._getRelatedUniqueNodes(_845,function(node,ary){var pary=[];var prev=node;while((prev=prev.previousSibling)){if(prev.nodeType==1){pary.push(prev);}}return pary;});},andSelf:function(){return this.concat(this._parent);},first:function(){return this._wrap(((this[0]&&[this[0]])||[]),this);},last:function(){return this._wrap((this.length?[this[this.length-1]]:[]),this);},even:function(){return this.filter(function(item,i){return i%2!=0;});},odd:function(){return this.filter(function(item,i){return i%2==0;});}});}if(!dojo._hasResource["dojox.NodeList.delegate"]){dojo._hasResource["dojox.NodeList.delegate"]=true;dojo.provide("dojox.NodeList.delegate");dojo.extend(dojo.NodeList,{delegate:function(_846,_847,fn){return this.connect(_847,function(evt){var _848=dojo.query(evt.target).closest(_846,this);if(_848.length){fn.call(_848[0],evt);}});}});}if(!dojo._hasResource["misys.grid._base"]){dojo._hasResource["misys.grid._base"]=true;dojo.provide("misys.grid._base");(function(d,dj,m){function _849(_84a,url,keys,_84b){_84a=d.isArray(_84a)?_84a:[_84a];var _84c={"list_keys":keys},_84d=d.byId("batchContainer"),_84e;if(dj.byId("reauth_password")){d.mixin(_84c,{"reauth_password":dj.byId("reauth_password").get("value")});}_84e={url:m.getServletURL(url),handleAs:"text",sync:true,content:_84c,load:function(data){data=data.replace(/\n/g,"<br>");data=data.replace(/\t/g,"&nbsp;&nbsp;&nbsp;");_84d.innerHTML=data;setTimeout(function(){m.animate("wipeIn","batchContainer");},500);m._config.groups=[];d.forEach(_84a,function(g){g.setStore(g.store);d.hitch(g,"render")();m.connect(g,"_onFetchComplete",function(){g.selection.clear();});});}};if(_84b){d.mixin(_84e,{handle:_84b});}m.xhrPost(_84e);};function _84f(_850,_851,_852,_853){var mode=dijit.byId("mode")?dijit.byId("mode").get("value"):"";var _854=dijit.byId("forwardHolidayButtonId")?dijit.byId("forwardHolidayButtonId"):new dj.form.Button({label:m.getLocalization("autoForwardMessage"),id:"forwardHolidayButtonId"});if(!dj.byId("holidayCutOffDialog")){d.require("misys.widget.Dialog");d.require("dijit.form.Button");var _855=new dj.Dialog({id:"holidayCutOffDialog",title:"Confirmation",draggable:false});var _856=d.create("div",{id:"holidayCutOffDialogContent"});var _857=d.create("div",{id:"dialogHolidayText"},_856,"first");var _858=d.create("div",{id:"holidayCutOffDialogButtons",style:"text-align:center;"},_856,"last");var _859=new dj.form.Button({label:m.getLocalization("cancelMessage"),id:"cancelHolidayButtonId"});d.place(_859.domNode,_858);_855.set("content",_856);}var _85a=dj.byId("holidayCutOffDialog");if(_850===true){d.place(_854.domNode,d.byId("holidayCutOffDialogButtons"),"first");m.dialog.connect(dj.byId("forwardHolidayButtonId"),"onClick",function(){if(_852){_85a.hide();m._config.doReauthSubmit(_853);_854.destroy();}else{_85a.hide();m.xhrPost(_853);setTimeout(d.hitch(grid,"render"),100);}},_85a.id);}else{_854.destroy();}if(d.byId("dialogHolidayText")){d.byId("dialogHolidayText").innerHTML=_851;d.byId("dialogHolidayText").innerHTML=d.byId("dialogHolidayText").innerHTML.replace(/\,/g,"");}m.dialog.connect(_85a,"onKeyPress",function(evt){if(evt.keyCode==d.keys.ESCAPE){d.stopEvent(evt);}});m.dialog.connect(dj.byId("cancelHolidayButtonId"),"onClick",function(){m.dialog.hide();_854.destroy();_85a.hide();},_85a.id);m.dialog.connect(_85a,"onHide",function(){_854.destroy();m.dialog.disconnect(_85a);m.dialog.hide();});_85a.show();};function _85b(){var _85c=true;if(dijit.byId("operation")&&dijit.byId("operation").get("value")==="LIST_FX_DEALS"){_85c=false;}return _85c;};m.grid=m.grid||{};d.mixin(m.grid,{setStore:function(_85d,_85e,_85f){var grid=_85f||_85e.args.grid,_860;if(grid){_860=grid.store;if(_860&&_860!==null){_860.close();}grid.setStore(new dojo.data.ItemFileReadStore({data:_85d,urlPreventCache:true,clearOnClose:true}));}},setStoreURL:function(node,url,_861){var grid=dj.byId(node),_862,_863,_864;if(grid){_864=grid.store;if(_864){_862=url||_864.url;_863=_861||grid.queryOptions;_864.close();_864.url=_862;if(_864.declaredClass==="dojox.data.QueryReadStore"){grid.setStore(_864,_861);}else{grid.setStore(_864,null,_861);}}else{grid.setStore(new misys.data.ItemFileReadStore({url:url,urlPreventCache:true,clearOnClose:true}),null,_861);}}},filter:function(node,_865,_866){var grid=dj.byId(node),_867=[],_868;if(grid&&(_865.length===_866.length)){d.forEach(_865,function(key,i){_868=dj.byId(_866[i]);if(_868){var _869=_868.get("value");_869=_869.replace(/\\/g,"\\\\").replace(/'/g,"\\'");if(_869!==""){_867.push(key,":'",_869,"',");}}});_867=_867.join("");if(_867.charAt(_867.length-1)===","){_867=_867.substring(0,_867.length);}grid.queryOptions=d.mixin(grid.queryOptions,{ignoreCase:true});grid.filter(d.fromJson("{"+_867.substring(0,_867.length-1)+"}"),true);}},selectAll:function(){var _86a=d.byId("select_all_box").checked,_86b=d.query("input[type=checkbox]");for(var x=0,len=_86b.length;x<len;x++){_86b[x].checked=_86a;}},reloadForSearchTerms:function(){var form=dj.byId("TransactionSearchForm"),_86c=d.query(".dojoxGrid"),_86d=d.query(".gridContainer")[0],_86e=/Date/,_86f=/Time/,_870={},_871,_872,grid;for(var i=0,len=_86c.length;i<len;i++){if(!d.hasClass(_86c[i],"noReload")){grid=dj.byId(_86c[i].id);break;}}if(grid&&form){if(dojo.isFunction(grid.gotoFirstPage)&&_85b()){grid.gotoFirstPage();}if(_86d){d.removeClass(_86d,"notready");}if(d.byId("divResults")){d.style("divResults","margin",0);}_871=grid.get("store");m.connect(grid,"_onFetchComplete",function(){setTimeout(function(){grid.resize();},500);});_872=_871.url;if(_872.indexOf("&")!==-1){_872=_872.substring(0,_872.indexOf("&"));}if(_872.indexOf("EventsSearchAction")!==-1){if(_872.indexOf("?")!==-1){_872=_872.substring(0,_872.indexOf("?"));}}form.getDescendants().forEach(function(_873,i){if(_873.name){var _874;if(_873.declaredClass=="dijit.form.RadioButton"){var _875=dojo.query("[name='"+_873.name+"']",form.domNode);d.some(_875,function(_876){var _877=dj.byNode(_876.parentNode);if(_877.checked){_874=_877.params.value;}});}else{_874=_873.get("value");}if(_86e.test(_873.declaredClass)||(_86f.test(_873.declaredClass))){_874=_873.get("displayedValue");}if(_874===" "){_874="";}_870[_873.get("name")]=_874;}});_870["searchFlag"]=true;var _878=grid.onSelectionClearedScript;if(_878){d.eval(_878);}if(grid.selection&&grid.get("selectionMode")!==""){grid.selection.clear();}_871.close();_871.url=_872;if(_870.list_keys){_870.list_keys="";}if(_871.declaredClass==="dojox.data.QueryReadStore"){grid.setStore(_871,_870);}else{grid.setStore(_871,null,_870);}}},onSelection:function(){if(this.selection.selectedIndex!=-1){var _879=this.store.getValue(this.getItem(this.selection.selectedIndex),"onSelectionChangedScript");d.eval(_879);this.updateRowStyles(this.selection.selectedIndex);}},getCellData:function(item,_87a){return this.grid.store.getValue(item,_87a);},formatJSLink:function(_87b){return (_87b&&d.isObject(_87b))?d.string.substitute("<a href='javascript:${href}'>${text}</a>",_87b):_87b;},formatSelectField:function(_87c,item){if(!item){return this.defaultValue;}var _87d=this.grid.store.getValue(item,"box_ref"),_87e=this.grid.store.getValue(item,"box_checked")==="true";return "<input id='"+value+"' name='"+value+"' onclick='alert('To implement')' type='checkbox' "+_87e?"checked='checked'":"";},formatGroupsAndAggregates:function(_87f,idx){if(_87f){return m.grid.formatHTML(_87f);}else{return _87f;}},formatSimpleHTML:function(text){text=text.replace(/&amp;nbsp;/g,"&nbsp;");text=text.replace(/&amp;#x27;/g,"&#x27;");text=text.replace(/&amp;#x2F;/g,"&#x2F;");text=text.replace(/&amp;#34;/g,"&#34;");text=text.replace(/&amp;#x28;/g,"(");text=text.replace(/&amp;#x29;/g,")");text=text.replace(/&amp;#x26;/g,"&");return text.replace(/&amp;amp;/g,"&amp;");},formatHTML:function(text){return text;},sanitizeHTMLDataForUI:function(text){if(text){text=text.replace(/<img/g,"&lt;img");text=text.replace(/>/g,"&gt;");}return text;},formatHTMLInteger:function(_880){return _880;},formatDate:function(_881){var _882=_881.indexOf(">");var _883=_881.indexOf("<",1);return _881.substring(_882+1,_883);},formatFlagImage:function(_884){var flag=_884.toLowerCase();if(misys._config.fbccVersion!==""||misys._config.fbccVersion!==null){return m.grid.formatHTML("<img src='"+m.getContextualURL(m._config.imagesSrc+"flags/")+flag+".png?v="+misys._config.fbccVersion+"'alt='"+flag+"'/>");}else{return m.grid.formatHTML("<img src='"+m.getContextualURL(m._config.imagesSrc+"flags/")+flag+".png' alt='"+flag+"'/>");}},formatCurrencyFlagImage:function(_885){var flag=_885.toLowerCase().substring(0,2);if(misys._config.fbccVersion!==""||misys._config.fbccVersion!==null){return m.grid.formatHTML("<img src='"+m.getContextualURL(m._config.imagesSrc+"flags/")+flag+".png?v="+misys._config.fbccVersion+"'alt='"+flag+"'/>");}else{return m.grid.formatHTML("<img src='"+m.getContextualURL(m._config.imagesSrc+"flags/")+flag+".png' alt='"+flag+"'/>");}},formatSummary:function(_886,_887,cell,sing,plur){if(_886===0){return "";}var str;if(_887>=0){return _886;}if(_887===-1){str=m.getLocalization("totalPrefix")+" (${numItems} ${displayName})";}else{str="${numItems} ${displayName}";}return d.string.substitute(str,{numItems:_886,displayName:(_886===1)?sing:plur});},formatOperationsSummary:function(_888,_889){return m.grid.formatSummary(_888,_889,this,"Operation","Operations");},formatTypesSummary:function(_88a,_88b){return m.grid.formatSummary(_88a,_88b,this,"Type","Types");},formatDataSummary:function(_88c,_88d){return (_88c===0)?"":_88c;},formatTitlesSummary:function(_88e,_88f){return m.grid.formatSummary(_88e,_88f,this,"Title","Titles");},formatURL:function(_890){if(!window.isAccessibilityEnabled){return (_890&&d.isObject(_890))?d.string.substitute("<a href='${href}'>${text}</a>",_890):_890;}else{var _891=misys.getLocalization("link");return (_890&&d.isObject(_890))?d.string.substitute("<a href='${href}' aria-labelledby='${href}_link_span'>${text}</a><span class='sr-only' id='${href}_link_span'>"+_891+"</span>",_890):_890;}},formatReportActions:function(_892,item,cell){var _893=cell.grid.gridMultipleItemsWidget.overrideDisplaymode;var _894=cell.grid.gridMultipleItemsWidget.id;var _895=dojo.create("div");var div=dojo.create("div",{"class":"gridActions"},_895);if(_893&&_893=="view"){dojo.create("img",{"src":misys._config.context+misys._config.imagesSrc+"pic_text.gif","alt":"View",border:"0","type":"view"},div);}else{dojo.create("img",{"src":misys.getContextualURL(misys._config.imagesSrc+m._config.imageStore.editIcon),"title":"Edit","alt":"Edit","border":"0","type":"edit"},div);dojo.create("img",{"src":misys.getContextualURL(misys._config.imagesSrc+m._config.imageStore.deleteIcon),"title":"Delete","alt":"Delete","border":"0","type":"remove"},div);if(_894==="columns"){dojo.create("img",{"src":misys._config.context+misys._config.imagesSrc+"action-up.png","alt":"Move Up",border:"0","type":"moveup"},div);dojo.create("img",{"src":misys._config.context+misys._config.imagesSrc+"action-down.png","alt":"Move Down",border:"0","type":"movedown"},div);}}return _895.innerHTML;},formatAccountActions:function(_896,item,cell){var _897=cell.grid.gridMultipleItemsWidget.overrideDisplaymode;var _898=cell.grid.gridMultipleItemsWidget.id;var _899=dojo.create("div");var div=dojo.create("div",{"class":"gridActions"},_899);if(_897&&_897=="view"){dojo.create("img",{"src":misys._config.context+misys._config.imagesSrc+"pic_text.gif","alt":"View",border:"0","type":"view"},div);}else{dojo.create("img",{"src":misys.getContextualURL(misys._config.imagesSrc+m._config.imageStore.editIcon),"title":"Edit","alt":"Edit","border":"0","type":"edit"},div);}return _899.innerHTML;},formatDeleteActions:function(_89a,item,cell){var _89b=cell.grid.gridMultipleItemsWidget.overrideDisplaymode;var _89c=dojo.create("div");var div=dojo.create("div",{"class":"gridActions"},_89c);dojo.create("img",{"src":misys.getContextualURL(misys._config.imagesSrc+m._config.imageStore.deleteIcon),"alt":"Delete","border":"0","type":"remove"},div);return _89c.innerHTML;},formatCptyDeleteActions:function(_89d,item,cell){var _89e=cell.grid.gridMultipleItemsWidget.overrideDisplaymode;var _89f=dojo.create("div");var div=dojo.create("div",{"class":"gridActions"},_89f);if(cell.grid._by_idx[item]&&cell.grid._by_idx[item].item&&cell.grid._by_idx[item].item.cpty_showDelete[0]&&cell.grid._by_idx[item].item.cpty_showDelete[0]==="true"){dojo.create("img",{"src":misys.getContextualURL(misys._config.imagesSrc+m._config.imageStore.deleteIcon),"alt":"Delete","border":"0","type":"remove"},div);}return _89f.innerHTML;},formatActions:function(_8a0){return (_8a0&&d.isObject(_8a0)?_8a0.href:_8a0);},confirmDeleteRecords:function(grid,url){var _8a1=grid.selection.getSelected().length;var _8a2=grid.store._items.length;if(_8a1>0&&_8a2>0){m.dialog.show("CONFIRMATION",m.getLocalization("deleteTransactionsConfirmation",[grid.selection.getSelected().length]),"",function(){m.grid.processRecords(grid,url);});}else{m.dialog.show("ERROR",m.getLocalization("noTransactionsSelectedError"));}},confirmSubmitRecords:function(grid,url){var _8a3=grid.selection.getSelected().length;var _8a4=grid.store._items.length;if(_8a3>0&&_8a4>0){m.dialog.show("CONFIRMATION",m.getLocalization("submitTransactionsConfirmation",[grid.selection.getSelected().length]),"",function(){m.grid.processRecordsWithHolidayCutOffValidation(grid,url);});}else{m.dialog.show("ERROR",m.getLocalization("noTransactionsSelectedError"));}},confirmResendRecords:function(grid,url){var _8a5=grid.selection.getSelected().length;var _8a6=grid.store._items.length;if(_8a5>0&&_8a6>0){m.dialog.show("CONFIRMATION",m.getLocalization("resendTransactionsConfirmation",[grid.selection.getSelected().length]),"",function(){setTimeout(function(){m.grid.processRecords(grid,url);},100);});}else{m.dialog.show("ERROR",m.getLocalization("noTransactionsSelectedError"));}},confirmCancelRecords:function(grid,url,_8a7){var _8a8=d.byId("batchContainer"),_8a9=grid.selection.getSelected(),_8aa="",_8ab=0,_8ac,xhr,_8ad=true;var _8ae=dj.byId("reauth_perform");m.animate("wipeOut",_8a8);if(_8a9.length){d.forEach(_8a9,function(_8af){_8ac=grid.store.getValues(_8af,"box_ref");if("S"+_8aa!="S"){_8aa=_8aa+",";}_8aa=_8aa+_8ac;_8ab++;});if(_8ab>0){var _8b0=function(){var _8b1={url:m.getServletURL(url),handleAs:"text",content:{list_keys:_8aa},load:function(data){data=data.replace(/\n/g,"<br>");data=data.replace(/\t/g,"&nbsp;&nbsp;&nbsp;");_8a8.innerHTML=data;m.animate("wipeIn","batchContainer");grid.selection.clear();grid.setStore(grid.store);}};var _8b2=function(){m.xhrPost(_8b1);setTimeout(d.hitch(grid,"render"),100);};if((_8ae&&_8ae.get("value")==="Y")&&d.isFunction(m._config.doReauthSubmit)){m._config.doReauthSubmit(_8b1);}else{_8b2();}};m.dialog.show("CONFIRMATION",m.getLocalization("cancelledTransactionsConfirmation",[grid.selection.getSelected().length]),"",_8b0);}}else{m.dialog.show("ERROR",m.getLocalization("noTransactionsSelectedError"));}},confirmForwardRecords:function(grid,url){var _8b3=grid.selection.getSelected().length;if(_8b3>0){m.dialog.show("CONFIRMATION",m.getLocalization("forwardsTransactionConfirmation",[grid.selection.getSelected().length]),"",function(){m.rocessRecords(grid,url);});}else{m.dialog.show("ERROR",m.getLocalization("noTransactionsSelectedError"));}},processRecordsWithHolidayCutOffValidation:function(grid,url){var _8b4=d.byId("batchContainer"),_8b5=grid.selection.getSelected(),_8b6="",_8b7=0,_8b8,xhr,_8b9=true,_8ba,_8bb,_8bc,_8bd;var _8be=[];m.animate("wipeOut",_8b4);var _8bf=dj.byId("reauth_perform");if(_8b5.length){d.forEach(_8b5,function(_8c0){_8b8=grid.store.getValues(_8c0,"box_ref");if("S"+_8b6!="S"){_8b6=_8b6+",";}_8b6=_8b6+_8b8;_8b7++;});if(_8b7>0){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/ValidateHolidayCutOffMultipleSubmission"),handleAs:"json",preventCache:true,sync:true,content:{list_keys:_8b6},load:function(_8c1,args){_8bd=_8c1.autoForwardEnabled;_8b9=_8c1.isValid;_8ba=_8c1.autoForwardTransactionDetails;_8bc=_8c1.failedTransactionDetailsCutOff;_8bb=_8c1.failedTransactionDetailsHolidays;},error:function(_8c2,args){console.error("[misys.grid._base] processRecordsWithHolidayCutOffValidation error",_8c2);}});if(_8b9){var _8c3={url:m.getServletURL(url),handleAs:"text",content:{list_keys:_8b6},load:function(data){data=data.replace(/\n/g,"<br>");data=data.replace(/\t/g,"&nbsp;&nbsp;&nbsp;");_8b4.innerHTML=data;grid.selection.clear();grid.setStore(grid.store);setTimeout(function(){m.animate("wipeIn","batchContainer");},1000);}};var _8c4=function(){m.xhrPost(_8c3);setTimeout(d.hitch(grid,"render"),10000);};if((_8bf&&_8bf.get("value")==="Y")&&d.isFunction(m._config.doReauthSubmit)){m._config.doReauthSubmit(_8c3);}else{_8c4();}}else{if(_8bd&&_8bd==="N"){_8be=[];_8be.push("<div style='display:block;'>"+m.getLocalization("Cutoffdatepassed")+"<br/>");d.forEach(_8ba,function(node){_8be.push("<li>"+node+"</li>");});_8be.push("</div>");if((_8bf&&_8bf.get("value")==="Y")&&d.isFunction(m._config.doReauthSubmit)){_8c4=function(){m._config.doReauthSubmit(_8c3);};m.dialog.show("CUSTOM-NO-CANCEL",_8be.join(""),"",_8c4);}else{m.dialog.show("CUSTOM-NO-CANCEL",_8be.join(""),"",callBack);}}else{_8be=[];if(_8bd){if(_8bc.length>0){_8be.push("<div <b>"+m.getLocalization("failedMultipleSubmissionCutOff")+"</b><br/>");d.forEach(_8bc,function(node){_8be.push("<li>"+node+"</li>");});_8be.push("</div>");}if(_8bb.length>0){_8be.push("<div style='display:block;'><b>"+m.getLocalization("failedMultipleSubmissionHoliday")+"</b><br/>");d.forEach(_8bb,function(node){_8be.push("<li>"+node+"</li>");});_8be.push("</div>");}_8be.push("<div style='display:block;'><b>"+m.getLocalization("autoForwardMultipleSubmission")+"</b><br/>");_8be.push("</div>");_8c3={url:m.getServletURL(url),handleAs:"text",content:{list_keys:_8b6,autoForward:"Y"},load:function(data){data=data.replace(/\n/g,"<br>");data=data.replace(/\t/g,"&nbsp;&nbsp;&nbsp;");_8b4.innerHTML=data;m.animate("wipeIn","batchContainer");grid.selection.clear();grid.setStore(grid.store);}};if((_8bf&&_8bf.get("value")==="Y")&&d.isFunction(m._config.doReauthSubmit)){_84f(_8bd,_8be,true,_8c3);}else{_84f(_8bd,_8be,false,_8c3);}}else{if(_8bc.length>0){_8be.push("<div style='display:block;'><b>"+m.getLocalization("failedMultipleSubmissionCutOff")+"</b><br/>");d.forEach(_8bc,function(node){_8be.push("<li>"+node+"</li>");});}if(_8bb.length>0){_8be.push("<div style='display:block;'><b>"+m.getLocalization("failedMultipleSubmissionHoliday")+"</b><br/>");d.forEach(_8bb,function(node){_8be.push("<li>"+node+"</li>");});}_84f(_8bd,_8be,false,_8c3);}}}}}},processDeletionOfBatch:function(grid,url){var _8c5=d.byId("batchContainer"),_8c6=grid.selection.getSelected(),_8c7="",_8c8=0,_8c9,xhr,_8ca=true;m.animate("wipeOut",_8c5);if(_8c6.length){d.forEach(_8c6,function(_8cb){_8c9=grid.store.getValues(_8cb,"box_ref");if("S"+_8c7!="S"){_8c7=_8c7+",";}_8c7=_8c7+_8c9;_8c8++;});if(_8c8>0){var _8cc=function(){m.xhrPost({url:m.getServletURL(url),handleAs:"text",content:{list_keys:_8c7},load:function(data){data=data.replace(/\n/g,"<br>");data=data.replace(/\t/g,"&nbsp;&nbsp;&nbsp;");_8c5.innerHTML=data;m.animate("wipeIn","batchContainer");grid.setStore(grid.store);setTimeout(d.hitch(grid,"render"),300);m.connect(grid,"_onFetchComplete",function(){grid.selection.clear();});}});};m.dialog.show("CONFIRMATION",m.getLocalization("batchSelectedDelete"),"",_8cc);}}else{if(_8c6.length===0){m.dialog.show("ERROR",m.getLocalization("noTransactionsSelectedError"));}}},processBatchingOfRecords:function(grid,url){var _8cd=d.byId("batchContainer"),_8ce=grid.selection.getSelected(),_8cf="",_8d0=0,_8d1,xhr,_8d2=true;m.animate("wipeOut",_8cd);if(_8ce.length){d.forEach(_8ce,function(_8d3){_8d1=grid.store.getValues(_8d3,"box_ref");if("S"+_8cf!="S"){_8cf=_8cf+",";}_8cf=_8cf+_8d1;_8d0++;});if(_8d0>0){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/ValidateBatchCriteria"),handleAs:"json",preventCache:true,sync:true,content:{list_keys:_8cf},load:function(_8d4,args){_8d2=_8d4.isValid;},error:function(_8d5,args){console.error("[misys.grid._base] processBatchingOfRecords error",_8d5);}});if(!_8d2){m.dialog.show("ERROR",m.getLocalization("batchTransactionsError"));}else{m.xhrPost({url:m.getServletURL(url),handleAs:"text",sync:true,content:{list_keys:_8cf},load:function(data){data=data.replace(/\n/g,"<br>");data=data.replace(/\t/g,"&nbsp;&nbsp;&nbsp;");_8cd.innerHTML=data;grid.selection.clear();grid.setStore(grid.store);setTimeout(function(){m.animate("wipeIn","batchContainer");},3000);}});setTimeout(d.hitch(grid,"render"),100);}}}else{if(_8ce.length===0){m.dialog.show("ERROR",m.getLocalization("noTransactionsSelectedError"));}}},processRecords:function(grid,url,_8d6){var _8d7=d.isArray(grid)?grid:[grid],_8d8=d.byId("batchContainer"),_8d9=[],keys="",_8da=0,_8db,_8dc;m.animate("wipeOut",_8d8);d.forEach(_8d7,function(grid){_8d9=grid.selection.getSelected();if(_8d9&&_8d9.length){d.forEach(_8d9,function(_8dd){_8db=grid.store.getValues(_8dd,"box_ref");if(keys!==""){keys+=", ";}keys+=_8db;_8da++;});}});if(_8da>0){_849(_8d7,url,keys,_8d6);}grid.multipleSelectItems=new Object();},setListKey:function(grid){var keys="",_8de=grid.selection.getSelected(),_8df=0,_8e0=dj.byId("list_keys"),_8e1;if(_8de.length){d.forEach(_8de,function(_8e2){_8e1=grid.store.getValues(_8e2,"box_ref");if(_8df!==0){keys+=",";}keys+=_8e1;_8df++;});}if(_8e0&&_8e0!==null){_8e0.set("value",keys);}if(_8df===0&&dj.byId("export_list")&&dj.byId("export_list").get("value")==="zip"){m.dialog.show("ERROR",m.getLocalization("noTransactionsSelectedError"));e.preventDefault();}},beforeRow:function(_8e3,_8e4){if(_8e4.length>=2){if(_8e4[1]&&!_8e4[1].hidden){_8e4[1].hidden=true;}if(_8e3===-1){if(!_8e4.headerDisplayed){_8e4.headerDisplayed=true;}else{_8e4[1].hidden=true;if(_8e4.length===3){_8e4[2].hidden=true;}}}else{var item=this.grid.getItem(_8e3);if(item){var _8e5=this.grid.store.getValue(item,"_row_type");if(_8e5===2||_8e5===3){_8e4[1].hidden=false;}else{if(_8e5===4){_8e4[1].hidden=false;_8e4[2].hidden=false;}else{_8e4[1].hidden=true;if(_8e4.length===3){_8e4[2].hidden=true;}}}}else{_8e4[1].hidden=true;if(_8e4.length===3){_8e4[2].hidden=true;}}}}},validateSearchDateRange:function(){var _8e6=dj.byId("range").get("value"),_8e7=dj.byId("startdate"),end=dj.byId("enddate"),diff=0;if(_8e7&&end){diff=d.date.difference(dj.byId("startdate").get("value"),dj.byId("enddate").get("value"),"day");}var days;if(_8e6==1){days=31;}else{days=92;}if(diff<0||diff>days){var _8e8=false;if(_8e6==1){m.connect("startdate","onChange",function(){if(!_8e8){var _8e9=dojo.date.add(dj.byId("startdate").get("value"),"month",1);dijit.byId("enddate").set("value",_8e9);_8e8=true;}});m.connect("enddate","onChange",function(){if(!_8e8){var _8ea=dojo.date.add(dj.byId("enddate").get("value"),"month",-1);dijit.byId("startdate").set("value",_8ea);_8e8=true;}});}else{if(_8e6==3){m.connect("startdate","onChange",function(){if(!_8e8){var _8eb=dojo.date.add(dj.byId("startdate").get("value"),"month",3);dijit.byId("enddate").set("value",_8eb);_8e8=true;}});m.connect("enddate","onChange",function(){if(!_8e8){var _8ec=dojo.date.add(dj.byId("enddate").get("value"),"month",-3);dijit.byId("startdate").set("value",_8ec);_8e8=true;}});}else{this.invalidMessage=m.getLocalization("monthRangeValidityMessage",[_8e6,dj.byId("startdate").get("displayedValue")]);return false;}}}return true;},redirect:function(_8ed){var grid=_8ed.grid,item=grid.getItem(_8ed.rowIndex),url=grid.store.getValue(item,"SCREEN");if(url){var _8ee=m.getQueryParameterByName("productcode",url);var _8ef=m.getQueryParameterByName("subproductcode",url);var _8f0=[];if(misys._config.isBank==="false"&&misys._config.fccuiEnabled&&misys._config.fccuiEnabled==="true"&&m.isAngularProductUrl(_8ee,_8ef)){_8f0.push("/productScreen?");_8f0.push("refId=",m.getQueryParameterByName("referenceid",url));_8f0.push("&tnxId=",m.getQueryParameterByName("tnxid",url));_8f0.push("&productCode=",_8ee);_8f0.push("&subProductCode=",_8ef);_8f0.push("&mode=",m.getQueryParameterByName("mode",url));_8f0.push("&tnxTypeCode=",m.getQueryParameterByName("tnxtype",url));_8f0.push("&subTnxTypeCode=",m.getQueryParameterByName("subTnxTypeCode",url));window.location=m.getServletURL("").replace(/.$/,"#")+_8f0.join("");}else{window.location=url;}}},noSortOnSecondColumn:function(_8f1){return Math.abs(_8f1)!==2;},toggleExpandedList:function(id,_8f2){d.query("#"+id+" li").forEach(function(l,i){if(i>=_8f2){d.toggleClass(l,"hide");}});d.toggleClass(id+"_show","hide");d.toggleClass(id+"_hide","hide");},noSortOnThirdColumn:function(_8f3){return Math.abs(_8f3)!==3;},noSortOnFourthColumn:function(_8f4){return Math.abs(_8f4)!==4;},noSortOnFifthColumn:function(_8f5){return Math.abs(_8f5)!==5;},noSortOnSixthColumn:function(_8f6){return Math.abs(_8f6)!==6;},noSortOnSeventhColumn:function(_8f7){return Math.abs(_8f7)!==7;},noSortOnEighthColumn:function(_8f8){return Math.abs(_8f8)!==8;},noSortOnNinthColumn:function(_8f9){return Math.abs(_8f9)!==9;},noSortOnEleventhColumn:function(_8fa){return Math.abs(_8fa)!==11;},noSortOnThirteenthColumn:function(_8fb){return Math.abs(_8fb)!==13;},noSortOnThirdFourthAndFifthColumn:function(_8fc){return Math.abs(_8fc)!==3&&Math.abs(_8fc)!==4&&Math.abs(_8fc)!==5;},noSortOnAllColumns:function(_8fd){return false;},noSortOnThirdAndSeventhColumn:function(_8fe){return Math.abs(_8fe)!==3&&Math.abs(_8fe)!==7;},noSortOnLastColumn:function(_8ff){return Math.abs(_8ff)!==this.layout.cellCount;},noSortEnabledOnColumn:function(_900){return this.noSortColumnIndex.indexOf(_900)===-1;},noSortColumnConfiguredOnHeader:function(_901){var grid=this;var _902="";if(grid.structure.cells[0][_901-1]){_902=grid.structure.cells[0][_901-1];if(grid.selectionMode&&(grid.selectionMode==="single"||grid.selectionMode==="multiple")){_902=grid.structure.cells[0][_901-2];}}if(grid.structure.cells[1]){_902=grid.structure.cells[1][_901-2];if(grid.selectionMode&&(grid.selectionMode==="single"||grid.selectionMode==="multiple")){_902=grid.structure.cells[1][_901-3];}}if(_902){if(_902["sort"]&&_902["sort"]==="false"){return false;}else{return true;}}else{return true;}},sortAmountColumn:function(a,b){var amtA=a;var amtB=b;if(!amtA||amtA==""||amtA==null){amtA=0;}else{amtA=amtA.replace(/\./g,"");amtA=amtA.replace("/ /g","");amtA=amtA.replace(/\,/g,"");amtA=parseFloat(amtA);}if(!amtB||amtB==""||amtB==null){amtB=0;}else{amtB=amtB.replace(/\./g,"");amtB=amtB.replace("/ /g","");amtB=amtB.replace(/\,/g,"");amtB=parseFloat(amtB);}if(amtA>amtB){return 1;}if(amtA<amtB){return -1;}return 0;},sortAccountNumberColumn:function(a,b){var _903=a.substring(a.indexOf(">",1)+1,a.indexOf("<",1));var _904=b.substring(b.indexOf(">",1)+1,b.indexOf("<",1));if(_903>_904){return -1;}if(_903<_904){return 1;}return 0;},sortFloatColumn:function(a,b){var _905=parseFloat(a);var _906=parseFloat(b);if((isNaN(_905)&&isNaN(_906))||(_905===_906)){return 0;}else{if(isNaN(_905)||(_905>_906)){return 1;}else{return -1;}}},sortLinkColumn:function(a,b){var _907=a.substring(a.indexOf(">",1)+1,a.indexOf("<",1));var _908=b.substring(b.indexOf(">",1)+1,b.indexOf("<",1));if(_907>_908){return 1;}if(_907<_908){return -1;}return 0;},sortLinkDateColumn:function(a,b){var _909=a.substring(a.indexOf(">",1)+1,a.indexOf("<",1));var _90a=b.substring(b.indexOf(">",1)+1,b.indexOf("<",1));return m.grid.sortDateColumn(_909,_90a);},formatDateTimeColumn:function(_90b){if(!_90b.match(/^[0-9]+$/i)){return _90b;}else{var _90c=eval(_90b);console.warn("formatDateTimeColumn has been called!!");var _90d=dojo.date.locale.format(new Date(_90c),{datePattern:m.getLocalization("g_strGlobalDateFormat"),selector:"date"});return _90d;}},sortCaseSensetiveColumn:function(a,b){var A=a.toLowerCase();var B=b.toLowerCase();if(A>B){return 1;}if(A<B){return -1;}return 0;},sortOnAnchorDescriptionCaseSensetive:function(a,b){var _90e=document.createElement("div");_90e.innerHTML=a;var _90f=_90e.innerText;_90e.innerHTML=b;var _910=_90e.innerText;return misys.grid.sortCaseSensetiveColumn(_90f,_910);},sortDateColumn:function(a,b){var _911=m.getLocalization("g_strGlobalDateFormat");var _912=d.date.locale.parse(a,{selector:"date",datePattern:_911});var _913=d.date.locale.parse(b,{selector:"date",datePattern:_911});return d.date.compare(_912,_913);},sortFormatDateColumn:function(a,b){var _914=m.getLocalization("g_strGlobalDateFormat");var _915=m.grid.formatDate(a);var _916=m.grid.formatDate(b);var _917=d.date.locale.parse(_915,{selector:"date",datePattern:_914});var _918=d.date.locale.parse(_916,{selector:"date",datePattern:_914});return d.date.compare(_917,_918);},getURL:function(_919,item){if(!item||!item.i[this.field]){return this.defaultValue;}if(!item.i[this.field+"_uri"]){return this.grid.store.getValue(item,this.field);}return {text:this.grid.store.getValue(item,this.field),href:this.grid.store.getValue(item,this.field+"_uri")};},getActions:function(_91a,item){if(!item){return this.defaultValue;}return {href:this.grid.store.getValue(item,this.field+"_uri")};},deleteRecords:function(){m.concatCheckboxes(m.getLocalization("deleteTransactionsConfirmation"));},loadRecords:function(){var _91b=0;d.query(".gridCheckbox").forEach(function(_91c){if(d.attr(_91c,"checked")){_91b++;}});if(_91b>0){m.concatCheckboxes(m.getLocalization("loadRecordsConfirmation",[_91b]));}else{m.dialog.show("ERROR",m.getLocalization("noTemplateSelectedError"));}},submitRecords:function(){m.concatCheckboxes(m.getLocalization("submitTransactionsConfirmation"));},submitOpenAccount:function(){var _91d=function(){dj.byId("dijit_form_Button_3").set("disabled",false);};var _91e=[];d.query(".dojoxGrid").forEach(function(g){_91e.push(dj.byId(g.id));});var _91f=dj.byId("referenceid")?dj.byId("referenceid").get("value"):"";var _920=dj.byId("tnxid")?dj.byId("tnxid").get("value"):"";var url="/screen/AjaxScreen/action/RunPOGroupSubmission?s=PurchaseOrderScreen&operation=SUBMIT&option=PO_FOLDER&mode=DRAFT&tnxtype=01";if(_91f){url+="&referenceid="+_91f;}if(_920){url+="&tnxid="+_920;}m.grid.processRecords(_91e,url);},saveOpenAccount:function(){var _921=[];d.query(".dojoxGrid").forEach(function(g){_921.push(dj.byId(g.id));});var _922=dj.byId("referenceid")?dj.byId("referenceid").get("value"):"";var _923=dj.byId("tnxid")?dj.byId("tnxid").get("value"):"";var url="/screen/AjaxScreen/action/RunPOGroupSubmission?s=PurchaseOrderScreen&operation=SAVE&option=PO_FOLDER&mode=DRAFT&tnxtype=01";if(_922){url+="&referenceid="+_922;}if(_923){url+="&tnxid="+_923;}m.grid.processRecords(_921,url);},submitBankerGuarantee:function(){var _924=[];d.query(".dojoxGrid").forEach(function(g){_924.push(dj.byId(g.id));});var _925=dijit.byId("referenceid")?dijit.byId("referenceid").get("value"):"";var _926=dijit.byId("tnxid")?dijit.byId("tnxid").get("value"):"";var url="/screen/AjaxScreen/action/RunGroupBGDelete?s=BankerGuaranteeScreen&operation=DELETE&option=PRODUCTS_MAINTENANCE";if(_925){url+="&referenceid="+_925;}if(_926){url+="&tnxid="+_926;}m.grid.processRecords(_924,url);},selectFolderRow:function(grid,_927,_928){var _929=[],_92a=false,_92b,_92c,_92d,_92e;if(_927.i._row_type===0){_92b=_927.n;if(_92b&&_92b!=null){_92c=d.indexOf(m._config.groups,_92b);if(_92c>-1){_92d=m._config.groups[_92c]+1;_92e=m._config.groups[_92c+1];_92a=_928[_92b];m._config.folderTotals=m._config.folderTotals||{};m._config.folderTotals[_927.i._group_id]=0;for(;_92d<_92e;_92d++){grid.selection.setSelected(_92d,_92a);_929.push(grid.getItem(_92d));}}else{console.error("[grid/_base] Problem finding group Id index",groupId," group row number array",m._config.groups);}}}else{if(_927.i._row_type===1){_929.push(_927);}}},selectUnsignedFolderRow:function(grid,_92f,_930){var _931=d.isArray(_92f)?_92f:[_92f];},groupRecords:function(){m.concatCheckboxes(m.getLocalization("deleteRoutingSummariesConfirmation"));},printRecords:function(grid,url){var _932=grid.selection.getSelected().length;var _933=grid.store._items.length;if(_932>0&&_933>0){m.dialog.show("CONFIRMATION",m.getLocalization("printTransactionsConfirmation",[grid.selection.getSelected().length]),"",function(){var _934=d.isArray(grid)?grid:[grid],_935=[],keys="",_936=0,_937,_938;d.forEach(_934,function(grid){_935=grid.selection.getSelected();if(_935&&_935.length){d.forEach(_935,function(_939){_937=grid.store.getValues(_939,"box_ref");if(keys!==""){keys+=", ";}keys+=_937;_936++;});}});var _93a={"list_keys":keys};var form=new dijit.form.Form({method:"POST",action:m.getServletURL(url),content:_93a},"submitForm");var _93b=new dijit.form.SimpleTextarea({name:"list_keys",style:"width:auto;visibility:hidden;"},"list_keys");_93b.set("value",keys);form.domNode.appendChild(_93b.domNode);document.body.appendChild(form.domNode);form.domNode.appendChild(dijit.byId("token").domNode);form.submit();d.forEach(_934,function(g){g.setStore(g.store);d.hitch(g,"render")();m.connect(g,"_onFetchComplete",function(){g.selection.clear();});});});}else{m.dialog.show("ERROR",m.getLocalization("noTransactionsSelectedError"));}},selectAllRecords:function(_93c){var i;for(i=0;i<dj.byId(_93c).rowCount;i++){dj.byId(_93c).selection.addToSelection(i);}},deselectAllRecords:function(_93d){dj.byId(_93d).selection.deselectAll();},reloadDialogGridForSearchTerms:function(_93e,_93f){var form=dj.byId(_93e),grid=dj.byId(_93f),_940=/Date/,_941=/Time/,_942="?",_943,_944;if(grid&&form){if(dojo.byId("divResults")){d.style("divResults","margin",0);}_943=grid.get("store");misys.connect(grid,"_onFetchComplete",function(){setTimeout(function(){grid.resize();},500);});_944=_943.url;if(_944.indexOf("?listdef=")!==-1){if(_944.indexOf("&")!==-1){_942=_944.substring(_944.indexOf("?listdef="),_944.indexOf("&"))+"&";}else{_942=_944.substring(_944.indexOf("?listdef="))+"&";}}if(_944.indexOf("&fields=")!==-1){var _945=_944.substring(_944.indexOf("fields="));if(_945.indexOf("&")!==-1){_945=_945.substring(_945.indexOf("fields="),_945.indexOf("&"));}_942+=_945+"&";}form.getDescendants().forEach(function(_946,i){if(_946.name){if(i!==0){_942+="&";}var _947=_946.get("value");if(_940.test(_946.declaredClass)||(_941.test(_946.declaredClass))){_947=_946.get("displayedValue");}if(_947===" "){_947="";}_942+=_946.get("name")+"="+encodeURIComponent(_947);}});if(grid.selection&&grid.get("selectionMode")!==""){grid.selection.clear();}if(_943.url.indexOf("?")!==-1){_944=_943.url.substring(0,_943.url.indexOf("?"));}_943.close();_943.url=_944+_942;grid.setStore(_943);}},formatOpenAccountProductType:function(_948,item){var type=dojo.isArray(item.type)?item.type[0]:item.type;var _949=dojo.isArray(item.type_label)?item.type_label[0]:item.type_label;var _94a=dojo.isArray(item.other_type)?item.other_type[0]:item.other_type;return (type=="OTHR"?_94a:_949);},showGroups:function(_94b,_94c){m.grid.toggleAllGroups(_94b,true);d.style(d.byId("open"+_94c),"display","none");d.style(d.byId("close"+_94c),"display","inline");},hideGroups:function(_94d,_94e){m.grid.toggleAllGroups(_94d,false);d.style(d.byId("close"+_94e),"display","none");d.style(d.byId("open"+_94e),"display","inline");},toggleAllGroups:function(node,_94f){var grid=dj.byId(node);if(grid&&"expandedGroups" in grid){for(var i=1,_950=grid.rowCount;i<=_950;i++){grid.expandedGroups[i]=_94f;}}grid.update();},toggleAllGroupsWithTimeOut:function(node,_951){var grid=dj.byId(node);if(grid&&"expandedGroups" in grid){for(var i=1,_952=grid.rowCount;i<=_952;i++){grid.expandedGroups[i]=_951;}}else{setTimeout(function(){if(grid&&"expandedGroups" in grid){for(var i=1,_952=grid.rowCount;i<=_952;i++){grid.expandedGroups[i]=_951;}}},1000);}grid.update();},getGroupHeader:function(_953,item){if(!item){return "undefined";}this.grid.expandedGroups=this.grid.expandedGroups||[];var _954=this.grid.store.getValue(item,"_group_id"),show=(typeof this.grid.expandedGroups[_954]!=="undefined"&&!this.grid.expandedGroups[_954]);m._config.groups=m._config.groups||[];m._config.groups.push(_953);return {groupId:_954,show:show,name:this.grid.store.getValue(item,"_group_name"),gridId:this.grid.id,rowIndex:_953};},getGroupFooter:function(_955,item){if(!item){return "undefined";}return {name:this.grid.store.getValue(item,"_group_name"),value:this.grid.store.getValue(item,"_group_footer"),gridId:this.grid.id};},formatGroupFooter:function(_956,idx){if(_956&&d.isObject(_956)){if(_956.name==="_root"){return d.string.substitute("<b>${value}</b>",_956);}return d.string.substitute("<i>${value}</i>",_956);}else{return _956;}},formatGroupHeader:function(_957){if(_957&&d.isObject(_957)){if(_957.name==="_root"){return "";}_957.image=_957.show?"closed.gif":"open.gif";return d.string.substitute("<img src='"+m.getContextualURL("/content/images/${image}")+"' onclick='misys.grid.toggleGroup(${show}, \"${groupId}\","+"\"${gridId}\")' height='11' width='11'> ${name}",_957);}else{return _957;}},setGroupBeforeRow:function(_958,_959){var _95a=_959[2],_95b=0,_95c=1,item,_95d,_95e,_95f;_959[_95b].hidden=false;_959[_95c].hidden=false;if(_95a){_959[2].hidden=false;}if(_958<0){_959[_95b].hidden=true;_959[_95c].hidden=false;if(_95a){_959[2].hidden=true;}return;}item=this.grid.getItem(_958);if(item){_95d=this.grid.store.getValue(item,"_group_id");_95e=this.grid.store.getValue(item,"_row_type");_95f=this.grid.store.getValue(item,"_group_name");if(_95e===0){if(_95f==="_root"){_959[_95b].hidden=true;}else{_959[_95b].hidden=false;}_959[_95c].hidden=true;if(_95a){_959[2].hidden=true;}}else{if(_95e===1){_959[_95b].hidden=true;if(typeof this.grid.expandedGroups[_95d]!="undefined"&&!this.grid.expandedGroups[_95d]){_959[_95c].hidden=true;}else{_959[_95c].hidden=false;}if(_95a){_959[2].hidden=true;}}else{if(_95e===2){_959[_95b].hidden=true;_959[_95c].hidden=true;if(_95a){_959[2].hidden=false;}}}}}},toggleGroup:function(_960,_961,_962){var grid=dj.byId(_962);grid.expandedGroups[_961]=_960;grid.sizeChange();}});d.mixin(m,{redirectWithConfirmation:function(_963,_964){if(_964){m.dialog.show("CONFIRMATION",_964,"",function(){window.location.href=_963;});}else{window.location.href=_963;}},toggleHistoryButton:function(type){var _965;if(type==="STANDARD"){_965=d.position(dj.byId("threadHistoryButton").domNode).h;d.style(dj.byId("threadHistoryButton").domNode,"display","none");d.style(dj.byId("historyButton").domNode,"display","block");}else{_965=d.position(dj.byId("historyButton").domNode).h;d.style(dj.byId("threadHistoryButton").domNode,"display","block");d.style(dj.byId("historyButton").domNode,"display","none");}d.style("historyButtons","height",_965+"px");},concatCheckboxes:function(_966,_967,_968){var keys="",_969=0,_96a,_96b;if(_967){_96a=dj.byId("TransactionSearchForm");_96b=dj.byId("RealForm");d.query(".gridCheckbox").forEach(function(_96c){if(d.attr(_96c,"checked")){if(keys.length!==0){keys+=", ";}keys+=_96c.id;_969++;}});if(keys.length>0){dj.byId("list_keys").set("value",keys);if(_968==="dissociate"){_96b.set("action",m.getServletURL("/screen/BankSystemFeaturesScreen?operation="+"REMOVE_CUSTOMER_AS_COUNTERPARTY&option=CUSTOMER_COUNTERPARTY"));}_96b.submit();}}else{m.dialog.show("CONFIRMATION",_966,"",function(){m.concatCheckboxes(_966,true,_968);});}},showTransactionUsersDialog:function(_96d,_96e,_96f){var node=d.query(".grid")[0],grid,_970;if(node){grid=dj.byId(node.id);_970=grid.focus.rowIndex;if(grid.selection.isSelected(_970)){grid.selection.deselect(_970);}else{grid.selection.setSelected(_970,true);}}m.showSearchDialog("User","",_96d,"AjaxScreen/action/GetValidationUsersPopup",_96e,"width:700px;height:600px;overflow:auto;",_96f,"","GetValidationUsersList");},toggleSearchGrid:function(){var _971=d.byId("actionDown");var _972=d.byId("actionUp");var _973=d.byId("searchCriteria");if(d.style("searchCriteria","display")==="none"){m.animate("wipeIn",_973);d.style("actionDown","display","none");d.style("actionUp","display","block");if(window.isAccessibilityEnabled){d.style("actionUp","cursor","default");}else{d.style("actionUp","cursor","pointer");}}else{m.animate("wipeOut",_973);d.style("actionUp","display","none");d.style("actionDown","display","block");if(window.isAccessibilityEnabled){d.style("actionDown","cursor","default");}else{d.style("actionDown","cursor","pointer");}}}});})(dojo,dijit,misys);}if(!dojo._hasResource["misys.widget.Bookmark"]){dojo._hasResource["misys.widget.Bookmark"]=true;dojo.provide("misys.widget.Bookmark");fncSaveBookmarkAction=function(link,_974,_975){var text="";var _976=["<?xml version=\"1.0\" encoding=\"UTF-8\"?><bookmark>"];var _977=dijit.byId("sendBookmark");dojo.forEach(_977.getDescendants(),function(_978){_976.push("<",_978.get("name"),">",_978.get("value"),"</",_978.get("name"),">");});_976.push("<bookmark_id>",link,"</bookmark_id>");_976.push("<action>",link,"</action></bookmark>");var _979=misys.xhrPost({url:misys.getServletURL("/screen/BookmarkScreen?currentActionCode="+_974+"&currentScreen="+_975),postData:_976.join(""),load:function(_97a){text=_97a;}});_979.then(function(){var _97b=dojo.byId("favorites");if(!dijit.byId("sendBookmark")){dojo.parser.parse(dojo.byId("favorites"));}misys.animate("wipeOut",_97b,function(){dijit.byId("sendBookmark").destroyRecursive(true);_97b.innerHTML=text.substring(20,text.length-6);misys.animate("wipeIn",_97b);});});return _979;};fncDeleteBookmarkAction=function(id,_97c,_97d,_97e){var _97f=["<?xml version=\"1.0\" encoding=\"UTF-8\"?><bookmark>"];var _980=dijit.byId("sendBookmark");dojo.forEach(_980.getDescendants(),function(_981){if(_981.id!="bookmark_"+id){_97f.push("<",_981.get("name"),">",_981.get("value"),"</",_981.get("name"),">");}});_97f.push("<action>",_97c,"</action></bookmark>");var text="";var _982=misys.xhrPost({url:misys.getServletURL("/screen/BookmarkScreen?currentActionCode="+_97d+"&currentScreen="+_97e),postData:_97f.join(""),load:function(_983){text=_983;}});_982.then(function(){var _984=dojo.byId("favorites");if(!dijit.byId("sendBookmark")){dojo.parser.parse(dojo.byId("favorites"));}misys.animate("wipeOut",_984,function(){dijit.byId("sendBookmark").destroyRecursive(true);_984.innerHTML=text.substring(20,text.length-6);misys.animate("wipeIn",_984);});});return _982;};fncDoBookmarkAction=function(type,_985,id,_986,_987){if(!dijit.byId("sendBookmark")){dojo.parser.parse("favorites");}if(type=="SAVE"){fncSaveBookmarkAction(_985,_986,_987);}else{fncDeleteBookmarkAction(id,_985,_986,_987);}};}if(!dojo._hasResource["misys.binding.SessionTimer"]){dojo._hasResource["misys.binding.SessionTimer"]=true;dojo.provide("misys.binding.SessionTimer");(function(d,m){function _988(){var _989=dijit.byId("sessionMaxDurationOverDialog");var _98a=dojo.byId("sessionMaxDurationOverDialogButtons"),_98b=dijit.byId("sessionMaxDurationOverButton").domNode;var _98c=dojo.byId("sessionMaxDurationOverDialogContent");dojo.style(_98a,"display","block");dojo.style(_98c,"display","block");dojo.style(_98b,"display","inline-block");dojo.style(_989.closeButtonNode,"display","none");_989.set("title",misys.getLocalization("sessionalertMessage"));misys.dialog.connect(_989,"onKeyPress",function(evt){if(evt.keyCode==dojo.keys.ESCAPE){dojo.stopEvent(evt);}});misys.dialog.connect(dijit.byId("sessionMaxDurationOverButton"),"onClick",function(){misys.dialog.disconnect(_989);_989.hide();document.location.href=dojo.byId("loginAction").value;},_989.id);misys.dialog.connect(_989,"onHide",function(){misys.dialog.disconnect(_989);});_989.show();};function _98d(){var _98e=dijit.byId("idleSessionDialog");var _98f=dojo.byId("idleSessionDialogButtons"),_990=dijit.byId("sessionContinueButton").domNode,_991=dijit.byId("sessionlogButton").domNode;var _992=dojo.byId("idleSessionDialogContent");dojo.style(_98f,"display","block");dojo.style(_992,"display","block");dojo.style(_990,"display","inline-block");dojo.style(_991,"display","inline-block");dojo.style(_98e.closeButtonNode,"display","none");_98e.set("title",misys.getLocalization("sessionalertMessage"));misys.dialog.connect(_98e,"onKeyPress",function(evt){if(evt.keyCode==dojo.keys.ESCAPE){dojo.stopEvent(evt);}});misys.dialog.connect(dijit.byId("sessionContinueButton"),"onClick",function(){var _993=false;misys.xhrGet({url:misys.getServletURL("/screen/AjaxScreen/action/PingAction"),sync:true,handleAs:"text",load:function(_994,args){if(_994.indexOf("SC_UNAUTHORIZED")!==-1){_993=true;}},customError:function(_995,_996){_993=true;}});if(_993){misys.showSessionOverDialog();misys.dialog.disconnect(_98e);_98e.hide();}else{misys.idleSessionTimer(0);misys.dialog.disconnect(_98e);_98e.hide();}},_98e.id);misys.dialog.connect(dijit.byId("sessionlogButton"),"onClick",function(){misys.dialog.disconnect(_98e);_98e.hide();if(dojo.byId("_token")&&dojo.byId("logoutAction")){misys.post({action:dojo.byId("logoutAction").value,params:[{name:"commonToken",value:dojo.byId("_token").value}]});}},_98e.id);misys.dialog.connect(_98e,"onHide",function(){misys.dialog.disconnect(_98e);});_98e.show();};function _997(){var _998=dijit.byId("durationSessionDialog");var _999=dojo.byId("durationSessionDialogButtons"),_99a=dijit.byId("OkSessionButton").domNode;var _99b=dojo.byId("durationSessionDialogContent");dojo.style(_999,"display","block");dojo.style(_99b,"display","block");dojo.style(_99a,"display","inline-block");dojo.style(_998.closeButtonNode,"display","none");_998.set("title",misys.getLocalization("sessionalertMessage"));misys.dialog.connect(_998,"onKeyPress",function(evt){if(evt.keyCode==dojo.keys.ESCAPE){dojo.stopEvent(evt);}});misys.dialog.connect(dijit.byId("OkSessionButton"),"onClick",function(){var _99c=true;misys.xhrGet({url:misys.getServletURL("/screen/AjaxScreen/action/PingAction"),sync:true,handleAs:"text",load:function(_99d,args){if(_99d.indexOf("SC_UNAUTHORIZED")===-1){_99c=false;}},customError:function(_99e,_99f){_99c=false;}});if(_99c){misys.showSessionOverDialog();misys.dialog.disconnect(_998);_998.hide();}else{misys.dialog.disconnect(_998);_998.hide();}},_998.id);misys.dialog.connect(_998,"onHide",function(){misys.dialog.disconnect(_998);});_998.show();misys.startAutoLogoutCounter(misys._config.sessionMaxDurationTimeAlert);};d.mixin(m,{showSessionOverDialog:function(){var _9a0=dijit.byId("sessionOverDialog");var _9a1=dojo.byId("sessionOverDialogButtons"),_9a2=dijit.byId("sessionOverButton").domNode;var _9a3=dojo.byId("sessionOverDialogContent");dojo.style(_9a1,"display","block");dojo.style(_9a3,"display","block");dojo.style(_9a2,"display","inline-block");dojo.style(_9a0.closeButtonNode,"display","none");_9a0.set("title",misys.getLocalization("sessionalertMessage"));misys.dialog.connect(_9a0,"onKeyPress",function(evt){if(evt.keyCode==dojo.keys.ESCAPE){dojo.stopEvent(evt);}});misys.dialog.connect(dijit.byId("sessionOverButton"),"onClick",function(){misys.dialog.disconnect(_9a0);_9a0.hide();if(dojo.byId("customLoginAction")&&dojo.byId("customLoginAction").value){document.location.href=dojo.byId("customLoginAction").value;}else{document.location.href=dojo.byId("loginAction").value;}},_9a0.id);misys.dialog.connect(_9a0,"onHide",function(){misys.dialog.disconnect(_9a0);});_9a0.show();},startAutoLogoutCounter:function(_9a4){var _9a5=dijit.byId("durationSessionDialog");if(_9a4<=misys._config.sessionMaxDurationTime){_9a4=_9a4+1;setTimeout("misys.startAutoLogoutCounter("+_9a4+")",1000);}else{_9a4=0;var _9a6=false;misys.xhrGet({url:misys.getServletURL("/screen/AjaxScreen/action/PingAction"),sync:true,handleAs:"text",load:function(_9a7,args){if(_9a7.indexOf("SC_UNAUTHORIZED")!==-1){_9a6=true;}},customError:function(_9a8,_9a9){_9a6=true;}});if(_9a6){misys.showSessionOverDialog();misys.dialog.disconnect(_9a5);_9a5.hide();}else{_988();misys.dialog.disconnect(_9a5);_9a5.hide();}}},idleSessionTimer:function(_9aa){if(dojo.byId("idleSessionTimeOutIndicator")){if(_9aa<=(misys._config.idleSessionTimeOutTime)){_9aa=_9aa+1;setTimeout("misys.idleSessionTimer("+_9aa+")",1000);}else{if(!misys._config.stopIdleSessionTimer){_9aa=0;_98d();}}}},durationSessionTimer:function(_9ab){if(dojo.byId("sessionMaxDurationIndicator")){var _9ac=misys._config.presentTime-misys._config.loginTime;_9ac=Math.floor(_9ac/1000);var _9ad=misys._config.sessionMaxDurationTimeAlert;var _9ae=_9ad-_9ac;if(_9ab<=(_9ae)){_9ab=_9ab+1;setTimeout("misys.durationSessionTimer("+_9ab+")",1000);}else{_9ab=0;_997();misys._config.stopIdleSessionTimer=true;var _9af=dijit.byId("idleSessionDialog");if(_9af){_9af.hide();}}}}});})(dojo,misys);}if(!dojo._hasResource["dojox.html.entities"]){dojo._hasResource["dojox.html.entities"]=true;dojo.provide("dojox.html.entities");(function(){var _9b0=function(str,map){var _9b1,_9b2;if(map._encCache&&map._encCache.regexp&&map._encCache.mapper&&map.length==map._encCache.length){_9b1=map._encCache.mapper;_9b2=map._encCache.regexp;}else{_9b1={};_9b2=["["];var i;for(i=0;i<map.length;i++){_9b1[map[i][0]]="&"+map[i][1]+";";_9b2.push(map[i][0]);}_9b2.push("]");_9b2=new RegExp(_9b2.join(""),"g");map._encCache={mapper:_9b1,regexp:_9b2,length:map.length};}str=str.replace(_9b2,function(c){return _9b1[c];});return str;};var _9b3=function(str,map){var _9b4,_9b5;if(map._decCache&&map._decCache.regexp&&map._decCache.mapper&&map.length==map._decCache.length){_9b4=map._decCache.mapper;_9b5=map._decCache.regexp;}else{_9b4={};_9b5=["("];var i;for(i=0;i<map.length;i++){var e="&"+map[i][1]+";";if(i){_9b5.push("|");}_9b4[e]=map[i][0];_9b5.push(e);}_9b5.push(")");_9b5=new RegExp(_9b5.join(""),"g");map._decCache={mapper:_9b4,regexp:_9b5,length:map.length};}str=str.replace(_9b5,function(c){return _9b4[c];});return str;};dojox.html.entities.html=[["&","amp"],["\"","quot"],["<","lt"],[">","gt"],[" ","nbsp"]];dojox.html.entities.map=[[" ","nbsp"]];dojox.html.entities.latin=[["¡","iexcl"],["¢","cent"],["£","pound"],["€","euro"],["¤","curren"],["¥","yen"],["¦","brvbar"],["§","sect"],["¨","uml"],["©","copy"],["ª","ordf"],["«","laquo"],["¬","not"],["­","shy"],["®","reg"],["¯","macr"],["°","deg"],["±","plusmn"],["²","sup2"],["³","sup3"],["´","acute"],["µ","micro"],["¶","para"],["·","middot"],["¸","cedil"],["¹","sup1"],["º","ordm"],["»","raquo"],["¼","frac14"],["½","frac12"],["¾","frac34"],["¿","iquest"],["À","Agrave"],["Á","Aacute"],["Â","Acirc"],["Ã","Atilde"],["Ä","Auml"],["Å","Aring"],["Æ","AElig"],["Ç","Ccedil"],["È","Egrave"],["É","Eacute"],["Ê","Ecirc"],["Ë","Euml"],["Ì","Igrave"],["Í","Iacute"],["Î","Icirc"],["Ï","Iuml"],["Ð","ETH"],["Ñ","Ntilde"],["Ò","Ograve"],["Ó","Oacute"],["Ô","Ocirc"],["Õ","Otilde"],["Ö","Ouml"],["×","times"],["Ø","Oslash"],["Ù","Ugrave"],["Ú","Uacute"],["Û","Ucirc"],["Ü","Uuml"],["Ý","Yacute"],["Þ","THORN"],["ß","szlig"],["à","agrave"],["á","aacute"],["â","acirc"],["ã","atilde"],["ä","auml"],["å","aring"],["æ","aelig"],["ç","ccedil"],["è","egrave"],["é","eacute"],["ê","ecirc"],["ë","euml"],["ì","igrave"],["í","iacute"],["î","icirc"],["ï","iuml"],["ð","eth"],["ñ","ntilde"],["ò","ograve"],["ó","oacute"],["ô","ocirc"],["õ","otilde"],["ö","ouml"],["÷","divide"],["ø","oslash"],["ù","ugrave"],["ú","uacute"],["û","ucirc"],["ü","uuml"],["ý","yacute"],["þ","thorn"],["ÿ","yuml"],["ƒ","fnof"],["Α","Alpha"],["Β","Beta"],["Γ","Gamma"],["Δ","Delta"],["Ε","Epsilon"],["Ζ","Zeta"],["Η","Eta"],["Θ","Theta"],["Ι","Iota"],["Κ","Kappa"],["Λ","Lambda"],["Μ","Mu"],["Ν","Nu"],["Ξ","Xi"],["Ο","Omicron"],["Π","Pi"],["Ρ","Rho"],["Σ","Sigma"],["Τ","Tau"],["Υ","Upsilon"],["Φ","Phi"],["Χ","Chi"],["Ψ","Psi"],["Ω","Omega"],["α","alpha"],["β","beta"],["γ","gamma"],["δ","delta"],["ε","epsilon"],["ζ","zeta"],["η","eta"],["θ","theta"],["ι","iota"],["κ","kappa"],["λ","lambda"],["μ","mu"],["ν","nu"],["ξ","xi"],["ο","omicron"],["π","pi"],["ρ","rho"],["ς","sigmaf"],["σ","sigma"],["τ","tau"],["υ","upsilon"],["φ","phi"],["χ","chi"],["ψ","psi"],["ω","omega"],["ϑ","thetasym"],["ϒ","upsih"],["ϖ","piv"],["•","bull"],["…","hellip"],["′","prime"],["″","Prime"],["‾","oline"],["⁄","frasl"],["℘","weierp"],["ℑ","image"],["ℜ","real"],["™","trade"],["ℵ","alefsym"],["←","larr"],["↑","uarr"],["→","rarr"],["↓","darr"],["↔","harr"],["↵","crarr"],["⇐","lArr"],["⇑","uArr"],["⇒","rArr"],["⇓","dArr"],["⇔","hArr"],["∀","forall"],["∂","part"],["∃","exist"],["∅","empty"],["∇","nabla"],["∈","isin"],["∉","notin"],["∋","ni"],["∏","prod"],["∑","sum"],["−","minus"],["∗","lowast"],["√","radic"],["∝","prop"],["∞","infin"],["∠","ang"],["∧","and"],["∨","or"],["∩","cap"],["∪","cup"],["∫","int"],["∴","there4"],["∼","sim"],["≅","cong"],["≈","asymp"],["≠","ne"],["≡","equiv"],["≤","le"],["≥","ge"],["⊂","sub"],["⊃","sup"],["⊄","nsub"],["⊆","sube"],["⊇","supe"],["⊕","oplus"],["⊗","otimes"],["⊥","perp"],["⋅","sdot"],["⌈","lceil"],["⌉","rceil"],["⌊","lfloor"],["⌋","rfloor"],["〈","lang"],["〉","rang"],["◊","loz"],["♠","spades"],["♣","clubs"],["♥","hearts"],["♦","diams"],["Œ","Elig"],["œ","oelig"],["Š","Scaron"],["š","scaron"],["Ÿ","Yuml"],["ˆ","circ"],["˜","tilde"],[" ","ensp"],[" ","emsp"],[" ","thinsp"],["‌","zwnj"],["‍","zwj"],["‎","lrm"],["‏","rlm"],["–","ndash"],["—","mdash"],["‘","lsquo"],["’","rsquo"],["‚","sbquo"],["“","ldquo"],["”","rdquo"],["„","bdquo"],["†","dagger"],["‡","Dagger"],["‰","permil"],["‹","lsaquo"],["›","rsaquo"]];dojox.html.entities.encode=function(str,m){if(str){if(!m){str=_9b0(str,dojox.html.entities.html);str=_9b0(str,dojox.html.entities.latin);}else{str=_9b0(str,m);}}return str;};dojox.html.entities.decode=function(str,m){if(str){if(!m){str=_9b3(str,dojox.html.entities.html);str=_9b3(str,dojox.html.entities.latin);}else{str=_9b3(str,m);}}return str;};})();}if(!dojo._hasResource["dojox.fx._core"]){dojo._hasResource["dojox.fx._core"]=true;dojo.provide("dojox.fx._core");dojox.fx._Line=function(_9b6,end){this.start=_9b6;this.end=end;var _9b7=dojo.isArray(_9b6),d=(_9b7?[]:end-_9b6);if(_9b7){dojo.forEach(this.start,function(s,i){d[i]=this.end[i]-s;},this);this.getValue=function(n){var res=[];dojo.forEach(this.start,function(s,i){res[i]=(d[i]*n)+s;},this);return res;};}else{this.getValue=function(n){return (d*n)+this.start;};}};}if(!dojo._hasResource["dojox.fx.scroll"]){dojo._hasResource["dojox.fx.scroll"]=true;dojo.provide("dojox.fx.scroll");dojo.experimental("dojox.fx.scroll");dojox.fx.smoothScroll=function(args){if(!args.target){args.target=dojo.position(args.node);}var _9b8=dojo[(dojo.isIE?"isObject":"isFunction")](args["win"].scrollTo),_9b9={x:args.target.x,y:args.target.y};if(!_9b8){var _9ba=dojo.position(args.win);_9b9.x-=_9ba.x;_9b9.y-=_9ba.y;}var _9bb=(_9b8)?(function(val){args.win.scrollTo(val[0],val[1]);}):(function(val){args.win.scrollLeft=val[0];args.win.scrollTop=val[1];});var anim=new dojo.Animation(dojo.mixin({beforeBegin:function(){if(this.curve){delete this.curve;}var _9bc=_9b8?dojo._docScroll():{x:args.win.scrollLeft,y:args.win.scrollTop};anim.curve=new dojox.fx._Line([_9bc.x,_9bc.y],[_9bc.x+_9b9.x,_9bc.y+_9b9.y]);},onAnimate:_9bb},args));return anim;};}if(!dojo._hasResource["dojo.cookie"]){dojo._hasResource["dojo.cookie"]=true;dojo.provide("dojo.cookie");dojo.cookie=function(name,_9bd,_9be){var c=document.cookie;if(arguments.length==1){var _9bf=c.match(new RegExp("(?:^|; )"+dojo.regexp.escapeString(name)+"=([^;]*)"));return _9bf?decodeURIComponent(_9bf[1]):undefined;}else{_9be=_9be||{};var exp=_9be.expires;if(typeof exp=="number"){var d=new Date();d.setTime(d.getTime()+exp*24*60*60*1000);exp=_9be.expires=d;}if(exp&&exp.toUTCString){_9be.expires=exp.toUTCString();}_9bd=encodeURIComponent(_9bd);var _9c0=name+"="+_9bd,_9c1;for(_9c1 in _9be){_9c0+="; "+_9c1;var _9c2=_9be[_9c1];if(_9c2!==true){_9c0+="="+_9c2;}}document.cookie=_9c0;}};dojo.cookie.isSupported=function(){if(!("cookieEnabled" in navigator)){this("__djCookieTest__","CookiesAllowed");navigator.cookieEnabled=this("__djCookieTest__")=="CookiesAllowed";if(navigator.cookieEnabled){this("__djCookieTest__","",{expires:-1});}}return navigator.cookieEnabled;};}if(!dojo._hasResource["dijit.layout.StackController"]){dojo._hasResource["dijit.layout.StackController"]=true;dojo.provide("dijit.layout.StackController");dojo.declare("dijit.layout.StackController",[dijit._Widget,dijit._Templated,dijit._Container],{templateString:"<span role='tablist' dojoAttachEvent='onkeypress' class='dijitStackController'></span>",containerId:"",buttonWidget:"dijit.layout._StackButton",constructor:function(){this.pane2button={};this.pane2connects={};this.pane2watches={};},buildRendering:function(){this.inherited(arguments);dijit.setWaiRole(this.domNode,"tablist");},postCreate:function(){this.inherited(arguments);this.subscribe(this.containerId+"-startup","onStartup");this.subscribe(this.containerId+"-addChild","onAddChild");this.subscribe(this.containerId+"-removeChild","onRemoveChild");this.subscribe(this.containerId+"-selectChild","onSelectChild");this.subscribe(this.containerId+"-containerKeyPress","onContainerKeyPress");},onStartup:function(info){dojo.forEach(info.children,this.onAddChild,this);if(info.selected){this.onSelectChild(info.selected);}},destroy:function(){for(var pane in this.pane2button){this.onRemoveChild(dijit.byId(pane));}this.inherited(arguments);},onAddChild:function(page,_9c3){var cls=dojo.getObject(this.buttonWidget);var _9c4=new cls({id:this.id+"_"+page.id,label:page.title,dir:page.dir,lang:page.lang,showLabel:page.showTitle,iconClass:page.iconClass,closeButton:page.closable,title:page.tooltip});dijit.setWaiState(_9c4.focusNode,"selected","false");var _9c5=["title","showTitle","iconClass","closable","tooltip"],_9c6=["label","showLabel","iconClass","closeButton","title"];this.pane2watches[page.id]=dojo.map(_9c5,function(_9c7,idx){return page.watch(_9c7,function(name,_9c8,_9c9){_9c4.set(_9c6[idx],_9c9);});});this.pane2connects[page.id]=[this.connect(_9c4,"onClick",dojo.hitch(this,"onButtonClick",page)),this.connect(_9c4,"onClickCloseButton",dojo.hitch(this,"onCloseButtonClick",page))];this.addChild(_9c4,_9c3);this.pane2button[page.id]=_9c4;page.controlButton=_9c4;if(!this._currentChild){_9c4.focusNode.setAttribute("tabIndex","0");dijit.setWaiState(_9c4.focusNode,"selected","true");this._currentChild=page;}if(!this.isLeftToRight()&&dojo.isIE&&this._rectifyRtlTabList){this._rectifyRtlTabList();}},onRemoveChild:function(page){if(this._currentChild===page){this._currentChild=null;}dojo.forEach(this.pane2connects[page.id],dojo.hitch(this,"disconnect"));delete this.pane2connects[page.id];dojo.forEach(this.pane2watches[page.id],function(w){w.unwatch();});delete this.pane2watches[page.id];var _9ca=this.pane2button[page.id];if(_9ca){this.removeChild(_9ca);delete this.pane2button[page.id];_9ca.destroy();}delete page.controlButton;},onSelectChild:function(page){if(!page){return;}if(this._currentChild){var _9cb=this.pane2button[this._currentChild.id];_9cb.set("checked",false);dijit.setWaiState(_9cb.focusNode,"selected","false");_9cb.focusNode.setAttribute("tabIndex","-1");}var _9cc=this.pane2button[page.id];_9cc.set("checked",true);dijit.setWaiState(_9cc.focusNode,"selected","true");this._currentChild=page;_9cc.focusNode.setAttribute("tabIndex","0");var _9cd=dijit.byId(this.containerId);dijit.setWaiState(_9cd.containerNode,"labelledby",_9cc.id);},onButtonClick:function(page){var _9ce=dijit.byId(this.containerId);_9ce.selectChild(page);},onCloseButtonClick:function(page){var _9cf=dijit.byId(this.containerId);_9cf.closeChild(page);if(this._currentChild){var b=this.pane2button[this._currentChild.id];if(b){dijit.focus(b.focusNode||b.domNode);}}},adjacent:function(_9d0){if(!this.isLeftToRight()&&(!this.tabPosition||/top|bottom/.test(this.tabPosition))){_9d0=!_9d0;}var _9d1=this.getChildren();var _9d2=dojo.indexOf(_9d1,this.pane2button[this._currentChild.id]);var _9d3=_9d0?1:_9d1.length-1;return _9d1[(_9d2+_9d3)%_9d1.length];},onkeypress:function(e){if(this.disabled||e.altKey){return;}var _9d4=null;if(e.ctrlKey||!e._djpage){var k=dojo.keys;switch(e.charOrCode){case k.LEFT_ARROW:case k.UP_ARROW:if(!e._djpage){_9d4=false;}break;case k.PAGE_UP:if(e.ctrlKey){_9d4=false;}break;case k.RIGHT_ARROW:case k.DOWN_ARROW:if(!e._djpage){_9d4=true;}break;case k.PAGE_DOWN:if(e.ctrlKey){_9d4=true;}break;case k.HOME:case k.END:var _9d5=this.getChildren();if(_9d5&&_9d5.length){_9d5[e.charOrCode==k.HOME?0:_9d5.length-1].onClick();}dojo.stopEvent(e);break;case k.DELETE:if(this._currentChild.closable){this.onCloseButtonClick(this._currentChild);}dojo.stopEvent(e);break;default:if(e.ctrlKey){if(e.charOrCode===k.TAB){this.adjacent(!e.shiftKey).onClick();dojo.stopEvent(e);}else{if(e.charOrCode=="w"){if(this._currentChild.closable){this.onCloseButtonClick(this._currentChild);}dojo.stopEvent(e);}}}}if(_9d4!==null){this.adjacent(_9d4).onClick();dojo.stopEvent(e);}}},onContainerKeyPress:function(info){info.e._djpage=info.page;this.onkeypress(info.e);}});dojo.declare("dijit.layout._StackButton",dijit.form.ToggleButton,{tabIndex:"-1",buildRendering:function(evt){this.inherited(arguments);dijit.setWaiRole((this.focusNode||this.domNode),"tab");},onClick:function(evt){dijit.focus(this.focusNode);},onClickCloseButton:function(evt){evt.stopPropagation();}});}if(!dojo._hasResource["dijit.layout.StackContainer"]){dojo._hasResource["dijit.layout.StackContainer"]=true;dojo.provide("dijit.layout.StackContainer");dojo.declare("dijit.layout.StackContainer",dijit.layout._LayoutWidget,{doLayout:true,persist:false,baseClass:"dijitStackContainer",buildRendering:function(){this.inherited(arguments);dojo.addClass(this.domNode,"dijitLayoutContainer");dijit.setWaiRole(this.containerNode,"tabpanel");},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onkeypress",this._onKeyPress);},startup:function(){if(this._started){return;}var _9d6=this.getChildren();dojo.forEach(_9d6,this._setupChild,this);if(this.persist){this.selectedChildWidget=dijit.byId(dojo.cookie(this.id+"_selectedChild"));}else{dojo.some(_9d6,function(_9d7){if(_9d7.selected){this.selectedChildWidget=_9d7;}return _9d7.selected;},this);}var _9d8=this.selectedChildWidget;if(!_9d8&&_9d6[0]){_9d8=this.selectedChildWidget=_9d6[0];_9d8.selected=true;}dojo.publish(this.id+"-startup",[{children:_9d6,selected:_9d8}]);this.inherited(arguments);},resize:function(){var _9d9=this.selectedChildWidget;if(_9d9&&!this._hasBeenShown){this._hasBeenShown=true;this._showChild(_9d9);}this.inherited(arguments);},_setupChild:function(_9da){this.inherited(arguments);dojo.replaceClass(_9da.domNode,"dijitHidden","dijitVisible");_9da.domNode.title="";},addChild:function(_9db,_9dc){this.inherited(arguments);if(this._started){dojo.publish(this.id+"-addChild",[_9db,_9dc]);this.layout();if(!this.selectedChildWidget){this.selectChild(_9db);}}},removeChild:function(page){this.inherited(arguments);if(this._started){dojo.publish(this.id+"-removeChild",[page]);}if(this._beingDestroyed){return;}if(this.selectedChildWidget===page){this.selectedChildWidget=undefined;if(this._started){var _9dd=this.getChildren();if(_9dd.length){this.selectChild(_9dd[0]);}}}if(this._started){this.layout();}},selectChild:function(page,_9de){page=dijit.byId(page);if(this.selectedChildWidget!=page){var d=this._transition(page,this.selectedChildWidget,_9de);this._set("selectedChildWidget",page);dojo.publish(this.id+"-selectChild",[page]);if(this.persist){dojo.cookie(this.id+"_selectedChild",this.selectedChildWidget.id);}}return d;},_transition:function(_9df,_9e0,_9e1){if(_9e0){this._hideChild(_9e0);}var d=this._showChild(_9df);if(_9df.resize){if(this.doLayout){_9df.resize(this._containerContentBox||this._contentBox);}else{_9df.resize();}}return d;},_adjacent:function(_9e2){var _9e3=this.getChildren();var _9e4=dojo.indexOf(_9e3,this.selectedChildWidget);_9e4+=_9e2?1:_9e3.length-1;return _9e3[_9e4%_9e3.length];},forward:function(){return this.selectChild(this._adjacent(true),true);},back:function(){return this.selectChild(this._adjacent(false),true);},_onKeyPress:function(e){dojo.publish(this.id+"-containerKeyPress",[{e:e,page:this}]);},layout:function(){if(this.doLayout&&this.selectedChildWidget&&this.selectedChildWidget.resize){this.selectedChildWidget.resize(this._containerContentBox||this._contentBox);}},_showChild:function(page){var _9e5=this.getChildren();page.isFirstChild=(page==_9e5[0]);page.isLastChild=(page==_9e5[_9e5.length-1]);page._set("selected",true);dojo.replaceClass(page.domNode,"dijitVisible","dijitHidden");return page._onShow()||true;},_hideChild:function(page){page._set("selected",false);dojo.replaceClass(page.domNode,"dijitHidden","dijitVisible");page.onHide();},closeChild:function(page){var _9e6=page.onClose(this,page);if(_9e6){this.removeChild(page);page.destroyRecursive();}},destroyDescendants:function(_9e7){dojo.forEach(this.getChildren(),function(_9e8){this.removeChild(_9e8);_9e8.destroyRecursive(_9e7);},this);}});dojo.extend(dijit._Widget,{selected:false,closable:false,iconClass:"",showTitle:true});}if(!dojo._hasResource["dijit.layout._TabContainerBase"]){dojo._hasResource["dijit.layout._TabContainerBase"]=true;dojo.provide("dijit.layout._TabContainerBase");dojo.declare("dijit.layout._TabContainerBase",[dijit.layout.StackContainer,dijit._Templated],{tabPosition:"top",baseClass:"dijitTabContainer",tabStrip:false,nested:false,templateString:dojo.cache("dijit.layout","templates/TabContainer.html","<div class=\"dijitTabContainer\">\n\t<div class=\"dijitTabListWrapper\" dojoAttachPoint=\"tablistNode\"></div>\n\t<div dojoAttachPoint=\"tablistSpacer\" class=\"dijitTabSpacer ${baseClass}-spacer\"></div>\n\t<div class=\"dijitTabPaneWrapper ${baseClass}-container\" dojoAttachPoint=\"containerNode\"></div>\n</div>\n"),postMixInProperties:function(){this.baseClass+=this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,"");this.srcNodeRef&&dojo.style(this.srcNodeRef,"visibility","hidden");this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);this.tablist=this._makeController(this.tablistNode);if(!this.doLayout){dojo.addClass(this.domNode,"dijitTabContainerNoLayout");}if(this.nested){dojo.addClass(this.domNode,"dijitTabContainerNested");dojo.addClass(this.tablist.containerNode,"dijitTabContainerTabListNested");dojo.addClass(this.tablistSpacer,"dijitTabContainerSpacerNested");dojo.addClass(this.containerNode,"dijitTabPaneWrapperNested");}else{dojo.addClass(this.domNode,"tabStrip-"+(this.tabStrip?"enabled":"disabled"));}},_setupChild:function(tab){dojo.addClass(tab.domNode,"dijitTabPane");this.inherited(arguments);},startup:function(){if(this._started){return;}this.tablist.startup();this.inherited(arguments);},layout:function(){if(!this._contentBox||typeof (this._contentBox.l)=="undefined"){return;}var sc=this.selectedChildWidget;if(this.doLayout){var _9e9=this.tabPosition.replace(/-h/,"");this.tablist.layoutAlign=_9e9;var _9ea=[this.tablist,{domNode:this.tablistSpacer,layoutAlign:_9e9},{domNode:this.containerNode,layoutAlign:"client"}];dijit.layout.layoutChildren(this.domNode,this._contentBox,_9ea);this._containerContentBox=dijit.layout.marginBox2contentBox(this.containerNode,_9ea[2]);if(sc&&sc.resize){sc.resize(this._containerContentBox);}}else{if(this.tablist.resize){var s=this.tablist.domNode.style;s.width="0";var _9eb=dojo.contentBox(this.domNode).w;s.width="";this.tablist.resize({w:_9eb});}if(sc&&sc.resize){sc.resize();}}},destroy:function(){if(this.tablist){this.tablist.destroy();}this.inherited(arguments);}});}if(!dojo._hasResource["dijit.layout.TabController"]){dojo._hasResource["dijit.layout.TabController"]=true;dojo.provide("dijit.layout.TabController");dojo.declare("dijit.layout.TabController",dijit.layout.StackController,{templateString:"<div role='tablist' dojoAttachEvent='onkeypress:onkeypress'></div>",tabPosition:"top",buttonWidget:"dijit.layout._TabButton",_rectifyRtlTabList:function(){if(0>=this.tabPosition.indexOf("-h")){return;}if(!this.pane2button){return;}var _9ec=0;for(var pane in this.pane2button){var ow=this.pane2button[pane].innerDiv.scrollWidth;_9ec=Math.max(_9ec,ow);}for(pane in this.pane2button){this.pane2button[pane].innerDiv.style.width=_9ec+"px";}}});dojo.declare("dijit.layout._TabButton",dijit.layout._StackButton,{baseClass:"dijitTab",cssStateNodes:{closeNode:"dijitTabCloseButton"},templateString:dojo.cache("dijit.layout","templates/_TabButton.html","<div role=\"presentation\" dojoAttachPoint=\"titleNode\" dojoAttachEvent='onclick:onClick'>\n    <div role=\"presentation\" class='dijitTabInnerDiv' dojoAttachPoint='innerDiv'>\n        <div role=\"presentation\" class='dijitTabContent' dojoAttachPoint='tabContent'>\n        \t<div role=\"presentation\" dojoAttachPoint='focusNode'>\n\t\t        <img src=\"${_blankGif}\" alt=\"\" class=\"dijitIcon dijitTabButtonIcon\" dojoAttachPoint='iconNode' />\n\t\t        <span dojoAttachPoint='containerNode' class='tabLabel'></span>\n\t\t        <span class=\"dijitInline dijitTabCloseButton dijitTabCloseIcon\" dojoAttachPoint='closeNode'\n\t\t        \t\tdojoAttachEvent='onclick: onClickCloseButton' role=\"presentation\">\n\t\t            <span dojoAttachPoint='closeText' class='dijitTabCloseText'>[x]</span\n\t\t        ></span>\n\t\t\t</div>\n        </div>\n    </div>\n</div>\n"),scrollOnFocus:false,buildRendering:function(){this.inherited(arguments);dojo.setSelectable(this.containerNode,false);},startup:function(){this.inherited(arguments);var n=this.domNode;setTimeout(function(){n.className=n.className;},1);},_setCloseButtonAttr:function(disp){this._set("closeButton",disp);dojo.toggleClass(this.innerDiv,"dijitClosable",disp);this.closeNode.style.display=disp?"":"none";if(disp){var _9ed=dojo.i18n.getLocalization("dijit","common");if(this.closeNode){dojo.attr(this.closeNode,"title",_9ed.itemClose);}var _9ed=dojo.i18n.getLocalization("dijit","common");this._closeMenu=new dijit.Menu({id:this.id+"_Menu",dir:this.dir,lang:this.lang,targetNodeIds:[this.domNode]});this._closeMenu.addChild(new dijit.MenuItem({label:_9ed.itemClose,dir:this.dir,lang:this.lang,onClick:dojo.hitch(this,"onClickCloseButton")}));}else{if(this._closeMenu){this._closeMenu.destroyRecursive();delete this._closeMenu;}}},_setLabelAttr:function(_9ee){this.inherited(arguments);if(this.showLabel==false&&!this.params.title){this.iconNode.alt=dojo.trim(this.containerNode.innerText||this.containerNode.textContent||"");}},destroy:function(){if(this._closeMenu){this._closeMenu.destroyRecursive();delete this._closeMenu;}this.inherited(arguments);}});}if(!dojo._hasResource["dijit.layout.ScrollingTabController"]){dojo._hasResource["dijit.layout.ScrollingTabController"]=true;dojo.provide("dijit.layout.ScrollingTabController");dojo.declare("dijit.layout.ScrollingTabController",dijit.layout.TabController,{templateString:dojo.cache("dijit.layout","templates/ScrollingTabController.html","<div class=\"dijitTabListContainer-${tabPosition}\" style=\"visibility:hidden\">\n\t<div dojoType=\"dijit.layout._ScrollingTabControllerMenuButton\"\n\t\t\tclass=\"tabStripButton-${tabPosition}\"\n\t\t\tid=\"${id}_menuBtn\" containerId=\"${containerId}\" iconClass=\"dijitTabStripMenuIcon\"\n\t\t\tdropDownPosition=\"below-alt, above-alt\"\n\t\t\tdojoAttachPoint=\"_menuBtn\" showLabel=\"false\">&#9660;</div>\n\t<div dojoType=\"dijit.layout._ScrollingTabControllerButton\"\n\t\t\tclass=\"tabStripButton-${tabPosition}\"\n\t\t\tid=\"${id}_leftBtn\" iconClass=\"dijitTabStripSlideLeftIcon\"\n\t\t\tdojoAttachPoint=\"_leftBtn\" dojoAttachEvent=\"onClick: doSlideLeft\" showLabel=\"false\">&#9664;</div>\n\t<div dojoType=\"dijit.layout._ScrollingTabControllerButton\"\n\t\t\tclass=\"tabStripButton-${tabPosition}\"\n\t\t\tid=\"${id}_rightBtn\" iconClass=\"dijitTabStripSlideRightIcon\"\n\t\t\tdojoAttachPoint=\"_rightBtn\" dojoAttachEvent=\"onClick: doSlideRight\" showLabel=\"false\">&#9654;</div>\n\t<div class='dijitTabListWrapper' dojoAttachPoint='tablistWrapper'>\n\t\t<div role='tablist' dojoAttachEvent='onkeypress:onkeypress'\n\t\t\t\tdojoAttachPoint='containerNode' class='nowrapTabStrip'></div>\n\t</div>\n</div>\n"),useMenu:true,useSlider:true,tabStripClass:"",widgetsInTemplate:true,_minScroll:5,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{"class":"containerNode"}),buildRendering:function(){this.inherited(arguments);var n=this.domNode;this.scrollNode=this.tablistWrapper;this._initButtons();if(!this.tabStripClass){this.tabStripClass="dijitTabContainer"+this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,"")+"None";dojo.addClass(n,"tabStrip-disabled");}dojo.addClass(this.tablistWrapper,this.tabStripClass);},onStartup:function(){this.inherited(arguments);dojo.style(this.domNode,"visibility","visible");this._postStartup=true;},onAddChild:function(page,_9ef){this.inherited(arguments);dojo.forEach(["label","iconClass"],function(attr){this.pane2watches[page.id].push(this.pane2button[page.id].watch(attr,dojo.hitch(this,function(name,_9f0,_9f1){if(this._postStartup&&this._dim){this.resize(this._dim);}})));},this);dojo.style(this.containerNode,"width",(dojo.style(this.containerNode,"width")+200)+"px");},onRemoveChild:function(page,_9f2){var _9f3=this.pane2button[page.id];if(this._selectedTab===_9f3.domNode){this._selectedTab=null;}this.inherited(arguments);},_initButtons:function(){this._btnWidth=0;this._buttons=dojo.query("> .tabStripButton",this.domNode).filter(function(btn){if((this.useMenu&&btn==this._menuBtn.domNode)||(this.useSlider&&(btn==this._rightBtn.domNode||btn==this._leftBtn.domNode))){this._btnWidth+=dojo._getMarginSize(btn).w;return true;}else{dojo.style(btn,"display","none");return false;}},this);},_getTabsWidth:function(){var _9f4=this.getChildren();if(_9f4.length){var _9f5=_9f4[this.isLeftToRight()?0:_9f4.length-1].domNode,_9f6=_9f4[this.isLeftToRight()?_9f4.length-1:0].domNode;return _9f6.offsetLeft+dojo.style(_9f6,"width")-_9f5.offsetLeft;}else{return 0;}},_enableBtn:function(_9f7){var _9f8=this._getTabsWidth();_9f7=_9f7||dojo.style(this.scrollNode,"width");return _9f8>0&&_9f7<_9f8;},resize:function(dim){if(this.domNode.offsetWidth==0){return;}this._dim=dim;this.scrollNode.style.height="auto";this._contentBox=dijit.layout.marginBox2contentBox(this.domNode,{h:0,w:dim.w});this._contentBox.h=this.scrollNode.offsetHeight;dojo.contentBox(this.domNode,this._contentBox);var _9f9=this._enableBtn(this._contentBox.w);this._buttons.style("display",_9f9?"":"none");this._leftBtn.layoutAlign="left";this._rightBtn.layoutAlign="right";this._menuBtn.layoutAlign=this.isLeftToRight()?"right":"left";dijit.layout.layoutChildren(this.domNode,this._contentBox,[this._menuBtn,this._leftBtn,this._rightBtn,{domNode:this.scrollNode,layoutAlign:"client"}]);if(this._selectedTab){if(this._anim&&this._anim.status()=="playing"){this._anim.stop();}var w=this.scrollNode,sl=this._convertToScrollLeft(this._getScrollForSelectedTab());w.scrollLeft=sl;}this._setButtonClass(this._getScroll());this._postResize=true;return {h:this._contentBox.h,w:dim.w};},_getScroll:function(){var sl=(this.isLeftToRight()||dojo.isIE<8||(dojo.isIE&&dojo.isQuirks)||dojo.isWebKit)?this.scrollNode.scrollLeft:dojo.style(this.containerNode,"width")-dojo.style(this.scrollNode,"width")+(dojo.isIE==8?-1:1)*this.scrollNode.scrollLeft;return sl;},_convertToScrollLeft:function(val){if(this.isLeftToRight()||dojo.isIE<8||(dojo.isIE&&dojo.isQuirks)||dojo.isWebKit){return val;}else{var _9fa=dojo.style(this.containerNode,"width")-dojo.style(this.scrollNode,"width");return (dojo.isIE==8?-1:1)*(val-_9fa);}},onSelectChild:function(page){var tab=this.pane2button[page.id];if(!tab||!page){return;}var node=tab.domNode;if(this._postResize&&node!=this._selectedTab){this._selectedTab=node;var sl=this._getScroll();if(sl>node.offsetLeft||sl+dojo.style(this.scrollNode,"width")<node.offsetLeft+dojo.style(node,"width")){this.createSmoothScroll().play();}}this.inherited(arguments);},_getScrollBounds:function(){var _9fb=this.getChildren(),_9fc=dojo.style(this.scrollNode,"width"),_9fd=dojo.style(this.containerNode,"width"),_9fe=_9fd-_9fc,_9ff=this._getTabsWidth();if(_9fb.length&&_9ff>_9fc){return {min:this.isLeftToRight()?0:_9fb[_9fb.length-1].domNode.offsetLeft,max:this.isLeftToRight()?(_9fb[_9fb.length-1].domNode.offsetLeft+dojo.style(_9fb[_9fb.length-1].domNode,"width"))-_9fc:_9fe};}else{var _a00=this.isLeftToRight()?0:_9fe;return {min:_a00,max:_a00};}},_getScrollForSelectedTab:function(){var w=this.scrollNode,n=this._selectedTab,_a01=dojo.style(this.scrollNode,"width"),_a02=this._getScrollBounds();var pos=(n.offsetLeft+dojo.style(n,"width")/2)-_a01/2;pos=Math.min(Math.max(pos,_a02.min),_a02.max);return pos;},createSmoothScroll:function(x){if(arguments.length>0){var _a03=this._getScrollBounds();x=Math.min(Math.max(x,_a03.min),_a03.max);}else{x=this._getScrollForSelectedTab();}if(this._anim&&this._anim.status()=="playing"){this._anim.stop();}var self=this,w=this.scrollNode,anim=new dojo._Animation({beforeBegin:function(){if(this.curve){delete this.curve;}var oldS=w.scrollLeft,newS=self._convertToScrollLeft(x);anim.curve=new dojo._Line(oldS,newS);},onAnimate:function(val){w.scrollLeft=val;}});this._anim=anim;this._setButtonClass(x);return anim;},_getBtnNode:function(e){var n=e.target;while(n&&!dojo.hasClass(n,"tabStripButton")){n=n.parentNode;}return n;},doSlideRight:function(e){this.doSlide(1,this._getBtnNode(e));},doSlideLeft:function(e){this.doSlide(-1,this._getBtnNode(e));},doSlide:function(_a04,node){if(node&&dojo.hasClass(node,"dijitTabDisabled")){return;}var _a05=dojo.style(this.scrollNode,"width");var d=(_a05*0.75)*_a04;var to=this._getScroll()+d;this._setButtonClass(to);this.createSmoothScroll(to).play();},_setButtonClass:function(_a06){var _a07=this._getScrollBounds();this._leftBtn.set("disabled",_a06<=_a07.min);this._rightBtn.set("disabled",_a06>=_a07.max);}});dojo.declare("dijit.layout._ScrollingTabControllerButtonMixin",null,{baseClass:"dijitTab tabStripButton",templateString:dojo.cache("dijit.layout","templates/_ScrollingTabControllerButton.html","<div dojoAttachEvent=\"onclick:_onButtonClick\">\n\t<div role=\"presentation\" class=\"dijitTabInnerDiv\" dojoattachpoint=\"innerDiv,focusNode\">\n\t\t<div role=\"presentation\" class=\"dijitTabContent dijitButtonContents\" dojoattachpoint=\"tabContent\">\n\t\t\t<img role=\"presentation\" alt=\"\" src=\"${_blankGif}\" class=\"dijitTabStripIcon\" dojoAttachPoint=\"iconNode\"/>\n\t\t\t<span dojoAttachPoint=\"containerNode,titleNode\" class=\"dijitButtonText\"></span>\n\t\t</div>\n\t</div>\n</div>\n"),tabIndex:"",isFocusable:function(){return false;}});dojo.declare("dijit.layout._ScrollingTabControllerButton",[dijit.form.Button,dijit.layout._ScrollingTabControllerButtonMixin]);dojo.declare("dijit.layout._ScrollingTabControllerMenuButton",[dijit.form.Button,dijit._HasDropDown,dijit.layout._ScrollingTabControllerButtonMixin],{containerId:"",tabIndex:"-1",isLoaded:function(){return false;},loadDropDown:function(_a08){this.dropDown=new dijit.Menu({id:this.containerId+"_menu",dir:this.dir,lang:this.lang});var _a09=dijit.byId(this.containerId);dojo.forEach(_a09.getChildren(),function(page){var _a0a=new dijit.MenuItem({id:page.id+"_stcMi",label:page.title,iconClass:page.iconClass,dir:page.dir,lang:page.lang,onClick:function(){_a09.selectChild(page);}});this.dropDown.addChild(_a0a);},this);_a08();},closeDropDown:function(_a0b){this.inherited(arguments);if(this.dropDown){this.dropDown.destroyRecursive();delete this.dropDown;}}});}if(!dojo._hasResource["dijit.layout.TabContainer"]){dojo._hasResource["dijit.layout.TabContainer"]=true;dojo.provide("dijit.layout.TabContainer");dojo.declare("dijit.layout.TabContainer",dijit.layout._TabContainerBase,{useMenu:true,useSlider:true,controllerWidget:"",_makeController:function(_a0c){var cls=this.baseClass+"-tabs"+(this.doLayout?"":" dijitTabNoLayout"),_a0d=dojo.getObject(this.controllerWidget);return new _a0d({id:this.id+"_tablist",dir:this.dir,lang:this.lang,tabPosition:this.tabPosition,doLayout:this.doLayout,containerId:this.id,"class":cls,nested:this.nested,useMenu:this.useMenu,useSlider:this.useSlider,tabStripClass:this.tabStrip?this.baseClass+(this.tabStrip?"":"No")+"Strip":null},_a0c);},postMixInProperties:function(){this.inherited(arguments);if(!this.controllerWidget){this.controllerWidget=(this.tabPosition=="top"||this.tabPosition=="bottom")&&!this.nested?"dijit.layout.ScrollingTabController":"dijit.layout.TabController";}}});}if(!dojo._hasResource["dijit.form.SimpleTextarea"]){dojo._hasResource["dijit.form.SimpleTextarea"]=true;dojo.provide("dijit.form.SimpleTextarea");dojo.declare("dijit.form.SimpleTextarea",dijit.form.TextBox,{baseClass:"dijitTextBox dijitTextArea",attributeMap:dojo.delegate(dijit.form._FormValueWidget.prototype.attributeMap,{rows:"textbox",cols:"textbox"}),rows:"3",cols:"20",templateString:"<textarea ${!nameAttrSetting} dojoAttachPoint='focusNode,containerNode,textbox' autocomplete='off'></textarea>",postMixInProperties:function(){if(!this.value&&this.srcNodeRef){this.value=this.srcNodeRef.value;}this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);if(dojo.isIE&&this.cols){dojo.addClass(this.textbox,"dijitTextAreaCols");}},filter:function(_a0e){if(_a0e){_a0e=_a0e.replace(/\r/g,"");}return this.inherited(arguments);},_previousValue:"",_onInput:function(e){if(this.maxLength){var _a0f=parseInt(this.maxLength);var _a10=this.textbox.value.replace(/\r/g,"");var _a11=_a10.length-_a0f;if(_a11>0){if(e){dojo.stopEvent(e);}var _a12=this.textbox;if(_a12.selectionStart){var pos=_a12.selectionStart;var cr=0;if(dojo.isOpera){cr=(this.textbox.value.substring(0,pos).match(/\r/g)||[]).length;}this.textbox.value=_a10.substring(0,pos-_a11-cr)+_a10.substring(pos-cr);_a12.setSelectionRange(pos-_a11,pos-_a11);}else{if(dojo.doc.selection){_a12.focus();var _a13=dojo.doc.selection.createRange();_a13.moveStart("character",-_a11);_a13.text="";_a13.select();}}}this._previousValue=this.textbox.value;}this.inherited(arguments);}});}if(!dojo._hasResource["misys.form.SimpleTextarea"]){dojo._hasResource["misys.form.SimpleTextarea"]=true;dojo.provide("misys.form.SimpleTextarea");dojo.experimental("misys.form.SimpleTextarea");dojo.declare("misys.form.SimpleTextarea",[dijit.form.ValidationTextBox,dijit.form.SimpleTextarea],{maxSize:this.maxSize,blnNewRow:false,rowCount:0,postCreate:function(){this.inherited(arguments);},regExp:"(.|\\s)*",validate:function(){if(arguments.length===0){return this.validate(false);}return this.inherited(arguments);},isValid:function(_a14){this.invalidMessage=this.messages.invalidMessage;if(!this.validator(this.textbox.value,this.constraints)){return false;}var _a15=(this.state==="Error")?false:true;if(false===_a14||(true===_a14&&!_a15)){_a15=true;if(this.blnNewRow){if(this.rowCount>=this.maxSize){this.invalidMessage=misys.getLocalization("textareaLinesError",[this.maxSize,this.rowCount+1]);_a15=false;}}var _a16=(this.maxSize*this.cols)+this.maxSize;if(this.value.length>_a16){this.invalidMessage=misys.getLocalization("invalidFieldSizeError",[_a16-1,this.value.length]);_a15=false;}}return _a15;},onBlur:function(_a17){var el=(_a17==undefined)?this:_a17;if(el.value!==""){var _a18="";var _a19=0;var _a1a=-1;var _a1b=el.get("value");var _a1c=0;var _a1d=0;var _a1e=false;var cols=el.cols;var _a1f=el.maxSize;var _a20=false;var _a21=misys.getLocalization("g_delExtraLinesTextarea");_a1b=_a1b.replace(/(\r\n)+$/,"");_a1b=_a1b.replace(/(\n)+$/,"");for(k=0;k<_a1b.length;k++){strCurrentChar=_a1b.charAt(k);if((strCurrentChar=="\r")||(strCurrentChar=="\n")){_a18+="\n";_a19=0;_a1c++;_a1e=true;_a1a=-1;if(strCurrentChar=="\r"){k++;}}else{if(_a19==cols){if(_a1a==-1){_a18+="\n";_a19=1;}else{_a18=_a18.slice(0,_a18.length-(k-_a1a)+1)+"\n"+_a18.slice(_a18.length-(k-_a1a)+1);_a19=k-_a1a;}_a18+=strCurrentChar;_a1c++;_a1e=true;_a1a=-1;}else{_a18+=strCurrentChar;_a19++;_a1e=false;}}if(strCurrentChar==" "){_a1a=k;}if(_a1e){if(_a1c>=_a1f){_a20=true;el.set("blnNewRow",_a20);el.set("rowCount",_a1c);if(_a21==="true"){el.set("value",_a18);}el.validate(false);}}}if(el.maxLength!=""&&el.maxLength>0){if(_a18.length>el.maxLength){_a18=_a18.substring(0,el.maxLength);}}el.set("blnNewRow",_a20);el.set("rowCount",_a1c);el.set("value",_a18);}else{var _a22=0;el.set("rowCount",_a22);}el.validate(false);}});}if(!dojo._hasResource["dijit.form.MultiSelect"]){dojo._hasResource["dijit.form.MultiSelect"]=true;dojo.provide("dijit.form.MultiSelect");dojo.declare("dijit.form.MultiSelect",dijit.form._FormValueWidget,{size:7,templateString:"<select multiple='true' ${!nameAttrSetting} dojoAttachPoint='containerNode,focusNode' dojoAttachEvent='onchange: _onChange'></select>",attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{size:"focusNode"}),reset:function(){this._hasBeenBlurred=false;this._setValueAttr(this._resetValue,true);},addSelected:function(_a23){_a23.getSelected().forEach(function(n){this.containerNode.appendChild(n);this.domNode.scrollTop=this.domNode.offsetHeight;var _a24=_a23.domNode.scrollTop;_a23.domNode.scrollTop=0;_a23.domNode.scrollTop=_a24;},this);},getSelected:function(){return dojo.query("option",this.containerNode).filter(function(n){return n.selected;});},_getValueAttr:function(){return this.getSelected().map(function(n){return n.value;});},multiple:true,_setValueAttr:function(_a25){dojo.query("option",this.containerNode).forEach(function(n){n.selected=(dojo.indexOf(_a25,n.value)!=-1);});},invertSelection:function(_a26){dojo.query("option",this.containerNode).forEach(function(n){n.selected=!n.selected;});this._handleOnChange(this.get("value"),_a26==true);},_onChange:function(e){this._handleOnChange(this.get("value"),true);},resize:function(size){if(size){dojo.marginBox(this.domNode,size);}},postCreate:function(){this._onChange();}});}if(!dojo._hasResource["misys.binding.AsyncMessage"]){dojo._hasResource["misys.binding.AsyncMessage"]=true;dojo.provide("misys.binding.AsyncMessage");(function(d,m){function _a27(_a28){var _a29=dijit.byId("asyncSaveDialog");var _a2a=dojo.byId("asyncSaveDialogButtons");var _a2b=dijit.byId("OkAsyncButton").domNode;var _a2c=dojo.byId("asyncSaveDialogContent");var _a2d=dijit.byId("asyncSaveDialog").domNode;var _a2e=dojo.byId("asyncSaveDialogMsg");dojo.style(_a2a,"display","block");dojo.style(_a2c,"display","block");dojo.style(_a2b,"display","inline-block");dojo.style(_a2d,"display","inline-block");dojo.style(_a2e,"display","inline-block");_a29.set("title",misys.getLocalization("asyncMessage"));_a2e.innerHTML=_a28.asyncMessage;misys.dialog.connect(_a29,"onKeyPress",function(evt){if(evt.keyCode==dojo.keys.ESCAPE){dojo.stopEvent(evt);}});misys.dialog.connect(dijit.byId("OkAsyncButton"),"onMouseUp",function(){misys.dialog.disconnect(_a29);_a29.hide();},_a29.id);misys.dialog.connect(_a29,"onHide",function(){misys.dialog.disconnect(_a29);});_a29.show();};d.mixin(m,{checkAsyncMessage:function(_a2f){misys.xhrGet({url:misys.getServletURL("/screen/AjaxScreen/action/PingAction"),sync:true,handleAs:"json",load:function(_a30,args){if(_a30.asyncMessage){_a27(_a30);}else{_a2f++;setTimeout("misys.checkAsyncMessage("+_a2f+")",m._config.asyncMessageFreq||5000);}},error:function(_a31){}});}});})(dojo,misys);}if(!dojo._hasResource["dojox.lang.aspect"]){dojo._hasResource["dojox.lang.aspect"]=true;dojo.provide("dojox.lang.aspect");(function(){var d=dojo,aop=dojox.lang.aspect,ap=Array.prototype,_a32=[],_a33;var _a34=function(){this.next_before=this.prev_before=this.next_around=this.prev_around=this.next_afterReturning=this.prev_afterReturning=this.next_afterThrowing=this.prev_afterThrowing=this;this.counter=0;};d.extend(_a34,{add:function(_a35){var dyn=d.isFunction(_a35),node={advice:_a35,dynamic:dyn};this._add(node,"before","",dyn,_a35);this._add(node,"around","",dyn,_a35);this._add(node,"after","Returning",dyn,_a35);this._add(node,"after","Throwing",dyn,_a35);++this.counter;return node;},_add:function(node,_a36,_a37,dyn,_a38){var full=_a36+_a37;if(dyn||_a38[_a36]||(_a37&&_a38[full])){var next="next_"+full,prev="prev_"+full;(node[prev]=this[prev])[next]=node;(node[next]=this)[prev]=node;}},remove:function(node){this._remove(node,"before");this._remove(node,"around");this._remove(node,"afterReturning");this._remove(node,"afterThrowing");--this.counter;},_remove:function(node,_a39){var next="next_"+_a39,prev="prev_"+_a39;if(node[next]){node[next][prev]=node[prev];node[prev][next]=node[next];}},isEmpty:function(){return !this.counter;}});var _a3a=function(){return function(){var self=arguments.callee,_a3b=self.advices,ret,i,a,e,t;if(_a33){_a32.push(_a33);}_a33={instance:this,joinPoint:self,depth:_a32.length,around:_a3b.prev_around,dynAdvices:[],dynIndex:0};try{for(i=_a3b.prev_before;i!=_a3b;i=i.prev_before){if(i.dynamic){_a33.dynAdvices.push(a=new i.advice(_a33));if(t=a.before){t.apply(a,arguments);}}else{t=i.advice;t.before.apply(t,arguments);}}try{ret=(_a3b.prev_around==_a3b?self.target:aop.proceed).apply(this,arguments);}catch(e){_a33.dynIndex=_a33.dynAdvices.length;for(i=_a3b.next_afterThrowing;i!=_a3b;i=i.next_afterThrowing){a=i.dynamic?_a33.dynAdvices[--_a33.dynIndex]:i.advice;if(t=a.afterThrowing){t.call(a,e);}if(t=a.after){t.call(a);}}throw e;}_a33.dynIndex=_a33.dynAdvices.length;for(i=_a3b.next_afterReturning;i!=_a3b;i=i.next_afterReturning){a=i.dynamic?_a33.dynAdvices[--_a33.dynIndex]:i.advice;if(t=a.afterReturning){t.call(a,ret);}if(t=a.after){t.call(a);}}var ls=self._listeners;for(i in ls){if(!(i in ap)){ls[i].apply(this,arguments);}}}finally{for(i=0;i<_a33.dynAdvices.length;++i){a=_a33.dynAdvices[i];if(a.destroy){a.destroy();}}_a33=_a32.length?_a32.pop():null;}return ret;};};aop.advise=function(obj,_a3c,_a3d){if(typeof obj!="object"){obj=obj.prototype;}var _a3e=[];if(!(_a3c instanceof Array)){_a3c=[_a3c];}for(var j=0;j<_a3c.length;++j){var t=_a3c[j];if(t instanceof RegExp){for(var i in obj){if(d.isFunction(obj[i])&&t.test(i)){_a3e.push(i);}}}else{if(d.isFunction(obj[t])){_a3e.push(t);}}}if(!d.isArray(_a3d)){_a3d=[_a3d];}return aop.adviseRaw(obj,_a3e,_a3d);};aop.adviseRaw=function(obj,_a3f,_a40){if(!_a3f.length||!_a40.length){return null;}var m={},al=_a40.length;for(var i=_a3f.length-1;i>=0;--i){var name=_a3f[i],o=obj[name],ao=new Array(al),t=o.advices;if(!t){var x=obj[name]=_a3a();x.target=o.target||o;x.targetName=name;x._listeners=o._listeners||[];x.advices=new _a34;t=x.advices;}for(var j=0;j<al;++j){ao[j]=t.add(_a40[j]);}m[name]=ao;}return [obj,m];};aop.unadvise=function(_a41){if(!_a41){return;}var obj=_a41[0],_a42=_a41[1];for(var name in _a42){var o=obj[name],t=o.advices,ao=_a42[name];for(var i=ao.length-1;i>=0;--i){t.remove(ao[i]);}if(t.isEmpty()){var _a43=true,ls=o._listeners;if(ls.length){for(i in ls){if(!(i in ap)){_a43=false;break;}}}if(_a43){obj[name]=o.target;}else{var x=obj[name]=d._listener.getDispatcher();x.target=o.target;x._listeners=ls;}}}};aop.getContext=function(){return _a33;};aop.getContextStack=function(){return _a32;};aop.proceed=function(){var _a44=_a33.joinPoint,_a45=_a44.advices;for(var c=_a33.around;c!=_a45;c=_a33.around){_a33.around=c.prev_around;if(c.dynamic){var a=_a33.dynAdvices[_a33.dynIndex++],t=a.around;if(t){return t.apply(a,arguments);}}else{return c.advice.around.apply(c.advice,arguments);}}return _a44.target.apply(_a33.instance,arguments);};})();}if(!dojo._hasResource["dojox.collections._base"]){dojo._hasResource["dojox.collections._base"]=true;dojo.provide("dojox.collections._base");dojox.collections.DictionaryEntry=function(k,v){this.key=k;this.value=v;this.valueOf=function(){return this.value;};this.toString=function(){return String(this.value);};};dojox.collections.Iterator=function(arr){var a=arr;var _a46=0;this.element=a[_a46]||null;this.atEnd=function(){return (_a46>=a.length);};this.get=function(){if(this.atEnd()){return null;}this.element=a[_a46++];return this.element;};this.map=function(fn,_a47){return dojo.map(a,fn,_a47);};this.reset=function(){_a46=0;this.element=a[_a46];};};dojox.collections.DictionaryIterator=function(obj){var a=[];var _a48={};for(var p in obj){if(!_a48[p]){a.push(obj[p]);}}var _a49=0;this.element=a[_a49]||null;this.atEnd=function(){return (_a49>=a.length);};this.get=function(){if(this.atEnd()){return null;}this.element=a[_a49++];return this.element;};this.map=function(fn,_a4a){return dojo.map(a,fn,_a4a);};this.reset=function(){_a49=0;this.element=a[_a49];};};}if(!dojo._hasResource["dojox.collections.ArrayList"]){dojo._hasResource["dojox.collections.ArrayList"]=true;dojo.provide("dojox.collections.ArrayList");dojox.collections.ArrayList=function(arr){var _a4b=[];if(arr){_a4b=_a4b.concat(arr);}this.count=_a4b.length;this.add=function(obj){_a4b.push(obj);this.count=_a4b.length;};this.addRange=function(a){if(a.getIterator){var e=a.getIterator();while(!e.atEnd()){this.add(e.get());}this.count=_a4b.length;}else{for(var i=0;i<a.length;i++){_a4b.push(a[i]);}this.count=_a4b.length;}};this.clear=function(){_a4b.splice(0,_a4b.length);this.count=0;};this.clone=function(){return new dojox.collections.ArrayList(_a4b);};this.contains=function(obj){for(var i=0;i<_a4b.length;i++){if(_a4b[i]==obj){return true;}}return false;};this.forEach=function(fn,_a4c){dojo.forEach(_a4b,fn,_a4c);};this.getIterator=function(){return new dojox.collections.Iterator(_a4b);};this.indexOf=function(obj){for(var i=0;i<_a4b.length;i++){if(_a4b[i]==obj){return i;}}return -1;};this.insert=function(i,obj){_a4b.splice(i,0,obj);this.count=_a4b.length;};this.item=function(i){return _a4b[i];};this.remove=function(obj){var i=this.indexOf(obj);if(i>=0){_a4b.splice(i,1);}this.count=_a4b.length;};this.removeAt=function(i){_a4b.splice(i,1);this.count=_a4b.length;};this.reverse=function(){_a4b.reverse();};this.sort=function(fn){if(fn){_a4b.sort(fn);}else{_a4b.sort();}};this.setByIndex=function(i,obj){_a4b[i]=obj;this.count=_a4b.length;};this.toArray=function(){return [].concat(_a4b);};this.toString=function(_a4d){return _a4b.join((_a4d||","));};};}if(!dojo._hasResource["dojo.io.iframe"]){dojo._hasResource["dojo.io.iframe"]=true;dojo.provide("dojo.io.iframe");dojo.getObject("io",true,dojo);dojo.io.iframe={create:function(_a4e,_a4f,uri){if(window[_a4e]){return window[_a4e];}if(window.frames[_a4e]){return window.frames[_a4e];}var _a50=null;var turi=uri;if(!turi){if(dojo.config["useXDomain"]&&!dojo.config["dojoBlankHtmlUrl"]){console.warn("dojo.io.iframe.create: When using cross-domain Dojo builds,"+" please save dojo/resources/blank.html to your domain and set djConfig.dojoBlankHtmlUrl"+" to the path on your domain to blank.html");}turi=(dojo.config["dojoBlankHtmlUrl"]||dojo.moduleUrl("dojo","resources/blank.html"));}var _a50=dojo.place("<iframe id=\""+_a4e+"\" name=\""+_a4e+"\" onload=\""+_a4f+"\" style=\"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden\">",dojo.body());window[_a4e]=_a50;return _a50;},setSrc:function(_a51,src,_a52){try{if(!_a52){if(dojo.isWebKit){_a51.location=src;}else{frames[_a51.name].location=src;}}else{var idoc;if(dojo.isIE||dojo.isWebKit){idoc=_a51.contentWindow.document;}else{idoc=_a51.contentWindow;}if(!idoc){_a51.location=src;return;}else{idoc.location.replace(src);}}}catch(e){}},doc:function(_a53){var doc=_a53.contentDocument||(((_a53.name)&&(_a53.document)&&(dojo.doc.getElementsByTagName("iframe")[_a53.name].contentWindow)&&(dojo.doc.getElementsByTagName("iframe")[_a53.name].contentWindow.document)))||((_a53.name)&&(dojo.doc.frames[_a53.name])&&(dojo.doc.frames[_a53.name].document))||null;return doc;},send:function(args){if(!this["_frame"]){this._frame=this.create(this._iframeName,dojo._scopeName+".io.iframe._iframeOnload();");}var dfd=dojo._ioSetArgs(args,function(dfd){dfd.canceled=true;dfd.ioArgs._callNext();},function(dfd){var _a54=null;try{var _a55=dfd.ioArgs;var dii=dojo.io.iframe;var ifd=dii.doc(dii._frame);var _a56=_a55.handleAs;_a54=ifd;if(_a56!="html"){if(_a56=="xml"){if(dojo.isIE<9||(dojo.isIE&&dojo.isQuirks)){dojo.query("a",dii._frame.contentWindow.document.documentElement).orphan();var _a57=(dii._frame.contentWindow.document).documentElement.innerText;_a57=_a57.replace(/>\s+</g,"><");_a57=dojo.trim(_a57);var _a58={responseText:_a57};_a54=dojo._contentHandlers["xml"](_a58);}}else{_a54=ifd.getElementsByTagName("textarea")[0].value;if(_a56=="json"){_a54=dojo.fromJson(_a54);}else{if(_a56=="javascript"){_a54=dojo.eval(_a54);}}}}}catch(e){_a54=e;}finally{_a55._callNext();}return _a54;},function(_a59,dfd){dfd.ioArgs._hasError=true;dfd.ioArgs._callNext();return _a59;});dfd.ioArgs._callNext=function(){if(!this["_calledNext"]){this._calledNext=true;dojo.io.iframe._currentDfd=null;dojo.io.iframe._fireNextRequest();}};this._dfdQueue.push(dfd);this._fireNextRequest();dojo._ioWatch(dfd,function(dfd){return !dfd.ioArgs["_hasError"];},function(dfd){return (!!dfd.ioArgs["_finished"]);},function(dfd){if(dfd.ioArgs._finished){dfd.callback(dfd);}else{dfd.errback(new Error("Invalid dojo.io.iframe request state"));}});return dfd;},_currentDfd:null,_dfdQueue:[],_iframeName:dojo._scopeName+"IoIframe",_fireNextRequest:function(){try{if((this._currentDfd)||(this._dfdQueue.length==0)){return;}do{var dfd=this._currentDfd=this._dfdQueue.shift();}while(dfd&&dfd.canceled&&this._dfdQueue.length);if(!dfd||dfd.canceled){this._currentDfd=null;return;}var _a5a=dfd.ioArgs;var args=_a5a.args;_a5a._contentToClean=[];var fn=dojo.byId(args["form"]);var _a5b=args["content"]||{};if(fn){if(_a5b){var _a5c=function(name,_a5d){dojo.create("input",{type:"hidden",name:name,value:_a5d},fn);_a5a._contentToClean.push(name);};for(var x in _a5b){var val=_a5b[x];if(dojo.isArray(val)&&val.length>1){var i;for(i=0;i<val.length;i++){_a5c(x,val[i]);}}else{if(!fn[x]){_a5c(x,val);}else{fn[x].value=val;}}}}var _a5e=fn.getAttributeNode("action");var _a5f=fn.getAttributeNode("method");var _a60=fn.getAttributeNode("target");if(args["url"]){_a5a._originalAction=_a5e?_a5e.value:null;if(_a5e){_a5e.value=args.url;}else{fn.setAttribute("action",args.url);}}if(!_a5f||!_a5f.value){if(_a5f){_a5f.value=(args["method"])?args["method"]:"post";}else{fn.setAttribute("method",(args["method"])?args["method"]:"post");}}_a5a._originalTarget=_a60?_a60.value:null;if(_a60){_a60.value=this._iframeName;}else{fn.setAttribute("target",this._iframeName);}fn.target=this._iframeName;dojo._ioNotifyStart(dfd);fn.submit();}else{var _a61=args.url+(args.url.indexOf("?")>-1?"&":"?")+_a5a.query;dojo._ioNotifyStart(dfd);this.setSrc(this._frame,_a61,true);}}catch(e){dfd.errback(e);}},_iframeOnload:function(){var dfd=this._currentDfd;if(!dfd){this._fireNextRequest();return;}var _a62=dfd.ioArgs;var args=_a62.args;var _a63=dojo.byId(args.form);if(_a63){var _a64=_a62._contentToClean;for(var i=0;i<_a64.length;i++){var key=_a64[i];for(var j=0;j<_a63.childNodes.length;j++){var _a65=_a63.childNodes[j];if(_a65.name==key){dojo.destroy(_a65);break;}}}if(_a62["_originalAction"]){_a63.setAttribute("action",_a62._originalAction);}if(_a62["_originalTarget"]){_a63.setAttribute("target",_a62._originalTarget);_a63.target=_a62._originalTarget;}}_a62._finished=true;}};}if(!dojo._hasResource["misys.client.common_client"]){dojo._hasResource["misys.client.common_client"]=true;dojo.provide("misys.client.common_client");(function(d,dj,m){})(dojo,dijit,misys);}if(!dojo._hasResource["misys.common"]){dojo._hasResource["misys.common"]=true;var originalOperationValue="";var consoleMSG="widget invalid: ";var attachmntFile="attachment-file";var tabContainr=".tabcontainer";var colbortionWindow="#collaborationWindow";var ariaDescrib="aria-describedby";var langMenu="#languagesMenu .dijitReset.dijitStretch.dijitButtonContents.dijitDownArrowButton";var bookmrkMenu="#bookmarkMenu .dijitReset.dijitStretch.dijitButtonContents.dijitDownArrowButton";var popuMenuItem=".dijitReset.dijitInline.dijitMenuItem.dijitMenuItemLabel.portalPopupMenuBarItem";var h1portletTitle="h1.portlet-title";var h2portletTitle="h2.portlet-title";var homepagePortlet=".homepage .portlet";var inlneBlock="inline-block";var prductCode="&productcode=";var refrnceId="&referenceid=";var entitlementCod="&entitlementcode=";var entitlementDescp="&entitlementdescription=";var scrhCrieteria="#searchCriteria > div > p";var GTPRootPotlet="#GTPRootPortlet > div.portlet-section-header.portlet-font > h1";var reportingPopup="/screen/ReportingPopup";var footerHtml="footerHtml";dojo.provide("misys.common");dojo.extend(dijit.Editor,{toXML:function(){var _a66=this.get("value").replace("<br _moz_editor_bogus_node=\"TRUE\" />","");_a66=dojo.trim(_a66);return _a66!==""?"<![CDATA["+dojo.trim(dojox.html.entities.encode(_a66,dojox.html.entities.html))+"]]>":"";}});dojo.extend(misys.form.SimpleTextarea,{toXML:function(){var _a67=this.get("value");_a67=dojo.trim(_a67);return _a67!==""?"<![CDATA["+dojo.trim(_a67)+"]]>":"";}});dojo.extend(dijit.form.MultiSelect,{_getValueAttr:function(){return dojo.query("option",this.containerNode).map(function(n){return n.value;});}});function getErrorSection(){var _a68=0,_a69=0;var _a6a=[];misys._config=misys._config||{};dojo.query(".toplevel-header").forEach(function(_a6b){var _a6c;var i;var _a6d;var _a6e=_a6b.childNodes;for(i=0;i<_a6e.length;i++){_a6c=_a6e[i];if(_a6c.className==="toc-item"){_a6d=_a6c.firstChild.innerHTML;}else{if(_a6c.className==="fieldset-content"){var _a6f=[];dojo.forEach(_a6c.querySelectorAll("*"),function(div){var _a70=dijit.byId(div.id);if(_a70){_a70._hasBeenBlurred=true;var _a71=_a70.disabled||!_a70.validate||_a70.validate();if(!_a71){var _a72={"widget":_a70};var _a73=_a70.declaredClass;_a6f.push(_a72);}}});}}if(_a6d&&_a6f&&_a6f.length>0){var _a74={"header":_a6d,"widgetArray":_a6f,"child":_a6c};_a6a.push(_a74);}}});if(_a6a.length>0){var _a75=dojo.byId("errorContent");if(_a75){_a75.innerHTML="";var _a76=dojo.create("ul");dojo.forEach(_a6a,function(_a77){_a77.child.id="mylink"+_a69++;var _a78="mylink"+_a68++;var li=dojo.create("li");var a=dojo.create("a",{href:"#"+_a78,id:"goto_"+_a78,innerHTML:_a77.header},li);dojo.place(li,_a76);});dojo.empty(_a75);dojo.style(dojo.byId("errorSection"),"display","block");dojo.place(_a76,_a75);}}else{if(dojo.byId("errorSection")){dojo.style(dojo.byId("errorSection"),"display","none");}}};dojo.extend(dijit.form.Form,{validate:function(){var _a79=false;misys._config=misys._config||{};return dojo.every(dojo.map(this.getDescendants(),function(_a7a){_a7a._hasBeenBlurred=true;var _a7b=_a7a.disabled||!_a7a.validate||_a7a.validate();if(!_a7b){}if(!_a7b&&!_a79){if(_a7a.hasOwnProperty("parentTab")){dijit.byId(_a7a.get("tabContainer")).selectChild(_a7a.get("parentTab"));}var _a7c=_a7a.focus||function(){};if(dojo.isIE<=6||misys._config.popupType){dojo.window.scrollIntoView(_a7a.containerNode||_a7a.domNode);_a7c();}else{dojox.fx.smoothScroll({node:_a7a.containerNode||_a7a.domNode,win:window,onEnd:function(){_a7c();}}).play();}_a79=true;}return _a7b;}),function(item){return item;});}});(function(d,dj,m){var _a7d=".validate",_a7e="realform",_a7f="transactionDetails",_a80=attachmntFile,_a81="attachment-fileinvoice",_a82="attachment-filepurchaseorder",_a83="attachment-filepurchaseorderupload",_a84="files_master_table",_a85="attachment-fileOTHER",_a86=".swift",_a87=100,_a88="popup_fakeform1",_a89=".subscribeTopic",_a8a="subscribe_topic",_a8b="tabChangeStyle",_a8c=tabContainr,_a8d=".dojoxGrid",_a8e="TransactionSearchForm",_a8f="export_list",_a90="filename",_a91="collaborationWindowContainer",_a92=".toc-item",_a93=5000,_a94=".chartImg",_a95="400px",_a96="600",_a97="800",_a98=500,_a99,_a9a,_a9b,_a9c;function _a9d(type){var _a9e=[function(){return true;}],_a9f=type,_aa0,_aa1,_aa2,_aa3,_aa4,_aa5,_aa6;switch(type){case "VALIDATE":_a9e.push(misys.validateSummitTransaction);_aa0=m.getLocalization("validatingTransactionMessage");break;case "SAVE":_a9e.push(_adf,m.beforeSaveValidations);if(m.client&&m.client.beforeSaveValidations){_a9e.push(m.client.beforeSaveValidations);}_aa2=m.getLocalization("mandatoryEntityMessage");var _aa7=dj.byId("product_code")?dj.byId("product_code").get("value"):null;if(_aa7!==null){var _aa8=dj.byId(_aa7.toLowerCase()+"_cur_code");}var _aa9=_aa8?_aa8.get("value"):"";if(_aa8&&_aa9!==""&&_aa8.state==="Error"){_aa8.set("value","");}_aa0=m.getLocalization("savingTransactionMessage");_aa1=function(){dijit.byId("entity")?dijit.byId("entity").focus():null;if(misys._config.swiftError&&misys._config.swiftError.length!==0){for(var i in misys._config.swiftError){var _aaa=dijit.byId(m._config.swiftError[i]);_aaa.set("state","Error");_aaa._setStateClass();dj.setWaiState(_aaa.focusNode,"invalid","true");}_aaa=dijit.byId(m._config.swiftError[0]);if(_aaa.hasOwnProperty("parentTab")){dj.byId(_aaa.get("tabContainer")).selectChild(_aaa.get("parentTab"));_ad9();}dojox.fx.smoothScroll({node:_aaa.containerNode||_aaa.domNode,win:window}).play();}};break;case "ADD_BULK":_a9e.push(_adf,_ad2,m.beforeSubmitValidations);if(m.client&&m.client.beforeSubmitValidations){_a9e.push(m.client.beforeSubmitValidations);}_aa2=m.getLocalization("mandatoryFieldsToSubmitError");_aa0=m.getLocalization("validatingAndSubmittingMessage");_aa1=function(){if(d.byId(_a7f)){m.toggleTransaction(true,false,function(){_ad2(true);});}else{_ad2(true);}if(misys._config.swiftError&&misys._config.swiftError.length!==0){for(var i in misys._config.swiftError){var _aab=dijit.byId(m._config.swiftError[i]);_aab.set("state","Error");_aab._setStateClass();dj.setWaiState(_aab.focusNode,"invalid","true");}_aab=dijit.byId(m._config.swiftError[0]);dojox.fx.smoothScroll({node:_aab.containerNode||_aab.domNode,win:window}).play();}};break;case "UPDATE_BULK":_a9e.push(_adf,_ad2,m.beforeSubmitValidations);if(m.client&&m.client.beforeSubmitValidations){_a9e.push(m.client.beforeSubmitValidations);}_aa2=m.getLocalization("mandatoryFieldsToSubmitError");_aa0=m.getLocalization("validatingAndSubmittingMessage");_aa1=function(){if(d.byId(_a7f)){m.toggleTransaction(true,false,function(){_ad2(true);});}else{_ad2(true);}if(misys._config.swiftError&&misys._config.swiftError.length!==0){for(var i in misys._config.swiftError){var _aac=dijit.byId(m._config.swiftError[i]);_aac.set("state","Error");_aac._setStateClass();dj.setWaiState(_aac.focusNode,"invalid","true");}_aac=dijit.byId(m._config.swiftError[0]);dojox.fx.smoothScroll({node:_aac.containerNode||_aac.domNode,win:window}).play();}};break;case "SYSTEM_SUBMIT":_a9f="SUBMIT";_a9e.push(_ad2,m.beforeSubmitValidations);if(m.client&&m.client.beforeSubmitValidations){_a9e.push(m.client.beforeSubmitValidations);}_aa2=m.getLocalization("mandatoryFieldsToSubmitError");_aa0=m.getLocalization("validatingAndSubmittingMessage");_aa1=function(){setTimeout(function(){_ad2(true);},dj.defaultDuration);};break;case "SUBMIT":_a9e.push(_adf,_ad2,_ada,m.beforeSubmitValidations);if(m.client&&m.client.beforeSubmitValidations){_a9e.push(m.client.beforeSubmitValidations);}_aa2=m.getLocalization("mandatoryFieldsToSubmitError");_aa0=m.getLocalization("validatingAndSubmittingMessage");if(dj.byId("return_comments")){dj.byId("return_comments").set("required",false);}getErrorSection();_aa1=function(){_ad2(true);if(misys._config.swiftError&&misys._config.swiftError.length!==0){for(var i in misys._config.swiftError){var _aad=dijit.byId(m._config.swiftError[i]);_aad.set("state","Error");_aad._setStateClass();dj.setWaiState(_aad.focusNode,"invalid","true");}_aad=dijit.byId(m._config.swiftError[0]);if(_aad.hasOwnProperty("parentTab")){dj.byId(_aad.get("tabContainer")).selectChild(_aad.get("parentTab"));_ad9();}if(d.byId(_a7f)){m.toggleTransaction(true,false,function(){dojox.fx.smoothScroll({node:_aad.containerNode||_aad.domNode,win:window}).play();});}else{dojox.fx.smoothScroll({node:_aad.containerNode||_aad.domNode,win:window}).play();}}};break;case "SAVE_TEMPLATE":var _aae=dj.byId("template_id"),_aaf=_aae.get("value");if(_aaf.indexOf("<")!==-1){_aaf=_aaf.replaceAll("<","&lt;");}if(misys._config.isMultiBank){var _ab0=dj.byId("bk_type");var _ab1=dj.byId("bk_type_hidden");var _ab2=dj.byId("payroll_type");var _ab3=dj.byId("payroll_type_hidden");if(_ab0&&_ab0.get("value")===""&&_ab1&&_ab1.get("value")!==""){_ab0.set("value",_ab1.get("value"));}if(_ab2&&_ab2.get("value")===""&&_ab3&&_ab3.get("value")!==""){_ab2.set("value",_ab3.get("value"));}}_aa0=m.getLocalization("savingTemplateMessage",[_aaf]);_aa2=m.getLocalization("mandatoryTemplateFieldError");_a9e.push(function(){if(_aae.get("value")===""){_aa2=m.getLocalization("mandatoryTemplateFieldError");return false;}return true;});_aa1=function(){_aae.focus();};break;case "SAVE_REPORT_TEMPLATE":_a9f="SAVE_TEMPLATE";_a9e.push(_ad2);_aa2=m.getLocalization("mandatoryFieldsToSubmitError");_aa0=m.getLocalization("validatingAndSubmittingMessage");_aa1=function(){setTimeout(function(){_ad2(true);},dj.defaultDuration);};break;case "CANCEL":document.location.href=m.onCancelNavigation();return;break;case "CANCEL_BULK_TRANSACTION":var _ab4=dj.byId("ref_id").get("value");var _ab5=["/screen/BulkScreen?referenceid=",_ab4,"&mode=CANCEL"];window.location.href=misys.getServletURL(_ab5.join(""));return;break;case "CANCEL_BULK":var _ab6=dj.byId("bulk_ref_id").get("value");var _ab7=dj.byId("bulk_tnx_id").get("value");var _ab8=dj.byId("ref_id").get("value");var _ab9=dj.byId("tnx_id").get("value");var _aba=["/screen/BulkScreen?referenceid=",_ab6,"&tnxid=",_ab7,"&childrefid=",_ab8,"&childtnxid=",_ab9,"&tnxtype=01&mode=DRAFT"];window.location.href=misys.getServletURL(_aba.join(""));return;break;case "RETURN":_aa3=dj.byId("return_comments");if(_aa3&&dojo.string.trim(_aa3.get("value"))===""){_aa3.set("value","");_aa3.set("required",true);if(dj.byId("fakeform1")){dj.byId("fakeform1").validate();}_aa2=m.getLocalization("requiredToolTip");_aa3.focus();return;}else{if(_aa3&&dojo.string.trim(_aa3.get("value"))!==""){_aa3.set("value",dojo.string.trim(_aa3.get("value")));}}break;case "REJECT":_a9f="REJECT";if(dj.byId("reject_comments")){_aa4=dj.byId("reject_comments");if(_aa4&&dojo.string.trim(_aa4.get("value"))===""){_aa4.set("required",true);_aa2=m.getLocalization("requiredToolTip");_aa4.focus();return;}}if(dj.byId("free_format_text")){_aa5=dj.byId("free_format_text");if(_aa5&&dojo.string.trim(_aa5.get("value"))===""){_aa5.set("required",true);_aa2=m.getLocalization("requiredToolTip");_aa5.focus();return;}}_aa0=m.getLocalization("rejectingTransactionMessage");break;case "RETURN_TRANSACTION":_a9f="RETURN_TRANSACTION";_aa0=m.getLocalization("returningTransactionMessage");_aa3=dj.byId("return_comments");if(_aa3){if(_aa3&&_aa3.get("value")===""){_aa3.set("required",true);dj.byId("fakeform1").validate();_aa2=m.getLocalization("requiredToolTip");_aa3.focus();return;}else{var _abb=dojo.string.trim(dj.byId("return_comments").get("value"));if(_abb===""){dj.byId("return_comments").set("value",_abb);_aa3.set("required",true);dj.byId("fakeform1").validate();_aa2=m.getLocalization("requiredToolTip");_aa3.focus();return;}}}break;case "AUTO_FORWARD_SUBMIT":_a9f="AUTO_FORWARD_SUBMIT";if(m.client&&m.client.beforeSubmitValidations){_a9e.push(m.client.beforeSubmitValidations);}_aa0=m.getLocalization("submitAutoForwardMsg");break;case "LEGAL_TEXT_SUBMIT":_a9f="SUBMIT";if(m.client&&m.client.beforeSubmitValidations){_a9e.push(m.client.beforeSubmitValidations);}_aa0=m.getLocalization("validatingAndSubmittingMessage");break;case "DRAFT":_a9f="DRAFT";_a9e.push(m.beforeSaveValidations);if(m.client&&m.client.beforeSaveValidations){_a9e.push(m.client.beforeSaveValidations);}break;case "MAKER_SUBMIT":_a9f="SUBMIT";_a9e.push(_adf,_ad2,m.beforeSubmitValidations);if(m.client&&m.client.beforeSubmitValidations){_a9e.push(m.client.beforeSubmitValidations);}_aa2=m.getLocalization("mandatoryFieldsToSubmitError");_aa0=m.getLocalization("validatingAndSubmittingMessage");_aa1=function(){_ad2(true);if(misys._config.swiftError&&misys._config.swiftError.length!==0){for(var i in misys._config.swiftError){var _abc=dijit.byId(m._config.swiftError[i]);_abc.set("state","Error");_abc._setStateClass();dj.setWaiState(_abc.focusNode,"invalid","true");}_abc=dijit.byId(m._config.swiftError[0]);dojox.fx.smoothScroll({node:_abc.containerNode||_abc.domNode,win:window}).play();}};break;case "RESUBMIT":_a9f="SUBMIT";_aa0=m.getLocalization("resubmitMessage");break;case "MAKER_BENE_FILE_UPLOAD_SUBMIT":_a9f="SUBMIT";_a9e.push(_adf,_ad2,m.beforeSubmitValidations);if(m.client&&m.client.beforeSubmitValidations){_a9e.push(m.client.beforeSubmitValidations);}_aa2=m.getLocalization("mandatoryFieldsToSubmitError");_aa0=m.getLocalization("validatingAndSubmittingMessage");_aa1=function(){_ad2(true);if(misys._config.swiftError&&misys._config.swiftError.length!==0){for(var i in misys._config.swiftError){var _abd=dijit.byId(m._config.swiftError[i]);_abd.set("state","Error");_abd._setStateClass();dj.setWaiState(_abd.focusNode,"invalid","true");}_abd=dijit.byId(m._config.swiftError[0]);dojox.fx.smoothScroll({node:_abd.containerNode||_abd.domNode,win:window}).play();}};break;case "MAKER_BENE_SUBMIT":_a9f="SUBMIT";_a9e.push(_adf,_ad2,m.beforeSubmitValidations);if(m.client&&m.client.beforeSubmitValidations){_a9e.push(m.client.beforeSubmitValidations);}_aa2=m.getLocalization("mandatoryFieldsToSubmitError");_aa0=m.getLocalization("validatingAndSubmittingMessage");_aa1=function(){_ad2(true);if(misys._config.swiftError&&misys._config.swiftError.length!==0){for(var i in misys._config.swiftError){var _abe=dijit.byId(m._config.swiftError[i]);_abe.set("state","Error");_abe._setStateClass();dj.setWaiState(_abe.focusNode,"invalid","true");}_abe=dijit.byId(m._config.swiftError[0]);dojox.fx.smoothScroll({node:_abe.containerNode||_abe.domNode,win:window}).play();}};break;default:break;}if(_aa0&&_aa0!==""){m.dialog.show("PROGRESS",_aa0);}if((d.every(_a9e,function(f){return f();}))||(dj.byId("tnxtype")&&dj.byId("tnxtype").get("value")==="55")){var _abf=dj.byId("realform_operation");if(_abf&&_abf.get("value")===""){_abf.set("value",_a9f);}else{if(_a9f!==""&&(_a9f==="CHECKER_BENE_SUBMIT"||_a9f==="CHECKER_BENE_FILE_UPLOAD_SUBMIT")){_abf.set("value","APPROVE_FEATURES");}}_aca();if(type==="SAVE_TEMPLATE"&&!_b51(dijit.byId("template_id"))){m.dialog.show("CONFIRMATION",m.getLocalization("nonUniqueTemplateIDError"),"",function(){if(m.isFormDirty&&m.isFormDirty===true){m.isFormDirty=false;}dj.byId("TransactionData").set("value",m.formToXML());dj.byId("realform").submit();});return;}var _ac0=dj.byId("transaction_confirmation_details");if(_ac0&&_ac0.get("value")==="Y"&&(type==="SUBMIT"||type==="AUTO_FORWARD_SUBMIT")){m.checkAndShowTnxConfirmationDetailsDialog();}else{if(type==="SUBMIT"||type==="MAKER_SUBMIT"||type==="LEGAL_TEXT_SUBMIT"||type==="AUTO_FORWARD_SUBMIT"||type==="APPROVE"||type==="REJECT"||type==="RETURN_TRANSACTION"||type==="REVERT"||type==="RETURN"||type==="DELETE"||type==="SYSTEM_SUBMIT"||type==="RESUBMIT"||type==="CHECKER_BENE_FILE_UPLOAD_SUBMIT"||type==="CHECKER_BENE_SUBMIT"||type==="MAKER_BENE_FILE_UPLOAD_SUBMIT"||type==="MAKER_BENE_SUBMIT"){m.performReauthentication();}else{if(m.isFormDirty&&m.isFormDirty===true){m.isFormDirty=false;}dj.byId("TransactionData").set("value",m.formToXML());dj.byId(_a7e).submit();}}}else{var _ac1=m._config.holidayCutOffEnabled;var _ac2=m._config.legalTextEnabled;if(_ac1&&_ac1===true){m._config.holidayCutOffEnabled=false;}else{if(_ac2&&_ac2==true){m._config.legalTextEnabled=false;}else{var _ac3=m._config.onSubmitErrorMsg;_aa2=(_ac3&&_ac3!=="")?_ac3:_aa2;m._config.onSubmitErrorMsg="";if(_aa2&&_aa2!==""){m.dialog.show("ERROR",_aa2,"",_aa1);}}}}};function _ac4(type){var _ac5=[function(){return true;}],_ac6=type,_ac7,_ac8;_ac5.push(m.beforeSaveValidations);_ac8=m.getLocalization("mandatoryEntityMessage");_ac7=function(){dijit.byId("entity")?dijit.byId("entity").focus():null;};if(d.every(_ac5,function(f){return f();})){var _ac9=dj.byId("realform_operation");if(_ac9.get("value")===""){_ac9.set("value",_ac6);}_aca();_ac8="";dj.byId("TransactionData").set("value",m.formToXML());}else{var _acb=m._config.holidayCutOffEnabled;if(_acb&&_acb===true){m._config.holidayCutOffEnabled=false;}else{var _acc=m._config.onSubmitErrorMsg;_ac8=(_acc&&_acc!=="")?_acc:_ac8;m._config.onSubmitErrorMsg="";if(_ac8&&_ac8!==""){m.dialog.show("ERROR",_ac8,"",_ac7);}}}return _ac8;};function _acd(_ace,_acf){m.dialog.show("PROGRESS",m.getLocalization("validatingAndSubmittingMessage"),"",null,function(){setTimeout(function(){m.xhrPost({form:_ace,load:function(data,_ad0){var _ad1=data.substring(data.indexOf("<div id='GTPRootPortlet' class='portlet'>"));_ad1=_ad1.substring(_ad1.indexOf("<div class='portlet-font portlet-section-body'><p>"));_ad1=_ad1.substring(_ad1.indexOf("<p>"),_ad1.indexOf("</div>"));dj.byId("alertDialog").hide();m.dialog.clear(d.byId(m._config.popupType+"data"),dj.byId("contentPane"),_acf,_ad1);},contentType:""});},1000);});};function _ad2(_ad3,_ad4){var _ad5=(_ad4||d.query(_a7d)).reverse(),_ad6=dj.byId("draft_term"),_ad7=true;if(_ad6){_ad6.validate();}d.forEach(_ad5,function(form){var _ad8=dj.byId(form.id);if(_ad8._getState()!==""||_ad8.state!==""){if(_ad3){_ad8.validate();}_ad7=false;}});if(!_ad7&&_ad3){_ad9();}return _ad7;};function _ada(){var _adb=dj.byId(_a80);var _adc=dj.byId("delivery_channel");var _add=false;if(_adc&&(_adc.get("value")=="FACT")&&_adb&&_adb.grid.selection&&_adb.fileActVisible){d.forEach(_adb.grid.selection.getSelected(),function(node,_ade){if(node&&node!=null){_add=true;}});}else{_add=true;}if(!_add){m._config.onSubmitErrorMsg=m.getLocalization("selectAtleastOneFileForFileAct");}return _add;};function _adf(){var _ae0=dj.byId("adv_send_mode");var _ae1,_ae2,_ae3=false,_ae4=false,_ae5=false;var _ae6=false;var _ae7=false;var _ae8;if(document.getElementById("_userType")){_ae8=document.getElementById("_userType").getAttribute("value");}misys._config=misys._config||{};misys._config.swiftRelatedSections=misys._config.swiftRelatedSections||[];dojo.mixin(misys._config,{swiftError:new Array()});var _ae9=false;var _aea=true;if(m._config.isBank){if(m._config.isBank===true){_ae9=true;_aea=false;}}if((_ae0&&_ae0.get("value")==="01")||m._config.forceSWIFTValidation){if(_aea||((_ae9&&misys._config.productCode!="SR")&&(_ae9&&misys._config.productCode!="EL"))){var _aeb=[];misys._config.swiftRelatedSections.forEach(function(_aec){var _aed=dj.byId(_aec.concat("_name"));var _aee=dj.byId(_aec.concat("_address_line_4"));if(_aed){if(!_af6(_aed)){_aeb.push(_aed);_ae4=true;}}if(_aee&&_aee.get("value")!==""){if(_aea||((_ae9&&misys._config.productCode!="SR")&&(_ae9&&misys._config.productCode!="EL"))){_aeb.push(_aee);_ae5=true;}}});d.query(_a86).forEach(function(node){var _aef=dj.byId(node.getAttribute("widgetid"));var _af0=misys._config.productCode;var _af1=dj.byId("is798")?dj.byId("is798").get("value"):"";m._config.is798=_af1;if((_aef&&_aef.id!="cust_ref_id")||(_aef&&_aef.id=="cust_ref_id"&&misys._config.is798=="Y")){_aef.onBlur(_aef);if(!_af8(_aef)&&!(_af0!="LC"||_af0!="SI"||_af0!="EL"||_af0!="SR")){m.showTooltip(m.getLocalization("invalidSWIFTFieldSizeError"),node);_aeb.push(_aef);m.connect(_aef,"onBlur",function(){m.setFieldState(this,_af8(this));});_ae2=true;}else{if(!_aff(_aef)&&_aef.id!="template_id"){_aeb.push(_aef);m.connect(_aef,"onBlur",function(){m.setFieldState(this,_aff(this));});_ae1=true;}else{if(m._config.swift2018Enabled&&_af4(node)&&!_b06(_aef)){_aeb.push(_aef);m.connect(_aef,"onBlur",function(){m.setFieldState(this,_b06(this));});_ae3=true;}else{if(!(_aef.get("required")&&(_aef.get("value")===""||isNaN(_aef.get("value"))))){m.setFieldState(_aef,true);}}}}}});if(_aeb.length>0){d.forEach(_aeb,function(_af2,_af3){m.setFieldState(_af2,false);if(m._config.swift2018Enabled&&_af4(_af2)){_ae6=true;}else{_ae7=true;}_af2.invalidMessage=m.getLocalization("invalidSWIFTTransactionError");misys._config.swiftError[_af3]=_af2.get("id");});if(_ae2){_ad9();m._config.onSubmitErrorMsg=m.getLocalization("invalidSWIFTFieldSizeError");return false;}else{if(_ae4){_ad9();m._config.onSubmitErrorMsg=m.getLocalization("invalidSWIFTFieldSizeErrorForTrade");return false;}else{if(_ae1){_ad9();var _af5=m.getLocalization("invalidSWIFTTransactionErrorMsg");if(_ae7&&!_ae6&&_ae8){_af5=_af5+m.getLocalization("invalidSWIFTTransactionValidValues");}if(!_ae7&&_ae6&&_ae8){_af5=_af5+m.getLocalization("invalidSWIFTTransactionValidValuesExt");}if(_ae7&&_ae6&&_ae8){if(_ae8=="03"||_ae8=="06"){_af5=_af5+m.getLocalization("invalidSWIFTTransactionValidValuesWithExt");}else{_af5=_af5+m.getLocalization("invalidSWIFTTransactionValidValuesWithExtBank");}}m._config.onSubmitErrorMsg=_af5;return false;}else{if(_ae5){_ad9();m._config.onSubmitErrorMsg=m.getLocalization("invalidSWIFTAddressFieldErrorForTrade");return false;}else{if(_ae3){_ad9();m._config.onSubmitErrorMsg=m.getLocalization("invalidSWIFTFirstCharErrorMsg");return false;}}}}}}}}return true;};function _af6(node){var _af7=dj.byId(node);if(_af7.get("value").length>35){return false;}return true;};function _af8(node){var _af9=dj.byId(node);if(/SimpleTextarea/.test(_af9.declaredClass)){var _afa=1,_afb=_af9.get("value");return d.every(_afb,function(c){if(c==="\n"){return (++_afa<=_a87);}return true;});}return true;};function _af4(node){if(!m._config.swift2018Enabled){return false;}var _afc=dj.byId("product_code");var _afd="";if(_afc){_afd=_afc.get("value");}var _afe=["narrative_documents_required","narrative_description_goods","narrative_additional_instructions","narrative_full_details","narrative_charges","narrative_special_beneficiary","narrative_special_recvbank","narrative_sender_to_receiver","narrative_amend_charges_other","free_format_text","narrative_transfer_conditions","line_item_product_name"];if((_afd==="LC"&&new RegExp(_afe.join("|")).test(node.id))||(_afd==="EL"&&new RegExp(_afe.join("|")).test(node.id))||(_afd==="SI"&&new RegExp(_afe.join("|")).test(node.id))||(_afd==="SR"&&new RegExp(_afe.join("|")).test(node.id))){return true;}else{return false;}};function _aff(node){var _b00=dj.byId(node),_b01=_b00.get("value");if(_b00.datePackage&&_b00.datePackage==="dojo.date"){_b01=_b00.get("displayedValue");}if(_b01===null||_b01===""){return true;}var _b02=true;try{var _b03=dj.byId("swiftregexValue")?dj.byId("swiftregexValue").get("value"):"";if(m._config.swift2018Enabled&&_af4(node)){_b03=dj.byId("swiftregexzcharValue")?dj.byId("swiftregexzcharValue").get("value"):"";}var _b04=_b01;var _b05=new RegExp(_b03);_b02=_b05.test(_b04);}catch(err){return _b02;}return _b02;};function _b06(node){var _b07=dj.byId(node),_b08=_b07.get("value");if(_b08===null||_b08===""){return true;}if(_b08.indexOf("\n:")!=-1||_b08.indexOf("\n-")!=-1){return false;}return true;};function _b09(_b0a,_b0b){if(d.isArray(_b0a)){if(/CheckBox/.test(_b0b)){if(_b0a.length===1&&_b0a[0]==="on"){return "Y";}return "N";}}if(_b0a===null||_b0a===""||((_b0a+"")==="NaN")){return "";}if(/Date/.test(_b0b)){return d.date.locale.format(_b0a,{selector:"date",datePattern:misys.getLocalization("g_strGlobalDateFormat")});}if(/Time/.test(_b0b)){return d.date.locale.format(_b0a,{datePattern:"dd/MM/yyyy",timePattern:"HH:mm:ss"});}return dojo.isString(_b0a)?dojox.html.entities.encode(_b0a,dojox.html.entities.html):_b0a;};function _aca(){var _b0c=dj.byId("attIds");var _b0d=dj.byId("fileActIds");if(_b0c){var _b0e=[];var _b0f=[];if(d.query("table[id^="+_a84+"]").length>0){d.query("table[id^="+_a84+"] tr[id^='file_row_']]").forEach(function(node,i){var _b10=node.id;if(i!==0){_b0e.push("|");}_b0e.push(_b10.substring(_b10.indexOf("row_")+4,_b10.length));});}else{var _b11=[dj.byId(_a80),dj.byId(_a85),dj.byId(_a81),dj.byId(_a82),dj.byId(_a83)];var _b12=false;d.forEach(_b11,function(_b13){if(_b13&&_b13.grid){var arr=_b13.grid.store._arrayOfAllItems;d.forEach(arr,function(_b14,i){if(_b14&&_b14!=null){if(_b12){_b0e.push("|");}else{_b12=true;}_b0e.push(_b14.attachment_id);}});}});var _b15=dj.byId(_a80);if(_b0d&&_b15&&_b15.grid&&_b15.grid.selection){_b12=false;d.forEach(_b15.grid.selection.getSelected(),function(node,_b16){if(node&&node!=null){if(_b12){_b0f.push("|");}else{_b12=true;}_b0f.push(node.attachment_id);}});_b0d.set("value",_b0f.join(""));}}_b0c.set("value",_b0e.join(""));}};function _ad9(_b17){d.query(_a8c,_b17).forEach(function(_b18){var _b19=dj.byId(_b18.getAttribute("widgetid"));if(_b19){d.forEach(_b19.getChildren(),function(tab){d.some(tab.getChildren(),function(node){if(node.get("state")==="Error"){m.connect(node,"onChange",function(){_b1a(tab,node);});node.onChange();return true;}return false;});});}});};function _b1a(tab,_b1b){var _b1c=d.create("img",{"class":"errorIcon",src:m.getContextualURL(m._config.imagesSrc+m._config.imageStore.warningIcon),alt:m.getLocalization("tabErrorWarning"),title:m.getLocalization("tabErrorWarning")}),_b1d=m._config.requiredFieldPrefix||"*",_b1e=tab.get("title"),_b1f,_b20;if(_b1b.declaredClass){var _b21=_b1b.get("value");_b20={"isRequired":_b1b.get("required"),"isNonEmpty":_b21!==null&&_b21!=="","isInError":_b1b.get("state")==="Error"};}else{_b20=_b1b;}if(_b20.isRequired&&(_b1e.indexOf(_b1d)===-1)){_b1d+=" ";_b1e=_b1d+_b1e;}if(_b20.isInError&&_b1e.indexOf("<img")===-1){_b1f=d.create("div");_b1f.innerHTML=_b1e;if(!(dojo.isIE&&dojo.isIE===6)){d.place(_b1c,_b1f);}_b1e=_b1f.innerHTML;}if(!_b20.isInError&&_b1e.indexOf("<img")!==-1){_b1e=_b1e.substr(0,_b1e.indexOf("<img"));}if(_b20.isNonEmpty&&_b1e.indexOf(_a8b)===-1){_b1f=d.create("div");d.create("span",{"class":_a8b,innerHTML:_b1e},_b1f);_b1e=_b1f.innerHTML;}if(_b1e!==tab.get("title")){tab.set("title",_b1e);}};function _b22(_b23){var _b24=false,_b25=false,_b26=false,_b27,_b28;d.query(_a8c,_b23).forEach(function(_b29){var _b2a=dj.byId(_b29.getAttribute("widgetid"));if(_b2a){_b28=_b2a.get("id");d.forEach(_b2a.getChildren(),function(tab){_b24=false;_b25=false;_b26=false;_b27=tab.get("id");d.forEach(tab.getChildren(),function(node){var _b2b=node.get("value");if(!_b24&&node.get("required")){_b24=true;}if(!_b25&&(_b2b!==null&&_b2b!=="")){_b25=true;}if(!_b26&&node.get("state")==="Error"){_b26=true;}m.connect(node,"onChange",function(){_b1a(tab,{"isRequired":node.get("required"),"isNonEmpty":node.get("value")!==null&&node.get("value")!=="","isInError":false});});node.set("parentTab",_b27);node.set("tabContainer",_b28);});_b1a(tab,{"isRequired":_b24,"isNonEmpty":_b25,"isInError":_b26});});}});};function _b2c(){var _b2d,_b2e;d.query(_a89).forEach(function(_b2f){_b2d=dj.byId(dojo.attr(_b2f,"widgetid"))||dj.byId(dojo.attr(_b2f,"id"));if(_b2d){_b2e=_b2d.get(_a8a);if(_b2e){d.forEach(_b2e.split(" "),function(_b30){d.subscribe(_b30,_b2d,function(_b31){if(this.handleTopicEvent){this.handleTopicEvent(_b31,_b30);}});});}}});};function _b32(){if(d.byId(_a8e)){m.connect(_a8e,"onSubmit",function(e){var _b33=dj.byId(_a8f)?dj.byId(_a8f).get("value"):"screen";if(e&&_b33==="screen"){e.preventDefault();}d.forEach(dj.byId("TransactionSearchForm").getDescendants(),function(fld){if(fld.state==="Incomplete"&&fld.required===true){fld._hasBeenBlurred=true;fld.validate(false);}});if(this.isValid()){if(_b33!=="screen"){if(_b33==="pdf"){dj.byId(_a90).set("value","AccountStatement."+_b33);}else{dj.byId(_a90).set("value","inquiry."+_b33);}return true;}else{m.grid.reloadForSearchTerms();m.reloadChartImg();return false;}}else{if(dojo.byId("hugeDiv")){dojo.byId("hugeDiv").style.display="none";}return true;}});}};function _b34(){d.query(_a8d).forEach(function(grid){var _b35;var _b36=dj.byId(grid.id);if(_b36){if(d.hasClass(grid,"ischarted")){m.grid.toggleAllGroups(_b36,false);}if(!window.isTopElementToBeFocussed){_b36.resize();}}});};function _b37(){var _b38=d.byId(_a91),_b39;if(_b38){d.parser.parse(_b38);_b39=dj.byId("collaborationWindow");_b39.placeAt(dojo.body());if((!d.isIE||d.isIE>7)&&_b39.show){d.style(_b39.domNode,"opacity",0);_b39.show();}else{d.style(_b39.domNode,"opacity",1);}}};function _b3a(){var _b3b=/ValidationTextBox/;if(!m._config.disableFocusTrap){d.query(".widgetContainer *[id].dijitTextBox:not(.dijitReadOnly):not(.nofocusonerror)").forEach(function(_b3c){var _b3d=dj.byId(_b3c.getAttribute("widgetid"));if(_b3b.test(_b3d.get("declaredClass"))&&!_b3d.focusonerror){}else{m.connect(_b3d,"onBlur",_b3e);}});}};function _b3e(){var _b3f=this.get("value")+"";if(this.state==="Error"&&(!m._config.fieldInError||m._config.fieldInError===this.id)&&((typeof _b3f==="undefined")||(_b3f!==""&&_b3f!=="null"&&_b3f!=="NaN")||(/Select/.test(this.declaredClass)&&this.get("displayedValue")!==""&&!this.item))){m._config.fieldInError=this.id;var that=this;m.dialog.show("ERROR",m.getLocalization("focusOnErrorAlert"),"",function(){that.focus();});}else{if(misys._config.fieldInError===this.id){delete misys._config.fieldInError;}}};function _b40(_b41,init){_b41.forEach(function(_b42){var _b43=_b42.parentNode.offsetWidth;if(_b43!==0){_a9c=_b43;}if(init){d.attr(_b42,"width",_a9c);d.attr(_b42,"height",_a95);}else{d.attr(_b42,"src",d.attr(_b42,"alt")+"&chartwidth="+_a9c);}});};function _b44(url,key,_b45){key=encodeURI(key);_b45=encodeURI(_b45);var _b46;if(url.indexOf("?")===-1){_b46=url+"?"+key+"="+_b45;}else{var _b47=url.split("?")[0];var _b48=url.split("?")[1].split("&");var i=_b48.length;var x;while(i--){x=_b48[i].split("=");if(x[0]==key){x[1]=_b45;_b48[i]=x.join("=");break;}}if(i<0){_b48[_b48.length]=[key,_b45].join("=");}_b46=_b47+"?"+_b48.join("&");}return _b46;};function _b49(_b4a){_b4a.forEach(function(_b4b){var grid=dj.byId(_b4b.id);if(grid){if(!window.isTopElementToBeFocussed||!window.isToPreventTableHeaderFocusAlways){grid.resize();}grid.update();}});};function _b4c(url,name,_b4d){var _b4e=name||misys.getLocalization("transactionPopupWindowTitle"),_b4f=_b4d||"width=800,height=500,resizable=yes,scrollbars=yes",_b50=d.global.open(url,_b4e,_b4f);if(!_b50.opener){_b50.opener=self;}_b50.focus();};function _b51(node){var _b52=dj.byId(node),_b53=_b52.get("value"),_b54=true;var _b55;if(dj.byId("sub_product_code")){_b55=dj.byId("sub_product_code").get("value");}else{_b55="*";}if(_b53!==""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/ValidateTemplateId"),handleAs:"text",content:{productcode:m._config.productCode,templateid:_b53,companyid:dj.byId("company_id").get("value"),subproductcode:_b55},sync:true,load:function(_b56,_b57){_b54=(_b56.toLowerCase()==="true");},customError:function(_b58,_b59){console.error("[misys.common] _isUniqueTemplateId error",_b58,_b59);_b54=false;}});}return _b54;};function _b5a(){if(d.query(".cancelButton").length>0||d.query(".cancelBkButton").length>0){d.query(".saveButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("SAVE");});});d.query(".systemSaveButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("SYSTEM_SUBMIT");});});d.query(".saveTemplateButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("SAVE_TEMPLATE");});});d.query(".submitButton").forEach(function(btn){var _b5b=dj.byId("transaction_confirmation_details");var _b5c=function(){if(m.commonclient&&m.commonclient.submit){m.commonclient.submit("SUBMIT");}else{m.submit("SUBMIT");}};if(_b5b&&_b5b.get("value")==="Y"){_b5c=function(){window.onbeforeunload=null;m.beforeSubmit();_a9d("SUBMIT");};}m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",_b5c);});d.query(".validateButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("VALIDATE");});});d.query(".forwardButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("FORWARD");});});d.query(".rejectButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("REJECT");});});d.query(".returnTransactionButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("RETURN_TRANSACTION");});});d.query(".cancelButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("CANCEL");});});d.query(".cancelBkButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("CANCEL_BULK_TRANSACTION");});});d.query(".helpButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("HELP");});});d.query(".resubmitButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("RESUBMIT");});});d.query(".submitBulkButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("SUBMITBULK");});});}if(d.query(".cancelBulkButton").length>0){dj.byId("realform").set("action",m.getServletURL("/screen/BulkScreen"));d.query(".addBulkButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("ADD_BULK");});});d.query(".updateBulkButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("UPDATE_BULK");});});d.query(".saveTemplateBulkButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("SAVE_TEMPLATE_BULK");});});d.query(".cancelBulkButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("CANCEL_BULK");});});d.query(".helpButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.submit("HELP");});});}d.query("#toc").delegate("a","onclick",function(evt){if(this.id==="toggleTocLink"){m.toggleTOC();return;}if(this.id&&this.id.indexOf("_")!==-1){var _b5d=this.id.substr(this.id.indexOf("_")+1),_b5e=d.byId(_b5d),_b5f=d.byId("transactionDetails"),fnc=function(){if(d.isIE<=6){d.window.scrollIntoView(_b5e);}else{dojox.fx.smoothScroll({node:_b5e,win:window}).play();}};if(_b5f&&d.isDescendant(_b5e,_b5f)&&(d.style(_b5f,"display")==="none"||d.style(_b5f,"position")==="absolute")){m.toggleTransaction(true,false,fnc);}else{fnc();}}});d.query("#errorSection").delegate("a","onclick",function(evt){if(this.id==="errorLink"){m.toggleErrorSection();return;}});if(dj.byId("editTransactionDetails")){m.connect("editTransactionDetails","onclick",function(){m.toggleTransaction(true,true);});}if(dj.byId("hideTransactionDetails")){m.connect("hideTransactionDetails","onclick",function(){m.toggleTransaction(false);});}};function _b60(){d.query(".savePopupButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.dialog.submit("SUBMIT");});});d.query(".cancelPopupButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.dialog.submit("CANCEL");});});d.query(".helpPopupButton").forEach(function(btn){m.connect(dj.byId(d.attr(btn,"widgetid")),"onClick",function(){m.dialog.submit("HELP");});});};function _b61(){if(m.unloadListener){window.onbeforeunload=m.unloadListener;}dojo.forEach(m.excludedMethods,function(item,idx){dojox.lang.aspect.advise(item.object,item.method,{before:function(){m.isSystemButtonClicked=true;window.onbeforeunload=null;}});});if(dijit.byId(attachmntFile)){dojox.lang.aspect.advise(dijit.byId(attachmntFile).grid.store,["onSet","onNew","onDelete"],{after:function(){m.isFormDirty=true;}});}dojox.lang.aspect.advise(m.dialog,"show",{before:function(){window.onbeforeunload=null;}});dojox.lang.aspect.advise(m,["addTransactionAddon","deleteTransactionAddon","editTransactionAddon"],{after:function(){m.isFormDirty=true;}});d.query("#fakeform0, #fakeform1").forEach(function(node){var form=dj.byId(node.id);d.forEach(form.getDescendants(),function(_b62){m.connect(_b62,"onChange",m.markFormDirty);});});d.query("#fakeform0 a, #fakeform1 a, #fakeform0 img[onclick], #fakeform1 img[onclick]").forEach(function(node){dojox.lang.aspect.advise(node,"onclick",{before:function(){m.isSystemButtonClicked=true;window.onbeforeunload=null;setTimeout(function(){window.onbeforeunload=m.unloadListener;},50);}});});dojox.lang.aspect.advise(misys,"downloadFile",{before:function(){m.isSystemButtonClicked=true;window.onbeforeunload=null;setTimeout(function(){window.onbeforeunload=m.unloadListener;},50);}});dojo.query(".header a, .footer a, .portalMenuItem *").forEach(function(node,idx){m.connect(node,"onClick",function(_b63){if(m.isPopupRequired()){var evt=_b63;var _b64=_b6e(evt);if(_b64!==""){dojo.stopEvent(evt);m.showUnsavedDataDialog();}var _b65=dojo.connect(m,"setUnsavedDataOption",function(){if(m.unsavedDataOption!=="notset"){var _b66="";if(m.unsavedDataOption==="save"){m.saveAsync(_b64);}else{if(_b64!==""&&_b66===""&&m.unsavedDataOption==="nosave"){location.href=_b64;}}}dojo.disconnect(_b65);});}});});var _b67=dj.byId("menu_tree");if(_b67){d.connect(_b67,"onOpen",function(item,node,_b68){d.forEach(dojo.query("#"+node.id+" span.dijitTreeLabel"),function(_b69,idx){m.connect(_b69,"onClick",function(_b6a){if(m.isPopupRequired()){var evt=_b6a;var _b6b=_b6e(evt);if(_b6b!==""){dojo.stopEvent(evt);m.showUnsavedDataDialog();}var _b6c=dojo.connect(m,"setUnsavedDataOption",function(){if(m.unsavedDataOption!=="notset"){var _b6d="";if(m.unsavedDataOption==="save"){m.saveAsync(_b6b);}else{if(_b6b!==""&&_b6d===""&&m.unsavedDataOption==="nosave"){location.href=_b6b;}}}dojo.disconnect(_b6c);});}});});});}};function _b6e(evt){var _b6f=evt.target;var _b70="";if(_b6f.nodeName==="IMG"&&_b6f.parentNode.nodeName==="A"){if(_b6f.parentNode.href){_b70=_b6f.parentNode.href;}}else{if(_b6f.href){_b70=_b6f.href;}else{if(dojo.hasClass(_b6f,"dijitTreeLabel")){var _b71=dijit.byId("menu_tree");var _b72=_b71.attr("path");var _b73=dojo.filter(_b72,function(_b74){return _b74.hasOwnProperty("url");});if(_b73.length===1&&_b73[0].url){_b70=_b73[0].url;}}}}return _b70;};function _b75(){var _b76="";var path=misys._config.homeUrl;if(misys._config.homeUrl.indexOf("?")!=-1){path=misys._config.homeUrl.split("?")[0];}_b76=path.substr(path.lastIndexOf("/")+1);return _b76;};function _b77(_b78){var _b79=["LC","BG","EC","EL","IC","BR","TF","SG","SI","SR","IR","FT","BK","SE","LN","TD","LI"];if(_b79.indexOf(_b78)!==-1){if(_b78==="FT"||_b78==="BK"){return m.formToXML({ignoreDisabled:true});}return m.formToXML();}else{return "";}};d.mixin(m,{performReauthentication:function(){var _b7a=dj.byId("reauth_perform");if(_b7a&&_b7a.get("value")==="Y"){var _b7b={};if(d.isFunction(m._config.initReAuthParams)){_b7b=m._config.initReAuthParams();m.checkAndShowReAuthDialog(_b7b);}else{m.setContentInReAuthDialog("ERROR","");dj.byId("reauth_dialog").show();}}else{if(m.isFormDirty&&m.isFormDirty===true){m.isFormDirty=false;}dj.byId("TransactionData").set("value",m.formToXML());dj.byId(_a7e).submit();}},submitCommon:function(type){_a9d(type);},validateFormsCommon:function(){return _ad2(true);},openPopupCommon:function(url,name,_b7c){_b4c(url,name,_b7c);},setContentInReAuthDialog:function(_b7d,_b7e){var _b7f;switch(_b7d){case "01":if(d.isFunction(m._config.nonReauthSubmit)){m._config.nonReauthSubmit();}else{if(dj.byId("TransactionData")){dj.byId("TransactionData").set("value",m.formToXML());}dj.byId(_a7e).submit();}break;case "ERROR":if(d.byId("reauth_dialog_content")){_b7f=dj.findWidgets(d.byId("reauth_dialog_content"));d.forEach(_b7f,function(w){w.destroyRecursive(false);});d.empty("reauth_dialog_content");}d.byId("reauth_dialog_content").innerHTML=m.getLocalization("technicalErrorReauth");d.parser.parse("reauth_dialog_content");dj.byId("reauth_password").set("required",false);m.animate("wipeOut",d.byId("reauth_otp_response_sb"));m.toggleClassInlineBlock("reauth_sb",false);break;case "EXCHANGE_RATE_ERROR":if(d.byId("reauth_dialog_content")){_b7f=dj.findWidgets(d.byId("reauth_dialog_content"));d.forEach(_b7f,function(w){w.destroyRecursive(false);});d.empty("reauth_dialog_content");}d.byId("reauth_dialog_content").innerHTML=m.getLocalization("technicalErrorExchangeRate");d.parser.parse("reauth_dialog_content");dj.byId("reauth_password").set("required",false);m.animate("wipeOut",d.byId("reauth_otp_response_sb"));m.toggleClassInlineBlock("reauth_dialog_password",false);m.toggleClassInlineBlock("reauth_sb",false);break;default:if(d.byId("reauth_dialog_content")){_b7f=dj.findWidgets(dojo.byId("reauth_dialog_content"));d.forEach(_b7f,function(w){w.destroyRecursive(false);});d.empty("reauth_dialog_content");}d.byId("reauth_dialog_content").innerHTML=_b7d;d.parser.parse("reauth_dialog_content");m.toggleClassInlineBlock("reauth_sb",true);break;}},checkAndShowReAuthDialog:function(_b80){if(misys.commonclient&&misys.commonclient.checkAndShowReAuthDialog){misys.commonclient.checkAndShowReAuthDialog(_b80);return;}m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/ReAuthenticationAjax"),handleAs:"text",sync:true,preventCache:true,content:{productCode:_b80.productCode,subProductCode:_b80.subProductCode,transactionTypeCode:_b80.transactionTypeCode,subTransactionTypeCode:(_b80.subTransactionTypeCode)?_b80.subTransactionTypeCode:"",entity:(_b80.entity)?_b80.entity:"",currency:(_b80.currency)?_b80.currency:"",amount:(_b80.amount)?_b80.amount:"",tnxAmt:(_b80.tnxAmt)?_b80.tnxAmt:"",bank_abbv_name:(_b80.bankAbbvName)?_b80.bankAbbvName:"",xml:_b77(_b80.productCode),mode:dj.byId("mode")?dj.byId("mode").get("value"):"",operation:dj.byId("realform_operation")?dj.byId("realform_operation").get("value"):"",option:_b80.option?_b80.option:""},load:function(_b81,_b82){if(!(_b81.indexOf("SC_UNAUTHORIZED")===-1)){misys.showSessionOverDialog();}else{m.setContentInReAuthDialog(_b81,_b82);if(""+_b81+""!="01"){dj.byId("reauth_dialog").show();}}},customError:function(_b83,_b84){console.error(_b83);m.setContentInReAuthDialog("ERROR",_b84);dj.byId("reauth_dialog").show();}});},getQueryParameterByName:function(name,url){name=name.replace(/[\[\]]/g,"\\$&");var _b85=new RegExp("[?&]"+name+"(=([^&#]*)|&|#|$)"),_b86=_b85.exec(url);if(!_b86){return null;}if(!_b86[2]){return "";}return decodeURIComponent(_b86[2].replace(/\+/g," "));},isAngularProductUrl:function(_b87,_b88){if(!_b88||_b88==="null"||_b88===""){var ret=misys._config.angularProducts&&misys._config.angularProducts.indexOf(_b87)>-1;var _b89=misys._config.restrictedangularscreen.replace(/[\[\]']+/g,"").split(", ");var _b8a=false;for(var i=0;i<_b89.length;i++){if(window.location.href.indexOf(_b89[i])>-1){_b8a=true;}}if(ret&&_b87&&_b87!==""&&misys._config.restrictedangularproductcode.indexOf(_b87)>-1&&((_b8a)||(window.location.href.indexOf("MessageCenterScreen")>-1)||(window.location.href.indexOf("classicUXHome")>-1))){ret=false;}return ret;}else{return misys._config.angularSubProducts&&misys._config.angularProducts&&misys._config.angularProducts.indexOf(_b87)>-1&&m.isSubProductCodeValidForAngularUrl(misys._config.angularSubProducts,_b88);}},isSubProductCodeValidForAngularUrl:function contains(_b8b,_b8c){var _b8d=_b8b.replace("[","").replace("]","");var _b8e=_b8d.split(", ");if(_b8e.includes(_b8c)){return true;}return false;},setTnxConfirmationDetailsInDialog:function(_b8f,_b90){switch(_b8f){case "ERROR":undefined;m.dialog.show("ERROR",m.getLocalization("technicalErrorTnxConfirmationDetails"));break;default:undefined;var _b91=function(){m.performReauthentication();};var _b92=function(){var _b93=dj.byId("realform_operation");_b93.set("value","");m.dialog.hide();};m.dialog.show("CONFIRMATION",_b8f,"",null,null,"",_b91,_b92,null);break;}},checkAndShowTnxConfirmationDetailsDialog:function(){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/TransactionConfirmationDetailsAction"),handleAs:"text",sync:true,preventCache:true,content:{transactionData:m.formToXML()},load:function(_b94,_b95){if(!(_b94.indexOf("SC_UNAUTHORIZED")===-1)){misys.showSessionOverDialog();}else{m.setTnxConfirmationDetailsInDialog(_b94,_b95);}},customError:function(_b96,_b97){console.error(_b96);m.setTnxConfirmationDetailsInDialog("ERROR",_b97);}});},angularMenuReSize:function(){var _b98=document.querySelector(".ui-menubar-root-list").offsetHeight;var _b99=document.querySelector(".colmask");if(_b99&&_b99!=="undefined"){if(_b98>=42){_b99.style.top="80px";}}},_setupFocus:function(_b9a){m.hideCollabWindow();if(_b9a){m.setAccessibilityFlags();}if(window.isTopElementToBeFocussed){m.focusTopElement();}if(window.isTopElementToBeFocussed&&_b9a){setTimeout(function(){window.isTopElementToBeFocussed=false;},window.topElementFocusTimeout);}},hideCollabWindow:function(){if(!window.isFloatingFormSummaryMenuEnabled){if(dojo.query(colbortionWindow)&&dojo.query(colbortionWindow)[0]!=undefined){dojo.style(dojo.query(colbortionWindow)[0],"display","none");}if(dojo.query("#toc")&&dojo.query("#toc")[0]!=undefined){dojo.style(dojo.query("#toc")[0],"display","none");}}},skipToMenuLink:function(){if(!dojo.byId("portalMenuBar")){dojo.style(dojo.byId("skipToMenu"),"display","none");}else{dojo.style(dojo.byId("skipToMenu"),"display","inline");}},skipToContentLink:function(){if(!dojo.byId("GTPRootPortlet")){var _b9b=dojo.query(".portlet-title")[0];var _b9c=dojo.attr(_b9b,"id");if(_b9c){dojo.attr(dojo.byId("skipToContent"),"href","#"+_b9c);dojo.style(dojo.byId("skipToContent"),"display","block");}else{dojo.style(dojo.byId("skipToContent"),"display","none");}}},setAccessibilityFlags:function(){dojo.query("label").forEach(function(_b9d){try{if(dojo.hasAttr(_b9d,"for")&&dojo.attr(_b9d,"for")===""){dojo.removeAttr(_b9d,"for");}}catch(exe){}});var _b9e=["validateButton","validateButton2","saveButton","saveButton2","submitButton","submitButton2","forwardButton","forwardButton2","rejectButton","rejectButton2","returnTransactionButton","returnTransactionButton2","templateButton","templateButton2","menuCancelButton","cancelButton2","helpButton","helpButton2","previewButton","previewButton2","submitBulkButton","submitBulkButton2","addBulkButton","addBulkButton2","updateBulkButton","updateBulkButton2","templateBulkButton","templateBulkButton2","cancelBulkButton","cancelBulkButton2","helpButton","helpButton2","uploadFormButton","uploadFormButton2","resubmitButton","resubmitButton2","sySubmitButton"];dojo.forEach(_b9e,function(_b9f,i){if(dojo.query("#"+_b9f)[0]){dojo.attr(dojo.query("#"+_b9f)[0],ariaDescrib,"mainScreenHeadingText");}});if(dojo.query(langMenu)&&dojo.query(langMenu)[0]!==undefined){dojo.attr(dojo.query(langMenu)[0],"role","menu");dojo.attr(dojo.query(langMenu)[0],ariaDescrib,"language-menu-instructions");}if(dojo.query(bookmrkMenu)&&dojo.query(bookmrkMenu)[0]!==undefined){dojo.attr(dojo.query(bookmrkMenu)[0],ariaDescrib,"bookmark-menu-instructions");dojo.attr(dojo.query(langMenu)[0],"role","listbox");}dojo.query("#bookmarkToolTipDialog .bookmark").forEach(function(_ba0){var _ba1=dojo.query("a",_ba0)[0];var _ba2=dojo.query("a",_ba0)[1];var _ba3=dojo.attr(dojo.query("img",_ba2)[0],"title")+" "+dojo.attr(_ba1,"innerHTML")+" "+misys.getLocalization("bookmark");dojo.style(_ba2,"display","inline");dojo.attr(_ba2,"aria-label",_ba3);});dojo.query(".dojoxGridHeader table.dojoxGridRowTable").forEach(function(_ba4){try{dojo.attr(dojo.query("tbody>tr>th",_ba4)[0],ariaDescrib,"table-head-instructions");}catch(exc){}});dojo.query(".dojoxGridContent ").forEach(function(_ba5){try{if(dojo.query("div>div.dojoxGridRow>table>tbody>tr>td",_ba5)[0]){dojo.attr(dojo.query("div>div.dojoxGridRow>table>tbody>tr>td",_ba5)[0],ariaDescrib,"table-body-instructions");}}catch(exc){}});if(dojo.query(popuMenuItem)&&dojo.query(popuMenuItem)[0]!=undefined){try{dojo.attr(dojo.query(popuMenuItem)[0],ariaDescrib,"top-menu-instructions");}catch(exc){}}dojo.query(".collapsingImgSpan, .collapsingImgSpanLeftSide").forEach(function(_ba6){var _ba7="toggle-box-inst";if(dojo.attr(_ba6,"onclick")==="javascript:misys.toggleSearchGrid();"){if(dojo.query(scrhCrieteria)&&dojo.query(scrhCrieteria)[0]!==undefined){var _ba8;var _ba9=dojo.query(scrhCrieteria)[0];if(dojo.attr(_ba9,"id")){_ba8=dojo.attr(_ba9,"id");}else{dojo.attr(_ba9,"id","searchHelpText");_ba8=dojo.attr(_ba9,"id");}_ba7=_ba7+" "+_ba8;}}dojo.attr(_ba6,ariaDescrib,_ba7);});dojo.query("#GTPRootPortlet img, #GTPRootPortlet a, #GTPRootPortlet button, #GTPRootPortlet span, #GTPRootPortlet div ").forEach(function(_baa){try{var _bab="";if(dojo.attr(_baa,"onClick")){_bab=dojo.attr(_baa,"onClick");}else{if(dojo.attr(_baa,"href")){_bab=dojo.attr(_baa,"href");}}if(_bab&&_bab.length>0){if(_bab.indexOf("misys.showSearchDialog")!==-1||_bab.indexOf("misys.popup.showReporting")!==-1||_bab.indexOf("misys.popup.showPreview")!==-1||_bab.indexOf("misys.showBankTypeDialog")!==-1||_bab.indexOf("misys.showSearchUserAccountsDialog")!==-1||_bab.indexOf("misys.showEntityDialog")!==-1){dojo.attr(_baa,ariaDescrib,"dialog-link-inst");}}else{var _bac="";if(dojo.attr(_baa,"src")){_bac=dojo.attr(_baa,"src");if(_bac.indexOf("open_dialog.png")!==-1||_bac.indexOf("search.png")!==-1){var _bad=_baa.parentNode;if(dojo.attr(_bad,"dojoattachpoint")&&(dojo.attr(_bad,"dojoattachpoint")==="containerNode")&&!(dojo.attr(_bad,"onClick"))){_bad=_bad.parentNode;}dojo.attr(_bad,ariaDescrib,"dialog-link-inst");}}}}catch(exc){}});},focusTopElement:function(){var _bae="";var _baf;if(window.isTopElementFirstH1&&dojo.query(GTPRootPotlet)){try{dojo.query(GTPRootPotlet)[0].focus();_bae=dojo.attr(dojo.query(GTPRootPotlet)[0],"innerHTML");dojo.attr(dojo.query(GTPRootPotlet)[0],"id","mainScreenHeadingText");}catch(exc){if(dojo.query(h1portletTitle)&&dojo.query(h1portletTitle)[0]!==undefined){dojo.query(h1portletTitle)[0].focus();}else{if(dojo.query(h2portletTitle)&&dojo.query(h2portletTitle)[0]!==undefined){dojo.query(h2portletTitle)[0].focus();_baf=dojo.query(h2portletTitle)[0];}}}}else{if(dojo.byId("skipToMenu")){dojo.byId("skipToMenu").focus();}else{if(dojo.byId("helpDesk")){dojo.byId("helpDesk").focus();}else{if(dojo.byId("manageProfile")){dojo.byId("manageProfile").focus();}}}}if(_baf&&_baf!==undefined){dojo.attr(_baf,ariaDescrib,"welcome userId lastLoginSpanID");}},onLoad:function(){m.onBeforeLoad();var _bb0=function(elem,_bb1){if(!Element.prototype.matches){Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(s){var _bb2=(this.document||this.ownerDocument).querySelectorAll(s),i=_bb2.length;while(--i>=0&&_bb2.item(i)!==this){}return i>-1;};}for(;elem&&elem!==document;elem=elem.parentNode){if(elem.matches(_bb1)){return elem;}}return null;};function _bb3(n1,n2){var p1=n1.parentNode;var p2=n2.parentNode;var i1,i2;if(!p1||!p2||p1.isEqualNode(n2)||p2.isEqualNode(n1)){return;}for(var i=0;i<p1.children.length;i++){if(p1.children[i].isEqualNode(n1)){i1=i;}}for(i=0;i<p2.children.length;i++){if(p2.children[i].isEqualNode(n2)){i2=i;}}if(p1.isEqualNode(p2)&&i1<i2){i2++;}p1.insertBefore(n2,p1.children[i1]);p2.insertBefore(n1,p2.children[i2]);};window.onresize=function(){var _bb4=document.getElementsByClassName("dijitPopup dijitComboBoxMenuPopup");for(var i=0;i<_bb4.length;i++){_bb4[i].style.display="none";}};window.setTimeout(function(){if(dojo.byId("saveDashboard")){dojo.byId("saveDashboard").addEventListener("click",function(){var _bb5={"level1":[],"level2":[],"level3":[]};for(var i=0;i<d.query(homepagePortlet).length;i++){var obj={};var ele=d.query(homepagePortlet)[i];if(ele&&!_bb0(d.query(homepagePortlet)[i],".colmid")){if(ele&&_bb0(d.query(homepagePortlet)[i],".colLeft")){obj["position"]=ele.getAttribute("position");obj["id"]=ele.id;_bb5.level1.push(obj);}else{if(ele&&_bb0(d.query(homepagePortlet)[i],".colRight")){obj["position"]=ele.getAttribute("position");obj["id"]=ele.id;_bb5.level2.push(obj);}}}else{obj["position"]=ele.getAttribute("position");obj["id"]=ele.id;_bb5.level3.push(obj);}}document.getElementById("_dashboardpositions").value=JSON.stringify(_bb5);m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/UserPreferencesAction"),handleAs:"text",sync:true,preventCache:true,content:{portletPositions:document.getElementById("_dashboardpositions").value,PSML:document.getElementById("DashboardPSML").value,operation:"SAVE",themeColor:document.documentElement.style.getPropertyValue("--main-bg-color"),textColor:document.documentElement.style.getPropertyValue("--main-text-color"),fontType:document.documentElement.style.getPropertyValue("--main-font-family"),fontSize:document.documentElement.style.getPropertyValue("--main-font-size")},load:function(_bb6,_bb7){window.location.href=m.getServletURL("");},customError:function(_bb8,_bb9){console.error(_bb8);}});},false);}},100);var _bba=function(e){var _bbb=_bb0(e.target,".portlet");_bbb.style.display="none";};if(d.query(".delIcon")[0]){for(var i=0;i<d.query(".delIcon").length;i++){d.query(".delIcon")[i].addEventListener("click",_bba,true);}}if(dojo.byId("saveDashboard")&&d.query(homepagePortlet)[0]){for(i=0;i<d.query(homepagePortlet).length;i++){var dEle=d.query(homepagePortlet)[i];dEle.setAttribute("draggable","true");dEle.setAttribute("position",i);dEle.addEventListener("dragstart",function(e){e.dataTransfer.effectAllowed="copy";e.dataTransfer.setData("Text",this.id);});}if(d.query(".colContainer")[0]){var _bbc=d.query(".colContainer")[0];_bbc.addEventListener("dragover",function(e){if(e.preventDefault){e.preventDefault();}this.className="over";e.dataTransfer.dropEffect="copy";return false;});_bbc.addEventListener("dragenter",function(e){this.className="over";return false;});_bbc.addEventListener("dragleave",function(){this.className="";});_bbc.addEventListener("drop",function(e){if(e.stopPropagation){e.stopPropagation();}var _bbd=document.getElementById(e.dataTransfer.getData("Text"));var _bbe=_bb0(e.target,".homepage .portlet");var _bbf=_bbd.getAttribute("position");var _bc0=_bbe.getAttribute("position");_bb3(_bbd,_bbe);_bbd.setAttribute("position",_bc0);_bbe.setAttribute("position",_bbf);});}}if(dojo.query(".maincontent.homepage")&&dojo.query(".maincontent.homepage")[0]!==undefined){var _bc1=dojo.byId("CustomerOngoingTasksList")?true:false;var _bc2=dojo.byId("InternalNewsPortlet")?true:false;var _bc3=dojo.byId("OutstandingPerProductChartPortlet")?true:false;var _bc4=dojo.byId("TradeEventsGridPortlet")?true:false;var _bc5=dojo.byId("HomeAccountSummaryListPortlet")?true:false;var _bc6=dojo.byId("ActionRequiredPortlet")?true:false;var _bc7=dojo.byId("OpicsAccountListPortletPlusBalance")?true:false;if(!_bc1&&!_bc2&&!_bc3&&!_bc4&&!_bc5&&!_bc6&&!_bc7){if(dojo.byId("RatePortlet")){dojo.style("RatePortlet","width",10);dojo.style("RatePortlet","position","relative");dojo.style("RatePortlet","left","100%");}if(dojo.byId("ratesGrid")){dojo.style("ratesGrid","width",10);dojo.style("ratesGrid","position","relative");}}}var p1=function(){try{if(dojo.byId("footerMain")&&dojo.byId("footerHtml")){dojo.byId("footerHtml").style.cssText="display:none !important";}if(dojo.query(".homepage")&&window.dontShowRouter&&window.dontShowRouter===true){dojo.style(dojo.query(".colContainer")[0],"padding-top","70px");dojo.byId("layout").style.cssText="padding:0px 24px 0px 24px !important";if(dojo.query(".colMask")[0]){dojo.style(dojo.query(".colMask")[0],"position","static");}}}catch(err){}m._setupFocus(false);_b34();_b32();if(m._config.saveUnsavedData&&m._config.saveUnsavedData===true){_b61();}var _bc8=document.querySelector(".ui-menubar-root-list");if(_bc8&&_bc8!=="undefined"){m.angularMenuReSize();window.addEventListener("resize",m.angularMenuReSize());}},p2=function(){_b2c();_b22();_b3a();m.resizeCharts();_b37();_b5a();m._setupFocus(true);};return this._onLoad(p1,p2);},onBeforeLoad:function(){if(window.isAccessibilitySkiptoLinksEnabled){m.skipToMenuLink();m.skipToContentLink();}},submit:function(type){if(misys.commonclient&&misys.commonclient.submit){misys.commonclient.submit(type);}else{var _bc9=m.getLocalization("saveTransactionConfirmation"),_bca=function(){if(type==="SUBMITBULK"){m.submitBulk(_ad2);}else{m.beforeSubmit();_a9d(type);}};if(dj.byId("realform_operation")&&(dj.byId("realform_operation").get("_resetValue")!=="")){originalOperationValue=dj.byId("realform_operation").get("_resetValue");}switch(type){case "VALIDATE":_a9d(type);return;break;case "SUBMITBULK":case "SUBMIT":m.setCustomConfirmMessage();var _bcb=m._config.globalSubmitConfirmationMsg;var _bcc=misys._config.warningMessages?misys._config.warningMessages.length:0;if(_bcc>0){var i;var _bcd="<b><ol>";for(i=0;i<_bcc;i++){_bcd+=("<li>"+misys._config.warningMessages[i]+"</li>");}_bcd+="</ol></b>";_bcb=misys.getLocalization("submitTransactionConfirmationWithWarning",[_bcd]);}_bc9=(_bcb&&_bcb!=="")?_bcb:m.getLocalization("submitTransactionConfirmation");var eucp=dj.byId("eucp_flag");if(eucp&&!eucp.get("disabled")){_bc9=m.getLocalization("submitEUCPTransactionConfirmation");}break;case "SYSTEM_SUBMIT":var _bce=m.formApplicableWarningMsg();_bc9=_bce?_bce:_bc9;_bca=function(){_a9d(type);};break;case "SAVE_TEMPLATE":_bc9=m.getLocalization("saveTemplateConfirmation");_bca=function(){_a9d(type);};break;case "SAVE_REPORT_TEMPLATE":_bc9=m.getLocalization("saveTemplateConfirmation");_bca=function(){_a9d(type);};break;case "CANCEL":_bc9=m.getLocalization("cancelTransactionConfirmation");_bca=function(){_a9d(type);};break;case "CANCEL_BULK_TRANSACTION":_bc9=m.getLocalization("cancelTransactionConfirmation");_bca=function(){_a9d(type);};break;case "REJECT":_bc9=m.getLocalization("rejectTransactionConfirmation");_bca=function(){_a9d(type);};break;case "RETURN_TRANSACTION":_bc9=m.getLocalization("returnTransactionConfirmation");_bca=function(){_a9d(type);};break;case "HELP":_b4c(m._config.onlineHelpUrl,m.getLocalization("onlineHelpWindowTitle"),"width=1000,height=700,resizable=yes,scrollbars=yes");return;break;case "APPROVE":_bc9=m.getLocalization("submitTransactionConfirmation");dj.byId("realform_operation").set("value","APPROVE_FEATURES");_bca=function(){_a9d(type);};break;case "DELETE":_bc9=m.getLocalization("deleteMCTransactionsConfirmation");dj.byId("realform_operation").set("value","APPROVE_FEATURES");_bca=function(){_a9d(type);};break;case "CHECKER_WARN_DELETE_ROLE_SUBMIT":var _bcf=dijit.byId("featureid").get("value");var _bd0=dijit.byId("roletype").get("value");var _bd1=false;m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckRoleMapping"),handleAs:"json",preventCache:true,sync:true,content:{role_name:_bcf,role_type:_bd0},load:function(_bd2,args){_bd1=_bd2.isRoleMapped;},error:function(_bd3,args){_bd1=false;console.error("Checking Role mapping  error ",_bd3);}});if(_bd1){_bc9=m.getLocalization("deleteMappedRoleConfirmation");}else{_bc9=m.getLocalization("deleteRoleConfirmation");}dj.byId("realform_operation").set("value","APPROVE_FEATURES");_bca=function(){_a9d(type);};break;case "REVERT":_bc9=m.getLocalization("revertMCTransactionsConfirmation");dj.byId("realform_operation").set("value","REVERT_FEATURES");_bca=function(){_a9d(type);};break;case "RETURN":_bc9=m.getLocalization("returnMCTransactionsConfirmation");dj.byId("realform_operation").set("value","RETURN_FEATURES");_bca=function(){_a9d(type);};break;case "DRAFT":dj.byId("realform_operation").set("value","DRAFT_FEATURES");_bca=function(){_a9d(type);};break;case "MAKER_SUBMIT":m.setCustomConfirmMessage();_bcb=m._config.globalSubmitConfirmationMsg;_bc9=m.getLocalization("submitTransactionConfirmation");_bc9=_bcb?_bcb:_bc9;_bca=function(){_a9d(type);};break;case "MAKER_BENE_SUBMIT":_bc9=m.getLocalization("submitTransactionConfirmationForMasterBeneficiary");_bca=function(){_a9d("MAKER_SUBMIT");};break;case "MAKER_BENE_FILE_UPLOAD_SUBMIT":_bc9=m.getLocalization("submitTransactionConfirmationForBeneficiaryFileUpload");_bca=function(){_a9d("MAKER_SUBMIT");};break;case "CHECKER_BENE_SUBMIT":_bc9=m.getLocalization("submitTransactionConfirmationForMasterBeneficiary");dj.byId("realform_operation").set("value","APPROVE_FEATURES");_bca=function(){_a9d("APPROVE");};break;case "CHECKER_BENE_FILE_UPLOAD_SUBMIT":_bc9=m.getLocalization("submitTransactionConfirmationForBeneficiaryFileUpload");dj.byId("realform_operation").set("value","APPROVE_FEATURES");_bca=function(){_a9d("APPROVE");};break;case "AUTO_FORWARD_SUBMIT":_bc9=m.getLocalization("submitAutoForwardTransactionConfirmation");_bca=function(){_a9d(type);};break;case "ADD_BULK":_bc9=m.getLocalization("addBulkConfirmation");_bca=function(){_a9d(type);};break;case "UPDATE_BULK":_bc9=m.getLocalization("updateBulkConfirmation");_bca=function(){_a9d("ADD_BULK");};break;case "CANCEL_BULK":_bc9=m.getLocalization("cancelBulkConfirmation");_bca=function(){_a9d(type);};break;case "SAVE_TEMPLATE_BULK":_bc9=m.getLocalization("saveTemplateBulkConfirmation");_bca=function(){_a9d(type);};break;case "RESUBMIT":_bc9=m.getLocalization("resubmitConfirmation");_bca=function(){_a9d(type);};break;default:break;}var _bd4=function(){if(originalOperationValue!==""){dj.byId("realform_operation").set("value",originalOperationValue);}if(m.unloadListener){window.onbeforeunload=m.unloadListener;}};m.dialog.show("CONFIRMATION",_bc9,"",_bca,"","","",_bd4);}},acceptLegalText:function(){_a9d("LEGAL_TEXT_SUBMIT");},submitBulkNoAutoForward:function(type){_a9d(type);},saveAsync:function(_bd5){var type;if(d.query("#draftButton").length>0){type="DRAFT";dj.byId("realform_operation").set("value","DRAFT_FEATURES");}else{type="SAVE";}var _bd6=_ac4(type);if(_bd6!==""){m.unsavedDataOption="notset";var _bd7=function(){dijit.byId("entity")?dijit.byId("entity").focus():null;};m.dialog.show("ERROR",_bd6,"",_bd7);}else{var _bd8=d.byId("realform");d.attr(_bd8,"action",m.getServletURL("/screen/AsyncScreen"));var _bd9={realscreen:_b75()};m.xhrPost({url:m.getServletURL("/screen/AsyncScreen")+"?"+d.objectToQuery(_bd9),preventCache:true,sync:true,form:_bd8,handleAs:"json",load:function(_bda,args){if(_bda.status==="success"){location.href=_bd5;m.isFormDirty=false;}else{if(_bda.status==="failure"){m.unsavedDataOption="notset";m.dialog.show("ERROR",m.getLocalization(_bda.message));}}},error:function(_bdb,args){console.error("Error during Save");m.dialog.show("ERROR",m.getLocalization("technicalError"));}});}},formToXML:function(init){var _bdc={selector:".validate",xmlRoot:m._config.xmlTagName,ignoreDisabled:false},xml=[];d.mixin(_bdc,init);if(_bdc.xmlRoot){xml=["<",_bdc.xmlRoot,">"];}if(!_bdc.ignoreDisabled){d.query(".dijitDisabled").forEach(function(w){var _bdd=dj.byId(d.attr(w,"widgetid"));if(_bdd){_bdd.set("disabled",false);}});}d.query(_bdc.selector).forEach(function(node){var form=dj.byId(node.id),_bde={},_bdf,_be0,_be1,_be2;d.forEach(form.getDescendants(),function(_be3){if(!_be3.name||_bde[_be3.name]){return;}_bde[_be3.name]=_be3;});_bdf=form.get("value");for(var name in _bdf){if(_bde.hasOwnProperty(name)){_be0=_bde[name];_be1=_be0.declaredClass;if(_be0.toXML){_be2=_be0.toXML();_be2=(!_be2)?"":_be2;}else{if(name==="org_narrative_description_goods"||name==="org_narrative_documents_required"||name==="org_narrative_additional_instructions"||name==="org_narrative_special_beneficiary"||name==="org_narrative_special_recvbank"){_be2=dojox.html.entities.decode(_be0.value,dojox.html.entities.map);}else{_be2=_b09(_bdf[name],_be1);}}if(_be0.xmlTagName){xml.push(_be2);}else{xml.push("<",name,">",_be2,"</",name,">");}}}});if(_bdc.xmlRoot){xml.push("</",_bdc.xmlRoot,">");}var _be4=false;if(dj.byId("xhrDialog")&&dj.byId("xhrDialog").open){_be4=true;}if(m._config.hasOwnProperty("xmlTransform")&&d.isFunction(m._config.xmlTransform)){if(m.e2ee_transaction&&m.e2ee_transaction.enabled===true&&!_be4){return m.e2ee_transaction.encryptData(m._config.xmlTransform(xml.join("")));}else{return m._config.xmlTransform(xml.join(""));}}if(m.e2ee_transaction&&m.e2ee_transaction.enabled===true&&!_be4){return m.e2ee_transaction.encryptData(xml.join(""));}else{return xml.join("");}},fieldToXML:function(node){var _be5=dj.byId(node),_be6=_be5.get("name"),tag=[];if(_be6){tag.push("<",_be6,">",d.trim(dojox.html.entities.encode(_be5.get("value"),dojox.html.entities.html)),"</",_be6,">");}return tag.join("");},getDomNode:function(dom,_be7){var _be8=dom.getElementsByTagName(_be7),xml=[],node;if(_be8.length>0){xml.push("<",_be7,">");node=_be8[0].childNodes[0];if(node&&node.nodeValue){xml.push(dojo.isString(node.nodeValue)?dojox.html.entities.encode(node.nodeValue,dojox.html.entities.html):node.nodeValue);}xml.push("</",_be7,">");}return xml.join("");},getDomValue:function(dom,_be9){var _bea=dom.getElementsByTagName(_be9),xml=[],node;if(_bea.length>0){node=_bea[0].childNodes[0];if(node&&node.nodeValue){xml.push(dojo.isString(node.nodeValue)?dojox.html.entities.encode(node.nodeValue,dojox.html.entities.html):node.nodeValue);}}return xml.join("");},toggleFields:function(_beb,_bec,_bed,_bee,_bef){var _bf0=m._config.requiredFieldPrefix||"*",_bf1=_bed,_bf2=0,_bf3=/Check/,_bf4=/Date/,_bf5=/Time/;if(_bec&&d.isArray(_bec)){if(_bed&&d.isArray(_bed)){_bf1=_bec.concat(_bed);}else{_bf1=_bec;}_bf2=_bec.length;}d.forEach(_bf1,function(id,i){var _bf6=dj.byId(id);if(_bf6){if(!_beb&&!_bee){var _bf7=_bf6.declaredClass;var _bf8="";if(_bf3.test(_bf7)){_bf8=false;}else{if(_bf4.test(_bf7)||(_bf5.test(_bf7))){_bf8=null;}}_bf6.set("value",_bf8);}if(_bef){_bf6.set("readOnly",false);_bf6.set("disabled",false);}else{_bf6.set("readOnly",!_beb);_bf6.set("disabled",!_beb);}if(i>=_bf2){_bf6.set("required",_beb);if(!_beb&&_bf6.validate){_bf6.validate(false);}var row=d.byId(id+"_row");if(row){var _bf9=d.query("label[for="+id+"]")[0];d.toggleClass(row,"required",_beb);var _bfa="";if(_beb){if(_bf9&&_bf9.innerHTML.indexOf(_bf0)===-1){if(!(_bf3.test(_bf7))){d.place(d.create("span",{"class":"required-field-symbol",innerHTML:_bf0}),_bf9,"first");}}}else{if(_bf9&&_bf9.innerHTML.indexOf(_bf0)!=-1){d.query("span",_bf9).orphan();}}}}}});},toggleRequired:function(node,_bfb){var _bfc=dj.byId(node);if(_bfc){_bfc.set("required",_bfb);var _bfd=d.query("#"+_bfc.id+"_row > label");_bfd.forEach(function(_bfe){d.query("span",_bfe).orphan();if(_bfb){d.create("span",{innerHTML:"*","class":"required-field-symbol"},_bfe,"first");}});}},setFieldState:function(node,_bff){node.state=(_bff)?"":"Error";node._setStateClass();dj.setWaiState(node.focusNode,"invalid",!_bff);},confirmDelete:function(_c00,args){if(_c00.indexOf("<")!==-1){_c00=_c00.replaceAll("<","&lt;");}if(_c00!==""){this.dialog.show("CONFIRMATION",this.getLocalization("deleteTransactionConfirmation",[_c00]),"",function(){m.post(args);});}else{this.dialog.show("CONFIRMATION",this.getLocalization("deleteTransactionConfirmationforEmptyTitle"),"",function(){m.post(args);});}},warnDeleteRole:function(_c01,args){if(_c01.indexOf("<")!==-1){_c01=_c01.replaceAll("<","&lt;");}if(_c01!==""){var _c02=false;var _c03=null;for(var arg=0;arg<args.params.length;arg++){var arr=args.params[arg].name;if(arr=="Role_Type"){_c03=args.params[arg].value;break;}}m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckRoleMapping"),handleAs:"json",preventCache:true,sync:true,content:{role_name:_c01,role_type:_c03},load:function(_c04,args){_c02=_c04.isRoleMapped;},error:function(_c05,args){_c02=false;console.error("Checking Role mapping  error ",_c05);}});if(_c02){this.dialog.show("CONFIRMATION",this.getLocalization("deleteMappedRoleConfirmation",[_c01]),"",function(){m.post(args);});}else{this.dialog.show("CONFIRMATION",this.getLocalization("deleteRoleConfirmation",[_c01]),"",function(){m.post(args);});}}else{this.dialog.show("CONFIRMATION",this.getLocalization("deleteTransactionConfirmationforEmptyTitle"),"",function(){m.post(args);});}},showTooltip:function(_c06,node,_c07,_c08){var _c09=d.byId(node);if(_c09){setTimeout(function(){dj.hideTooltip(_c09);},(_c08||_a93));return dj.showTooltip(_c06,_c09,_c07);}},toggleTransaction:function(show,_c0a,_c0b){var _c0c=d.byId("transactionDetails"),_c0d=d.byId("editTransactionDetails"),_c0e=d.byId("hideTransactionDetails"),_c0f=_c0b||function(){},_c10=dojo.fx.chain([]);if(d.style(_c0c,"position")==="absolute"){d.style(_c0c,"position","inherit");d.style(_c0c,"display","none");if(d.isIE!==6){d.style(_c0c,"left",0);}else{d.style(_c0c,"right","auto");}}if(show){var _c11=function(){if(_c0d){return m.animate("fadeOut",_c0d,function(){dojo.style(_c0c,"display","none");dojo.removeClass(_c0c,"offscreen");m.animate("wipeIn",_c0c,function(){m.animate("fadeIn",_c0e,_c0f);dojo.query(tabContainr).forEach(function(t){var tabc=dijit.byId(t.id);if(tabc.resize&&d.isFunction(tabc.resize)){tabc.resize();}});});});}else{return _c0f();}};if(_c0a){m.dialog.show("CONFIRMATION",m.getLocalization("editTransactionConfirmation"),null,_c11);}else{return _c11();}}else{return m.animate("wipeOut",_c0c,function(){dojo.addClass(_c0c,"offscreen");m.animate("fadeOut",_c0e,function(){m.animate("fadeIn",_c0d,_c0f);});});}return _c10;},toggleAmdDetails:function(show,_c12,_c13){var _c14=d.byId("amdDetails"),_c15=d.byId("showAmdDetails"),_c16=d.byId("hideAmdDetails"),_c17=_c13||function(){},_c18=dojo.fx.chain([]);if(d.style(_c14,"position")==="absolute"){d.style(_c14,"position","inherit");d.style(_c14,"display","none");if(d.isIE!==6){d.style(_c14,"left",0);}else{d.style(_c14,"right","auto");}}if(show){var _c19=function(){if(_c15){return m.animate("fadeOut",_c15,function(){dojo.style(_c14,"display","none");dojo.removeClass(_c14,"offscreen");m.animate("wipeIn",_c14,function(){m.animate("fadeIn",_c16,_c17);dojo.query(tabContainr).forEach(function(t){var tabc=dijit.byId(t.id);if(tabc.resize&&d.isFunction(tabc.resize)){tabc.resize();}});});});}else{return _c17();}};if(_c12){m.dialog.show("CONFIRMATION",m.getLocalization("editTransactionConfirmation"),null,_c19);}else{return _c19();}}else{return m.animate("wipeOut",_c14,function(){dojo.addClass(_c14,"offscreen");m.animate("fadeOut",_c16,function(){m.animate("fadeIn",_c15,_c17);});});}return _c18;},createTOC:function(){var toc=d.byId("toccontent");if(toc){if(d.style(toc,"display")==="block"){m.toggleTOC();}var _c1a=0,_c1b=d.create("ul");d.query(_a92).forEach(function(_c1c){var _c1d=_c1c.id||"link"+_c1a++;_c1c.id=_c1d;var _c1e;try{var _c1f=_c1c.firstChild;if(_c1f){_c1e=_c1f.innerHTML;}}catch(err){console.error("[m.form.common] There was an error building the TOC!");console.error(err);}if(_c1e&&_c1e!==""){var li=d.create("li");var a=d.create("a",{href:"javascript:void(0)",id:"goto_"+_c1d,innerHTML:_c1e},li);d.place(li,_c1b);}});d.empty(toc);d.place(_c1b,toc);}},toggleTOC:function(_c20){var _c21=d.byId("toccontent");if(_c21){if(_c21.innerHTML===""){m.createTOC();}var _c22=d.byId("toggleTocLink"),_c23=d.byId("toc"),show=(d.style(_c21,"display")==="none"),_c24=(show)?d.style(d.byId("toc"),"width")+6:d.style(d.byId("toc"),"width")-6,_c25=(show)?0.9:1,_c26=(show)?"wipeIn":"wipeOut",_c27=(show)?m.getLocalization("hideFormSummaryMessage"):m.getLocalization("showFormSummaryMessage"),_c28=[],_c29=[];_c28.push(d.animateProperty({node:_c23,properties:{width:_c24}}));_c29=_c29.concat(m.animate(_c26,_c21,null,true)._animations);_c29.push(d.animateProperty({node:_c23,properties:{opacity:_c25}}));_c28=dojo.fx.chain(_c28.concat(_c29));d.connect(_c28,"onBegin",function(){setTimeout(function(){_c22.innerHTML=_c27;},500);});d.connect(_c28,"onEnd",function(){if(_c20&&d.isFunction(_c20)){_c20();}});return _c28.play();}},trim:function(str){var _c2a=str+"",_c2b=[];d.forEach(_c2a,function(c){if((c!=="\r")&&(c!=="\n")){_c2b.push(c);}});return d.trim(_c2b.join(""));},addMultiSelectItems:function(_c2c,_c2d){var _c2e=dijit.byId(_c2c),_c2f=dijit.byId(_c2d);_c2e.addSelected(_c2f);_c2f.focus();_c2e.focus();},insertAtCursor:function(_c30,text){var _c31=_c30.domNode,_c32=_c30.get("value");if(document.selection){_c30.focus();var sel=window.getSelection();sel.text=text;_c30.set("value",_c32+text);}else{if(_c31.selectionStart||_c31.selectionStart=="0"){_c30.set("value",_c32+text);}else{_c30.set("value",_c32+text);}}},resizeCharts:function(){var _c33=d.query(_a94);if(_c33.length>0){if(_a9a){clearTimeout(_a9a);}_a9a=setTimeout(function(){_b40(_c33);},_a98);}},resizeGrids:function(){var _c34=d.query(_a8d),_c35=(d.isIE<=6)?2000:200;if(_c34.length>0){if(_a99){clearTimeout(_a99);}_a99=setTimeout(function(){_b49(_c34);},_c35);}},getChartImageMap:function(url,_c36,_c37,_c38){m.xhrGet({url:m.getServletURL("/screen/AjaxScreen/action/"+url),handleAs:"text",contentType:"text/html; charset=utf-8",content:{getmap:"true",dealID:_c37,borrowerID:_c38},load:function(_c39){d.byId(_c36).innerHTML=_c39;}});},showChartDialog:function(id){var _c3a=d.create("img",{src:d.attr(d.byId(id),"alt")+"&chartwidth="+_a97+"&chartheight="+_a96,width:_a97,height:_a96,alt:"Chart"});if(!_a9b){_a9b=new misys.widget.Dialog({onLoad:function(){var that=this;setTimeout(function(){that.show();},dj.defaultDuration);}});}_a9b.set("width",_a97+50);_a9b.set("height",_a96+50);_a9b.set("content",_c3a);_a9b.show();},isVisible:function(node){if(!node){return false;}var p;if(node.domNode){node=node.domNode;}return (dojo.style(node,"display")!="none")&&(dojo.style(node,"visibility")!="hidden")&&(p=dojo.position(node),(p.y+p.h>=0)&&(p.x+p.w>=0)&&(p.h&&p.w));},beforeSubmitValidations:function(){return true;},beforeSaveValidations:function(){return true;},onCancelNavigation:function(){return m._config.homeUrl;},setCustomConfirmMessage:function(){},localizeDate:function(_c3b){var _c3c=_c3b.get("value");if(_c3b.get("type")==="hidden"){return d.date.locale.parse(_c3c,{selector:"date",datePattern:m.getLocalization("g_strGlobalDateFormat")});}return _c3c;},validateSearchStartEndDates:function(){var _c3d=dj.byId("dttm_begin"),end=dj.byId("dttm_end");if(end&&end.get("value")===null){return true;}if(_c3d&&end){if(!m.compareDateFields(_c3d,end)){this.invalidMessage=m.getLocalization("dateRangeValidityMessage");return false;}}return true;},compareDateFields:function(_c3e,_c3f){var _c40,_c41,_c42,_c43;if(_c3e&&_c3f){_c41=_c3e.get("value");_c40=_c3f.get("value");if(_c41&&_c40){_c42=m.localizeDate(_c3e);_c43=m.localizeDate(_c3f);if(d.date.compare(_c43,_c42)<0){return false;}}}return true;},confirmMCCancel:function(_c44,args){this.dialog.show("CONFIRMATION",this.getLocalization("cancelMCTransactionConfirmation",[_c44]),"",function(){m.post(args);});},trimAmount:function(_c45){var _c46=(""+_c45+"").replace(/[^\d.]/g,"");var _c47=_c46.indexOf(".");var _c48=_c46.length;var _c49=_c46;if(_c47!==-1){for(var v=_c48;v>_c47;v--){var n=_c46.charAt(v-1);if(n==="0"||n==="."){_c49=_c49.substring(0,v-1);}else{break;}}}return _c49;},exportListToFormat:function(_c4a){if(d.byId(_a8e)){dj.byId("export_list").set("value",_c4a);d.create("input",{type:"hidden",name:"searchFlag",value:"true"},TransactionSearchForm);dj.byId("TransactionSearchForm").submit();dj.byId("export_list").set("value","screen");}},exportListFormat:function(_c4b){if(d.byId(_a8e)){dj.byId("export_list").set("value",_c4b);var form=dj.byId("TransactionSearchForm");var _c4c=dj.byId("account_no");var _c4d=dj.byId("account_no").get("value");var _c4e=dj.byId("entity");var _c4f;if(dj.byId("operation")&&dj.byId("operation").get("value")==="LIST_BALANCES"){if(_c4e&&_c4e.get("value")===""){m.dialog.show("ERROR",m.getLocalization("entityNotSelectedError"));return;}}else{if(dj.byId("operation")&&dj.byId("operation").get("value")==="LIST_STATEMENTS"){if(_c4e&&_c4e.get("value")===""){m.dialog.show("ERROR",m.getLocalization("entityNotSelectedError"));dj.byId("export_list").set("value","");return;}if(_c4c.get("value")===""){m.dialog.show("ERROR","Please select an account.");dj.byId("export_list").set("value","");return;}}}if(dijit.byId("is_acc_mandatory")&&_c4d==""){m.dialog.show("ERROR",m.getLocalization("EmptyAccountError"));}else{if(dijit.byId("account_id")&&dijit.byId("account_id").get("value")){dijit.byId("account_no").set("required",false);dijit.byId("account_no").set("value","");}var _c50;var _c51;var _c52;var _c53;var _c54;if(_c4b==="swift941"||_c4b==="swift942"){if(dijit.byId("owner_type").get("value")=="05"){m.dialog.show("ERROR",m.getLocalization("ExternalAccountError"));}else{var _c55=dj.byId("Current Day").get("value");_c50=dj.byId("dateRange").get("value");_c51=dj.byId("create_date").get("value");_c52=dj.byId("create_date2").get("value");_c53=dj.byId("today").get("value");_c54=dojo.date.locale.format(_c52,{datePattern:misys.getLocalization("g_strGlobalDateFormat"),selector:"date"});if((_c55==="1")||((_c50==="5")&&(dojo.date.compare(_c51,_c52)==0)&&(_c53===_c54))){if(_c4b==="swift942"){dj.byId("export_list").set("value","swift");}form.submit();}else{m.dialog.show("ERROR",m.getLocalization("MT941942ExportError"));}}}else{form.submit();}}if(dijit.byId("account_id")&&dijit.byId("account_id").get("value")){dijit.byId("account_no").set("value",_c4d);dijit.byId("account_no").set("required",true);}dj.byId("export_list").set("value","screen");}},exportListToFormatInXsl:function(_c56){var _c57=dijit.byId("facility_id")?dijit.byId("facility_id").value:"";dojo.io.iframe._currentDfd=null;dojo.io.iframe.send({url:m.getServletURL("/screen/AjaxScreen/action/GetLimitData"),handleAs:"json",sync:true,content:{option:_c56,facility_id:_c57,token:document.getElementById("_token").getAttribute("value")}});},exportListToFormatInXslPdfRpmntSc:function(_c58,_c59){dojo.io.iframe._currentDfd=null;var form=document.createElement("FORM");form.setAttribute("id","dummyform");document.body.appendChild(form);dojo.io.iframe.send({url:m.getServletURL("/screen/AjaxScreen/action/LoanRepaymentScheduleAction"),handleAs:"json",form:"dummyform",method:"POST",sync:true,content:{option:_c58,allColumn:_c59,token:document.getElementById("_token").getAttribute("value")}});},getFrequencyCodeData:function(_c5a){var _c5b;m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetFrequencyCodeData"),handleAs:"json",sync:true,content:{frequencyValue:_c5a},load:function(_c5c){_c5b=_c5c.items.long_desc;},error:function(){_c5b=_c5a;}});return _c5b;},getBalanceTypeCodeData:function(_c5d){var _c5e;m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetBalanceTypeCodeData"),handleAs:"json",sync:true,content:{balance_type_Value:_c5d},load:function(_c5f){_c5e=_c5f.items.long_desc;},error:function(){_c5e=_c5d;}});return _c5e;},getsubGroupTypeData:function(_c60){var _c61;m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetSubGrpTypeCodeData"),handleAs:"json",sync:true,content:{subGrp_type_Value:_c60},load:function(_c62){_c61=_c62.items.long_desc;},error:function(){_c61=_c60;}});return _c61;},preDisplayAssigneeType:function(_c63){var _c64=m._config.task_mode||"userandbank";dojo.forEach(_c63,function(_c65){if(_c65.description==="user_to_bank"&&dj.byId(_c65.id)){if(_c64==="userandbank"){if(dj.byId(_c65.id)){dj.byId(_c65.id).set("disabled",false);}else{console.error("Could not find widget with id "+_c65.id);}}else{if(dj.byId(_c65.id)){dj.byId(_c65.id).set("disabled",true);}else{console.error("Could not find widget with id "+_c65.id);}}}});},isFormDirty:false,isSystemButtonClicked:false,unsavedDataOption:"notset",excludedMethods:[{object:m,method:"submit"}],markFormDirty:function(){m.isFormDirty=true;},isPopupRequired:function(){var _c66=false;if(m.isFormDirty&&m.unsavedDataOption==="notset"){if(dojo.query(".saveButton").length>0){_c66=true;}}return _c66;},unloadListener:function(){if(misys.isFormDirty&&misys.isFormDirty===true&&m._config.saveUnsavedData&&m._config.saveUnsavedData===true){if(m.unsavedDataOption==="save"){return undefined;}else{if(m.unsavedDataOption==="nosave"){return undefined;}else{return m.getLocalization("unsavedData");}}}},setUnsavedDataOption:function(val){misys.unsavedDataOption=val;},showUnsavedDataDialog:function(){var _c67=dijit.byId("unsavedDataDialog");var _c68=dojo.byId("unsavedDataDialogButtons");var _c69=dijit.byId("SaveContButton").domNode;var _c6a=dijit.byId("ContButton").domNode;var _c6b=dijit.byId("CancelButton").domNode;var _c6c=dijit.byId("unsavedDataDialog").domNode;dojo.style(_c68,"display","block");dojo.style(_c69,"display",inlneBlock);dojo.style(_c6a,"display",inlneBlock);dojo.style(_c6b,"display",inlneBlock);dojo.style(_c6c,"display",inlneBlock);_c67.set("title",misys.getLocalization("unsavedDataPreUnload"));misys.dialog.connect(_c67,"onKeyPress",function(evt){if(evt.keyCode===dojo.keys.ESCAPE){dojo.stopEvent(evt);}});misys.dialog.connect(dijit.byId("SaveContButton"),"onMouseUp",function(){misys.dialog.disconnect(_c67);_c67.hide();},_c67.id);misys.dialog.connect(dijit.byId("ContButton"),"onMouseUp",function(){misys.dialog.disconnect(_c67);_c67.hide();},_c67.id);misys.dialog.connect(dijit.byId("CancelButton"),"onMouseUp",function(){misys.dialog.disconnect(_c67);_c67.hide();},_c67.id);misys.dialog.connect(_c67,"onHide",function(){misys.dialog.disconnect(_c67);});_c67.show();},reloadChartImg:function(){var _c6d=dojo.query("#GTPRootPortlet > .portlet-section-body > div.widgetContainer");var form=dj.byId("TransactionSearchForm");var _c6e=/Date/;var _c6f=/Time/;if(form&&_c6d&&_c6d[0]&&_c6d[0].id){var _c70=_c6d[0].id.split("id")[1];var _c71=dojo.query("#chart"+_c70)[0];if(_c71&&_c71.src&&_c71.alt){var _c72=_c71.alt;form.getDescendants().forEach(function(_c73,i){if(_c73.name){var _c74;if(_c73.declaredClass=="dijit.form.RadioButton"){var _c75=dojo.query("[name='"+_c73.name+"']",form.domNode);d.some(_c75,function(_c76){var _c77=dj.byNode(_c76.parentNode);if(_c77.checked){_c74=_c77.params.value;}});}else{_c74=_c73.get("value");}if(_c6e.test(_c73.declaredClass)||(_c6f.test(_c73.declaredClass))){_c74=_c73.get("displayedValue");}if(_c74===" "){_c74="";}if(_c73.type!=="hidden"){_c72=_b44(_c72,_c73.get("name"),_c74);}}});_c71.alt=_c72;m.resizeCharts();}}},formApplicableWarningMsg:function(){var _c78=m._config.globalSubmitConfirmationMsg;var _c79=misys._config.warningMessages?misys._config.warningMessages.length:0;if(_c79>0){var i;var _c7a="<b><ol>";for(i=0;i<_c79;i++){_c7a+=("<li>"+misys._config.warningMessages[i]+"</li>");}_c7a+="</ol></b>";_c78=misys.getLocalization("submitTransactionConfirmationWithWarning",[_c7a]);}return (_c78&&_c78!=="")?_c78:"";},toggleErrorSection:function(_c7b){var _c7c=d.byId("errorContent");if(_c7c){var _c7d=d.byId("errorLink"),_c7e=d.byId("errorSection"),show=(d.style(_c7c,"display")==="none"),_c7f=(show)?d.style(d.byId("errorSection"),"width")+6:d.style(d.byId("errorSection"),"width")-6,_c80=(show)?0.9:1,_c81=(show)?"wipeIn":"wipeOut",_c82=(show)?m.getLocalization("hideErrorSectionMessage"):m.getLocalization("showErrorSectionMessage"),_c83=[],_c84=[];_c83.push(d.animateProperty({node:_c7e,properties:{width:_c7f}}));_c84=_c84.concat(m.animate(_c81,_c7c,null,true)._animations);_c84.push(d.animateProperty({node:_c7e,properties:{opacity:_c80}}));_c83=dojo.fx.chain(_c83.concat(_c84));d.connect(_c83,"onBegin",function(){setTimeout(function(){_c7d.innerHTML=_c82;},500);});d.connect(_c83,"onEnd",function(){if(_c7b&&d.isFunction(_c7b)){_c7b();}});return _c83.play();}},encryptText:function(_c85){if(misys._config.clientSideEncryption){var rsa=new RSAKey();var _c86=misys._config.htmlUsedModulus;var _c87=misys._config.cr_seq;rsa.setPublic(_c86,"10001");return rsa.encrypt(_c85)+_c87;}else{return _c85;}}});m.popup=m.popup||{};d.mixin(m.popup,{showPreview:function(type,_c88,_c89,_c8a,_c8b,_c8c,_c8d){var _c8e="ReportingPopup",url=[];if(misys._config.isBank==="false"&&misys._config.fccuiEnabled&&misys._config.fccuiEnabled==="true"&&m.isAngularProductUrl(_c88,"")){url.push("/view?");url.push("referenceid=",_c89);url.push("&tnxid=",_c8a);url.push("&productCode=",_c88);url.push("&subProductCode=","");url.push("&mode=","view");url.push("&operation=","PREVIEW");url.push("&tnxTypeCode=",_c8b);url.push("&subTnxTypeCode=",_c8c);url.push("&eventTnxStatCode=","");var _c8f=window.open(m.getServletURL("").replace(/.$/,"#")+url.join(""),"_blank","top=100,left=200,height=400,width=900,toolbar=no,resizable=no");_c8f.onload=function(){var _c90=misys.getLocalization("mainTitle");var _c91=misys.getLocalization(_c88);_c8f.document.title=_c90+" - "+_c91;};}else{var _c92="",_c93="",_c94="",_c95="";if(_c8a){_c92="&tnxid="+_c8a;}if(_c8b&&_c8b!==""){_c93="&tnxtype="+_c8b;}if(_c8c&&_c8c!==""){_c94="&subtnxtype="+_c8c;}if(_c8d){_c8e=_c8d;}url=["/screen/",_c8e];url.push("?option=",type,"&titlecode=INFO_MSG_PREVIEW_UNCONTROLLED&referenceid=",_c89,_c92);url.push(_c93);url.push(_c94);url.push(prductCode,_c88);if(window.isAccessibilityEnabled&&window.document.title&&window.document.title!==""){url.push("&parenttitle=",window.document.title);}_b4c(m.getServletURL(url.join("")));}},showSummary:function(type,_c96,_c97,_c98,_c99){switch(type.toLowerCase()){case "print":d.global.print();break;case "close":d.global.close();break;case "export":if(_c96){_c96=_c96.toLowerCase();var _c9a=_c96;if(_c96==="summary"){_c9a="EXPORT_PDF_SUMMARY";}else{if(_c96==="full"){_c9a="EXPORT_PDF_FULL";}else{if(_c96==="details"){_c9a="EXPORT_PDF_DETAILS";}else{if(_c96==="pdf_ec_details"){_c9a="PDF_EC_DETAILS";}else{if(_c96==="csv_bk_details"){_c9a="CSV_BK_DETAILS";}else{if(_c96==="snapshot_pdf"){_c9a="SNAPSHOT_PDF";}else{if(_c96==="updated"){_c9a="EXPORT_PDF_FULL";}}}}}}}_c9a=_c9a.toUpperCase();var url=[reportingPopup];url.push("?option=",_c9a);url.push(refrnceId,_c97);if(_c98&&_c98!==""){url.push("&tnxid=",_c98);}url.push(prductCode,_c99);_b4c(misys.getServletURL(url.join("")));}break;default:break;}},showPDF:function(url){_b4c(misys.getServletURL(url));},showReporting:function(type,_c9b,_c9c,_c9d,_c9e,_c9f,_ca0,_ca1,_ca2){var _ca3,_ca4=[],_ca5=[],_ca6=[],_ca7=[],_ca8="ReportingPopup",url=[],_ca9=[],_caa=[],_cab=[];if(misys._config.isBank==="false"&&misys._config.fccuiEnabled&&misys._config.fccuiEnabled==="true"&&m.isAngularProductUrl(_c9b,_ca2)){url.push("/view?");url.push("referenceid=",_c9c);url.push("&tnxid=",_c9d);url.push("&productCode=",_c9b);url.push("&subProductCode=",_ca2);url.push("&mode=","view");url.push("&operation=","PREVIEW");url.push("&tnxTypeCode=",_c9e);url.push("&subTnxTypeCode=",_c9f);url.push("&eventTnxStatCode=",_ca0);var _cac=window.open(m.getServletURL("").replace(/.$/,"#")+url.join(""),"_blank","top=100,left=200,height=400,width=900,toolbar=no,resizable=no");_cac.onload=function(){var _cad=misys.getLocalization("mainTitle");var _cae=misys.getLocalization(_c9b);_cac.document.title=_cad+" - "+_cae;};}else{if(_c9b&&_c9b!==""){_ca4.push(prductCode,_c9b);}if(_c9c&&_c9c!==""){_ca5.push(refrnceId,_c9c);}if(_c9d&&_c9d!==""){_ca6.push("&tnxid=",_c9d);}if(_c9e&&_c9e!==""){_ca9.push("&tnxtype=",_c9e);}if(_c9f&&_c9f!==""){_caa.push("&subtnxtype=",_c9f);}if(_ca0&&_ca0!==""){_cab.push("&tnxstatus=",_ca0);}if(_ca1&&_ca1!==""){_ca8=_ca1;}url.push("/screen/",_ca8);url.push("?option=",type);url.push(_ca5.join(""),_ca6.join(""),_ca4.join(""),_ca9.join(""),_caa.join(""),_cab.join(""));if(window.isAccessibilityEnabled&&window.document.title&&window.document.title!==""){_ca7.push("&parentTitle=",window.document.title);url.push(_ca7.join(""));}_b4c(m.getServletURL(url.join("")));}},openIframePopup:function(type,_caf,_cb0,_cb1){var _cb2=[],_cb3=[],_cb4=[],_cb5=[],_cb6="IframePopup",url=[];if(misys._config.isBank==="false"&&misys._config.fccuiEnabled&&misys._config.fccuiEnabled==="true"&&m.isAngularProductUrl(prodCode,subProductCode)){url.push("/view?");url.push("entitlementcode=",_caf);url.push("&companyabbvname=",_cb1);url.push("&entitlementdescription=",entitlementdescription);url.push("&mode=","view");url.push("&operation=","PREVIEW");window.open(m.getServletURL("").replace(/.$/,"#")+url.join(""),"_blank","top=100,left=200,height=400,width=900,toolbar=no,resizable=no");}else{if(_caf&&_caf!==""){_cb2.push(entitlementCod,_caf);}if(_cb0&&_cb0!==""){_cb3.push(entitlementDescp,_cb0);}if(_cb1&&_cb1!==""){_cb4.push("&companyAbbvName=",_cb1);}url.push("/screen/",_cb6);url.push("?option=",type);url.push(_cb3.join(""),_cb4.join(""),_cb2.join(""));if(window.isAccessibilityEnabled&&window.document.title&&window.document.title!==""){_cb5.push("&parentTitle=",window.document.title);url.push(_cb5.join(""));}_b4c(m.getServletURL(url.join("")));}},showPopup:function(_cb7,_cb8){var url=[];url.push("/screen/","ReportingPopup");url.push("?option=",_cb8);var _cb9=misys.getLocalization("transactionPopupWindowTitle");var _cba=document.createElement("form");_cba.target=_cb9;_cba.method="POST";_cba.action=m.getServletURL(url.join(""));if(window.isAccessibilityEnabled&&window.document.title&&window.document.title!==""){_cb7=_cb7+"&parenttitle="+window.document.title;}if(_cb7){var _cbb=_cb7.split("&");for(var i=0;i<_cbb.length;i++){if(_cbb[i]){if(_cbb[i].indexOf("=")==-1){_cbb[i-1]=_cbb[i-1]+"&"+_cbb[i];var _cbc=Array.from(_cbb);_cbc.splice(i,1);_cbb=_cbc;}}}for(i=0;i<_cbb.length;i++){if(_cbb[i]){var _cbd=_cbb[i].split("=");var _cbe=document.createElement("input");_cbe.type="hidden";_cbe.name=_cbd[0];var _cbf=_cbd[1];if(_cbd.length>2){for(var j=2;j<_cbd.length;j++){_cbf=_cbf+"="+_cbd[j];}}_cbe.value=_cbf;_cba.appendChild(_cbe);}}}document.body.appendChild(_cba);var _cc0;if(misys._config.showAddressBarInPopup&&misys._config.showAddressBarInPopup==true){_cc0=d.global.open("",_cb9,"width=800,height=500,resizable=yes,scrollbars=yes,location=yes");}else{_cc0=d.global.open("",_cb9,"width=800,height=500,resizable=yes,scrollbars=yes");}if(!_cc0.opener){_cc0.opener=self;}_cc0.focus();if(_cc0){_cba.submit();}},generateDocument:function(type,_cc1,_cc2,_cc3,_cc4,_cc5,_cc6){switch(type.toLowerCase()){case "bg-document":var url=[reportingPopup];url.push("?option=",_cc1);if(_cc2&&_cc2!==""){url.push(refrnceId,_cc2);}if(_cc3&&_cc3!==""){url.push("&tnxid=",_cc3);}url.push(prductCode,_cc4);if(_cc5&&!(_cc5==="")){url.push("&featureid=",_cc5);}if(_cc6&&!(_cc6==="")){url.push("&companyId=",_cc6);}_b4c(m.getServletURL(url.join(""),null,m.getLocalization("pdfSummaryWindowTitle")));break;case "si-document":var _cc7=[reportingPopup];_cc7.push("?option=",_cc1);if(_cc2&&_cc2!==""){_cc7.push(refrnceId,_cc2);}if(_cc3&&_cc3!==""){_cc7.push("&tnxid=",_cc3);}_cc7.push(prductCode,_cc4);if(_cc5&&!(_cc5==="")){_cc7.push("&featureid=",_cc5);}if(_cc6&&!(_cc6==="")){_cc7.push("&companyId=",_cc6);}_b4c(m.getServletURL(_cc7.join(""),null,m.getLocalization("pdfSummaryWindowTitle")));break;default:break;}},showBulkSummary:function(type,_cc8,_cc9,_cca,_ccb,_ccc){var _ccd;if(!_ccc){if(dj.byId("export_field")){_ccd=dj.byId("export_field").get("value");m.popup.showSummary(type,_ccd,_cc9,_cca,_ccb);}}else{if(_ccc){if(dj.byId("export_field_bottom")){_ccd=dj.byId("export_field_bottom").get("value");m.popup.showSummary(type,_ccd,_cc9,_cca,_ccb);}}}}});m.dialog=m.dialog||{};d.mixin(m.dialog,{populate:function(type,url,_cce,_ccf){var _cd0=_cce||"misys.binding.dialog";m._config.popupType=type;d["require"](_cd0+"."+type);var _cd1=d.byId(type+"data");if(!_cd1){console.error("[misys.common] Cannot populate the dialog with content for URL",url);console.error("[misys.common] Check that the dialog content has an element with","ID equal to",(type+"data"));return;}var dim=d.coords(_cd1),_cd2=d.create("div",{id:"contentPaneContainer"});var _cd3;if(!dj.byId("contentPane")){_cd3=new dijit.layout.ContentPane({id:"contentPane",style:{height:dim.h+"px",width:dim.w+"px",overflow:"auto",position:"relative"}});}else{_cd3=dj.byId("contentPane");}_cd3.placeAt(_cd2,"first");d.style(_cd2,"visibility","hidden");d.style(_cd2,"height","0px");d.place(_cd2,_cd1,"after");m.animate("wipeOut",_cd1,function(){m.animate("wipeIn",_cd2,function(){m.connect(_cd3.get("id"),"onLoad",function(){m.dialog.bind();_b60();_b22(_a88);});if(_ccf){_cd3.set("ioMethod",m.xhrPost);_cd3.set("ioArgs",{content:_ccf});}_cd3.set("href",url);_cd3.startup();_cd3.resize();},null,null,true);},null,null,true);},clear:function(_cd4,_cd5,_cd6,_cd7){var _cd8=d.byId("contentPaneContainer");if(_cd7){if(d.byId("responseXHRDialogDiv")){d.destroy(d.byId("responseXHRDialogDiv"));}var _cd9=dojo.create("div");_cd9.id="responseXHRDialogDiv";dojo.addClass(_cd9,"responseXHRDialogDiv");d.place(_cd7,_cd9,"first");}m.animate("wipeOut",_cd8,function(){d.place(_cd8,d.body(),"last");if(_cd7){d.place(_cd9,_cd4,"first");}m.animate("wipeIn",_cd4,function(){_cd5.destroyRecursive();d.destroy(_cd8);if(_cd6&&d.isFunction(_cd6)){_cd6();}delete m._config.popupType;});});},submit:function(_cda){switch(_cda){case "SUBMIT":undefined;var _cdb=dj.byId("product_code")?dj.byId("product_code").get("value"):null;var _cdc=false;if(_cdb==="LC"||_cdb==="EL"||_cdb==="SI"||_cdb==="SR"){_cdc=true;}var _cdd=d.query("#"+_a88);if(_ad2(false,_cdd)){var _cde=m.getLocalization("submitTransactionConfirmation");m.dialog.show("CONFIRMATION",_cde,"",function(){var _cdf=dj.byId("popup_realform_operation");if(_cdf.get("value")===""){_cdf.set("value","SUBMIT");}dj.byId("popup_TransactionData").set("value",m.formToXML({ignoreDisabled:_cdc,selector:"#"+_a88,xmlRoot:dj.byId("node_name").get("value")}));_acd("popup_realform",function(){m.grid.setStoreURL(dj.byId(m._config.popupType+"data_grid"));});});}else{_ad9(_a88);m.dialog.show("ERROR",m.getLocalization("mandatoryFieldsToSubmitError"),"",function(){_ad2(true,_cdd);});}break;case "CANCEL":m.dialog.clear(d.byId(m._config.popupType+"data"),dj.byId("contentPane"));break;case "HELP":_b4c(m._config.onlineHelpUrl,m.getLocalization("onlineHelpWindowTitle"),"width=1000,height=700,resizable=yes,scrollbars=yes");return;break;default:break;}},passBack:function(_ce0,_ce1,_ce2,type){var _ce3=null;var _ce4=null;var _ce5=null;var _ce6=null;var _ce7=null;var _ce8=null;var _ce9=null;var _cea=_ce0.indexOf("applicant_act_nickname")!==-1?_ce0.indexOf("applicant_act_nickname"):_ce0.indexOf("applicant_collection_act_nickname");var _ceb=_ce0.indexOf("beneficiary_account_nickname");var _cec=_ce0.indexOf("beneficiary_nickname");_ce5=_ce0.indexOf("customer_associated_bank");_ce6=_ce1[_cea];_ce8=_ce1[_cec];_ce7=_ce1[_ceb];var _ced=_ce1[_ce5];if(_ced!==""&&_ced!==null){m._config.customerBankName=_ced;}if(_ce6!==undefined&&_ce6!==""&&_ce6!==null&&dj.byId("applicant_act_nickname")){dj.byId("applicant_act_nickname").set("value",_ce6);}if(_ce8!==undefined&&_ce8!==""&&_ce8!==null&&dj.byId("beneficiary_nickname")){dj.byId("beneficiary_nickname").set("value",_ce8);}if(_ce7!==undefined&&_ce7!==""&&_ce7!==null&&dj.byId("beneficiary_act_nickname")){dj.byId("beneficiary_act_nickname").set("value",_ce7);}var _cee=dj.byId("childXhrDialog"),_cef=/SimpleTextArea/,_cf0=/SimpleTextarea/,_cf1=/FilteringSelect/,obj;if(type==="swift_bic"){m._config.isBankDetailsPopulated=true;}else{if(type==="beneficiary_accounts"){m._config.isBeneficiaryAccountsPopulated=true;}}d.forEach(_ce0,function(id,_cf2){var _cf3=["seller_account_type"];obj=dj.byId(id);if(obj){var _cf4=_ce1[_cf2];if(_cef.test(obj.declaredClass)||_cf0.test(obj.declaredClass)){if(obj.get("value")!==""){_cf4="\n"+_cf4;}m.insertAtCursor(obj,_cf4);}else{if(_cf1.test(obj.declaredClass)){if(_cf3.indexOf(obj.id)>-1){obj.set("value",_cf4);}else{if(type==="treasury_beneficiary_accounts"){obj.set("value",_cf4);obj.set("displayedValue",_cf4);}else{obj.set("value","");obj.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_cf4}});}}}else{obj.set("value",_cf4);}}obj.onChange();obj.onFocus();obj.onBlur();}});var _cf5="false";if(dj.byId("show_bic_code")){_cf5=dj.byId("show_bic_code").get("value");}if(_cf5==="true"){if(type==="treasury_beneficiary_accounts"&&dj.byId("beneficiary_bank_bic")&&dj.byId("beneficiary_bank_bic").get("value")!==""){dj.byId("beneficiary_bank").set("value","");dj.byId("beneficiary_bank_branch").set("value","");dj.byId("beneficiary_bank_address").set("value","");dj.byId("beneficiary_bank_city").set("value","");dj.byId("beneficiary_bank_country").set("value","");dj.byId("beneficiary_bank_bic").set("disabled",true);}}if(_cee){if(_ce2){m.dialog.connect(_cee,"onHide",function(){setTimeout(function(){dj.byId("xhrDialog").hide();},dj.defaultDuration);});}_cee.hide();}else{if(dj.byId("xhrDialog")){dj.byId("xhrDialog").hide();}}var _cf6=dj.byId("01entity");var _cf7=dj.byId("02entity");var _cf8=dj.byId("03entity");if(_cf6){_cf6.set("value",_ce1[0]);}if(_cf7){_cf7.set("value",_ce1[0]);}if(_cf8){_cf8.set("value",_ce1[0]);}var _cf9=_ce1[_ce0.indexOf("swift_charges_type")];if(_cf9){if(_cf9==="01"){document.getElementById("swift_charges_type_1").click();}else{if(_cf9==="02"){document.getElementById("swift_charges_type_2").click();}else{if(_cf9==="05"){document.getElementById("swift_charges_type_3").click();}}}}if(d.isFunction(m._config.passBack)){return m._config.passBack(_ce0,_ce1,_ce2);}}});d.subscribe("ready",function(){if(d.query(_a94).length>0){m.connect(window,"onresize",m.resizeCharts);}if(d.query(_a8d).length>0){m.connect(window,"onresize",m.resizeGrids);}});})(dojo,dijit,misys);}if(!dojo._hasResource["misys.form.SortedFilteringSelect"]){dojo._hasResource["misys.form.SortedFilteringSelect"]=true;dojo.provide("misys.form.SortedFilteringSelect");dojo.experimental("misys.form.SortedFilteringSelect");dojo.declare("misys.form.SortedFilteringSelect",dijit.form.FilteringSelect,{postCreate:function(){this.inherited(arguments);this.fetchProperties={sort:[{attribute:"name"}]};}});}if(!dojo._hasResource["misys.client.form.common_client"]){dojo._hasResource["misys.client.form.common_client"]=true;dojo.provide("misys.client.form.common_client");(function(d,dj,m){})(dojo,dijit,misys);}if(!dojo._hasResource["misys.form.common"]){dojo._hasResource["misys.form.common"]=true;dojo.provide("misys.form.common");(function(d,dj,m){var _cfa="tab title:";var _cfb="label[for=tenor_period_label]";var _cfc="Advising Bank";var _cfd="requested-conf-party-bank-details";var _cfe="view-narrative-swift";var _cff="&productcode=";var _d00="[misys.form.common] Opening a child dialog at URL";var _d01="/screen/AjaxScreen/action/";var _d02="AjaxScreen/action/GetStaticDataPopup";var _d03="[misys.form.common] Retrieving grid content from URL";var _d04="excluded-value";var _d05="attachment-file";var _d06="13",_d07="40",_d08="300",_d09=0,_d0a=0,_d0b=0,_d0c=0,_d0d=true,_d0e=true;function _d0f(msg){var re=new RegExp(/^[a-zA-Z]{1}[).#+-]|^[1-9]{1,2}[).#+-]|^[\+#-]/);var _d10=msg.split(/\n/);var _d11="<pre style=\"background-color:#ffffff;border-width:0px; white-space: pre-wrap;\">";for(var i=0;i<_d10.length;i++){_d10[i]=_d10[i]+"\n";var len=_d10[i].length;var temp="";if(_d10[i][len-1]==="\n"&&_d10[i+1]!=undefined&&(re.test(_d10[i+1].trim())||_d10[i+1].trim()===""||_d10[i+1].trim()==="\n")){temp=_d10[i].replace(/\n/g,"");temp=temp+"<br/>";}else{temp=_d10[i].replace(/\n/g," ");}_d11+=temp;}_d11+="</pre>";return _d11;};function _d12(msg){var _d13=msg;_d13=_d13.replace(/&#xa;/g,"\n");_d13=_d13.replace(/&#xa;/g,"\t");_d13=_d13.replace(/&#x29;/g,")");_d13=_d13.replace(/&#x2b;/g,"+");_d13=_d13.replace(/&#x23;/g,"#");_d13=_d13.replace(/&#x2d;/g,"-");_d13=_d13.replace(/&#x3e;/g,">");_d13=_d13.replace(/&#x3c;/g,"<");_d13=_d13.replace(/&#x2f;/g,"/");_d13=_d13.replace(/&#x9;/g,"");_d13=_d13.replace(/&#x26;nbsp&#x3b;/g," ");_d13=_d13.replace(/&#x26;amp&#x3b;/g,"&");return _d0f(_d13);};function _d14(node){var _d15=m._config.productCode.toLowerCase(),_d16=dj.byId(_d15+"_amt"),_d17=dj.byId("org_"+_d15+"_amt"),_d18=d.number.parse(_d17.get("displayedValue")),_d19=d.number.parse(node.get("displayedValue"));_d18=!isNaN(_d18)?_d18:0;_d19=!isNaN(_d19)?_d19:null;if(node.id==="inc_amt"||node.id==="inc_amt_value"){_d16.set("value",_d18+_d19);m.setTnxAmt(_d19);}else{if(_d19<=_d18){_d16.set("value",_d18-_d19);m.setTnxAmt(_d19);}else{m.setFieldState(node,false);}}};function _d1a(_d1b){m.setTnxAmt("");var _d1c=_d1b.get("value");dj.byId("ft_cur_code").set("value",_d1c);dj.byId("counterparty_details_ft_cur_code_nosend").set("value",_d1c);m.setCurrency(_d1b,["ft_amt","counterparty_details_ft_amt_nosend"]);d.query(".widgetContainer #counterparty_fields "+"[id^='counterparty_details_document_id_']").forEach(function(_d1d){if(_d1d.id.indexOf("nosend")===-1){var w=dj.byId(_d1d.id);if(w){m.deleteTransactionAddon("counterparty",w.get("value"));}}});};function _d1e(_d1f,_d20){var _d21=dj.byId("drawee_details_bank_name");var _d22=(dj.byId("tnxtype")&&dj.byId("tnxtype").get("value")==="03")||(dj.byId("tnx_type_code")&&dj.byId("tnx_type_code").get("value")==="03")||(dj.byId("prod_stat_code")&&(dj.byId("prod_stat_code").get("value")==="08"||dj.byId("prod_stat_code").get("value")==="31"));if(!(_d22)){switch(_d20){case m._config.issuingBank:_d21.set("value",m._config.issuingBank);break;case m._config.advisingBank:if(_d1f!=="03"){_d21.set("value",m._config.advisingBank);}else{_d21.set("value",m._config.issuingBank);}break;case m._config.anyBank:_d21.set("value",m._config.issuingBank);break;default:if(_d1f==="01"||_d1f==="02"||_d1f==="04"||_d1f==="05"||_d1f==="03"){}else{_d21.set("value",m._config.issuingBank);}break;}}};function _d23(url,_d24){var _d25=[{field:"REFIDLINK",name:"ref_id",width:"100px",styles:"text-align: center;",formatter:m.grid.formatHTML},{field:"CURCODE",name:"cur_code",width:"auto"},{field:"TNXID",name:"tnx_id",width:"auto"},{field:"TYPE",name:"type",width:"auto",formatter:m.grid.formatHTML},{field:"STATUS",name:"status",width:"auto"},{field:"AMOUNT",name:"tnx_amt",width:"auto"}],json="items: ''",_d26=new dojo.data.ItemFileReadStore({data:json}),grid=new dojox.grid.DataGrid({query:{id:"*"},id:"transaction_Grid",structure:_d25,height:"100px",noDataMessage:m.getLocalization("noTransactionsFound"),onSelected:function(_d27){_d28(_d27);},selectionMode:"single"},document.createElement("div"));d.byId(_d24).appendChild(grid.domNode);grid.startup();_d26.url=url;grid.setStore(_d26);};function _d28(_d29){var _d2a=dj.byId("transaction_Grid").get("store")._arrayOfAllItems[_d29];dj.byId("imp_bill_ref_id").set("value",_d2a.TNXID);d.byId("TransactionLink").innerHTML="<a id='javascriptLink' href='javascript:void(0)'>"+m.getLocalization("TransactionLink")+"</a>";d.attr("javascriptLink","onclick","misys.popup.showReporting('FULL','"+_d2a.PRODUCTCODE+"','"+_d2a.REFID+"','"+_d2a.TNXID+"');");dj.byId("linkedTransaction_dialog").hide();};function _d2b(){var _d2c=m._config.limitFieldIdCollection;d.forEach(_d2c,function(id,_d2d){var obj=dj.byId(id);if(obj){obj.set("displayedValue","");}});};function _d2e(_d2f){m._config.limitFieldIdCollection=_d2f.fields;m._config.limitCollection=_d2f.items;m._config.limitStore=_d2f.store;var _d30=dj.byId("limit_id");if(_d30){_d30.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:m._config.limitStore}});}};function _d31(_d32){var _d33;if(_d32.items!==""){_d33=_d32.items.widget;var _d34=dj.byId(_d33);var _d35=_d34.get("value");if(_d35===""){_d34.set("value",_d35+_d32.items.text);}else{_d34.set("value",_d35+"\n"+_d32.items.text);}}dj.byId("xhrDialog")?dj.byId("xhrDialog").hide():"";};function _d36(_d37){if(_d37.message!==""){var _d38=dj.byId("first_name"),_d39=dj.byId("last_name"),_d3a=dj.byId("legal_country"),_d3b=dj.byId("legal_type"),_d3c=dj.byId("legal_no"),_d3d=dj.byId("address_line_1"),_d3e=dj.byId("address_line_2"),_d3f=dj.byId("country_sub_div"),_d40=dj.byId("county"),_d41=dj.byId("country_name"),_d42=dj.byId("phone"),fax=dj.byId("fax"),_d43=dj.byId("email"),dom=dj.byId("dom"),_d44=dj.byId("time_zone"),_d45=dj.byId("correspondence_language"),_d46=dj.byId("actv_flag"),_d47=dj.byId("base_cur_code"),_d48=dj.byId("employee_department");var _d49=_d37.message.static_user.group_record.length;var _d4a;var _d4b;var _d4c=_d37.message.static_user.first_name,_d4d=_d37.message.static_user.last_name,_d4e=_d37.message.static_user.address_line_1,_d4f=_d37.message.static_user.address_line_2,_d50=_d37.message.static_user.country_sub_div,_d51=_d37.message.static_user.county,_d52=_d37.message.static_user.country_name,_d53=_d37.message.static_user.phone,_d54=_d37.message.static_user.fax,_d55=_d37.message.static_user.email,_d56=_d37.message.static_user.dom,_d57=_d37.message.static_user.time_zone,_d58=_d37.message.static_user.correspondence_language,_d59=_d37.message.static_user.cur_code;if(_d37.message.static_user.company_type=="03"){_d4a=dojo.byId("company_role_list");_d4b=dojo.byId("company_avail_list_nosend");var _d5a=_d37.message.static_user.pending_trans_notify,_d5b=_d37.message.static_user.legal_country,_d5c=_d37.message.static_user.legal_type,_d5d=_d37.message.static_user.legal_no;_d3a.set("value",_d5b);_d3b.set("value",_d5c);_d3c.set("value",_d5d);if(_d5a=="Y"){dj.byId("pending_trans_notify").set("checked",true);dj.byId("email").set("required",true);}if(_d37.message.static_user.group_record.length>0){for(var m=1;m<=_d49-1;m++){dj.byId("company_auth_level_"+m).set("value","");dj.byId("company_limit_amt_"+m).set("value","");dj.byId("company_limit_cur_code_"+m).set("value","");if(_d37.message.static_user.group_record[m-1].existing_roles){var _d5e=_d37.message.static_user.group_record[m-1].existing_roles.role.name;var _d5f=_d37.message.static_user.group_record[m-1].existing_roles.role.limit_amt;var _d60=_d37.message.static_user.group_record[m-1].existing_roles.role.limit_cur_code;dj.byId("company_auth_level_"+m).set("value",_d5e);dj.byId("company_limit_amt_"+m).set("value",_d5f);dj.byId("company_limit_cur_code_"+m).set("value",_d60);misys.animate("wipeIn","grp_rec_"+_d37.message.static_user.group_record[m-1].group_abbv_name);}}}}if(_d37.message.static_user.company_type=="01"||_d37.message.static_user.company_type=="02"){_d4a=dojo.byId("bank_role_list");_d4b=dojo.byId("bank_avail_list_nosend");var _d61;if(_d37.message.static_user.group_record.existing_roles!=""){var _d62=null;if(_d37.message.static_user.group_record.existing_roles.role.length>0){for(var x=0;x<_d37.message.static_user.group_record.existing_roles.role.length;x++){if(_d37.message.static_user.group_record.existing_roles.role[x].roletype=="02"){_d62=_d37.message.static_user.group_record.existing_roles.role[x].role_description;_d61=document.createElement("OPTION");_d61.innerHTML=_d62;_d61.value=_d37.message.static_user.group_record.existing_roles.role[x].name;dj.byId("bank_auth_level_1").set("item",_d61);}}}else{if(_d37.message.static_user.group_record.existing_roles.role.roletype=="02"){_d62=_d37.message.static_user.group_record.existing_roles.role.role_description;_d61=document.createElement("OPTION");_d61.innerHTML=_d62;_d61.value=_d37.message.static_user.group_record.existing_roles.role[x].name;dj.byId("bank_auth_level_1").set("item",_d61);}}}var _d63=_d37.message.static_user.employee_department;_d48.set("value",_d63);}_d38.set("value",_d4c);_d39.set("value",_d4d);_d3d.set("value",_d4e);_d3e.set("value",_d4f);_d3f.set("value",_d50);_d40.set("value",_d51);_d41.set("value",_d52);_d42.set("value",_d53);fax.set("value",_d54);_d43.set("value",_d55);dom.set("value",_d56);_d44.set("value",_d57);_d45.set("value",_d58);_d47.set("value",_d59);var _d64;var _d65;if(_d4b){_d4b.innerHTML="";}if(_d4a){_d4a.innerHTML="";}if(_d37.message.static_user.company_type=="03"&&_d37.message.static_user.static_company.owner_id!="2"&&_d37.message.static_user.group_record[1].group_abbv_name=="global"){if(_d37.message.static_user.group_record[1].existing_roles){if(_d37.message.static_user.group_record[1].existing_roles.role.length>0){for(var j=0;j<_d37.message.static_user.group_record[1].existing_roles.role.length;j++){_d64=_d37.message.static_user.group_record[1].existing_roles.role[j].role_description;_d65=_d37.message.static_user.group_record[1].existing_roles.role[j].name;dojo.create("option",{text:_d64,value:_d65,innerHTML:_d64,textValue:_d64},_d4a);}}else{dojo.byId("company_role_list").add(dojo.create("option",{text:_d37.message.static_user.group_record[1].existing_roles.role.role_description,innerHTML:_d37.message.static_user.group_record[1].existing_roles.role.role_description,value:_d37.message.static_user.group_record[1].existing_roles.role.name}));}}}var _d66;var val3;if(_d37.message.static_user.company_type=="01"||_d37.message.static_user.company_type=="02"){if(_d37.message.static_user.group_record.existing_roles){if(_d37.message.static_user.group_record.existing_roles.role.length>0){for(var y=0;y<_d37.message.static_user.group_record.existing_roles.role.length;y++){if(_d37.message.static_user.group_record.existing_roles.role[y].roletype=="01"){_d66=_d37.message.static_user.group_record.existing_roles.role[y].role_description;val3=_d37.message.static_user.group_record.existing_roles.role[y].name;dojo.create("option",{text:_d66,value:val3,innerHTML:_d66,textValue:_d66},_d4a);}}}else{if(_d37.message.static_user.group_record.existing_roles.role.roletype=="01"){dojo.byId("bank_role_list").add(dojo.create("option",{text:_d37.message.static_user.group_record.existing_roles.role.role_description,innerHTML:_d37.message.static_user.group_record.existing_roles.role.role_description,value:_d37.message.static_user.group_record.existing_roles.role.name}));}}}}if(_d37.message.static_user.company_type=="03"&&_d37.message.static_user.static_company.owner_id=="2"){var len=_d37.message.static_user.group_record.length;if(_d37.message.static_user.group_record.length>0){if(_d37.message.static_user.group_record[len-1].existing_roles){if(_d37.message.static_user.group_record[len-1].existing_roles.role.length>0){for(var z=0;z<_d37.message.static_user.group_record[len-1].existing_roles.role.length;z++){_d64=_d37.message.static_user.group_record[len-1].existing_roles.role[z].role_description;_d65=_d37.message.static_user.group_record[len-1].existing_roles.role[z].name;dojo.create("option",{text:_d64,value:_d65,innerHTML:_d64,textValue:_d64},_d4a);}}else{dojo.byId("company_role_list").add(dojo.create("option",{text:_d37.message.static_user.group_record[len-1].existing_roles.role.role_description,innerHTML:_d37.message.static_user.group_record.existing_roles.role.role_description,value:_d37.message.static_user.group_record.existing_roles.role.name}));}}}else{if(_d37.message.static_user.group_record.existing_roles){if(_d37.message.static_user.group_record.existing_roles.role.length>0){for(var zn=0;zn<_d37.message.static_user.group_record.existing_roles.role.length;zn++){_d64=_d37.message.static_user.group_record.existing_roles.role[zn].role_description;_d65=_d37.message.static_user.group_record.existing_roles.role[zn].name;dojo.create("option",{text:_d64,value:_d65,innerHTML:_d64,textValue:_d64},_d4a);}}else{dojo.byId("company_role_list").add(dojo.create("option",{text:_d37.message.static_user.group_record.existing_roles.role.role_description,innerHTML:_d37.message.static_user.group_record.existing_roles.role.role_description,value:_d37.message.static_user.group_record.existing_roles.role.name}));}}}}var _d67;var val1;if(_d37.message.static_user.company_type=="03"&&_d37.message.static_user.static_company.owner_id!="2"&&_d37.message.static_user.group_record[1].group_abbv_name=="global"){if(_d37.message.static_user.group_record[1].avail_roles!=""){if(_d37.message.static_user.group_record[1].avail_roles.role.length>0){_d37.message.static_user.group_record[1].avail_roles.role.sort(_d68("role_description"));for(var k=0;k<_d37.message.static_user.group_record[1].avail_roles.role.length;k++){if(_d37.message.static_user.group_record[1].avail_roles.role[k].roledest=="03"&&_d37.message.static_user.group_record[1].avail_roles.role[k].roletype=="01"){_d67=_d37.message.static_user.group_record[1].avail_roles.role[k].role_description;val1=_d37.message.static_user.group_record[1].avail_roles.role[k].name;dojo.create("option",{text:_d67,value:val1,innerHTML:_d67,textValue:_d67},_d4b);}}}else{if(_d37.message.static_user.group_record[1].avail_roles.role.roledest=="03"&&_d37.message.static_user.group_record[1].avail_roles.role.roletype=="01"){dojo.byId("company_avail_list_nosend").add(dojo.create("option",{text:_d37.message.static_user.group_record[1].avail_roles.role.role_description,innerHTML:_d37.message.static_user.group_record[1].avail_roles.role.role_description,value:_d37.message.static_user.group_record[1].avail_roles.role.name}));}}}}if(_d37.message.static_user.company_type=="03"&&_d37.message.static_user.static_company.owner_id=="2"){var ln=_d37.message.static_user.group_record.length;if(_d37.message.static_user.group_record.length>0){if(_d37.message.static_user.group_record[ln-1].avail_roles!=""){if(_d37.message.static_user.group_record[ln-1].avail_roles.role.length>0){_d37.message.static_user.group_record[ln-1].avail_roles.role.sort(_d68("role_description"));for(var mor=0;mor<_d37.message.static_user.group_record[ln-1].avail_roles.role.length;mor++){if(_d37.message.static_user.group_record[ln-1].avail_roles.role[mor].roledest=="03"&&_d37.message.static_user.group_record[ln-1].avail_roles.role[mor].roletype=="01"){_d67=_d37.message.static_user.group_record[ln-1].avail_roles.role[mor].role_description;val1=_d37.message.static_user.group_record[ln-1].avail_roles.role[mor].name;dojo.create("option",{value:val1,innerHTML:_d67},_d4b);}}}else{if(_d37.message.static_user.group_record[ln-1].avail_roles.role.roledest=="03"&&_d37.message.static_user.group_record[ln-1].avail_roles.role.roletype=="01"){dojo.byId("company_avail_list_nosend").add(dojo.create("option",{innerHTML:_d37.message.static_user.group_record[ln-1].avail_roles.role.role_description,value:_d37.message.static_user.group_record[ln-1].avail_roles.role.name}));}}}}else{if(_d37.message.static_user.group_record.avail_roles!=""){if(_d37.message.static_user.group_record.avail_roles.role.length>0){_d37.message.static_user.group_record.avail_roles.role.sort(_d68("role_description"));for(var mr=0;mr<_d37.message.static_user.group_record.avail_roles.role.length;mr++){if(_d37.message.static_user.group_record.avail_roles.role[mr].roledest=="03"&&_d37.message.static_user.group_record.avail_roles.role[mr].roletype=="01"){_d67=_d37.message.static_user.group_record.avail_roles.role[mr].role_description;val1=_d37.message.static_user.group_record.avail_roles.role[mr].name;dojo.create("option",{value:val1,innerHTML:_d67},_d4b);}}}else{if(_d37.message.static_user.group_record.avail_roles.role.roledest=="03"&&_d37.message.static_user.group_record.avail_roles.role.roletype=="01"){dojo.byId("company_avail_list_nosend").add(dojo.create("option",{innerHTML:_d37.message.static_user.group_record.avail_roles.role.role_description,value:_d37.message.static_user.group_record.avail_roles.role.name}));}}}}}if(_d37.message.static_user.company_type=="02"){if(_d37.message.static_user.group_record.avail_roles){if(_d37.message.static_user.group_record.avail_roles.role.length>0){_d37.message.static_user.group_record.avail_roles.role.sort(_d68("role_description"));for(var n=0;n<_d37.message.static_user.group_record.avail_roles.role.length;n++){if(_d37.message.static_user.group_record.avail_roles.role[n].roledest=="02"&&_d37.message.static_user.group_record.avail_roles.role[n].roletype=="01"){_d67=_d37.message.static_user.group_record.avail_roles.role[n].role_description;val1=_d37.message.static_user.group_record.avail_roles.role[n].name;dojo.create("option",{text:_d67,value:val1,innerHTML:_d67,textValue:_d67},_d4b);}}}else{if(_d37.message.static_user.group_record.avail_roles.role[n].roledest=="02"&&_d37.message.static_user.group_record.avail_roles.role.roletype=="01"){dojo.byId("company_avail_list_nosend").add(dojo.create("option",{text:_d37.message.static_user.group_record[i].avail_roles.role.role_description,innerHTML:_d37.message.static_user.group_record.avail_roles.role.role_description,value:_d37.message.static_user.group_record.avail_roles.role.name}));}}}}if(_d37.message.static_user.company_type=="01"){if(_d37.message.static_user.group_record.avail_roles){if(_d37.message.static_user.group_record.avail_roles.role.length>0){_d37.message.static_user.group_record.avail_roles.role.sort(_d68("role_description"));for(var p=0;p<_d37.message.static_user.group_record.avail_roles.role.length;p++){if(_d37.message.static_user.group_record.avail_roles.role[p].roledest=="01"&&_d37.message.static_user.group_record.avail_roles.role[p].roletype=="01"){_d67=_d37.message.static_user.group_record.avail_roles.role[p].role_description;val1=_d37.message.static_user.group_record.avail_roles.role[p].name;dojo.create("option",{text:_d67,value:val1,innerHTML:_d67,textValue:_d67},_d4b);}}}else{if(_d37.message.static_user.group_record.avail_roles.role[p].roledest=="01"&&_d37.message.static_user.group_record.avail_roles.role.roletype=="01"){dojo.byId("company_avail_list_nosend").add(dojo.create("option",{text:_d37.message.static_user.group_record[i].avail_roles.role.role_description,innerHTML:_d37.message.static_user.group_record.avail_roles.role.role_description,value:_d37.message.static_user.group_record.avail_roles.role.name}));}}}}if(_d37.message.static_user.company_type=="03"){if(_d37.message.static_user.entity_record){var _d69,_d6a,_d6b,_d6c,_d6d,_d6e,_d6f=dj.byId("default_entity");var _d70=document.createElement("OPTION");_d70.innerHTML="";_d70.value="";if(_d6f){_d6f.set("item",_d70);}if(_d37.message.static_user.entity_record.length>0){for(var x1 in _d37.message.static_user.entity_record){if(_d37.message.static_user.entity_record[x1].default_entity=="Y"){var temp=_d37.message.static_user.entity_record[x1].entity_name;var opt=document.createElement("OPTION");opt.innerHTML=temp;opt.value=temp;_d6f.set("item",opt);break;}}for(var a=0;a<_d37.message.static_user.entity_record.length;a++){_d6b=_d37.message.static_user.entity_record[a].entity_id;_d6c=dijit.byId("entity_flag_nosend_"+_d6b);_d6d=dojo.byId("entity_roles_exist_nosend_"+_d6b);_d6d.innerHTML="";_d6e=_d37.message.static_user.entity_record[a].entity_flag;_d6c.set("value",_d6e);if(_d6e=="Y"){if(_d37.message.static_user.entity_record[a].existing_roles){if(_d37.message.static_user.entity_record[a].existing_roles.role.length>0){for(var q=0;q<_d37.message.static_user.entity_record[a].existing_roles.role.length;q++){_d69=_d37.message.static_user.entity_record[a].existing_roles.role[q].role_description;_d6a=_d37.message.static_user.entity_record[a].existing_roles.role[q].name;dojo.create("option",{text:_d69,value:_d6a,innerHTML:_d69,textValue:_d69},_d6d);}}else{dojo.byId("entity_roles_exist_nosend_"+_d6b).add(dojo.create("option",{text:_d37.message.static_user.entity_record[a].existing_roles.role.role_description,innerHTML:_d37.message.static_user.entity_record[a].existing_roles.role.role_description,value:_d37.message.static_user.entity_record[a].existing_roles.role.name}));}dj.byId("entity_flag_nosend_"+_d6b).set("checked",true);misys.animate("wipeIn","entity_roles_div_"+_d6b);}}else{dj.byId("entity_flag_nosend_"+_d6b).set("checked",false);misys.animate("wipeOut","entity_roles_div_"+_d6b);}}}else{if(_d37.message.static_user.entity_record.default_entity=="Y"){var _d71=_d37.message.static_user.entity_record.entity_name;var opt1=document.createElement("OPTION");opt1.innerHTML=_d71;opt1.value=_d71;_d6f.set("item",opt1);}_d6b=_d37.message.static_user.entity_record.entity_id;_d6d=dojo.byId("entity_roles_exist_nosend_"+_d6b);_d6d.innerHTML="";_d6e=_d37.message.static_user.entity_record.entity_flag;if(_d6e=="Y"){if(_d37.message.static_user.entity_record.existing_roles){if(_d37.message.static_user.entity_record.existing_roles.role.length>0){for(var r=0;r<_d37.message.static_user.entity_record.existing_roles.role.length;r++){_d69=_d37.message.static_user.entity_record.existing_roles.role[r].role_description;_d6a=_d37.message.static_user.entity_record.existing_roles.role[r].name;dojo.create("option",{text:_d69,value:_d6a,innerHTML:_d69,textValue:_d69},_d6d);}dj.byId("entity_flag_nosend_"+_d6b).set("checked",true);misys.animate("wipeIn","entity_roles_div_"+_d6b);}else{dojo.byId("entity_roles_exist_nosend_"+_d6b).add(dojo.create("option",{text:_d37.message.static_user.entity_record.existing_roles.role.role_description,innerHTML:_d37.message.static_user.entity_record.existing_roles.role.role_description,value:_d37.message.static_user.entity_record.existing_roles.role.name}));}}}else{dj.byId("entity_flag_nosend_"+_d6b).set("checked",false);misys.animate("wipeOut","entity_roles_div_"+_d6b);}}var _d72,_d73,_d74,_d75,_d76=dj.byId("default_entity");if(_d37.message.static_user.entity_record.length>0){for(var b=0;b<_d37.message.static_user.entity_record.length;b++){_d6b=_d37.message.static_user.entity_record[b].entity_id;_d6c=dijit.byId("entity_flag_nosend_"+_d6b);_d74=dojo.byId("entity_roles_avail_nosend_"+_d6b);_d75=_d37.message.static_user.entity_record[b].entity_flag;_d6c.set("value",_d75);if(_d75=="Y"){_d74.innerHTML="";if(_d37.message.static_user.entity_record[b].avail_roles){if(_d37.message.static_user.entity_record[b].avail_roles.role.length>0){_d37.message.static_user.entity_record[b].avail_roles.role.sort(_d68("role_description"));for(var s=0;s<_d37.message.static_user.entity_record[b].avail_roles.role.length;s++){_d72=_d37.message.static_user.entity_record[b].avail_roles.role[s].role_description;_d73=_d37.message.static_user.entity_record[b].avail_roles.role[s].name;dojo.create("option",{text:_d72,value:_d73,innerHTML:_d72,textValue:_d72},_d74);}}else{dojo.byId("entity_roles_avail_nosend_"+_d6b).add(dojo.create("option",{text:_d37.message.static_user.entity_record[b].avail_roles.role.role_description,innerHTML:_d37.message.static_user.entity_record[b].avail_roles.role.role_description,value:_d37.message.static_user.entity_record[b].avail_roles.role.name}));}dj.byId("entity_flag_nosend_"+_d6b).set("checked",true);misys.animate("wipeIn","entity_roles_div_"+_d6b);}}else{dj.byId("entity_flag_nosend_"+_d6b).set("checked",false);misys.animate("wipeOut","entity_roles_div_"+_d6b);}}}else{if(_d37.message.static_user.entity_record.default_entity=="Y"){var tmp=_d37.message.static_user.entity_record.entity_name;var op=document.createElement("OPTION");op.innerHTML=tmp;op.value=tmp;_d76.set("item",op);}_d6b=_d37.message.static_user.entity_record.entity_id;_d74=dojo.byId("entity_roles_avail_nosend_"+_d6b);_d75=_d37.message.static_user.entity_record.entity_flag;if(_d75=="Y"){_d74.innerHTML="";if(_d37.message.static_user.entity_record.avail_roles){if(_d37.message.static_user.entity_record.avail_roles.role.length>0){_d37.message.static_user.entity_record.avail_roles.role.sort(_d68("role_description"));for(var t=0;t<_d37.message.static_user.entity_record.avail_roles.role.length;t++){_d72=_d37.message.static_user.entity_record.avail_roles.role[t].role_description;_d73=_d37.message.static_user.entity_record.avail_roles.role[t].name;dojo.create("option",{text:_d72,value:_d73,innerHTML:_d72,textValue:_d72},_d74);}dj.byId("entity_flag_nosend_"+_d6b).set("checked",true);}else{dojo.byId("entity_roles_avail_nosend_"+_d6b).add(dojo.create("option",{text:_d37.message.static_user.entity_record.avail_roles.role.role_description,innerHTML:_d37.message.static_user.entity_record.avail_roles.role.role_description,value:_d37.message.static_user.entity_record.avail_roles.role.name}));}}}else{dj.byId("entity_flag_nosend_"+_d6b).set("checked",false);misys.animate("wipeOut","entity_roles_div_"+_d6b);}}}}if(_d37.message.static_user.company_type=="03"){if(_d37.message.static_user.entitlement_record){var _d77;var _d78=false;for(var t2=0;t2<_d37.message.static_user.entitlement_record.length;t2++){_d77=_d37.message.static_user.entitlement_record[t2].entitlement_id;if(_d37.message.static_user.entitlement_code!==null&&_d37.message.static_user.entitlement_code!==undefined&&_d37.message.static_user.entitlement_code===_d37.message.static_user.entitlement_record[t2].entitlement_code&&dj.byId("entitlement_flag_nosend_"+_d77)!==null&&dj.byId("entitlement_flag_nosend_"+_d77)!==undefined){_d78=true;}}for(var t1=0;t1<_d37.message.static_user.entitlement_record.length;t1++){_d77=_d37.message.static_user.entitlement_record[t1].entitlement_id;var _d79;var _d7a=_d37.message.static_user.entitlement_record[t1].entitlement_code;var _d7b=_d37.message.static_user.entitlement_record[t1].default_subsidiary;var _d7c=_d37.message.static_user.entitlement_record[t1].subsidiary_List;if(_d7c!==undefined&&_d7c.length>0){_d79=_d7c.substring(1,_d7c.length-1);}if(_d37.message.static_user.entitlement_code!==null&&_d37.message.static_user.entitlement_code!==undefined&&_d37.message.static_user.entitlement_code===_d37.message.static_user.entitlement_record[t1].entitlement_code&&dj.byId("entitlement_flag_nosend_"+_d77)!==null&&dj.byId("entitlement_flag_nosend_"+_d77)!==undefined){dj.byId("entitlement_flag_nosend_"+_d77).set("checked",true);misys.animate("wipeIn","userSubsidiaryTable_"+_d77);if(_d79!==""&&_d79!==undefined){if(dijit.byId("subsidiary_flag_nosend_".concat(_d79))){dijit.byId("subsidiary_flag_nosend_".concat(_d79)).set("checked",true);dijit.byId("subsidiary_radio_flag_nosend_".concat(_d79)).set("checked",true);dijit.byId("default_subsidiary").set("value",_d7b);}dijit.byId("entitlement_code").set("value",_d7a);}}else{if(_d37.message.static_user.entitlement_code===""){dj.byId("entitlement_flag_nosend_"+_d77).set("checked",false);dj.byId("entitlement_flag_nosend_"+_d77).set("disabled",false);misys.animate("wipeOut","userSubsidiaryTable_"+_d77);if(_d79!==""&&_d79!==undefined){dijit.byId("subsidiary_flag_nosend_".concat(_d79)).set("checked",false);dijit.byId("subsidiary_radio_flag_nosend_".concat(_d79)).set("checked",false);}}else{if(_d37.message.static_user.entitlement_code!==_d37.message.static_user.entitlement_record[t1].entitlement_code&&!_d78){dj.byId("entitlement_flag_nosend_"+_d77).set("disabled",false);}else{if(dj.byId("entitlement_flag_nosend_"+_d77)!==null&&dj.byId("entitlement_flag_nosend_"+_d77)){dj.byId("entitlement_flag_nosend_"+_d77).set("disabled",true);}}}}}}}}dj.byId("xhrDialog")?dj.byId("xhrDialog").hide():"";};function _d68(prop){return function(a,b){if(a[prop]>b[prop]){return 1;}else{if(a[prop]<b[prop]){return -1;}}return 0;};};function _d7d(_d7e){if(_d7e&&_d7e.items!==""){var _d7f=_d7e.store_id;var _d80=dj.byId(_d7f);if(_d80&&_d80.store){var _d81=new dojo.data.ItemFileWriteStore({data:{"identifier":"id","items":[]}});var ctr=0;dojo.forEach(_d7e.items,function(item){var _d82=item;_d82.id=ctr++;_d81.newItem(_d82);});_d80.setStore(_d81);_d80.resize();}}};d.mixin(m,{selectEntityBeforeBank:function(){if(dj.byId("entity")&&dj.byId("entity").get("value")==""&&Object.keys(misys._config.entityBankMap).length>1){var id=this.id;var _d83=function(){dj.byId(id).set("value","");dojox.fx.smoothScroll({node:document.getElementById("entity"),win:window}).play();};m.dialog.show("ERROR",m.getLocalization("selectEntityBeforeBank"),"",_d83);}},populateBankAsPerEntity:function(_d84){var _d85=dj.byId(_d84);var _d86=Object.keys(misys._config.entityBankMap).map(function(itm){return misys._config.entityBankMap[itm];});var _d87={"identifier":"value","items":[]},_d88=new d.data.ItemFileWriteStore({data:_d87});if(_d85){_d85.store=null;for(var i=0;i<_d86.length;i++){if(dj.byId("entity")&&_d86[i].indexOf(dj.byId("entity").get("value"))>-1){_d88.newItem({"value":Object.keys(misys._config.entityBankMap).map(function(itm){return misys._config.entityBankMap[itm];})[i][0],"name":Object.keys(misys._config.entityBankMap)[i]});}}}_d85.store=_d88;var _d89=dj.byId(_d84)?dj.byId(_d84).get("value"):"";var _d8a=_d85.store._arrayOfAllItems;var flag=false;for(i=0;i<_d8a.length;i++){if(_d8a[i]&&_d8a[i].value!=""&&_d8a[i].value==_d89){flag=true;break;}}if(!flag){dj.byId(_d84).set("value","");}},populateReferences:function(){var _d8b=this.get("displayedValue"),_d8c="_",_d8d=this.id.split(_d8c),_d8e=_d8d[0]+_d8c+_d8d[1],_d8f=dj.byId(_d8e+"_customer_reference"),_d90=dj.byId("applicant_reference")||dj.byId("applicant_reference_hidden")||dj.byId("seller_reference")||dj.byId("drawer_reference")||dj.byId("buyer_reference"),_d91=dj.byId("entity")?dj.byId("entity").get("value"):"",_d92=this.get("value")+"_"+_d91,_d93=(m._config.customerReferences&&m._config.customerReferences[_d92])?m._config.customerReferences[_d92]:"",_d94={"identifier":"id","items":[]},_d95=new d.data.ItemFileWriteStore({data:_d94});if(dj.byId(_d8e+"_name")){dj.byId(_d8e+"_name").set("value",_d8b);}if(_d8f){_d8f.store=null;if(_d93&&_d93.length!==0){for(var i=0,_d09=(_d93.length)/2;i<_d09;i++){_d95.newItem({"id":_d93[2*i+1],"name":_d93[2*i]});}}_d8f.store=_d95;if(_d95._arrayOfAllItems.length===1){_d8f.set("displayedValue",_d95._arrayOfAllItems[0].name[0]);}else{if(_d90){if(_d90.get("value")!==""&&_d93.indexOf(_d90.get("value"))!==-1){_d8f.set("value",_d90.get("value"));}else{_d8f.item=null;_d90.set("value","");_d8f.set("displayedValue","");}}}}if(dj.byId("product_code")&&dj.byId("product_code").get("value")==="IO"&&dj.byId("buyer_bank_bic")){dj.byId("buyer_bank_bic").set("value",m._config.isoCodes[this.get("value")]);}if(dj.byId("product_code")&&dj.byId("product_code").get("value")==="EA"&&dj.byId("seller_bank_bic")){dj.byId("seller_bank_bic").set("value",m._config.isoCodes[this.get("value")]);}},updateBusinessDate:function(){var _d96=m._config.bankBusinessDate;var _d97;var _d98;if(this.get("value")!=""){var _d99=parseInt(misys._config.businessDateForBank[this.get("value")][0].value.substring(0,4),10);var _d9a=parseInt(misys._config.businessDateForBank[this.get("value")][0].value.substring(5,7),10);var _d9b=parseInt(misys._config.businessDateForBank[this.get("value")][0].value.substring(8,10),10);_d98=new Date(_d99,_d9a-1,_d9b);_d97=d.date.locale.format((_d98),{selector:"date"});m._config.bankBusinessDate=misys._config.businessDateForBank[this.get("value")][0].name;if(m._config.bankBusinessDate!=_d96){m.dialog.show("CUSTOM-NO-CANCEL",m.getLocalization("changeInBusinessDates"),"Warning",function(){});if(dj.byId("appl_date")){dj.byId("appl_date").set("value",_d97);dojo.byId("appl_date_view_row").childNodes[1].innerHTML=dj.byId("appl_date").get("value");}}}},checkBeneficiaryNicknameDiv:function(){if(misys._config.beneficiarynickname==="true"){if(dj.byId("beneficiary_nickname")&&dj.byId("beneficiary_nickname").get("value")!==""&&d.byId("beneficiarynickname")&&d.byId("beneficiary_nickname_row")){d.style("ben_label","display","inline-block");d.byId("beneficiarynickname").innerHTML=dj.byId("beneficiary_nickname").get("value");d.byId("beneficiarynickname").value=dj.byId("beneficiary_nickname").get("value");d.style("beneficiarynickname","display","inline");m.animate("fadeIn",d.byId("beneficiary_nickname_row"));}else{if(d.byId("beneficiarynickname")){d.style("beneficiarynickname","display","none");m.animate("fadeOut",d.byId("beneficiary_nickname_row"));}}}},checkBeneficiaryNicknameOnFormLoad:function(){if(misys._config.beneficiarynickname==="true"&&dj.byId("beneficiary_nickname")&&dj.byId("beneficiary_nickname").get("value")!==""&&dj.byId("beneficiary_nickname").get("value")!=="null"&&d.byId("beneficiarynickname")){m.animate("fadeIn",d.byId("beneficiarynickname"));d.style("beneficiarynickname","display","inline");d.byId("beneficiarynickname").innerHTML=dj.byId("beneficiary_nickname").get("value");}else{m.animate("wipeOut",d.byId("beneficiary_nickname_row"));}},setCurrency:function(node,arr,_d9c){var _d9d=dj.byId(node),_d9e=d.isArray(arr)?arr:[arr],_d9f,_da0,_da1;if(_d9d&&_d9d.get("value")!==""&&_d9d.state!=="Error"){_d9f=_d9d.get("value");d.forEach(_d9e,function(id){_da0=dj.byId(id);if(_da0){_da1=d.cldr.monetary.getData(_d9f);if(dj.byId("product_code")&&((dj.byId("product_code").get("value")==="IP")||(dj.byId("product_code").get("value")==="IN")||(dj.byId("product_code").get("value")==="PO")||(dj.byId("product_code").get("value")==="SO"))){_d9d.set("readOnly",true);}var _da2={round:_da1.round,places:_da1.places,max:999999999999.99,min:0.01};if(_da1.places===2){_da2={round:_da1.round,places:_da1.places,min:0,max:999999999999.99};}else{if(_da1.places===3){_da2={round:_da1.round,places:_da1.places,min:0,max:99999999999.999};}else{if(_da1.places===0){_da2={round:_da1.round,places:_da1.places,min:0,max:999999999999};}}}d.mixin(_da2,_d9c);_da0.set("constraints",_da2);_da0.set("value",_da0.get("value"));}});}},setTnxAmt:function(amt){var _da3=dj.byId("tnx_amt");if(_da3){_da3.set("value",amt);}},setTnxCurCode:function(_da4){var _da5=dj.byId("tnx_cur_code");if(_da5){_da5.set("value",_da4);}},amendTransaction:function(){var _da6=("inc_amt"===this.get("id"))?dj.byId("dec_amt"):dj.byId("inc_amt");if(!isNaN(this.get("value"))){_da6.set("disabled",true);}else{this.set("disabled",false);_da6.set("disabled",false);}_d14(this);},amendTransactionBank:function(){var _da7=("inc_amt_value"===this.get("id"))?dj.byId("dec_amt_value"):dj.byId("inc_amt_value");if(!isNaN(this.get("value"))){_da7.set("disabled",true);}else{this.set("disabled",false);_da7.set("disabled",false);}_d14(this);},amendTransactionLiabAmt:function(){dj.byId("lc_liab_amt").set("value",dj.byId("org_lc_cur_code_liab_amt").value);},setPaymentDescriptionForCAD:function(){if(dojo.byId("date-value_description").innerHTML!==""&&dojo.byId("request_value_code").value==="SPOT"&&dojo.byId("payment_cur_code").value==="CAD"&&dojo.byId("applicant_cur_code").value==="USD"){dojo.byId("date-value_description").innerText=m.getLocalization("valueOneBusinessDayCADdeal");}else{if(dojo.byId("date-value_description").innerHTML!==""&&dojo.byId("request_value_code").value==="SPOT"&&(dojo.byId("payment_cur_code").value!=="CAD"||dojo.byId("applicant_cur_code").value!=="USD")){dojo.byId("date-value_description").innerText=m.getLocalization("valueTwoBusinessDay");}}},toggleAmendmentFields:function(){var _da8=dj.byId("inc_amt"),_da9=dj.byId("dec_amt");if(this.get("checked")){_da8.set("value","");_da8.set("disabled",true);_da9.set("disabled",false);_d14(_da9);}else{_da8.onBlur();_da9.onBlur();}},updateSubTnxTypeCode:function(){var _daa=misys._config.productCode.toLowerCase(),_dab=dj.byId("inc_amt"),_dac=dj.byId("dec_amt"),_dad=dj.byId(_daa+"_release_flag"),_dae=dj.byId("sub_tnx_type_code"),_daf="03",_db0=_dab?dojo.number.parse(_dab.get("value")):"",_db1=_dac?dojo.number.parse(_dac.get("value")):"";if(_dad&&_dad.get("checked")){_daf="05";}else{if(_dab&&!isNaN(_db0)&&_db0!==""){_daf="01";}else{if(_dac&&!isNaN(_db1)&&_db1!==""){_daf="02";}}}if(_dae){_dae.set("value",_daf);}},enableBeneficiaryFields:function(){var ids=["beneficiary_address_line_1","beneficiary_address_line_2","beneficiary_dom","beneficiary_address_line_4"];d.forEach(ids,function(id){var _db2=dj.byId(id);if(_db2){_db2.set("disabled",false);_db2.set("readOnly",false);}});},toggleProdStatCodeFields:function(){var _db3=dj.byId("prod_stat_code").get("value"),_db4=dj.byId("action_req_code"),_db5=["tnx_amt"],_db6=["tnx_amt","latest_answer_date"];if(_db4){if(_db3==="01"||_db3==="18"){_db4.set("readOnly",true);_db4.reset();}else{if(_db3==="12"){_db4.set("value","12");_db4.set("readOnly",true);m.toggleFields(false,["latest_answer_date"],_db5,true);_db5=["tnx_amt"];}else{if(_db3==="26"){_db4.set("value","26");_db4.set("readOnly",true);m.toggleFields(false,["latest_answer_date"],_db5,true);_db5=["tnx_amt"];}else{if(_db3==="78"||_db3==="79"||(_db3==="98"&&dj.byId("product_code")&&dj.byId("product_code").get("value")==="TF")){_db4.set("value","07");_db4.set("readOnly",true);}else{if(_db3==="A9"){_db4.reset();_db4.set("readOnly",false);_db6=["tnx_amt"];_db5=[];}else{if(_db3==="31"){var _db7=dj.byId("product_code").get("value");if(dj.byId("product_code")&&(_db7==="LC"||_db7==="SI"||_db7==="BG"||_db7==="SG")){_db4.set("value","");_db4.set("readOnly",true);}else{_db4.set("value","03");_db4.set("readOnly",true);}}else{if(_db3==="81"){_db4.set("value","05");_db4.set("readOnly",true);}else{_db4.set("readOnly",false);_db6=["latest_answer_date"];}}}}}}}}var _db8=(_db3==="08"&&dj.byId("tnx_type_code")&&dj.byId("tnx_type_code").get("value")==="03")?true:!(_db3!=="01"&&_db3!=="07"&&_db3!=="04"&&_db3!=="05"&&_db3!=="12"&&_db3!=="26"&&_db3!=="13"&&_db3!=="14"&&_db3!=="15"&&_db3!=="A9");m.toggleFields(_db8,_db6,_db5);},toggleGuaranteeText:function(){var _db9=this.get("value"),_dba=d.byId("document-editor"),_dbb=dj.byId("bg_document");m.toggleFields(_db9==="03",null,["bg_text_type_details"]);if(_db9==="04"){m.animate("fadeIn",_dba,function(){if(!_dbb){var _dbc=d.byId("bg_document");_dbb=new dj.Editor({id:"bg_document",name:"bg_document",rows:_d06,cols:_d07,maxSize:_d08,plugins:["undo","redo","|","bold","italic","underline","strikethrough","|","insertOrderedList","insertUnorderedList","|","indent","outdent","|","justifyLeft","justifyRight","justifyCenter","justifyFull","||",{name:"dijit._editor.plugins.FontChoice",command:"fontName"},{name:"m.editor.plugins.ProductFieldChoice",command:"misysEditorPluginsProductFieldChoice",product:"BG"}]},_dbc);var _dbd=d.byId("rteContent");var _dbe=_dbd.innerHTML;_dbe.replaceAll("&lt;","<");_dbe.replaceAll("&gt;",">");_dbe.replaceAll("&amp;","&");_dbb.set("value",(_dbe||""));}});}else{m.animate("fadeOut",_dba,function(){if(_dbb){_dbb.set("value","");}});}},setBuyerReference:function(){var _dbf=dj.byId("buyer_reference")||dj.byId("buyer_reference_hidden");if(_dbf){_dbf.set("value",this.get("value"));}},setSellerReference:function(){var _dc0=dj.byId("seller_reference")||dj.byId("seller_reference_hidden");if(_dc0){_dc0.set("value",this.get("value"));}},setApplicantReference:function(){var _dc1=dj.byId("applicant_reference")||dj.byId("applicant_reference_hidden");if(_dc1){_dc1.set("value",this.get("value"));}},getMaturityDate:function(){var _dc2=dj.byId("tenor"),_dc3=_dc2.get("value"),_dc4=dj.byId("iss_date").get("value"),_dc5=dj.byId("maturity_date"),_dc6="";if(this.id==="maturity_date"){_dc6=_dc4?d.date.difference(_dc4,this.get("value"),"day"):_dc3;_dc2.set("value",_dc6);}else{if(_dc3!==""&&_dc4){_dc5.set("value",d.date.add(_dc4,"day",_dc3));}}},initFTCounterparties:function(){var _dc7=this.get("value"),that;if(_dc7!==dj.byId("ft_cur_code").get("value")){if(d.query(".widgetContainer *[id^='counterparty_details_document_id_']").length>0){that=this;m.dialog.show("CONFIRMATION",m.getLocalization("modifyFundTransferCurrencyConfirmation"),"",function(){_d1a(that);});}else{_d1a(this);}}},disableNonAcceptanceFields:function(){if(dj.byId("term_code").get("value")==="01"){this.set("checked",false);}},setCreditAvailBy:function(){var _dc8=this.get("value"),_dc9=dj.byId("credit_available_with_bank_name"),_dca=dj.byId("fakeform1").get("value").cr_avl_by_code,_dcb,_dcc,_dcd=dj.byId("credit_available_with_bank_address_line_1");m.toggleFields(_dc8===m._config.other,["credit_available_with_bank_address_line_1","credit_available_with_bank_address_line_2","credit_available_with_bank_dom","credit_available_with_bank_address_line_4"]);_dcb=_dc9.get("value");_dcc=_dcd.get("value");if((!(_dcb!=""&&_dcc!="")&&(dj.byId("formLoad")&&dj.byId("formLoad").get("value")==="false")||!dj.byId("formLoad"))||(dj.byId("template_id")&&dj.byId("template_id").getValue()!=="")){_dc9.set("value",this.get("displayedValue"));}var _dce=(!_dcb&&!dj.byId("tenor_maturity_date").get("value")&&!dj.byId("tenor_days").get("value")&&!dj.byId("tenor_period").get("value")&&!dj.byId("tenor_from_after").get("value")&&!dj.byId("tenor_days_type").get("value")&&!m._config.firstPageLoad);if(_dce){if(_dca){_d1e(_dca,_dc8);}}},getSwiftBankDetails:function(_dcf,_dd0,_dd1,_dd2,_dd3,_dd4,_dd5,_dd6,_dd7,_dd8){var _dd9=false;if(!_dd8){_dd8="";}if(!_dd2){_dd2=[_dd4+"name",_dd4+"address_line_1",_dd4+"address_line_2",_dd4+"dom",_dd4+"contact_name",_dd4+"phone",_dd4+"country"];}if(!_dd3){_dd3=[_dd4+"name",_dd4+"address_line_1",_dd4+"country"];}var _dda=dj.byId(_dd0);var _ddb=dj.byId(_dd1);if(_dda&&(_dda.get("value")!=="")){d.forEach(_dd2,function(node){if(dj.byId(node)){if(_dd5){dj.byId(node).set("value","",false);}if(_dd7){dj.byId(node).set("readOnly",true);}}});if(_dd6){d.forEach(_dd3,function(node){if(dj.byId(node)){m.toggleRequired(node,true);}});}if(_dd5&&(_dda.validate())){var _ddc="";var _ddd="";if(_dda.get("value")){_ddc=_dda.get("value");}if(_ddb&&(_ddb.get("value"))){_ddd=_ddb.get("value");}m.xhrPost({url:misys.getServletURL("/screen/AjaxScreen/action/GetSwiftBankDetails"),content:{bicCode:_ddc,brchCode:_ddd,country:_dd8,customerBanks:_dcf},sync:true,handleAs:"json",load:function(_dde,args){var _ddf=_dde;_dd9=_dde.valid;if(_dd9){var _de0=[_ddf.bankName,_ddf.bankAddressLine1,_ddf.bankAddressLine2,_ddf.bankDom,_ddf.bankContactName,_ddf.bankPhone,_ddf.bankCountry];d.forEach(_dd2,function(node,i){if(dj.byId(node)){if(i<7){dj.byId(node).set("value",_de0[i],false);}}});}else{var _de1="";if((_dda&&(_dda.get("value")!==""))){_dda.focus();_de1=m.getLocalization("swiftValidationFailed",[_dda.get("value")]);_dda.set("value","");_dda.set("state","Error");dijit.hideTooltip(_dda.domNode);dijit.showTooltip(_de1,_dda.domNode,0);}}},customError:function(_de2,args){console.warn("getSwiftBankDetails error");}});}else{if(dijit.byId("bank_iso_code")){setTimeout(function(){dijit.byId("bank_iso_code").set("readOnly",false);},600);}}}else{d.forEach(_dd2,function(node){if(dj.byId(node)){if(_dd7){dj.byId(node).set("readOnly",false);}}});if(_dd6){d.forEach(_dd3,function(node){if(dj.byId(node)){m.toggleRequired(node,false);}});}if(d.byId(_dd4+"iso_code_row")&&d.byId(_dd4+"iso_code_row").parentNode&&d.byId(_dd4+"iso_code_row").parentNode.id){var _de3=d.byId(_dd4+"iso_code_row").parentNode.id;if(dj.byId(_de3)){var _de4=dj.byId(_de3).get("title");if(_de4.indexOf("*")!==-1){_de4=_de4.substring(_de4.indexOf(">")+1,_de4.lastIndexOf("<"));if(_de4.indexOf("*")!==-1){_de4=_de4.substring(_de4.indexOf("*")+1);dj.byId(_de3).set("title",_de4);}else{dj.byId(_de3).set("title",_de4);}}}}}},getIFSCCodeDetails:function(_de5,_de6,_de7,_de8,_de9,_dea,_deb){var _dec=false;if(!_de6){_de6=[_de8+"ifsc_name",_de8+"ifsc_address_line_1",_de8+"ifsc_address_line_2",_de8+"ifsc_city"];}if(!_de7){_de7=[_de8+"ifsc_code",_de8+"ifsc_name"];}var _ded=dj.byId(_de5);if(_ded&&(_ded.get("value")!=="")){d.forEach(_de6,function(node){if(dj.byId(node)){if(_de9){dj.byId(node).set("value","",false);}if(_deb){dj.byId(node).set("readOnly",true);}}});if(_dea){d.forEach(_de7,function(node){if(dj.byId(node)){m.toggleRequired(node,true);}});}if(_de9&&(_ded.validate())){var _dee="";if(_ded.get("value")){_dee=_ded.get("value");}m.xhrPost({url:misys.getServletURL("/screen/AjaxScreen/action/GetIFSCCodeDetails"),content:{ifscCode:_dee,paramId:"P701"},sync:true,handleAs:"json",load:function(_def,args){var _df0=_def;_dec=_def.valid;if(_dec){var _df1=[_df0.bankName,_df0.bankAddressLine1,_df0.bankAddressLine2,_df0.city];d.forEach(_de6,function(node,i){if(dj.byId(node)){if(i<7){dj.byId(node).set("value",_df1[i],false);}}});_ded.set("value",_df0.bankIFSCCode);}else{var _df2="";if((_ded&&(_ded.get("value")!==""))){_ded.focus();_df2=m.getLocalization("ifscCodeValidationFailed",[_ded.get("value")]);_ded.set("value","");_ded.set("state","Error");dijit.hideTooltip(_ded.domNode);dijit.showTooltip(_df2,_ded.domNode,0);}}},customError:function(_df3,args){console.warn("getSwiftBankDetails error");}});}else{setTimeout(function(){dijit.byId("bank_iso_code").set("readOnly",false);},600);}}else{d.forEach(_de6,function(node){if(dj.byId(node)){if(_deb){dj.byId(node).set("readOnly",false);}}});if(_dea){d.forEach(_de7,function(node){if(dj.byId(node)){m.toggleRequired(node,false);}});}if(d.byId(_de8+"ifsc_code_row")&&d.byId(_de8+"ifsc_code_row").parentNode&&d.byId(_de8+"ifsc_code_row").parentNode.id){var _df4=d.byId(_de8+"ifsc_code_row").parentNode.id;if(dj.byId(_df4)){var _df5=dj.byId(_df4).get("title");if(_df5.indexOf("*")!==-1){_df5=_df5.substring(_df5.indexOf(">")+1,_df5.lastIndexOf("<"));if(_df5.indexOf("*")!==-1){_df5=_df5.substring(_df5.indexOf("*")+1);dj.byId(_df4).set("title",_df5);}else{dj.byId(_df4).set("title",_df5);}}}}}},setSwiftBankDetailsForOnBlurEvent:function(_df6,_df7,_df8,_df9,_dfa,_dfb,_dfc,_dfd,_dfe,_dff){if(m._config.isBankDetailsPopulated){m.getSwiftBankDetails(_df6,_df7,_df8,_df9,_dfa,_dfb,false,_dfd,_dfe,_dff);}else{m.getSwiftBankDetails(_df6,_df7,_df8,_df9,_dfa,_dfb,_dfc,_dfd,_dfe,_dff);}m._config.isBankDetailsPopulated=false;},setIFSCCodeDetailsForOnBlurEvent:function(_e00,_e01,_e02,_e03,_e04,_e05,_e06){m.getIFSCCodeDetails(_e00,_e01,_e02,_e03,_e04,_e05,_e06);},toggleDraftTerm:function(_e07){var _e08=(!dj.byId("tenor_maturity_date").get("value")&&!dj.byId("tenor_days").get("value")&&!dj.byId("tenor_period").get("value")&&!dj.byId("tenor_from_after").get("value")&&!dj.byId("tenor_days_type").get("value")&&!m._config.firstPageLoad);if(!d.isString(_e07)){_e07=this.get("value");}m.toggleFields(_e07==="02",null,["tenor_maturity_date"],_e08);m.toggleFields(_e07==="03",null,["tenor_days","tenor_period","tenor_from_after","tenor_days_type"],_e08);m.toggleFields(_e07==="05",null,["draft_term"],_e08);if(dj.byId("tenor_days_type").get("value")!=="99"){dj.byId("tenor_type_details").set("value","");}if(dj.byId("tenor_days_type")){var _e09=dj.byId("tenor_days_type").get("value")==="99";m.toggleFields((_e09),null,["tenor_type_details"]);}},initDraweeFields:function(){var _e0a=false;if(dj.byId("cr_avl_by_code_2")){_e0a=dj.byId("cr_avl_by_code_2").get("checked");}var _e0b=false;if(dj.byId("cr_avl_by_code_3")){_e0b=dj.byId("cr_avl_by_code_3").get("checked");}if(!_e0a&&!_e0b){dj.byId("drawee_details_bank_name").set("value","");if(dj.byId("drawee_details_bank_iso_code")){dj.byId("drawee_details_bank_iso_code").set("value","");}if(dj.byId("drawee_details_bank_address_line_1")){dj.byId("drawee_details_bank_address_line_1").set("value","");dj.byId("drawee_details_bank_address_line_2").set("value","");dj.byId("drawee_details_bank_dom").set("value","");dj.byId("drawee_details_bank_address_line_4").set("value","");}if(d.byId("drawee_details_bank_img")){m.animate("fadeOut","drawee_details_bank_img");}}else{if(d.byId("drawee_details_bank_img")){m.animate("fadeIn","drawee_details_bank_img");}}m.toggleFields(_e0a||_e0b,["drawee_details_bank_address_line_2","drawee_details_bank_dom","drawee_details_bank_address_line_4"],["drawee_details_bank_name","drawee_details_bank_address_line_1","drawee_details_bank_iso_code"],true);if(dj.byId("mode")&&dj.byId("mode").get("value")==="RELEASE"){m.toggleRequired("drawee_details_bank_address_line_1",false);}var _e0c=dj.byId("product_code").get("value");if(dj.byId("product_code")&&(_e0c==="LC"||_e0c==="SI")&&(_e0a||_e0b)){if(dj.byId("drawee_details_bank_iso_code")&&dj.byId("drawee_details_bank_name")&&dj.byId("drawee_details_bank_address_line_1")){m.toggleRequired("drawee_details_bank_iso_code",false);m.toggleRequired("drawee_details_bank_name",false);m.toggleRequired("drawee_details_bank_address_line_1",false);}}},togglePaymentDraftAt:function(){var _e0d=dj.byId("tenor_type_1"),_e0e=dj.byId("tenor_type_2"),_e0f=dj.byId("tenor_type_3"),_e10=dj.byId("draft_term"),_e11=this.get("value"),_e12=d.byId("payment-draft"),_e13=d.byId("draft-term"),_e14=dj.byId("credit_available_with_bank_type");if(!_e0d||!_e0e||!_e0f){return;}_e0d.set("disabled",true);_e0e.set("disabled",true);_e0f.set("disabled",true);if(m._config.firstPageLoad&&_e11!=="05"){_e10.set("value","");}if(_e11!=="05"&&d.style(_e12,"opacity")!==1){m.animate("fadeOut",_e13);m.animate("fadeIn",_e12);}switch(_e11){case "01":_e0d.set("disabled",false);_e0d.set("checked",true);m.toggleDraftTerm("01");break;case "02":_e0e.set("disabled",false);_e0f.set("disabled",false);if(dj.byId("tenor_maturity_date").get("displayedValue")!==""){_e0e.set("checked",true);m.toggleDraftTerm("02");_e10.set("value",dj.byId("tenor_maturity_date").get("displayedValue"));break;}else{_e0f.set("checked",true);m.toggleDraftTerm("03");break;}break;case "03":_e0d.set("disabled",false);_e0e.set("disabled",false);_e0f.set("disabled",false);if(_e0d.get("checked")){_e0d.set("checked",true);m.toggleDraftTerm("01");break;}else{if(dj.byId("tenor_maturity_date").get("displayedValue")!==""){_e0e.set("checked",true);m.toggleDraftTerm("02");break;}else{_e0f.set("checked",true);m.toggleDraftTerm("03");break;}}break;case "06":_e0d.set("disabled",true);_e0e.set("disabled",true);_e0f.set("disabled",true);m.toggleDraftTerm("01");break;case "04":_e0e.set("disabled",false);_e0f.set("disabled",false);if(dj.byId("tenor_maturity_date").get("displayedValue")!==""){_e0e.set("checked",true);m.toggleDraftTerm("02");break;}else{_e0f.set("checked",true);m.toggleDraftTerm("03");break;}break;case "05":m.animate("fadeOut",_e12);m.animate("fadeIn",_e13);_e0d.set("checked",false);_e0e.set("checked",false);_e0f.set("checked",false);m.toggleDraftTerm("05");break;default:break;}var _e15="01";if(dj.byId("tnx_type_code")){_e15=dj.byId("tnx_type_code").get("value");}if(_e14&&!(_e15==="03")){_d1e(_e11,_e14.get("value"));}m.initDraweeFields();},calcMaturityDate:function(){if(dj.byId("tenor_days").get("value")!==""&&!isNaN(dj.byId("tenor_days").get("value"))&&dj.byId("tenor_period").get("value")!==""&&dj.byId("tenor_from_after").get("value")!==""){var _e16=dj.byId("tenor_base_date").get("value");var _e17=dj.byId("tenor_days").get("value");var _e18=dj.byId("tenor_period").get("value");var _e19,_e1a=null;var _e1b;switch(_e18){case "D":_e19="day";break;case "W":_e19="week";break;case "M":_e19="month";break;case "Y":_e19="year";break;default:break;}var _e1c=dj.byId("tenor_from_after").get("value");if(dj.byId("tenor_base_date").get("displayedValue")!==""){_e1a=d.date.add(_e16,_e19,_e17);if(_e1c==="F"){_e1a=d.date.add(_e1a,"day",-1);}_e1b=new Date(_e1a.getTime());_e1b=d.date.locale.format(_e1b,{selector:"date"});dj.byId("tenor_maturity_date").set("displayedValue",_e1b);dj.byId("tenor_maturity_date").set("disabled",true);}else{dj.byId("tenor_maturity_date").set("displayedValue","");}}},toggleAllTenorFields:function(){var _e1d=["tenor_days","tenor_period","tenor_from_after","tenor_base_date","tenor_maturity_date","tenor_days_type"];if(m._config.isBank){_e1d=["tenor_days","tenor_period","tenor_from_after","tenor_base_date","tenor_maturity_date","tenor_days_type"];}var _e1e=dj.byId("tenor_type_2").get("checked");var _e1f=dj.byId("tenor_type_3").get("checked");var _e20=dj.byId("term_code")?dj.byId("term_code").get("value"):"";if(_e1e){m.toggleFields(_e1e,["tenor_days_type"],_e1d,_e1e,_e1e);if(dojo.query(_cfb)[0].innerHTML.indexOf("*")===-1){dojo.query(_cfb)[0].innerHTML="<span class='required-field-symbol'>*</span>"+dojo.query(_cfb)[0].innerHTML;}m.toggleRequired("tenor_days_type",true);m.toggleRequired("tenor_days",true);m.toggleRequired("tenor_period",true);m.toggleRequired("tenor_from_after",true);m.toggleRequired("tenor_maturity_date",true);m.toggleRequired("tenor_maturity_date",false);m.toggleRequired("tenor_base_date",false);if(_e20==="03"){m.animate("fadeIn",d.byId("boe"));}}else{if(_e1f){m.toggleFields(_e1f,["tenor_days_type"],_e1d,_e1f,_e1f);if(dojo.query(_cfb)[0].innerHTML.indexOf("*")===-1){dojo.query(_cfb)[0].innerHTML="<span class='required-field-symbol'>*</span>"+dojo.query(_cfb)[0].innerHTML;}m.toggleRequired("tenor_days_type",true);m.toggleRequired("tenor_days",true);m.toggleRequired("tenor_period",true);m.toggleRequired("tenor_from_after",true);if(dj.byId("tenor_type_2").get("checked")){m.toggleRequired("tenor_base_date",false);m.toggleRequired("tenor_maturity_date",false);}else{m.toggleRequired("tenor_base_date",true);m.toggleRequired("tenor_maturity_date",true);}if(_e20==="03"){m.animate("fadeIn",d.byId("boe"));}}else{dojo.query(_cfb)[0].innerHTML=m.getLocalization("tenorPeriod");m.toggleRequired("tenor_days_type",false);m.toggleRequired("tenor_days",false);m.toggleRequired("tenor_period",false);m.toggleRequired("tenor_from_after",false);m.toggleRequired("tenor_maturity_date",false);dj.byId("tenor_type_details").set("displayedValue","");dj.byId("tenor_type_details").set("disabled",true);dj.byId("tenor_maturity_date").set("displayedValue","");dj.byId("tenor_days").set("displayedValue","");dj.byId("tenor_days").set("disabled",true);dj.byId("tenor_period").set("displayedValue","");dj.byId("tenor_period").set("disabled",true);dj.byId("tenor_from_after").set("displayedValue","");dj.byId("tenor_from_after").set("disabled",true);dj.byId("tenor_days_type").set("displayedValue","");dj.byId("tenor_days_type").set("disabled",true);dj.byId("tenor_base_date").set("displayedValue","");dj.byId("tenor_base_date").set("disabled",true);if(_e20==="03"){m.animate("fadeOut",d.byId("boe"));dj.byId("boe_flag").set("checked",false);}}}},toggleBankPaymentDraftAt:function(){var _e21,_e22=["draft_term","drawee_details_bank_name","drawee_details_bank_address_line_1","drawee_details_bank_address_line_2","drawee_details_bank_dom","drawee_details_bank_address_line_4","drawee_details_bank_iso_code","drawee_details_bank_reference"];d.forEach(_e22,function(id){_e21=dj.byId(id);if(_e21){_e21.reset();}});},setDraftTerm:function(){var _e23=dj.byId("draft_term"),_e24=misys._config.tenorPeriodLabels,_e25=misys._config.tenorFromAfterLabels,_e26=misys._config.tenorDaysTypeLabels,_e27,_e28,days,_e29;if(_e23){if(!(dj.byId("cr_avl_by_code_5")&&dj.byId("cr_avl_by_code_5").get("checked"))){_e23.set("value","");}if(dj.byId("tenor_type_1")&&dj.byId("tenor_type_1").get("checked")){_e23.set("value",m.getLocalization("tenorSight"));}else{if((dj.byId("tenor_type_2")&&dj.byId("tenor_type_2").get("checked"))&&dj.byId("tenor_maturity_date").get("displayedValue")!==""){_e23.set("value",dj.byId("tenor_maturity_date").get("displayedValue"));}else{_e27=dj.byId("tenor_period").get("value");_e28=dj.byId("tenor_from_after").get("value");days=dj.byId("tenor_days").get("value");_e29=dj.byId("tenor_days_type").get("value");if(!isNaN(days)&&days!==0||(days===0&&_e29==="07")){if(_e29!=="99"){_e23.set("value",days+" "+_e24[_e27]+" "+_e25[_e28]+" "+_e26[_e29]);}else{_e23.set("value",days+" "+_e24[_e27]+" "+_e25[_e28]+" "+dj.byId("tenor_type_details").get("value"));}}}}}},setDraftDaysReadOnly:function(){this.set("readOnly",!dj.byId("tenor_type_3").get("checked"));},checkIrrevocableFlag:function(){var _e2a=dj.byId("ntrf_flag"),_e2b=dj.byId("stnd_by_lc_flag");if(!this.get("checked")&&_e2a&&_e2b&&!_e2a.get("checked")&&_e2b.get("checked")){this.set("checked",true);m.showTooltip(m.getLocalization("irrevocableStandByError"),this.domNode,["before"]);}},checkNonTransferableFlag:function(){var _e2c=dj.byId("irv_flag"),_e2d=dj.byId("stnd_by_lc_flag");if(!this.get("checked")&&_e2c&&_e2d&&!_e2c.get("checked")&&_e2d.get("checked")){this.set("checked",false);_e2c.set("checked",true);m.showTooltip(m.getLocalization("irrevocableStandByError"),_e2c.domNode,["before"]);}},checkStandByFlag:function(){var _e2e=dj.byId("irv_flag"),_e2f=dj.byId("ntrf_flag");if(this.get("checked")&&_e2f&&_e2e&&!_e2f.get("checked")&&!_e2e.get("checked")){_e2e.set("checked",true);m.showTooltip(m.getLocalization("irrevocableStandByError"),_e2e.domNode,["before"]);}},resetConfirmationCharges:function(){if(m._config.charge_splitting_lc){if(dj.byId("open_chrg_brn_by_code_3")){if(!dj.byId("cfm_chrg_brn_by_code_3").get("checked")){dj.byId("cfm_chrg_brn_by_code_1").set("checked",false);dj.byId("cfm_chrg_brn_by_code_2").set("checked",this.get("value")!=="03");dj.byId("cfm_chrg_brn_by_code_3").set("checked",false);}if(dj.byId("cfm_inst_code_3").get("checked")){dj.byId("cfm_chrg_brn_by_code_1").set("checked",false);dj.byId("cfm_chrg_brn_by_code_2").set("checked",this.get("value")!=="03");dj.byId("cfm_chrg_brn_by_code_3").set("checked",false);dj.byId("cfm_chrg_applicant").set("disabled",true).set("value","").set("required",false);dj.byId("cfm_chrg_beneficiary").set("disabled",true).set("value","").set("required",false);}}}else{if(dj.byId("cfm_chrg_brn_by_code_1")){dj.byId("cfm_chrg_brn_by_code_1").set("checked",false);}if(dj.byId("cfm_chrg_brn_by_code_2")){dj.byId("cfm_chrg_brn_by_code_2").set("checked",this.get("value")!=="03");}}var _e30=(this.get("value")==="01")?"fadeIn":"fadeOut";m.animate(_e30,d.byId("confirmation-charges"));if(m._config.swift2018Enabled){if(this.get("value")==="01"||this.get("value")==="02"){m.animate("fadeIn",d.byId("requested-conf-party"));m.toggleFields(true,["req_conf_party_flag"],null,null,true);dj.byId("req_conf_party_flag").set("value",_cfc);}else{m.animate("fadeOut",d.byId("requested-conf-party"));m.toggleFields(false,["req_conf_party_flag","requested_confirmation_party_name","requested_confirmation_party_address_line_1","requested_confirmation_party_address_line_2","requested_confirmation_party_dom","requested_confirmation_party_address_line_4","requested_confirmation_party_iso_code"],null,null,false);}}},resetConfirmationChargesLC:function(){var _e31;var _e32;if(document.getElementById("_userType")){_e31=document.getElementById("_userType").getAttribute("value");}var _e33=(_e31!=="03"&&_e31!=="06")?"bank":"customer";if(dj.byId("cfm_chrg_brn_by_code_1")){dj.byId("cfm_chrg_brn_by_code_1").set("checked",false);}if(dj.byId("cfm_chrg_brn_by_code_2")){dj.byId("cfm_chrg_brn_by_code_2").set("checked",this.get("value")!=="03");}var _e34=(this.get("value")==="01")?"fadeIn":"fadeOut";m.animate(_e34,d.byId("confirmation-charges"));var _e35=dj.byId("req_conf_party_flag");var _e36=dj.byId("req_conf_party_flag_filtered");var _e37="01";if(dj.byId("tnx_type_code")){_e37=dj.byId("tnx_type_code").get("value");}var _e38="01";if(dj.byId("prod_stat_code")){_e38=dj.byId("prod_stat_code").get("value");}if(_e36&&((_e37==="15"&&_e38==="08")||_e37==="03")){_e35=_e36;}if(this.get("value")==="01"||this.get("value")==="02"){_e35.set("disabled",false);_e35.set("value","");}else{if(_e33==="bank"){m.toggleRequired(_e35,false);if((_e37==="15"&&_e38==="08")||_e37==="03"){var _e39=dj.byId("req_conf_party_flag");m.toggleRequired(_e39,false);}_e32=dj.byId("req_conf_party_flag").parentTab;m.resetTabState(dijit.byId(_e32));}_e35.set("disabled",true);_e35.set("value","");d.byId(_cfd).style.display="none";}},validateBankEntry:function(_e3a){var _e3b=dj.byId(_e3a+"_name");var _e3c=dj.byId(_e3a+"_address_line_1");var _e3d=dj.byId(_e3a+"_iso_code");if(_e3b.get("value")==""&&_e3d.get("value")==""&&_e3c.get("value")==""){m.setRequiredFields([_e3b,_e3c],true);_e3b.focus();_e3c.focus();return false;}else{if(_e3d.get("value")==""&&(_e3b.get("value")==""||_e3c.get("value")=="")){var _e3e=_e3b.get("value")==""?_e3b:_e3c;m.setRequiredFields([_e3e],true);_e3e.focus();return false;}else{return true;}}},resetBankRequiredFields:function(){var _e3f=this.get("value");var _e40;var _e41;if(_e3f==="Other"){_e40=dj.byId("advising_bank_name").parentTab;m.resetTabState(dijit.byId(_e40));_e40=dj.byId("advise_thru_bank_name").parentTab;m.resetTabState(dijit.byId(_e40));m.setRequiredFields(["advising_bank_name","advising_bank_address_line_1","advise_thru_bank_name","advise_thru_bank_address_line_1"],false);d.byId(_cfd).style.display="block";m.toggleFields(true,["requested_confirmation_party_name","requested_confirmation_party_address_line_1","requested_confirmation_party_address_line_2","requested_confirmation_party_dom","requested_confirmation_party_address_line_4","requested_confirmation_party_iso_code"],null,null,true);}else{if(_e3f===_cfc){_e41=dj.byId("advising_bank_iso_code").get("value");_e40=dj.byId("advise_thru_bank_name").parentTab;m.resetTabState(dijit.byId(_e40));if(_e41!=="null"&&_e41.length>0){m.setRequiredFields(["advising_bank_name","advising_bank_address_line_1"],false);}else{m.setRequiredFields(["advising_bank_name","advising_bank_address_line_1"],true);}m.setRequiredFields(["advise_thru_bank_name","advise_thru_bank_address_line_1"],false);d.byId(_cfd).style.display="none";m.toggleFields(false,["requested_confirmation_party_name","requested_confirmation_party_address_line_1","requested_confirmation_party_address_line_2","requested_confirmation_party_dom","requested_confirmation_party_address_line_4","requested_confirmation_party_iso_code"],null,null,false);}else{if(_e3f==="Advise Thru Bank"){_e41=dj.byId("advise_thru_bank_iso_code").get("value");_e40=dj.byId("advising_bank_name").parentTab;m.resetTabState(dijit.byId(_e40));if(_e41!=="null"&&_e41.length>0){m.setRequiredFields(["advise_thru_bank_name","advise_thru_bank_address_line_1"],false);}else{m.setRequiredFields(["advise_thru_bank_name","advise_thru_bank_address_line_1"],true);}m.setRequiredFields(["advising_bank_name","advising_bank_address_line_1"],false);d.byId(_cfd).style.display="none";m.toggleFields(false,["requested_confirmation_party_name","requested_confirmation_party_address_line_1","requested_confirmation_party_address_line_2","requested_confirmation_party_dom","requested_confirmation_party_address_line_4","requested_confirmation_party_iso_code"],null,null,false);}else{_e40=dj.byId("advising_bank_name").parentTab;m.resetTabState(dijit.byId(_e40));_e40=dj.byId("advise_thru_bank_name").parentTab;m.resetTabState(dijit.byId(_e40));m.setRequiredFields(["advising_bank_name","advising_bank_address_line_1","advise_thru_bank_name","advise_thru_bank_address_line_1"],false);d.byId(_cfd).style.display="none";m.toggleFields(false,["requested_confirmation_party_name","requested_confirmation_party_address_line_1","requested_confirmation_party_address_line_2","requested_confirmation_party_dom","requested_confirmation_party_address_line_4","requested_confirmation_party_iso_code"],null,null,false);}}}},resetTabState:function(tab){if(tab){var _e42=tab.get("title");if(_e42.indexOf("<img")!==-1&&_e42.indexOf("*")!==-1){_e42=_e42.replace("*","");_e42=_e42.substring(0,_e42.indexOf("<img"));}else{if(_e42.indexOf("*")!==-1){_e42=_e42.replace("*","");}}tab.set("title",_e42);}},resetRequestedConfirmationParty:function(){var _e43;var _e44;if(document.getElementById("_userType")){_e43=document.getElementById("_userType").getAttribute("value");}var _e45=(_e43!=="03"&&_e43!=="06")?"bank":"customer";if(dijit.byId("cfm_inst_code_1")&&!dijit.byId("cfm_inst_code_1").get("value")&&!dijit.byId("cfm_inst_code_2").get("value")){dj.byId("req_conf_party_flag").set("disabled",true);if(dj.byId("req_conf_party_flag_filtered")){dj.byId("req_conf_party_flag_filtered").set("disabled",true);m.toggleRequired(dj.byId("req_conf_party_flag_filtered"),false);_e44=dj.byId("req_conf_party_flag_filtered").parentTab;m.resetTabState(dijit.byId(_e44));}if(_e45==="bank"){m.toggleRequired(dj.byId("req_conf_party_flag"),false);_e44=dj.byId("req_conf_party_flag").parentTab;m.resetTabState(dijit.byId(_e44));}}else{if(dj.byId("req_conf_party_flag")){dj.byId("req_conf_party_flag").set("disabled",false);}if(dj.byId("req_conf_party_flag_filtered")){dj.byId("req_conf_party_flag_filtered").set("disabled",false);}}},refreshUIforBGAmendment:function(){var _e46=dj.byId("prod_stat_code").get("value");var _e47=dj.byId("tnx_type_code").get("value");if((_e47==="15"&&_e46==="08")||(_e47==="15"&&_e46==="31")||_e47==="03"){if(_e47==="03"){if(d.byId("amd_no_date_display_div")){d.byId("amd_no_date_display_div").style.display="none";dj.byId("amd_date").set("disabled",false);}}if((_e47==="15"&&_e46==="08")||(_e47==="15"&&_e46==="31")||(_e47==="03"&&_e46==="08")){if(d.byId("amd_no_date_display_div")){d.byId("amd_no_date_display_div").style.display="block";dj.byId("amd_date").set("disabled",false);}if(d.byId("amd_no_date_bg_display_div")){d.byId("amd_no_date_bg_display_div").style.display="block";dj.byId("amd_date").set("disabled",false);}}}else{if(d.byId("amd_no_date_bg_display_div")){d.byId("amd_no_date_bg_display_div").style.display="none";dj.byId("amd_date").set("disabled",false);}}},refreshUIforAmendment:function(){var _e48=dj.byId("prod_stat_code").get("value");var _e49=dj.byId("tnx_type_code").get("value");var _e4a=dj.byId("sub_tnx_type_code")?dj.byId("sub_tnx_type_code").get("value"):"";if((_e49==="15"&&_e48==="08")||(_e49==="15"&&_e48==="31")||_e49==="03"){if(d.byId("amd_chrg_brn_by_code_div")){d.byId("amd_chrg_brn_by_code_div").style.display="block";}if(d.byId("cfm_chrg_brn_by_code_div")){d.byId("cfm_chrg_brn_by_code_div").style.display="block";}if(_e49==="03"){if(d.byId("amd_no_date_display_div")){d.byId("amd_no_date_display_div").style.display="none";dj.byId("amd_date").set("disabled",false);}}if((_e49==="15"&&_e48==="08")||(_e49==="15"&&_e48==="31")||(_e49==="03"&&_e48==="08")){if(d.byId("amd_no_date_display_div")){d.byId("amd_no_date_display_div").style.display="block";dj.byId("amd_date").set("disabled",false);}}m.toggleFields(false,["advising_bank_name","advising_bank_address_line_1","advising_bank_address_line_2","advising_bank_dom","advising_bank_address_line_4","advising_bank_iso_code","advising_bank_reference"],null,true,null);m.toggleFields(false,["advise_thru_bank_name","advise_thru_bank_address_line_1","advise_thru_bank_address_line_2","advise_thru_bank_dom","advise_thru_bank_address_line_4","advise_thru_bank_iso_code","advise_thru_bank_reference"],null,true,null);if(d.byId("req_conf_party_flag_filtered_div")){d.byId("req_conf_party_flag_filtered_div").style.display="block";}if(dj.byId("req_conf_party_flag_filtered")){dj.byId("req_conf_party_flag_filtered").set("value",dj.byId("req_conf_party_flag").getValue());}if(d.byId("req_conf_party_flag_div")){d.byId("req_conf_party_flag_div").style.display="none";}m.resetRequestedConfirmationParty();if(dj.byId("req_conf_party_flag_filtered")){m.setRequiredFields(["req_conf_party_flag_filtered"],true);}if(dj.byId("amd_chrg_brn_by_code_1")&&!dj.byId("amd_chrg_brn_by_code_1").get("value")&&!dj.byId("amd_chrg_brn_by_code_2").get("value")&&!dj.byId("amd_chrg_brn_by_code_4").get("value")&&(dj.byId("amd_chrg_brn_by_code_5")&&!dj.byId("amd_chrg_brn_by_code_5").get("value"))&&!dj.byId("amd_chrg_brn_by_code_9").get("value")){dj.byId("amd_chrg_brn_by_code_2").set("checked",true);}if(d.byId("advising_bank_name_img")){m.animate("wipeOut",d.byId("advising_bank_name_img"));}if(d.byId("advise_thru_bank_name_img")){m.animate("wipeOut",d.byId("advise_thru_bank_name_img"));}m.resetFormFields(["advising_bank_name","advising_bank_address_line_1","advising_bank_address_line_2","advising_bank_dom","advising_bank_address_line_4","advising_bank_iso_code","advising_bank_reference"]);m.resetFormFields(["advise_thru_bank_name","advise_thru_bank_address_line_1","advise_thru_bank_address_line_2","advise_thru_bank_dom","advise_thru_bank_address_line_4","advise_thru_bank_iso_code","advise_thru_bank_reference"]);if(m._config.narrativeDescGoodsDataStore||m._config.narrativeDocsReqDataStore||m._config.narrativeAddInstrDataStore||m._config.narrativeSpBeneDataStore||m._config.narrativeSpRecvbankDataStore){m._config.currentNarrativeDescGoodsDataStore=m._config.narrativeDescGoodsDataStore;m._config.currentNarrativeDocsReqDataStore=m._config.narrativeDocsReqDataStore;m._config.currentNarrativeAddInstrDataStore=m._config.narrativeAddInstrDataStore;m._config.currentNarrativeSpBeneDataStore=m._config.narrativeSpBeneDataStore;m._config.currentNarrativeSpRecvbankDataStore=m._config.narrativeSpRecvbankDataStore;}if(d.byId("amend_narratives_display")){d.byId("amend_narratives_display").style.display="block";}if(d.byId(_cfe)){d.byId(_cfe).style.display="none";}}else{if(_e49==="15"){if(d.byId("amd_chrg_brn_by_code_div")){d.byId("amd_chrg_brn_by_code_div").style.display="none";}if(d.byId("cfm_chrg_brn_by_code_div")){d.byId("cfm_chrg_brn_by_code_div").style.display="none";}if(d.byId("amd_no_date_display_div")){dj.byId("amd_date").set("disabled",true);d.byId("amd_no_date_display_div").style.display="none";}m.toggleFields(true,["advising_bank_name","advising_bank_address_line_1","advising_bank_address_line_2","advising_bank_dom","advising_bank_address_line_4","advising_bank_iso_code","advising_bank_reference"],null,true,null);m.toggleFields(true,["advise_thru_bank_name","advise_thru_bank_address_line_1","advise_thru_bank_address_line_2","advise_thru_bank_dom","advise_thru_bank_address_line_4","advise_thru_bank_iso_code","advise_thru_bank_reference"],null,true,null);if(d.byId("req_conf_party_flag_filtered_div")){d.byId("req_conf_party_flag_filtered_div").style.display="none";}if(d.byId("req_conf_party_flag_div")){d.byId("req_conf_party_flag_div").style.display="block";}if(d.byId("advising_bank_name_img")){m.animate("wipeIn",d.byId("advising_bank_name_img"));}if(d.byId("advise_thru_bank_name_img")){m.animate("wipeIn",d.byId("advise_thru_bank_name_img"));}m.resetRequestedConfirmationParty();if(dj.byId("req_conf_party_flag_filtered")){m.setRequiredFields(["req_conf_party_flag_filtered"],false);}if(d.byId("amend_narratives_display")){d.byId("amend_narratives_display").style.display="none";}if(d.byId(_cfe)){d.byId(_cfe).style.display="block";}if(m._config.currentNarrativeDescGoodsDataStore){m._config.narrativeDescGoodsDataStore=m._config.currentNarrativeDescGoodsDataStore;m._config.narrativeDocsReqDataStore=m._config.currentNarrativeDocsReqDataStore;m._config.narrativeAddInstrDataStore=m._config.currentNarrativeAddInstrDataStore;m._config.narrativeSpBeneDataStore=m._config.currentNarrativeSpBeneDataStore;m._config.narrativeSpRecvbankDataStore=m._config.currentNarrativeSpRecvbankDataStore;}else{m._config.narrativeDescGoodsDataStore="";m._config.narrativeDocsReqDataStore="";m._config.narrativeAddInstrDataStore="";m._config.narrativeSpBeneDataStore="";m._config.narrativeSpRecvbankDataStore="";if(document.getElementById("narrativeDescriptionGoods")){document.getElementById("narrativeDescriptionGoods").innerHTML="";}if(document.getElementById("narrativeDocumentsRequired")){document.getElementById("narrativeDocumentsRequired").innerHTML="";}if(document.getElementById("narrativeAdditionalInstructions")){document.getElementById("narrativeAdditionalInstructions").innerHTML="";}if(document.getElementById("narrativeSpecialBeneficiary")){document.getElementById("narrativeSpecialBeneficiary").innerHTML="";}if(document.getElementById("narrativeSpecialReceivingBank")){document.getElementById("narrativeSpecialReceivingBank").innerHTML="";}}}else{if((_e49==="13"&&!(_e4a==="12"||_e4a==="19"))||_e49!=="13"){if(d.byId("amend_narratives_display")){d.byId("amend_narratives_display").style.display="none";}if(d.byId(_cfe)){d.byId(_cfe).style.display="block";}}}}},refreshUIforAmendmentMO:function(){var _e4b=dj.byId("prod_stat_code")?dj.byId("prod_stat_code").get("value"):null;var _e4c=dj.byId("tnx_type_code")?dj.byId("tnx_type_code").get("value"):null;if((_e4c==="15"&&_e4b==="08")||(_e4c==="15"&&_e4b==="31")||_e4c==="03"){if(d.byId("amd_chrg_brn_by_code_div")){d.byId("amd_chrg_brn_by_code_div").style.display="block";}if(d.byId("cfm_chrg_brn_by_code_div")){d.byId("cfm_chrg_brn_by_code_div").style.display="block";}if(d.byId("amd_no_date_display_mo_div")){d.byId("amd_no_date_display_mo_div").style.display="block";}if(d.byId("amd_date_display_mo_div")){d.byId("amd_date_display_mo_div").style.display="block";}if(dj.byId("amd_chrg_brn_by_code_1")&&!dj.byId("amd_chrg_brn_by_code_1").get("value")&&!dj.byId("amd_chrg_brn_by_code_2").get("value")&&!dj.byId("amd_chrg_brn_by_code_4").get("value")&&(dj.byId("amd_chrg_brn_by_code_5")&&!dj.byId("amd_chrg_brn_by_code_5").get("value"))&&!dj.byId("amd_chrg_brn_by_code_9").get("value")){dj.byId("amd_chrg_brn_by_code_2").set("checked",true);}if(m._config.narrativeDescGoodsDataStore||m._config.narrativeDocsReqDataStore||m._config.narrativeAddInstrDataStore||m._config.narrativeSpBeneDataStore||m._config.narrativeSpRecvbankDataStore){m._config.currentNarrativeDescGoodsDataStore=m._config.narrativeDescGoodsDataStore;m._config.currentNarrativeDocsReqDataStore=m._config.narrativeDocsReqDataStore;m._config.currentNarrativeAddInstrDataStore=m._config.narrativeAddInstrDataStore;m._config.currentNarrativeSpBeneDataStore=m._config.narrativeSpBeneDataStore;m._config.currentNarrativeSpRecvbankDataStore=m._config.narrativeSpRecvbankDataStore;}if(document.getElementById("amd_no")){document.getElementById("amd_no").value=m._config.amendmentNumber;}if(d.byId("amend_narratives_display")){d.byId("amend_narratives_display").style.display="block";}if(d.byId(_cfe)){d.byId(_cfe).style.display="none";}}else{if(_e4c==="15"||_e4c==="13"){if(d.byId("amd_chrg_brn_by_code_div")){d.byId("amd_chrg_brn_by_code_div").style.display="none";}if(d.byId("cfm_chrg_brn_by_code_div")){d.byId("cfm_chrg_brn_by_code_div").style.display="none";}if(d.byId("amd_no_date_display_mo_div")){d.byId("amd_no_date_display_mo_div").style.display="none";}if(d.byId("amd_date_display_mo_div")){d.byId("amd_date_display_mo_div").style.display="none";}if(d.byId("amend_narratives_display")){d.byId("amend_narratives_display").style.display="none";}if(d.byId(_cfe)){d.byId(_cfe).style.display="block";}if(document.getElementById("amd_no")){document.getElementById("amd_no").value="";}if(m._config.currentNarrativeDescGoodsDataStore){m._config.narrativeDescGoodsDataStore=m._config.currentNarrativeDescGoodsDataStore;m._config.narrativeDocsReqDataStore=m._config.currentNarrativeDocsReqDataStore;m._config.narrativeAddInstrDataStore=m._config.currentNarrativeAddInstrDataStore;m._config.narrativeSpBeneDataStore=m._config.currentNarrativeSpBeneDataStore;m._config.narrativeSpRecvbankDataStore=m._config.currentNarrativeSpRecvbankDataStore;}else{m._config.narrativeDescGoodsDataStore="";m._config.narrativeDocsReqDataStore="";m._config.narrativeAddInstrDataStore="";m._config.narrativeSpBeneDataStore="";m._config.narrativeSpRecvbankDataStore="";if(document.getElementById("narrativeDescriptionGoods")){document.getElementById("narrativeDescriptionGoods").innerHTML="";}if(document.getElementById("narrativeDocumentsRequired")){document.getElementById("narrativeDocumentsRequired").innerHTML="";}if(document.getElementById("narrativeAdditionalInstructions")){document.getElementById("narrativeAdditionalInstructions").innerHTML="";}if(document.getElementById("narrativeSpecialBeneficiary")){document.getElementById("narrativeSpecialBeneficiary").innerHTML="";}if(document.getElementById("narrativeSpecialReceivingBank")){document.getElementById("narrativeSpecialReceivingBank").innerHTML="";}}}}},resetFormFields:function(_e4d){d.forEach(_e4d,function(id,_e4e){var item=dj.byId(id);if(item){item.reset();}});},setRequiredFields:function(_e4f,_e50){d.forEach(_e4f,function(id,_e51){var item=dj.byId(id);item.set("required",_e50);});},compareTransactionMaster:function(_e52,type){var _e53=false;for(var i=0;i<_e52.length;i++){var _e54=dj.byId(_e52[i]);var _e55=dj.byId("org_"+_e52[i]);if((_e55&&!_e54)||(_e54&&!_e55)){_e53=true;break;}else{if(type==="TXT"){if(m.trim(_e55.get("value"))!==m.trim(_e54.get("value"))){_e53=true;break;}}else{if(type==="CHECK"){var _e56=(_e54.get("checked")===true)?"Y":"N";if(_e55.get("value")!==_e56){_e53=true;break;}}}}}return _e53;},compareTransactionMasterRadio:function(_e57){var _e58=false;for(var i=0;i<_e57.length;i++){var _e59=dj.byId(_e57[i]);if(_e59&&_e59.get("value")!==false){var _e5a=dj.byId("org_"+_e57[i]);if(!_e5a||(_e5a.get("value")!==_e59.get("value"))){_e58=true;break;}}}return _e58;},amendChargesLC:function(){var _e5b=dj.byId("narrative_amend_charges_other");var _e5c=this.get("id");if(_e5b){if(_e5c==="amd_chrg_brn_by_code_4"||_e5c==="amd_chrg_brn_by_code_5"){_e5b.set("value","");_e5b.set("disabled",false);}else{_e5b.set("value","");_e5b.set("disabled",true);}}},calculateAmendTransactionAmount:function(){var _e5d=(dj.byId("tnxtype")&&dj.byId("tnxtype").get("value")==="03")||(dj.byId("tnx_type_code")&&dj.byId("tnx_type_code").get("value")==="03")||(dj.byId("prod_stat_code")&&(dj.byId("prod_stat_code").get("value")==="08"||dj.byId("prod_stat_code").get("value")==="31"));var _e5e=dj.byId("tnx_amt");if(_e5d){var _e5f=dj.byId("inc_amt");if(_e5f){_e5f.set("value","");}var _e60=dj.byId("dec_amt");if(_e60){_e60.set("value","");}var _e61=dj.byId("lc_amt"),_e62=dj.byId("org_lc_amt"),_e63=d.number.parse(_e62.get("displayedValue")),_e64=d.number.parse(_e61.get("displayedValue"));_e63=!isNaN(_e63)?_e63:0;_e64=!isNaN(_e64)?_e64:0;var _e65=_e64-_e63;if(_e65>0){if(_e5e){_e5e.set("value",_e65);}if(_e5f){_e5f.set("value",_e65);}}else{if(_e65<0){if(_e5e){_e5e.set("value",(-1*_e65));}if(_e60){_e60.set("value",(-1*_e65));}}}}else{_e5e.set("value",d.number.parse(dj.byId("lc_amt").get("value")));}},checkConfirmationCharges:function(){if(dj.byId("cfm_inst_code_3").get("checked")){this.set("checked",false);m.showTooltip(m.getLocalization("confirmationInstructionsError"),d.byId("cfm_chrg_brn_by_code_1"),["before"]);}if(m._config.charge_splitting_lc){if(dj.byId("open_chrg_brn_by_code_3")){if(dj.byId("cfm_chrg_brn_by_code_3").get("checked")){dj.byId("cfm_chrg_applicant").set("disabled",false).set("required",true);dj.byId("cfm_chrg_beneficiary").set("disabled",false).set("required",true);}else{dj.byId("cfm_chrg_applicant").set("disabled",true).set("value","").set("required",false);dj.byId("cfm_chrg_beneficiary").set("disabled",true).set("value","").set("required",false);}}}},checkApplBeneCharges:function(){if(dj.byId("open_chrg_brn_by_code_3")){if(dj.byId("open_chrg_brn_by_code_3").get("checked")){dj.byId("open_chrg_applicant").set("disabled",false).set("required",true);dj.byId("open_chrg_beneficiary").set("disabled",false).set("required",true);}else{dj.byId("open_chrg_applicant").set("disabled",true).set("value","").set("required",false);dj.byId("open_chrg_beneficiary").set("disabled",true).set("value","").set("required",false);}}if(dj.byId("corr_chrg_brn_by_code_3")){if(dj.byId("corr_chrg_brn_by_code_3").get("checked")){dj.byId("corr_chrg_applicant").set("disabled",false).set("required",true);dj.byId("corr_chrg_beneficiary").set("disabled",false).set("required",true);}else{dj.byId("corr_chrg_applicant").set("disabled",true).set("value","").set("required",false);dj.byId("corr_chrg_beneficiary").set("disabled",true).set("value","").set("required",false);}}},toggleRenewalDetails:function(_e66){if(dj.byId("is_bank")&&dj.byId("is_bank").get("value")==="N"){m.toggleFields(this.get("checked"),["advise_renewal_flag","rolling_renewal_flag","renew_amt_code_1","renew_amt_code_2","final_expiry_date"],["renew_on_code","renew_for_nb","renew_for_period"],_e66);}else{m.toggleFields(this.get("checked"),["advise_renewal_flag","rolling_renewal_flag","renew_amt_code_1","renew_amt_code_2","projected_expiry_date","final_expiry_date"],["renew_on_code","renew_for_nb","renew_for_period"],_e66);}if(!this.get("checked")){dj.byId("renew_on_code").set("value","");dj.byId("renew_for_nb").set("value","");dj.byId("renew_for_period").set("value","");dj.byId("advise_renewal_flag").set("checked",false);dj.byId("rolling_renewal_flag").set("checked",false);dj.byId("renew_amt_code_1").set("checked",false);dj.byId("renew_amt_code_2").set("checked",false);if(dj.byId("projected_expiry_date")){dj.byId("projected_expiry_date").set("value",null);}dj.byId("final_expiry_date").set("value",null);}},resetRenewalDetails:function(_e67,node){if(dj.byId("is_bank")&&dj.byId("is_bank").get("value")==="N"){m.toggleFields(node.get("checked"),["advise_renewal_flag","rolling_renewal_flag","renew_amt_code_1","renew_amt_code_2","final_expiry_date"],["renew_on_code","renew_for_nb","renew_for_period"],_e67);}else{m.toggleFields(node.get("checked"),["advise_renewal_flag","rolling_renewal_flag","renew_amt_code_1","renew_amt_code_2","projected_expiry_date","final_expiry_date"],["renew_on_code","renew_for_nb","renew_for_period"],_e67);}if(!node.get("checked")){dj.byId("renew_on_code").set("value","");dj.byId("renew_for_nb").set("value","");dj.byId("renew_for_period").set("value","");dj.byId("advise_renewal_flag").set("checked",false);dj.byId("rolling_renewal_flag").set("checked",false);dj.byId("renew_amt_code_2").set("checked",true);if(dj.byId("projected_expiry_date")){dj.byId("projected_expiry_date").set("value",null);}dj.byId("final_expiry_date").set("value",null);}},toggleDependentFields:function(node,_e68,_e69){var _e6a=dj.byId(node),_e6b=dj.byId(_e68);if(_e6b.get("displayedValue")!==""&&_e6a.get("displayedValue")!==""){_e6a.set("displayedValue","");_e6a.set("readOnly",true);if(_e69){m.setFieldState(_e6a,false);m.showTooltip(_e69,_e6a.domNode);}}else{_e6a.set("readOnly",false);_e6b.set("readOnly",false);}},updateOutstandingAmount:function(_e6c,_e6d,_e6e){var _e6f=dj.byId("prod_stat_code").get("value");if(_e6e==null){var _e70=dj.byId("product_code").get("value").toLowerCase();_e6e=dj.byId(_e70+"_amt");}var _e71=dojo.number.parse(_e6d.get("value"))||_e6e.get("value");var _e72;if(dj.byId("tnx_amt")&&dj.byId("tnx_amt").get("value")){_e72=isNaN(dojo.number.parse(dj.byId("tnx_amt").get("value")))?0:dj.byId("tnx_amt").get("value");}else{_e72=0;}var _e73,_e74=dj.byId("tnx_type_code"),_e75=dj.byId("sub_tnx_type_code");if(_e6f==="04"||_e6f==="14"||_e6f==="15"||_e6f==="13"||_e6f==="05"){_e73=_e71-_e72;_e73=(_e73>0)?_e73:0;_e6c.set("value",_e73);}else{if(_e74&&_e75&&_e74.get("value")!="03"&&_e75.get("value")!="05"&&isNaN(_e6c.get("value"))){_e6c.set("value",_e71);}else{if((_e6f=="07"||_e6f==="03")&&!isNaN(_e6c.get("value"))){}else{_e6c.set("value",_e71);}}}},confirmAccountDelete:function(_e76,url,type){var mess=(type==="bill")?"deleteBillPayeeConfirmation":"deleteTransactionConfirmation";m.dialog.show("CONFIRMATION",m.getLocalization(mess,[_e76]),"",function(){document.location.href=url;});},populateStaticDataDialog:function(_e77,_e78,_e79,_e7a,_e7b){var url="/screen/AjaxScreen/action/GetStaticDataPopup",_e7c={};_e7c.option=_e77;_e7c.operation=_e78;_e7c.fields=_e79;_e7c.popupType="ADD_DATA";if(_e7b){_e7c.productcode=_e7b;}m.dialog.populate(_e77,m.getServletURL(url),null,_e7c);},getStaticDataURL:function(_e7d,_e7e,_e7f,_e80,_e81,_e82){var url=["/screen/"],_e83=_e81||"StaticDataListPopup";url.push(_e83,"?option=",_e7d,"&operation=",_e7e,"&fields=",_e80,"&formname=",_e7f);if(_e82){url.push(_cff,_e82);}return m.getServletURL(url.join(""));},showEntityDialog:function(_e84,_e85,_e86,_e87,_e88,_e89,_e8a,_e8b,_e8c,_e8d,_e8e,_e8f,_e90,_e91){var url="/screen/EntityListPopup",_e92={},_e93="/screen/AjaxScreen/action/GetEntities",_e94={},grid,_e95,_e96,_e97;if(_e8f){_e94.closeParent=_e8f;_e92.closeParent=_e8f;}if(_e91){_e92.wildcard=_e91;_e94.wildcard=_e91;}if(_e85){_e94.fields=_e85;_e92.fields=_e85;}if(_e86){_e92.productcode=_e86;_e94.productcode=_e86;}else{_e92.productcode="*";_e94.productcode=_e86;}if(_e8d){_e92.subproductcode=_e8d;_e94.subproductcode=_e8d;}if(_e88){_e92.company=_e88;_e94.company=_e88;}if(_e87){_e92.entitycontext=_e87;_e94.entitycontext=_e87;}if(_e89){_e92.featureid=_e89;_e94.featureid=_e89;}if(_e8a){_e92.option=_e8a;_e94.option=_e8a;}if(_e90){_e92.popupPrefix=_e90;_e94.popupPrefix=_e90;}_e92.dimensions=_e8b;_e95=_e87+"entities_grid";_e97=function(){if(_e90){_e95=_e90+_e95;}grid=dj.byId(_e95);grid.showMessage(grid.loadingMessage);if(!_e87||_e87!=="CUSTOMER"){m.grid.setStoreURL(grid,m.getServletURL(_e93),_e94);}m.connect("sy_name","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("USERentities_grid"),["NAME"],["sy_name"]);}});m.connect("sy_abbvname","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("USERentities_grid"),["ABBVNAME"],["sy_abbvname"]);}});m.connect("sy_name","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("USER_WITH_ENTITY_WILDCARDentities_grid"),["NAME"],["sy_name"]);}});m.connect("sy_abbvname","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("USER_WITH_ENTITY_WILDCARDentities_grid"),["ABBVNAME"],["sy_abbvname"]);}});m.connect("sy_abbvname","onKeyPress",function(evnt){if(evnt.keyCode==dojo.keys.ENTER){m.grid.filter(dj.byId("CUSTOMERentities_grid"),["ABBVNAME"],["sy_abbvname"]);}});m.connect("sy_name","onKeyPress",function(evnt){if(evnt.keyCode==dojo.keys.ENTER){m.grid.filter(dj.byId("CUSTOMERentities_grid"),["NAME"],["sy_name"]);}});m.connect("sy_prefixentity","onKeyPress",function(evnt){if(evnt.keyCode==dojo.keys.ENTER){m.grid.filter(dj.byId("prefixCUSTOMERentities_grid"),["ENTITY_ABBV_NAME"],["sy_prefixentity"]);}});m.connect("sy_prefixname","onKeyPress",function(evnt){if(evnt.keyCode==dojo.keys.ENTER){m.grid.filter(dj.byId("prefixCUSTOMERentities_grid"),["NAME"],["sy_prefixname"]);}});};if(_e8e){_e96=dj.byId("childXhrDialog")||new dj.Dialog({title:_e8c,id:"childXhrDialog",href:m.getServletURL(url),ioMethod:misys.xhrPost,ioArgs:{content:_e92}});m.dialog.connect(_e96,"onLoad",_e97);m.dialog.connect(_e96,"onHide",function(){setTimeout(function(){m.dialog.disconnect(_e96);_e96.destroyRecursive();},2000);});var co=d.coords("xhrDialog");_e96._relativePosition={x:co.x+30,y:co.y+30};_e96.show();}else{m.dialog.show("URL","",_e8c,null,_e97,m.getServletURL(url),null,null,_e92);}},showBankTypeDialog:function(type,_e98,_e99,_e9a,_e9b){if(dj.byId("credit_available_with_bank_type").get("value")==="Other"){m.showSearchDialog(type,_e98,"","",_e99,_e9a,_e9b);}},showDraweeDialog:function(type,_e9c,_e9d,_e9e){if((dj.byId("cr_avl_by_code_1")&&dj.byId("cr_avl_by_code_1").get("checked"))||(dj.byId("cr_avl_by_code_2")&&dj.byId("cr_avl_by_code_2").get("checked"))||(dj.byId("cr_avl_by_code_3")&&dj.byId("cr_avl_by_code_3").get("checked"))){m.showSearchDialog(type,_e9d,"","","EL","width:580px;height:auto;",_e9e);}},showUsersDialog:function(type,_e9f,_ea0,_ea1,_ea2,_ea3,_ea4,_ea5,_ea6,_ea7,_ea8,_ea9){var url=[],_eaa={},_eab=[_d01],_eac={},_ead=_ea7||"GetStaticData",_eae=_ea3||_d02,_eaf,_eb0;if(_ea4.slice(_ea4.length-1)!==";"){_ea4+=";";}_eab.push(_ead);_eac.option=type;_eac.fields=_e9f;_eac.companyName=_ea0;_eac.userId=_ea1;_eac.entity=_eaf;_eac.user_action=_ea9;d.mixin(_eac,_ea2);url.push("/screen/",_eae);_eaa.option=type;_eaa.fields=_e9f;_eaa.companyName=_ea0;_eaa.userId=_ea1;_eaa.companyId=_ea6;_eaa.dimensions=_ea4;d.mixin(_eaa,_ea2);_eaa.popupType="LIST_DATA";if(_ea6){_eaa.companyid=_ea6;_eac.companyid=_ea6;}_eb0=function(){var grid=dj.byId(type+"data_grid");grid.showMessage(grid.loadingMessage);m.grid.setStoreURL(grid,m.getServletURL(_eab.join("")),_eac);};m.dialog.show("URL","",_ea5,null,_eb0,m.getServletURL(url.join("")),null,null,_eaa);m.connect("lastname","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("userdata_grid"),["LAST_NAME"],["last_name"]);}});m.connect("firstname","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("userdata_grid"),["FIRST_NAME"],["first_name"]);}});m.connect("loginId","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("userdata_grid"),["LOGIN_ID"],["login_id"]);}});},showSearchExtAccountDialog:function(type,_eb1,_eb2,_eb3,_eb4,_eb5,_eb6,_eb7,_eb8,_eb9,_eba,_ebb){var url=[],_ebc={},_ebd=[_d01],_ebe={},_ebf=_eb9||"GetStaticData",_ec0=_eb3||_d02,_ec1,_ec2;if(_eb5.slice(_eb5.length-1)!==";"){_eb5+=";";}if(dj.byId(_eb7)){_ec1=dj.byId(_eb7).get("value");}_ebd.push(_ebf);_ebe.option=type;_ebe.fields=_eb1;_ebe.entity=_ec1;_ebe.user_action=_ebb;d.mixin(_ebe,_eb2);url.push("/screen/",_ec0);_ebc.option=type;_ebc.fields=_eb1;_ebc.dimensions=_eb5;d.mixin(_ebc,_eb2);_ebc.popupType="LIST_DATA";if(_eb4){_ebc.productcode=_eb4;_ebe.productcode=_eb4;}if(_eb8){_ebc.companyid=_eb8;_ebe.companyid=_eb8;}if(!_eba){_ec2=function(){var grid=dj.byId(type+"data_grid");if(grid){grid.showMessage(grid.loadingMessage);m.grid.setStoreURL(grid,m.getServletURL(_ebd.join("")),_ebe);}};}m.dialog.show("URL","",_eb6,null,_ec2,m.getServletURL(url.join("")),null,null,_ebc);},showSearchDialog:function(type,_ec3,_ec4,_ec5,_ec6,_ec7,_ec8,_ec9,_eca,_ecb,_ecc,_ecd,_ece){var url=[],_ecf={},_ed0=[_d01],_ed1={},_ed2=_eca||"GetStaticData",_ed3=_ec5||_d02,_ed4,_ed5,_ed6,_ed7=dj.byId("product_type")?dj.byId("product_type").get("value"):"",_ed8=dj.byId("customer_bank")?dj.byId("customer_bank").get("value"):"",_ed9=dijit.byId("issuing_bank_abbv_name")?dijit.byId("issuing_bank_abbv_name").get("value"):"";var _eda=dj.byId("program_id");if(dj.byId(_ecd)){_ed4=dj.byId(_ecd).get("value");if(_ed4===""){return;}}if(_ec7.slice(_ec7.length-1)!==";"){_ec7+=";";}_ed0.push(_ed2);_ed1.option=type;_ed1.fields=_ec3;_ed1.user_action=_ecc;_ed1[_d04]=_ed4;d.mixin(_ed1,_ec4);url.push("/screen/",_ed3);_ecf.option=type;_ecf.fields=_ec3;_ecf.dimensions=_ec7;d.mixin(_ecf,_ec4);_ecf.popupType="LIST_DATA";if(_ec6){_ecf.productcode=_ec6;_ed1.productcode=_ec6;}if(_ec9){_ecf.companyid=_ec9;_ed1.companyid=_ec9;}if(_ec4&&_ec4.entity_name===""){_ed1.entity_name=dj.byId("entity")?dj.byId("entity").get("value"):"";_ecf.entity_name=dj.byId("entity")?dj.byId("entity").get("value"):"";}if(_ed8){_ed6=_ed8;}else{if(dj.byId("bank_abbv_name")&&dj.byId("bank_abbv_name").get("value")!==""){_ed6=dj.byId("bank_abbv_name").get("value");}else{if(_ed9){_ed6=_ed9;}}}_ed1.bank_abbv_name=_ed6;if(_eda){_ecf.fcmPgmId=_eda.get("value");_ed1.fcmPgmId=_eda.get("value");}if(_ed7){_ecf.product_type=_ed7;_ed1.product_type=_ed7;}if(_ece){_ecf.subproductcode=_ece;_ed1.subproductcode=_ece;}if(!_ecb){_ed5=function(){var grid=dj.byId(type+"data_grid");if(grid){grid.showMessage(grid.loadingMessage);m.grid.setStoreURL(grid,m.getServletURL(_ed0.join("")),_ed1);m.connect("CurrencyName","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("currencydata_grid"),["NAME"],["CurrencyName"]);}});m.connect("ISOCode","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("currencydata_grid"),["ISOCODE"],["ISOCode"]);}});m.connect("abbv_name","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("beneficiarydata_grid"),["ABBVNAME"],["abbv_name"]);}});m.connect("name","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("beneficiarydata_grid"),["NAME"],["name"]);}});m.connect("abbv_name","onKeyPress",function(evnt){if(evnt.keyCode==dojo.keys.ENTER){m.grid.filter(dj.byId("bankdata_grid"),["ABBVNAME"],["abbv_name"]);}});m.connect("name","onKeyPress",function(evnt){if(evnt.keyCode==dojo.keys.ENTER){m.grid.filter(dj.byId("bankdata_grid"),["NAME"],["name"]);}});m.connect("abbv_name","onKeyPress",function(evnt){if(evnt.keyCode==dojo.keys.ENTER){m.grid.filter(dj.byId("phrasedata_grid"),["ABBVNAME"],["abbv_name"]);}});m.connect("descriptionField","onKeyPress",function(evnt){if(evnt.keyCode==dojo.keys.ENTER){m.grid.filter(dj.byId("phrasedata_grid"),["DESCRIPTION"],["descriptionField"]);}});m.connect("description","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("accountdata_grid"),["DESCRIPTION"],["description"]);}});m.connect("account_no","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("accountdata_grid"),["ACCOUNTNO"],["account_no"]);}});}};}m.dialog.show("URL","",_ec8,null,_ed5,m.getServletURL(url.join("")),null,null,_ecf);},showProgramCptyDialog:function(type,_edb,_edc,_edd,_ede,_edf,_ee0){var _ee1="";if(dj.byId("gridPC")&&dj.byId("gridPC").store&&dj.byId("gridPC").store._arrayOfAllItems&&dj.byId("gridPC").store._arrayOfAllItems.length){var _ee2=dj.byId("gridPC").store._arrayOfAllItems;for(var i=0;i<_ee2.length;i++){if(_ee2[i]&&_ee2[i]["ABBVNAME"]){_ee1=_ee1+_ee2[i]["ABBVNAME"]+",";}}}var url=[],_ee3={},_ee4=_d01,_ee5={},_ee6="GetStaticData",_ee7=_edd||_d02,_ee8,_ee9;if(_ede.slice(_ede.length-1)!==";"){_ede+=";";}_ee4+=_ee6;_ee5.option=type;_ee5.fields=_edb;_ee5.benAbbvNameList=_ee1;url.push("/screen/",_ee7);_ee3.option=type;_ee3.fields=_edb;if(_edc){_ee3.program_id=_edc;_ee5.program_id=_edc;}_ee3.dimensions=_ede;_ee3.popupType="LIST_DATA";_ee8=function(){var grid=dj.byId(type+"data_grid");grid.showMessage(grid.loadingMessage);m.grid.setStoreURL(grid,m.getServletURL(_ee4),_ee5);m.connect("prgm_cpty_popup","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("programCounterpartydata_grid"),["ABBVNAME"],["prgm_cpty_popup"]);}});};if(_ee0){_ee9=dj.byId("childXhrDialog")||new dj.Dialog({title:_edf,id:"childXhrDialog",href:m.getServletURL(url.join("")),ioMethod:misys.xhrPost,ioArgs:{content:_ee3}});m.dialog.connect(_ee9,"onLoad",_ee8);m.dialog.connect(_ee9,"onHide",function(){setTimeout(function(){m.dialog.disconnect(_ee9);_ee9.destroyRecursive();},2000);});var co=d.coords("xhrDialog");_ee9._relativePosition={x:co.x+30,y:co.y+30};_ee9.show();}else{m.dialog.show("URL","",_edf,null,_ee8,m.getServletURL(url.join("")),null,null,_ee3);}},showBankBranchCodeDialog:function(type,_eea,_eeb,_eec,_eed,_eee,_eef,_ef0,_ef1){var url=[],_ef2={},_ef3=_d01,_ef4={},_ef5="GetStaticData",_ef6=_eee||_d02,_ef7,_ef8,co;if(_eef.slice(_eef.length-1)!==";"){_eef+=";";}_ef3+=_ef5;_ef4.option=type;_ef4.fields=_eea;_ef4.parameter=_eeb;_ef4.branchindicators=_eec;_ef4.internal=_eed;url.push("/screen/",_ef6);_ef2.option=type;_ef2.fields=_eea;_ef2.parameter=_eeb;_ef2.branchindicators=_eec;_ef2.internal=_eed;_ef2.dimensions=_eef;_ef2.popupType="LIST_DATA";_ef7=function(){var grid=dj.byId(type+"data_grid");grid.showMessage(grid.loadingMessage);m.grid.setStoreURL(grid,m.getServletURL(_ef3),_ef4);};if(_ef1){_ef8=dj.byId("childXhrDialog")||new dj.Dialog({title:_ef0,id:"childXhrDialog",href:m.getServletURL(url.join("")),ioMethod:misys.xhrPost,ioArgs:{content:_ef2}});m.dialog.connect(_ef8,"onLoad",_ef7);m.dialog.connect(_ef8,"onHide",function(){setTimeout(function(){m.dialog.disconnect(_ef8);_ef8.destroyRecursive();},2000);});co=d.coords("xhrDialog");_ef8._relativePosition={x:co.x+30,y:co.y+30};_ef8.show();}else{m.dialog.show("URL","",_ef0,null,_ef7,m.getServletURL(url.join("")),null,null,_ef2);}},showSearchUserAccountsDialog:function(type,_ef9,_efa,_efb,drCr,_efc,_efd,_efe,_eff,_f00,_f01,_f02,_f03,_f04,_f05,_f06,_f07){var url=[],_f08={},_f09=_d01,_f0a={},_f0b="GetStaticData",_f0c=_d02,_f0d,_f0e,_f0f,_f10;if(dj.byId(_efb)){_f0e=dj.byId(_efb).get("value");if(_f0e===""){if(dj.byId("applicant_abbv_name")){var _f11=dj.byId("applicant_abbv_name").get("value");if(_f11===""){m.showTooltip(m.getLocalization("entitynotselected"),document.activeElement,["after"]);return;}}else{if(_f07&&_f07===true){}else{m.showTooltip(m.getLocalization("entitynotselected"),document.activeElement,["after"]);return;}}}}else{if(misys._config.isEntityRequired){m.showTooltip(m.getLocalization("entitynotselected"),document.activeElement,["after"]);return;}}if(dj.byId(_efa)){_f10=dj.byId(_efa).get("value");if(_f10===""){return;}}var _f12=[];if(_f04){var _f13=_f04.split(",");for(var i in _f13){if(dj.byId(_f13[i])){_f12.push(dj.byId(_f13[i]).get("value"));}}}if(dj.byId("customer_bank")&&dj.byId("customer_bank").get("value")!==""){_f0f=dj.byId("customer_bank").get("value");}else{if(dj.byId("bank_abbv_name")&&dj.byId("bank_abbv_name").get("value")!==""){_f0f=dj.byId("bank_abbv_name").get("value");}else{if(dj.byId("issuing_bank")&&dj.byId("issuing_bank").get("value")!==""){_f0f=dj.byId("issuing_bank").get("value");}}}if(_efd.slice(_efd.length-1)!==";"){_efd+=";";}_f09+=_f0b;_f0a.option=type;_f0a.user_action=_f03;_f0a.fields=_ef9;_f0a.entity=_f0e;_f0a.bank_abbv_name=_f0f;_f0a[_d04]=_f10;_f0a["dr-cr"]=drCr;_f0a["product-types"]=_efc;_f0a.parameter=_eff;_f0a.companyId=_f00;_f0a.accountType=_f05;_f0a.isSearchScreen=_f07;if(dj.byId("issuing_bank_customer_reference")&&dj.byId("issuing_bank_customer_reference").get("value")!==""&&_efc.length>0&&(("FT:TRTPT"===_efc)||("FT:TRINT"===_efc))){_f0a["issuing_bank_customer_reference"]=dj.byId("issuing_bank_customer_reference").get("value");}if(_efc.length>0&&"FX"===_efc&&_eff.indexOf("ownerType:")>-1){_f0a.ownerType=_eff.substring(10);}if(_f12.length>0){_f0a.ccy_codes=_f12.join(",");}url.push("/screen/",_f0c);_f08.option=type;_f08.dimensions=_efd;_f08.bank_abbv_name=_f0f;_f08.entity=_f0e;_f08.popupType="LIST_DATA";_f08.pageType=_eff;if(_f00){_f08.companyid=_f00;}if(!_f02){_f0d=function(){var grid=dj.byId(type+"data_grid");grid.showMessage(grid.loadingMessage);m.grid.setStoreURL(grid,m.getServletURL(_f09),_f0a);};}m.dialog.show("URL","",_efe,null,_f0d,m.getServletURL(url.join("")),null,null,_f08);m.connect("accountNo","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("useraccountdata_grid"),["ACCOUNTNOTEMP"],["accountNo"]);}});m.connect("curCode","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("useraccountdata_grid"),["CURCODE"],["curCode"]);}});m.connect("descriptionDialog","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("useraccountdata_grid"),["DESCRIPTION"],["descriptionDialog"]);}});if(_f0f!==""){m.connect("bankName","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("useraccountdata_grid"),["BANKNAME"],["bankName"]);}});}},showSearchFSCMProgramDialog:function(type,_f14,_f15,_f16,_f17,_f18,_f19){var url=[],_f1a={},_f1b=_d01,_f1c={},_f1d="GetStaticData",_f1e=_d02,_f1f,_f20,_f21;if(_f15.slice(_f15.length-1)!==";"){_f15+=";";}_f1b+=_f1d;_f1c.option=type;_f1c.user_action=_f19;_f1c.fields=_f14;_f1c.entity=_f20;_f1c[_d04]=_f21;d.mixin(_f1c,_f17);url.push("/screen/",_f1e);_f1a.option=type;_f1a.dimensions=_f15;d.mixin(_f1a,_f17);_f1a.popupType="LIST_DATA";if(!_f18){_f1f=function(){var grid=dj.byId(type+"data_grid");grid.showMessage(grid.loadingMessage);m.grid.setStoreURL(grid,m.getServletURL(_f1b),_f1c);};}m.dialog.show("URL","",_f16,null,_f1f,m.getServletURL(url.join("")),null,null,_f1a);m.connect("programCode","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("fscmprogramdata_grid"),["PROGRAM_CODE"],["programCode"]);}});m.connect("programName","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("fscmprogramdata_grid"),["PROGRAM_NAME"],["programName"]);}});m.connect("programId","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("fscmprogramdata_grid"),["PROGRAM_ID"],["programId"]);}});},showFSCMProgramFinanceRequestDialog:function(type,_f22,_f23,_f24,_f25,_f26,_f27){var url=[],_f28={},_f29=_d01,_f2a={},_f2b="GetStaticData",_f2c=_f24||_d02,_f2d,_f2e;if(_f25.slice(_f25.length-1)!==";"){_f25+=";";}_f29+=_f2b;_f2a.option=type;_f2a.fields=_f22;d.mixin(_f2a,_f23);url.push("/screen/",_f2c);_f28.option=type;_f28.fields=_f22;d.mixin(_f28,_f23);_f28.dimensions=_f25;_f28.popupType="LIST_DATA";_f2d=function(){var grid=dj.byId(type+"data_grid");grid.showMessage(grid.loadingMessage);m.grid.setStoreURL(grid,m.getServletURL(_f29),_f2a);m.connect("CurrencyName","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("currencydata_grid"),["NAME"],["CurrencyName"]);}});};if(_f27){_f2e=dj.byId("childXhrDialog")||new dj.Dialog({title:_f26,id:"childXhrDialog",href:m.getServletURL(url.join("")),ioMethod:misys.xhrPost,ioArgs:{content:_f28}});m.dialog.connect(_f2e,"onLoad",_f2d);m.dialog.connect(_f2e,"onHide",function(){setTimeout(function(){m.dialog.disconnect(_f2e);_f2e.destroyRecursive();},2000);});var co=d.coords("xhrDialog");_f2e._relativePosition={x:co.x+30,y:co.y+30};_f2e.show();}else{m.dialog.show("URL","",_f26,null,_f2d,m.getServletURL(url.join("")),null,null,_f28);}},showCountryCodeDialog:function(type,_f2f,_f30,_f31,_f32,_f33,_f34,_f35,_f36){var url=[],_f37={},_f38=_d01,_f39={},_f3a="GetStaticData",_f3b=_f31||_d02,_f3c,_f3d;if(_f34.slice(_f34.length-1)!==";"){_f34+=";";}_f38+=_f3a;_f39.option=type;_f39.fields=_f2f;_f39.parameter=_f30;url.push("/screen/",_f3b);_f37.option=type;_f37.fields=_f2f;_f37.parameter=_f30;_f37.dimensions=_f34;_f37.popupType="LIST_DATA";if(_f32){_f37.productcode=_f32;_f39.productcode=_f32;}if(_f33){_f37.subproductcode=_f33;_f39.subproductcode=_f33;}_f3c=function(){var grid=dj.byId(type+"data_grid");grid.showMessage(grid.loadingMessage);m.grid.setStoreURL(grid,m.getServletURL(_f38),_f39);m.connect("country_name_popup","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("codevaluedata_grid"),["DESCRIPTION"],["country_name_popup"]);}});};if(_f36){_f3d=dj.byId("childXhrDialog")||new dj.Dialog({title:_f35,id:"childXhrDialog",href:m.getServletURL(url.join("")),ioMethod:misys.xhrPost,ioArgs:{content:_f37}});m.dialog.connect(_f3d,"onLoad",_f3c);m.dialog.connect(_f3d,"onHide",function(){setTimeout(function(){m.dialog.disconnect(_f3d);_f3d.destroyRecursive();},200);});var co=d.coords("xhrDialog");_f3d._relativePosition={x:co.x+30,y:co.y+30};_f3d.show();}else{m.dialog.show("URL","",_f35,null,_f3c,m.getServletURL(url.join("")),null,null,_f37);}},showCurrencyCodeDialog:function(type,_f3e,_f3f,_f40,_f41,_f42,_f43,_f44,_f45){var url=[],_f46={},_f47=_d01,_f48={},_f49="GetStaticData",_f4a=_f40||_d02,_f4b,_f4c;if(_f43.slice(_f43.length-1)!==";"){_f43+=";";}_f47+=_f49;_f48.option=type;_f48.fields=_f3e;_f48.parameter=_f3f;url.push("/screen/",_f4a);_f46.option=type;_f46.fields=_f3e;_f46.parameter=_f3f;_f46.dimensions=_f43;_f46.popupType="LIST_DATA";if(_f41){_f46.productcode=_f41;_f47.push(_cff,_f41);}if(_f42){_f46.subproductcode=_f42;_f47.push("&subproductcode=",_f42);}_f4b=function(){var grid=dj.byId(type+"data_grid");grid.showMessage(grid.loadingMessage);m.grid.setStoreURL(grid,m.getServletURL(_f47),_f48);m.connect("CurrencyName","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("currencydata_grid"),["NAME"],["CurrencyName"]);}});};if(_f45){_f4c=dj.byId("childXhrDialog")||new dj.Dialog({title:_f44,id:"childXhrDialog",href:m.getServletURL(url.join("")),ioMethod:misys.xhrPost,ioArgs:{content:_f46}});m.dialog.connect(_f4c,"onLoad",_f4b);m.dialog.connect(_f4c,"onHide",function(){setTimeout(function(){m.dialog.disconnect(_f4c);_f4c.destroyRecursive();},200);});var co=d.coords("xhrDialog");_f4c._relativePosition={x:co.x+30,y:co.y+30};_f4c.show();}else{m.dialog.show("URL","",_f44,null,_f4b,m.getServletURL(url.join("")),null,null,_f46);}},isGridEmpty:function(){var _f4d=true;if(dijit.byId("amendments").store){for(var i=0;i<dijit.byId("amendments").store._arrayOfAllItems.length;i++){if(dijit.byId("amendments").store._arrayOfAllItems[i]!=null){_f4d=false;}}}return _f4d;},toggleADR:function(){if(dj.byId("adr_1").get("value")||dj.byId("adr_2").get("value")){var adr3=dj.byId("adr_3");if(!m.isGridEmpty()){adr3.set("disabled",true);}dj.byId("narrative_description_goods_popup").set("value","");if(dj.byId("adr_1").get("value")){dj.byId("narrative_description_goods_popup").set("value","/ADD/");}else{if(dj.byId("adr_2").get("value")){dj.byId("narrative_description_goods_popup").set("value","/DELETE/");}}}if(dj.byId("adr_3").get("value")){dj.byId("narrative_description_goods_popup").set("value","");if(!m.isGridEmpty()&&dijit.byId("amendments").store._arrayOfAllItems[0].verb[0]!="REPALL"){dj.byId("adr_3").set("disabled",true);dj.byId("narrative_description_goods_popup").set("disabled",true);dj.byId("adr_3").set("value",false);}dj.byId("narrative_description_goods_popup").set("value","/REPALL/");}if(dj.byId("adr_1").get("value")==="ADD"||dj.byId("adr_2").get("value")==="DELETE"||dj.byId("adr_3").get("value")==="REPALL"){dj.byId("narrative_description_goods_popup").set("disabled",false);}if(!m.isGridEmpty()&&dijit.byId("amendments").store._arrayOfAllItems[0].verb[0]=="REPALL"){dj.byId("adr_1").set("disabled",true);dj.byId("adr_2").set("disabled",true);dj.byId("adr_3").set("disabled",false);dj.byId("adr_3").set("value","REPALL");dj.byId("narrative_description_goods_popup").set("disabled",true);}},consolidateGridData:function(){var _f4e;var verb,text;if(m.isGridEmpty()){m.dialog.show("CONFIRMATION",m.getLocalization("saveEmptyDataConfirmation"),"",_f4f);_f4e="<table><tr><span style='height: 1px;'></span></tr>";}else{if(!m.isGridEmpty()&&dijit.byId("amendments").store._arrayOfAllItems){_f4e="<table><tr><b><span style='color: blue;' class='indented-header;'>Current Amendment</span></b></tr>";for(var u=0;u<dijit.byId("amendments").store._arrayOfAllItems.length;u++){if(dijit.byId("amendments").store._arrayOfAllItems[u]!=null){_f4e+="<tr><td style='white-space: pre-wrap;'>";var _f50=dijit.byId("amendments").store._arrayOfAllItems[u].verb[0];var _f51="";if(_f50==="ADD"){_f51=misys.getLocalization("add");}else{if(_f50==="DELETE"){_f51=misys.getLocalization("delete");}else{if(_f50==="REPALL"){_f51=misys.getLocalization("repall");}}}verb="<b>/"+_f51+"/</b>";text=dijit.byId("amendments").store._arrayOfAllItems[u].content[0];_f4e+=verb+" "+text;_f4e+="</td></tr>";}}}}_f4e+="</table>";var _f4f=function(){var _f52;if(dijit.byId("amendments").store&&!m.isGridEmpty()){_f52=dijit.byId("amendments").store._arrayOfAllItems;if(m._config.narrativeId==="narrative_amend_goods"){m._config.narrativeDescGoodsDataStore=_f52;document.getElementById("narrativeDescriptionGoods").innerHTML=_f4e;}if(m._config.narrativeId==="narrative_amend_docs"){m._config.narrativeDocsReqDataStore=_f52;document.getElementById("narrativeDocumentsRequired").innerHTML=_f4e;}if(m._config.narrativeId==="narrative_amend_instructions"){m._config.narrativeAddInstrDataStore=_f52;document.getElementById("narrativeAdditionalInstructions").innerHTML=_f4e;}if(m._config.narrativeId==="narrative_amend_sp_beneficiary"){m._config.narrativeSpBeneDataStore=_f52;document.getElementById("narrativeSpecialBeneficiary").innerHTML=_f4e;}if(m._config.narrativeId==="narrative_amend_sp_recvbank"){m._config.narrativeSpRecvbankDataStore=_f52;document.getElementById("narrativeSpecialReceivingBank").innerHTML=_f4e;}}else{if(m.isGridEmpty()){if(m._config.narrativeId==="narrative_amend_goods"){m._config.narrativeDescGoodsDataStore.length=0;document.getElementById("narrativeDescriptionGoods").innerHTML=_f4e;}if(m._config.narrativeId==="narrative_amend_docs"){m._config.narrativeDocsReqDataStore.length=0;document.getElementById("narrativeDocumentsRequired").innerHTML=_f4e;}if(m._config.narrativeId==="narrative_amend_instructions"){m._config.narrativeAddInstrDataStore.length=0;document.getElementById("narrativeAdditionalInstructions").innerHTML=_f4e;}if(m._config.narrativeId==="narrative_amend_sp_beneficiary"){m._config.narrativeSpBeneDataStore.length=0;document.getElementById("narrativeSpecialBeneficiary").innerHTML=_f4e;}if(m._config.narrativeId==="narrative_amend_sp_recvbank"){m._config.narrativeSpRecvbankDataStore.length=0;document.getElementById("narrativeSpecialReceivingBank").innerHTML=_f4e;}}}if(dj.byId("narrative_description_goods_popup").state===""&&!dj.byId("narrative_description_goods_popup").disabled){m.toggleNarrativeDivStatus(true);}m.dialog.hide();m.initDivMouseOver();};if(!m.isGridEmpty()){if(m.hasTextBoxLogicalValue()){m.dialog.show("CONFIRMATION",m.getLocalization("unsavedDataExistInTextBox"),"",_f4f);}else{m.dialog.show("CONFIRMATION",m.getLocalization("saveDataConfirmation"),"",_f4f);}}else{m.dialog.show("CONFIRMATION",m.getLocalization("saveEmptyDataConfirmation"),"",_f4f);}},closeAmendmentPopup:function(){var _f53=function(){m._config.narrativeId="";var _f54=[m._config.narrativeDescGoodsDataStore,m._config.narrativeDocsReqDataStore,m._config.narrativeAddInstrDataStore,m._config.narrativeSpBeneDataStore,m._config.narrativeSpRecvbankDataStore];var i=0,_f55=0,_f56=0;for(var itr=0;itr<5;itr++){if(_f54[itr]){d.forEach(_f54[itr],function(){if(_f54[itr][i]&&_f54[itr][i]!==null){_f54[itr][i].content[0].replace(/&#xa;/g,"\n");_f56+=_f54[itr][i].content[0].length;_f55+=_f54[itr][i].text_size[0];}i++;});}}if(_f55<=(misys._config.is798=="Y"?792:800)){m.toggleNarrativeDivStatus(true);}else{m.initDivMouseOver();}m.dialog.hide();};if(!m.hasTextBoxLogicalValue()){m.dialog.show("CONFIRMATION",m.getLocalization("cancelTransactionConfirmation"),"",_f53);}else{if(dj.byId("narrative_description_goods_popup").get("value")!="/ADD/"&&dj.byId("narrative_description_goods_popup").get("value")!="/DELETE/"&&dj.byId("narrative_description_goods_popup").get("value")!="/REPALL/"){m.dialog.show("CONFIRMATION",m.getLocalization("unsavedDataExistInTextBox"),"",_f53);}}},viewNarrativeInPopUp:function(type,_f57,_f58,_f59,_f5a,_f5b,_f5c){var url=[],_f5d={},_f5e=[_d01],_f5f="GetStaticData",_f60=_d02,_f61;if(_f5a.slice(_f5a.length-1)!==";"){_f5a+=";";}var _f62;m._config.amendmentNumber=_f5c;m._config.narrativeId=_f58;if(_f58==="narrative_amend_goods"){if(dj.byId("org_narrative_description_goods")&&dj.byId("org_narrative_description_goods").get("value")!=""){_f62=dj.byId("org_narrative_description_goods").get("value");}else{_f62=dj.byId("original_narrative_description_goods")?dj.byId("original_narrative_description_goods").get("value"):"";}if(dj.byId("tnx_type_code")&&dj.byId("tnx_type_code").get("value")=="03"&&misys._config.narrativeDescGoodsDataStore&&misys._config.narrativeDescGoodsDataStore.length!=0){_f62=_f62.concat(m.customXMLForCurrentAmend(misys._config.narrativeDescGoodsDataStore));}}else{if(_f58==="narrative_amend_docs"){if(dj.byId("org_narrative_documents_required")&&dj.byId("org_narrative_documents_required").get("value")!=""){_f62=dj.byId("org_narrative_documents_required").get("value");}else{_f62=dj.byId("original_narrative_documents_required")?dj.byId("original_narrative_documents_required").get("value"):"";}if(dj.byId("tnx_type_code")&&dj.byId("tnx_type_code").get("value")=="03"&&misys._config.narrativeDocsReqDataStore&&misys._config.narrativeDocsReqDataStore.length!=0){_f62=_f62.concat(m.customXMLForCurrentAmend(misys._config.narrativeDocsReqDataStore));}}else{if(_f58==="narrative_amend_instructions"){if(dj.byId("org_narrative_additional_instructions")&&dj.byId("org_narrative_additional_instructions").get("value")!=""){_f62=dj.byId("org_narrative_additional_instructions").get("value");}else{_f62=dj.byId("original_narrative_additional_instructions")?dj.byId("original_narrative_additional_instructions").get("value"):"";}if(dj.byId("tnx_type_code")&&dj.byId("tnx_type_code").get("value")=="03"&&misys._config.narrativeAddInstrDataStore&&misys._config.narrativeAddInstrDataStore.length!=0){_f62=_f62.concat(m.customXMLForCurrentAmend(misys._config.narrativeAddInstrDataStore));}}else{if(_f58==="narrative_amend_sp_beneficiary"){if(dj.byId("org_narrative_special_beneficiary")&&dj.byId("org_narrative_special_beneficiary").get("value")!=""){_f62=dj.byId("org_narrative_special_beneficiary").get("value");}else{_f62=dj.byId("original_narrative_special_beneficiary")?dj.byId("original_narrative_special_beneficiary").get("value"):"";}if(dj.byId("tnx_type_code")&&dj.byId("tnx_type_code").get("value")=="03"&&misys._config.narrativeSpBeneDataStore&&misys._config.narrativeSpBeneDataStore.length!=0){_f62=_f62.concat(m.customXMLForCurrentAmend(misys._config.narrativeSpBeneDataStore));}}else{if(_f58==="narrative_amend_sp_recvbank"){if(dj.byId("org_narrative_special_recvbank")&&dj.byId("org_narrative_special_recvbank").get("value")!=""){_f62=dj.byId("org_narrative_special_recvbank").get("value");}else{_f62=dj.byId("original_narrative_special_recvbank")?dj.byId("original_narrative_special_recvbank").get("value"):"";}if(dj.byId("tnx_type_code")&&dj.byId("tnx_type_code").get("value")=="03"&&misys._config.narrativeSpRecvbankDataStore&&misys._config.narrativeSpRecvbankDataStore.length!=0){_f62=_f62.concat(m.customXMLForCurrentAmend(misys._config.narrativeSpRecvbankDataStore));}}}}}}_f5e.push(_f5f);_f5d.option=type;_f5d.dimensions=_f5a;_f5d.messageValue=_f57;_f5d.node=type;_f5d.rundataXML=_f62;url.push("/screen/",_f60);m.dialog.show("URL","",_f5b,null,_f61,m.getServletURL(url.join("")),null,null,_f5d);},customXMLForCurrentAmend:function(_f63){var i=0;var _f64="<amendments>";_f64=_f64.concat("<amendment>");_f64=_f64.concat("<sequence>");_f64=_f64.concat(m._config.amendmentNumber);_f64=_f64.concat("</sequence>");_f64=_f64.concat("<data>");for(i=0;i<_f63.length;i++){if(_f63[i]!=null){_f64=_f64.concat("<datum>");_f64=_f64.concat("<id>");_f64=_f64.concat(i);_f64=_f64.concat("</id>");_f64=_f64.concat("<verb>");_f64=_f64.concat(_f63[i].verb[0]);_f64=_f64.concat("</verb>");_f64=_f64.concat("<text>");_f64=_f64.concat(dojox.html.entities.encode(_f63[i].content[0],dojox.html.entities.html));_f64=_f64.concat("</text>");_f64=_f64.concat("</datum>");}}_f64=_f64.concat("</data>");_f64=_f64.concat("</amendment>");_f64=_f64.concat("</amendments>");return _f64;},initDivMouseOver:function(){var _f65=document.getElementById("tabNarrativeDescriptionGoods");var _f66=dj.byId("adv_send_mode")?dj.byId("adv_send_mode").get("value"):"";_f65.onmouseover=function(){if((dj.byId("narrative_description_goods_popup")&&dj.byId("narrative_description_goods_popup").state=="Error")||(document.getElementById("tabNarrativeDescriptionGoods").status==false)&&(_f66==="01")&&m._config.isZCharValid&&m._config.isSingleNarrativeValid[0]){_d0e?dijit.showTooltip(m.getLocalization("invalidFieldSizeError",[_d09,_d0b]),_f65,["after"]):dijit.showTooltip(m.getLocalization("invalidSingleFieldLength",[_d0a,_d0c]),_f65,["after"]);}else{if(m._config.isNarrativeZCharValidArray&&!m._config.isNarrativeZCharValidArray[0]&&document.getElementById("tabNarrativeDescriptionGoods").status==false){dijit.showTooltip(m.getLocalization("invalidSWIFTTransactionValidValuesWithExtBank"),_f65,["after"]);}else{if(m._config.isSingleNarrativeValid&&!m._config.isSingleNarrativeValid[0]&&document.getElementById("tabNarrativeDescriptionGoods").status==false){dijit.showTooltip(m.getLocalization("invalidSingleFieldLength",[_d0a,_d0c]),_f65,["after"]);}}}};_f65.onmouseout=function(){dijit.hideTooltip(_f65);};var _f67=document.getElementById("tabNarrativeDocumentsRequired");_f67.onmouseover=function(){if((dj.byId("narrative_description_goods_popup")&&dj.byId("narrative_description_goods_popup").state=="Error")||(document.getElementById("tabNarrativeDescriptionGoods").status==false)&&_f67.status==false&&(_f66==="01")&&m._config.isZCharValid&&m._config.isSingleNarrativeValid[1]){_d0e?dijit.showTooltip(m.getLocalization("invalidFieldSizeError",[_d09,_d0b]),_f67,["after"]):dijit.showTooltip(m.getLocalization("invalidSingleFieldLength",[_d0a,_d0c]),_f67,["after"]);}else{if(m._config.isNarrativeZCharValidArray&&!m._config.isNarrativeZCharValidArray[1]&&document.getElementById("tabNarrativeDocumentsRequired").status==false){dijit.showTooltip(m.getLocalization("invalidSWIFTTransactionValidValuesWithExtBank"),_f67,["after"]);}else{if(m._config.isSingleNarrativeValid&&!m._config.isSingleNarrativeValid[1]&&document.getElementById("tabNarrativeDescriptionGoods").status==false){dijit.showTooltip(m.getLocalization("invalidSingleFieldLength",[_d0a,_d0c]),_f65,["after"]);}}}};_f67.onmouseout=function(){dijit.hideTooltip(_f67);};var _f68=document.getElementById("tabNarrativeAdditionalInstructions");_f68.onmouseover=function(){if((dj.byId("narrative_description_goods_popup")&&dj.byId("narrative_description_goods_popup").state=="Error")||(document.getElementById("tabNarrativeDescriptionGoods").status==false)&&_f68.status==false&&(_f66==="01")&&m._config.isZCharValid&&m._config.isSingleNarrativeValid[2]){_d0e?dijit.showTooltip(m.getLocalization("invalidFieldSizeError",[_d09,_d0b]),_f68,["after"]):dijit.showTooltip(m.getLocalization("invalidSingleFieldLength",[_d0a,_d0c]),_f68,["after"]);}else{if(m._config.isNarrativeZCharValidArray&&!m._config.isNarrativeZCharValidArray[2]&&document.getElementById("tabNarrativeAdditionalInstructions").status==false){dijit.showTooltip(m.getLocalization("invalidSWIFTTransactionValidValuesWithExtBank"),_f68,["after"]);}else{if(m._config.isSingleNarrativeValid&&!m._config.isSingleNarrativeValid[2]&&document.getElementById("tabNarrativeDescriptionGoods").status==false){dijit.showTooltip(m.getLocalization("invalidSingleFieldLength",[_d0a,_d0c]),_f65,["after"]);}}}};_f68.onmouseout=function(){dijit.hideTooltip(_f68);};var _f69=document.getElementById("tabNarrativeSpecialBeneficiary");_f69.onmouseover=function(){if((dj.byId("narrative_description_goods_popup")&&dj.byId("narrative_description_goods_popup").state=="Error")||(document.getElementById("tabNarrativeDescriptionGoods").status==false)&&_f69==false&&(_f66==="01")&&m._config.isZCharValid&&m._config.isSingleNarrativeValid[3]){_d0e?dijit.showTooltip(m.getLocalization("invalidFieldSizeError",[_d09,_d0b]),_f69,["after"]):dijit.showTooltip(m.getLocalization("invalidSingleFieldLength",[_d0a,_d0c]),_f69,["after"]);}else{if(m._config.isNarrativeZCharValidArray&&!m._config.isNarrativeZCharValidArray[3]&&document.getElementById("tabNarrativeSpecialBeneficiary").status==false){dijit.showTooltip(m.getLocalization("invalidSWIFTTransactionValidValuesWithExtBank"),_f69,["after"]);}else{if(m._config.isSingleNarrativeValid&&!m._config.isSingleNarrativeValid[3]&&document.getElementById("tabNarrativeDescriptionGoods").status==false){dijit.showTooltip(m.getLocalization("invalidSingleFieldLength",[_d0a,enteredtSingle]),_f65,["after"]);}}}};_f69.onmouseout=function(){dijit.hideTooltip(_f69);};if(document.getElementById("tabNarrativeSpecialReceivingBank")){var _f6a=document.getElementById("tabNarrativeSpecialReceivingBank");_f6a.onmouseover=function(){if((dj.byId("narrative_description_goods_popup")&&dj.byId("narrative_description_goods_popup").state=="Error")||(document.getElementById("tabNarrativeDescriptionGoods").status==false)&&_f6a.status==false&&(_f66==="01")&&m._config.isZCharValid&&m._config.isSingleNarrativeValid[4]){_d0e?dijit.showTooltip(m.getLocalization("invalidFieldSizeError",[_d09,_d0b]),_f6a,["after"]):dijit.showTooltip(m.getLocalization("invalidSingleFieldLength",[_d0a,_d0c]),_f6a,["after"]);}else{if(m._config.isNarrativeZCharValidArray&&!m._config.isNarrativeZCharValidArray[4]&&document.getElementById("tabNarrativeSpecialReceivingBank").status==false){dijit.showTooltip(m.getLocalization("invalidSWIFTTransactionValidValuesWithExtBank"),_f6a,["after"]);}else{if(m._config.isSingleNarrativeValid&&!m._config.isSingleNarrativeValid[4]&&document.getElementById("tabNarrativeDescriptionGoods").status==false){dijit.showTooltip(m.getLocalization("invalidSingleFieldLength",[_d0a,_d0c]),_f65,["after"]);}}}};_f69.onmouseout=function(){dijit.hideTooltip(_f69);};}},editNarrativeInPopUp:function(type,_f6b,_f6c,_f6d,_f6e,_f6f,_f70){var url=[],_f71={},_f72=[_d01],_f73="GetStaticData",_f74=_d02,_f75;if(_f6e.slice(_f6e.length-1)!==";"){_f6e+=";";}var _f76,_f77=dj.byId("is798")?dj.byId("is798").get("value"):(dj.byId("issuing_bank_abbv_name")?(m._config.customerBanksMT798Channel[dj.byId("issuing_bank_abbv_name").get("value")]==true?"Y":"N"):(dj.byId("advising_bank_abbv_name")?(m._config.customerBanksMT798Channel[dj.byId("advising_bank_abbv_name").get("value")]==true?"Y":"N"):"N"));m._config.is798=_f77;m._config.amendmentNumber=_f70;m._config.narrativeId=_f6c;if(_f6c==="narrative_amend_goods"){_f76=dj.byId("org_narrative_description_goods")?dj.byId("org_narrative_description_goods").get("value"):"";}else{if(_f6c==="narrative_amend_docs"){_f76=dj.byId("org_narrative_documents_required")?dj.byId("org_narrative_documents_required").get("value"):"";}else{if(_f6c==="narrative_amend_instructions"){_f76=dj.byId("org_narrative_additional_instructions")?dj.byId("org_narrative_additional_instructions").get("value"):"";}else{if(_f6c==="narrative_amend_sp_beneficiary"){_f76=dj.byId("org_narrative_special_beneficiary")?dj.byId("org_narrative_special_beneficiary").get("value"):"";}else{if(_f6c==="narrative_amend_sp_recvbank"){_f76=dj.byId("org_narrative_special_recvbank")?dj.byId("org_narrative_special_recvbank").get("value"):"";}}}}}_f72.push(_f73);_f71.option=type;_f71.dimensions=_f6e;_f71.messageValue=_f6b;_f71.node=type;_f71.rundataXML=_f76;_f71.is798=_f77;url.push("/screen/",_f74);var _f78="";_f75=function(){if(m._config.codeword_enabled==true){dj.byId("narrative_description_goods_popup").set("disabled",true);var _f79=function(){m.toggleADR();};var _f7a=function(){dj.byId(_f78).set("value",true);};m.connect("adr_1","onClick",function(){if(!m.hasTextBoxLogicalValue()){m.toggleADR();}else{m.dialog.show("Warning",m.getLocalization("textboxDataLossOnToggle"),"","","","",_f79,_f7a);}});m.connect("adr_1","onChange",function(){_f78="adr_1";});m.connect("adr_2","onClick",function(){if(!m.hasTextBoxLogicalValue()){m.toggleADR();}else{m.dialog.show("Warning",m.getLocalization("textboxDataLossOnToggle"),"","","","",_f79,_f7a);}});m.connect("adr_2","onChange",function(){_f78="adr_2";});m.connect("adr_3","onClick",function(){if(!m.hasTextBoxLogicalValue()){m.toggleADR();}else{m.dialog.show("Warning",m.getLocalization("textboxDataLossOnToggle"),"","","","",_f79,_f7a);}});m.connect("adr_3","onChange",function(){_f78="adr_3";});m.connect("narrative_description_goods_popup","onKeyPress",function(evnt){var _f7b;_f7b=dj.byId("adr_1").get("value")=="ADD"?5:8;if((evnt.keyCode!==dojo.keys.LEFT_ARROW&&(evnt.keyCode!==dojo.keys.RIGHT_ARROW))&&((this.domNode.selectionStart<_f7b)||((this.domNode.selectionEnd==_f7b)&&(evnt.keyCode===dojo.keys.BACKSPACE)))){evnt.preventDefault();}});}if(misys._config.swiftExtendedNarrativeEnabled){m.setValidation("narrative_description_goods_popup",m.validatePopupDataLength);}else{m.setValidation("narrative_description_goods_popup",m.validatePopupData);}m.connect("addAmendmentButton","onClick",function(){if(m.hasTextBoxLogicalValue()){m.onSaveSizeAndSwiftValidation();}});};m.dialog.show("URL","",_f6f,null,_f75,m.getServletURL(url.join("")),null,null,_f71);},hasTextBoxLogicalValue:function(){if(dj.byId("narrative_description_goods_popup").disabled||dj.byId("narrative_description_goods_popup").get("value")==="/ADD/"||dj.byId("narrative_description_goods_popup").get("value")==="/DELETE/"||dj.byId("narrative_description_goods_popup").get("value")==="/REPALL/"){return false;}return true;},onSaveSizeAndSwiftValidation:function(){var _f7c=dj.byId("narrative_description_goods_popup").get("value");var _f7d="";if(dj.byId("adv_send_mode")){_f7d=dj.byId("adv_send_mode").get("value");}var _f7e=dj.byId("swiftregexzcharValue").get("value");if(_f7d!=="01"||_f7c===null||_f7c===""){m._config.isZCharValid=true;m.toggleNarrativeDivStatus(true);}else{var _f7f=_f7c;var _f80=new RegExp(_f7e);m._config.isZCharValid=_f80.test(_f7f);}dj.byId("narrative_description_goods_popup").set("value",dojox.html.entities.encode(dj.byId("narrative_description_goods_popup").get("value"),dojox.html.entities.html));var _f81=function(){dj.byId("amendments").createDataGrid();if(m._config.codeword_enabled==true){m.toggleADR();}else{if(!m.isGridEmpty()&&dijit.byId("amendments").store._arrayOfAllItems[0].verb[0]=="REPALL"){dj.byId("narrative_description_goods_popup").set("disabled",true);}}};var _f82=function(){var _f83=dj.byId("narrative_description_goods_popup").get("value");if(m.validatePopupData()){dj.byId("amendments").createDataGrid();}if(m._config.codeword_enabled==true){m.toggleADR();m._config.swiftExtendedNarrativeEnabled?"":dj.byId("narrative_description_goods_popup").set("value",_f83);}else{if(!m.isGridEmpty()&&dijit.byId("amendments").store._arrayOfAllItems[0].verb[0]=="REPALL"){dj.byId("narrative_description_goods_popup").set("disabled",true);}}};if(!m._config.isZCharValid){if(m.validatePopupData()){var _f84;if(document.getElementById("_userType")){_f84=document.getElementById("_userType").getAttribute("value");}if(_f84=="03"||_f84=="06"){m.dialog.show("CONFIRMATION",m.getLocalization("invalidSWIFTTransactionValidValuesWithExt"),"","","","",_f81);}else{m.dialog.show("Warning",m.getLocalization("invalidSWIFTTransactionValidValuesWithExtBank"),"","","","",_f81);}m.toggleNarrativeDivStatus(true);}else{m.dialog.show("ERROR",m.getLocalization("invalidSWIFTTPopupValueLength"),"","","","",_f82);}}else{if(m._config.isZCharValid){if(dj.byId("narrative_description_goods_popup").state==="Error"){m.toggleNarrativeDivStatus(false);if(m._config.swiftExtendedNarrativeEnabled){m.dialog.show("Warning",m.getLocalization("invalidSWIFTTPopupValueSize"),"","","","",_f81);}else{m.dialog.show("ERROR",m.getLocalization("invalidSWIFTTPopupValueLength"),"","","","",_f82);}}else{dj.byId("amendments").createDataGrid();if(m._config.codeword_enabled==true){m.toggleADR();}else{if(!m.isGridEmpty()&&dijit.byId("amendments").store._arrayOfAllItems[0].verb[0]=="REPALL"){dj.byId("narrative_description_goods_popup").set("disabled",true);}}m.toggleNarrativeDivStatus(true);}}}},toggleNarrativeDivStatus:function(_f85,_f86){var _f87=["tabNarrativeDescriptionGoods","tabNarrativeDocumentsRequired","tabNarrativeAdditionalInstructions","tabNarrativeSpecialBeneficiary","tabNarrativeSpecialReceivingBank"];var _f88=_f85?"solid 1px #B8B8B8":"solid 1px #d46464";if(_f86==""||_f86==undefined){for(var itr=0;itr<_f87.length;itr++){if(document.getElementById(_f87[itr])!=null){document.getElementById(_f87[itr]).status=_f85;document.getElementById(_f87[itr]).style.border=_f88;}}}else{document.getElementById(_f86).status=_f85;document.getElementById(_f86).style.border=_f88;}if(document.getElementById("tabNarrativeDescriptionGoods")!=null||document.getElementById("tabNarrativeDocumentsRequired")!=null||document.getElementById("tabNarrativeAdditionalInstructions")!=null||document.getElementById("tabNarrativeSpecialBeneficiary")!=null||document.getElementById("tabNarrativeSpecialReceivingBank")!=null){m.initDivMouseOver();}},validatePopupDataLength:function(){var _f89=0,_f8a=0,_f8b=0,i=0,_f8c=0,_f8d=0;var _f8e=[m._config.narrativeDescGoodsDataStore,m._config.narrativeDocsReqDataStore,m._config.narrativeAddInstrDataStore,m._config.narrativeSpBeneDataStore,m._config.narrativeSpRecvbankDataStore];var _f8f=["narrative_amend_goods","narrative_amend_docs","narrative_amend_instructions","narrative_amend_sp_beneficiary","narrative_amend_sp_recvbank"];var _f90=_f8f.indexOf(m._config.narrativeId);var _f91=dj.byId("adv_send_mode")?dj.byId("adv_send_mode").get("value"):"";if(_f91!=="01"){return true;}for(var itr=0;itr<5;itr++){if(_f8e[itr]&&(itr!=_f90&&_f90!=-1)){i=0;d.forEach(_f8e[itr],function(){if(_f8e[itr][i]&&_f8e[itr][i]!==null){_f8e[itr][i].content[0].replace(/&#xa;/g,"\n");_f8a+=_f8e[itr][i].content[0].length;_f8c+=_f8e[itr][i].text_size[0];}i++;});}}if(dijit.byId("amendments")&&!m.isGridEmpty()&&dijit.byId("amendments").store._arrayOfAllItems){for(var v=0;v<dijit.byId("amendments").store._arrayOfAllItems.length;v++){if(dijit.byId("amendments").store._arrayOfAllItems[v]!==null){_f8b+=dijit.byId("amendments").store._arrayOfAllItems[v].content?dijit.byId("amendments").store._arrayOfAllItems[v].content[0].length:0;_f8b+=dijit.byId("amendments").store._arrayOfAllItems[v].verb?("/"+dijit.byId("amendments").store._arrayOfAllItems[v].verb[0]+"/").length:0;_f8d+=dijit.byId("amendments").store._arrayOfAllItems[v].text_size[0];}}}if(dj.byId("narrative_description_goods_popup")){_f89=(!m.hasTextBoxLogicalValue())?0:dj.byId("narrative_description_goods_popup").get("value").length;_d0a=(misys._config.is798=="Y"?792:800)*65;_d0c=_f8b+_f89;_d0e=m.validateExtendedNarrativeSwift2018(dj.byId("narrative_description_goods_popup").get("value"),_f8d,misys._config.is798,true);}_d0d=m.validateExtendedNarrativeSwift2018(dj.byId("narrative_description_goods_popup").get("value"),(_f8d+_f8c),misys._config.is798,false);_d09=(misys._config.is798=="Y"?992:1000)*65;_d0b=(_f8b+_f8a+_f89);if(!_d0e){this.invalidMessage=m.getLocalization("invalidSingleFieldLength",[_d0a,_d0c]);}else{this.invalidMessage=m.getLocalization("invalidFieldSizeError",[_d09,_d0b]);}return _d0e&&_d0d;},validatePopupData:function(){var _f92=true;if(m._config.swiftExtendedNarrativeEnabled){return _f92;}var _f93=0,_f94=0,_f95=0;if(dijit.byId("amendments")&&!m.isGridEmpty()&&dijit.byId("amendments").store._arrayOfAllItems){for(var w=0;w<dijit.byId("amendments").store._arrayOfAllItems.length;w++){if(dijit.byId("amendments").store._arrayOfAllItems[w]!==null){_f94+=dijit.byId("amendments").store._arrayOfAllItems[w].content?dijit.byId("amendments").store._arrayOfAllItems[w].content[0].length:0;_f94+=dijit.byId("amendments").store._arrayOfAllItems[w].verb?("/"+dijit.byId("amendments").store._arrayOfAllItems[w].verb[0]+"/").length:0;_f95+=dijit.byId("amendments").store._arrayOfAllItems[w].text_size[0];}}}if(dj.byId("narrative_description_goods_popup")){_f93=(!m.hasTextBoxLogicalValue())?0:dj.byId("narrative_description_goods_popup").get("value").length;}_d09=100*65;_d0b=_f93+_f94;this.invalidMessage=m.getLocalization("invalidFieldSizeError",[_d09,_d0b]);return m.validateExtendedNarrativeSwift2018(dj.byId("narrative_description_goods_popup").get("value"),_f95,false);},showTruncatedGridData:function(_f96,_f97){var _f98=null;if(_f96!==""&&_f96!==null){_f98="<p style=\"white-space: pre-wrap;\">";var _f99=_f96.split(/\n/);var _f9a=_f99.length>_f97?_f97:_f99.length;for(var i=0;i<_f9a;i++){_f98=_f98+_f99[i]+"\n";}if(_f99.length>_f97){var tail=".....";_f98=_f98.trim()+tail;}_f98+="</p>";}return _f98;},showExtendedNarrativeView:function(type,_f9b,_f9c,_f9d,_f9e){if(dj.byId(_f9e)){var msg=dojox.html.entities.encode(dj.byId(_f9e).get("value"),dojox.html.entities.html);msg=_d0f(msg);msg="<div style='width: auto; height: 400px;  overflow:auto'>"+msg+"</div>";}else{if(_f9d!="gridPreviewOverlay"){msg=_f9d;msg=_d12(msg);msg="<div style='height: 400px;width: auto; overflow:auto'>"+msg+"</div>";}else{if(_f9d=="gridPreviewOverlay"){msg="";_f9c="Current Amendment";if(dijit.byId("amendments").store){for(var i=0;i<dijit.byId("amendments").store._arrayOfAllItems.length;i++){if(dijit.byId("amendments").store._arrayOfAllItems[i]){var _f9f=dijit.byId("amendments").store._arrayOfAllItems[i].verb[0];var _fa0="";if(_f9f==="ADD"){_fa0=misys.getLocalization("add");}else{if(_f9f==="DELETE"){_fa0=misys.getLocalization("delete");}else{if(_f9f==="REPALL"){_fa0=misys.getLocalization("repall");}}}msg+="<b>"+"/"+_fa0+"/"+"</b>";msg+=_d12(dijit.byId("amendments").store._arrayOfAllItems[i].content[0]);}msg+="<div style='height: 8px; background-color: #FFFFFF'><div style='height: 1px; background-color: ##808080'></div></div>";}}else{msg=m.getLocalization("emptyAmendmentGrid");}msg="<div style='width: auto; height: 400px; overflow:auto'>"+msg+"</div>";}}}m.dialog.show("EXTENDED-VIEW",msg,_f9c);},showLocalizationDialog:function(id,_fa1){dj.byId("xsl_name").value=id;dj.byId("new_title").set("value",_fa1);dj.byId("localizationDialog").show();},undoLocalization:function(){dj.byId("new_title").set("value","");m.submitLocalization();},submitLocalization:function(){var _fa2=dj.byId("xsl_name").value;var _fa3=dj.byId("new_title").value;m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/UpdateLocalizationAction"),sync:true,handleAs:"json",content:{XSLNAME:_fa2,NEWNAME:_fa3},load:function(_fa4,args){},error:function(_fa5,args){console.error("[misys.grid._base] Country Validation error",_fa5);}});dj.byId("localizationDialog").hide();location.reload();},showSearchTransactionsDialog:function(_fa6,_fa7,_fa8){var url=[m.getServletURL("/screen/AjaxScreen/action/ListOfTransactionsAction")];url.push("?companyid=",_fa6,_cff,_fa7,"&referenceid=",_fa8);d.style("linkedTransaction_dialog","width","650px");d.create("div",{id:"transaction_div"},"linkedTransaction_div");if(!dj.byId("transaction_Grid")){_d23(url.join(""),"transaction_div");}dj.byId("linkedTransaction_dialog").show();d.style("linkedTransaction_dialog","height","225px");},deleteTransactions:function(){dj.byId("imp_bill_ref_id").set("value","");dj.byId("transaction_Grid").selection.clear();d.byId("TransactionLink").innerHTML=m.getLocalization("NoTransactionLink");},createRteEditor:function(_fa9,_faa){var _fab=dj.byId(_faa);if(!_fab){var _fac=d.byId(_faa);var _fad=d.byId("rteContent").innerHTML;_fab=new dj.Editor({id:_faa,name:_faa,rows:"13",cols:"40",maxSize:"300",plugins:["undo","redo","|","bold","italic","underline","strikethrough","|","insertOrderedList","insertUnorderedList","|","indent","outdent","|","justifyLeft","justifyRight","justifyCenter","justifyFull","||",{name:"dijit._editor.plugins.FontChoice",command:"fontName"},{name:"misys.editor.plugins.ProductFieldChoice",command:"misysEditorPluginsProductFieldChoice",product:_fa9}]},_fac);_fad=_fad.replace(/&lt;/g,"<");_fad=_fad.replace(/&gt;/g,">");_fad=_fad.replace(/&amp;/g,"&");_fad=_fad.replace(/&quot;/g,"\"");_fab.set("value",_fad?_fad:"");}},toggleBankGrids:function(){var _fae=dj.byId("bankRadioId");if(_fae.checked){m.animate("wipeOut",d.byId("bank_swift_data"),function(){m.animate("wipeIn",d.byId("bankdata"));dijit.byId("bankdata_grid").resize();});}else{m.animate("wipeOut",d.byId("bankdata"),function(){m.animate("wipeOut",d.byId("contentPaneContainer"));m.animate("wipeIn",d.byId("bank_swift_data"));d.query("#bankTypeContainer .dojoxGrid").forEach(function(grid){var _faf=dj.byId(grid.id);if(_faf){_faf.resize();}});});}},toggleFieldSetContent:function(_fb0,_fb1,_fb2){var _fb3=d.byId(_fb1+"_img_down");var _fb4=d.byId(_fb1+"_img_up");if(_fb2==="down"){m.animate("wipeIn",_fb0);d.style(_fb3,"display","none");d.style(_fb4,"display","block");d.style(_fb4,"cursor","pointer");}else{m.animate("wipeOut",_fb0);d.style(_fb4,"display","none");d.style(_fb3,"display","block");d.style(_fb3,"cursor","pointer");}},toggleEyeSetContent:function(_fb5,_fb6,_fb7,_fb8,_fb9){var _fba=d.byId(_fb6+"_eye_down");var _fbb=d.byId(_fb6+"_eye_up");if(_fb7==="down"){d.style(_fba,"display","none");d.style(_fbb,"display","inline");d.style(_fbb,"cursor","pointer");document.getElementById(_fb9).getElementsByClassName("content")[0].innerHTML=_fb8;}else{d.style(_fbb,"display","none");d.style(_fba,"display","inline");d.style(_fba,"cursor","pointer");document.getElementById(_fb9).getElementsByClassName("content")[0].innerHTML="************";}},toggleClassInlineBlock:function(_fbc,show){if(show===true){d.removeClass(_fbc,"hide");d.addClass(_fbc,"inlineBlock");}else{d.removeClass(_fbc,"inlineBlock");d.addClass(_fbc,"hide");}},toggleFieldsReadOnly:function(_fbd,_fbe,_fbf){d.forEach(_fbd,function(node){if(dj.byId(node)){if(_fbf){dj.byId(node).set("value","");}dj.byId(node).set("readOnly",_fbe);}});},disableFields:function(_fc0,_fc1){d.forEach(_fc0,function(node){if(dj.byId(node)){dj.byId(node).set("disabled",_fc1);}});},generateEsignRequestTransaction:function(_fc2,_fc3){var _fc4=function(){_fc3=_fc3+"&prodCode="+m._config.productCode;dj.byId("realform_operation").set("value",_fc2);dj.byId("option").set("value","");dj.byId("tnxtype").set("value","");dj.byId("realform").set("action",_fc3);dj.byId("realform").submit();};m.dialog.show("CONFIRMATION",m.getLocalization("generateEsignRequest"),"",_fc4);},proxyAuthoriseTransaction:function(_fc5,_fc6){var _fc7=function(){_fc6=_fc6+"&prodCode="+m._config.productCode;dj.byId("realform_operation").set("value",_fc5);dj.byId("option").set("value","");dj.byId("tnxtype").set("value","");dj.byId("realform").set("action",_fc6);dj.byId("realform").submit();};m.dialog.show("CONFIRMATION",m.getLocalization("proxyAuthorise"),"",_fc7);},toggleGuaranteeType:function(){var _fc8=d.byId("bgtypedetails-editor");if(this.get("value")==="99"){m.animate("fadeIn",_fc8);}else{m.animate("fadeOut",_fc8);}},getIncoYear:function(){var _fc9=null;var _fca=dj.byId("inco_term_year");var _fcb=dj.byId("issuing_bank_abbv_name")?dj.byId("issuing_bank_abbv_name").get("value"):"";var _fcc=dj.byId("remitting_bank_abbv_name")?dj.byId("remitting_bank_abbv_name").get("value"):"";var _fcd=dj.byId("advising_bank_abbv_name")?dj.byId("advising_bank_abbv_name").get("value"):"";if(_fcb!=""){_fc9=misys._config.incoTermYearMap[_fcb];}else{if(_fcc!=""){_fc9=misys._config.incoTermYearMap[_fcc];}else{if(_fcd!=""){_fc9=misys._config.incoTermYearMap[_fcd];}else{_fc9=misys._config.incoTermYearMap[misys._config.bankAbbvNamePrefix];}}}var _fce={"identifier":"id","items":[]};var _fcf=new dojo.data.ItemFileWriteStore({data:_fce});if(_fc9!=undefined&&_fc9!=""){for(var j=0;j<_fc9.length;j++){_fcf.newItem({"id":_fc9[j].value,"name":_fc9[j].name});}if(_fca){_fca.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_fcf}});_fca.store=_fcf;_fca.set("disabled",false);_fca.fetchProperties={sort:[{attribute:"name"}]};}}else{_fca.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_fcf}});}var _fd0=dijit.byId("inco_term_year")?dijit.byId("inco_term_year").get("value"):"";var _fd1=_fca.store._arrayOfAllItems;var flag=false;for(var i=0;i<_fd1.length;i++){if(_fd1[i]&&_fd1[i].name!=""&&_fd1[i].name==_fd0){flag=true;break;}}if(!flag){dijit.byId("inco_term_year").set("value","");dj.byId("inco_term").set("value","");}},getDeliveryTo:function(){var _fd2=null;var _fd3=dj.byId("delivery_to");var _fd4=dj.byId("issuing_bank_abbv_name")?dj.byId("issuing_bank_abbv_name").get("value"):"";var _fd5=dj.byId("remitting_bank_abbv_name")?dj.byId("remitting_bank_abbv_name").get("value"):"";var _fd6=dj.byId("advising_bank_abbv_name")?dj.byId("advising_bank_abbv_name").get("value"):"";if(_fd4!=""){_fd2=misys._config.deliveryToMap[_fd4];}else{if(_fd5!=""){_fd2=misys._config.deliveryToMap[_fd5];}else{if(_fd6!=""){_fd2=misys._config.deliveryToMap[_fd6];}else{_fd2=misys._config.deliveryToMap[misys._config.bankAbbvNamePrefix];}}}var _fd7={"identifier":"id","items":[]};var _fd8=new dojo.data.ItemFileWriteStore({data:_fd7});if(_fd2!=undefined&&_fd2!=""){for(var j=0;j<_fd2.length;j++){_fd8.newItem({"id":_fd2[j].value,"name":_fd2[j].name});}if(_fd3){_fd3.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_fd8}});_fd3.store=_fd8;_fd3.set("disabled",false);_fd3.fetchProperties={sort:[{attribute:"name"}]};}}else{_fd3.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_fd8}});}var _fd9=dijit.byId("delivery_to")?dijit.byId("delivery_to").get("value"):"";var _fda=_fd3.store._arrayOfAllItems;var flag=false;for(var i=0;i<_fda.length;i++){if(_fda[i]&&_fda[i].id!=""&&_fda[i].id==_fd9){flag=true;break;}}if(!flag){dijit.byId("delivery_to").set("value","");dj.byId("delivery_to").set("value","");}},getIncoTerm:function(){var _fdb=null;var _fdc=dj.byId("inco_term");var _fdd;var _fde=dj.byId("issuing_bank_abbv_name")?dj.byId("issuing_bank_abbv_name").get("value"):"";var _fdf=dj.byId("remitting_bank_abbv_name")?dj.byId("remitting_bank_abbv_name").get("value"):"";var _fe0=dj.byId("advising_bank_abbv_name")?dj.byId("advising_bank_abbv_name").get("value"):"";if(_fde!=""){_fdd=_fde+":"+dj.byId("inco_term_year").get("value");}else{if(_fdf!=""){_fdd=_fdf+":"+dj.byId("inco_term_year").get("value");}else{if(_fe0!=""){_fdd=_fe0+":"+dj.byId("inco_term_year").get("value");}else{_fdd=misys._config.bankAbbvNamePrefix+":"+dj.byId("inco_term_year").get("value");}}}_fdb=misys._config.incoTermProductMap[_fdd];var _fe1={"identifier":"id","items":[]};var _fe2=new dojo.data.ItemFileWriteStore({data:_fe1});if(_fdb!=undefined&&_fdb!=""){for(var j=0;j<_fdb.length;j++){_fe2.newItem({"id":_fdb[j].value,"name":_fdb[j].name});}_fdc.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_fe2}});if(_fdc){_fdc.store=_fe2;}_fdc.set("disabled",false);_fdc.fetchProperties={sort:[{attribute:"name"}]};}else{_fdc.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_fe2}});}if(dj.byId("inco_term_year").get("value")!==dj.byId("org_term_year").get("value")){dj.byId("inco_term").set("value","");dj.byId("org_term_year").set("value",dj.byId("inco_term_year").get("value"));}},checkForAttachments:function(){var _fe3=dj.byId("attIds");var _fe4=false;var _fe5=0;if(_fe3){var _fe6=[dj.byId(_d05)];d.forEach(_fe6,function(_fe7){if(_fe7&&_fe7.grid){var arr=_fe7.grid.store._arrayOfAllItems;d.forEach(arr,function(_fe8,i){if(_fe8!=null){_fe4=true;_fe5++;}});}});}if(dj.byId(_d05)&&dj.byId(_d05).store){if(dj.byId(_d05).store._arrayOfAllItems.length>0){return true;}}m._config.onSubmitErrorMsg=m.getLocalization("mandatoryMinimumFileUploadTypeError");return _fe4;},hasAttachments:function(){var _fe9=dj.byId("attIds");var _fea=false;var _feb=0;if(_fe9){var _fec=[dj.byId(_d05)];d.forEach(_fec,function(_fed){if(_fed&&_fed.grid){var arr=_fed.grid.store._arrayOfAllItems;d.forEach(arr,function(_fee,i){if(_fee!=null){_fea=true;_feb++;}});}});}return _fea;},toggleMT798Fields:function(_fef){var _ff0=dj.byId(_fef).get("value");var _ff1="";if(dj.byId("adv_send_mode")){_ff1=dj.byId("adv_send_mode").get("value");}var _ff2=m._config.customerBanksMT798Channel[_ff0]===true&&_ff1==="01";m.toggleFields(_ff2,["delivery_channel","transport_mode_nosend","transport_mode"],null,false,false);m.toggleFields(_ff2&&m.hasAttachments(),null,["delivery_channel"],false,false);if(_ff2){if(dj.byId("delivery_channel")){m.animate("fadeIn","delivery_channel_row");m.connect("delivery_channel","onChange",function(){if(dj.byId(_d05)){if(dj.byId("delivery_channel").get("value")==="FACT"){dj.byId(_d05).displayFileAct(true);}else{dj.byId(_d05).displayFileAct(false);}}});dj.byId("delivery_channel").onChange();}if(dj.byId("transport_mode")){m.animate("fadeIn","transport_mode_nosend_row");m.animate("fadeIn","transport_mode_text_nosend_row");}}else{if(dj.byId("delivery_channel")){m.animate("fadeOut","delivery_channel_row");}if(dj.byId("transport_mode")){m.animate("fadeOut","transport_mode_nosend_row");m.animate("fadeOut","transport_mode_text_nosend_row");}}},setRenewalFinalExpiryDate:function(){var _ff3=calculateRenewalFinalExpiryDate();if(_ff3){dj.byId("final_expiry_date").set("value",_ff3);}if(!isPreCondStsfd){var _ff4=dj.byId("final_expiry_date");if(_ff4&&_ff4.get("value")!==""){_ff4.set("value",new Date().getHours());}}},calculateRenewalFinalExpiryDate:function(){var _ff5=dj.byId("renew_on_code")?dj.byId("renew_on_code").get("value"):"";var _ff6=dj.byId("renewal_calendar_date")?dj.byId("renewal_calendar_date").get("value"):"";var _ff7=dj.byId("renew_for_nb")?dj.byId("renew_for_nb").get("value"):"";var _ff8=dj.byId("renew_for_period")?dj.byId("renew_for_period").get("value"):"";var _ff9=dj.byId("rolling_renewal_nb")?dj.byId("rolling_renewal_nb").get("value"):"";var _ffa=null;var _ffb=null;var _ffc=true;var _ffd=null;if(_ff5==="01"){_ffb=dj.byId("exp_date")?dj.byId("exp_date").get("value"):"";var _ffe=dj.byId("org_exp_date")?dj.byId("org_exp_date"):"";if(!_ffb&&_ffe){_ffb=dojo.date.locale.parse(_ffe.get("value"),{locale:dojo.config.locale,formatLength:"short",selector:"date"});}if(_ffb==null){_ffc=false;}}else{if(_ff5==="02"){_ffb=_ff6;if(_ffb==null){_ffc=false;}}else{_ffc=false;}}if(_ff7==null||_ff7===""||isNaN(_ff7)){_ffc=false;}if(_ff8==null||_ff8===""){_ffc=false;}if(_ff9==null||_ff9===""||isNaN(_ff9)){_ffc=false;}if(_ffc&&_ff9){switch(_ff8){case "D":_ffa=d.date.add(_ffb,"day",_ff9*_ff7);break;case "W":_ffa=d.date.add(_ffb,"week",_ff9*_ff7);break;case "M":_ffa=d.date.add(_ffb,"month",_ff9*_ff7);break;case "Y":_ffa=d.date.add(_ffb,"year",_ff9*_ff7);break;default:break;}if(_ffa){_ffd=new Date(_ffa.getTime());_ffd=_ffd.getDate()+"/"+(_ffd.getMonth()+1)+"/"+_ffd.getFullYear();var _fff=new Date(_ffa.getTime());dj.byId("final_expiry_date").set("value",_fff);}}return _ffd;},calculateFinalExpiryDate:function(){var _1000=dj.byId("renew_on_code")?dj.byId("renew_on_code").get("value"):"";var _1001=dj.byId("renewal_calendar_date")?dj.byId("renewal_calendar_date").get("value"):"";var _1002=dj.byId("renew_for_nb")?dj.byId("renew_for_nb").get("value"):"";var _1003=dj.byId("renew_for_period")?dj.byId("renew_for_period").get("value"):"";var _1004=dj.byId("rolling_renewal_nb")?dj.byId("rolling_renewal_nb").get("value"):"";var _1005=null;var _1006=null;var _1007=true;if(_1000==="01"){_1006=dj.byId("exp_date")?dj.byId("exp_date").get("value"):"";var _1008=dj.byId("org_exp_date")?dj.byId("org_exp_date"):"";if(!_1006&&_1008){_1006=dojo.date.locale.parse(_1008.get("value"),{locale:dojo.config.locale,formatLength:"short",selector:"date"});}if(_1006==null){_1007=false;}}else{if(_1000==="02"){_1006=_1001;if(_1006==null){_1007=false;}}else{_1007=false;}}if(_1002==null||_1002===""||isNaN(_1002)){_1007=false;}if(_1003==null||_1003===""){_1007=false;}if(_1004==null||_1004===""||isNaN(_1004)){_1007=false;}if(_1007&&_1004){switch(_1003){case "D":_1005=d.date.add(_1006,"day",_1004*_1002);break;case "W":_1005=d.date.add(_1006,"week",_1004*_1002);break;case "M":_1005=d.date.add(_1006,"month",_1004*_1002);break;case "Y":_1005=d.date.add(_1006,"year",_1004*_1002);break;default:break;}if(_1005){var _1009=new Date(_1005.getTime());}}return _1009;},markWidgetAsLoading:function(_100a,_100b){var _100c=_100a+"_id_loading_span";if(dj.byId(_100a)){var _100d;if(_100b){if(!d.byId(_100c)){dj.byId(_100a).set("disabled",true);var _100e="<img src=\""+m._config["context"]+m._config["imagesSrc"]+"loading.gif\"/>";_100d=d.create("span",{innerHTML:_100e,id:_100c},dj.byId(_100a).domNode,"after");dj.byId(_100a).set("loadingIconDomNode",_100d);}}else{_100d=dj.byId(_100a).get("loadingIconDomNode");dj.byId(_100a).set("loadingIconDomNode",null);d.destroy(_100d);dj.byId(_100a).set("disabled",false);}}},populateFacilityReference:function(_100f){var _1010=_100f.get("value"),_1011="_",_1012=_100f.id.split(_1011),_1013=_1012[0]+_1011+_1012[1],_1014=dj.byId(_1013+"_abbv_name")?dj.byId(_1013+"_abbv_name").get("value"):"",_1015=dj.byId("entity")?dj.byId("entity").get("value"):"",_1016=dj.byId("facility_id"),_1017=[],_1018=d.byId("facilityLimitDetail");if(_1010+"S"!=="S"&&m._config.facilityReferenceCollection&&m._config.facilityReferenceCollection[_1010]&&_1016&&_1018&&m._config.facilityReferenceCollection[_1010][_1014+"_"+_1015]){_1016.set("displayedValue","");_1017=m._config.facilityReferenceCollection[_1010][_1014+"_"+_1015];if(_1017){_1016.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_1017}});m.animate("wipeIn",_1018);if(dj.byId("facility_mandatory")&&dj.byId("facility_mandatory").get("value")==="true"){m.toggleRequired("facility_id",true);}if(m._config.limitFieldIdCollection){_d2b();dj.byId("limit_id").set("displayedValue","");if(!m._config.isLoading&&dj.byId("limit_reference")&&dj.byId("limit_reference").get("value")+"S"!=="S"){dj.byId("limit_reference").set("value","");}}}}else{m.animate("wipeOut",_1018);m.toggleRequired("facility_id",false);}},getLimitDetails:function(_1019){var _101a=dj.byId("facility_date"),_101b=dj.byId("facility_reference"),_101c=dj.byId("facility_id");if(_101a&&_101c){if(m._config.facilityReviewDateCollection&&m._config.facilityReviewDateCollection[_101c.get("displayedValue")]){_101a.set("displayedValue",m._config.facilityReviewDateCollection[_101c.get("displayedValue")]);}else{_101a.set("displayedValue","");}}if(_101b){_101b.set("value",dj.byId("facility_id").get("displayedValue"));}var _101d=dj.byId("entity")?dj.byId("entity").get("value"):"",_101e=m._config.productCode.toLowerCase()+"_type_code",_101f=_101c?_101c.get("value"):"",_1020=_101b?_101b.get("displayedValue"):"",_1021=dj.byId(_101e)?dj.byId(_101e).get("value"):"",_1022=dj.byId("beneficiary_country")?dj.byId("beneficiary_country").get("value"):"";if(_1019||(_1022!=="")){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetLimitsJSONDataAction"),handleAs:"json",sync:true,content:{facility:_1020,facilityId:_101f,productCode:m._config.productCode,entity:_101d,subProduct:"",productTypeCode:_1021,beneficiary:"",beneficiaryCountry:_1022},load:_d2e});var _1023=dj.byId("limit_id"),_1024=dj.byId("limit_reference");if(_1024&&_1023&&_1023.get("value")+"S"==="S"){_1023.set("displayedValue",_1024.get("value"));}else{if(_1023){_1023.set("displayedValue","");}}_d2b();}},setLimitFieldsValue:function(){var _1025=this.get("displayedValue"),_1026=m._config.limitFieldIdCollection,_1027=m._config.limitCollection[_1025];if(dj.byId("limit_reference")){dj.byId("limit_reference").set("value",this.get("displayedValue"));}d.forEach(_1026,function(id,index){var obj=dj.byId(id);if(obj&&_1027){if(obj.declaredClass==="dijit.form.DateTextBox"){obj.set("displayedValue",_1027[index]);}else{obj.set("value",_1027[index]);}}else{if(obj){obj.set("displayedValue","");}}});},validateLimitBookingAmount:function(event){var _1028=dj.byId(m._config.productCode.toLowerCase()+"_amt"),_1029=dj.byId(m._config.productCode.toLocaleLowerCase()+"_cur_code"),_102a=dj.byId("limit_outstanding_cur_code"),_102b=dj.byId("limit_outstanding_amount"),_102c=dj.byId("facility_outstanding_cur_code"),_102d=dj.byId("facility_outstanding_amount"),_102e=dj.byId("booking_amt"),_102f="";if(!m._config.isLoading){if(this.id&&this.id!=="booking_amt"&&_102e){_102e.set("value","");}if(_1028&&_1029&&_102a&&_102b&&_102c&&_102d&&_102e){var _1030=_1028.get("value"),_1031=_102b.get("value"),_1032=_102d.get("value"),_1033=_102a.get("value"),_1034=_1029.get("value"),_1035=_102c.get("value"),_1036=_102e.get("value"),_1037=true,_1038=true,_1039="";if(_1033!==""&&_1034!==""&&_1035!==""){if(_1033!==_1034){_102f=_1034+"_"+_1033+"_limit,";}if(_1035!==_1033){_102f=_102f+_1035+"_"+_1033+"_facility";}if(_102f+"S"!=="S"){m.getCurrencyRateForFacility(_102f);if(isNaN(_1036)||_1036===""||(event!==undefined&&event==="true")){if(m._config.limitRate){_1036=_1030*m._config.limitRate;_102e.attr("value",_1036,false);dj.byId("tol_booking_amt").attr("value",_1036,false);}if(isNaN(_1036)||_1036===""||(event!==undefined&&event==="true"&&_1030<_1036)){_102e.attr("value",_1036,false);dj.byId("tol_booking_amt").attr("value",_1036,false);}if(dj.byId("pstv_tol_pct")&&(!isNaN(dj.byId("pstv_tol_pct").get("value")))){_1036=_1036+_1036*(dj.byId("pstv_tol_pct").get("value")/100);_102e.attr("value",_1036,false);dj.byId("tol_booking_amt").attr("value",_1036,false);}}if(_1036>dj.byId("tol_booking_amt")?dj.byId("tol_booking_amt").get("value"):0){_1037=false;_1039=m.getLocalization("invalidBookingAmountTnx");}if(_1037&&_1036>_1031){_1037=false;if(m._config.limitRate!==1){_1039=m.getLocalization("invalidBookingAmountCurrency",["Limit",_1034+"/"+_1033]);}else{_1039=m.getLocalization("invalidBookingAmount",["Limit"]);}}if(_1037&&_1036>_1032*m._config.facilityRate){_1037=false;if(m._config.facilityRate!==1){_1039=m.getLocalization("invalidBookingAmountCurrency",["Facility",_1035+"/"+_1033]);}else{_1039=m.getLocalization("invalidBookingAmount",["Limit"]);}}if(m._config.validate_tnxamt_with_limit_outstanding){if(_1037&&dj.byId("tol_booking_amt").get("value")>_1031){_1037=false;_1038=false;_1039=m.getLocalization("invalidTnxAmount");}}}else{if(isNaN(_1036)||_1036===""||(event!==undefined&&event==="true")){if(isNaN(_1036)||_1036===""||(event!==undefined&&event==="true"&&_1030<_1036)){_1036=_1030;if(dj.byId("pstv_tol_pct")&&(!isNaN(dj.byId("pstv_tol_pct").get("value")))){_1036=_1036+_1036*(dj.byId("pstv_tol_pct").get("value")/100);}_102e.attr("value",_1036,false);dj.byId("tol_booking_amt").attr("value",_1036,false);}if(dj.byId("pstv_tol_pct")&&(!isNaN(dj.byId("pstv_tol_pct").get("value")))){_1036=_1030;_1036=_1036+_1036*(dj.byId("pstv_tol_pct").get("value")/100);_102e.attr("value",_1036,false);dj.byId("tol_booking_amt").attr("value",_1036,false);}}if(_1036>dj.byId("tol_booking_amt")?dj.byId("tol_booking_amt").get("value"):0){_1037=false;_1039=m.getLocalization("invalidBookingAmountTnx");}if(_1037&&_1036>_1031){_1037=false;_1039=m.getLocalization("invalidBookingAmount",["Limit"]);}if(_1037&&_1036>_1032){_1037=false;_1039=m.getLocalization("invalidBookingAmount",["Facility"]);}if(m._config.validate_tnxamt_with_limit_outstanding){if(_1037&&dj.byId("tol_booking_amt").get("value")>_1031){_1037=false;_1038=false;_1039=m.getLocalization("invalidTnxAmount");}}}}if(!_1037){var _103a;if(!_1038){dj.hideTooltip(_1028.domNode);_103a=function(){_1028.focus();_1028.set("state","Error");dj.showTooltip(_1039,_1028.domNode,0);};}else{dj.hideTooltip(_102e.domNode);_103a=function(){_102e.focus();_102e.set("state","Error");dj.showTooltip(_1039,_102e.domNode,0);};}m.dialog.show("ERROR",_1039,"",_103a);return false;}}}else{if(this.id==="limit_id"){m._config.isLoading=false;}}return true;},getCurrencyRateForFacility:function(_103b){var _103c=dijit.byId("recipient_bank_abbv_name");m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetMidRateForLimitAction"),handleAs:"json",sync:true,content:{currency:_103b,bank_abbv_name:_103c},load:function(_103d,args){m._config.limitRate=_103d.limit?_103d.limit:1;m._config.facilityRate=_103d.facility?_103d.facility:1;m._config.rateType=_103d.rateType?_103d.rateType:1;}});},getUserDetails:function(_103e,_103f){var _1040=m.formToXML({selector:".validate",xmlRoot:m._config.xmlTagName,ignoreDisabled:true});m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetUserDetails"),handleAs:"json",sync:true,content:{login_id:_103e,user_id:_103f,xmlString:_1040},load:_d36});},getDynamicNarrativeText:function(_1041,_1042){var _1043=m.formToXML({selector:".validate",xmlRoot:m._config.xmlTagName,ignoreDisabled:true});var _1044=dijit.byId("product_code")?dijit.byId("product_code").get("value"):"";m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetDynamicNarrativeText"),handleAs:"json",sync:true,content:{phrase_id:_1042,field:_1041,xmlString:_1043,product_code:_1044},load:_d31});},togglePhraseProducts:function(){var _1045=dj.byId("phrase_type")?dj.byId("phrase_type").get("value"):dj.byId("type").get("value"),_1046=dj.byId("productcode")?dj.byId("productcode"):dj.byId("product"),_1047=m._config.phraseTypesProductMap[_1045];if(!misys._config.isModified){_1046.set("value","");}if(_1047){_1046.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_1047}});_1046.fetchProperties={sort:[{attribute:"name"}]};_1046.set("value","");_1046.focus();}},togglePhraseCategory:function(){var _1048=dj.byId("productcode")?dj.byId("productcode").get("value"):dj.byId("product").get("value"),_1049=dj.byId("category"),_104a=m._config.productCategoryMap[_1048];if(_1048!==""){if(_104a){_1049.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_104a}});_1049.fetchProperties={sort:[{attribute:"value"}]};_1049.set("value","");_1049.focus();_1049.set("state","Error");}else{_104a=m._config.productCategoryMap["ALL"];_1049.store=new dojo.data.ItemFileReadStore({data:{identifier:"value",label:"name",items:_104a}});_1049.fetchProperties={sort:[{attribute:"value"}]};}}},getAjaxSearchData:function(id,_104b,opt,_104c){var count=0;var _104d=dijit.byId("product_code")?dijit.byId("product_code").get("value"):"";var _104e="[";dojo.forEach(_104b,function(field){var _104f=dj.byId(field);if(_104f&&_104f.state==="Error"){return;}if(count!==0){_104e=_104e+",";}count++;if(_104f){_104e=_104e+"'"+_104f.get("value")+"'";}else{_104e=_104e+"''";}});_104e=_104e+"]";var _1050="[";count=0;while(count!=(_104c.length-1)){_1050=_1050+"'"+_104c[count]+"',";count++;}_1050=_1050+"'"+_104c[count]+"']";m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetStaticDataSearchAction"),handleAs:"json",sync:true,content:{option:opt,store_id:id,"widget[]":_1050,productcode:_104d,"fields[]":_104e},load:_d7d});},toggleMutuallyExclusiveFields:function(_1051){var _1052=true;var _1053=false;dojo.forEach(_1051,function(field){var _1054=dj.byId(field);if((_1054.declaredClass==="dijit.form.NumberTextBox")||(_1054.declaredClass==="misys.form.CurrencyTextBox")){if(_1054&&!_1053&&_1054.get("value")+""!=="NaN"){_1054.set("disabled",false);_1053=true;_1052=false;}else{_1054.set("disabled",true);}}else{if(_1054&&!_1053&&_1054.get("value")!==""){_1054.set("disabled",false);_1053=true;_1052=false;}else{_1054.set("disabled",true);}}});if(_1052){dojo.forEach(_1051,function(field){var _1055=dj.byId(field);if(_1055){_1055.set("disabled",false);}});}},toggleMutuallyExclusiveMandatoryFields:function(_1056){var _1057=true;var _1058=false;dojo.forEach(_1056,function(field){var _1059=dj.byId(field);if((_1059.declaredClass==="dijit.form.NumberTextBox")||(_1059.declaredClass==="misys.form.CurrencyTextBox")){if(_1059&&!_1058&&_1059.get("value")+""!=="NaN"){_1059.set("disabled",false);_1059.set("required",true);_1058=true;_1057=false;}else{_1059.set("disabled",true);_1059.set("required",false);}}else{if(_1059&&!_1058&&_1059.get("value")!==""){_1059.set("disabled",false);_1059.set("required",true);_1058=true;_1057=false;}else{_1059.set("disabled",true);_1059.set("required",false);}}});if(_1057){dojo.forEach(_1056,function(field){var _105a=dj.byId(field);if(_105a){_105a.set("disabled",false);_105a.set("required",true);}});}},getPrgmCpty:function(_105b){misys.showProgramCptyDialog("programCounterparty","['abbv_name','name']",_105b,"","width:400px;height:400px",m.getLocalization("TABLE_PROGRAM_CPTY_LIST"),"legal"==="popup");},toggleMutuallyInclusiveFields:function(_105c,_105d,_105e){var _105f=dj.byId(_105c);var _1060=dj.byId(_105d);if(_105e==="required"){if(_105f&&_105f.value!==""&&_1060){_1060.set("required",true);}else{if(_105f&&_105f.value===""&&_1060){_1060.set("required",false);}}}else{if(_105e==="disabled"){if(_105f&&_105f.disabled===true){_1060.set("disabled",true);_1060.set("value","");}else{if(_105f&&_105f.disabled===false){_1060.set("disabled",false);}}}}},toggleTransferIndicatorFlag:function(_1061){if(dj.byId("ntrf_flag").get("checked")){dj.byId("narrative_transfer_conditions").set("disabled",true);dj.byId("narrative_transfer_conditions").set("value","");document.getElementById("narrative_transfer_conditions_img").style.display="none";}else{dj.byId("narrative_transfer_conditions").set("disabled",false);dj.byId("narrative_transfer_conditions").set("value","");document.getElementById("narrative_transfer_conditions_img").style.display="block";}},toggleDeliverMode:function(_1062){if(dj.byId("delv_org").get("value")==="99"){dj.byId("delv_org_text").set("disabled",false);}else{dj.byId("delv_org_text").set("disabled",true);dj.byId("delv_org_text").set("value","");}},clearDateCache:function(){misys._config.dateCache=[];},setDraweeDetailBankName:function(){if((dj.byId("cr_avl_by_code_2")&&dj.byId("cr_avl_by_code_2").get("checked"))||(dj.byId("cr_avl_by_code_3")&&dj.byId("cr_avl_by_code_3").get("checked"))){dj.byId("drawee_details_bank_name").set("value",dj.byId("drawee_details_bank_name")._resetValue);}},escapeHtml:function(str){return str.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;").replace(/'/gm,"&#39;");},showFSCMProgramIPCollectionDialog:function(type,_1063,_1064,_1065,_1066,title,_1067){var url=[],query={},_1068=_d01,_1069={},_106a="GetStaticData",_106b=_1065||_d02,_106c,_106d;if(_1066.slice(_1066.length-1)!==";"){_1066+=";";}_1068+=_106a;_1069.option=type;_1069.fields=_1063;d.mixin(_1069,_1064);url.push("/screen/",_106b);query.option=type;query.fields=_1063;d.mixin(query,_1064);query.dimensions=_1066;query.popupType="LIST_DATA";_106c=function(){var grid=dj.byId(type+"data_grid");grid.showMessage(grid.loadingMessage);m.grid.setStoreURL(grid,m.getServletURL(_1068),_1069);m.connect("CurrencyName","onKeyPress",function(evnt){if(evnt.keyCode===dojo.keys.ENTER){m.grid.filter(dj.byId("currencydata_grid"),["NAME"],["CurrencyName"]);}});};if(_1067){_106d=dj.byId("childXhrDialog")||new dj.Dialog({title:title,id:"childXhrDialog",href:m.getServletURL(url.join("")),ioMethod:misys.xhrPost,ioArgs:{content:query}});m.dialog.connect(_106d,"onLoad",_106c);m.dialog.connect(_106d,"onHide",function(){setTimeout(function(){m.dialog.disconnect(_106d);_106d.destroyRecursive();},2000);});var co=d.coords("xhrDialog");_106d._relativePosition={x:co.x+30,y:co.y+30};_106d.show();}else{m.dialog.show("URL","",title,null,_106c,m.getServletURL(url.join("")),null,null,query);}},clearDataOnclicTenortype2or3:function(){dj.byId("tenor_maturity_date").set("displayedValue","");dj.byId("tenor_days").set("value","");dj.byId("tenor_period").set("value","");dj.byId("tenor_from_after").set("value","");dj.byId("tenor_days_type").set("value","");dj.byId("tenor_type_details").set("value","");dj.byId("tenor_base_date").set("displayedValue","");}});d.ready(function(){d.mixin(m._config,{advisingBank:_cfc,anyBank:"Any Bank",issuingBank:"Issuing Bank",other:"Other",namedBank:"Named Bank",firstPageLoad:false});});})(dojo,dijit,misys);}if(!dojo._hasResource["misys.form.file"]){dojo._hasResource["misys.form.file"]=true;dojo.provide("misys.form.file");(function(d,dj,m){var _106e=["txt","doc","pdf","gif","zip"],_106f="file_",_1070="file_ext",_1071=".gif",_1072,_1073;function _1074(_1075){var _1076=dj.byId(_1075);if(_1076&&_1076.validate()){_1076.execute();_1076.hide();m.isFormDirty=true;}};function _1077(){if(dj.byId("validation_type")){if(dj.byId("validation_type").get("value")===""){return "none";}else{return dj.byId("validation_type").get("value");}}};function _1078(){if(dj.byId("entity")){if(dj.byId("entity").get("value")===""){return "none";}else{return dj.byId("entity").get("value");}}else{return "";}};function _1079(){if(dj.byId("upload_file_type")){if(dj.byId("upload_file_type").get("value")===""){return "none";}else{return dj.byId("upload_file_type").get("value");}}};d.mixin(m,{formatFileActions:function(value,_107a){var outer=d.create("div"),_107b=d.create("div",{"class":"gridActions","style":"text-align:center"}),_107c=_107a;if(!_1072){_1072=m.getContextualURL(m._config.imagesSrc+m._config.imageStore.downloadIcon);}if(!_1073){_1073=m.getContextualURL(m._config.imagesSrc+m._config.imageStore.deleteIcon);}d.create("img",{src:_1072,alt:m.getLocalization("view_label"),onclick:"misys.downloadFile("+value+", '"+_107c+"')"},_107b);d.create("img",{src:_1073,alt:m.getLocalization("delete_label"),type:"remove"},_107b);d.place(_107b,outer);return outer.innerHTML;},formatFileViewActions:function(value,_107d){var outer=d.create("div"),_107e=d.create("div",{"class":"gridActions","style":"text-align:center"}),_107f=_107d;if(!_1072){_1072=m.getContextualURL(m._config.imagesSrc+m._config.imageStore.downloadIcon);}if(!_1073){_1073=m.getContextualURL(m._config.imagesSrc+m._config.imageStore.deleteIcon);}d.create("img",{src:_1072,alt:m.getLocalization("view_label"),onclick:"misys.downloadFile("+value+", '"+_107f+"')"},_107e);d.place(_107e,outer);return outer.innerHTML;},getFileIcon:function(_1080){var outer=d.create("div"),_1081=d.create("div",{"style":"text-align:center"}),found=false,ext,_1082=d.create("img",{alt:m.getLocalization("download")});var _1083=m._config.uploadservice_extensions_allowed;if((_1080.lastIndexOf(".")!==-1)&&(_1080.lastIndexOf(".")!==_1080.length-1)){ext=_1080.substring(_1080.lastIndexOf(".")+1).toLowerCase();for(var x=0,len=_1083.length;x<len;x++){if(ext===_1083[x]){found=true;d.attr(_1082,"src",m.getContextualURL(m._config.imagesSrc)+_106f+ext+_1071);break;}}}if(!found){d.attr(_1082,"src",m.getContextualURL(m._config.imagesSrc)+_1070+_1071);}d.place(_1082,_1081);d.place(_1081,outer);return outer.innerHTML;},uploadFile:function(_1084,_1085){var _1086=dj.byId("file"+_1085)?dj.byId("file"+_1085).domNode:d.byId("file"+_1085),_1087=dj.byId("file"+_1085)?dj.byId("file"+_1085).get("value"):_1086.value,_1088,_1089;if(dj.byId("file_name")){var _108a=_1087.replace(/^.*(\\|\/|\:)/,"");dj.byId("file_name").set("value",_108a);}if(dj.byId("file_title")&&dj.byId("file_title").get("value")==""){return false;}if(!_1087){m.showTooltip(m.getLocalization("mandatoryPathToFileError"),_1086);return false;}console.warn("[misys.form.file] Sending the request, with attachmentGroup '",_1085,+"'");m.dialog.show("PROGRESS",m.getLocalization("uploadingFile"));var _108b=(document.getElementById("file"+_1085)&&document.getElementById("file"+_1085).files&&document.getElementById("file"+_1085).files[0]&&document.getElementById("file"+_1085).files[0].name)?encodeURIComponent(document.getElementById("file"+_1085).files[0].name):"";if(""===_108b){_108b=encodeURIComponent(_1087);}d.io.iframe.send({url:m.getServletURL("/screen/GTPUploadScreen"),method:"post",handleAs:"json",content:{operation:"UPLOAD",identifier:"file"+_1085,file_name:_108b,att_ref_id:dj.byId("ref_id")?dj.byId("ref_id").get("value"):"",att_tnx_id:dj.byId("tnx_id")?dj.byId("tnx_id").get("value"):"",att_item_id:dj.byId("item_id")?dj.byId("item_id").get("value"):"",attachment_type:dj.byId("attachment_type")&&dj.byId("attachment_type").get("value")!==""?dj.byId("attachment_type").get("value"):"",validation_type:_1077(),entity:_1078(),fileType:_1079(),token:document.getElementById("_token").getAttribute("value"),attachmentgroup:_1085},form:d.byId("sendfiles"+_1085),handle:function(data,_108c){console.warn("[misys.form.file] Data response is",data);console.warn("[misys.form.file] io args are",_108c);console.warn("[misys.form.file] data.status is",data.status);if(data&&data.details&&data.details.file_name){data.details.file_name=data.details.file_name.replace(/^.*(\\|\/|\:)/,"");}else{if(data.details!==undefined&&data.details!==null){data.details.file_name=_1087.replace(/^.*(\\|\/|\:)/,"");}}dj.byId("alertDialog").hide();if(data.status==="success"){dj.byId("attachment_id"+_1085).set("value",data.details.id);dj.byId("file_type"+_1085).set("value",data.details.type);dj.byId("file_name"+_1085).set("value",data.details.file_name);dj.byId("file_title"+_1085).set("value",data.details.title);_1074(_1084);}else{var _108d=d.byId("alertDialog_underlay");if(_108d){d.style(_108d,"display","none");}if(data.details&&data.details.message&&data.details.message.length>0){m.dialog.show("ERROR",data.details.message);}else{if(data.details===undefined||data.details===null){_1089=m.getLocalization("fileSizeExceeded");m.dialog.show("ERROR",_1089);}}console.warn("[misys.form.file] File upload error, response status = "+data.status);}}});return true;},downloadFile:function(_108e,group){var _108f=group||"",_1090=d.create("input"),type;if(!dj.byId("downloadfiles"+_108f)){d.parser.parse(d.byId("downloadfiles-container"+ +_108f));}_1090.type="hidden";_1090.name="attachmentid";_1090.id="attachmentid";_1090.value=_108e;d.byId("downloadfiles"+_108f).appendChild(_1090);if(dj.byId("item_id")){type=d.doc.createElement("input");type.type="hidden";type.name="attachment_type";type.id="attachment_type";type.value="news";d.byId("downloadfiles"+_108f).appendChild(type);}dojo.parser.parse(dojo.byId("downloadfiles"+_108f));dj.byId("downloadfiles"+_108f).submit();d.destroy(d.byId("attachmentid"));if(d.byId("attachment_type")&&dj.byId("item_id")){d.destroy(d.byId("attachment_type"));}},clearFilePath:function(){var x=document.getElementById("file");if(x){x.setAttribute("type","file");x.setAttribute("type","text");x.setAttribute("type","file");}var y=document.getElementById("fileinvoice");if(y){y.setAttribute("type","file");y.setAttribute("type","text");y.setAttribute("type","file");}},addFileItem:function(id){var _1091=d.byId("attachment_type");var _1092="attachment-file"+id;if(!dj.byId(_1092)){d.style("noFilesNotice"+id,"display","none");d.parser.instantiate([d.byId(_1092)]);}if(d.byId("file")){d.byId("file").value="";}if(id!==""){var _1093="file"+id;if(_1093){d.byId(_1093).value="";}}dj.byId(_1092).addItem();},addBulkFileItem:function(id){var _1094=d.byId("attachment_type"),_1095=dj.byId("entity")?dj.byId("entity").get("value"):"";var _1096="attachment-file"+id;if(!dj.byId(_1096)){d.style("noFilesNotice"+id,"display","none");d.parser.instantiate([d.byId(_1096)]);}if(dj.byId("entity")&&_1095===""){var _1097=m.getLocalization("selectEntityForFileUpload");_1095.focus();_1095.set("state","Error");dijit.hideTooltip(_1095.domNode);dijit.showTooltip(_1097,_1095.domNode,0);}else{if(d.byId("file")){d.byId("file").value="";}dj.byId(_1096).addItem();}},showUploadDialog:function(_1098){var _1099=dj.byId("fileUploadDialog"),group=_1098||"",_109a=d.byId("max-files"+group).value||1,file=dj.byId("file");if(!_1099){d.parser.parse("fileUploadFields");_1099=dj.byId("fileUploadDialog");}dj.byId("group").set("value",group);dj.byId("uploadButton").set("disabled",(m._config.attachedFiles[group]>=_109a));dj.byId("title").set("value","");file.set("readOnly",false);file.set("value","");_1099.show();}});d.ready(function(){d.require("misys.product.widget.AttachmentFiles");d.require("misys.product.widget.AttachmentFile");});})(dojo,dijit,misys);}if(!dojo._hasResource["dojox.validate.regexp"]){dojo._hasResource["dojox.validate.regexp"]=true;dojo.provide("dojox.validate.regexp");dojo.mixin(dojox.validate.regexp,{ipAddress:function(flags){flags=(typeof flags=="object")?flags:{};if(typeof flags.allowDottedDecimal!="boolean"){flags.allowDottedDecimal=true;}if(typeof flags.allowDottedHex!="boolean"){flags.allowDottedHex=true;}if(typeof flags.allowDottedOctal!="boolean"){flags.allowDottedOctal=true;}if(typeof flags.allowDecimal!="boolean"){flags.allowDecimal=true;}if(typeof flags.allowHex!="boolean"){flags.allowHex=true;}if(typeof flags.allowIPv6!="boolean"){flags.allowIPv6=true;}if(typeof flags.allowHybrid!="boolean"){flags.allowHybrid=true;}var _109b=flags.allowPort?"(\\:\\d+)?":"";var _109c="((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";var _109d="(0[xX]0*[\\da-fA-F]?[\\da-fA-F]\\.){3}0[xX]0*[\\da-fA-F]?[\\da-fA-F]";var _109e="(0+[0-3][0-7][0-7]\\.){3}0+[0-3][0-7][0-7]";var _109f="(0|[1-9]\\d{0,8}|[1-3]\\d{9}|4[01]\\d{8}|42[0-8]\\d{7}|429[0-3]\\d{6}|"+"4294[0-8]\\d{5}|42949[0-5]\\d{4}|429496[0-6]\\d{3}|4294967[01]\\d{2}|42949672[0-8]\\d|429496729[0-5])";var hexRE="0[xX]0*[\\da-fA-F]{1,8}";var _10a0="([\\da-fA-F]{1,4}\\:){7}[\\da-fA-F]{1,4}";var _10a1="([\\da-fA-F]{1,4}\\:){6}"+"((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";var a=[];if(flags.allowDottedDecimal){a.push(_109c);}if(flags.allowDottedHex){a.push(_109d);}if(flags.allowDottedOctal){a.push(_109e);}if(flags.allowDecimal){a.push(_109f);}if(flags.allowHex){a.push(hexRE);}if(flags.allowIPv6){a.push(_10a0);}if(flags.allowHybrid){a.push(_10a1);}var _10a2="";if(a.length>0){_10a2="("+a.join("|")+")";}return _10a2+_109b;},host:function(flags){flags=(typeof flags=="object")?flags:{};if(typeof flags.allowIP!="boolean"){flags.allowIP=true;}if(typeof flags.allowLocal!="boolean"){flags.allowLocal=false;}if(typeof flags.allowPort!="boolean"){flags.allowPort=true;}if(typeof flags.allowNamed!="boolean"){flags.allowNamed=false;}var _10a3="(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)";var _10a4="(?:[a-zA-Z](?:[-\\da-zA-Z]{0,6}[\\da-zA-Z])?)";var _10a5="((?:"+_10a3+"\\.)+"+_10a4+"\\.?)";if(flags.allowIP){_10a5+="|"+dojox.validate.regexp.ipAddress(flags);}if(flags.allowLocal){_10a5+="|localhost";}if(flags.allowNamed){_10a5+="|^[^-][a-zA-Z0-9_-]*";}return "("+_10a5+")";},url:function(flags){flags=(typeof flags=="object")?flags:{};if(!("scheme" in flags)){flags.scheme=[true,false];}var _10a6=dojo.regexp.buildGroupRE(flags.scheme,function(q){if(q){return "(https?|ftps?)\\://";}return "";});var _10a7="(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]+(?:\\?[^?#\\s/]*)?(?:#[A-Za-z][\\w.:-]*)?)?)?";return _10a6+dojox.validate.regexp.host(flags)+_10a7;},emailAddress:function(flags){flags=(typeof flags=="object")?flags:{};if(typeof flags.allowCruft!="boolean"){flags.allowCruft=false;}var _10a8="([!#-'*+\\-\\/-9=?A-Z^-~]+[.])*[!#-'*+\\-\\/-9=?A-Z^-~]+";var _10a9=_10a8+"@"+dojox.validate.regexp.host(flags);if(flags.allowCruft){_10a9="<?(mailto\\:)?"+_10a9+">?";}return _10a9;},emailAddressList:function(flags){flags=(typeof flags=="object")?flags:{};if(typeof flags.listSeparator!="string"){flags.listSeparator="\\s;,";}var _10aa=dojox.validate.regexp.emailAddress(flags);var _10ab="("+_10aa+"\\s*["+flags.listSeparator+"]\\s*)*"+_10aa+"\\s*["+flags.listSeparator+"]?\\s*";return _10ab;},numberFormat:function(flags){flags=(typeof flags=="object")?flags:{};if(typeof flags.format=="undefined"){flags.format="###-###-####";}var _10ac=function(_10ad){return dojo.regexp.escapeString(_10ad,"?").replace(/\?/g,"\\d?").replace(/#/g,"\\d");};return dojo.regexp.buildGroupRE(flags.format,_10ac);}});dojox.validate.regexp.ca={postalCode:function(){return "([A-Z][0-9][A-Z] [0-9][A-Z][0-9])";},province:function(){return "(AB|BC|MB|NB|NL|NS|NT|NU|ON|PE|QC|SK|YT)";}};dojox.validate.regexp.us={state:function(flags){flags=(typeof flags=="object")?flags:{};if(typeof flags.allowTerritories!="boolean"){flags.allowTerritories=true;}if(typeof flags.allowMilitary!="boolean"){flags.allowMilitary=true;}var _10ae="AL|AK|AZ|AR|CA|CO|CT|DE|DC|FL|GA|HI|ID|IL|IN|IA|KS|KY|LA|ME|MD|MA|MI|MN|MS|MO|MT|"+"NE|NV|NH|NJ|NM|NY|NC|ND|OH|OK|OR|PA|RI|SC|SD|TN|TX|UT|VT|VA|WA|WV|WI|WY";var _10af="AS|FM|GU|MH|MP|PW|PR|VI";var _10b0="AA|AE|AP";if(flags.allowTerritories){_10ae+="|"+_10af;}if(flags.allowMilitary){_10ae+="|"+_10b0;}return "("+_10ae+")";}};}if(!dojo._hasResource["dojox.validate._base"]){dojo._hasResource["dojox.validate._base"]=true;dojo.provide("dojox.validate._base");dojo.experimental("dojox.validate");dojox.validate.isText=function(value,flags){flags=(typeof flags=="object")?flags:{};if(/^\s*$/.test(value)){return false;}if(typeof flags.length=="number"&&flags.length!=value.length){return false;}if(typeof flags.minlength=="number"&&flags.minlength>value.length){return false;}if(typeof flags.maxlength=="number"&&flags.maxlength<value.length){return false;}return true;};dojox.validate._isInRangeCache={};dojox.validate.isInRange=function(value,flags){value=dojo.number.parse(value,flags);if(isNaN(value)){return false;}flags=(typeof flags=="object")?flags:{};var max=(typeof flags.max=="number")?flags.max:Infinity,min=(typeof flags.min=="number")?flags.min:-Infinity,dec=(typeof flags.decimal=="string")?flags.decimal:".",cache=dojox.validate._isInRangeCache,_10b1=value+"max"+max+"min"+min+"dec"+dec;if(typeof cache[_10b1]!="undefined"){return cache[_10b1];}cache[_10b1]=!(value<min||value>max);return cache[_10b1];};dojox.validate.isNumberFormat=function(value,flags){var re=new RegExp("^"+dojox.validate.regexp.numberFormat(flags)+"$","i");return re.test(value);};dojox.validate.isValidLuhn=function(value){var sum=0,_10b2,_10b3;if(!dojo.isString(value)){value=String(value);}value=value.replace(/[- ]/g,"");_10b2=value.length%2;for(var i=0;i<value.length;i++){_10b3=parseInt(value.charAt(i));if(i%2==_10b2){_10b3*=2;}if(_10b3>9){_10b3-=9;}sum+=_10b3;}return !(sum%10);};}if(!dojo._hasResource["dojox.validate.web"]){dojo._hasResource["dojox.validate.web"]=true;dojo.provide("dojox.validate.web");dojox.validate.isIpAddress=function(value,flags){var re=new RegExp("^"+dojox.validate.regexp.ipAddress(flags)+"$","i");return re.test(value);};dojox.validate.isUrl=function(value,flags){var re=new RegExp("^"+dojox.validate.regexp.url(flags)+"$","i");return re.test(value);};dojox.validate.isEmailAddress=function(value,flags){var re=new RegExp("^"+dojox.validate.regexp.emailAddress(flags)+"$","i");return re.test(value);};dojox.validate.isEmailAddressList=function(value,flags){var re=new RegExp("^"+dojox.validate.regexp.emailAddressList(flags)+"$","i");return re.test(value);};dojox.validate.getEmailAddressList=function(value,flags){if(!flags){flags={};}if(!flags.listSeparator){flags.listSeparator="\\s;,";}if(dojox.validate.isEmailAddressList(value,flags)){return value.split(new RegExp("\\s*["+flags.listSeparator+"]\\s*"));}return [];};}if(!dojo._hasResource["misys.client.validation.common_client"]){dojo._hasResource["misys.client.validation.common_client"]=true;dojo.provide("misys.client.validation.common_client");(function(d,dj,m){})(dojo,dijit,misys);}if(!dojo._hasResource["misys.validation.common"]){dojo._hasResource["misys.validation.common"]=true;dojo.provide("misys.validation.common");(function(d,dj,m){var _10b4="message is false";var _10b5=m.getServletURL("/screen/AjaxScreen/action/CheckPoReferenceAction");var _10b6=m.getServletURL("/screen/AjaxScreen/action/GetCurrencyISOCodes");var _10b7="CUSTOM-NO-CANCEL";var _10b8="[Could not validate mandatory field] ";var _10b9="[misys.validation.common] Current Date Value = ";var _10ba="[misys.validation.common] Validating Expiry Date. Value = ";var _10bb="[misys.validation.common] Days difference between expiry date and current date = ";var _10bc="[misys.validation.common] validateCurrency error";var _10bd="[misys.validation.common] Validating Abbv Name Format, Value =";var _10be="[misys.validation.common] Validating Currency. Value";var _10bf="application/json; charset=utf-8";function _10c0(field,_10c1){if(!_10c1){_10c1=" 0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ/-?:().,+_";}return d.every(field.get("value"),function(_10c2){return _10c1.indexOf(_10c2)>=0;});};function _10c3(_10c4){var bDate="";if(dijit.byId("issuing_bank_abbv_name")&&dijit.byId("issuing_bank_abbv_name").get("value")!==""&&misys&&misys._config&&misys._config.businessDateForBank&&[dijit.byId("issuing_bank_abbv_name").get("value")][0]&&[dijit.byId("issuing_bank_abbv_name").get("value")][0].name!==""){bDate=misys._config.businessDateForBank[dijit.byId("issuing_bank_abbv_name").get("value")][0].name;}else{if(dijit.byId("remitting_bank_abbv_name")&&dijit.byId("remitting_bank_abbv_name").get("value")!==""&&misys&&misys._config&&misys._config.businessDateForBank&&misys._config.businessDateForBank&&[dijit.byId("remitting_bank_abbv_name").get("value")][0]&&misys._config.businessDateForBank&&[dijit.byId("remitting_bank_abbv_name").get("value")][0].name!==""){bDate=misys._config.businessDateForBank[dijit.byId("remitting_bank_abbv_name").get("value")][0].name;}else{if(dijit.byId("recipient_bank_abbv_name")&&dijit.byId("recipient_bank_abbv_name").get("value")!==""&&misys&&misys._config&&misys._config.businessDateForBank&&[dijit.byId("recipient_bank_abbv_name").get("value")][0]&&[dijit.byId("recipient_bank_abbv_name").get("value")][0].name!==""){bDate=misys._config.businessDateForBank[dijit.byId("recipient_bank_abbv_name").get("value")][0].name;}else{if(dijit.byId("advising_bank_abbv_name")&&dijit.byId("advising_bank_abbv_name").get("value")!==""&&misys&&misys._config&&misys._config.businessDateForBank&&[dijit.byId("advising_bank_abbv_name").get("value")][0]&&[dijit.byId("advising_bank_abbv_name").get("value")][0].name!==""){bDate=misys._config.businessDateForBank[dijit.byId("advising_bank_abbv_name").get("value")][0].name;}else{if(dijit.byId("bank_abbv_name")&&dijit.byId("bank_abbv_name").get("value")!==""&&misys&&misys._config&&misys._config.businessDateForBank[dijit.byId("bank_abbv_name").get("value")][0]&&[dijit.byId("bank_abbv_name").get("value")][0].name!==""){bDate=misys._config.businessDateForBank[dijit.byId("bank_abbv_name").get("value")][0].name;}else{if(misys&&misys._config&&misys._config.bankBusinessDate&&misys._config.bankBusinessDate!==""){bDate=misys._config.bankBusinessDate;}}}}}}var date=_10c4.get("value");if(bDate!==""){var _10c5=parseInt(bDate.substring(0,4),10);var _10c6=parseInt(bDate.substring(5,7),10);var _10c7=parseInt(bDate.substring(8,10),10);var _10c8=new Date(_10c5,_10c6-1,_10c7);_10c8.setHours(0,0,0,0);var days=dojo.date.compare(date,_10c8,"date");return days;}};function _10c9(_10ca){if(_10ca.get("type")==="hidden"){return d.date.locale.format(m.localizeDate(_10ca),{selector:"date",datePattern:m.getLocalization("g_strGlobalDateFormat")});}return _10ca.get("displayedValue");};function _10cb(_10cc,error){var _10cd=_10cc.items.valid;var field;if(dj.byId("email")){field=dj.byId("email");}var _10ce="";if(_10cc.items.valid===false){if(field!=undefined){field.focus();_10ce=m.getLocalization("invalidEmailAddressError",[field.get("value")]);field.set("state","Error");dj.hideTooltip(field.domNode);dj.showTooltip(_10ce,field.domNode,0);}}else{}};function _10cf(node,_10d0){var _10d1=dj.byId(node);if(_10d1){if(!(/Date/.test(_10d1.get("declaredClass")))){return -1;}if(_10d1.isValidDate()){return _10d1.getDate();}if(_10d1.getCode()==="SPOT"){return -1;}if(_10d1.getCode()===""||_10d1.getNumber()===""){return -1;}var _10d2=parseInt(_10d1.getNumber(),10),_10d3=null,today=_10d0||new Date();if(_10d1.getCode()==="d"){return d.date.add(today,"day",_10d2);}else{if(_10d1.getCode()==="w"){return d.date.add(today,"week",_10d2);}else{if(_10d1.getCode()==="m"){return d.date.add(today,"month",_10d2);}else{if(_10d1.getCode()==="y"){return d.date.add(today,"year",_10d2);}}}}}else{return -1;}};function _10d4(sIban,_10d5){var _10d6=" .-_,/",_10d7="",_10d8="",sLCCS="",_10d9="";if(sIban.length<5||sIban.length>35){return -1;}if(_10d5==null||_10d5===""){sLCCS=sIban.substring(0,4);_10d8=sIban.substring(4,sIban.length)+sLCCS.toUpperCase();}else{sLCCS=_10d5+"00";_10d8=sIban+sLCCS.toUpperCase();}for(var i=0;i<_10d8.length;i++){_10d9=_10d8.charAt(i);if(!isNaN(_10d9)){_10d7+=""+_10d9;}else{if(_10d6.indexOf(_10d9)>0){continue;}else{if(_10d9.charCodeAt(0)<65||_10d9.charCodeAt(0)>90){return -1;}else{_10d7+=_10d9.charCodeAt(0)-55;}}}}return (_10da(_10d7,97));};function _10da(_10db,_10dc){var i=0,j=0,_10dd=new Array(),r="";for(i=0;i<_10db.length+6;i+=6){var sItem=_10db.substring(i,i+6);if(sItem!==""){_10dd[j++]=_10db.substring(i,i+6);}}for(i=0;i<_10dd.length;i++){r=(r+""+_10dd[i])%_10dc;}return r;};function _10de(_10df){var _10e0=_10df.get("value")!==null?_10df.get("value"):"";if(_10e0===""||!(_10e0 instanceof Date)){return _10e0;}else{if(_10df.get("displayedValue")){return _10df.get("displayedValue");}else{var month=_10e0.getMonth();month=month+1;var year=_10e0.getFullYear();var day=_10e0.getDate();return day+"/"+month+"/"+year;}}};function _10e1(_10e2){var field;if(dj.byId("abbv_name")){field=dj.byId("abbv_name");}var _10e3="";if(_10e2.items.valid===true){if(field!=undefined){field.focus();_10e3=m.getLocalization("abbvNameExists",[field.get("value")]);field.set("value","");field.set("state","Error");dj.hideTooltip(field.domNode);dj.showTooltip(_10e3,field.domNode,0);}}else{}};function _10e4(_10e5){var field;if(dj.byId("claim_reference")){field=dj.byId("claim_reference");}var _10e6="";if(_10e5.items.valid===false){if(field!=undefined){_10e6=m.getLocalization("claimReferenceExists",[field.get("value")]);}var _10e7=function(){field.focus();field.set("state","Error");};m.dialog.show("ERROR",_10e6,"",function(){setTimeout(_10e7,500);});}else{}};function _10e8(_10e9){var field;if(dj.byId("issuer_ref_id")){field=dj.byId("issuer_ref_id");}var _10ea="";if(_10e9.items.valid===false){if(field!=undefined){_10ea=m.getLocalization("poReferenceExists",[field.get("value")]);field.focus();field.set("state","Error");field.set("value","");dj.hideTooltip(field.domNode);dj.showTooltip(_10ea,field.domNode,0);}}else{}};function _10eb(_10ec){var field;if(dj.byId("issuer_ref_id")){field=dj.byId("issuer_ref_id");}var _10ed="";if(_10ec.items.valid===false&&field!=undefined){_10ed=m.getLocalization("invoiceReferenceExists",[field.get("value")]);field.focus();field.set("state","Error");field.set("value","");dj.hideTooltip(field.domNode);dj.showTooltip(_10ed,field.domNode,0);}else{}};function _10ee(_10ef){var field;if(dj.byId("cust_ref_id")){field=dj.byId("cust_ref_id");}var _10f0="";if(_10ef.items.valid===false){if(field!=undefined){_10f0=m.getLocalization("custReferenceExists",[field.get("value")]);field.focus();field.set("state","Error");field.set("value","");dj.showTooltip(_10f0,field.domNode,0);}}else{}};function _10f1(_10f2){var field;if(dj.byId("cn_reference")){field=dj.byId("cn_reference");}var _10f3="";if(_10f2.items.valid===false){if(field!=undefined){_10f3=m.getLocalization("cnReferenceExists",[field.get("value")]);field.focus();field.set("state","Error");dj.hideTooltip(field.domNode);dj.showTooltip(_10f3,field.domNode,0);}}else{}};function _10f4(_10f5){var field;if(dj.byId("report_name")){field=dj.byId("report_name");}var _10f6="";if(_10f5.items.valid===true){if(field!=undefined){field.focus();_10f6=m.getLocalization("reportNameExists",[_10f5.items.reportName]);field.set("value","");field.set("state","Error");dj.hideTooltip(field.domNode);dj.showTooltip(_10f6,field.domNode,0);}}else{}};function _10f7(_10f8){var field;var _10f9=dj.byId("ls_name");if(_10f9){field=_10f9;}var _10fa="";if(_10f8.items.valid===false){if(field!=undefined){_10fa=m.getLocalization("lsNameExists",[field.get("value")]);field.focus();field.set("state","Error");dj.hideTooltip(field.domNode);dj.showTooltip(_10fa,field.domNode,0);}}else{}};function _10fb(_10fc){var field;if(dj.byId("facility_reference")){field=dj.byId("facility_reference");}var _10fd="";if(_10fc.items.valid===true){if(field!=undefined){field.focus();_10fd=m.getLocalization("facilityRefExists",[field.get("value")]);field.set("value","");field.set("state","Error");dj.hideTooltip(field.domNode);dj.showTooltip(_10fd,field.domNode,0);}}else{}};function _10fe(_10ff){var field;if(dj.byId("employee_no")){field=dj.byId("employee_no");}var _1100="";if(_10ff.items.valid===true){if(field!=undefined){field.focus();_1100=m.getLocalization("employeeNoExists",[field.get("value")]);field.set("value","");field.set("state","Error");dj.hideTooltip(field.domNode);dj.showTooltip(_1100,field.domNode,0);}}else{}};function _1101(_1102){var field;if(dj.byId("structure_code")){field=dj.byId("structure_code");}var _1103="";if(_1102.items.exists===true){dj.byId("structure_code").set("state","Error");if(field!=undefined){_1103=m.getLocalization("structureCodeExists",[field.get("value")]);}dj.showTooltip(_1103,dj.byId("structure_code").domNode,0);}else{}};function _1104(_1105){var field;if(dj.byId("effective_date")){field=dj.byId("effective_date");}var _1106="";if(_1105.items.exists===true){dj.byId("effective_date").set("state","Error");dj.showTooltip(m.getLocalization("effectiveDateExists"),dj.byId("effective_date").domNode,0);}else{}};function _1107(field){var _1108=misys.getLocalization("uploadTemplateValueRequired");field.set("state","Error");dj.hideTooltip(field.domNode);if(dojo.query("html")&&dojo.query("html")[0]&&dojo.query("html")[0].dir==="rtl"){dj.showTooltip(_1108,field.domNode,["before"]);}else{dj.showTooltip(_1108,field.domNode,0);}var _1109=function(){dj.hideTooltip(field.domNode);};setTimeout(_1109,5000);};function _110a(mode,_110b){if(!dj.byId("holidayCutOffDialog")){d.require("misys.widget.Dialog");d.require("dijit.form.Button");var _110c=new dj.Dialog({id:"holidayCutOffDialog",title:"Error",draggable:false});var _110d=d.create("div",{id:"holidayCutOffDialogContent"});var _110e=d.create("div",{id:"dialogHolidayText"},_110d,"first");var _110f=d.create("div",{id:"holidayCutOffDialogButtons",style:"text-align:center;"},_110d,"last");var _1110=new dj.form.Button({label:m.getLocalization("returnMessage"),id:"rejectHolidayButtonId"});var _1111=new dj.form.Button({label:m.getLocalization("autoForwardMessage"),id:"forwardHolidayButtonId"});var _1112=new dj.form.Button({label:m.getLocalization("cancelMessage"),id:"cancelHolidayButtonId"});if(mode==="UNSIGNED"){d.place(_1110.domNode,_110f);}if(_110b===true){d.place(_1111.domNode,_110f);}d.place(_1112.domNode,_110f);_110c.set("content",_110d);}if(mode!=="UNSIGNED"&&!_110b){m._config.onSubmitErrorMsg=m.getLocalization("failedSingleSubmissionFromDraft");}var _1113=dj.byId("holidayCutOffDialog");if(d.byId("dialogHolidayText")){d.byId("dialogHolidayText").innerHTML=m._config.onSubmitErrorMsg;}m.dialog.connect(_1113,"onKeyPress",function(evt){if(evt.keyCode===d.keys.ESCAPE){d.stopEvent(evt);}});m.dialog.connect(dj.byId("forwardHolidayButtonId"),"onClick",function(){_1113.hide();setTimeout(function(){m.submit("AUTO_FORWARD_SUBMIT");},500);},_1113.id);m.dialog.connect(dj.byId("rejectHolidayButtonId"),"onClick",function(){var _1114="REJECT";if(dj.byId("productcode")&&dj.byId("productcode").get("value")==="FT"||"TD"&&mode==="UNSIGNED"){_1114="RETURN_TRANSACTION";}m.submit(_1114);m.dialog.hide();_1113.hide();},_1113.id);m.dialog.connect(dj.byId("cancelHolidayButtonId"),"onClick",function(){m.dialog.hide();_1113.hide();if(d.byId("dialogHolidayText")){d.byId("dialogHolidayText").innerHTML="";m._config.onSubmitErrorMsg=d.byId("dialogHolidayText").innerHTML;}},_1113.id);m.dialog.connect(_1113,"onHide",function(){m.dialog.disconnect(_1113);m.dialog.hide();});_1113.show();};function _1115(_1116,_1117,_1118,mode,_1119,_111a,_111b,_111c,_111d,_111e){var _111f=true;m.xhrPost({url:misys.getServletURL("/screen/AjaxScreen/action/GetBusinessDateAndCutOffTimeStatus"),sync:true,handleAs:"json",content:{date_names:_1119,date_values:_111a,bankAbbvName:_1116,entity_abbv_name:_111b,product_code:_1117,sub_product_code:_1118,cur_code:_111c,amount:_111d,clearingCode:_111e},load:function(_1120,args){var _1121=_1120.valid;var _1122=_1120.autoForwardEnabled;if(_1121===false){_111f=false;m._config.onSubmitErrorMsg=_1120.errorMessage;_110a(mode,_1122);}},customError:function(_1123,args){console.error("[misys.validation.common] Technical error while validating business days and cut-off time");console.error(_1123);_111f=false;m._config.onSubmitErrorMsg=m.getLocalization("technicalErrorWhileValidatingBusinessDays");m._config=m._config||{};dojo.mixin(m._config,{holidayCutOffEnabled:false});}});return _111f;};d.mixin(m,{isIBAN:function(sIban){return _10d4(sIban)===1;},getLocalizeDisplayDate:function(_1124){return _10c9(_1124);},validateRequiredField:function(){if(this.get("value")===""){_1107(this);}},validateTemplateId:function(){var _1125;var _1126=d.every(this.get("value"),function(_1127){_1125=_1127;return true;});if(!_1126){this.invalidMessage=m.getLocalization("illegalCharError",[_1125]);}else{if(this.get("value").length===1&&this.get("value")==="-"){this.invalidMessage=m.getLocalization("singleHyphenError");_1126=false;}}return _1126;},checkAbbvNameExists:function(){var _1128;if(dj.byId("abbv_name")){_1128=dj.byId("abbv_name").get("value");}if(_1128!==""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckAbbvNameAction"),handleAs:"json",sync:true,content:{abbv_name:_1128},load:_10e1});}},validateExtNarrativeSwiftInit2018:function(_1129,_112a){var _112b=_1129.trim();var _112c=_112b.split(/\n/);var _112d=_112c==""?0:_112c.length;return _112d>(_112a?800:1000)?false:true;},validateRowExtNarrativeSwiftInit2018:function(_112e,_112f){var _1130=_112e.trim();var _1131=_1130.split(/\r*\n/);var _1132=_1131==""?0:_1131.length;var _1133=_112e.trim().length;var _1134=_1133==""?0:_1133;var _1135=_1132>(_112f?800:1000)?true:false;var _1136=_1134>(_112f?52000:65000)?true:false;return (_1135)||(_1136);},validateExtendedNarrativeSwift2018:function(_1137,_1138,is798,_1139){var _113a=_1137.trim();var _113b=_113a.split(/\n/);var _113c=_113b==""?0:_113b.length+(_1138?_1138:0);var _113d=misys._config.swiftExtendedNarrativeEnabled?(_1139?(is798?792:800):(is798?992:1000)):100;return _113c>_113d?false:true;},checkClaimReferenceExists:function(){var _113e,_113f,_1140;if(dj.byId("claim_reference")){_113e=dj.byId("claim_reference").get("value");}if(dj.byId("product_code")){_113f=dj.byId("product_code").get("value");}if(dj.byId("company_id")){_1140=dj.byId("company_id").get("value");}if(_113e!==""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckClaimReferenceAction"),handleAs:"json",sync:true,content:{claim_ref:_113e,product_code:_113f,company_id:_1140},load:_10e4});}},checkPoReferenceExists:function(){var poRef,_1141,_1142,_1143,refId;if(dj.byId("issuer_ref_id")){poRef=dj.byId("issuer_ref_id").get("value");}if(dj.byId("product_code")){_1141=dj.byId("product_code").get("value");}if(dj.byId("buyer_abbv_name")){_1142=dj.byId("buyer_abbv_name").get("value");}if(dj.byId("seller_abbv_name")){_1143=dj.byId("seller_abbv_name").get("value");}if(dj.byId("ref_id")){refId=dj.byId("ref_id").get("value");}if(poRef!==""&&_1142!==""&&_1143!==""){m.xhrPost({url:_10b5,handleAs:"json",sync:true,content:{poRef:poRef,productCode:_1141,buyerAbbvName:_1142,sellerAbbvName:_1143,refId:refId},load:_10e8});}},checkInvoiceReferenceExists:function(){var poRef,_1144,_1145,_1146,refId;if(dj.byId("issuer_ref_id")){poRef=dj.byId("issuer_ref_id").get("value");}if(dj.byId("product_code")){_1144=dj.byId("product_code").get("value");}if(dj.byId("buyer_abbv_name")){_1145=dj.byId("buyer_abbv_name").get("value");}if(dj.byId("seller_abbv_name")){_1146=dj.byId("seller_abbv_name").get("value");}if(dj.byId("ref_id")){refId=dj.byId("ref_id").get("value");}if(poRef!==""&&_1145!==""&&_1146!==""){m.xhrPost({url:_10b5,handleAs:"json",sync:true,content:{poRef:poRef,productCode:_1144,buyerAbbvName:_1145,sellerAbbvName:_1146,refId:refId},load:_10eb});}},checkInvoiceCustReferenceExists:function(){var _1147,_1148,_1149,_114a,refId;if(dj.byId("issuer_ref_id")){_1147=dj.byId("cust_ref_id").get("value");}if(dj.byId("product_code")){_1148=dj.byId("product_code").get("value");}if(dj.byId("buyer_abbv_name")){_1149=dj.byId("buyer_abbv_name").get("value");}if(dj.byId("seller_abbv_name")){_114a=dj.byId("seller_abbv_name").get("value");}if(dj.byId("ref_id")){refId=dj.byId("ref_id").get("value");}if(_1147!==""&&_1149!==""&&_114a!==""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckCustReferenceAction"),handleAs:"json",sync:true,content:{custRef:_1147,productCode:_1148,buyerAbbvName:_1149,sellerAbbvName:_114a,refId:refId},load:_10ee});}},checkCnReferenceExists:function(){var cnRef,_114b,_114c,_114d,_114e,refId;if(dj.byId("cn_reference")){cnRef=dj.byId("cn_reference").get("value");}if(dj.byId("product_code")){_114b=dj.byId("product_code").get("value");}else{if(dj.byId("productCode")){_114b=dj.byId("productCode").get("value");}}if(dj.byId("buyer_abbv_name")){_114c=dj.byId("buyer_abbv_name").get("value");}if(dj.byId("seller_abbv_name")){_114d=dj.byId("seller_abbv_name").get("value");}if(dj.byId("fscm_programme_code")){_114e=dj.byId("fscm_programme_code").get("value");}if(dj.byId("ref_id")){refId=dj.byId("ref_id").get("value");}if(cnRef!==""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckCnReferenceAction"),handleAs:"json",sync:true,content:{cnReference:cnRef,productCode:_114b,buyerAbbvName:_114c,sellerAbbvName:_114d,fscmProgram:_114e,refId:refId},load:_10f1});}},checkPoReferenceExistsIO:function(){var poRef,_114f,_1150,_1151,refId;if(dj.byId("issuer_ref_id")){poRef=dj.byId("issuer_ref_id").get("value");}if(dj.byId("product_code")){_114f=dj.byId("product_code").get("value");}if(dj.byId("buyer_abbv_name")){_1150=dj.byId("buyer_abbv_name").get("value");}if(dj.byId("seller_abbv_name")){_1151=dj.byId("seller_abbv_name").get("value");}if(dj.byId("ref_id")){refId=dj.byId("ref_id").get("value");}if(poRef!==""){m.xhrPost({url:_10b5,handleAs:"json",sync:true,content:{poRef:poRef,productCode:_114f,buyerAbbvName:_1150,sellerAbbvName:_1151,refId:refId},load:_10e8});}},checkReportNameExists:function(){var _1152;var repId;if(dj.byId("report_name")){_1152=dj.byId("report_name").get("value");}if(dj.byId("report_id")){repId=dj.byId("report_id").get("value");}if(_1152!==""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckReportNameAction"),handleAs:"json",sync:true,content:{report_name:_1152,report_id:repId},load:_10f4});}},checkLicenseNameExists:function(){var _1153;if(dj.byId("ls_name")){_1153=dj.byId("ls_name").get("value");}if(_1153!==""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckLsNameAction"),handleAs:"json",sync:true,content:{ls_Name:_1153},load:_10f7});}},checkFacilityReferenceExists:function(){var _1154;var _1155;var _1156;var _1157;if(dj.byId("facility_reference")){_1154=dj.byId("facility_reference").get("value");}if(dj.byId("facility_id")){_1155=dj.byId("facility_id").get("value");}if(dj.byId("company_abbv_name")){_1157=dj.byId("company_abbv_name").get("value");}if(dj.byId("bank_abbv_name")){_1156=dj.byId("bank_abbv_name").get("value");}if(_1154!==""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckFacilityReferenceAction"),handleAs:"json",sync:true,content:{facility_reference:_1154,facility_id:_1155,company_abbv_name:_1157,bank_abbv_name:_1156},load:_10fb});}},checkEmployeeNoExists:function(){var _1158;var _1159;var _115a;var _115b;if(dj.byId("employee_no")){_1158=dj.byId("employee_no").get("value");}if(dj.byId("company_id")){_1159=dj.byId("company_id").get("value");}if(dj.byId("login_id_hidden")){_115a=dj.byId("login_id_hidden").get("value");}if(dj.byId("login_id")){_115b=dj.byId("login_id").get("value");}if(_1158!==""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckEmployeeNoAction"),handleAs:"json",sync:true,content:{employee_no:_1158,company_id:_1159,login_id_hidden:_115a,login_id:_115b},load:_10fe});}},checkBankReference:function(){var _115c,refId;var _115d=true;if(dj.byId("bo_ref_id")){_115c=dj.byId("bo_ref_id").get("value");}if(dj.byId("ref_id")){refId=dj.byId("ref_id").get("value");}if(_115c!==""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/ValidateDuplicateBankReference"),sync:true,handleAs:"json",content:{bo_ref_id:_115c,refId:refId},load:function(_115e,args){if(_115e.responseFlag==false){_115d=false;}else{}},error:function(_115f,args){console.error("checkBankReference AJAX error",_115f);}});}return _115d;},checkRMGroupExists:function(){var _1160;var _1161=true;if(dj.byId("rmGroup")){_1160=dj.byId("rmGroup").get("value");}var _1162=dj.byId("company_id").get("value");if(_1160!==""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckRMGroupExistsAction"),handleAs:"json",sync:false,content:{rm_group:_1160,companyid:_1162},load:function(_1163,args){var field;if(dj.byId("rmGroup")){field=dj.byId("rmGroup");}var _1164="";if(_1163.items.valid===false){if(field!=undefined){field.focus();_1164=m.getLocalization("rmGroupNoExists",[_1163.items.rmGroup]);field.set("value","");field.set("state","Error");dj.hideTooltip(field.domNode);dj.showTooltip(_1164,field.domNode,0);}_1161=false;}else{}},error:function(_1165,args){_1161=false;console.error(" processRepricingOfRecords error",_1165);}});}return _1161;},validateFeeAccount:function(){var _1166="";var _1167=false;var _1168="";if(dj.byId("fee_act_no")){_1168=_1168=dj.byId("fee_act_no").get("value");}if(dj.byId("entity")){_1166=dj.byId("entity").get("value");}m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetStaticData"),sync:true,handleAs:"json",content:{option:"account",fields:"['fee_act_no']",productcode:"SI",entity:_1166},load:function(_1169,args){for(var i=0;i<_1169.items.length;i++){if(_1169.items[i].ACCOUNTNO==_1168){_1167=true;break;}}},error:function(_116a,args){console.error("validateFeeAccount AJAX error",_116a);}});return _1167;},validateApplDate:function(_116b){var valid=true;var _116c;if(dj.byId("appl_date")){_116c=dj.byId("appl_date").get("value");}m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/ValidateApplDate"),sync:true,handleAs:"json",content:{bankAbbvName:_116b,applDate:_116c},load:function(_116d,args){if(_116d.items.valid==false){valid=false;if(dj.byId("appl_date")){dj.byId("appl_date").set("value",_116d.items.bDate);dojo.byId("appl_date_view_row").childNodes[1].innerHTML=dj.byId("appl_date").get("value");}}}});return valid;},goToTop:function(){var _116e=d.byId("body");if(d.isIE<=6){d.window.scrollIntoView(_116e);}else{dojox.fx.smoothScroll({node:_116e,win:window}).play();}},validatePricipleAccount:function(){var _116f="";var _1170="";var _1171=false;var _1172="";if(dj.byId("principal_act_no")){_1172=dj.byId("principal_act_no").get("value");}if(dj.byId("entity")){_116f=dj.byId("entity").get("value");}if(dj.byId("product_code")){_1170=dj.byId("product_code").get("value");}m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetStaticData"),sync:true,handleAs:"json",content:{option:"account",fields:"['principal_act_no']",productcode:_1170,entity:_116f},load:function(_1173,args){for(var i=0;i<_1173.items.length;i++){if(_1173.items[i].ACCOUNTNO==_1172){_1171=true;break;}}},error:function(_1174,args){console.error("validatePrincipleAccount AJAX error",_1174);}});return _1171;},checkEntityIdExists:function(){var _1175;var _1176;if(dj.byId("abbv_name")){_1175=dj.byId("abbv_name").get("value");}if(dj.byId("company_abbv_name")){_1176=dj.byId("company_id").get("value");}if(_1175!==""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckEntityIdAction"),handleAs:"json",sync:true,content:{abbv_name:_1175,companyId:_1176},load:_10e1});}},checkStructureCodeExists:function(){var _1177;if(dj.byId("structure_code")){_1177=dj.byId("structure_code").get("value");}if(_1177!==""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckStructureCodeExistsAction"),handleAs:"json",sync:true,content:{structureCode:_1177},load:_1101});}},checkEffectiveDateExists:function(){var _1178;if(dj.byId("effective_date")){_1178=dj.byId("effective_date").get("displayedValue");}if(_1178!==""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckEffectiveDateExistsAction"),handleAs:"json",sync:true,content:{effective_date:_1178},load:_1104});}},validateCashRequestDate:function(){var _1179=dj.byId("appl_date");if(!m.compareDateFields(_1179,this)){this.invalidMessage=m.getLocalization("requestDateLessThanAppDateError",[_10c9(this),_10c9(_1179)]);return false;}var _117a=dj.byId("iss_date");if(!m.compareDateFields(_117a,this)){this.invalidMessage=m.getLocalization("requestDateLessThanProcessingDateError",[_10c9(this),_10c9(_117a)]);return false;}return true;},validateAlertDates:function(){var _117b=dj.byId("alert_date");var _117c=dj.byId("alert_date2");if(_117b&&_117b.get("value")!==""&&_117c&&_117c.get("value")!==""&&(!m.compareDateFields(_117b,_117c))){this.invalidMessage=m.getLocalization("alertToDateLessThanFromError",[_10c9(_117c),_10c9(_117b)]);_117c.set("state","Error");dj.showTooltip(this.invalidMessage,_117c.domNode,0);return false;}return true;},validateLoanTransactionTypeDropDown:function(){dj.byId("tnx_type_code_parameter").set("value","");dj.byId("sub_tnx_type_code_parameter").set("value","");dj.byId("sub_product_code_parameter").set("value","");var _117d=(dj.byId("tnx_type_code_dropdown").get("value")).split(":");if(dj.byId("tnx_type_code_dropdown")&&dj.byId("tnx_type_code_dropdown")!=" "){var _117e=dj.byId("tnx_type_code_parameter");var _117f=dj.byId("sub_tnx_type_code_parameter");var _1180=dj.byId("sub_product_code_parameter");if(_117d.length>1){_117e.set("value",_117d[0]);_117f.set("value",_117d[1]);_1180.set("value","");}else{_117e.set("value",_117d[0]);_1180.set("value","LNRPN");_117f.set("value","");}}},validateLoanTransactionStatusDropDown:function(){dj.byId("tnx_stat_code_parameter").set("value","");if(dj.byId("sub_tnx_stat_code_parameter")){dj.byId("sub_tnx_stat_code_parameter").set("value","");}if(dj.byId("tnx_stat_code_dropdown")&&dj.byId("tnx_stat_code_dropdown")!=" "){var _1181=(dj.byId("tnx_stat_code_dropdown").get("value")).split(":");var _1182=dj.byId("tnx_stat_code_parameter");var _1183=dj.byId("sub_tnx_stat_code_parameter");if(_1181.length>1){_1182.set("value",_1181[0]);_1183.set("value",_1181[1]);}else{_1182.set("value",_1181[0]);if(_1183){_1183.set("value","");}}}},isLegalTextAcceptedForAuthorizer:function(){var _1184=false,_1185;m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/ValidateAuthorizer"),handleAs:"json",sync:true,preventCache:true,content:{productCode:dj.byId("product_code")?dj.byId("product_code").get("value"):misys._config.productCode,subProductCode:dijit.byId("sub_product_code")?dijit.byId("sub_product_code").get("value"):"",tnxtype:dijit.byId("tnxtype").get("value")?dijit.byId("tnxtype").get("value"):dijit.byId("tnx_type_code").get("value"),option:dj.byId("option")?dj.byId("option").get("value"):"",subtnxtypeCode:dj.byId("sub_tnx_type_code")?dj.byId("sub_tnx_type_code").get("value"):"",xml:misys.formToXML({ignoreDisabled:true}),mode:dj.byId("mode")?dj.byId("mode").get("value"):"",operation:dj.byId("realform_operation")?dj.byId("realform_operation").get("value"):""},load:function(_1186,_1187){_1184=_1186.isValid;_1185=_1186.errorMsg;},customError:function(_1188,_1189){console.error(" processRepricingOfRecords error",_1188);m._config=m._config||{};dojo.mixin(m._config,{legalTextEnabled:false});}});if(_1184){var _118a=dijit.byId("legalDialog");if(!_118a){return true;}if(_118a.open===false){dj.byId("accept_legal_text").set("checked",false);dijit.byId("submitlegal").set("disabled",true);}m.dialog.connect(dj.byId("submitlegal"),"onClick",function(){_118a.hide();setTimeout(function(){m.acceptLegalText();},500);},_118a.id);m.dialog.connect(dj.byId("cancel"),"onClick",function(){m.dialog.disconnect(_118a);},_118a.id);m.dialog.connect(d.byId("legalDialog_close"),"onClick",function(){m.dialog.disconnect(_118a);});dijit.byId("alertDialog").hide();_118a.show();return false;}else{dojo.destroy("authorizer_id");dojo.destroy("legal_text_value");return true;}},validateCashProcessingDate:function(){if(!this.get("value")){return true;}var _118b=dj.byId("appl_date");if(!m.compareDateFields(_118b,this)){this.invalidMessage=m.getLocalization("processingDateLessThanAppDateError",[_10c9(this),_10c9(_118b)]);return false;}var _118c=dj.byId("iss_date");if(!m.compareDateFields(_118c,this)){this.invalidMessage=m.getLocalization("requestDateLessThanProcessingDateError",[_10c9(this),_10c9(_118c)]);return false;}if(this.get("value")!==""){var _118d;var _118e,_118f;if(dj.byId("customer_bank")){_118f=dj.byId("customer_bank").get("value");}else{if(dj.byId("bank_abbv_name")){_118f=dj.byId("bank_abbv_name").get("value");}else{_118f=dj.byId("issuing_bank_abbv_name").get("value");}}var _1190,_1191,_1192;if(_118f!==""&&misys&&misys._config&&misys._config.businessDateForBank&&misys._config.businessDateForBank[_118f]&&misys._config.businessDateForBank[_118f][0]&&misys._config.businessDateForBank[_118f][0].value!==""){_1190=parseInt(misys._config.businessDateForBank[_118f][0].value.substring(0,4),10);_1191=parseInt(misys._config.businessDateForBank[_118f][0].value.substring(5,7),10);_1192=parseInt(misys._config.businessDateForBank[_118f][0].value.substring(8,10),10);_118e=new Date(_1190,_1191-1,_1192);}else{if(misys&&misys._config&&misys._config.bankBusinessDate&&misys._config.bankBusinessDate!==""){_1190=parseInt(misys._config.bankBusinessDate.substring(0,4),10);_1191=parseInt(misys._config.bankBusinessDate.substring(5,7),10);_1192=parseInt(misys._config.bankBusinessDate.substring(8,10),10);_118e=new Date(_1190,_1191-1,_1192);}else{_118e=new Date();}}_118e.setHours(0,0,0,0);_118d=d.date.compare(m.localizeDate(this),_118e)<0?false:true;if(!_118d){this.invalidMessage=m.getLocalization("processingDateGreaterThanCurrentDateError",[_10c9(this)]);return false;}}return true;},validateEndDateWithCurrentDate:function(){if(!this.get("value")){return true;}var _1193=this.get("value");var _1194,_1195;if(dj.byId("customer_bank")){_1195=dj.byId("customer_bank").get("value");}else{if(dj.byId("bank_abbv_name")){_1195=dj.byId("bank_abbv_name").get("value");}else{if(dj.byId("issuing_bank_abbv_name")){_1195=dj.byId("issuing_bank_abbv_name").get("value");}}}var _1196,_1197,_1198;if(_1195!==""&&misys&&misys._config&&misys._config.businessDateForBank&&misys._config.businessDateForBank[_1195]&&misys._config.businessDateForBank[_1195][0]&&misys._config.businessDateForBank[_1195][0].value!==""){_1196=parseInt(misys._config.businessDateForBank[_1195][0].value.substring(0,4),10);_1197=parseInt(misys._config.businessDateForBank[_1195][0].value.substring(5,7),10);_1198=parseInt(misys._config.businessDateForBank[_1195][0].value.substring(8,10),10);_1194=new Date(_1196,_1197-1,_1198);}else{if(misys&&misys._config&&misys._config.bankBusinessDate&&misys._config.bankBusinessDate!==""){_1196=parseInt(misys._config.bankBusinessDate.substring(0,4),10);_1197=parseInt(misys._config.bankBusinessDate.substring(5,7),10);_1198=parseInt(misys._config.bankBusinessDate.substring(8,10),10);_1194=new Date(_1196,_1197-1,_1198);}else{_1194=new Date();}}_1194.setHours(0,0,0,0);var _1199=d.date.compare(m.localizeDate(this),_1194)<0?false:true;if(!_1199){this.invalidMessage=m.getLocalization("endDateSmallerThanCurrentDate",[_10c9(this)]);return false;}return true;},validateTradeExpiryDate:function(){if(!this.get("value")){return true;}var _119a=dj.byId("appl_date");if(!m.compareDateFields(_119a,this)){this.invalidMessage=m.getLocalization("expiryDateLessThanAppDateError",[_10c9(this),_10c9(_119a)]);return false;}var _119b=dj.byId("iss_date");if((_119b)&&(!m.compareDateFields(_119b,this))){this.invalidMessage=m.getLocalization("issueDateGreaterThanExpiryDateError",[_10c9(_119b),_10c9(this)]);return false;}var _119c=dj.byId("org_previous_exp_date");if((_119c)&&(!m.compareDateFields(_119c,this))){this.invalidMessage=m.getLocalization("orgExpDateGreaterThanExpiryDateError",[_10c9(this),_10c9(_119c)]);return false;}var _119d=dj.byId("amd_date");if((_119d)&&(!m.compareDateFields(_119d,this))){this.invalidMessage=m.getLocalization("ExpiryDateLessThanamendDate",[_10c9(this),_10c9(_119d)]);return false;}var _119e=dj.byId("last_ship_date");if((_119e)&&(!m.compareDateFields(_119e,this))){this.invalidMessage=m.getLocalization("expiryDateLessThanLastShipmentError",[_10c9(this),_10c9(_119e)]);return false;}var _119f=dj.byId("org_last_ship_date");if((_119e&&_119e.get("value")==null)&&(_119f&&!m.compareDateFields(_119f,this))){this.invalidMessage=m.getLocalization("newexpiryDateLessThanOldShipmentError",[_10c9(_119f),_10c9(this)]);return false;}var _11a0=dj.byId("renewal_calendar_date");if(_11a0){if(_11a0.get("value")!=null&&this.get("value")!=null&&(_11a0.get("value")>this.get("value"))){var _11a1=dojo.date.locale.format(_11a0.get("value"),{selector:"date",formatLength:"short",locale:dojo.config.locale});var _11a2=dojo.date.locale.format(this.get("value"),{selector:"date",formatLength:"short",locale:dojo.config.locale});_11a0.invalidMessage=m.getLocalization("calendarDateLessThanSystemDate",[_11a1,_11a2]);_11a0.set("state","Error");}else{if(_11a0.get("value")!=null&&this.get("value")!=null&&_11a0.get("value")<=this.get("value")){_11a0.set("state","");}}}var _11a3=dj.byId("next_revolve_date");if(_11a3&&!m.compareDateFields(_11a3,this)){this.invalidMessage=m.getLocalization("expDateLessThanNextRevolveDateError",[_10c9(_11a3),_10c9(this)]);return false;}if(!m._config.isBank){var _11a4=this.get("value");var days=_10c3(this);if(days<0){this.invalidMessage=m.getLocalization("expiryDateSmallerThanSystemDate",[_10c9(this)]);return false;}}return true;},validateEnteredDateGreaterThanCurrentDate:function(){if(!m._config.isBank||(m._config.isBank&&dj.byId("prod_stat_code")&&dj.byId("prod_stat_code").get("value")==="03"||dj.byId("prod_stat_code").get("value")==="08")){var _11a5=dj.byId("maturity_date");if(this.get("value")!=null){var days=_10c3(this);if(days<0){m.dialog.show("ERROR",m.getLocalization("lessthanCurrentDate"));_11a5.set("value"," ");return false;}}}return true;},validateAmendBGTradeExpiryDate:function(){var _11a6=dj.byId("amd_date");if((_11a6)&&(!m.compareDateFields(_11a6,this))){this.invalidMessage=m.getLocalization("ExpiryDateLessThanamendDate",[_10c9(this),_10c9(_11a6)]);return false;}var _11a7=this.get("value");var days=_10c3(this);if(days<0){this.invalidMessage=m.getLocalization("expiryDateSmallerThanSystemDate",[_10c9(this)]);return false;}var _11a8=dj.byId("renewal_calendar_date");if(_11a8){if(_11a8.get("value")!=null&&this.get("value")!=null&&(_11a8.get("value")>this.get("value"))){this.invalidMessage=m.getLocalization("expiryDateLessThanRenewalDate",[_10c9(_11a8)]);return false;}}return true;},validateContractDate:function(){if(!this.get("value")){return true;}var _11a9=dj.byId("appl_date");if(!m.compareDateFields(this,_11a9)){this.invalidMessage=m.getLocalization("contractDateGreaterThanApplicationDateError",[_10c9(this),_10c9(_11a9)]);return false;}return true;},validateBaseDate:function(){if(!this.get("value")){return true;}var _11aa=dj.byId("appl_date");if(!m.compareDateFields(this,_11aa)){this.invalidMessage=m.getLocalization("baseDateGreaterThanApplicationDateError",[_10c9(this),_10c9(_11aa)]);return false;}return true;},validateDocumentDate:function(){if(!this.get("value")){return true;}var _11ab=dj.byId("appl_date");if(!m.compareDateFields(this,_11ab)){this.invalidMessage=m.getLocalization("documentDateGreaterThanApplicationDateError",[_10c9(this),_10c9(_11ab)]);m._config.errorField.push(this);return false;}if(!(this.get("state")==="Error")){m._config.errorField=[];}return true;},validateTenderExpiryDate:function(){if(!this.get("value")){return true;}var _11ac=dj.byId("appl_date");if(!m.compareDateFields(_11ac,this)){this.invalidMessage=m.getLocalization("tenderExpDateLessThanApplicationDateError",[_10c9(this),_10c9(_11ac)]);return false;}var _11ad=dj.byId("exp_date");if((_11ad)&&(!m.compareDateFields(this,_11ad))){this.invalidMessage=m.getLocalization("expDateGreaterThanTenderExpiryDateError",[_10c9(this),_10c9(_11ad)]);return false;}return true;},validateMessageTradeExpiryDate:function(){if(!this.get("value")){return true;}var _11ae=dj.byId(this.id);var _11af=dj.byId("org_exp_date");if(!m.compareDateFields(_11af,_11ae)){this.invalidMessage=m.getLocalization("expiryDateSmallerThanOrgExpiryDate",[_10c9(_11ae),_10c9(_11af)]);return false;}var _11b0=dj.byId("iss_date");if(!m.compareDateFields(_11b0,_11ae)){this.invalidMessage=m.getLocalization("expiryDateSmallerThanIssueDate",[_10c9(_11ae),_10c9(_11b0)]);return false;}var days=_10c3(this);if(days<0){this.invalidMessage=m.getLocalization("expiryDateSmallerThanSystemDate",[_10c9(_11ae)]);return false;}return true;},validateMessageTransferTradeExpiryDate:function(){if(!this.get("value")){return true;}var _11b1=dj.byId(this.id);var _11b2=dj.byId("org_exp_date");if(!m.compareDateFields(_11b1,_11b2)){this.invalidMessage=m.getLocalization("expiryDateBiggerThanOrgExpiryDate",[_10c9(_11b1),_10c9(_11b2)]);return false;}var _11b3=dj.byId("iss_date");if(!m.compareDateFields(_11b3,_11b1)){this.invalidMessage=m.getLocalization("expiryDateSmallerThanIssueDate",[_10c9(_11b1),_10c9(_11b3)]);return false;}var days=_10c3(this);if(days<0){this.invalidMessage=m.getLocalization("expiryDateSmallerThanSystemDate",[_10c9(_11b1)]);return false;}return true;},validateFreeFormatMessage:function(){if(dj.byId("free_format_text").get("value")===""||dj.byId("free_format_text").get("value")===null){this.invalidMessage=m.getLocalization("requiredToolTip");return false;}else{return true;}},validateTradeMaturityDate:function(){if(!this.get("value")){return true;}var _11b4=dj.byId("appl_date");if(!m.compareDateFields(_11b4,this)){this.invalidMessage=m.getLocalization("maturityDateLessThanAppDateError",[_10c9(this),_10c9(_11b4)]);return false;}return true;},validateAWBIssueDate:function(){if(!this.get("value")){return true;}var _11b5=dj.byId("appl_date");if(!m.compareDateFields(_11b5,this)){this.invalidMessage=m.getLocalization("awbIssueDateLessThanAppDateError",[_10c9(this),_10c9(_11b5)]);return false;}return true;},validateOrderedDates:function(_11b6,_11b7,_11b8,_11b9){if(!this.get("value")){return true;}var _11ba=dj.byId(_11b8);if(!m.compareDateFields(this,_11ba)){this.invalidMessage=m.getLocalization(_11b9,[_10c9(this),_10c9(_11ba)]);return false;}var _11bb=dj.byId(_11b7);if(!m.compareDateFields(_11bb,this)){this.invalidMessage=m.getLocalization(_11b9,[_10c9(_11bb),_10c9(this)]);return false;}return true;},validateDateGreaterThan:function(_11bc,_11bd,_11be){if(!this.get("value")){return true;}var _11bf;if(!_11bd){_11bf=dj.byId("appl_date");}else{_11bf=dj.byId(_11bd);}if(!m.compareDateFields(_11bf,this)){this.invalidMessage=m.getLocalization(_11be,[_10c9(this),_10c9(_11bf)]);return false;}return true;},validateDateSmallerThan:function(_11c0,_11c1,_11c2){if(!this.get("value")){return true;}var _11c3=dj.byId(_11c1);if(!m.compareDateFields(this,_11c3)){this.invalidMessage=m.getLocalization(_11c2,[_10c9(this),_10c9(_11c3)]);return false;}return true;},validateLastShipmentDate:function(){if(!this.get("value")){return true;}var _11c4=dj.byId("exp_date");if(!m.compareDateFields(this,_11c4)){this.invalidMessage=m.getLocalization("expiryDateLessThanLastShipmentError",[_10c9(_11c4),_10c9(this)]);return false;}if(_11c4&&_11c4.get("value")==null){var _11c5=dj.byId("org_exp_date");if(_11c5&&!m.compareDateFields(this,_11c5)){this.invalidMessage=m.getLocalization("originalexpiryDateLessThanLastShipmentError",[_10c9(_11c5),_10c9(this)]);return false;}}var _11c6=dj.byId("due_date");if(!m.compareDateFields(this,_11c6)){this.invalidMessage=m.getLocalization("dueDateLessThanLastShipmentError",[_10c9(_11c6),_10c9(this)]);return false;}return true;},validateMessageTransferLastShipmentDate:function(){if(!this.get("value")){return true;}var _11c7=dj.byId("exp_date");if(!m.compareDateFields(this,_11c7)){this.invalidMessage=m.getLocalization("expiryDateLessThanLastShipmentError",[_10c9(_11c7),_10c9(this)]);return false;}var _11c8=dj.byId(this.id);var _11c9=dj.byId("org_last_ship_date");if(!m.compareDateFields(_11c8,_11c9)){this.invalidMessage=m.getLocalization("lastShipDateBiggerThanOrgLastShipDate",[_10c9(_11c8),_10c9(_11c9)]);return false;}return true;},validateRenewFor:function(){if(!isNaN(dj.byId("renew_for_nb").get("value"))){var _11ca=dj.byId("renew_for_nb").get("value")+"";if(_11ca.indexOf(".")!==-1){dj.byId("renew_for_nb").invalidMessage=m.getLocalization("valueShouldBeInteger");return false;}if(_11ca<=0){dj.byId("renew_for_nb").invalidMessage=m.getLocalization("valueShouldBeGreaterThanZero");return false;}}return true;},validateDaysNotice:function(){if(!isNaN(dj.byId("advise_renewal_days_nb").get("value"))){var _11cb=dj.byId("advise_renewal_days_nb").get("value")+"";if(_11cb.indexOf(".")!==-1){dj.byId("advise_renewal_days_nb").invalidMessage=m.getLocalization("valueShouldBeInteger");return false;}if(_11cb<=0){dj.byId("renew_for_nb").invalidMessage=m.getLocalization("valueShouldBeGreaterThanZero");return false;}}return true;},validateRollingFrequency:function(){if(!isNaN(dj.byId("rolling_renew_for_nb").get("value"))){var _11cc=dj.byId("rolling_renew_for_nb").get("value")+"";if(_11cc.indexOf(".")!==-1){dj.byId("rolling_renew_for_nb").invalidMessage=m.getLocalization("valueShouldBeInteger");return false;}if(_11cc<=0){dj.byId("rolling_renew_for_nb").invalidMessage=m.getLocalization("valueShouldBeGreaterThanZero");return false;}}return true;},validateNumberOfRenewals:function(){if(!isNaN(dj.byId("rolling_renewal_nb").get("value"))){var _11cd=dj.byId("rolling_renewal_nb").get("value")+"";if(_11cd.indexOf(".")!==-1){dj.byId("rolling_renewal_nb").invalidMessage=m.getLocalization("valueShouldBeInteger");return false;}if(_11cd<=0){dj.byId("renew_for_nb").invalidMessage=m.getLocalization("valueShouldBeGreaterThanZero");return false;}}return true;},validateCancellationNotice:function(){if(!isNaN(dj.byId("rolling_cancellation_days").get("value"))){var _11ce=dj.byId("rolling_cancellation_days").get("value")+"";if(_11ce.indexOf(".")!==-1){dj.byId("rolling_cancellation_days").invalidMessage=m.getLocalization("valueShouldBeInteger");return false;}if(_11ce<=0){dj.byId("renew_for_nb").invalidMessage=m.getLocalization("valueShouldBeGreaterThanZero");return false;}}return true;},validateTolerance:function(){var _11cf=(dj.byId("DrawingTolerence_spl")&&dj.byId("DrawingTolerence_spl").get("value")==="true");var _11d0=dj.byId("max_cr_desc_code")?dj.byId("max_cr_desc_code").get("value"):"";if(_11cf&&_11d0==3){if(dj.byId("pstv_tol_pct").get("value")!=0){dj.byId("pstv_tol_pct").set("value","0");}if(dj.byId("neg_tol_pct").get("value")!=5){dj.byId("neg_tol_pct").set("value","5");}dj.byId("pstv_tol_pct").set("readOnly",true);dj.byId("neg_tol_pct").set("readOnly",true);if(!isNaN(this.get("value"))&&this.get("value")<0){return false;}return true;}else{var _11d1=dj.byId("max_cr_desc_code");if(!(isNaN(this.get("value"))||this.get("value")=="")&&_11d1&&_11d1.get("value")){this.invalidMessage=m.getLocalization("toleranceExclusivityError");return false;}else{if(!isNaN(this.get("value"))&&this.get("value")<0){return false;}else{if(dj.byId("pstv_tol_pct").displayedValue==="."&&this.id!=="neg_tol_pct"){this.invalidMessage=m.getLocalization("invalidMessage");return false;}else{if(dj.byId("neg_tol_pct").displayedValue==="."&&this.id!=="pstv_tol_pct"){this.invalidMessage=m.getLocalization("invalidMessage");return false;}}}}return true;}},validateMaxCreditTerm:function(){var _11d2=dj.byId("DrawingTolerence_spl").get("value")==="true";var _11d3=dj.byId("max_cr_desc_code");if(_11d2&&_11d3==3){d.forEach(dj.byId("max_cr_desc_code").store.root.children,function(_11d4){if((dj.byId("max_cr_desc_code").get("displayedValue")===_11d4.text)){_11d5=true;}});dj.byId("pstv_tol_pct").set("value","0");dj.byId("neg_tol_pct").set("value","5");dj.byId("pstv_tol_pct").set("readOnly",true);dj.byId("neg_tol_pct").set("readOnly",true);return true;}else{dj.byId("pstv_tol_pct").set("readOnly",false);dj.byId("neg_tol_pct").set("readOnly",false);if(this.get("value")&&((!isNaN(dj.byId("pstv_tol_pct").get("value"))||!isNaN(dj.byId("neg_tol_pct").get("value")))&&!(dj.byId("pstv_tol_pct").get("value")==""&&dj.byId("neg_tol_pct").get("value")==""))){this.invalidMessage=m.getLocalization("toleranceExclusivityError");return false;}else{var _11d5=false;d.forEach(dj.byId("max_cr_desc_code").store.root.children,function(_11d6){if((dj.byId("max_cr_desc_code").get("displayedValue")===_11d6.text)){_11d5=true;}});}return _11d5;}},validateCurrency:function(){var _11d7=this.get("value"),_11d8=true,that=this;if(!_11d7){return true;}if(_11d7.length!==3){return false;}if(!m._config.currencyCodes||m._config.currencyCodes.length<1){m._config=m._config||{};d.mixin(m._config,{currencyCodes:[]});m.xhrGet({url:_10b6,handleAs:"json",contentType:_10bf,content:{bank_abbv_name:(dj.byId("bank_abbv_name")&&misys._config.isMultiBank===true)?dj.byId("bank_abbv_name").get("value"):""},preventCache:true,sync:true,load:function(_11d9,args){m._config.currencyCodes=_11d9.currencyCodesJsonArray;},error:function(_11da,args){console.error(_10bc,_11da);}});}if(d.indexOf(m._config.currencyCodes,_11d7)===-1){that.invalidMessage=m.getLocalization("invalidCurrencyError",[that.get("displayedValue")]);_11d8=false;}return _11d8;},validateCurrencyObj:function(_11db){var _11dc=_11db.get("value");var _11dd=true;var that=_11db;var _11de="";if(!_11dc){return true;}if(_11dc.length!==3){_11de=m.getLocalization("invalidCurrencyError",[that.get("value")]);that.focus();that.set("value","");dijit.hideTooltip(that.domNode);dijit.showTooltip(_11de,that.domNode,0);setTimeout(function(){dijit.hideTooltip(that.domNode);},2000);return false;}if(!m._config.currencyCodes||m._config.currencyCodes.length<1){m._config=m._config||{};d.mixin(m._config,{currencyCodes:[]});m.xhrGet({url:_10b6,handleAs:"json",contentType:_10bf,content:{bank_abbv_name:(dj.byId("bank_abbv_name")&&misys._config.isMultiBank===true)?dj.byId("bank_abbv_name").get("value"):""},preventCache:true,sync:true,load:function(_11df,args){m._config.currencyCodes=_11df.currencyCodesJsonArray;},error:function(_11e0,args){console.error(_10bc,_11e0);}});}if(d.indexOf(m._config.currencyCodes,_11dc)===-1){_11de=m.getLocalization("invalidCurrencyError",[that.get("value")]);that.focus();that.set("value","");dijit.hideTooltip(that.domNode);dijit.showTooltip(_11de,that.domNode,0);setTimeout(function(){dijit.hideTooltip(that.domNode);},2000);_11dd=false;}return _11dd;},validateUserAccountNumber:function(){if(misys._config.userAccountValidationEnabled==="false"){return true;}else{var _11e1=this.get("value"),_11e2=true,that=this;var _11e3=new RegExp(misys._config.userAccountValidationRegex);if(_11e1!==""&&_11e1!==null){_11e2=_11e3.test(_11e1);}if(!_11e2){var _11e4=that.get("displayedValue");if(_11e4){_11e4=_11e4.replace(/</g,"&lt;");_11e4=_11e4.replace(/>/g,"&gt;");}that.invalidMessage=m.getLocalization("invalidUserAccountNumber",[_11e4]);_11e2=false;}return _11e2;}},validateCurrencyCode:function(_11e5){var _11e6=_11e5,_11e7=true,that=this;if(!_11e6){return true;}if(_11e6.length!==3){return false;}if(!m._config.currencyCodes||m._config.currencyCodes.length<1){m._config=m._config||{};d.mixin(m._config,{currencyCodes:[]});m.xhrGet({url:_10b6,handleAs:"json",contentType:_10bf,preventCache:true,sync:true,load:function(_11e8,args){m._config.currencyCodes=_11e8.currencyCodesJsonArray;},error:function(_11e9,args){console.error(_10bc,_11e9);}});}if(d.indexOf(m._config.currencyCodes,_11e6)===-1){_11e7=false;}return _11e7;},validateCountry:function(){var _11ea=this.get("value"),_11eb=true,that=this;if(!_11ea){return true;}if(_11ea.length!==2){return false;}if(!m._config.countryCodes||m._config.countryCodes.length<1){m._config=m._config||{};d.mixin(m._config,{countryCodes:[]});m.xhrGet({url:m.getServletURL("/screen/AjaxScreen/action/GetCountryCodes"),handleAs:"json",contentType:_10bf,preventCache:true,sync:true,load:function(_11ec,args){m._config.countryCodes=_11ec.countryCodesJsonArray;},error:function(_11ed,args){console.error("[misys.validation.common] validateCountry error",_11ed);}});}if(d.indexOf(m._config.countryCodes,_11ea)===-1){that.invalidMessage=m.getLocalization("invalidCountryError",[that.get("displayedValue")]);_11eb=false;}return _11eb;},validateExecDate:function(){var _11ee=dj.byId("appl_date");if(!m.compareDateFields(this,_11ee)){this.invalidMessage=m.getLocalization("executionDateLessThanAppDateError",[_10c9(this),_10c9(_11ee)]);return false;}return true;},validateIssueDate:function(){if(!this.get("value")){return true;}var _11ef=dj.byId("product_code");if(_11ef&&_11ef.get("value")!=="SR"&&_11ef.get("value")!=="BR"&&_11ef.get("value")!=="EL"&&_11ef.get("value")!=="LS"){var _11f0=dj.byId("appl_date");if(!m.compareDateFields(_11f0,this)){this.invalidMessage=m.getLocalization("issueDateLessThanAppDateError",[_10c9(this),_10c9(_11f0)]);return false;}}if(dj.byId("tenor_maturity_date")&&dj.byId("tenor_maturity_date").get("value")!=null){var _11f1=dj.byId("tenor_maturity_date");if(!m.compareDateFields(this,_11f1)){this.invalidMessage=m.getLocalization("IssueDateGreaterThanMaturityDateError",[_10c9(this),_10c9(_11f1)]);return false;}}if(dj.byId("exp_date")&&dj.byId("exp_date").get("value")!=null){var _11f2=dj.byId("exp_date");if(!m.compareDateFields(this,_11f2)){this.invalidMessage=m.getLocalization("issueDateGreaterThanExpiryDateError",[_10c9(this),_10c9(_11f2)]);return false;}}if(dj.byId("product_code")&&dj.byId("product_code").get("value")==="LS"){var _11f3=dj.byId("bankDate")&&dj.byId("bankDate").get("value")!=null?dj.byId("bankDate").get("value"):"";var days=_10c3(this);if(days>0){this.invalidMessage=m.getLocalization("issueDateGreaterThanCurrentDateError",[_10c9(this)]);return false;}if(dj.byId("reg_date")){var _11f4=dj.byId("reg_date");if(!m.compareDateFields(_11f4,this)){this.invalidMessage=m.getLocalization("issDateLessThanRegDateError",[_10c9(this),_10c9(_11f4)]);return false;}}}if(dj.byId("valid_from_date")&&dj.byId("valid_from_date").get("value")!=null){var _11f5=dj.byId("valid_from_date");if(!m.compareDateFields(this,_11f5)){this.invalidMessage=m.getLocalization("issueDateGreaterThanValidFromDateError",[_10c9(this),_10c9(_11f5)]);return false;}}if(dj.byId("valid_to_date")&&dj.byId("valid_to_date").get("value")!=null){var _11f6=dj.byId("valid_to_date");if(!m.compareDateFields(this,_11f6)){this.invalidMessage=m.getLocalization("issueDateGreaterThanValidToDateError",[_10c9(this),_10c9(_11f6)]);return false;}}if(dj.byId("latest_payment_date")&&dj.byId("latest_payment_date").get("value")!=null){var _11f7=dj.byId("latest_payment_date");if(!m.compareDateFields(this,_11f7)){this.invalidMessage=m.getLocalization("issueDateGreaterThanLatestPaymentDateError",[_10c9(this),_10c9(_11f7)]);return false;}}if((dj.byId("tnxtype")&&(dj.byId("tnxtype").get("value")!=="38"))||(dj.byId("close_tnx")&&(dj.byId("close_tnx").get("checked")===false))){if(dj.byId("product_code")&&(dj.byId("product_code").get("value")==="IO"||dj.byId("product_code").get("value")==="EA")){var _11f8=dj.byId("last_match_date");if((_11f8&&_11f8.get("value")!=null)&&(!m.compareDateFields(this,_11f8))){this.invalidMessage=m.getLocalization("issueDateLessThanLastMatchDateError",[_10c9(this),_10c9(_11f8)]);return false;}}}return true;},validateEffectiveIssueDate:function(){if(!this.get("value")){return true;}if(dj.byId("exp_date")&&dj.byId("exp_date").get("value")!=null){var _11f9=dj.byId("exp_date");if(!m.compareDateFields(this,_11f9)){this.invalidMessage=m.getLocalization("effectiveDateGreaterThanExpiryDateError",[_10c9(this),_10c9(_11f9)]);return false;}}var _11fa=dj.byId("appl_date");if(_11fa&&_11fa.get("value")!=null){if(!m.compareDateFields(_11fa,this)){this.invalidMessage=m.getLocalization("AppDateMoreThanEffectiveDateError",[_10c9(this),_10c9(_11fa)]);return false;}}return true;},validatePaymentDueDate:function(){if(!this.get("value")){return true;}var _11fb=dj.byId("appl_date");if(!m.compareDateFields(_11fb,this)){this.invalidMessage=m.getLocalization("paymentDueDateDateLessThanAppDateError",[_10c9(this),_10c9(_11fb)]);return false;}return true;},validateMOProdIssueDate:function(){if(!this.get("value")){return true;}var _11fc=dj.byId("appl_date");if(!m.compareDateFields(this,_11fc)){this.invalidMessage=m.getLocalization("issueDateMoreThanAppDateError",[_10c9(this),_10c9(_11fc)]);return false;}if(dj.byId("tenor_maturity_date")&&dj.byId("tenor_maturity_date").get("value")!=null){var _11fd=dj.byId("tenor_maturity_date");if(!m.compareDateFields(this,_11fd)){this.invalidMessage=m.getLocalization("IssueDateGreaterThanMaturityDateError",[_10c9(this),_10c9(_11fd)]);return false;}}if(dj.byId("exp_date")&&dj.byId("exp_date").get("value")!=null){var _11fe=dj.byId("exp_date");if(!m.compareDateFields(this,_11fe)){this.invalidMessage=m.getLocalization("issueDateGreaterThanExpiryDateError",[_10c9(this),_10c9(_11fe)]);return false;}}return true;},validateMOProdELIssueDate:function(){if(!this.get("value")){return true;}if(dj.byId("tenor_maturity_date")&&dj.byId("tenor_maturity_date").get("value")!=null){var _11ff=dj.byId("tenor_maturity_date");if(!m.compareDateFields(this,_11ff)){this.invalidMessage=m.getLocalization("IssueDateGreaterThanMaturityDateError",[_10c9(this),_10c9(_11ff)]);return false;}}if(dj.byId("exp_date")&&dj.byId("exp_date").get("value")!=null){var _1200=dj.byId("exp_date");if(!m.compareDateFields(this,_1200)){this.invalidMessage=m.getLocalization("issueDateGreaterThanExpiryDateError",[_10c9(this),_10c9(_1200)]);return false;}}return true;},validateMaturityDate:function(){if(!this.get("value")){return true;}var _1201=dj.byId("appl_date");if(!m.compareDateFields(_1201,this)){this.invalidMessage=m.getLocalization("maturityDateLessThanAppDateError",[_10c9(this),_10c9(_1201)]);return false;}if(dj.byId("iss_date")&&dj.byId("iss_date").get("value")!=null){var _1202=dj.byId("iss_date");if(!m.compareDateFields(_1202,this)){this.invalidMessage=m.getLocalization("maturityDateLessThanIssueDateError",[_10c9(this),_10c9(_1202)]);return false;}}return true;},validateLatestAnswerDate:function(){if(!this.get("value")){return true;}var _1203=dj.byId("iss_date");if(!m.compareDateFields(_1203,this)){this.invalidMessage=m.getLocalization("lastAnwerDateLessThanIssDateError",[_10c9(this),_10c9(_1203)]);return false;}var _1204=dj.byId("exp_date");if(!m.compareDateFields(this,_1204)){this.invalidMessage=m.getLocalization("lastAnswerDateGreaterThanExpDateError",[_10c9(this),_10c9(_1204)]);return false;}return true;},validateLCAvailableAmt:function(){var _1205;if(dj.byId("lc_available_amt").get("value")>0){if(dj.byId("lc_amt")&&dj.byId("lc_available_amt")&&dj.byId("prod_stat_code")&&dj.byId("prod_stat_code").get("value")=="03"&&(dj.byId("lc_amt").get("value")!=dj.byId("lc_available_amt").get("value"))){_1205=function(){var _1206=dijit.byId("lc_available_amt");_1206.focus();_1206.set("state","Error");};m.dialog.show("ERROR",m.getLocalization("AvailLCAmtNotEqualToTranAmt"),"",function(){setTimeout(_1205,500);});}else{if(dj.byId("lc_amt")&&dj.byId("lc_available_amt")&&(dj.byId("lc_amt").get("value")<dj.byId("lc_available_amt").get("value"))){_1205=function(){var _1207=dijit.byId("lc_available_amt");_1207.focus();_1207.set("state","Error");};m.dialog.show("ERROR",m.getLocalization("AvailLCamtcanNotMoreThanTranAmt"),"",function(){setTimeout(_1205,500);});}}}},validateLCLiabAmt:function(){var _1208;if(dj.byId("lc_liab_amt").get("value")>0){if(dj.byId("lc_amt")&&dj.byId("prod_stat_code")&&dj.byId("prod_stat_code").get("value")==="03"&&(dj.byId("lc_amt").get("value")>dj.byId("lc_liab_amt").get("value"))){_1208=function(){var _1209=dijit.byId("lc_liab_amt");_1209.focus();_1209.set("state","Error");};m.dialog.show("ERROR",m.getLocalization("LiabLCAmtcanNotLessThanTranAmt"),"",function(){setTimeout(_1208,500);});}}},validateTFMaturityDate:function(){var _120a=dj.byId("appl_date");if(!m.compareDateFields(_120a,this)){this.invalidMessage=m.getLocalization("maturityDateLessThanAppDateError",[_10c9(this),_10c9(_120a)]);return false;}var _120b=dj.byId("iss_date");if(!m.compareDateFields(_120b,this)){this.invalidMessage=m.getLocalization("issueDateGreaterThanMaturityError",[_10c9(_120b),_10c9(this)]);return false;}return true;},validateAmendAmount:function(_120c,node,_120d){var _120e=dj.byId(node);_120e.invalidMessage=_120e.messages.invalidMessage;if(!_120e.validator(_120e.textbox.value,_120e.constraints)){return false;}if(_120e&&_120e.get("value")<0){return false;}var _120f=(_120e.state==="Error")?false:true;if(false===_120c||(true===_120c&&!_120f)){_120f=true;var _1210=_120e.id;var _1211=d.number.parse(dj.byId("org_"+_120d+"_amt").get("value"));if(_1210==="inc_amt"){var _1212=_120e.get("value");if((!isNaN(_1212))&&((_1212+_1211)>Number.MAX_VALUE)){_120e.invalidMessage=m.getLocalization("maximumValueError");_120f=false;}}else{if(_1210==="dec_amt"){var _1213=_120e.get("value");if((!isNaN(_1213))&&((_1211-_1213)<0)){_120e.invalidMessage=m.getLocalization("amendAmountLessThanOriginalError");_120f=false;}}}}return _120f;},validateTransferAmount:function(){var value=this.get("value"),_1214=d.number.parse(dj.byId("org_lc_amt").get("value"));if(value&&_1214&&_1214<value){this.invalidMessage=m.getLocalization("transferAmtGreaterThanLCAmtError");return false;}return true;},validateStartDate:function(){if(!this.get("value")){return true;}var _1215=dj.byId("appl_date");if(!m.compareDateFields(_1215,this)){this.invalidMessage=m.getLocalization("startDateLessThanAppDateError",[_10c9(this),_10c9(_1215)]);return false;}var _1216=dj.byId("end_date");if(!m.compareDateFields(this,_1216)){this.invalidMessage=m.getLocalization("startDateGreaterThanEndDateError",[_10c9(this),_10c9(_1216)]);return false;}var _1217=dj.byId("registered_end_date");if(!m.compareDateFields(this,_1217)){this.invalidMessage=m.getLocalization("startDateGreaterThanRegisteredEndDateError",[_10c9(this),_10c9(_1217)]);return false;}return true;},validateEndDate:function(){if(!this.get("value")){return true;}var _1218=dj.byId("start_date");if(!m.compareDateFields(_1218,this)){this.invalidMessage=m.getLocalization("endDateLessThanStartDateError",[_10c9(this),_10c9(_1218)]);return false;}var _1219=dj.byId("registered_end_date");if(!m.compareDateFields(this,_1219)){this.invalidMessage=m.getLocalization("endDateGreaterThanRegisteredEndDateError",[_10c9(this),_10c9(_1219)]);return false;}return true;},validateNewsStartDate:function(){if(!this.get("value")){return true;}var _121a=dj.byId("start_display_date");var _121b=dj.byId("end_display_date");if(!m.compareDateFields(this,_121b)){this.invalidMessage=m.getLocalization("newsStartDateGreaterThanEndDateError",[_10c9(this),_10c9(_121b)]);return false;}var _121c,_121d;if((_121a)&&(_121a.get("value")!=="")){_121c=new Date();_121c.setHours(0,0,0,0);_121d=d.date.compare(m.localizeDate(_121a),_121c)<0?false:true;if(!_121d){_121a.state="Error";_121a.set("focusonerror",true);_121a.invalidMessage=m.getLocalization("startDateGreaterThanCurrentDateError",[_10c9(_121a)]);_121a._setStateClass();dj.setWaiState(_121a.focusNode,"invalid","true");return false;}}return true;},validateNewsEndDate:function(){if(!this.get("value")){return true;}var _121e=dj.byId("start_display_date");var _121f=dj.byId("end_display_date");if(!m.compareDateFields(_121e,this)){this.invalidMessage=m.getLocalization("newsEndDateLesserThanStartDateError",[_10c9(this),_10c9(_121e)]);return false;}var _1220,_1221;if((_121f)&&(_121f.get("value")!=="")){_1220=new Date();_1220.setHours(0,0,0,0);_1221=d.date.compare(m.localizeDate(_121f),_1220)<0?false:true;if(!_1221){_121f.state="Error";_121f.set("focusonerror",true);_121f.invalidMessage=m.getLocalization("endDateGreaterThanCurrentDateError",[_10c9(_121f)]);_121f._setStateClass();dj.setWaiState(_121f.focusNode,"invalid","true");return false;}}return true;},validateTransferDateCustomer:function(){var _1222,_1223;if(!this.get("value")){return true;}var _1224="";if(dj.byId("customer_bank")){_1224=dj.byId("customer_bank").get("value");}if(_1224===""){_1224=dj.byId("issuing_bank_abbv_name").get("value");}var _1225=dj.byId("appl_date");if(!m.compareDateFields(_1225,this)){this.invalidMessage=m.getLocalization("transferDateLessThanAppDateError",[_10c9(this),_10c9(_1225)]);return false;}if(dj.byId("sub_product_code").get("value")==="BILLP"||dj.byId("sub_product_code").get("value")==="BILLS"){var _1226=dj.byId("registered_end_date");if(!m.compareDateFields(this,_1226)){this.invalidMessage=m.getLocalization("transferDateGreaterThanRegisteredEndDateError",[_10c9(this),_10c9(_1226)]);return false;}}if(this.get("value")!==""){var _1227=parseInt(misys._config.businessDateForBank[_1224][0].value.substring(0,4),10);var _1228=parseInt(misys._config.businessDateForBank[_1224][0].value.substring(5,7),10);var _1229=parseInt(misys._config.businessDateForBank[_1224][0].value.substring(8,10),10);_1222=new Date(_1227,_1228-1,_1229);_1222.setHours(0,0,0,0);_1223=d.date.compare(m.localizeDate(this),_1222)<0?false:true;if(!_1223){this.invalidMessage=m.getLocalization("transferDateGreaterThanCurrentDateError",[_10c9(this)]);return false;}}return true;},validateTransferDateWithCurrentDate:function(_122a){var _122b,_122c;if((_122a)&&(_122a.get("value")!=="")){_122b=new Date();_122b.setHours(0,0,0,0);_122c=d.date.compare(m.localizeDate(_122a),_122b)<0?false:true;if(!_122c){_122a.state="Error";_122a.set("focusonerror",true);_122a.invalidMessage=m.getLocalization("transferDateGreaterThanCurrentDateError",[_10c9(_122a)]);_122a._setStateClass();dj.setWaiState(_122a.focusNode,"invalid","true");return false;}}return true;},validateTransferDate:function(){if(!this.get("value")){return true;}var _122d=dj.byId("appl_date");if(!m.compareDateFields(_122d,this)){this.invalidMessage=m.getLocalization("transferDateLessThanAppDateError",[_10c9(this),_10c9(_122d)]);return false;}if(dj.byId("sub_product_code").get("value")==="BILLP"||dj.byId("sub_product_code").get("value")==="BILLS"){var _122e=dj.byId("registered_end_date");if(!m.compareDateFields(this,_122e)){this.invalidMessage=m.getLocalization("transferDateGreaterThanRegisteredEndDateError",[_10c9(this),_10c9(_122e)]);return false;}}return true;},validateTransferExpiryDate:function(){if(!this.get("value")){return true;}var _122f=dj.byId("iss_date");if(!m.compareDateFields(_122f,this)){this.invalidMessage=m.getLocalization("transferExpiryDateLessThanIssueDateError",[_10c9(this),_10c9(_122f)]);return false;}var _1230=dj.byId("exp_date");if(!m.compareDateFields(this,_1230)){this.invalidMessage=m.getLocalization("transferExpiryDateGreaterThanExpiryDateError",[_10c9(this),_10c9(_1230)]);return false;}return true;},validateTransferLastShipmentDate:function(){if(!this.get("value")){return true;}var _1231=dj.byId("transfer_expiry_date");if(!m.compareDateFields(this,_1231)){this.invalidMessage=m.getLocalization("transferLastShipmentDateLessThanTransferExpiryDateError",[_10c9(this),_10c9(_1231)]);return false;}return true;},validateValueApplicationDate:function(){var _1232=this;if(_1232&&!_1232.get("value")){return true;}var _1233=dj.byId("appl_date");var _1234=d.date.compare(m.localizeDate(_1232),m.localizeDate(_1233))<0?false:true;if(!_1234){_1232.state="Error";_1232.set("focusonerror",true);_1232.invalidMessage=m.getLocalization("valueDateIsLessThanApplDateError",[_10c9(_1232),_10c9(_1233)]);_1232._setStateClass();dj.setWaiState(_1232.focusNode,"invalid","true");return false;}return true;},validateTransferNumbers:function(){if(!this.get("value")){return true;}if(this.get("value")<0||this.get("value")>999){this.invalidMessage=m.getLocalization("invalidTransferNumbers");return false;}return true;},validateBlankEndorsedPercentage:function(){if(!this.get("value")){return true;}if(this.get("value")<110||this.get("value")>999){this.invalidMessage=m.getLocalization("invalidBlankEndorsedPercentage");return false;}return true;},validateAmendmentDate:function(){var _1235=this.get("value");if(!m._config.isBank||(m._config.isBank&&dj.byId("prod_stat_code")&&(dj.byId("prod_stat_code").get("value")==="03"||dj.byId("prod_stat_code").get("value")==="08"))){if(_1235!=null){var days=_10c3(this);if(days<0){this.invalidMessage=m.getLocalization("amdDateSmallerThanCurrentDate",[_10c9(this)]);return false;}}if(dj.byId("amd_date")&&dj.byId("amd_date").get("value")!=null&&dj.byId("exp_date")&&dj.byId("exp_date").get("value")!=null){var _1236=dj.byId("amd_date");var _1237=dj.byId("exp_date");var _1238=d.date.compare(m.localizeDate(_1236),m.localizeDate(_1237))>=0?false:true;if(!_1238){this.invalidMessage=m.getLocalization("amdDateGreaterThanExpiryDate",[_10c9(_1236),_10c9(_1237)]);return false;}}}return true;},validateBGAmendmentDate:function(){var _1239=this.get("value");var _123a=new Date();var that=this;_123a.setHours(0,0,0,0);if(_1239!=null){var days=_10c3(this);if(days<0){this.invalidMessage=m.getLocalization("amdDateSmallerThanCurrentDate",[_10c9(this)]);return false;}}if(dj.byId("amd_date")&&dj.byId("amd_date").get("value")!=null&&dj.byId("exp_date")&&dj.byId("exp_date").get("value")!=null){var _123b=dj.byId("amd_date");var _123c=dj.byId("exp_date");var _123d=d.date.compare(m.localizeDate(_123b),m.localizeDate(_123c))>=0?false:true;if(!_123d){this.invalidMessage=m.getLocalization("amdDateGreaterThanExpiryDate",[_10c9(_123b),_10c9(_123c)]);return false;}}return true;},validateBankExpiryDate:function(){if(!this.get("value")){return true;}var _123e=dj.byId("appl_date");if(!m.compareDateFields(_123e,this)){this.invalidMessage=m.getLocalization("expiryDateLessThanAppDateError",[_10c9(this),_10c9(_123e)]);return false;}var _123f=dj.byId("iss_date");if(!m.compareDateFields(_123f,this)){this.invalidMessage=m.getLocalization("expiryDateLessThanIssueDateError",[_10c9(this),_10c9(_123f)]);return false;}var _1240=dj.byId("org_previous_exp_date");if(!m.compareDateFields(_1240,this)){this.invalidMessage=m.getLocalization("orgExpDateGreaterThanExpiryDateError",[_10c9(this),_10c9(_1240)]);return false;}var _1241=dj.byId("last_ship_date");if(!m.compareDateFields(_1241,this)){this.invalidMessage=m.getLocalization("expiryDateLessThanLastShipmentError",[_10c9(this),_10c9(_1241)]);return false;}var _1242=dj.byId("next_revolve_date");if(_1242&&!m.compareDateFields(_1242,this)){this.invalidMessage=m.getLocalization("expDateLessThanNextRevolveDateError",[_10c9(_1242),_10c9(this)]);return false;}if((!m._config.isBank&&(null==dj.byId("prod_stat_code")||null!=dj.byId("prod_stat_code")&&dj.byId("prod_stat_code").get("value")!="10"))||(m._config.isBank&&null!=dj.byId("prod_stat_code")&&dj.byId("prod_stat_code")&&dj.byId("prod_stat_code").get("value")==="03"||dj.byId("prod_stat_code").get("value")==="08")){if(dj.byId("product_code")&&(dj.byId("product_code").get("value")==="BG"||dj.byId("product_code").get("value")==="LC"||dj.byId("product_code").get("value")==="EL"||dj.byId("product_code").get("value")==="SI")){var days=_10c3(this);if(days<0){this.invalidMessage=m.getLocalization("expiryDateSmallerThanSystemDate",[_10c9(this)]);return false;}}}return true;},validateLink:function(){if(dj.byId("link").get("value")!==""&&dj.byId("file_name").get("value")!==""){this.invalidMessage=m.getLocalization("tooManyNewsLinksError");return false;}return true;},validateBICFormat:function(){var bic=this.get("value"),regex=new RegExp(dj.byId("swiftBicCodeRegexValue")?dj.byId("swiftBicCodeRegexValue").get("value"):"");if(!dj.byId("swiftBicCodeRegexValue")){this.invalidMessage=m.getLocalization("invalidBICError",[bic]);return false;}if(bic){if(!regex.test(bic)){this.invalidMessage=m.getLocalization("invalidBICError",[bic]);return false;}}return true;},validateLiquidityBranchReference:function(){var _1243=dj.byId("liquidity_branch_reference");if(_1243&&_1243.get("value")!==""){var _1244=misys._config.liquidityBranchReferences;for(var itr=0;itr<_1244.length;itr++){if(misys._config.liqBranchRef===_1243.get("value")){return true;}else{if(_1243.get("value")===_1244[itr].fi_code&&_1244[itr].in_use==="Y"){this.invalidMessage=m.getLocalization("invalidLBORefError");return false;}}}}return true;},checkEmailExistence:function(){var _1245=dj.byId("email");var login=dj.byId("login_id");var _1246=dj.byId("company_abbv_name");var field=dijit.byId("email");var _1247=dj.byId("org_email")?dj.byId("org_email").get("value"):"";var _1248=dj.byId("user_id")?dj.byId("user_id").get("value"):"";var _1249=_1245?_1245.get("value"):"";var _124a=login?login.get("value"):"";var _124b=_1246?_1246.get("value"):"";var _124c=(field&&(field.get("state")==="Error"||field.get("state")==="Incomplete"||field.readOnly||field.disabled))?false:true;if(_1249){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckEmailUniquenessAction"),handleAs:"json",sync:true,content:{emailInContext:_1249,loginInContext:_124a,companyInContext:_124b,orgEmail:_1247,userID:_1248},load:function(_124d){var _124e="";if(_124d.items.isEmailUnique===false&&_124c){_124c=false;_124e=m.getLocalization("emailIdExists",[_1249]);m.dialog.show("CUSTOM-NO-CANCEL",_124e,"Email Error",function(){field.focus();field.set("state","Error");dj.hideTooltip(_1245.domNode);dj.showTooltip(_124e,_1245.domNode,0);});setTimeout(function(){dj.hideTooltip(_1245.domNode);},5000);}else{_124c=true;field.set("state","");}}});}else{_124c=true;}return _124c;},checkBICExistence:function(){var _124f=dijit.byId(this.id);var _1250=_124f?_124f.get("value"):"";var _1251=(_124f&&(_124f.get("state")==="Error"||_124f.get("state")==="Incomplete"||_124f.readOnly||_124f.disabled))?false:true;if(_1250&&_1251){var _1252=dijit.byId("product_code")?dijit.byId("product_code").get("value"):"";m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckSwiftBICAction"),handleAs:"json",sync:true,content:{productCode:_1252,bicInContext:_1250},load:function(_1253){var _1254="";if(!_1253.items.bankDataExists){_1251=true;_1254=m.getLocalization("nonExistentBICWarning",[_1250]);m.dialog.show(_10b7,_1254,"BIC Error",function(){dj.hideTooltip(_124f.domNode);dj.showTooltip(_1254,_124f.domNode,0);});setTimeout(function(){dj.hideTooltip(_124f.domNode);},5000);}else{if(!_1253.items.isValidBic){_1251=false;_1254=m.getLocalization("nonExistentBICError",[_1250]);m.dialog.show(_10b7,_1254,"BIC Error",function(){_124f.focus();_124f.set("state","Error");dj.hideTooltip(_124f.domNode);dj.showTooltip(_1254,_124f.domNode,0);});setTimeout(function(){dj.hideTooltip(_124f.domNode);},5000);}}}});}return _1251;},checkBICExistenceForWidgets:function(){var _1255=dijit.byId(this.id);var _1256=_1255?_1255.get("value"):"";var _1257=(_1255&&(_1255.get("state")==="Error"||_1255.get("state")==="Incomplete"||_1255.readOnly||_1255.disabled))?false:true;if(_1256&&_1257){var _1258=dijit.byId("product_code")?dijit.byId("product_code").get("value"):"";m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckSwiftBICAction"),handleAs:"json",sync:true,content:{productCode:_1258,bicInContext:_1256},load:function(_1259){var _125a="";if(!_1259.items.bankDataExists){_1257=true;_125a=m.getLocalization("nonExistentBICWarning",[_1256]);m.dialog.show(_10b7,_125a,"BIC Error",function(){dj.hideTooltip(_1255.domNode);dj.showTooltip(_125a,_1255.domNode,0);});setTimeout(function(){dj.hideTooltip(_1255.domNode);},5000);}else{if(!_1259.items.isValidBic){_1257=false;_125a=m.getLocalization("nonExistentBICError",[_1256]);m.dialog.show(_10b7,_125a,"BIC Error",function(){_1255.set("value","");_1255.focus();_1255.set("state","Error");dj.hideTooltip(_1255.domNode);dj.showTooltip(_125a,_1255.domNode,0);});setTimeout(function(){dj.hideTooltip(_1255.domNode);},5000);}}}});}return _1257;},validateBEIFormat:function(){var _125b="^[A-Z0-9]{4,4}[A-Z]{2,2}[A-Z0-9][A-Z2-9]([A-Z0-9]{3,3}){0,1}$";var bei=this.get("value"),regex=(dj.byId("swiftBicCodeRegexValue")&&dj.byId("swiftBicCodeRegexValue").get("value")&&dj.byId("swiftBicCodeRegexValue").get("value")!=="")?new RegExp(dj.byId("swiftBicCodeRegexValue").get("value"),"g"):new RegExp(_125b,"g");if(bei){if(!regex.test(bei)){this.invalidMessage=m.getLocalization("invalidBEIError",[bei]);return false;}}return true;},validateCharacters:function(){var _125c=" 0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ/-?.,+_";var _125d;var _125e=d.every(this.get("value"),function(_125f){_125d=_125f;return (_125c.indexOf(_125f)<0)?false:true;});if(!_125e){this.invalidMessage=m.getLocalization("illegalCharError",[_125d]);}return _125e;},validateCharsInRolesCreation:function(){var _1260="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-()/'  ";var _1261;var _1262=d.every(this.get("value"),function(_1263){_1261=_1263;return (_1260.indexOf(_1263)<0)?false:true;});if(!_1262){this.invalidMessage=m.getLocalization("illegalCharError",[_1261]);}return _1262;},validateSwiftAddressCharacters:function(){var _1264=dj.byId("swiftregexValue").get("value");var _1265=this.get("value"),_1266=new RegExp(_1264);var _1267=false;_1267=_1266.test(_1265);if(!_1267){this.invalidMessage=m.getLocalization("invalidSWIFTTransactionError");}return _1267;},validateCharactersExcludeSpace:function(){var _1268=" 0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ/-?.,+_";var _1269;var _126a=d.every(this.get("value"),function(_126b){_1269=_126b;return (_1268.indexOf(_126b)<0)?false:true;});if(!_126a){this.invalidMessage=m.getLocalization("illegalCharError",[_1269]);}return _126a;},validateBlackListChar:function(){var _126c=dijit.byId("blacklistspecialcharregexvalue").get("value");var _126d=new RegExp(_126c);var _126e=_126d.test(this.get("value"));if(_126e){this.invalidMessage=m.getLocalization("blacklistCharError");}return _126e;},validateBlackListCharInDynamicRTE:function(field){var _126f=field?field.get("value"):"";var _1270=dojo.trim(dojox.html.entities.encode(_126f,dojox.html.entities.html));var _1271=dijit.byId("blacklistspecialcharregexvalue").get("value");var _1272=new RegExp(_1271);var _1273=_1272.test(_1270);if(_1273){this.invalidMessage=m.getLocalization("blacklistCharError");}return _1273;},validateSingleEmailAddr:function(){var _1274=this.get("value");var _1275=true;if(_1274===""){return _1275;}if(!dojox.validate.isEmailAddress(_1274)){_1275=false;}if(!_1275){this.invalidMessage=m.getLocalization("invalidEmailAddressError");return false;}return true;},validateEmailAddr:function(){var _1276=this.get("value");if(_1276===""){return true;}var _1277=_1276.split(";");var _1278=[];var j=0;for(var i=(_1277.length-1);i>=0;i--){if(!dojox.validate.isEmailAddress(_1277[i])){_1278[j]=_1277[i];j++;}}if(i>j){this.invalidMessage=m.getLocalization("invalidEmailAddressError");return false;}for(var k=(_1278.length-1);k>=0;k--){if(!dojox.validate.isEmailAddress(_1278[k])){this.invalidMessage=m.getLocalization("invalidEmailAddressError");return false;}}return true;},validateNoOfEmails:function(){var _1279=dj.byId("notify_beneficiary_email").get("value");var res=_1279.split(";");if(res.length>10){var _127a=m.getLocalization("checkEmailId");dj.byId("notify_beneficiary_email").set("state","Error");dj.hideTooltip(dj.byId("notify_beneficiary_email").domNode);dj.showTooltip(_127a,dj.byId("notify_beneficiary_email").domNode,0);}},validateWebAddr:function(){var _127b=this.get("value");if(_127b===""){return true;}if(!dojox.validate.isUrl(_127b)){this.invalidMessage=m.getLocalization("invalidWebAddressError");return false;}return true;},validatePassword:function(){return true;},validateMonthly:function(){if(!dj.byId("frequency_2").get("checked")){this.set("value","");}var value=this.get("value");if(value==="29"||value==="30"||value==="31"){this.invalidMessage=m.getLocalization("monthDayWarningMessage");return false;}return true;},validateRateFormat:function(){var _127c=true;var rate=this.get("value");if(rate<0||rate===0){_127c=false;return _127c;}var _127d=(rate+"");var _127e=0;var _127f=0;var _1280=false;var _1281=false;d.forEach(_127d,function(_1282){if(((_1282>="0"||_1282<="9")&&_1282!==m.getLocalization("g_strDecimalDelimiter"))){if(!_1280){_127e=_127e+1;}else{_127f=_127f+1;}}else{if(_1282===m.getLocalization("g_strDecimalDelimiter")){_1280=true;_1281=true;if(_127e>m.getLocalization("g_numbersBeforeComma")){this.invalidMessage=m.getLocalization("rateMessageNumbersBeforeAndAfterComma",[m.getLocalization("g_numbersBeforeComma"),m.getLocalization("g_numbersAfterComma")]);_127c=false;}}}});if(_127f>m.getLocalization("g_numbersAfterComma")){this.invalidMessage=m.getLocalization("rateMessageNumbersBeforeAndAfterComma",[m.getLocalization("g_numbersBeforeComma"),m.getLocalization("g_numbersAfterComma")]);_127c=false;}var _1283=m.getLocalization("g_numbersBeforeComma");var _1284=parseInt(_1283,10);if(!_1281&&_127d.length>_1284){this.invalidMessage=m.getLocalization("rateMessageNumbersBeforeComma",[m.getLocalization("g_numbersBeforeComma")]);_127c=false;}return _127c;},validateTermNumberField:function(_1285){if(!(/Date/.test(this.get("declaredClass")))){return false;}if(!this.isCorrectlyFilled()){return true;}if(!this.isValidNumber()){this.get("_numberField").invalidMessage=m.getLocalization(_1285);return false;}return true;},validateDateTermField:function(_1286,_1287,_1288,_1289,_128a){if(!(/Date/.test(this.get("declaredClass")))){return false;}this.get("_calendarWidget").invalidMessage=this.get("_calendarWidget").messages.invalidMessage;if(!this.get("_calendarWidget").validator(this.get("_calendarWidget").textbox.value,this.get("_calendarWidget").constraints)){return false;}if(!this.isCorrectlyFilled()){return true;}var _128b=true;if(!_1289){_1289=false;}var _128c;if(this.isValidDate()){_128c=this.getFormalValueDate();if(!_128c){return true;}}else{_128c=_10cf(this.get("id"));if(_128c<0){return true;}}if(!_128c){return true;}var _128d;var _128e=dj.byId(_1287);if(!_1287){_128d=new Date();}else{if(!(/Date/.test(_128e.get("declaredClass")))){_128d=m.localizeDate(_128e);if(!_128d){return true;}}else{if(_128e.isValidDate()){_128d=_128e.getFormalValueDate();if(!_128d){return true;}}else{if(_128a){_128d=_10cf(_1287,_128c);}else{_128d=_10cf(_1287);}if(_128d<0){return true;}}}}_128c.setHours(0);_128c.setMinutes(0);_128c.setSeconds(0);_128c.setMilliseconds(0);if(_128d!==undefined){_128d.setHours(0);_128d.setMinutes(0);_128d.setSeconds(0);_128d.setMilliseconds(0);}if(_1289){_128b=d.date.compare(_128c,_128d)<=0?true:false;}else{_128b=d.date.compare(_128c,_128d)>=0?true:false;}if(!_128b){this.get("_calendarWidget").invalidMessage=m.getLocalization(_1288,[d.date.locale.format(_128c,{selector:"date"}),d.date.locale.format(_128d,{selector:"date"})]);}return _128b;},validateOrderType:function(){var _128f=dj.byId("order_list_by_default");if(_128f&&_128f.get("checked")){return this.get("displayedValue")!=="";}return true;},validateAxisScale:function(){var _1290=dj.byId("chart_axis_x");if((_1290&&_1290.get("value")&&arrColumn)&&(arrColumn[_1290][0]==="Date")){return this.get("displayedValue");}return true;},validateGroupingColumn:function(){var _1291=dj.byId("grouping_enable");if(this.get("value")==""&&this.get("displayedValue")!=""){return false;}if(_1291&&_1291.get("checked")){return this.get("displayedValue")!=="";}return true;},validateOutstandingAmount:function(){var _1292=d.query(".outstanding");if(_1292.length===1){var _1293=dj.byId(d.attr(_1292[0],"widgetid")).get("value")||0;if(_1293>0&&this.get("value")==="10"){this.invalidMessage=m.getLocalization("outstandingAmountShouldBeZero");return false;}}return true;},validateShipmentDates:function(){var _1294=dj.byId("last_ship_date"),_1295=dj.byId("narrative_shipment_period");if(_1294&&_1295&&!_1294.get("value")&&_1295.get("value")===""){m._config.onSubmitErrorMsg=m.getLocalization("shipmentPeriodOrDateMissingError");return false;}return true;},validateHolidaysAndCutOffTime:function(_1296,_1297,mode,_1298,_1299,_129a,_129b,_129c){var _129d=misys._config.productCode?misys._config.productCode:"";var _129e=dj.byId(_1296)?dj.byId(_1296).get("value"):"";var _129f=dj.byId(_1297)?dj.byId(_1297).get("value"):"";if(_129f==="IAFT"){if(mode==="UNSIGNED"){if(dj.byId(_129b).get("value")===dj.byId("applicant_act_cur_code_unsigned").get("value")){_129f="IAFTS";}else{_129f="IAFTD";}}else{if(dj.byId(_129b).get("value")===dj.byId("applicant_act_cur_code").get("value")){_129f="IAFTS";}else{_129f="IAFTD";}}}var _12a0=dj.byId(_129b)?dj.byId(_129b).get("value"):"";var _12a1=dj.byId(_129c)?dj.byId(_129c).get("value"):"";m._config=m._config||{};dojo.mixin(m._config,{holidayCutOffEnabled:true});var _12a2=new Array();var _12a3=dj.byId(_129a)?dj.byId(_129a).get("value"):"";dojo.forEach(_1299,function(node,index){var date=_10de(dj.byId(node));_12a2.push(date);});return _1115(_129e,_129d,_129f,mode,_1298,_12a2,_12a3,_12a0,_12a1,null);},validateHolidaysAndCutOffTimeForMUPS:function(_12a4,_12a5,mode,_12a6,_12a7,_12a8,_12a9,_12aa,_12ab){var _12ac=misys._config.productCode?misys._config.productCode:"";var _12ad=dj.byId(_12a4)?dj.byId(_12a4).get("value"):"";var _12ae=dj.byId(_12a5)?dj.byId(_12a5).get("value"):"";var _12af=dj.byId(_12ab)?dj.byId(_12ab).get("value"):"";if(_12ae==="IAFT"){if(mode==="UNSIGNED"){if(dj.byId(_12a9).get("value")===dj.byId("applicant_act_cur_code_unsigned").get("value")){_12ae="IAFTS";}else{_12ae="IAFTD";}}else{if(dj.byId(_12a9).get("value")===dj.byId("applicant_act_cur_code").get("value")){_12ae="IAFTS";}else{_12ae="IAFTD";}}}var _12b0=dj.byId(_12a9)?dj.byId(_12a9).get("value"):"";var _12b1=dj.byId(_12aa)?dj.byId(_12aa).get("value"):"";m._config=m._config||{};dojo.mixin(m._config,{holidayCutOffEnabled:true});var _12b2=new Array();var _12b3=dj.byId(_12a8)?dj.byId(_12a8).get("value"):"";dojo.forEach(_12a7,function(node,index){var date=_10de(dj.byId(node));_12b2.push(date);});return _1115(_12ad,_12ac,_12ae,mode,_12a6,_12b2,_12b3,_12b0,_12b1,_12af);},checkAccountStatus:function(accNo){var _12b4=true;m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckAccountStatus"),handleAs:"json",sync:true,content:{accNo:accNo},load:function(_12b5,args){_12b4=_12b5.isAccountActive;},error:function(_12b6,args){console.error("Checking Account status  error ",_12b6);}});return _12b4;},validateAlphaNumeric:function(){var _12b7=dijit.byId("userNameRegexValue").get("value");var _12b8=new RegExp(_12b7);var _12b9=_12b8.test(this.get("value"));if(!_12b9){this.invalidMessage=m.getLocalization("userIdillegalCharError");}return _12b9;},validateGroupId:function(){var _12ba=dijit.byId("groupIdRegexValue").get("value");var _12bb=new RegExp(_12ba);var _12bc=_12bb.test(this.get("value"));if(!_12bc){this.invalidMessage=m.getLocalization("userIdillegalCharError");}return _12bc;},validateGroupName:function(){var _12bd=dijit.byId("groupNameRegexValue").get("value");var _12be=new RegExp(_12bd);var _12bf=_12be.test(this.get("value"));if(!_12bf){this.invalidMessage=m.getLocalization("userIdillegalCharError");}return _12bf;},validateAlphaNumericRemarks:function(){if(!_10c0(this," 0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ")){var _12c0=m.getLocalization("illegalRemarksCharError",[this.get("value")]);_12c0=_12c0.replace(/>/g,"&gt;");_12c0=_12c0.replace(/</g,"&lt;");this.invalidMessage=_12c0;return false;}return true;},validateNumeric:function(){var _12c1="0123456789";var _12c2;var _12c3=d.every(this.get("value"),function(_12c4){_12c2=_12c4;return (_12c1.indexOf(_12c4)<0)?false:true;});if(!_12c3){this.invalidMessage=m.getLocalization("illegalCharError",[_12c2]);}return _12c3;},validatePhoneOrFax:function(){var _12c5="0123456789- ()";var _12c6;var _12c7=d.every(this.get("value"),function(_12c8,index){if(index===0&&_12c8==="+"){return true;}else{_12c6=_12c8;return (_12c5.indexOf(_12c8)<0)?false:true;}});if(!_12c7){if(_12c6==="+"){this.invalidMessage=m.getLocalization("invalidCharacterPosition",[_12c6]);}else{this.invalidMessage=m.getLocalization("illegalCharErrorContact");}}return _12c7;},validateFax:function(){var _12c9="0123456789- ()";var _12ca;var _12cb=d.every(this.get("value"),function(_12cc,index){if(index===0&&_12cc==="+"){return true;}else{_12ca=_12cc;return (_12c9.indexOf(_12cc)<0)?false:true;}});if(!_12cb){if(_12ca==="+"){this.invalidMessage=m.getLocalization("invalidCharacterPosition",[_12ca]);}else{this.invalidMessage=m.getLocalization("illegalCharErrorContactForFax");}}return _12cb;},validateIPInvoiceDate:function(){if(!this.get("value")){return true;}var _12cd=dj.byId("due_date");if(!m.compareDateFields(this,_12cd)){this.invalidMessage=m.getLocalization("invoiceDateGreaterThanDueDateError",[_10c9(this),_10c9(_12cd)]);return false;}return true;},validateIPDueDate:function(){if(!this.get("value")){return true;}var _12ce=dj.byId("appl_date");if(!m.compareDateFields(_12ce,this)){this.invalidMessage=m.getLocalization("dueDateLessThanAppDateError",[_10c9(this),_10c9(_12ce)]);return false;}var _12cf=dj.byId("iss_date");if(!m.compareDateFields(_12cf,this)){this.invalidMessage=m.getLocalization("dueDateLessThanInvoiceDateError",[_10c9(this),_10c9(_12cf)]);return false;}return true;},validateRemittanceDate:function(){if(!this.get("value")){return true;}var _12d0=this.get("value");var days=_10c3(this);if(days>0){this.invalidMessage=m.getLocalization("remittanceDateGreaterThanSystemDateError",[_10c9(this)]);return false;}return true;},clearPrincipalAndFeeAccount:function(){if(dj.byId("principal_act_name")){dj.byId("principal_act_name").set("value","");}if(dj.byId("fee_act_name")){dj.byId("fee_act_name").set("value","");}},validateAmount:function(amtId){if(amtId){var amt=amtId.get("value");var _12d1,_12d2;if(amt===0){_12d1=m.getLocalization("amountcannotzero");amtId.set("state","Error");dj.hideTooltip(amtId.domNode);dj.showTooltip(_12d1,amtId.domNode,0);amtId.focus();return false;}else{if((amt<0)||(amt===undefined)){_12d1=m.getLocalization("invalidMessage");amtId.set("state","Error");dj.hideTooltip(amtId.domNode);dj.showTooltip(_12d1,amtId.domNode,0);amtId.focus();return false;}else{return true;}}}return true;},validateFinalExpiryDate:function(){var _12d3=true;var _12d4=dj.byId("exp_date").get("value");var _12d5=dj.byId("final_expiry_date").get("value");if(_12d4==null||_12d4==""){_12d3=false;this.invalidMessage=m.getLocalization("expiryDateReqd");}else{if(_12d5&&_12d5!=""){if(_12d5<_12d4){dj.byId("final_expiry_date").set("value",null);_12d3=false;this.invalidMessage=m.getLocalization("finalExpDateLessThanTransactionExpDtError",[dj.byId("final_expiry_date").get("displayedValue"),dj.byId("exp_date").get("displayedValue")]);}}}return _12d3;},validateTradeFinalExpiryDate:function(){var _12d6=true;var _12d7=true;if(this.get("value")!=null){var _12d8=this.get("value");var _12d9=dj.byId("renew_on_code").get("value");var _12da=dj.byId("renewal_calendar_date").get("value");var _12db=dj.byId("renew_for_nb").get("value");var _12dc=dj.byId("renew_for_period").get("value");var _12dd=dj.byId("rolling_renewal_nb").get("value");var _12de=dj.byId("rolling_renewal_nb").get("value");var _12df=null;var _12e0=null;var _12e1=null;if(_12d9==="01"){_12e0=dj.byId("exp_date").get("value");_12e1=dj.byId("org_exp_date");if(!_12e0&&_12e1){_12e0=dojo.date.locale.parse(_12e1.get("value"),{locale:dojo.config.locale,formatLength:"short",selector:"date"});}if(_12e0==null){_12d7=false;this.invalidMessage=m.getLocalization("expiryDateReqdForFinExpiryDateError");}}else{if(_12d9==="02"){_12e0=_12da;if(_12e0==null){_12d7=false;this.invalidMessage=m.getLocalization("calendarDateReqdForFinExpiryDateError");}}else{_12d7=false;this.invalidMessage=m.getLocalization("renewOnNotSelectedError");}}if(_12dd==null||isNaN(_12dd)){_12d7=false;this.invalidMessage=m.getLocalization("nbofRenewalsNotSelectedError");}else{if(_12d9==="01"||_12d9==="02"){if(_12db==null||_12db===""||_12dc==null||_12dc===""){_12d7=false;this.invalidMessage=m.getLocalization("renewForNotSelectedError");}}}if(_12d7){switch(_12dc){case "D":_12df=d.date.add(_12e0,"day",_12de*_12db);break;case "W":_12df=d.date.add(_12e0,"week",_12de*_12db);break;case "M":_12df=d.date.add(_12e0,"month",_12de*_12db);break;case "Y":_12df=d.date.add(_12e0,"year",_12de*_12db);break;default:break;}var _12e2;if(_12df!=undefined){_12e2=new Date(_12df.getTime());}if(_12e2!=undefined&&_12d8.getTime()<_12e2.getTime()){_12d6=false;var _12e3=dojo.date.locale.format(_12e2,{selector:"date",formatLength:"short",locale:dojo.config.locale});this.invalidMessage=m.getLocalization("finExpiryDateLessThanLastActiveDateError",[_10c9(this),_12e3]);}}else{_12d6=false;}}return _12d6;},validateValidFromDate:function(){if(!this.get("value")){return true;}if(dj.byId("reg_date")){var _12e4=dj.byId("reg_date");if(!m.compareDateFields(_12e4,this)){this.invalidMessage=m.getLocalization("validFromDateLessThanRegDateError",[_10c9(this),_10c9(_12e4)]);return false;}}if(dj.byId("iss_date")&&dj.byId("iss_date").get("value")!==null){var _12e5=dj.byId("iss_date");if(!m.compareDateFields(_12e5,this)){this.invalidMessage=m.getLocalization("validFromDateLessThanIssDateError",[_10c9(this),_10c9(_12e5)]);return false;}}if(dj.byId("valid_to_date")&&dj.byId("valid_to_date").get("value")!==null){var _12e6=dj.byId("valid_to_date");if(!m.compareDateFields(this,_12e6)){this.invalidMessage=m.getLocalization("validFromDateGreaterThanValidToDateError",[_10c9(this),_10c9(_12e6)]);return false;}}if(dj.byId("latest_payment_date")&&dj.byId("latest_payment_date").get("value")!==null){var _12e7=dj.byId("latest_payment_date");if(!m.compareDateFields(this,_12e7)){this.invalidMessage=m.getLocalization("validFromDateGreaterThanLatestPaymntDateError",[_10c9(this),_10c9(_12e7)]);return false;}}return true;},validateValidToDate:function(){if(!this.get("value")){return true;}var days=_10c3(this);if(days<0){this.invalidMessage=m.getLocalization("validToDateLessThanTodayDateError",[_10c9(this)]);return false;}if(dj.byId("appl_date")){var _12e8=dj.byId("appl_date");if(!m.compareDateFields(_12e8,this)){this.invalidMessage=m.getLocalization("validToDateLessThanAppDateError",[_10c9(this),_10c9(_12e8)]);return false;}}if(dj.byId("iss_date")&&dj.byId("iss_date").get("value")!=null){var _12e9=dj.byId("iss_date");if(!m.compareDateFields(_12e9,this)){this.invalidMessage=m.getLocalization("validToDateLessThanIssDateError",[_10c9(this),_10c9(_12e9)]);return false;}}if(dj.byId("valid_from_date")&&dj.byId("valid_from_date").get("value")!==null){var _12ea=dj.byId("valid_from_date");if(!m.compareDateFields(_12ea,this)){this.invalidMessage=m.getLocalization("validToDateLessThanValidFromDateError",[_10c9(this),_10c9(_12ea)]);return false;}}if(dj.byId("latest_payment_date")&&dj.byId("latest_payment_date").get("value")!==null){var _12eb=dj.byId("latest_payment_date");if(!m.compareDateFields(this,_12eb)){this.invalidMessage=m.getLocalization("validToDateGreaterThanLatestPaymntDateError",[_10c9(this),_10c9(_12eb)]);return false;}}return true;},validateLatestPaymentDate:function(){if(!this.get("value")){return true;}if(dj.byId("appl_date")){var _12ec=dj.byId("appl_date");if(!m.compareDateFields(_12ec,this)){this.invalidMessage=m.getLocalization("latestPaymentDateLessThanAppDateError",[_10c9(this),_10c9(_12ec)]);return false;}}if(dj.byId("iss_date")&&dj.byId("iss_date").get("value")!==null){var _12ed=dj.byId("iss_date");if(!m.compareDateFields(_12ed,this)){this.invalidMessage=m.getLocalization("latestPaymentDateLessThanIssDateError",[_10c9(this),_10c9(_12ed)]);return false;}}if(dj.byId("valid_from_date")&&dj.byId("valid_from_date").get("value")!==null){var _12ee=dj.byId("valid_from_date");if(!m.compareDateFields(_12ee,this)){this.invalidMessage=m.getLocalization("latestPaymentDateLessThanValidFromDateError",[_10c9(this),_10c9(_12ee)]);return false;}}if(dj.byId("valid_to_date")&&dj.byId("valid_to_date").get("value")!==null){var _12ef=dj.byId("valid_to_date");if(!m.compareDateFields(_12ef,this)){this.invalidMessage=m.getLocalization("latestPaymentDateLessThanValidToDateError",[_10c9(this),_10c9(_12ef)]);return false;}}return true;},validateRegDate:function(){if(!this.get("value")){return true;}if(dj.byId("iss_date")){var _12f0=dj.byId("iss_date");if(!m.compareDateFields(this,_12f0)){this.invalidMessage=m.getLocalization("regDateGreaterThanIssDateError",[_10c9(this),_10c9(_12f0)]);return false;}}var days=_10c3(this);if(days>0){this.invalidMessage=m.getLocalization("RegistrationDateGreaterThanApplicationDateError",[_10c9(this)]);return false;}return true;},validateLicenseSettlementAmt:function(){if(dj.byId("ls_amt")){var lsAmt=d.number.parse(dj.byId("ls_amt").get("value"));var _12f1=d.number.parse(dj.byId("ls_settlement_amt").get("value"));lsAmt=!isNaN(lsAmt)?lsAmt:0;_12f1=!isNaN(_12f1)?_12f1:0;if(_12f1>lsAmt){m.showTooltip(m.getLocalization("lsSettlementAmtGreaterThanLSAmtError",[_12f1,lsAmt]),this.domNode,["after"]);this.state="Error";this._setStateClass();dj.setWaiState(this.focusNode,"invalid","true");return false;}}return true;},validateAddLicenseSettlementAmt:function(){if(dj.byId("additional_amt")){var _12f2=d.number.parse(dj.byId("additional_amt").get("value"));var _12f3=d.number.parse(dj.byId("add_settlement_amt").get("value"));_12f2=!isNaN(_12f2)?_12f2:0;_12f3=!isNaN(_12f3)?_12f3:0;if(_12f3>_12f2){m.showTooltip(m.getLocalization("addSettlementAmtGreaterThanAddAmtError",[_12f3,_12f2]),this.domNode,["after"]);this.state="Error";this._setStateClass();dj.setWaiState(this.focusNode,"invalid","true");return false;}}return true;},validateRenewalCalendarDate:function(){var _12f4=dj.byId("renewal_calendar_date")?dj.byId("renewal_calendar_date").get("value"):"";var _12f5=dj.byId("renew_on_code")?dj.byId("renew_on_code").get("value"):"";var _12f6=new Date();var _12f7=true;if(_12f5!=null&&_12f5==="02"){var _12f8=dj.byId("exp_date").get("value");var _12f9=dj.byId("org_exp_date");if(!_12f8&&_12f9){_12f8=dojo.date.locale.parse(_12f9.get("value"),{locale:dojo.config.locale,formatLength:"short",selector:"date"});}if(_12f8==null||_12f8===""){_12f7=false;this.invalidMessage=m.getLocalization("expiryDateReqd");}if(_12f4!=null&&_12f8!=null&&((_12f4<=_12f6)||(_12f4>_12f8))){_12f7=false;var _12fa=dojo.date.locale.format(_12f6,{selector:"date",formatLength:"short",locale:dojo.config.locale});var _12fb=dojo.date.locale.format(_12f8,{selector:"date",formatLength:"short",locale:dojo.config.locale});this.invalidMessage=m.getLocalization("calendarDateLessThanSystemDate",[_12fa,_12fb]);}}return _12f7;},validateAmendBGRenewalCalendarDate:function(){var _12fc=dj.byId("renewal_calendar_date")?dj.byId("renewal_calendar_date").get("value"):"";var _12fd=dj.byId("renew_on_code")?dj.byId("renew_on_code").get("value"):"";var _12fe=new Date();if(_12fd!=null&&_12fd==="02"){var _12ff=dj.byId("exp_date").get("value");var _1300=dj.byId("org_exp_date");var that=this;if(!_12ff&&_1300){_12ff=dojo.date.locale.parse(_1300.get("value"),{locale:dojo.config.locale,formatLength:"short",selector:"date"});}if(_12ff==null||_12ff===""){m.dialog.show("ERROR",m.getLocalization("expiryDateReqd"),"",function(){that.focus();});this.reset();}if(_12fc!=null&&_12ff!=null&&((_12fc<=_12fe)||(_12fc>_12ff))){var _1301=dojo.date.locale.format(_12fe,{selector:"date",formatLength:"short",locale:dojo.config.locale});var _1302=dojo.date.locale.format(_12ff,{selector:"date",formatLength:"short",locale:dojo.config.locale});m.dialog.show("ERROR",m.getLocalization("calendarDateLessThanSystemDate",[_1301,_1302]),"",function(){that.focus();});this.reset();}}},validateTransportDocumentDate:function(){if(!this.get("value")){return true;}var _1303=dj.byId("appl_date");if(d.date.compare(this.get("value"),m.localizeDate(_1303))>=0){this.invalidMessage=m.getLocalization("TransDocDateGreaterThanApplDateError",[_10c9(this),_10c9(_1303)]);return false;}return true;},validateFutureDate:function(){if(!this.get("value")){return true;}var _1304=dj.byId("iss_date");if((_1304&&_1304.get("value"))&&(d.date.compare(this.get("value"),m.localizeDate(_1304))<=0)){this.invalidMessage=m.getLocalization("issDateSmallerThanFutureDate",[_10c9(this),_10c9(_1304)]);return false;}var _1305=dj.byId("appl_date");if((_1305&&_1305.get("value"))&&(d.date.compare(this.get("value"),m.localizeDate(_1305))<=0)){this.invalidMessage=m.getLocalization("futureDateSmallerThanAppDate",[_10c9(this),_10c9(_1305)]);return false;}return true;},validateTnxAmount:function(){var _1306=dj.byId("tnx_amt");var _1307=dj.byId("claim_amt");var _1308=dojo.number.parse(dj.byId("tnx_amt").get("value"));var _1309;if(dj.byId("lc_amt")){_1309=dojo.number.parse(dj.byId("lc_amt").get("value"));}else{if(dj.byId("bg_amt")){_1309=dojo.number.parse(dj.byId("bg_amt").get("value"));}}if(_1307){var _130a=dojo.number.parse(_1307.get("value"));}if(_1308<0){_1306.invalidMessage=m.getLocalization("totalamount");return false;}if(_1306&&_1309&&_1308>_1309){_1306.invalidMessage=misys.getLocalization("settlementAmtGreaterThanOrigTnxAmtError",[_1308.toFixed(2),_1309.toFixed(2)]);return false;}else{if(_1306&&_1307&&_1308>_130a){_1306.invalidMessage=misys.getLocalization("tnxAmtGreaterThanClaimAmtError",[_1308.toFixed(2),_130a.toFixed(2)]);return false;}else{if(_1306&&_1308===0){_1306.invalidMessage=misys.getLocalization("tnxAmtZeroError");return false;}}}return true;},validateFinanceAmt:function(){var _130b,_130c;var _130d=true;if(this.get("value")<=0){_130d=false;this.invalidMessage=misys.getLocalization("financeRequestAmtError");}else{if(dj.byId("intent_to_pay_amt")){_130b=Number(dj.byId("intent_to_pay_amt").get("value").replace(",",""));if(_130b!=""&&this.get("value")>_130b){_130d=false;this.invalidMessage=misys.getLocalization("financeRequestAmtErrorForIntentPayAmt");}}else{if(dj.byId("total_net_amt")){_130c=dj.byId("total_net_amt").get("value");if(_130c!==""&&this.get("value")>_130c){_130d=false;this.invalidMessage=misys.getLocalization("financeRequestAmtErrorForTotalAmt");}}}}return _130d;},validateParity:function(){var _130e=this.get("value");var _130f=true;if((_130e===0)||(_130e<0)){this.invalidMessage=m.getLocalization("parityError");_130f=false;}return _130f;},validateRemarks:function(){if(!_10c0(this," 0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ#$^*_=`~{}|:./[]-")){var _1310=m.getLocalization("illegalRemarksCharError",[this.get("value")]);_1310=_1310.replace(/>/g,"&gt;");_1310=_1310.replace(/</g,"&lt;");this.invalidMessage=_1310;return false;}return true;},validateLoanIncreaseDate:function(){if(this.get("value")==null){return true;}var _1311=dj.byId(this.id);var _1312=new Date();_1312.setHours(0,0,0,0);var _1313=d.date.compare(m.localizeDate(this),_1312)<0?false:true;if(!_1313){this.invalidMessage=m.getLocalization("loanEffectiveIncreaseDateLessThanCurrentDate",[_10c9(this)]);return false;}var _1314=m.localizeDate(_1311);var _1315=dj.byId("effective_date");if(_1315){var _1316=m.localizeDate(_1315);if(d.date.compare(_1316,_1314)>0){this.invalidMessage=m.getLocalization("loanAmendDateLesserThanLoanEffectiveDateError",[_10c9(this),_10c9(_1315)]);return false;}}_1314=m.localizeDate(_1311);var flag=dj.byId("sub_product_code");var _1317="SWG";if(flag.get("value")===_1317){var _1318=dj.byId("repricing_date");if(_1318){var _1319=m.localizeDate(_1318);if(d.date.compare(_1319,_1314)<=0){this.invalidMessage=m.getLocalization("loanAmendDateLesserThanRepricingDateError",[_10c9(this),_10c9(_1318)]);return false;}}}var _131a=dj.byId("ln_maturity_date");if(_131a&&_131a.get("value")!==""){var _131b=m.localizeDate(_131a);if(d.date.compare(_131b,_1314)<=0){this.invalidMessage=m.getLocalization("loanAmendDateGreaterThanLoanMatDateError",[_10c9(this),_10c9(_131a)]);return false;}}var _131c=dijit.byId("facility_expiry_date");if(_131c){var _131d=m.localizeDate(_131c);if(d.date.compare(_131d,_1314)<0){this.invalidMessage=m.getLocalization("loanAmendDateGreaterThanFacExpDateError",[_10c9(this),_10c9(_131c)]);return false;}}var _131e=dj.byId("appl_date");if(_131e){var _131f=m.localizeDate(_131e);if(d.date.compare(_131f,_1314)>0){this.invalidMessage=m.getLocalization("loanAmendDateLesserThanLoanApplDateError",[_10c9(this),_10c9(_131e)]);return false;}}return true;},validateBpoBICFormat:function(id){var bic=id.get("value"),regex=new RegExp("^[A-Z0-9]{4,4}[A-Z]{2,2}[A-Z0-9][A-Z2-9]([A-Z0-9]{3,3}){0,1}$","g");if(bic){if(!regex.test(bic)){var _1320=m.getLocalization("invalidBICError",[bic]);id.set("value","");id.set("state","Error");m.dialog.show("ERROR",m.getLocalization("focusOnErrorAlert"),"",function(){id.focus();dj.hideTooltip(id.domNode);dj.showTooltip(_1320,id.domNode,0);});}}},compareDateIsGreater:function(node,_1321){var _1322=dj.byId(node);var date1=null;if(!(_1322&&_1322.get("value"))){return true;}else{date1=_1322.get("value");}var _1323=new Date();_1323.setHours(0,0,0,0);if(d.date.compare(m.localizeDate(_1322),_1323)<0){m._config.onSubmitErrorMsg=m.getLocalization("expDateSmallerThanCurrentDate",[_10c9(_1322)]);return false;}for(var i=0;i<_1321.length;i++){var _1324=dj.byId(_1321[i]);if((_1324&&_1324.get("value"))&&(d.date.compare(date1,m.localizeDate(_1324))<=0)){m._config.onSubmitErrorMsg=m.getLocalization("issDateSmallerThanFutureDate",[_10c9(_1322),_10c9(_1324)]);return false;}}return true;},validateDescriptionGoods:function(){var _1325=this.get("value"),_1326=true,that=this;if(_1325.length>35){that.invalidMessage=m.getLocalization("invalidLSDescGoodsLength",[that.get("displayedValue")]);_1326=false;return false;}return true;},setRenewalAmount:function(_1327){var _1328=_1327.get("value");if(_1328==="01"){dj.byId("renew_amt_code_1").set("checked",true);dj.byId("renew_amt_code_1").set("value","01");}else{if(_1328==="02"){dj.byId("renew_amt_code_2").set("checked",true);dj.byId("renew_amt_code_2").set("value","02");}}},setRenewalAmountOnFormLoad:function(){if(dj.byId("renew_flag")&&dj.byId("renew_flag").get("checked")===true){var _1329=dj.byId("renew_amount_code")?dj.byId("renew_amount_code").get("value"):"02";if(_1329){if(_1329==="01"){dj.byId("renew_amt_code_1").set("checked",true);}else{if(_1329==="02"){dj.byId("renew_amt_code_2").set("checked",true);}}}}},validateRollingRenewalFrequency:function(node){var _132a=dj.byId("renew_for_nb").get("value");var _132b=dj.byId("rolling_renew_for_nb").get("value");if(_132a!==""&&_132b!==""&&_132b>_132a){node.set("value","");dj.showTooltip(m.getLocalization("rollingFrequencyCannotBeMoreThanRenewalPeriodError"),node.domNode,0);var _132c=function(){dj.hideTooltip(node.domNode);};setTimeout(_132c,1500);}},validateEnteredGreaterThanCurrentDate:function(){var _132d=dj.byId("maturity_date");var _132e=dj.byId("current_date");if(_132e&&!m.compareDateFields(_132e,_132d)){m.dialog.show("ERROR",m.getLocalization("lessthanCurrentDate"));_132d.set("value"," ");return false;}return true;},validateIntegerValue:function(node){if(!isNaN(node.get("value"))){var _132f=node.get("value")+"";var _1330=function(){dj.hideTooltip(node.domNode);};if(_132f.indexOf(".")!==-1){dj.showTooltip(m.getLocalization("valueShouldBeInteger"),node.domNode,0);setTimeout(_1330,1500);node.set("state","Error");}if(_132f<=0){dj.showTooltip(m.getLocalization("valueShouldBeGreaterThanZero"),node.domNode,0);setTimeout(_1330,1500);node.set("state","Error");}}},validateNextRevolveDate:function(){if(!this.get("value")){return true;}var days=_10c3(this);if(days<0){this.invalidMessage=m.getLocalization("nextRevolveDateSmallerThanSystemDate",[_10c9(this)]);return false;}var _1331=dj.byId("iss_date");if((_1331)&&(!m.compareDateFields(_1331,this))){this.invalidMessage=m.getLocalization("nextRevolveDateLessThenIssDateError",[_10c9(this),_10c9(_1331)]);return false;}var _1332=dj.byId("exp_date");var _1333=dj.byId("org_exp_date");if(_1332&&!m.compareDateFields(this,_1332)){this.invalidMessage=m.getLocalization("nextRevolveDateGreaterThanExpiryDateError",[_10c9(this),_10c9(_1332)]);return false;}else{if(_1332.get("value")==null&&_1333&&!m.compareDateFields(this,_1333)){this.invalidMessage=m.getLocalization("nextRevolveDateGreaterThanExpiryDateError",[_10c9(this),_10c9(_1333)]);return false;}}return true;},validateOpenAccountLastMatchDate:function(){var _1334=dj.byId("last_match_date");var _1335=m.getMaxBPOExpiryDate();if(_1334&&_1334.get("value")!=null&&_1335!==""){if(d.date.compare(_1334.get("value"),_1335)>0){this.invalidMessage=m.getLocalization("lastMatchDateGreaterThanBpoExpiryDateError",[_10c9(this),dojo.date.locale.format(_1335,{locale:dojo.config.locale,formatLength:"short",selector:"date"})]);return false;}}var _1336=dj.byId("exp_date");if(_1334&&_1334.get("value")!=null&&_1336&&_1336.get("value")!=null){if(d.date.compare(_1334.get("value"),_1336.get("value"))>0){this.invalidMessage=m.getLocalization("lastMatchDateGreaterThanExpiryDateError",[_10c9(this),_10c9(_1336)]);return false;}}var _1337=dj.byId("iss_date");if(_1334&&_1334.get("value")!=null&&_1337&&_1337.get("value")!=null){if(d.date.compare(_1334.get("value"),_1337.get("value"))<0){this.invalidMessage=m.getLocalization("lastMatchDateLessThanIssueDateError",[_10c9(this),_10c9(_1337)]);return false;}}var _1338=dj.byId("appl_date");if(_1334&&_1334.get("value")!=null&&_1338&&_1338.get("value")!=null){if(d.date.compare(_1334.get("value"),_1338.get("value"))<0){this.invalidMessage=m.getLocalization("lastMatchDateLessThanApplicationDateError",[_10c9(this),_10c9(_1338)]);return false;}}return true;},checkContractPercent:function(){if(!this.get("value")){return true;}var _1339=this.get("value");var index=_1339.toString().indexOf(".");var _133a=_1339.toString().length;if(_1339<=100&&_1339>=0){if(index===-1&&_133a>12){this.invalidMessage=m.getLocalization("contractPercentMoreThan12DigitError");return false;}else{if(_1339.toString().indexOf(".")>=0){var _133b=(_133a-index-1);if(_133b>2){this.invalidMessage=m.getLocalization("contractPercentMoreThan2DecilamError");return false;}}}return true;}else{this.invalidMessage=m.getLocalization("contractPercentMoreThan100Error");return false;}},validateEarliestShipDate:function(){if((dj.byId("tnxtype")&&(dj.byId("tnxtype").get("value")==="38"))||(dj.byId("close_tnx")&&(dj.byId("close_tnx").get("checked")===true))){return true;}if(!this.get("value")){return true;}var _133c=dj.byId("iss_date");if((_133c&&_133c.get("value"))&&(d.date.compare(this.get("value"),m.localizeDate(_133c))<0)){this.invalidMessage=m.getLocalization("issDateSmallerThanEarliestShipDate",[_10c9(this),_10c9(_133c)]);return false;}var _133d=dj.byId("appl_date");if((_133d)&&(d.date.compare(this.get("value"),m.localizeDate(_133d))<0)){this.invalidMessage=m.getLocalization("earliestShipDateSmallerThanAppDate",[_10c9(this),_10c9(_133d)]);return false;}var _133e=dj.byId("exp_date");var _133f=m.getMaxBPOExpiryDate();if(this.get("value")!==""&&_133f&&_133f!==""){if(d.date.compare(this.get("value"),_133f)>0){this.invalidMessage=m.getLocalization("BPOexpiryDateLessThanEarliestShipmentError",[_10c9(this),dojo.date.locale.format(_133f,{locale:dojo.config.locale,formatLength:"short",selector:"date"})]);return false;}}if(_133e&&!m.compareDateFields(this,_133e)){this.invalidMessage=m.getLocalization("expiryDateLessThanEarliestShipmentError",[_10c9(this),_10c9(_133e)]);return false;}var _1340=dj.byId("last_ship_date");if((_1340&&_1340.get("value")!=null)&&(d.date.compare(this.get("value"),m.localizeDate(_1340))>0)){this.invalidMessage=m.getLocalization("earliestShipDateSmallerThanLastShipDate",[_10c9(this),_10c9(_1340)]);return false;}var _1341=dj.byId("line_item_last_ship_date");if((_1341&&_1341.get("value")!=null)&&(d.date.compare(this.get("value"),m.localizeDate(_1341))>0)){this.invalidMessage=m.getLocalization("earliestShipDateSmallerThanLastShipDate",[_10c9(this),_10c9(_1341)]);return false;}var _1342=dj.byId("schedule_latest_ship_date");var _1343=dj.byId("line_item_shipment_schedules");if(_1343&&_1343.store&&_1343.store._arrayOfTopLevelItems.length>0&&_1342&&_1342.get("value")!=null){if(d.date.compare(this.get("value"),m.localizeDate(_1342))>0){this.invalidMessage=m.getLocalization("earliestShipDateSmallerThanLastShipDate",[_10c9(this),_10c9(_1342)]);return false;}}return true;},validateGroupCode:function(){var regex=reg_exp_validationCode.value,_1344=dj.byId("group_code").get("value"),_1345=new RegExp(regex);if(_1344){if(!_1345.test(_1344)){dj.byId("group_code").set("state","Error");misys.dialog.show("ERROR",misys.getLocalization("validateCode"));return false;}}return true;},validateDescription:function(){var regex=reg_exp_validationDesc.value,_1346=dj.byId("description").get("value"),_1347=new RegExp(regex);if(_1346){if(!_1347.test(_1346)){dj.byId("description").set("state","Error");misys.dialog.show("ERROR",misys.getLocalization("validateDesc"));return false;}}return true;},validateLCAvailablelAmount:function(amtId){if(amtId){var amt=amtId.get("value");var _1348,_1349;if((amt<0)||(amt===undefined)){_1348=m.getLocalization("invalidMessage");amtId.set("state","Error");dj.hideTooltip(amtId.domNode);dj.showTooltip(_1348,amtId.domNode,0);amtId.focus();return false;}else{return true;}}return true;},validateSubGroupCode:function(){var regex=reg_exp_validationCode.value,_134a=dj.byId("sub_group_code").get("value"),_134b=new RegExp(regex);if(_134a){if(!_134b.test(_134a)){dj.byId("sub_group_code").set("state","Error");misys.dialog.show("ERROR",misys.getLocalization("validateCode"));return false;}}return true;},validateHighTargetBalances:function(){if(dj.byId("subGrpType").get("value")&&dj.byId("subGrpType").get("value")==="1"){if(dj.byId("high_target")&&dj.byId("low_target")){var _134c=dj.byId("high_target").get("value");var _134d=dj.byId("low_target").get("value");if(_134c<_134d){var _134e=misys.getLocalization("hightargetLesserThanhighTargetError");dj.byId("high_target").set("state","Error");dj.hideTooltip(dj.byId("high_target").domNode);dj.showTooltip(_134e,dj.byId("high_target").domNode,0);return false;}}}return true;},validateLowTargetBalances:function(){if(dj.byId("subGrpType").get("value")&&dj.byId("subGrpType").get("value")==="1"){if(dj.byId("high_target")&&dj.byId("low_target")){var _134f=dj.byId("high_target").get("value");var _1350=dj.byId("low_target").get("value");if(_1350>_134f){var _1351=misys.getLocalization("lowtargetGreaterThanhighTargetError");dj.byId("low_target").set("state","Error");dj.hideTooltip(dj.byId("low_target").domNode);dj.showTooltip(_1351,dj.byId("low_target").domNode,0);return false;}}}return true;},validateSubGrpDescription:function(){var regex=reg_exp_validationDesc.value,_1352=dj.byId("subgrp_description").get("value"),_1353=new RegExp(regex);if(_1352){if(!_1353.test(_1352)){dj.byId("subgrp_description").set("state","Error");misys.dialog.show("ERROR",misys.getLocalization("validateDesc"));return false;}}return true;},checkUploadTemplateNameExists:function(){var name,_1354,_1355,_1356;var _1357=false;if(dj.byId("name")){name=dj.byId("name").get("value");}if(dj.byId("product_code")){_1354=dj.byId("product_code").get("value");}if(dj.byId("sub_product_code")){_1355=dj.byId("sub_product_code").get("value");}if(dj.byId("upload_template_id")){_1356=dj.byId("upload_template_id").get("value");}if(name!==""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/CheckFileUploadTemplateAction"),handleAs:"json",sync:true,content:{name:name,productCode:_1354,subProdCode:_1355,uploadTemplateId:_1356},load:function(_1358,args){_1357=_1358.items.valid;}});}return _1357;},checkNumericOnlyValue:function(){var value=this.get("value");if(value!==""){if(value.match(/^[0-9]+$/)===null){this.invalidMessage=misys.getLocalization("valueShouldBeInteger");this.set("state","Error");dj.hideTooltip(this.domNode);dj.showTooltip(misys.getLocalization("valueShouldBeInteger"),this.domNode,0);return false;}}return true;},validatePeriodPresentationDays:function(){var _1359=dj.byId("period_presentation_days");var _135a=dj.byId("period_presentation_days").get("value");if(typeof _135a==="undefined"){this.invalidMessage=m.getLocalization("valueShouldBeInteger");return false;}else{if(_135a<=0){this.invalidMessage=m.getLocalization("valueShouldBeGreaterThanZero");return false;}}return true;},validateBeneficiaryStatus:function(){var _135b=dj.byId("beneficiary_name")?dj.byId("beneficiary_name").get("value"):"";var _135c=dj.byId("company_id")?dj.byId("company_id").get("value"):"";var _135d=true;if(_135b!==""&&_135c!==""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/ValidateBeneficiaryStatus"),handleAs:"json",sync:true,content:{beneficiary_name:_135b,company_id:_135c},load:function(_135e,args){if(_135e&&_135e.items&&_135e.items.active===false){_135d=false;}else{}},error:function(_135f,args){_135d=false;console.error(" Validating beneficiary status error",_135f);}});}return _135d;},validateLength:function(_1360){var set=true;var _1361=m._config.trade_total_combined_sizeallowed;d.forEach(_1360,function(id){if(id){var _1362=0;var _1363=[id+"_name",id+"_address_line_1",id+"_address_line_2",id+"_dom",id+"_address_line_4"];d.forEach(_1363,function(id){var field=dj.byId(id);if(field){_1362=_1362+(field.get("value")).length;if(_1362>_1361){m._config.onSubmitErrorMsg=m.getLocalization("invalidBankFieldSizeErrorForTrade");set=false;}}});}});return set;},validateDiscountExpDate:function(){if(!this.get("value")){return true;}var _1364=dj.byId("due_date");if(!m.compareDateFields(this,_1364)){this.invalidMessage=m.getLocalization("expiryDateGraterThanDueDateError",[_10c9(this),_10c9(_1364)]);return false;}return true;},validateEmailid:function(){var _1365;if(dj.byId("email")){_1365=dj.byId("email").get("value");}if(_1365!==""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/ValidateEmailAddress"),handleAs:"json",sync:true,content:{email:_1365},load:_10cb});}},validateBaseDateWithCurrentSystemDate:function(){if(!this.get("value")){return true;}var _1366=this.get("value");var days=_10c3(this);if(days>0){this.invalidMessage=m.getLocalization("baseDateGreaterThanSystemDateError",[_10c9(this)]);return false;}return true;},validateMaturityDateWithSystemDate:function(){if(!this.get("value")){return true;}var _1367=this.get("value");var days=_10c3(this);if(days<0){this.invalidMessage=m.getLocalization("maturityDateLessThanSystemDateError",[_10c9(this)]);return false;}return true;},validateOffset:function(_1368){if(_1368==Math.floor(_1368)){return true;}else{return false;}},bofunction:function(){var _1369=dj.byId("bo_comment");if(_1369.get("value").charAt(0)=="-"){this.invalidMessage=m.getLocalization("hyphenError");return false;}if(this.rowCount>=this.maxSize){this.invalidMessage=misys.getLocalization("textareaLinesError",[this.maxSize,this.rowCount+1]);return false;}return true;},getUnitMesureLocalization:function(_136a,item){var value="";if(item){var unity=item.qty_unit_measr_label[0];value=unity;}return value;},validateMandatoryRemarks:function(){var _136b=dj.byId("issuing_bank_abbv_name"),_136c=dj.byId("sub_product_code"),_136d=dj.byId("ft_cur_code"),_136e=dj.byId("applicant_act_cur_code");var valid=false;m.xhrPost({url:misys.getServletURL("/screen/AjaxScreen/action/ValidateMandatoryRemarks"),handleAs:"json",sync:true,content:{bank_name:_136b.get("value"),payment_type:_136c.get("value"),credit_currency:_136d.get("value"),debit_currency:_136e.get("value")},load:function(_136f,args){var a="";switch(_136f.items.StatusCode){case "OK":var _1370=_136f.items.mandatoryIndicator;var _1371=_136f.items.credCur;var _1372=_136f.items.debCur;if(_1370&&_1371&&_1372){if(_1370==="Y"||_1370==="y"){dj.byId("free_format_text").set("required",true);if(document.getElementById("mandatorySpan")==undefined){var _1373=dojo.create("span",{"id":"mandatorySpan","class":"required-field-symbol","innerHTML":"*"});d.parser.parse(_1373);dojo.place(_1373,dojo.byId("free_format_text"),"before");valid=true;}else{a=document.getElementById("mandatorySpan");a.setAttribute("style","display:inline-block");}}}else{dj.byId("free_format_text").set("required",false);if(document.getElementById("mandatorySpan")){a=document.getElementById("mandatorySpan");a.setAttribute("style","display:none");}}break;default:break;}},error:function(_1374,args){console.error(_10b8);console.error(_1374);}});return valid;},MT103DetailsBeneficiary:function(){var _1375=dj.byId("issuing_bank_abbv_name"),_1376=dj.byId("sub_product_code"),_1377=dj.byId("ft_cur_code"),_1378=dj.byId("applicant_act_cur_code");var valid=false;m.xhrPost({url:misys.getServletURL("/screen/AjaxScreen/action/ValidateMandatoryRemarks"),handleAs:"json",sync:true,content:{bank_name:_1375.get("value"),payment_type:_1376.get("value"),credit_currency:_1377.get("value"),debit_currency:_1378.get("value")},load:function(_1379,args){var a="";switch(_1379.items.StatusCode){case "OK":var _137a=_1379.items.mandatoryIndicator;if(_137a){if(_137a==="Y"||_137a==="y"){dj.byId("payment_details_to_beneficiary").set("required",true);m.toggleRequired("payment_details_to_beneficiary",true);}}else{dj.byId("payment_details_to_beneficiary").set("required",false);m.toggleRequired("payment_details_to_beneficiary",false);}break;default:break;}},error:function(_137b,args){console.error(_10b8);console.error(_137b);}});return valid;},validateRemittanceReasonCode:function(){var _137c=dj.byId("issuing_bank_abbv_name"),_137d=dj.byId("ft_cur_code");var valid=false;m.xhrPost({url:misys.getServletURL("/screen/AjaxScreen/action/ValidateRemittanceReasonCode"),handleAs:"json",sync:true,content:{bank_name:_137c.get("value"),bene_currency:_137d.get("value")},load:function(_137e,args){switch(_137e.items.StatusCode){case "OK":var _137f=_137e.items.mandatoryIndicator;valid=true;if(_137f){if(_137f==="Y"||_137f==="y"){m.toggleRequired("remittance_description",true);}}else{m.toggleRequired("remittance_description",false);}break;default:break;}},error:function(_1380,args){console.error(_10b8);console.error(_1380);}});return valid;},MT103ValidCountryCode:function(){var _1381=dj.byId("issuing_bank_abbv_name"),_1382=dj.byId("ft_cur_code"),_1383=dj.byId("cpty_bank_country");if(_1383.get("value")===""){return true;}var valid=false;m.xhrPost({url:misys.getServletURL("/screen/AjaxScreen/action/ValidateCountryCode"),handleAs:"json",sync:true,content:{bank_name:_1381.get("value"),currency_code:_1382.get("value"),country_code:_1383.get("value")},load:function(_1384,args){var a="";switch(_1384.items.StatusCode){case "Mandatory":var _1385=_1384.items.mandatoryIndicator;var _1386=_1384.items.countryCode;valid=true;if(_1385&&_1386){if(_1385==="Y"||_1385==="y"){m.toggleRequired("intermediary_bank_swift_bic_code",true);m.toggleRequired("intermediary_bank_name",true);m.toggleRequired("intermediary_bank_address_line_1",true);m.toggleRequired("intermediary_bank_country",true);}}else{m.toggleRequired("intermediary_bank_swift_bic_code",false);m.toggleRequired("intermediary_bank_name",false);m.toggleRequired("intermediary_bank_address_line_1",false);m.toggleRequired("intermediary_bank_country",false);}break;case "NotMandatory":m.toggleRequired("intermediary_bank_swift_bic_code",false);m.toggleRequired("intermediary_bank_name",false);m.toggleRequired("intermediary_bank_address_line_1",false);m.toggleRequired("intermediary_bank_country",false);break;default:break;}},error:function(_1387,args){console.error(_10b8);console.error(_1387);}});return valid;},MT103Intermediarydetailvalidation:function(){if(!misys._config.mt103_intermediary_details){return true;}var _1388=dj.byId("issuing_bank_abbv_name"),_1389=dj.byId("ft_cur_code"),_138a=dj.byId("intermediary_bank_country"),_138b="";var valid=true;m.xhrPost({url:misys.getServletURL("/screen/AjaxScreen/action/IntermediaryDetailValidation"),handleAs:"json",sync:true,content:{bank_name:_1388.get("value"),currency_code:_1389.get("value"),country_code:_138a.get("value")},load:function(_138c,args){var a="";switch(_138c.items.StatusCode){case "Mandatory":var _138d=_138c.items.mandatoryIndicator;var _138e=_138c.items.countryCode;valid=false;if(_138d&&_138e){if(_138d==="Y"||_138d==="y"){_138b=_138a.value+": is not valid Country Code";_138a.set("state","Error");m.dialog.show("ERROR",_138b);}}else{m.toggleRequired("intermediary_bank_country",false);valid=true;}break;case "NotMandatory":m.toggleRequired("intermediary_bank_country",false);valid=true;break;default:break;}},error:function(_138f,args){console.error(_10b8);console.error(_138f);}});return valid;},_validateCurrencyCode:function(_1390,_1391){var _1392=_1390?_1390.get("value"):"";var _1393=_1391?_1391.get("value"):"";var _1394="";var valid=true;if(_1393!=""){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/ValidateCurrencyValid"),handleAs:"json",sync:true,content:{subproductcode:_1392,transferCurCode:_1393},load:function(_1395,args){var _1396=_1395.isValid;if(!_1396){_1394=m.getLocalization("invalidCurrencyConfigured",[_1391.get("value")]);_1391.set("state","Error");dj.showTooltip(_1394,_1391.domNode,0);valid=false;return valid;}}});}return valid;}});})(dojo,dijit,misys);}if(!dojo._hasResource["dojox.uuid.generateRandomUuid"]){dojo._hasResource["dojox.uuid.generateRandomUuid"]=true;dojo.provide("dojox.uuid.generateRandomUuid");dojox.uuid.generateRandomUuid=function(){var _1397=16;function _1398(){var _1399=Math.floor((Math.random()%1)*Math.pow(2,32));var _139a=_1399.toString(_1397);while(_139a.length<8){_139a="0"+_139a;}return _139a;};var _139b="-";var _139c="4";var _139d="8";var a=_1398();var b=_1398();b=b.substring(0,4)+_139b+_139c+b.substring(5,8);var c=_1398();c=_139d+c.substring(1,4)+_139b+c.substring(4,8);var d=_1398();var _139e=a+_139b+b+_139b+c+d;_139e=_139e.toLowerCase();return _139e;};}if(!dojo._hasResource["misys.grid._ViewManager"]){dojo._hasResource["misys.grid._ViewManager"]=true;dojo.provide("misys.grid._ViewManager");dojo.declare("misys.grid._ViewManager",[dojox.grid._ViewManager],{measureContent:function(){var h=0;this.forEach(function(_139f){var _13a0=0;if(_139f.contentNode.childNodes.length>0){_13a0=_139f.contentNode.childNodes[0].offsetHeight;}h=Math.max(_13a0,h);});return h;}});}if(!dojo._hasResource["misys.grid._View"]){dojo._hasResource["misys.grid._View"]=true;dojo.provide("misys.grid._View");dojo.experimental("misys.grid._View");dojo.declare("misys.grid._View",[dojox.grid._View],{_getHeaderContent:function(_13a1){var ret="";if(_13a1.grid.showMoveOptions&&_13a1.field&&_13a1.field==="actions"){ret=["<div align='center'>"];ret=ret.concat(["<img src='"+misys.getContextualURL("/content/images/pic_arrowdown.gif")+"' alt='Move Down' border='0' type='moveDown'/>"],["&nbsp;"],["<img src='"+misys.getContextualURL("/content/images/pic_arrowup.gif")+"' alt='Move Up' border='0' type='moveUp'/>"],["</div>"]);return ret.join("");}else{var n=_13a1.name||_13a1.grid.getCellName(_13a1);ret=["<div class=\"dojoxGridSortNode"];if(_13a1.index!=_13a1.grid.getSortIndex()){ret.push("\">");}else{ret=ret.concat([" ",_13a1.grid.sortInfo>0?"dojoxGridSortUp":"dojoxGridSortDown","\"><div class=\"dojoxGridArrowButtonChar\">",_13a1.grid.sortInfo>0?"&#9650;":"&#9660;","</div><div class=\"dojoxGridArrowButtonNode\" role=\""+(dojo.isFF<3?"wairole:":"")+"presentation\"></div>"]);}ret=ret.concat([n,"</div>"]);return ret.join("");}}});}if(!dojo._hasResource["misys.grid.DataGrid"]){dojo._hasResource["misys.grid.DataGrid"]=true;dojo.provide("misys.grid.DataGrid");dojo.experimental("misys.grid.DataGrid");dojo.declare("misys.grid.DataGrid",[dojox.grid.DataGrid],{showMoveOptions:true,_deleteGridRecord:"deletegridrecord",startup:function(){this.inherited(arguments);misys.connect(this,"onCellClick",this,this.handleGridAction);},handleGridAction:function(event){if(event.target.tagName==="IMG"&&event.target.attributes.type){var _13a2=event.target.attributes.type.value.toLowerCase();if(_13a2==="edit"){this.onEdit(event);}else{if(_13a2==="remove"){this.onDelete(event);}else{if(_13a2==="view"){this.onView(event);}else{if(_13a2==="moveup"){this._moveSelectedRowsUp(event.grid);}else{if(_13a2==="movedown"){this._moveSelectedRowsDown(event.grid);}}}}}}},onEdit:function(event){var store=this.store;var id;store.fetch({query:{store_id:"*"},sort:this.getSortProps(),onComplete:dojo.hitch(this,function(items,_13a3){dojo.forEach(items,function(item,index){if(index===event.rowIndex){id=item.store_id[0];}},this);})});if(event.grid.gridMultipleItemsWidget.name=="amendments"){store.fetch({query:{store_id:id},onComplete:dojo.hitch(this.gridMultipleItemsWidget,"editGridData")});}else{store.fetch({query:{store_id:id},onComplete:dojo.hitch(this.gridMultipleItemsWidget,"openDialogFromExistingItem")});}},onView:function(event){var store=this.store;var id;store.fetch({query:{store_id:"*"},sort:this.getSortProps(),onComplete:dojo.hitch(this,function(items,_13a4){dojo.forEach(items,function(item,index){if(index===event.rowIndex){id=item.store_id[0];}},this);})});store.fetch({query:{store_id:id},onComplete:dojo.hitch(this.gridMultipleItemsWidget,"openDialogFromExistingItem")});},onDelete:function(event){var that=this;var _13a5=function(){var items=that.selection.getSelected();if(items.length){dojo.forEach(items,function(_13a6){if(_13a6!==null){that.selection.setSelected(_13a6,false);}},that);}that.selection.setSelected(event.rowIndex,true);items=that.selection.getSelected();if(items.length){dojo.forEach(items,function(_13a7){if(_13a7!==null){that.store.deleteItem(_13a7);}},that);that.store.save();}items=that.selection.getSelected();if(items.length){dojo.forEach(items,function(_13a8){if(_13a8!==null){that.selection.setSelected(_13a8,false);}},that);}setTimeout(dojo.hitch(that.gridMultipleItemsWidget,"renderSections"),100);dojo.publish(that._deleteGridRecord);if(event.grid.gridMultipleItemsWidget.name=="amendments"){that.gridMultipleItemsWidget.deleteData();}};misys.dialog.show("CONFIRMATION",misys.getLocalization("confirmDeletionGridRecord"),"",_13a5);},buildViews:function(){for(var i=0,vs;(vs=this.layout.structure[i]);i++){this.createView("misys.grid._View",i).setStructure(vs);}this.scroller.setContentNodes(this.views.getContentNodes());},createViews:function(){this.views=new misys.grid._ViewManager(this);this.views.createView=dojo.hitch(this,"createView");},postresize:function(){if(this._autoHeight){setTimeout(dojo.hitch(this,"_postresize"),120);}},_postresize:function(){if(this.viewsNode){var size=Math.max(this.views.measureContent())+"px";dojo.attr(this.viewsNode,"style",{height:size});if(this.views&&this.views.views&&this.views.views[0].contentNode){dojo.attr(this.views.views[0].contentNode,"style",{height:size});}var _13a9=0;var _13aa=(this.viewsHeaderNode.childNodes?this.viewsHeaderNode.childNodes:[]);var _13ab=new RegExp("/*dojoxGridHeader*");for(var i=0,len=_13aa.length;i<len;i++){var child=_13aa[i];if(_13ab.test(dojo.attr(child,"classname"))){dojo.attr(this.viewsHeaderNode,"style",{height:child.clientHeight+"px"});break;}}}},onHeaderCellClick:function(event){var _13ac=(event.target.attributes.type)?event.target.attributes.type.value.toLowerCase():"";if(_13ac==="moveup"){this._moveSelectedRowsUp(event.grid);}else{if(_13ac==="movedown"){this._moveSelectedRowsDown(event.grid);}else{this.inherited(arguments);}}},_clone:function(obj){if(obj==null||typeof (obj)!=="object"){return obj;}var temp=new obj.constructor();for(var key in obj){if(obj.hasOwnProperty(key)){if(key.match("^_")!="_"){temp[key]=this._clone(obj[key]);}}}return temp;},_moveSelectedRowsUp:function(grid){if(grid.selection.selected.length>0&&!grid.selection.selected[0]){var _13ad=[];for(var i=0,len=grid.rowCount;i<len;i++){var _13ae=this._clone(grid.getItem(i));if(grid.selection.selected[i+1]){var j=i+1;while(j<len&&grid.selection.selected[j]){var item=this._clone(grid.getItem(j));_13ad.push(item);j++;}i=j-1;}_13ad.push(_13ae);}var _13af,_13b0;for(var m=0,mlen=grid.rowCount;m<mlen;m++){var _13b1=grid.getItem(m).store_id;_13b1=dojo.isArray(_13b1)?_13b1[0]:_13b1;grid.store.fetch({query:{store_id:_13b1},onComplete:dojo.hitch(this,function(_13b2,m,items,_13b3){for(var _13b4 in items[0]){if(items[0].hasOwnProperty(_13b4)){_13af=_13b4.match("^_");_13b0=(dojo.isArray(_13af)?_13af[0]:_13af)==="_";if(_13b4!=="store_id"&&!_13b0){var value=_13b2[m][_13b4];value=dojo.isArray(value)?value[0]:value;grid.store.setValue(items[0],_13b4,value);}}}},_13ad,m)});}for(var k=0,klen=grid.rowCount-1;k<klen;k++){grid.selection.selected[k]=grid.selection.selected[k+1];}}for(var l=0;l<grid.rowCount;l++){grid.selection.selected[l]=undefined;}},_moveSelectedRowsDown:function(grid){if(grid.selection.selected.length>0&&!grid.selection.selected[grid.rowCount-1]){var _13b5=[];for(var i=0,len=grid.rowCount;i<len;i++){if(grid.selection.selected[i]){var j=i;while(j<len&&grid.selection.selected[j]){j++;}_13b5.push(this._clone(grid.getItem(j)));for(var k=i;k<j;k++){var item=this._clone(grid.getItem(k));_13b5.push(item);}i=j;}else{_13b5.push(this._clone(grid.getItem(i)));}}var _13b6,_13b7;for(var n=0,nlen=grid.rowCount;n<nlen;n++){var _13b8=grid.getItem(n).store_id;_13b8=dojo.isArray(_13b8)?_13b8[0]:_13b8;grid.store.fetch({query:{store_id:_13b8},onComplete:dojo.hitch(this,function(_13b9,n,items,_13ba){for(var _13bb in items[0]){if(items[0].hasOwnProperty(_13bb)){_13b6=_13bb.match("^_");_13b7=(dojo.isArray(_13b6)?_13b6[0]:_13b6)==="_";if(_13bb!=="store_id"&&!_13b7){var value=_13b9[n][_13bb];value=dojo.isArray(value)?value[0]:value;grid.store.setValue(items[0],_13bb,value);}}}},_13b5,n)});}for(var m=grid.rowCount-1;m>=0;m--){grid.selection.selected[m]=grid.selection.selected[m-1];}}for(var l=0;l<grid.rowCount;l++){grid.selection.selected[l]=undefined;}}});}if(!dojo._hasResource["misys.grid.GridMultipleItems"]){dojo._hasResource["misys.grid.GridMultipleItems"]=true;dojo.provide("misys.grid.GridMultipleItems");dojo.experimental("misys.grid.GridMultipleItems");dojo.declare("misys.grid.GridMultipleItems",[dijit._Widget,dijit._Templated,dijit._Container],{overrideDisplaymode:"edit",widgetsInTemplate:true,store:null,gridId:"",handle:[],name:"",grid:null,dialogId:"",dialog:null,dialogClassName:null,dialogAddItemTitle:"",dialogUpdateItemTitle:"",dialogViewItemTitle:"",requiredField:[],xmlTagName:"",xmlSubTagName:"",noItemLabel:"null",addButtonLabel:"null",openDialogFromExistingItemInitFunction:null,data:{},propertiesMap:{},typeMap:{},gridColumns:[],layout:[],headers:[],dataList:[],_itemFields:null,showMoveOptions:false,mandatoryFields:[],is_valid:"Y",state:"",getMandatoryProperties:function(item){return (this.mandatoryFields?this.mandatoryFields:[]);},buildRendering:function(){if(!this.templateString){if(this.attachmentGroup&&this.attachmentGroup!=""){this.templateString=dojo.byId("file-attachment-template"+this.attachmentGroup).innerHTML;}else{if(dojo.byId("file-attachment-template")){this.templateString=dojo.byId("file-attachment-template").innerHTML;}}}this.inherited(arguments);},startup:function(){if(this.isWidgetToBeDestroyed(this.id)){return;}if(this._started){return;}this.name=this.id;if(this.dataList.length===0){this.dataList=this.createJsonItem();}else{dojo.forEach(this.dataList,function(item){var _13bc=this.checkMandatoryProperties(item);item["is_valid"]=_13bc?"Y":"N";},this);}this.inherited(arguments);for(var i=0,len=this.headers.length;i<len;i++){this.layout[i].name=this.headers[i];}if(this.noItemLabel!=="null"&&this.noItemLabelNode){this.noItemLabelNode.innerHTML=this.noItemLabel;}if(this.overrideDisplaymode==="view"||this.overrideDisplaymode==="editonly"){if(this.addButtonNode){this.addButtonNode.set("style","display:none");}}else{if(this.addButtonLabel!=="null"&&this.addButtonNode){this.addButtonNode.set("label",this.addButtonLabel);}}this.gridColumns.push("store_id");this.gridColumns.push("is_valid");if(this.dataList.length>0){this.createDataStoreFromDataList();this.createDataGrid();}this.renderSections();this.destroyWidgets();this.collectRequiredField();this.setDialogFieldUnrequired();misys.connect(this.dialog,"onHide",this,"setDialogFieldUnrequired");misys.connect(this.dialog,"onShow",this,"setDialogFieldRequired");dojo.addClass(this.dialog.domNode,"gridMultipleItems_"+this.overrideDisplaymode);},createDataStoreFromDataList:function(){this.data.items=this.buildStoreItem(this.dataList);this.store=new dojo.data.ItemFileWriteStore({data:this.data,typeMap:this.typeMap});},createAmendDataStoreFromText:function(_13bd){if(misys._config.editedItemIndex!=-1&&misys._config.editedItemIndex!=undefined&&this.data.items.length!=0){var _13be=this.data.items;var _13bf=[];var _13c0=0;for(var itr=0;itr<this.data.items.length+1;itr++){if(itr===misys._config.editedItemIndex){_13bf.push(dojo.mixin({store_id:dojox.uuid.generateRandomUuid()},_13bd));}else{_13bf.push(dojo.mixin({store_id:dojox.uuid.generateRandomUuid()},_13be[_13c0++]));}}this.data.items=_13bf;}else{this.data.items.push(dojo.mixin({store_id:dojox.uuid.generateRandomUuid()},_13bd));}this.store=new dojo.data.ItemFileWriteStore({data:this.data,typeMap:this.typeMap});misys._config.editedItemIndex=-1;},buildStoreItem:function(data){var items=[];for(var i=0,rows=this.dataList.length;i<rows;i++){var _13c1=data[i];for(var _13c2 in _13c1){if(dojo.isArray(_13c1[_13c2])){_13c1[_13c2]=this.buildStoreItem(_13c1[_13c2]);}}items.push(dojo.mixin({store_id:dojox.uuid.generateRandomUuid()},_13c1));}return items;},updateGridFromDataList:function(){for(var i=0,rows=this.dataList.length;i<rows;i++){var item=this.dataList[i%l];if(!item.store_id){item=dojo.mixin({store_id:dojox.uuid.generateRandomUuid()},item);}this.grid.store.fetch({query:{store_id:item.store_id},onComplete:dojo.hitch(this,function(items,_13c3){if(items.length<=0){this.grid.store.newItem(item);}})});}this.grid.store.save();this.renderAll();},onGridCreate:function(){},createDataGrid:function(){var _13c4=this.gridId;if(!_13c4){_13c4="grid-"+(this.xmlTagName?this.xmlTagName+"-":"")+dojox.uuid.generateRandomUuid();}this.grid=new misys.grid.DataGrid({jsId:_13c4,id:_13c4,store:this.store,structure:this.layout,autoHeight:true,selectionMode:"multiple",columnReordering:true,autoWidth:true,rowsPerpage:1000,initialWidth:"100%",canSort:function(){return true;},showMoveOptions:this.showMoveOptions},document.createElement("div"));this.grid.gridMultipleItemsWidget=this;misys.connect(this.grid,"onStyleRow",dojo.hitch(this,function(row){var item=this.grid.getItem(row.index);if(item&&item.hasOwnProperty("is_valid")){var _13c5=dojo.isArray(item.is_valid)?item.is_valid[0]:item.is_valid;if(_13c5&&_13c5!=="Y"){row.customStyles+="background-color: #F9F7BA !important";this.state="Error";}}this.grid.focus.styleRow(row);this.grid.edit.styleRow(row);}));this.addChild(this.grid);this.onGridCreate();},renderSections:function(){try{if(this.itemsNode){var _13c6=(this.grid&&this.grid.rowCount>0);dojo.attr(this.itemsNode,"style",{display:(_13c6?"block":"none")});if(document.getElementById("reporting_popup")){dojo.attr(this.itemsNode,"style",{width:"100%"});}}if(this.noItemLabelNode){var _13c7=(this.grid&&this.grid.rowCount===0)||(!this.grid);dojo.attr(this.noItemLabelNode,"style",{display:(_13c7?"block":"none")});}}catch(err){}},openDialogFromExistingItem:function(items,_13c8){misys.dialog.isActive=false;var item=items[0];this.checkDialog();if(this.overrideDisplaymode!=="view"){this.dialog.set("title",this.dialogUpdateItemTitle);}else{var _13c9=this.dialogViewItemTitle||this.dialogUpdateItemTitle;this.dialog.set("title",_13c9);}this.resetDialog();this.dialog.gridMultipleItemsWidget=this;this.dialog.execute=this.dialogExecute;this.dialog.gridMultipleItemsWidget=this;this.dialog.storeId=(dojo.isArray(item.store_id)?item.store_id[0]:item.store_id);var _13ca=this.dialog.getChildren();for(var _13cb in item){var _13cc=(this.propertiesMap[_13cb]&&this.propertiesMap[_13cb]._fieldName?this.propertiesMap[_13cb]._fieldName:_13cb);if(_13cb!=="store_id"){dojo.some(_13ca,function(_13cd){if(_13cd.id===_13cc||_13cd.name===_13cc){var value=item[_13cb];value=dojo.isArray(value)?value[0]:value;if(this.overrideDisplaymode==="view"){var _13ce=(!value&&value!==0)?"none":"block";if(_13cd&&_13cd.id&&dojo.byId(_13cd.id+"_row")){dojo.style(_13cd.id+"_row","display",_13ce);}}if(_13cd.isInstanceOf(misys.grid.GridMultipleItems)){if(_13cd.grid){_13cd.grid.destroy();}if(dojo.isObject(value)&&value._values&&dojo.isArray(value._values)){_13cd.dataList=dojo.clone(value._values);_13cd.createDataStoreFromDataList();_13cd.createDataGrid();var key=item.store_id+"_"+_13cb;if(this.handle&&!this.handle[key]){this.handle[key]=misys.connect(this.dialog,"onShow",_13cd,"renderAll");}}}else{var _13cf=_13cd.declaredClass;switch(_13cf){case "dijit.form.DateTextBox":_13cd.set("displayedValue",value);break;case "dijit.form.CheckBox":_13cd.set("checked",value==="Y"?true:false);break;case "dijit.form.RadioButton":var _13d0=dojo.query("[name='"+_13cd.name+"']",this.dialog.domNode);dojo.some(_13d0,function(_13d1){var _13d2=dijit.byNode(_13d1.parentNode);if(_13d2.params.value===value){_13d2.set("checked",true);return true;}});break;case "dijit.form.NumberTextBox":if(value!=null&&value!==""&&value!=="NaN"){_13cd.set("value",value,false);}break;case "misys.form.MultiSelect":_13cd.domNode.innerHTML=[];if(value!==""){var arr=value.split(",");for(i=0;i<arr.length;i++){var op=dojo.create("option");op.innerHTML=arr[i];op.value=arr[i];_13cd.domNode.appendChild(op);}}break;default:_13cd.set("value",value);break;}if(this.overrideDisplaymode==="view"){_13cd.set("readOnly",true);}return true;}}return false;},this);}}if(item&&item.product_name&&item.product_name[0]){item.product_name[0]=dojox.html.entities.encode(item.product_name[0],dojox.html.entities.html);}if(item&&item.cust_ref_id&&item.cust_ref_id[0]){item.cust_ref_id[0]=dojox.html.entities.encode(item.cust_ref_id[0],dojox.html.entities.html);}if(item&&item.other_type&&item.other_type[0]){item.other_type[0]=dojox.html.entities.encode(item.other_type[0],dojox.html.entities.html);}if(this.openDialogFromExistingItemInitFunction!=null){this.openDialogFromExistingItemInitFunction(item);}this.dialog.show();setTimeout(dojo.hitch(this,"activateDialog"),500);if(item.hasOwnProperty("is_valid")){var _13d3=(dojo.isArray(item.is_valid))?item.is_valid[0]:item.is_valid;if(_13d3!=="Y"){this.validateDialog(true);}}},editGridData:function(items,_13d4){var _13d5=dojox.html.entities.decode(items[0].content[0],dojox.html.entities.html);var _13d6=function(){var i=0;dijit.byId("narrative_description_goods_popup").set("disabled",false);if(misys._config.codeword_enabled==true){if(items[0].verb[0]=="REPALL"){dijit.byId("adr_3").set("disabled",false);dijit.byId("adr_3").set("value","REPALL");dijit.byId("adr_1").set("disabled",false);dijit.byId("adr_2").set("disabled",false);dijit.byId("narrative_description_goods_popup").set("value","/REPALL/"+_13d5);}if(items[0].verb[0]=="DELETE"){dijit.byId("adr_2").set("disabled",false);dijit.byId("adr_2").set("value","DELETE");dijit.byId("adr_3").set("disabled",true);dijit.byId("narrative_description_goods_popup").set("value","/DELETE/"+_13d5);}if(items[0].verb[0]=="ADD"){dijit.byId("adr_1").set("disabled",false);dijit.byId("adr_1").set("value","ADD");dijit.byId("adr_3").set("disabled",true);dijit.byId("narrative_description_goods_popup").set("value","/ADD/"+_13d5);}}else{dijit.byId("narrative_description_goods_popup").set("value",_13d5);}dijit.byId("amendments").grid.store.deleteItem(items[0]);};misys.dialog.show("CONFIRMATION",misys.getLocalization("confirmEditGridRecord"),"",_13d6);},activateDialog:function(){misys.dialog.isActive=true;},cloneArray:function(arr){var arr1=[];for(var _13d7 in arr){arr1[_13d7]=arr[_13d7];}return arr1;},checkDialog:function(){if(!this.dialog){var _13d8=dijit.byId(this.dialogId);if(_13d8){this.dialog=_13d8;}else{var id=this.dialogId?this.dialogId:"dialog-"+(xmlTag?xmlTag+"-":"")+dojox.uuid.generateRandomUuid();var _13d9=this.dialogClassName?this.dialogClassName:"misys.widget.Dialog";this.dialog=dojo.eval("new "+_13d9+"({}, dojo.byId('"+id+"'))");this.dialog.set("refocus",false);this.dialog.set("draggable",false);dojo.addClass(this.dialog.domNode,"multipleItemDialog");this.dialog.startup();document.body.appendChild(this.dialog.domNode);}}return this.dialog;},dialogExecute:function(_13da){setTimeout(dojo.hitch(this.gridMultipleItemsWidget,"updateData"),500);},performValidation:function(){if(this.validateDialog()){this.dialog._onSubmit();}},addItem:function(event){misys.dialog.isActive=false;this.checkDialog();this.dialog.set("title",this.dialogAddItemTitle);this.resetDialog();var _13db=this.dialog.getChildren();dojo.some(_13db,function(_13dc){if(_13dc.grid){_13dc.renderSections();}});this.dialog.gridMultipleItemsWidget=this;this.dialog.execute=this.dialogExecute;this.dialog.show();if(this._itemFields&&this._itemFields["product_name"]){this._itemFields["product_name"]=dojox.html.entities.encode(this._itemFields["product_name"],dojox.html.entities.html);}if(this._itemFields&&this._itemFields["cust_ref_id"]){this._itemFields["cust_ref_id"]=dojox.html.entities.encode(this._itemFields["cust_ref_id"],dojox.html.entities.html);}if(this._itemFields&&this._itemFields["other_type"]){this._itemFields["other_type"]=dojox.html.entities.encode(this._itemFields["other_type"],dojox.html.entities.html);}if(dojo.byId("pooling_enabled_row")){dojo.style(dojo.byId("pooling_enabled_row"),"display","none");}if(dojo.byId("sweeping_enabled_row")){dojo.style(dojo.byId("sweeping_enabled_row"),"display","none");}if(dojo.byId("charge_account_for_liq_row")){dojo.style(dojo.byId("charge_account_for_liq_row"),"display","none");}setTimeout(dojo.hitch(this,"activateDialog"),500);},setDialogFieldRequired:function(){misys.toggleFields(true,null,this.requiredField,true,true);},setDialogFieldUnrequired:function(){misys.toggleFields(false,null,this.requiredField,true,true);},resetDialog:function(){var _13dd=this.dialog.getChildren();dojo.forEach(_13dd,function(_13de){var _13df=_13de.declaredClass;switch(_13df){case "dijit.form.RadioButton":_13de.set("checked",false);break;case "dijit.form.CheckBox":_13de.set("checked",false);break;case "dijit.form.DateTextBox":_13de.set("value",null);break;default:if(_13de.get("type")==="hidden"){break;}_13de.set("value","");_13de.state="";if(_13de._setStateClass){_13de._setStateClass();}break;}_13de._hasBeenBlurred=false;if(_13de.grid&&_13de.grid.declaredClass==="misys.grid.DataGrid"){_13de.clear();}});if(this.dialog.gridMultipleItemsWidget){this.dialog.gridMultipleItemsWidget=null;}if(this.dialog.storeId){this.dialog.storeId=null;}for(elm in this.handle){dojo.disconnect(this.handle[elm]);}this.handle=[];},_retrieveItemFields:function(){var _13e0=this.dialog.getChildren();var _13e1={};for(var i=0,len=this.gridColumns.length;i<len;i++){var _13e2=this.gridColumns[i];var _13e3=(this.propertiesMap[_13e2]&&this.propertiesMap[_13e2]._fieldName?this.propertiesMap[_13e2]._fieldName:_13e2);_13e1=this._retrieveWidgetsValues(_13e0,_13e2,_13e3,_13e1);}return _13e1;},_retrieveWidgetsValues:function(_13e4,_13e5,_13e6,_13e7){dojo.some(_13e4,function(_13e8){if(_13e8.id===_13e6||_13e8.name===_13e6){var value="";var _13e9=_13e8.declaredClass;if(_13e8.isInstanceOf(misys.grid.GridMultipleItems)){value=this._extractJSON(_13e8);if(value._values.is_valid&&value._values.is_valid==="N"){_13e7.is_valid="N";}}else{switch(_13e9){case "dijit.form.DateTextBox":value=_13e8.get("displayedValue");break;case "dijit.form.CheckBox":value=_13e8.get("checked")===true?"Y":"N";break;case "dijit.form.RadioButton":var _13ea=dojo.query("[name='"+_13e8.name+"']",this.dialog.domNode);dojo.some(_13ea,function(_13eb){var _13ec=dijit.byNode(_13eb.parentNode);var _13ed=_13ec.get("checked");if(_13ed){value=_13ec.params.value;return true;}});break;case "dijit.form.NumberTextBox":undefined;value=isNaN(_13e8.get("value"))?"":_13e8.get("value");break;case "misys.form.PercentNumberTextBox":undefined;value=isNaN(_13e8.get("value"))?"":_13e8.get("value");break;case "misys.form.SpreadTextBox":undefined;value=isNaN(_13e8.get("value"))?"":_13e8.get("value");break;case "misys.form.CurrencyTextBox":undefined;value=_13e8.get("displayedValue");break;default:value=_13e8.get("value");value+="";break;}}if(value==null){value="";}_13e7[_13e5]=value;return true;}else{if(_13e8.declaredClass==="dijit.form.Form"){var _13ee=_13e8.getChildren();_13e7=this._retrieveWidgetsValues(_13ee,_13e5,_13e6,_13e7);}}return false;},this);return _13e7;},_extractJSON:function(_13ef){var type=_13ef.declaredClass;var json={_type:type,_values:[]};if(_13ef&&_13ef.grid&&_13ef.grid.store){_13ef.store.fetch({query:{store_id:"*"},onComplete:function(items,_13f0){dojo.forEach(items,function(item){json._values.push(_13ef._cloneSingleItem(item));});}});}return json;},_retrieveGridData:function(_13f1,_13f2){dojo.forEach(_13f1,function(_13f3){var _13f4=_13f3.declaredClass;if(_13f3.grid){var _13f5=[];_13f3.store.fetch({query:{store_id:"*"},onComplete:dojo.hitch(this,function(items,_13f6){dojo.forEach(items,function(item){var _13f7=_13f3._cloneSingleItem(item);_13f5.push(_13f7);});})});_13f2[_13f4]=_13f5;}else{if(_13f3.declaredClass==="dijit.form.Form"){var _13f8=_13f3.getChildren();_13f2=this._retrieveGridData(_13f8,_13f2);}}},this);return _13f2;},_cloneMultipleItems:function(items){var _13f9=[];dojo.forEach(items,function(item){var _13fa=dojo.isArray(item);item=dojo.isArray(item)?item[0]:item;var _13fb={};for(var _13fc in item){if(dojo.some(this.gridColumns,function(_13fd){return _13fd==_13fc;})){if(_13fc.match("^misys.openaccount.widget.")=="misys.openaccount.widget."){var _13fe=dojo.eval("new "+_13fc+"()");var _13ff=_13fe._cloneItem(item[_13fc]);_13fb[_13fc]=_13ff;}else{if(_13fc.match("^_")!=="_"){_13fb[_13fc]=dojo.isArray(item[_13fc])?item[_13fc][0]:item[_13fc];}}}}_13f9.push(_13fb);},this);return _13f9;},_cloneSingleItem:function(item){var _1400=dojo.isArray(item);item=dojo.isArray(item)?item[0]:item;var _1401={};for(var _1402 in item){if(dojo.some(this.gridColumns,function(_1403){return _1403==_1402;})){if(_1402.match("^_")!=="_"){_1401[_1402]=dojo.isArray(item[_1402])?item[_1402][0]:item[_1402];}}}return _1400?[_1401]:_1401;},_cloneItemWithoutStoreId:function(item){var _1404=dojo.isArray(item);item=dojo.isArray(item)?item[0]:item;var _1405={};for(var _1406 in item){if(dojo.some(this.gridColumns,function(_1407){return _1407==_1406;})){if(_1406.match("^misys.openaccount.widget.")=="misys.openaccount.widget."){var _1408=dojo.eval("new "+_1406+"()");var _1409=_1408._cloneItem(item[_1406]);_1405[_1406]=_1409;}else{if(_1406!=="store_id"){if(_1406.match("^_")!=="_"){_1405[_1406]=dojo.isArray(item[_1406])?item[_1406][0]:item[_1406];}}}}}return _1404?[_1405]:_1405;},updateData:function(){var _140a=this.dialog.storeId;this._itemFields=this._retrieveItemFields();this._itemFields["store_id"]=(_140a!=null?_140a:dojox.uuid.generateRandomUuid());if(this._itemFields&&this._itemFields["product_name"]){this._itemFields["product_name"]=dojox.html.entities.encode(this._itemFields["product_name"],dojox.html.entities.html);}if(this._itemFields&&this._itemFields["cust_ref_id"]){this._itemFields["cust_ref_id"]=dojox.html.entities.encode(this._itemFields["cust_ref_id"],dojox.html.entities.html);}if(this._itemFields&&this._itemFields["other_type"]){this._itemFields["other_type"]=dojox.html.entities.encode(this._itemFields["other_type"],dojox.html.entities.html);}var _140b=this.checkMandatoryProperties(this._itemFields);var _140c=this.checkSubItemsValidity();this._itemFields["is_valid"]=_140b&&_140c?"Y":"N";dojo.attr(this.itemsNode,"style",{display:"block"});dojo.attr(this.noItemLabelNode,"style",{display:"none"});if(this.grid){this.grid.store.fetch({query:{store_id:_140a},onComplete:dojo.hitch(this,function(items,_140d){if(items.length>0){var item=items[0];for(var _140e in this._itemFields){var value=this._itemFields[_140e];if((value!=null&&value!=undefined)&&_140e!="store_id"){this.grid.store.setValue(item,_140e,value);}}}else{this.grid.store.newItem(this._itemFields);}})});var items=this.grid.selection.getSelected();if(items.length){dojo.forEach(items,function(_140f){if(_140f!==null){this.grid.selection.setSelected(_140f,false);}},this);}}else{var _1410=[this._itemFields];var data={identifier:"store_id",label:"store_id",items:_1410};this.store=new dojo.data.ItemFileWriteStore({data:data,typeMap:this.typeMap});this.createDataGrid();}this.grid.store.save();this.grid.render();},createDataStoreFromNewItemCommand:function(_1411){dojo.eval("this.data.items = [{store_id: '0', "+_1411+"}]");this.store=new dojo.data.ItemFileWriteStore({data:this.data});},clear:function(){if(this.grid&&this.grid.store){this.grid.store.fetch({query:{store_id:"*"},onComplete:dojo.hitch(this,function(items,_1412){dojo.forEach(items,function(item){this.grid.store.deleteItem(item);},this);})});this.grid.store.save();var that=this;setTimeout(function(){that.renderSections();that.grid.render();},200);}},renderAll:function(){this.renderSections();if(this.grid){this.grid.render();}},createItem:function(){if(this.hasChildren&&this.hasChildren()){var items=[];dojo.forEach(this.getChildren(),function(child){if(child.createItem){items.push(child.createItem());}},this);var item={};item[this.declaredClass]=items;return item;}return null;},toXML:function(){var xml=[];if(this.xmlTagName){xml.push("<",this.xmlTagName,">");}if(this.grid){this.grid.store.fetch({query:{store_id:"*"},onComplete:dojo.hitch(this,function(items,_1413){xml.push(this.itemToXML(items,this.xmlSubTagName));})});}if(this.xmlTagName){xml.push("</",this.xmlTagName,">");}return xml.join("");},itemToXML:function(items,_1414){var xml=[];dojo.forEach(items,function(item){if(item){if(_1414){xml.push("<",_1414,">");}for(var _1415 in item){var value=dojo.isArray(item[_1415])?item[_1415][0]:item[_1415];if(dojo.isObject(value)&&value._type){var _1416=value._type;var clazz=dojo.eval(_1416);var _1417=new clazz({});xml.push("<",_1417.xmlTagName,">");if(value._values){xml.push(this.itemToXML(value._values,_1417.xmlSubTagName,xml));}else{if(value._value){xml.push(this.itemToXML(value._value,_1417.xmlSubTagName,xml));}}xml.push("</",_1417.xmlTagName,">");}else{if(_1415!="store_id"&&_1415.match("^_")!="_"){value=dojo.isArray(item[_1415])?item[_1415][0]:item[_1415];value+="";xml.push("<",_1415,">",dojox.html.entities.encode(value,dojox.html.entities.html),"</",_1415,">");}}}if(_1414){xml.push("</",_1414,">");}}},this);return xml.join("");},createItemsFromJson:function(_1418){var item;myData=dojo.fromJson(_1418);this.dataList=[];for(item in myData.items){if(myData.items[item].ref_id){this.dataList.push(myData.items[item]);}}if(this.dataList.length>0){this.createDataStoreFromDataList();this.createDataGrid();}},createJsonItem:function(){var _1419=[];if(this.hasChildren&&this.hasChildren()){dojo.forEach(this.getChildren(),function(child){if(child.createJsonItem){var _141a=this.getMandatoryProperties(child);var item=child.createJsonItem(this.propertiesMap,_141a);_1419.push(item);if(this.get("is_valid")!=="N"){this.set("is_valid",item.is_valid?item.is_valid:"Y");}misys._widgetsToDestroy=misys._widgetsToDestroy||[];misys._widgetsToDestroy.push(child.id);}},this);}return _1419;},isWidgetToBeDestroyed:function(_141b){var _141c=false;if(misys._widgetsToDestroy){dojo.some(misys._widgetsToDestroy,function(_141d){if(_141d===_141b.id){_141c=true;return false;}});}return _141c;},destroyWidgets:function(){if(misys._widgetsToDestroy){dojo.forEach(misys._widgetsToDestroy,function(_141e){if(dijit.byId(_141e)){dijit.byId(_141e).destroyRecursive();}});}},validate:function(){if(this.store){var _141f=dojo.some(this.store._arrayOfAllItems,function(item){if(item&&item.is_valid){return item.is_valid[0]!=="Y";}return false;});return !_141f;}else{if(this.is_valid){return (this.is_valid==="Y");}}return true;},validateDialog:function(_1420){var _1421=true,_1422=false,_1423=this.dialog.getChildren();if(!_1420){var _1424=dojo.every(_1423,function(w){return (w.disabled||!w.validate||w.validate());});this.is_valid=(_1424)?"Y":"N";this.state=(_1424)?"":"Error";_1421=true;}else{dojo.some(_1423,function(_1425){_1425._hasBeenBlurred=true;var valid=_1425.disabled||!_1425.validate||_1425.validate();if(!valid&&!_1422){if(_1425.hasOwnProperty("parentTab")){dijit.byId(_1425.get("tabContainer")).selectChild(_1425.get("parentTab"));}dojo.window.scrollIntoView(_1425.containerNode||_1425.domNode);if(_1425.focus){_1425.focus();}_1422=true;}if(!valid){_1421=false;}});}return _1421;},collectRequiredField:function(){this.checkDialog();var _1426=this.dialog.getChildren();var _1427=[];dojo.some(_1426,function(_1428){if(_1428.required){_1427.push(_1428.id);}});this.requiredField=_1427;},checkMandatoryProperties:function(item){var _1429=this.getMandatoryProperties(item);var _142a=dojo.some(_1429,dojo.hitch(this,function(_142b){var value=item[_142b];if(typeof value!=="undefined"){value=dojo.isArray(value)?value[0]:value;return (value==null||value==="");}}));return !_142a;},checkSubItemsValidity:function(){for(var _142c in this._itemFields){var value=this._itemFields[_142c];if(value._type&&value._values){var _142d=dojo.some(value._values,dojo.hitch(this,function(item){if(item.is_valid){var _142e=dojo.isArray(value)?item.is_valid[0]:item.is_valid;return (_142e==="N");}return false;}));if(_142d){return false;}}}return true;}});}if(!dojo._hasResource["misys.product.widget.AttachmentFiles"]){dojo._hasResource["misys.product.widget.AttachmentFiles"]=true;dojo.provide("misys.product.widget.AttachmentFiles");dojo.experimental("misys.product.widget.AttachmentFiles");dojo.declare("misys.product.widget.AttachmentFiles",[misys.grid.GridMultipleItems],{data:{identifier:"store_id",label:"store_id",items:[]},templatePath:null,templateString:"",dialogId:"file-attachment-dialog-template",xmlTagName:"attachments",xmlSubTagName:"attachment",attachmentGroup:"",dialogOKCallback:"",showStatusColumn:"",viewMode:"edit",gridColumns:["attachment_id","file_type","file_title","file_name","file_status","file_access_dttm","file_description","fileact"],propertiesMap:{},maxFiles:0,fileActVisible:false,addItem:function(event){var that=this;var _142f=false;if(that.grid&&that.grid.store&&that.maxFiles!==0&&misys._config.isCustUser){that.grid.store.fetch({onBegin:function(total){if(total<that.maxFiles){_142f=true;}else{misys.dialog.show("ERROR",misys.getLocalization("maxFileUploadReached"));}}});}else{_142f=true;}if(_142f){that.inherited(arguments);dojo.forEach(dijit.byId("sendfiles"+this.attachmentGroup).getChildren(),function(_1430){if(_1430.name!="attachment-type"){_1430.set("value","");_1430.set("state","");}else{_1430.set("value",dijit.byId("attachment-type").get("_resetValue"));}});}},layout:[],dialogExecute:function(_1431){setTimeout(dojo.hitch(this.gridMultipleItemsWidget,"updateData"),500);var _1432=this.gridMultipleItemsWidget.dialogOKCallback;setTimeout(function(){dojo.eval(_1432);},600);},startup:function(){if(this._started){return;}var _1433=this.attachmentGroup;if(this.attachmentGroup!==""){this.templateString=dojo.byId("file-attachment-template"+this.attachmentGroup).innerHTML;this.dialogId="file-attachment"+this.attachmentGroup+"-dialog-template";this.xmlTagName="attachments-"+this.attachmentGroup;this.propertiesMap={attachment_id:{_fieldName:"attachment_id"+_1433},file_type:{_fieldName:"file_type"+_1433},file_title:{_fieldName:"file_title"+_1433},file_name:{_fieldName:"file_name"+_1433},file_status:{_fieldName:"file_status"+_1433},file_status_decoded:{_fieldName:"file_status_decoded"+_1433},file_access_dttm:{_fieldName:"file_access_dttm"+_1433},file_description:{_fieldName:"file_description"+_1433}};}var _1434=this.viewMode;var _1435={name:"FileAct",field:"fileact",get:function(_1436,_1437){var isSel=this.grid.selection.isSelected(_1436);if(_1437&&_1437.fileact&&_1437.fileact[0]==="Y"&&!misys.isFormDirty){isSel=true;this.grid.selection.addToSelection(_1436);}var html="<input type=\"checkbox\""+(isSel?" checked=\"checked\"":"")+" />";return html;},formatter:misys.grid.formatHTML,width:"5%",noresize:true,styles:"text-align: center;"};this.layout=[{name:"Picture",field:"file_name",formatter:function(value){return misys.getFileIcon(value);},width:"5%",noresize:true},{name:"Title",field:"file_title",width:"35%",noresize:true},{name:"FileName",field:"file_name",width:"35%",noresize:true,formatter:function(value){return misys.grid.formatSimpleHTML(value);}},{name:" ",field:"attachment_id",formatter:function(value){return misys.formatFileActions(value,_1433);},width:"10%",noresize:true},_1435];if(this.viewMode=="view"){if(this.showStatusColumn=="true"){this.layout=[{name:" ",field:"file_name",formatter:function(value){return misys.getFileIcon(value);},width:"5%",noresize:true},{name:"Title",field:"file_title",width:"30%",noresize:true},{name:"FileName",field:"file_name",width:"30%",noresize:true,formatter:function(value){return misys.grid.formatSimpleHTML(value);}},{name:"Status",field:"file_status_decoded",width:"5%",noresize:true},{name:" ",field:"attachment_id",formatter:function(value){return misys.formatFileViewActions(value,_1433);},width:"10%",noresize:true},{name:"FileAct",field:"fileact",width:"5%",noresize:true,styles:"text-align: center;",formatter:function(text){if(text==="Y"){return "Yes";}else{if(text==="Z"){return "NA";}else{return "No";}}}}];}else{this.layout=[{name:" ",field:"file_name",formatter:function(value){return misys.getFileIcon(value);},width:"5%",noresize:true},{name:"Title",field:"file_title",width:"30%",noresize:true},{name:"FileName",field:"file_name",width:"35%",noresize:true,formatter:function(value){return misys.grid.formatSimpleHTML(value);}},{name:" ",field:"attachment_id",formatter:function(value){return misys.formatFileViewActions(value,_1433);},width:"10%",noresize:true},{name:"FileAct",field:"fileact",width:"5%",noresize:true,styles:"text-align: center;",formatter:function(text){if(text==="Y"){return "Yes";}else{if(text==="Z"){return "NA";}else{return "No";}}}}];}}this.dataList=[];if(this.hasChildren()){dojo.forEach(this.getChildren(),function(child){var item={attachment_id:child.get("attachment_id"),file_type:child.get("file_type"),file_title:child.get("file_title"),file_name:child.get("file_name"),file_status:child.get("file_status"),file_status_decoded:child.get("file_status_decoded"),file_access_dttm:child.get("file_access_dttm"),file_description:child.get("file_description"),fileact:child.get("fileact")};this.dataList.push(item);},this);}dojo.parser.parse(this.dialogId);this.inherited(arguments);},onGridCreate:function(){var that=this;dojo.connect(that.grid,"onSelected",function(_1438){that.grid.updateRow(_1438);});dojo.connect(that.grid,"onDeselected",function(_1439){that.grid.updateRow(_1439);});dojo.connect(that.grid,"onCellClick",function(evt){var t=evt.target;if(t.tagName.toLowerCase()=="input"&&t.type=="checkbox"){misys.isFormDirty=true;var _143a=t.checked?"addToSelection":"deselect";that.grid.selection[_143a](evt.rowIndex);}});that.grid.selection.clickSelectEvent=function(){};if(this.viewMode==="edit"&&((typeof deliveryChannelFileAct!=="undefined")&&(deliveryChannelFileAct!==false))){that.displayFileAct(true);}else{if(this.viewMode==="edit"){that.displayFileAct(false);}else{if((typeof deliveryChannelFileAct!=="undefined")&&(deliveryChannelFileAct)&&(this.attachmentGroup!=="summarybank")){that.displayFileAct(true);}else{that.displayFileAct(false);}}}},createDataGrid:function(){var _143b=this.gridId;if(!_143b){_143b="grid-"+(this.xmlTagName?this.xmlTagName+"-":"")+dojox.uuid.generateRandomUuid();}this.grid=new misys.grid.DataGrid({jsId:_143b,id:_143b,store:this.store,structure:this.layout,autoHeight:true,selectionMode:"multiple",columnReordering:true,autoWidth:true,rowsPerpage:1000,initialWidth:"100%",canSort:function(_143c){var _143d=true;if(this.layout.cells){var _143e=this.layout.cellCount;var _143f=this.layout.cellCount;this.layout.cells.forEach(function(item,index){if(item.name){if(item.name===" "){_143e=index+1;}if(item.name==="FileAct"){_143f=index+1;}}});_143d=(Math.abs(_143c)!==1&&Math.abs(_143c)!==_143e&&Math.abs(_143c)!==_143f);}return _143d;},showMoveOptions:this.showMoveOptions},document.createElement("div"));this.grid.gridMultipleItemsWidget=this;misys.connect(this.grid,"onStyleRow",dojo.hitch(this,function(row){var item=this.grid.getItem(row.index);if(item&&item.hasOwnProperty("is_valid")){var _1440=dojo.isArray(item.is_valid)?item.is_valid[0]:item.is_valid;if(_1440&&_1440!=="Y"){row.customStyles+="background-color: #F9F7BA !important";this.state="Error";}}this.grid.focus.styleRow(row);this.grid.edit.styleRow(row);}));this.addChild(this.grid);this.onGridCreate();},displayFileAct:function(show){var that=this;if(that.grid.layout){dojo.forEach(that.grid.layout.cells,function(node,index){if(node&&node.name==="FileAct"&&show){that.grid.layout.setColumnVisibility(node.index,true);that.fileActVisible=true;}else{if(node&&node.name==="FileAct"&&!show){if(that.grid.selection){that.grid.selection.deselectAll();}that.grid.layout.setColumnVisibility(node.index,false);that.fileActVisible=false;}}});}}});}if(!dojo._hasResource["misys.product.widget.AttachmentFile"]){dojo._hasResource["misys.product.widget.AttachmentFile"]=true;dojo.provide("misys.product.widget.AttachmentFile");dojo.experimental("misys.product.widget.AttachmentFile");dojo.declare("misys.product.widget.AttachmentFile",[dijit._Widget,dijit._Contained],{attachment_id:"",file_type:"",file_title:"",file_name:"",file_status:"",file_status_decoded:"",file_access_dttm:"",file_description:"",fileact:""});}if(!dojo._hasResource["dojox.string.tokenize"]){dojo._hasResource["dojox.string.tokenize"]=true;dojo.provide("dojox.string.tokenize");dojox.string.tokenize=function(str,re,_1441,_1442){var _1443=[];var match,_1444,_1445=0;while(match=re.exec(str)){_1444=str.slice(_1445,re.lastIndex-match[0].length);if(_1444.length){_1443.push(_1444);}if(_1441){if(dojo.isOpera){var copy=match.slice(0);while(copy.length<match.length){copy.push(null);}match=copy;}var _1446=_1441.apply(_1442,match.slice(1).concat(_1443.length));if(typeof _1446!="undefined"){_1443.push(_1446);}}_1445=re.lastIndex;}_1444=str.slice(_1445);if(_1444.length){_1443.push(_1444);}return _1443;};}if(!dojo._hasResource["misys.grid.TopicListenerDataGrid"]){dojo._hasResource["misys.grid.TopicListenerDataGrid"]=true;dojo.provide("misys.grid.TopicListenerDataGrid");dojo.experimental("misys.grid.TopicListenerDataGrid");dojo.declare("misys.grid.TopicListenerDataGrid",[dojox.grid.EnhancedGrid],{subscribe_topic:"",onSelectionClearedScript:"",startup:function(){this.inherited(arguments);},handleTopicEvent:function(event,topic){if(this.selection&&this.get("selectionMode")!=""){this.selection.clear();}this._reloadGridForEventTerms(event);},_reloadGridForEventTerms:function(event){var store=this.get("store"),_1447=store.url,query={};if(_1447.indexOf("&")!==-1){_1447=_1447.substring(0,_1447.indexOf("&"));}for(key in event){if(event.hasOwnProperty(key)){query[key]=event[key];}}store.close();store.url=_1447;this.setStore(store,query);}});}if(!dojo._hasResource["dojox.grid.enhanced.plugins.Dialog"]){dojo._hasResource["dojox.grid.enhanced.plugins.Dialog"]=true;dojo.provide("dojox.grid.enhanced.plugins.Dialog");dojo.declare("dojox.grid.enhanced.plugins.Dialog",dijit.Dialog,{refNode:null,_position:function(){if(this.refNode&&!this._relativePosition){var _1448=dojo.position(dojo.byId(this.refNode)),_1449=dojo.position(this.domNode),_144a=dojo.window.getBox();if(_1448.x<0){_1448.x=0;}if(_1448.x+_1448.w>_144a.w){_1448.w=_144a.w-_1448.x;}if(_1448.y<0){_1448.y=0;}if(_1448.y+_1448.h>_144a.h){_1448.h=_144a.h-_1448.y;}_1448.x=_1448.x+_1448.w/2-_1449.w/2;_1448.y=_1448.y+_1448.h/2-_1449.h/2;if(_1448.x>=0&&_1448.x+_1449.w<=_144a.w&&_1448.y>=0&&_1448.y+_1449.h<=_144a.h){this._relativePosition=_1448;}}this.inherited(arguments);}});}if(!dojo._hasResource["dojox.grid.enhanced.plugins._StoreLayer"]){dojo._hasResource["dojox.grid.enhanced.plugins._StoreLayer"]=true;dojo.provide("dojox.grid.enhanced.plugins._StoreLayer");(function(){var ns=dojox.grid.enhanced.plugins,_144b=function(tags){var _144c=["reorder","sizeChange","normal","presentation"];var idx=_144c.length;for(var i=tags.length-1;i>=0;--i){var p=dojo.indexOf(_144c,tags[i]);if(p>=0&&p<=idx){idx=p;}}if(idx<_144c.length-1){return _144c.slice(0,idx+1);}else{return _144c;}},_144d=function(_144e){var i,_144f=this._layers,len=_144f.length;if(_144e){for(i=len-1;i>=0;--i){if(_144f[i].name()==_144e){_144f[i]._unwrap(_144f[i+1]);break;}}_144f.splice(i,1);}else{for(i=len-1;i>=0;--i){_144f[i]._unwrap();}}if(!_144f.length){delete this._layers;delete this.layer;delete this.unwrap;delete this.forEachLayer;}return this;},_1450=function(_1451){var i,_1452=this._layers;if(typeof _1451=="undefined"){return _1452.length;}if(typeof _1451=="number"){return _1452[_1451];}for(i=_1452.length-1;i>=0;--i){if(_1452[i].name()==_1451){return _1452[i];}}return null;},_1453=function(_1454,_1455){var len=this._layers.length,start,end,dir;if(_1455){start=0;end=len;dir=1;}else{start=len-1;end=-1;dir=-1;}for(var i=start;i!=end;i+=dir){if(_1454(this._layers[i],i)===false){return i;}}return end;};ns.wrap=function(store,_1456,layer,_1457){if(!store._layers){store._layers=[];store.layer=dojo.hitch(store,_1450);store.unwrap=dojo.hitch(store,_144d);store.forEachLayer=dojo.hitch(store,_1453);}var _1458=_144b(layer.tags);if(!dojo.some(store._layers,function(lyr,i){if(dojo.some(lyr.tags,function(tag){return dojo.indexOf(_1458,tag)>=0;})){return false;}else{store._layers.splice(i,0,layer);layer._wrap(store,_1456,_1457,lyr);return true;}})){store._layers.push(layer);layer._wrap(store,_1456,_1457);}return store;};dojo.declare("dojox.grid.enhanced.plugins._StoreLayer",null,{tags:["normal"],layerFuncName:"_fetch",constructor:function(){this._store=null;this._originFetch=null;this.__enabled=true;},initialize:function(store){},uninitialize:function(store){},invalidate:function(){},_wrap:function(store,_1459,_145a,_145b){this._store=store;this._funcName=_1459;var _145c=dojo.hitch(this,function(){return (this.enabled()?this[_145a||this.layerFuncName]:this.originFetch).apply(this,arguments);});if(_145b){this._originFetch=_145b._originFetch;_145b._originFetch=_145c;}else{this._originFetch=store[_1459]||function(){};store[_1459]=_145c;}this.initialize(store);},_unwrap:function(_145d){this.uninitialize(this._store);if(_145d){_145d._originFetch=this._originFetch;}else{this._store[this._funcName]=this._originFetch;}this._originFetch=null;this._store=null;},enabled:function(_145e){if(typeof _145e!="undefined"){this.__enabled=!!_145e;}return this.__enabled;},name:function(){if(!this.__name){var m=this.declaredClass.match(/(?:\.(?:_*)([^\.]+)Layer$)|(?:\.([^\.]+)$)/i);this.__name=m?(m[1]||m[2]).toLowerCase():this.declaredClass;}return this.__name;},originFetch:function(){return (dojo.hitch(this._store,this._originFetch)).apply(this,arguments);}});dojo.declare("dojox.grid.enhanced.plugins._ServerSideLayer",ns._StoreLayer,{constructor:function(args){args=args||{};this._url=args.url||"";this._isStateful=!!args.isStateful;this._onUserCommandLoad=args.onCommandLoad||function(){};this.__cmds={cmdlayer:this.name(),enable:true};this.useCommands(this._isStateful);},enabled:function(_145f){var res=this.inherited(arguments);this.__cmds.enable=this.__enabled;return res;},useCommands:function(toUse){if(typeof toUse!="undefined"){this.__cmds.cmdlayer=(toUse&&this._isStateful)?this.name():null;}return !!(this.__cmds.cmdlayer);},_fetch:function(_1460){if(this.__cmds.cmdlayer){dojo.xhrPost({url:this._url||this._store.url,content:this.__cmds,load:dojo.hitch(this,function(_1461){this.onCommandLoad(_1461,_1460);this.originFetch(_1460);}),error:dojo.hitch(this,this.onCommandError)});}else{this.onCommandLoad("",_1460);this.originFetch(_1460);}return _1460;},command:function(_1462,_1463){var cmds=this.__cmds;if(_1463===null){delete cmds[_1462];}else{if(typeof _1463!=="undefined"){cmds[_1462]=_1463;}}return cmds[_1462];},onCommandLoad:function(_1464,_1465){this._onUserCommandLoad(this.__cmds,_1465,_1464);},onCommandError:function(error){throw error;}});})();}if(!dojo._hasResource["dojox.grid.enhanced.plugins.Pagination"]){dojo._hasResource["dojox.grid.enhanced.plugins.Pagination"]=true;dojo.provide("dojox.grid.enhanced.plugins.Pagination");dojo.declare("dojox.grid.enhanced.plugins.Pagination",dojox.grid.enhanced._Plugin,{name:"pagination",pageSize:25,defaultRows:25,_currentPage:0,_maxSize:0,init:function(){this.gh=null;this.grid.rowsPerPage=this.pageSize=this.grid.rowsPerPage?this.grid.rowsPerPage:this.pageSize;this.grid.usingPagination=true;this.nls=dojo.i18n.getLocalization("dojox.grid.enhanced","Pagination");this._wrapStoreLayer();this._createPaginators(this.option);this._regApis();},_createPaginators:function(_1466){this.paginators=[];if(_1466.position==="both"){this.paginators=[new dojox.grid.enhanced.plugins._Paginator(dojo.mixin(_1466,{position:"bottom",plugin:this})),new dojox.grid.enhanced.plugins._Paginator(dojo.mixin(_1466,{position:"top",plugin:this}))];}else{this.paginators=[new dojox.grid.enhanced.plugins._Paginator(dojo.mixin(_1466,{plugin:this}))];}},_wrapStoreLayer:function(){var g=this.grid,ns=dojox.grid.enhanced.plugins;this._store=g.store;this.query=g.query;this.forcePageStoreLayer=new ns._ForcedPageStoreLayer(this);ns.wrap(g,"_storeLayerFetch",this.forcePageStoreLayer);this.connect(g,"setQuery",function(query){if(query!==this.query){this.query=query;}});},_stopEvent:function(event){try{dojo.stopEvent(event);}catch(e){}},_onNew:function(item,_1467){var _1468=Math.ceil(this._maxSize/this.pageSize);if(((this._currentPage+1===_1468||_1468===0)&&this.grid.rowCount<this.pageSize)||this.showAll){dojo.hitch(this.grid,this._originalOnNew)(item,_1467);this.forcePageStoreLayer.endIdx++;}this._maxSize++;if(this.showAll){this.pageSize++;}if(this.showAll&&this.grid.autoHeight){this.grid._refresh();}else{dojo.forEach(this.paginators,function(p){p.update();});}},_removeSelectedRows:function(){this._multiRemoving=true;this._originalRemove();this._multiRemoving=false;this.grid.resize();this.grid._refresh();},_onDelete:function(){if(!this._multiRemoving){this.grid.resize();if(this.showAll){this.grid._refresh();}}if(this.grid.get("rowCount")===0){this.prevPage();}},_regApis:function(){var g=this.grid;g.gotoPage=dojo.hitch(this,this.gotoPage);g.nextPage=dojo.hitch(this,this.nextPage);g.prevPage=dojo.hitch(this,this.prevPage);g.gotoFirstPage=dojo.hitch(this,this.gotoFirstPage);g.gotoLastPage=dojo.hitch(this,this.gotoLastPage);g.changePageSize=dojo.hitch(this,this.changePageSize);g.showGotoPageButton=dojo.hitch(this,this.showGotoPageButton);g.getTotalRowCount=dojo.hitch(this,this.getTotalRowCount);this.originalScrollToRow=dojo.hitch(g,g.scrollToRow);g.scrollToRow=dojo.hitch(this,this.scrollToRow);this._originalOnNew=dojo.hitch(g,g._onNew);this._originalRemove=dojo.hitch(g,g.removeSelectedRows);g.removeSelectedRows=dojo.hitch(this,this._removeSelectedRows);g._onNew=dojo.hitch(this,this._onNew);this.connect(g,"_onDelete",dojo.hitch(this,this._onDelete));},destroy:function(){this.inherited(arguments);var g=this.grid;try{dojo.forEach(this.paginators,function(p){p.destroy();});g.unwrap(this.forcePageStoreLayer.name());g._onNew=this._originalOnNew;g.removeSelectedRows=this._originalRemove;g.scrollToRow=this.originalScrollToRow;this.paginators=null;this.nls=null;}catch(e){console.warn("Pagination.destroy() error: ",e);}},nextPage:function(){if(this._maxSize>((this._currentPage+1)*this.pageSize)){this.gotoPage(this._currentPage+2);}},prevPage:function(){if(this._currentPage>0){this.gotoPage(this._currentPage);}},gotoPage:function(page){window.preventTableHeaderFocus=true;var _1469=Math.ceil(this._maxSize/this.pageSize);page--;if(page<_1469&&page>=0&&this._currentPage!==page){this._currentPage=page;this.grid.setQuery(this.query);this.grid.resize();}window.preventTableHeaderFocus=false;},gotoFirstPage:function(){this.gotoPage(1);},gotoLastPage:function(){var _146a=Math.ceil(this._maxSize/this.pageSize);this.gotoPage(_146a);},changePageSize:function(size){if(typeof size=="string"){size=parseInt(size,10);}var _146b=this.pageSize*this._currentPage;dojo.forEach(this.paginators,function(f){f.currentPageSize=this.grid.rowsPerPage=this.pageSize=size;if(size>=this._maxSize){this.grid.rowsPerPage=this.defaultRows;this.grid.usingPagination=false;}else{this.grid.usingPagination=true;}},this);var _146c=_146b+Math.min(this.pageSize,this._maxSize);if(_146c>this._maxSize){this.gotoLastPage();}else{var cp=Math.ceil(_146b/this.pageSize);if(cp!==this._currentPage){this.gotoPage(cp+1);}else{this.grid._refresh(true);}}this.grid.resize();},showGotoPageButton:function(flag){dojo.forEach(this.paginators,function(p){p._showGotoButton(flag);});},scrollToRow:function(_146d){var page=parseInt(_146d/this.pageSize,10),_146e=Math.ceil(this._maxSize/this.pageSize);if(page>_146e){return;}this.gotoPage(page+1);var _146f=_146d%this.pageSize;this.grid.setScrollTop(this.grid.scroller.findScrollTop(_146f)+1);},getTotalRowCount:function(){return this._maxSize;}});dojo.declare("dojox.grid.enhanced.plugins._ForcedPageStoreLayer",dojox.grid.enhanced.plugins._StoreLayer,{tags:["presentation"],constructor:function(_1470){this._plugin=_1470;},_fetch:function(_1471){var self=this,_1472=self._plugin,grid=_1472.grid,scope=_1471.scope||dojo.global,_1473=_1471.onBegin;_1471.start=_1472._currentPage*_1472.pageSize+(_1471.start<0?0:_1471.start);self.startIdx=_1471.start;self.endIdx=_1471.start+_1472.pageSize-1;if(_1473&&(_1472.showAll||dojo.every(_1472.paginators,function(p){return _1472.showAll=!p.sizeSwitch&&!p.pageStepper&&!p.gotoButton;}))){_1471.onBegin=function(size,req){_1472._maxSize=_1472.pageSize=size;self.startIdx=0;self.endIdx=size-1;dojo.forEach(_1472.paginators,function(f){f.update();});req.onBegin=_1473;req.onBegin.call(scope,size,req);};}else{if(_1473){_1471.onBegin=function(size,req){req.start=0;req.count=_1472.pageSize;_1472._maxSize=size;self.endIdx=self.endIdx>=size?(size-1):self.endIdx;if(self.startIdx>size&&size!==0){grid._pending_requests[req.start]=false;_1472.gotoFirstPage();}dojo.forEach(_1472.paginators,function(f){f.update();});req.onBegin=_1473;req.onBegin.call(scope,Math.min(_1472.pageSize,(size-self.startIdx)),req);};}}return dojo.hitch(this._store,this._originFetch)(_1471);}});dojo.declare("dojox.grid.enhanced.plugins._Paginator",[dijit._Widget,dijit._Templated],{templateString:"<div dojoAttachPoint=\"paginatorBar\">\n\t<table cellpadding=\"0\" cellspacing=\"0\"  class=\"dojoxGridPaginator\">\n\t\t<tr>\n\t\t\t<td dojoAttachPoint=\"descriptionTd\" class=\"dojoxGridDescriptionTd\">\n\t\t\t\t<div aria-live=\"polite\" dojoAttachPoint=\"descriptionDiv\" class=\"dojoxGridDescription\" />\n\t\t\t</td>\n\t\t\t<td dojoAttachPoint=\"sizeSwitchTd\" class=\"dojoPageSizeSwitch\"></td>\n\t\t\t<td dojoAttachPoint=\"pageStepperTd\" class=\"dojoxGridPaginatorFastStep\">\n\t\t\t\t<div dojoAttachPoint=\"pageStepperDiv\" class=\"dojoxGridPaginatorStep\"></div>\n\t\t\t</td>\n\t\t</tr>\n\t</table>\n</div>\n",position:"bottom",_maxItemSize:0,description:true,pageStepper:true,maxPageStep:7,sizeSwitch:true,pageSizes:["10","25","50","100","All"],gotoButton:false,constructor:function(_1474){dojo.mixin(this,_1474);this.grid=this.plugin.grid;this.itemTitle=this.itemTitle?this.itemTitle:this.plugin.nls.itemTitle;this.descTemplate=this.descTemplate?this.descTemplate:this.plugin.nls.descTemplate;},postCreate:function(){this.inherited(arguments);this._setWidthValue();var self=this;var g=this.grid;this.plugin.connect(g,"_resize",dojo.hitch(this,"_resetGridHeight"));this._originalResize=dojo.hitch(g,"resize");g.resize=function(_1475,_1476){self._changeSize=g._pendingChangeSize=_1475;self._resultSize=g._pendingResultSize=_1476;g.sizeChange();};this._placeSelf();},destroy:function(){this.inherited(arguments);this.grid.focus.removeArea("pagination"+this.position.toLowerCase());if(this._gotoPageDialog){this._gotoPageDialog.destroy();dojo.destroy(this.gotoPageTd);delete this.gotoPageTd;delete this._gotoPageDialog;}this.grid.resize=this._originalResize;this.pageSizes=null;},update:function(){this.currentPageSize=this.plugin.pageSize;this._maxItemSize=this.plugin._maxSize;this._updateDescription();this._updatePageStepper();this._updateSizeSwitch();this._updateGotoButton();if(window.isAccessibilityEnabled){this._updateTableInfo();}},_setWidthValue:function(){var type=["description","sizeSwitch","pageStepper"];var _1477=function(str1,str2){var reg=new RegExp(str2+"$");return reg.test(str1);};dojo.forEach(type,function(t){var width,flag=this[t];if(flag===undefined||typeof flag=="boolean"){return;}if(dojo.isString(flag)){width=_1477(flag,"px")||_1477(flag,"%")||_1477(flag,"em")?flag:parseInt(flag,10)>0?parseInt(flag,10)+"px":null;}else{if(typeof flag==="number"&&flag>0){width=flag+"px";}}this[t]=width?true:false;this[t+"Width"]=width;},this);},_regFocusMgr:function(_1478){this.grid.focus.addArea({name:"pagination"+_1478,onFocus:dojo.hitch(this,this._onFocusPaginator),onBlur:dojo.hitch(this,this._onBlurPaginator),onMove:dojo.hitch(this,this._moveFocus),onKeyDown:dojo.hitch(this,this._onKeyDown)});switch(_1478){case "top":this.grid.focus.placeArea("pagination"+_1478,"before","header");break;case "bottom":default:this.grid.focus.placeArea("pagination"+_1478,"after","content");break;}},_placeSelf:function(){var g=this.grid;var _1479=dojo.trim(this.position.toLowerCase());switch(_1479){case "top":this.placeAt(g.viewsHeaderNode,"before");this._regFocusMgr("top");break;case "bottom":default:this.placeAt(g.viewsNode,"after");this._regFocusMgr("bottom");break;}},_resetGridHeight:function(_147a,_147b){var g=this.grid;_147a=_147a||this._changeSize;_147b=_147b||this._resultSize;delete this._changeSize;delete this._resultSize;if(g._autoHeight){return;}var _147c=g._getPadBorder().h;if(!this.plugin.gh){this.plugin.gh=dojo.contentBox(g.domNode).h+2*_147c;}if(_147b){_147a=_147b;}if(_147a){this.plugin.gh=dojo.contentBox(g.domNode).h+2*_147c;}var gh=this.plugin.gh,hh=g._getHeaderHeight(),ph=dojo.marginBox(this.domNode).h;ph=this.plugin.paginators[1]?ph*2:ph;if(typeof g.autoHeight=="number"){var cgh=gh+ph-_147c;dojo.style(g.domNode,"height",cgh+"px");dojo.style(g.viewsNode,"height",(cgh-ph-hh)+"px");this._styleMsgNode(hh,dojo.marginBox(g.viewsNode).w,cgh-ph-hh);}else{var h=gh-ph-hh-_147c;dojo.style(g.viewsNode,"height",h+"px");var _147d=dojo.some(g.views.views,function(v){return v.hasHScrollbar();});dojo.forEach(g.viewsNode.childNodes,function(c,idx){dojo.style(c,"height",h+"px");});dojo.forEach(g.views.views,function(v,idx){if(v.scrollboxNode){if(!v.hasHScrollbar()&&_147d){dojo.style(v.scrollboxNode,"height",(h-dojox.html.metrics.getScrollbar().h)+"px");}else{dojo.style(v.scrollboxNode,"height",h+"px");}}});this._styleMsgNode(hh,dojo.marginBox(g.viewsNode).w,h);}},_styleMsgNode:function(top,width,_147e){var _147f=this.grid.messagesNode;dojo.style(_147f,{"position":"absolute","top":top+"px","width":width+"px","height":_147e+"px","z-Index":"100"});},_updateDescription:function(){var s=this.plugin.forcePageStoreLayer;if(this.description&&this.descriptionDiv){this.descriptionDiv.innerHTML=this._maxItemSize>0?dojo.string.substitute(this.descTemplate,[this.itemTitle,this._maxItemSize,s.startIdx+1,s.endIdx+1]):"0 "+this.itemTitle;}if(this.descriptionWidth){dojo.style(this.descriptionTd,"width",this.descriptionWidth);}this._updateDownloadButton();},_updateDownloadButton:function(){var _1480=parseInt(this._maxItemSize);var _1481=dijit.byId("dijit_form_DropDownButton_1")?dijit.byId("dijit_form_DropDownButton_1").set("disabled",false):"";if(!_1481){return;}if(dojo.query(".dojoxGrid")&&dojo.query(".dojoxGrid").length>1){var _1482=dojo.query(".dojoxGrid").length;var _1483=false;dojo.query(".dojoxGrid").forEach(function(grid){var _1484=dijit.byId(grid.id);try{if(!_1483&&_1484.getTotalRowCount!==undefined){_1483=_1484.getTotalRowCount()>=1?true:_1483;}}catch(e){dijit.byId("dijit_form_DropDownButton_1").set("disabled",true);}});if(!_1483){dijit.byId("dijit_form_DropDownButton_1").set("disabled",true);}}else{if(_1480===0){dijit.byId("dijit_form_DropDownButton_1").set("disabled",true);}}},_updateTableInfo:function(){var _1485="";if(dojo.query("#"+this.grid.id+" .dojoxGridDescription")&&dojo.query("#"+this.grid.id+" .dojoxGridDescription").length>0){_1485=dojo.attr(dojo.query("#"+this.grid.id+" .dojoxGridDescription")[0],"innerHTML")+". ";}if(dojo.query("#"+this.grid.id+" .dojoxGridActivedSwitch")&&dojo.query("#"+this.grid.id+" .dojoxGridActivedSwitch").length>0){_1485=_1485+misys.getLocalization("currentPageSize")+" "+dojo.attr(dojo.query("#"+this.grid.id+" .dojoxGridActivedSwitch")[0],"title")+". ";}if(dojo.query("#"+this.grid.id+" .dojoxGridActived")&&dojo.query("#"+this.grid.id+" .dojoxGridActived").length>0){_1485=_1485+misys.getLocalization("currentPage")+" "+dojo.attr(dojo.query("#"+this.grid.id+" .dojoxGridActived")[0],"title");}if(dojo.query("span.dojoxGridInactiveSwitch",this.sizeSwitchTd)&&dojo.query("span.dojoxGridInactiveSwitch",this.sizeSwitchTd).length>0){var _1486=dojo.query("span.dojoxGridInactiveSwitch",this.sizeSwitchTd)[0];_1485=_1485+" "+dojo.attr(_1486,"title");if(dojo.query("#table-page-size-instructions")&&dojo.query("#table-page-size-instructions").length>0){_1485=_1485+" "+dojo.query("#table-page-size-instructions")[0].innerHTML;}dojo.attr(_1486,"aria-label",_1485);}if(dojo.query("span.sr-only",this.descriptionTd).length<1){var _1487=this.grid.id+"_table"+"_info";var _1488=dojo.create("span",{id:_1487},this.descriptionTd,"last");dojo.addClass(_1488,"sr-only");dojo.attr(_1488,"aria-live","polite");}dojo.attr(dojo.query("span.sr-only",this.descriptionTd)[0],"innerHTML",_1485);},_updateSizeSwitch:function(){if(!this.sizeSwitchTd){return;}if(!this.sizeSwitch||this._maxItemSize<=0){dojo.style(this.sizeSwitchTd,"display","none");return;}else{dojo.style(this.sizeSwitchTd,"display","");}if(this.initializedSizeNode&&!this.pageSizeValue){return;}if(this.sizeSwitchTd.childNodes.length<1){this._createSizeSwitchNodes();}this._updateSwitchNodeClass();this._moveToNextActivableNode(this._getAllPageSizeNodes(),this.pageSizeValue);this.pageSizeValue=null;},_createSizeSwitchNodes:function(){var node=null;if(!this.pageSizes||this.pageSizes.length<1){return;}dojo.forEach(this.pageSizes,function(size){size=dojo.trim(size);var _1489=size.toLowerCase()=="all"?this.plugin.nls.allItemsLabelTemplate:dojo.string.substitute(this.plugin.nls.pageSizeLabelTemplate,[size]);node=dojo.create("span",{innerHTML:size,title:_1489,value:size,tabindex:0},this.sizeSwitchTd,"last");if(window.isAccessibilityEnabled&&dojo.query("#table-page-size-instructions")&&dojo.query("#table-page-size-instructions")[0]!==undefined){_1489=_1489+" "+dojo.query("#table-page-size-instructions")[0].innerHTML;dojo.attr(node,"role","menuitem");}dijit.setWaiState(node,"label",_1489);this.plugin.connect(node,"onclick",dojo.hitch(this,"_onSwitchPageSize"));this.plugin.connect(node,"onmouseover",function(e){dojo.addClass(e.target,"dojoxGridPageTextHover");});this.plugin.connect(node,"onmouseout",function(e){dojo.removeClass(e.target,"dojoxGridPageTextHover");});node=dojo.create("span",{innerHTML:"|"},this.sizeSwitchTd,"last");dojo.addClass(node,"dojoxGridSeparator");},this);dojo.destroy(node);this.initializedSizeNode=true;if(this.sizeSwitchWidth){dojo.style(this.sizeSwitchTd,"width",this.sizeSwitchWidth);}},_updateSwitchNodeClass:function(){var size=null;var _148a=false;var _148b=function(node,_148c){if(_148c){dojo.addClass(node,"dojoxGridActivedSwitch");dojo.attr(node,"tabindex","-1");_148a=true;}else{dojo.addClass(node,"dojoxGridInactiveSwitch");dojo.attr(node,"tabindex","0");}};dojo.forEach(this.sizeSwitchTd.childNodes,function(node){if(node.value){size=node.value;dojo.removeClass(node);if(this.pageSizeValue){_148b(node,size===this.pageSizeValue&&!_148a);}else{if(size.toLowerCase()=="all"){size=this._maxItemSize;}_148b(node,this.currentPageSize===parseInt(size,10)&&!_148a);}}},this);},_updatePageStepper:function(){if(!this.pageStepperTd){return;}if(!this.pageStepper||this._maxItemSize<=0){dojo.style(this.pageStepperTd,"display","none");return;}else{dojo.style(this.pageStepperTd,"display","");}if(this.pageStepperDiv.childNodes.length<1){this._createPageStepNodes();this._createWardBtns();}else{this._resetPageStepNodes();}this._updatePageStepNodeClass();this._moveToNextActivableNode(this._getAllPageStepNodes(),this.pageStepValue);this.pageStepValue=null;},_createPageStepNodes:function(){var _148d=this._getStartPage(),_148e=this._getStepPageSize(),label="",node=null;for(var i=_148d;i<this.maxPageStep+1;i++){label=dojo.string.substitute(this.plugin.nls.pageStepLabelTemplate,[i+""]);node=dojo.create("div",{innerHTML:i,value:i,title:label,tabindex:i<_148d+_148e?0:-1},this.pageStepperDiv,"last");if(window.isAccessibilityEnabled&&dojo.query("#table-page-instructions")&&dojo.query("#table-page-instructions")[0]!==undefined){label=label+" "+dojo.query("#table-page-instructions")[0].innerHTML;dojo.attr(node,"role","menuitem");}dijit.setWaiState(node,"label",label);this.plugin.connect(node,"onclick",dojo.hitch(this,"_onPageStep"));this.plugin.connect(node,"onmouseover",function(e){dojo.addClass(e.target,"dojoxGridPageTextHover");});this.plugin.connect(node,"onmouseout",function(e){dojo.removeClass(e.target,"dojoxGridPageTextHover");});dojo.style(node,"display",i<_148d+_148e?"block":"none");}if(this.pageStepperWidth){dojo.style(this.pageStepperTd,"width",this.pageStepperWidth);}},_createWardBtns:function(){var self=this;var _148f={prevPage:"&#60;",firstPage:"&#171;",nextPage:"&#62;",lastPage:"&#187;"};var _1490=function(value,label,_1491){var node=dojo.create("div",{value:value,title:label,tabindex:1},self.pageStepperDiv,_1491);self.plugin.connect(node,"onclick",dojo.hitch(self,"_onPageStep"));if(window.isAccessibilityEnabled&&dojo.query("#table-page-instructions")&&dojo.query("#table-page-instructions")[0]!==undefined){label=label+" "+dojo.query("#table-page-instructions")[0].innerHTML;dojo.attr(node,"role","menuitem");}dijit.setWaiState(node,"label",label);if(window.isAccessibilityEnabled){var _1492=dojo.create("span",{value:value,title:label},node,_1491);}else{var _1492=dojo.create("span",{value:value,title:label,innerHTML:_148f[value]},node,_1491);}dojo.addClass(_1492,"dojoxGridWardButtonInner");};_1490("prevPage",this.plugin.nls.prevTip,"first");_1490("firstPage",this.plugin.nls.firstTip,"first");_1490("nextPage",this.plugin.nls.nextTip,"last");_1490("lastPage",this.plugin.nls.lastTip,"last");},_resetPageStepNodes:function(){var _1493=this._getStartPage(),_1494=this._getStepPageSize(),_1495=this.pageStepperDiv.childNodes,node=null;for(var i=_1493,j=2;j<_1495.length-2;j++,i++){node=_1495[j];if(i<_1493+_1494){dojo.attr(node,"innerHTML",i);dojo.attr(node,"value",i);dojo.style(node,"display","block");dijit.setWaiState(node,"label",dojo.string.substitute(this.plugin.nls.pageStepLabelTemplate,[i+""]));}else{dojo.style(node,"display","none");}}},_updatePageStepNodeClass:function(){var value=null,_1496=this._getCurrentPageNo(),_1497=this._getPageCount(),_1498=0;var _1499=function(node,_149a,_149b){var value=node.value,_149c=_149a?"dojoxGrid"+value+"Btn":"dojoxGridInactived",_149d=_149a?"dojoxGrid"+value+"BtnDisable":"dojoxGridActived";if(_149b){dojo.addClass(node,_149d);dojo.attr(node,"tabindex","-1");window.preventTabToPages=true;}else{dojo.addClass(node,_149c);dojo.attr(node,"tabindex","0");window.preventTabToPages=false;}};dojo.forEach(this.pageStepperDiv.childNodes,function(node){dojo.removeClass(node);if(isNaN(parseInt(node.value,10))){dojo.addClass(node,"dojoxGridWardButton");var _149e=node.value=="prevPage"||node.value=="firstPage"?1:_1497;_1499(node,true,(_1496==_149e));}else{value=parseInt(node.value,10);_1499(node,false,(value===_1496||dojo.style(node,"display")==="none"));}},this);},_showGotoButton:function(flag){this.gotoButton=flag;this._updateGotoButton();},_updateGotoButton:function(){if(!this.gotoButton){if(this.gotoPageTd){if(this._gotoPageDialog){this._gotoPageDialog.destroy();}dojo.destroy(this.gotoPageDiv);dojo.destroy(this.gotoPageTd);delete this.gotoPageDiv;delete this.gotoPageTd;}return;}if(!this.gotoPageTd){this._createGotoNode();}dojo.toggleClass(this.gotoPageDiv,"dojoxGridPaginatorGotoDivDisabled",this.plugin.pageSize>=this.plugin._maxSize);},_createGotoNode:function(){this.gotoPageTd=dojo.create("td",{},dojo.query("tr",this.domNode)[0],"last");dojo.addClass(this.gotoPageTd,"dojoxGridPaginatorGotoTd");this.gotoPageDiv=dojo.create("div",{tabindex:"0",title:this.plugin.nls.gotoButtonTitle},this.gotoPageTd,"first");dojo.addClass(this.gotoPageDiv,"dojoxGridPaginatorGotoDiv");this.plugin.connect(this.gotoPageDiv,"onclick",dojo.hitch(this,"_openGotopageDialog"));dojo.attr(this.gotoPageDiv,"role","menuitem");if(window.isAccessibilityEnabled){var _149f=dojo.create("span",{title:this.plugin.nls.gotoButtonTitle},this.gotoPageDiv,"last");}else{var _149f=dojo.create("span",{title:this.plugin.nls.gotoButtonTitle,innerHTML:"&#8869;"},this.gotoPageDiv,"last");}dojo.addClass(_149f,"dojoxGridWardButtonInner");},_openGotopageDialog:function(event){if(!this._gotoPageDialog){this._gotoPageDialog=new dojox.grid.enhanced.plugins.pagination._GotoPageDialog(this.plugin);}if(!this._currentFocusNode){this.grid.focus.focusArea("pagination"+this.position,event);}else{this._currentFocusNode=this.gotoPageDiv;}if(this.focusArea!="pageStep"){this.focusArea="pageStep";}this._gotoPageDialog.updatePageCount();this._gotoPageDialog.showDialog();},_onFocusPaginator:function(event,step){if(!this._currentFocusNode){if(step>0){return this._onFocusPageSizeNode(event)?true:this._onFocusPageStepNode(event);}else{if(step<0){return this._onFocusPageStepNode(event)?true:this._onFocusPageSizeNode(event);}else{return false;}}}else{if(step>0){return this.focusArea==="pageSize"?this._onFocusPageStepNode(event):false;}else{if(step<0){if(window.isAccessibilityEnabled){if(this.focusArea==="pageStep"||((this.grid.focus._currentAreaIdx===0)&&dojo.hasClass(this.gotoPageDiv,"dojoxGridPaginatorGotoDivDisabled"))){return this._onFocusPageSizeNode(event);}else{return false;}}else{return this.focusArea==="pageStep"?this._onFocusPageSizeNode(event):false;}}else{return false;}}}},_onFocusPageSizeNode:function(event){var _14a0=this._getPageSizeActivableNodes();if(event&&event.type!=="click"){if(_14a0[0]){dijit.focus(_14a0[0]);this._currentFocusNode=_14a0[0];this.focusArea="pageSize";this.plugin._stopEvent(event);return true;}else{return false;}}if(event&&event.type=="click"){if(dojo.indexOf(this._getPageSizeActivableNodes(),event.target)>-1){this.focusArea="pageSize";this.plugin._stopEvent(event);return true;}}return false;},_onFocusPageStepNode:function(event){var _14a1=this._getPageStepActivableNodes();if(event&&event.type!=="click"){if(_14a1[0]){dijit.focus(_14a1[0]);this._currentFocusNode=_14a1[0];this.focusArea="pageStep";this.plugin._stopEvent(event);return true;}else{if(this.gotoPageDiv){if(window.isAccessibilityEnabled&&dojo.hasClass(this.gotoPageDiv,"dojoxGridPaginatorGotoDivDisabled")){return false;}dijit.focus(this.gotoPageDiv);this._currentFocusNode=this.gotoPageDiv;this.focusArea="pageStep";this.plugin._stopEvent(event);return true;}else{return false;}}}if(event&&event.type=="click"){if(dojo.indexOf(this._getPageStepActivableNodes(),event.target)>-1){this.focusArea="pageStep";this.plugin._stopEvent(event);return true;}else{if(event.target==this.gotoPageDiv){dijit.focus(this.gotoPageDiv);this._currentFocusNode=this.gotoPageDiv;this.focusArea="pageStep";this.plugin._stopEvent(event);return true;}}}return false;},_onFocusGotoPageNode:function(event){if(!this.gotoButton||!this.gotoPageTd){return false;}if(event&&event.type!=="click"||(event.type=="click"&&event.target==this.gotoPageDiv)){dijit.focus(this.gotoPageDiv);this._currentFocusNode=this.gotoPageDiv;this.focusArea="gotoButton";this.plugin._stopEvent(event);return true;}return true;},_onBlurPaginator:function(event,step){var _14a2=this._getPageSizeActivableNodes(),_14a3=this._getPageStepActivableNodes();if(step>0&&this.focusArea==="pageSize"&&(_14a3.length>1||this.gotoButton)){return false;}else{if(step<0&&this.focusArea==="pageStep"&&_14a2.length>1){return false;}}this._currentFocusNode=null;this.focusArea=null;return true;},_onKeyDown:function(event,_14a4){if(_14a4){return;}if(event.altKey||event.metaKey){return;}var dk=dojo.keys;if(event.keyCode===dk.ENTER||event.keyCode===dk.SPACE){if(dojo.indexOf(this._getPageStepActivableNodes(),this._currentFocusNode)>-1){this._onPageStep(event);}else{if(dojo.indexOf(this._getPageSizeActivableNodes(),this._currentFocusNode)>-1){this._onSwitchPageSize(event);}else{if(this._currentFocusNode===this.gotoPageDiv){this._openGotopageDialog(event);}}}}this.plugin._stopEvent(event);},_moveFocus:function(_14a5,_14a6,evt){var nodes;if(this.focusArea=="pageSize"){nodes=this._getPageSizeActivableNodes();}else{if(this.focusArea=="pageStep"){nodes=this._getPageStepActivableNodes();if(this.gotoPageDiv){nodes.push(this.gotoPageDiv);}}}if(nodes.length<1){return;}var _14a7=dojo.indexOf(nodes,this._currentFocusNode);var _14a8=_14a7+_14a6;if(_14a8>=0&&_14a8<nodes.length){dijit.focus(nodes[_14a8]);this._currentFocusNode=nodes[_14a8];}this.plugin._stopEvent(evt);},_getPageSizeActivableNodes:function(){return dojo.query("span[tabindex='0']",this.sizeSwitchTd);},_getPageStepActivableNodes:function(){return (dojo.query("div[tabindex='0']",this.pageStepperDiv));},_getAllPageSizeNodes:function(){var _14a9=[];dojo.forEach(this.sizeSwitchTd.childNodes,function(node){if(node.value){_14a9.push(node);}});return _14a9;},_getAllPageStepNodes:function(){var _14aa=[];for(var i=0,len=this.pageStepperDiv.childNodes.length;i<len;i++){_14aa.push(this.pageStepperDiv.childNodes[i]);}return _14aa;},_moveToNextActivableNode:function(_14ab,_14ac){if(!_14ac){return;}if(_14ab.length<2){this.grid.focus.tab(1);}var nl=[],node=null,index=0;dojo.forEach(_14ab,function(n){if(n.value==_14ac){nl.push(n);node=n;}else{if(dojo.attr(n,"tabindex")=="0"){nl.push(n);}}});if(nl.length<2){this.grid.focus.tab(1);}index=dojo.indexOf(nl,node);if(dojo.attr(node,"tabindex")!="0"){node=nl[index+1]?nl[index+1]:nl[index-1];}dijit.focus(node);this._currentFocusNode=node;},_onSwitchPageSize:function(e){window.preventTableHeaderFocus=true;var size=this.pageSizeValue=e.target.value;if(!size){return;}if(dojo.trim(size.toLowerCase())=="all"){size=this._maxItemSize;showAll=true;}this.plugin.grid.usingPagination=!this.plugin.showAll;size=parseInt(size,10);if(isNaN(size)||size<=0){return;}if(!this._currentFocusNode){this.grid.focus.currentArea("pagination"+this.position);}if(this.focusArea!="pageSize"){this.focusArea="pageSize";}this.plugin.changePageSize(size);this.grid.focus.focusArea("pagination"+this.position,event);window.preventTableHeaderFocus=false;},_onPageStep:function(e){var p=this.plugin,value=this.pageStepValue=e.target.value;if(!this._currentFocusNode){this.grid.focus.currentArea("pagination"+this.position);}if(this.focusArea!="pageStep"){this.focusArea="pageStep";}if(!isNaN(parseInt(value,10))){p.gotoPage(value);}else{switch(e.target.value){case "prevPage":p.prevPage();break;case "nextPage":p.nextPage();break;case "firstPage":p.gotoFirstPage();break;case "lastPage":p.gotoLastPage();}}},_getCurrentPageNo:function(){return this.plugin._currentPage+1;},_getPageCount:function(){if(!this._maxItemSize||!this.currentPageSize){return 0;}return Math.ceil(this._maxItemSize/this.currentPageSize);},_getStartPage:function(){var cp=this._getCurrentPageNo();var ms=parseInt(this.maxPageStep/2,10);var pc=this._getPageCount();if(cp<ms||(cp-ms)<1){return 1;}else{if(pc<=this.maxPageStep){return 1;}else{if(pc-cp<ms&&cp-this.maxPageStep>=0){return pc-this.maxPageStep+1;}else{return (cp-ms);}}}},_getStepPageSize:function(){var sp=this._getStartPage();var count=this._getPageCount();if((sp+this.maxPageStep)>count){return count-sp+1;}else{return this.maxPageStep;}}});dojo.declare("dojox.grid.enhanced.plugins.pagination._GotoPageDialog",null,{pageCount:0,constructor:function(_14ad){this.plugin=_14ad;this.pageCount=this.plugin.paginators[0]._getPageCount();this._dialogNode=dojo.create("div",{},dojo.body(),"last");this._gotoPageDialog=new dojox.grid.enhanced.plugins.Dialog({"refNode":_14ad.grid.domNode,"title":this.plugin.nls.dialogTitle},this._dialogNode);this._createDialogContent();this._gotoPageDialog.startup();},_createDialogContent:function(){this._specifyNode=dojo.create("div",{innerHTML:this.plugin.nls.dialogIndication},this._gotoPageDialog.containerNode,"last");if(window.isAccessibilityEnabled===true){dojo.attr(this._specifyNode,"id","page_num_text");}this._pageInputDiv=dojo.create("div",{},this._gotoPageDialog.containerNode,"last");this._pageTextBox=new dijit.form.NumberTextBox();this._pageTextBox.constraints={fractional:false,min:1,max:this.pageCount};this.plugin.connect(this._pageTextBox.textbox,"onkeyup",dojo.hitch(this,"_setConfirmBtnState"));if(window.isAccessibilityEnabled===true){dojo.attr(this._pageTextBox.textbox,"aria-labelledby","page_num_text");}this._pageInputDiv.appendChild(this._pageTextBox.domNode);this._pageLabel=dojo.create("label",{innerHTML:dojo.string.substitute(this.plugin.nls.pageCountIndication,[this.pageCount])},this._pageInputDiv,"last");this._buttonDiv=dojo.create("div",{},this._gotoPageDialog.containerNode,"last");this._confirmBtn=new dijit.form.Button({label:this.plugin.nls.dialogConfirm,onClick:dojo.hitch(this,this._onConfirm)});this._confirmBtn.set("disabled",true);this._cancelBtn=new dijit.form.Button({label:this.plugin.nls.dialogCancel,onClick:dojo.hitch(this,this._onCancel)});this._buttonDiv.appendChild(this._confirmBtn.domNode);this._buttonDiv.appendChild(this._cancelBtn.domNode);this._styleContent();this._gotoPageDialog.onCancel=dojo.hitch(this,this._onCancel);this.plugin.connect(this._gotoPageDialog,"_onKey",dojo.hitch(this,"_onKeyDown"));},_styleContent:function(){dojo.addClass(this._specifyNode,"dojoxGridDialogMargin");dojo.addClass(this._pageInputDiv,"dojoxGridDialogMargin");dojo.addClass(this._buttonDiv,"dojoxGridDialogButton");dojo.style(this._pageTextBox.domNode,"width","50px");},updatePageCount:function(){this.pageCount=this.plugin.paginators[0]._getPageCount();this._pageTextBox.constraints={fractional:false,min:1,max:this.pageCount};dojo.attr(this._pageLabel,"innerHTML",dojo.string.substitute(this.plugin.nls.pageCountIndication,[this.pageCount]));},showDialog:function(){this._gotoPageDialog.show();},_onConfirm:function(event){if(this._pageTextBox.isValid()&&this._pageTextBox.getDisplayedValue()!==""){this.plugin.gotoPage(this._pageTextBox.parse(this._pageTextBox.getDisplayedValue()));this._gotoPageDialog.hide();this._pageTextBox.reset();}this.plugin._stopEvent(event);},_onCancel:function(event){this._pageTextBox.reset();this._gotoPageDialog.hide();this.plugin._stopEvent(event);},_onKeyDown:function(event){if(event.altKey||event.metaKey){return;}var dk=dojo.keys;if(event.keyCode===dk.ENTER){this._onConfirm(event);}},_setConfirmBtnState:function(){if(this._pageTextBox.isValid()&&this._pageTextBox.getDisplayedValue()!==""){this._confirmBtn.set("disabled",false);}else{this._confirmBtn.set("disabled",true);}},destroy:function(){this._pageTextBox.destroy();this._confirmBtn.destroy();this._cancelBtn.destroy();this._gotoPageDialog.destroy();dojo.destroy(this._specifyNode);dojo.destroy(this._pageInputDiv);dojo.destroy(this._pageLabel);dojo.destroy(this._buttonDiv);dojo.destroy(this._dialogNode);}});dojox.grid.EnhancedGrid.registerPlugin(dojox.grid.enhanced.plugins.Pagination);}if(!dojo._hasResource["misys.grid.Pagination"]){dojo._hasResource["misys.grid.Pagination"]=true;dojo.provide("misys.grid.Pagination");dojo.experimental("misys.grid.Pagination");dojo.declare("misys.grid.Pagination",[dojox.grid.enhanced.plugins.Pagination],{name:"paginationEnhanced",defaultRows:100,queryOptions:{},gotoPage:function(page){window.preventTableHeaderFocus=true;this.setQueryOptions();var _14ae=Math.ceil(this._maxSize/this.pageSize);page--;if(page<_14ae&&page>=0&&this._currentPage!==page){this._currentPage=page;if(this.grid.store&&this.grid.store.declaredClass==="dojox.data.QueryReadStore"){if(this.grid.params.domIdArray){var grid=this.grid,_14af={},field,_14b0=this.grid.params.jsonArray,_14b1=this.grid.params.domIdArray;if(grid&&(_14b0.length===_14b1.length)){dojo.forEach(_14b0,function(key,i){field=dijit.byId(_14b1[i]);if(field){var _14b2=field.get("value");_14b2=_14b2.replace("'","'");if(_14b2!=""){_14af[key]=_14b2;}}});}this.queryOptions=_14af;}this.grid.setQuery(this.queryOptions);}else{this.grid.setQuery(this.grid.query);}this.grid.resize();}if(this.grid.rowSelectCell){this.grid.rowSelectCell.toggleAllSelection(false);}window.preventTableHeaderFocus=false;},setQueryOptions:function(){var form=dijit.byId("TransactionSearchForm"),grids=dojo.query(".dojoxGrid"),_14b3={},_14b4=dojo.query(".gridContainer")[0],_14b5=/Date/,_14b6=/Time/;if(form){form.getDescendants().forEach(function(field,i){if(field.name){var value;if(field.declaredClass=="dijit.form.RadioButton"){var _14b7=dojo.query("[name='"+field.name+"']",form.domNode);dojo.some(_14b7,function(_14b8){var _14b9=dijit.byNode(_14b8.parentNode);if(_14b9.checked){value=_14b9.params.value;}});}else{value=field.get("value");}if(_14b5.test(field.declaredClass)||(_14b6.test(field.declaredClass))){value=field.get("displayedValue");}if(value===" "){value="";}_14b3[field.get("name")]=value;}});_14b3["searchFlag"]=true;this.queryOptions=_14b3;}}});dojox.grid.EnhancedGrid.registerPlugin(misys.grid.Pagination);}if(!dojo._hasResource["misys.grid.IndirectSelection"]){dojo._hasResource["misys.grid.IndirectSelection"]=true;dojo.provide("misys.grid.IndirectSelection");dojo.declare("misys.grid.IndirectSelection",dojox.grid.enhanced._Plugin,{name:"misysIndirectSelection",constructor:function(){var _14ba=this.grid.layout;this.connect(_14ba,"setStructure",dojo.hitch(_14ba,this.addRowSelectCell,this.option));},addRowSelectCell:function(_14bb){if(!this.grid.misysIndirectSelection||this.grid.selectionMode=="none"){return;}var _14bc=false,_14bd=["get","formatter","field","fields"],_14be={type:misys.grid.MultipleRowSelector,name:"",width:"30px",styles:"text-align: center;"};if(_14bb.headerSelector){_14bb.name="";}if(this.grid.rowSelectCell){this.grid.rowSelectCell.destroy();}dojo.forEach(this.structure,function(view){var cells=view.cells;if(cells&&cells.length>0&&!_14bc){var _14bf=cells[0];if(_14bf[0]&&_14bf[0].isRowSelector){_14bc=true;return;}var _14c0,_14c1=this.grid.selectionMode=="single"?misys.grid.SingleRowSelector:misys.grid.MultipleRowSelector;_14c0=dojo.mixin(_14be,_14bb,{type:_14c1,editable:false,notselectable:true,filterable:false,navigatable:true,nosort:true});dojo.forEach(_14bd,function(field){if(field in _14c0){delete _14c0[field];}});if(cells.length>1){_14c0.rowSpan=cells.length;}dojo.forEach(this.cells,function(cell,i){if(cell.index>=0){cell.index+=1;}else{console.warn("Error:IndirectSelection.addRowSelectCell()-  cell "+i+" has no index!");}});var _14c2=this.addCellDef(0,0,_14c0);_14c2.index=0;_14bf.unshift(_14c2);this.cells.unshift(_14c2);this.grid.rowSelectCell=_14c2;_14bc=true;}},this);this.cellCount=this.cells.length;},destroy:function(){if(this.grid&&this.grid.rowSelectCell){this.grid.rowSelectCell.destroy();delete this.grid.rowSelectCell;}this.inherited(arguments);}});dojo.declare("misys.grid.RowSelector",dojox.grid.cells._Widget,{inputType:"",map:null,disabledMap:null,isRowSelector:true,_connects:null,_subscribes:null,checkedText:"&#8730;",unCheckedText:"O",constructor:function(){this.map={};this.disabledMap={};this.disabledCount=0;this._connects=[];this._subscribes=[];this.inA11YMode=dojo.hasClass(dojo.body(),"dijit_a11y");this.baseClass="dojoxGridRowSelector dijitReset dijitInline dijit"+this.inputType;this.checkedClass=" dijit"+this.inputType+"Checked";this.disabledClass=" dijit"+this.inputType+"Disabled";this.checkedDisabledClass=" dijit"+this.inputType+"CheckedDisabled";this.statusTextClass=" dojoxGridRowSelectorStatusText";this._connects.push(dojo.connect(this.grid,"dokeyup",this,"_dokeyup"));this._connects.push(dojo.connect(this.grid.selection,"onSelected",this,"_onSelected"));this._connects.push(dojo.connect(this.grid.selection,"onDeselected",this,"_onDeselected"));this._connects.push(dojo.connect(this.grid.scroller,"invalidatePageNode",this,"_pageDestroyed"));this._connects.push(dojo.connect(this.grid,"onCellClick",this,"_onClick"));this._connects.push(dojo.connect(this.grid,"updateRow",this,"_onUpdateRow"));},formatter:function(data,_14c3){var clazz=this.baseClass;var _14c4=this.getValue(_14c3);var _14c5=!!this.disabledMap[_14c3];if(_14c4){clazz+=this.checkedClass;if(_14c5){clazz+=this.checkedDisabledClass;}}else{if(_14c5){clazz+=this.disabledClass;}}if(window.isAccessibilityEnabled&&window.isAccessibilityEnabled===true){var _14c6="";try{var _14c7=dojo.attr(this.grid.id+"_rowSelector_a11y-1-context","innerHTML");var keys=dojo.attr(this.grid.id+"_rowSelector_a11y-1-keys","innerHTML").split(",");var store=this.grid.store;var item=store._items[_14c3];var _14c8=dojo.map(keys,function(key){return store.getValue(item,key);});_14c6=misys.getLocalization("unchecked")+dojo.string.substitute(_14c7,_14c8);}catch(exc){_14c6="Onclick selects/deselects the row ";}return ["<div tabindex = -1 ","id = '"+this.grid.id+"_rowSelector_"+_14c3+"' ","name = '"+this.grid.id+"_rowSelector' class = '"+clazz+"' ","role = 'checkbox' aria-checked = '"+_14c4+"' aria-disabled = '"+_14c5+"' aria-label = '"+dojo.string.substitute(this.grid._nls["indirectSelection"+this.inputType],[_14c3+1])+(_14c4?this.checkedText:this.unCheckedText)+"'>","<span class = '"+this.statusTextClass+"'>"+(_14c4?this.checkedText:this.unCheckedText)+"</span>","<span class = 'sr-only' aria-live='polite' id='"+this.grid.id+"_rowSelector_"+_14c3+"_a11y_text' class='sr-only'>"+_14c6+" </span>","</div>"].join("");}else{return ["<div tabindex = -1 ","id = '"+this.grid.id+"_rowSelector_"+_14c3+"' ","name = '"+this.grid.id+"_rowSelector' class = '"+clazz+"' ","role = 'presentation' aria-checked = '"+_14c4+"' aria-disabled = '"+_14c5+"' aria-label = '"+dojo.string.substitute(this.grid._nls["indirectSelection"+this.inputType],[_14c3+1])+"'>","<span class = '"+this.statusTextClass+"'>"+(_14c4?this.checkedText:this.unCheckedText)+"</span>","</div>"].join("");}},setValue:function(_14c9,_14ca){},getValue:function(_14cb){return this.grid.selection.isSelected(_14cb);},toggleRow:function(index,value){this._nativeSelect(index,value);},setDisabled:function(index,_14cc){if(index<0){return;}this._toggleDisabledStyle(index,_14cc);},disabled:function(index){return !!this.disabledMap[index];},_onClick:function(e){if(e.cell===this){this._selectRow(e);}},_dokeyup:function(e){if(e.cellIndex==this.index&&e.rowIndex>=0&&(e.keyCode==dojo.keys.SPACE||e.keyCode==dojo.keys.ENTER)){this._selectRow(e);}},focus:function(_14cd){var _14ce=this.map[_14cd];if(_14ce){_14ce.focus();}},_focusEndingCell:function(_14cf,_14d0){var cell=this.grid.getCell(_14d0);this.grid.focus.setFocusCell(cell,_14cf);},_nativeSelect:function(index,value){this.grid.selection[value?"select":"deselect"](index);},_onSelected:function(index){this._toggleCheckedStyle(index,true);},_onDeselected:function(index){this._toggleCheckedStyle(index,false);},_onUpdateRow:function(index){delete this.map[index];},_toggleCheckedStyle:function(index,value){var _14d1=this._getSelector(index);if(_14d1){dojo.toggleClass(_14d1,this.checkedClass,value);if(this.disabledMap[index]){dojo.toggleClass(_14d1,this.checkedDisabledClass,value);}dijit.setWaiState(_14d1,"checked",value);if(this.inA11YMode){dojo.attr(_14d1.firstChild,"innerHTML",value?this.checkedText:this.unCheckedText);}if(window.isAccessibilityEnabled&&window.isAccessibilityEnabled===true){var _14d2=(value)?(this.inputType+" "+misys.getLocalization("checked")+"."):(this.inputType+" "+misys.getLocalization("unchecked")+".");dojo.attr(dojo.query("#"+this.grid.id+"_rowSelector_"+index)[0],"aria-label",dojo.string.substitute(this.grid._nls["indirectSelection"+this.inputType],[index+1])+" "+_14d2);try{var _14d3=dojo.attr(dojo.query("#"+this.grid.id+"_rowSelector_"+index+"_a11y_text")[0],"innerHTML");_14d3=_14d3.replace(misys.getLocalization("unchecked"),"");_14d3=_14d3.replace(misys.getLocalization("checked"),"");var _14d4=(value)?misys.getLocalization("checked"):misys.getLocalization("unchecked");dojo.attr(dojo.query("#"+this.grid.id+"_rowSelector_"+index+"_a11y_text")[0],"innerHTML",_14d4+_14d3);}catch(exc){}}}},_toggleDisabledStyle:function(index,_14d5){var _14d6=this._getSelector(index);if(_14d6){dojo.toggleClass(_14d6,this.disabledClass,_14d5);if(this.getValue(index)){dojo.toggleClass(_14d6,this.checkedDisabledClass,_14d5);}dijit.setWaiState(_14d6,"disabled",_14d5);}this.disabledMap[index]=_14d5;if(index>=0){this.disabledCount+=_14d5?1:-1;}},_getSelector:function(index){var _14d7=this.map[index];if(!_14d7){var _14d8=this.view.rowNodes[index];if(_14d8){_14d7=dojo.query(".dojoxGridRowSelector",_14d8)[0];if(_14d7){this.map[index]=_14d7;}}}return _14d7;},_pageDestroyed:function(_14d9){var _14da=this.grid.scroller.rowsPerPage;var start=_14d9*_14da,end=start+_14da-1;for(var i=start;i<=end;i++){if(!this.map[i]){continue;}dojo.destroy(this.map[i]);delete this.map[i];}},destroy:function(){for(var i in this.map){dojo.destroy(this.map[i]);delete this.map[i];}for(i in this.disabledMap){delete this.disabledMap[i];}dojo.forEach(this._connects,dojo.disconnect);dojo.forEach(this._subscribes,dojo.unsubscribe);delete this._connects;delete this._subscribes;}});dojo.declare("misys.grid.SingleRowSelector",misys.grid.RowSelector,{inputType:"Radio",_selectRow:function(e){var index=e.rowIndex;if(this.disabledMap[index]){return;}this._focusEndingCell(index,0);this._nativeSelect(index,!this.grid.selection.selected[index]);}});dojo.declare("misys.grid.MultipleRowSelector",misys.grid.RowSelector,{inputType:"CheckBox",swipeStartRowIndex:-1,swipeMinRowIndex:-1,swipeMaxRowIndex:-1,toSelect:false,lastClickRowIdx:-1,toggleAllTrigerred:false,unCheckedText:"&#9633;",constructor:function(){this._connects.push(dojo.connect(dojo.doc,"onmouseup",this,"_domouseup"));this._connects.push(dojo.connect(this.grid,"onRowMouseOver",this,"_onRowMouseOver"));this._connects.push(dojo.connect(this.grid.focus,"move",this,"_swipeByKey"));this._connects.push(dojo.connect(this.grid,"onCellMouseDown",this,"_onMouseDown"));if(this.headerSelector){this._connects.push(dojo.connect(this.grid.views,"render",this,"_addHeaderSelector"));this._connects.push(dojo.connect(this.grid,"onSelectionChanged",this,"_onSelectionChanged"));this._connects.push(dojo.connect(this.grid,"onKeyDown",this,function(e){if(e.rowIndex==-1&&e.cellIndex==this.index&&(e.keyCode==dojo.keys.SPACE||e.keyCode==dojo.keys.ENTER)){this._toggletHeader();}}));}},toggleAllSelection:function(_14db){var grid=this.grid,_14dc=grid.selection;if(_14db){_14dc.selectRange(0,grid.rowCount-1);}else{_14dc.deselectAll();}this.toggleAllTrigerred=true;var _14dd=this.grid.rowCount;for(var i=0;i<_14dd;i++){var item=this.grid.getItem(i);var flag;if(item){flag=this.grid.store.getValue(item,"disable_selection");}if(flag==="Y"){this.grid.rowSelectCell.toggleRow(i,false);}}},_onMouseDown:function(e){if(e.cell==this){this._startSelection(e.rowIndex);dojo.stopEvent(e);}},_onRowMouseOver:function(e){this._updateSelection(e,0);},_domouseup:function(e){if(dojo.isIE){this.view.content.decorateEvent(e);}var _14de=e.cellIndex>=0&&this.inSwipeSelection()&&!this.grid.edit.isEditRow(e.rowIndex);if(_14de){this._focusEndingCell(e.rowIndex,e.cellIndex);}this._finishSelect();},_dokeyup:function(e){this.inherited(arguments);if(!e.shiftKey){this._finishSelect();}},_startSelection:function(_14df){this.swipeStartRowIndex=this.swipeMinRowIndex=this.swipeMaxRowIndex=_14df;this.toSelect=!this.getValue(_14df);},_updateSelection:function(e,delta){if(!this.inSwipeSelection()){return;}var byKey=delta!==0;var _14e0=e.rowIndex,_14e1=_14e0-this.swipeStartRowIndex+delta;if(_14e1>0&&this.swipeMaxRowIndex<_14e0+delta){this.swipeMaxRowIndex=_14e0+delta;}if(_14e1<0&&this.swipeMinRowIndex>_14e0+delta){this.swipeMinRowIndex=_14e0+delta;}var min=_14e1>0?this.swipeStartRowIndex:_14e0+delta;var max=_14e1>0?_14e0+delta:this.swipeStartRowIndex;for(var i=this.swipeMinRowIndex;i<=this.swipeMaxRowIndex;i++){if(this.disabledMap[i]||i<0){continue;}if(i>=min&&i<=max){this._nativeSelect(i,this.toSelect);}else{if(!byKey){this._nativeSelect(i,!this.toSelect);}}}},_swipeByKey:function(_14e2,_14e3,e){if(!e||_14e2===0||!e.shiftKey||e.cellIndex!=this.index||this.grid.focus.rowIndex<0){return;}var _14e4=e.rowIndex;if(this.swipeStartRowIndex<0){this.swipeStartRowIndex=_14e4;if(_14e2>0){this.swipeMaxRowIndex=_14e4+_14e2;this.swipeMinRowIndex=_14e4;}else{this.swipeMinRowIndex=_14e4+_14e2;this.swipeMaxRowIndex=_14e4;}this.toSelect=this.getValue(_14e4);}this._updateSelection(e,_14e2);},_finishSelect:function(){this.swipeStartRowIndex=-1;this.swipeMinRowIndex=-1;this.swipeMaxRowIndex=-1;this.toSelect=false;},inSwipeSelection:function(){return this.swipeStartRowIndex>=0;},_nativeSelect:function(index,value){this.grid.selection[value?"addToSelection":"deselect"](index);},_selectRow:function(e){var _14e5=e.rowIndex;if(this.disabledMap[_14e5]){return;}dojo.stopEvent(e);this._focusEndingCell(_14e5,0);var delta=_14e5-this.lastClickRowIdx;var _14e6=!this.grid.selection.selected[_14e5];if(this.lastClickRowIdx>=0&&!e.ctrlKey&&!e.altKey&&e.shiftKey){var min=delta>0?this.lastClickRowIdx:_14e5;var max=delta>0?_14e5:this.lastClickRowIdx;for(var i=min;i>=0&&i<=max;i++){this._nativeSelect(i,_14e6);}}else{this._nativeSelect(_14e5,_14e6);}this.lastClickRowIdx=_14e5;},getValue:function(_14e7){if(_14e7==-1){var g=this.grid;return g.rowCount>0&&g.rowCount<=g.selection.getSelectedCount();}return this.inherited(arguments);},_addHeaderSelector:function(){var _14e8=this.view.getHeaderCellNode(this.index);if(!_14e8){return;}dojo.empty(_14e8);var g=this.grid;var _14e9=null;if(window.isAccessibilityEnabled&&window.isAccessibilityEnabled===true){if(!dojo.byId(g.id+"_rowSelector_a11y-1-context")){var _14ea=dojo.filter(this.grid.layout.cells,function(_14eb){return (_14eb.a11ySelectionContext==="true");});var _14ec="";var _14ed="";var iTemp=0;dojo.map(_14ea,function(_14ee){if(_14ec==""){_14ec=_14ee.name+": ${"+(iTemp++)+"}";_14ed=_14ee.field;}else{_14ec=_14ec+", "+misys.getLocalization("with")+" "+_14ee.name+" ${"+(iTemp++)+"}";_14ed=_14ed+","+_14ee.field;}});this.grid.domNode.appendChild(dojo.create("span",{"id":g.id+"_rowSelector_a11y-1-context","class":"sr-only","innerHTML":_14ec}));this.grid.domNode.appendChild(dojo.create("span",{"id":g.id+"_rowSelector_a11y-1-keys","class":"sr-only","innerHTML":_14ed}));}_14e9=_14e8.appendChild(dojo.create("div",{"tabindex":-1,"id":g.id+"_rowSelector_-1","class":this.baseClass,"role":"checkbox","aria-checked":"false","aria-describedby":g.id+"_rowSelector_a11y-1-text","innerHTML":"<span  class = 'sr-only' aria-live='polite' id='"+g.id+"_rowSelector_a11y-1-text' class='sr-only'/>"}));}else{_14e9=_14e8.appendChild(dojo.create("div",{"tabindex":-1,"id":g.id+"_rowSelector_-1","class":this.baseClass,"role":"presentation","innerHTML":"<span class = '"+this.statusTextClass+"'></span><span style='height: 0; width: 0; overflow: hidden; display: block;'>"+g._nls["selectAll"]+"</span>"}));}this.map[-1]=_14e9;var idx=this._headerSelectorConnectIdx;if(idx!==undefined){dojo.disconnect(this._connects[idx]);this._connects.splice(idx,1);}this._headerSelectorConnectIdx=this._connects.length;this._connects.push(dojo.connect(_14e9,"onclick",this,"_toggletHeader"));if(window.isAccessibilityEnabled&&window.isAccessibilityEnabled===true){try{var _14ef=misys.getLocalization("unchecked")+this.grid.paginationEnhanced.plugin.paginators[0].descriptionDiv.innerHTML;dojo.attr(this.grid.id+"_rowSelector_a11y-1-text","innerHTML",_14ef);}catch(exc){}}this._onSelectionChanged();},_toggletHeader:function(){if(!!this.disabledMap[-1]){return;}this.grid._selectingRange=true;this.toggleAllSelection(!this.getValue(-1));this._onSelectionChanged();this.grid._selectingRange=false;if(window.isAccessibilityEnabled&&window.isAccessibilityEnabled===true){try{var _14f0=this.grid.paginationEnhanced.plugin.paginators[0].descriptionDiv.innerHTML;var _14f1=!this.getValue(-1)?misys.getLocalization("unchecked"):misys.getLocalization("checked");dojo.attr(this.grid.id+"_rowSelector_a11y-1-text","innerHTML",_14f1+_14f0);}catch(exc){}}},_onSelectionChanged:function(){var g=this.grid;if(!this.map[-1]||g._selectingRange){return;}this._toggleCheckedStyle(-1,this.getValue(-1));},_toggleDisabledStyle:function(index,_14f2){this.inherited(arguments);if(this.headerSelector){var _14f3=(this.grid.rowCount==this.disabledCount);if(_14f3!=!!this.disabledMap[-1]){arguments[0]=-1;arguments[1]=_14f3;this.inherited(arguments);}}}});dojox.grid.EnhancedGrid.registerPlugin(misys.grid.IndirectSelection,{"preInit":true});}if(!dojo._hasResource["misys.calendar.Calendar"]){dojo._hasResource["misys.calendar.Calendar"]=true;dojo.provide("misys.calendar.Calendar");dojo.experimental("misys.calendar.Calendar");dojo.declare("misys.calendar.Calendar",[dijit.Calendar],{templateString:dojo.cache("misys.calendar","templates/Calendar.html","<table cellspacing=\"0\" cellpadding=\"0\" class=\"dijitCalendarContainer\" role=\"grid\" dojoAttachEvent=\"onkeypress: _onKeyPress\" aria-labelledby=\"${id}_year calendar-instructions\">\n\t<thead>\n\t\t<tr class=\"dijitReset dijitCalendarMonthContainer\" valign=\"top\">\n\t\t\t<th id=\"decrement_month\" class='dijitReset dijitCalendarArrow' dojoAttachPoint=\"decrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarDecrease\" role=\"presentation\"/>\n\t\t\t\t<span dojoAttachPoint=\"decreaseArrowNode\" class=\"dijitA11ySideArrow\">-</span>\n\t\t\t</th>\n\t\t\t\n\t\t\t<th id=\"dijit_reset\" dojoAttachPoint=\"monthLabel\" class='dijitReset' colspan=\"5\">\n\t\t\t\t<div class=\"dijitVisible\">\n\t\t\t\t\t<div class=\"dijitPopup dijitMenu dijitMenuPassive dijitHidden\" dojoAttachPoint=\"monthDropDownButton\">\n\t\t\t\t\t\t<div class=\"dijitCalendarMonthLabelTemplate dijitCalendarMonthLabel\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div dojoAttachPoint=\"monthLabelSpacer\" class=\"dijitSpacer\"></div>\n\t\t\t\t<div dojoAttachPoint=\"monthLabelNode\" class=\"dijitCalendarMonthLabel dijitInline dijitVisible\" dojoAttachEvent=\"onmousedown: _onMonthToggle\"></div>\n\t\t\t</th>\n\t\t\t\n\n\t\t\t<!--  th dojoAttachPoint=\"monthLabel\" class='dijitReset' colspan=\"5\">\n\t\t\t\t<div dojoType=\"dijit.form.DropDownButton\" dojoAttachPoint=\"monthDropDownButton\"\n\t\t\t\t\tid=\"${id}_mddb\" tabIndex=\"-1\">\n\t\t\t\t</div>\n\t\t\t</th>\n \t\t\t-->\n\t\t\t<th id=\"increment_month\" class='dijitReset dijitCalendarArrow' dojoAttachPoint=\"incrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarIncrease\" role=\"presentation\"/>\n\t\t\t\t<span dojoAttachPoint=\"increaseArrowNode\" class=\"dijitA11ySideArrow\">+</span>\n\t\t\t</th>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<th id=\"header\" class=\"dijitReset dijitCalendarDayLabelTemplate\" role=\"columnheader\"><span class=\"dijitCalendarDayLabel\"></span></th>\n\t\t</tr>\n\t</thead>\n\t<tbody dojoAttachEvent=\"onclick: _onDayClick, onmouseover: _onDayMouseOver, onmouseout: _onDayMouseOut, onmousedown: _onDayMouseDown, onmouseup: _onDayMouseUp\" class=\"dijitReset dijitCalendarBodyContainer\">\n\t\t<tr class=\"dijitReset dijitCalendarWeekTemplate\" role=\"row\">\n\t\t\t<td class=\"dijitReset dijitCalendarDateTemplate\" role=\"gridcell\"><span class=\"dijitCalendarDateLabel\"></span></td>\n\t\t</tr>\n\t</tbody>\n\t<tfoot class=\"dijitReset dijitCalendarYearContainer\">\n\t\t<tr>\n\t\t\t<td class='dijitReset' valign=\"top\" colspan=\"7\">\n\t\t\t\t<h3 class=\"dijitCalendarYearLabel\">\n\t\t\t\t\t<span dojoAttachPoint=\"previousYearLabelNode\" class=\"dijitInline dijitCalendarPreviousYear\"></span>\n\t\t\t\t\t<span dojoAttachPoint=\"currentYearLabelNode\" class=\"dijitInline dijitCalendarSelectedYear\" id=\"${id}_year\"></span>\n\t\t\t\t\t<span dojoAttachPoint=\"nextYearLabelNode\" class=\"dijitInline dijitCalendarNextYear\"></span>\n\t\t\t\t</h3>\n\t\t\t</td>\n\t\t</tr>\n\t</tfoot>\n</table>\n"),tooltipTemplateString:"<span class='cal-event'>{content}</span>",tooltipDuration:10000,activeTooltips:[],monthOffset:0,calendarDateHasChanged:false,eventLimit:10,eventsLoaded:false,_onDayClick:function(evt){for(var node=evt.target;node&&!node.dijitDateValue;node=node.parentNode){}if(node&&!dojo.hasClass(node,"dijitCalendarDisabledDate")){this.set("value",node.dijitDateValue);}var _14f4=dojo.date.locale.format(this.value,{selector:"date",datePattern:"yyyyMMdd"});dojo.global.location=misys.getServletURL("/screen/FullEventsScreen?operation=LIST_FEATURES&date="+_14f4);},postCreate:function(){var _14f5=0;var _14f6=this.id;if(_14f6.indexOf("_",1)>0){currentId=_14f6.substring(9,_14f6.length);_14f5=parseInt(currentId,10)-1;if(_14f5<0){_14f5=11;}}if(dijit.byId("calendar_"+_14f5)){dojo.style(this.incrementMonth,"display","none");dojo.style(this.decrementMonth,"display","none");dojo.style(this.nextYearLabelNode,"display","none");dojo.style(this.previousYearLabelNode,"display","none");this.monthLabel.setAttribute("colSpan",7);}this.inherited(arguments);if(this.monthOffset!==0){this._adjustDisplay("month",this.monthOffset);}var _14f7=dojo.byId("CustomerOngoingTasksList")?true:false;var _14f8=dojo.byId("InternalNewsPortlet")?true:false;var _14f9=dojo.byId("OutstandingPerProductChartPortlet")?true:false;var _14fa=dojo.byId("TradeEventsGridPortlet")?true:false;var _14fb=dojo.byId("HomeAccountSummaryListPortlet")?true:false;var _14fc=dojo.byId("ActionRequiredPortlet")?true:false;var _14fd=dojo.byId("OpicsAccountListPortletPlusBalance")?true:false;var _14fe=dojo.byId("TradeCalendarPortlet")?true:false;if(!_14f7&&!_14f8&&!_14f9&&!_14fa&&!_14fb&&!_14fc&&!_14fd){var _14ff=this.id;var _1500;if(_14ff.indexOf("_",1)>0){_1500=_14ff.substring(9,_14ff.length);}var _1501="calendar_"+_1500;if(dijit.byId(_1501)){if(_14fe){dojo.style(_1501,"width",0);dojo.style(_1501,"position","relative");dojo.style(_1501,"left","100%");}}}},_onMonthToggle:function(evt){dojo.stopEvent(evt);var _1502=dojo.date.locale.format(this.currentFocus,{selector:"date",datePattern:"yyyyMM"});var _1503=0;var _1504=0;var _1505=this.id;if(_1505.indexOf("_",1)>0){currentId=_1505.substring(9,_1505.length);_1503=parseInt(currentId,10)+1;_1504=parseInt(currentId,10)-1;if(_1503>11){_1503=0;}if(_1504<0){_1504=11;}}var _1506="&date="+_1502;dojo.global.location=misys.getServletURL("/screen/FullEventsScreen?operation=LIST_FEATURES"+_1506);},_adjustDisplay:function(part,_1507){this.calendarDateHasChanged=true;this.inherited(arguments);},_updateNextDisplay:function(_1508,_1509,adj,_150a){var _150b=_1508+1;if(dijit.byId("calendar_"+_150b)){this._updateNextDisplay(_150b,_1509,adj);dijit.byId("calendar_"+_150b)._adjustDisplay(_1509,adj);}},_populateGrid:function(){var month=new this.dateClassObj(this.currentFocus);month.setDate(1);var _150c=month.getDay(),_150d=this.dateFuncObj.getDaysInMonth(month),_150e=this.dateFuncObj.getDaysInMonth(this.dateFuncObj.add(month,"month",-1)),today=null;if(misys&&misys._config&&misys._config.bankBusinessDate&&misys._config.bankBusinessDate!==""){var _150f=misys._config.bankBusinessDate.substring(0,4);var _1510=misys._config.bankBusinessDate.substring(5,7);var _1511=misys._config.bankBusinessDate.substring(8,10);today=new this.dateClassObj(_150f,_1510-1,_1511);}else{today=new this.dateClassObj();}var _1512=dojo.cldr.supplemental.getFirstDayOfWeek(this.lang);if(_1512>_150c){_1512-=7;}var _1513=dojo.query(".dijitCalendarDateTemplate",this.domNode);_1513.forEach(function(_1514,i){i+=_1512;var date=new this.dateClassObj(month),_1515,clazz="dijitCalendar",adj=0;if(i<_150c){_1515=_150e-_150c+i+1;adj=-1;clazz+="Previous";}else{if(i>=(_150c+_150d)){_1515=i-_150c-_150d+1;adj=1;clazz+="Next";}else{_1515=i-_150c+1;clazz+="Current";}}if(adj){date=this.dateFuncObj.add(date,"month",adj);}date.setDate(_1515);if(!this.dateFuncObj.compare(date,today,"date")){clazz="dijitCalendarCurrentDate "+clazz;}if(this._isSelectedDate(date,this.lang)){clazz="dijitCalendarSelectedDate "+clazz;}if(this.isDisabledDate(date,this.lang)){clazz="dijitCalendarDisabledDate "+clazz;}var _1516=this.getClassForDate(date,this.lang);if(_1516){clazz=_1516+" "+clazz;}var _1517="";if(!this.calendarDateHasChanged&&_1514.className.indexOf("calevent")!==-1){_1517=_1514.className.substring(_1514.className.indexOf("calevent"));}_1514.className=clazz+"Month dijitCalendarDateTemplate "+_1517;_1514.dijitDateValue=date.valueOf();dojo.attr(_1514,"dijitDateValue",date.valueOf());var label=dojo.query(".dijitCalendarDateLabel",_1514)[0],text=date.getDateLocalized?date.getDateLocalized(this.lang):date.getDate();this._setText(label,text);},this);var _1518=dojo.date.locale.getNames("months","wide","standAlone",this.lang);this._setText(this.monthLabelNode,_1518[month.getMonth()]);var y=month.getFullYear()-1;var d=new this.dateClassObj();dojo.forEach(["previous","current","next"],function(name){d.setFullYear(y++);this._setText(this[name+"YearLabelNode"],this.dateLocaleModule.format(d,{selector:"year",locale:this.lang}));},this);dojo.query(".calendarLoader").forEach(function(d){dojo.replaceClass(d,"");});var _1519=this;if(!this.eventsLoaded){var _151a=dojo.byId("CustomerOngoingTasksList")?true:false;var _151b=dojo.byId("InternalNewsPortlet")?true:false;var _151c=dojo.byId("OutstandingPerProductChartPortlet")?true:false;var _151d=dojo.byId("TradeEventsGridPortlet")?true:false;var _151e=dojo.byId("HomeAccountSummaryListPortlet")?true:false;var _151f=dojo.byId("ActionRequiredPortlet")?true:false;var _1520=dojo.byId("OpicsAccountListPortletPlusBalance")?true:false;if(!_151a&&!_151b&&!_151c&&!_151d&&!_151e&&!_151f&&!_1520){if(dojo.byId("EventsPortlet")){dojo.style("EventsPortlet","width",10);dojo.style("EventsPortlet","position","relative");dojo.style("EventsPortlet","left","100%");}}var _1521="";var _1522="";var _1523=(_1521!=="")?new Date(_1521).getTime():"";var _1524=(_1522!=="")?new Date(_1522).getTime():"";var _1525=[];var _1526=misys.xhrPost({url:misys.getServletURL("/screen/AjaxScreen/action/GetCalendarEvents"),handleAs:"json",content:{inputdate:this.currentFocus.getTime(),startdate:_1523,enddate:_1524},load:function(_1527,_1528){dojo.forEach(_1527.events,function(ev){_1525.push(ev);});}});_1526.then(function(){dojo.forEach(_1519.activeTooltips,function(tId){dijit.byId(tId).destroy();});_1519.activeTooltips=[];setTimeout(function(){var _1529=_1519.currentFocus.getMonth();_1513.forEach(function(td){var _152a=new Date(td.dijitDateValue);if(_152a.getMonth()===_1529){var _152b=dojo.filter(_1525,function(event){return (dojo.date.compare(_152a,new Date(event.DATE),"date")===0);});if(_152b.length>0){var _152c="";var _152d="";dojo.forEach(_152b,function(event,i){if(i<=_1519.eventLimit){if(i===0){_152d=_1519.id+event.DATE;td.id=_152d;td.className+=" "+event.CSS;}_152c+=event.TITLE;if(event.REF_ID){_152c+=" - "+event.REF_ID;}_152c+="<br/>";}});if(_152b.length>_1519.eventLimit){_152c+=" ...";}var _152e=_152d+_152a.getTime();_1519.activeTooltips.push(_152e);new dijit.Tooltip({connectId:[_152d],id:_152e,duration:_1519.tooltipDuration,label:dojo.replace(_1519.tooltipTemplateString,{content:_152c})});}}});},500);});this.eventsLoaded=true;}var _152f=function(_1530,_1531,adj){_1519._connects.push(dijit.typematic.addMouseListener(_1519[_1530],_1519,function(count){if(count>=0){var _1532=parseInt(this.id.substring(9,this.id.length),10);_1519._updateNextDisplay(_1532,_1531,adj,_1530);_1519._adjustDisplay(_1531,adj);var _1533=parseInt(_1532,10)+1;var _1534=parseInt(_1532,10)+2;var _1535=parseInt(_1532,10)-1;var _1536=dijit.byId("calendar_"+_1533);if(_1533>11){_1533=0;}if(_1535<0){_1535=11;}var _1537=dojo.date.locale.format(_1519.currentFocus,{selector:"date",datePattern:"yyyyMM"});var _1538=new _1519.dateClassObj(_1519.currentFocus);_1538.setDate(1);var _1539=dojo.date.locale.format(_1538,{selector:"date",fullYear:true});var range=1;if(_1536){range=3;}var _153a=dojo.date.add(_1538,"month",range);_153a=dojo.date.add(_153a,"day",-1);_153a=dojo.date.locale.format(_153a,{selector:"date",fullYear:true});var _153b="";var _153c="";var _153d="";var _153e="";if(dojo.byId("TransactionSearchForm")){_153c=dijit.byId("product_code")?dijit.byId("product_code").get("value"):"";_153d=dijit.byId("ref_id")?dijit.byId("ref_id").get("value"):"";_153e=dijit.byId("entity")?dijit.byId("entity").get("value"):"";if(dijit.byId("startdate")&&dijit.byId("enddate")){if(adj!==-1){dijit.byId("enddate").set("displayedValue",_1539);}dijit.byId("startdate").set("displayedValue",_1539);dijit.byId("enddate").set("displayedValue",_153a);}}misys.grid.reloadForSearchTerms();_1519.eventsLoaded=false;_1519._populateGrid();if(_1536){_1536.eventsLoaded=false;_1536._populateGrid();var _153f=dijit.byId("calendar_"+_1534);_153f.eventsLoaded=false;_153f._populateGrid();}}},0.8,500));};_152f("incrementMonth","month",1);_152f("decrementMonth","month",-1);_152f("nextYearLabelNode","year",1);_152f("previousYearLabelNode","year",-1);this.calendarDateHasChanged=false;}});}if(!dojo._hasResource["dijit.TitlePane"]){dojo._hasResource["dijit.TitlePane"]=true;dojo.provide("dijit.TitlePane");dojo.declare("dijit.TitlePane",[dijit.layout.ContentPane,dijit._Templated,dijit._CssStateMixin],{title:"",open:true,toggleable:true,tabIndex:"0",duration:dijit.defaultDuration,baseClass:"dijitTitlePane",templateString:dojo.cache("dijit","templates/TitlePane.html","<div>\n\t<div dojoAttachEvent=\"onclick:_onTitleClick, onkeypress:_onTitleKey\"\n\t\t\tclass=\"dijitTitlePaneTitle\" dojoAttachPoint=\"titleBarNode\">\n\t\t<div class=\"dijitTitlePaneTitleFocus\" dojoAttachPoint=\"focusNode\">\n\t\t\t<img src=\"${_blankGif}\" alt=\"\" dojoAttachPoint=\"arrowNode\" class=\"dijitArrowNode\" role=\"presentation\"\n\t\t\t/><span dojoAttachPoint=\"arrowNodeInner\" class=\"dijitArrowNodeInner\"></span\n\t\t\t><span dojoAttachPoint=\"titleNode\" class=\"dijitTitlePaneTextNode\"></span>\n\t\t</div>\n\t</div>\n\t<div class=\"dijitTitlePaneContentOuter\" dojoAttachPoint=\"hideNode\" role=\"presentation\">\n\t\t<div class=\"dijitReset\" dojoAttachPoint=\"wipeNode\" role=\"presentation\">\n\t\t\t<div class=\"dijitTitlePaneContentInner\" dojoAttachPoint=\"containerNode\" role=\"region\" id=\"${id}_pane\">\n\t\t\t\t<!-- nested divs because wipeIn()/wipeOut() doesn't work right on node w/padding etc.  Put padding on inner div. -->\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n"),attributeMap:dojo.delegate(dijit.layout.ContentPane.prototype.attributeMap,{title:{node:"titleNode",type:"innerHTML"},tooltip:{node:"focusNode",type:"attribute",attribute:"title"},id:""}),buildRendering:function(){this.inherited(arguments);dojo.setSelectable(this.titleNode,false);},postCreate:function(){this.inherited(arguments);if(this.toggleable){this._trackMouseState(this.titleBarNode,"dijitTitlePaneTitle");}var _1540=this.hideNode,_1541=this.wipeNode;this._wipeIn=dojo.fx.wipeIn({node:this.wipeNode,duration:this.duration,beforeBegin:function(){_1540.style.display="";}});this._wipeOut=dojo.fx.wipeOut({node:this.wipeNode,duration:this.duration,onEnd:function(){_1540.style.display="none";}});},_setOpenAttr:function(open,_1542){dojo.forEach([this._wipeIn,this._wipeOut],function(_1543){if(_1543&&_1543.status()=="playing"){_1543.stop();}});if(_1542){var anim=this[open?"_wipeIn":"_wipeOut"];anim.play();}else{this.hideNode.style.display=this.wipeNode.style.display=open?"":"none";}if(this._started){if(open){this._onShow();}else{this.onHide();}}this.arrowNodeInner.innerHTML=open?"-":"+";dijit.setWaiState(this.containerNode,"hidden",open?"false":"true");dijit.setWaiState(this.focusNode,"pressed",open?"true":"false");this._set("open",open);this._setCss();},_setToggleableAttr:function(_1544){dijit.setWaiRole(this.focusNode,_1544?"button":"heading");if(_1544){dijit.setWaiState(this.focusNode,"controls",this.id+"_pane");dojo.attr(this.focusNode,"tabIndex",this.tabIndex);}else{dojo.removeAttr(this.focusNode,"tabIndex");}this._set("toggleable",_1544);this._setCss();},_setContentAttr:function(_1545){if(!this.open||!this._wipeOut||this._wipeOut.status()=="playing"){this.inherited(arguments);}else{if(this._wipeIn&&this._wipeIn.status()=="playing"){this._wipeIn.stop();}dojo.marginBox(this.wipeNode,{h:dojo.marginBox(this.wipeNode).h});this.inherited(arguments);if(this._wipeIn){this._wipeIn.play();}else{this.hideNode.style.display="";}}},toggle:function(){this._setOpenAttr(!this.open,true);},_setCss:function(){var node=this.titleBarNode||this.focusNode;var _1546=this._titleBarClass;this._titleBarClass="dijit"+(this.toggleable?"":"Fixed")+(this.open?"Open":"Closed");dojo.replaceClass(node,this._titleBarClass,_1546||"");this.arrowNodeInner.innerHTML=this.open?"-":"+";},_onTitleKey:function(e){if(e.charOrCode==dojo.keys.ENTER||e.charOrCode==" "){if(this.toggleable){this.toggle();}dojo.stopEvent(e);}else{if(e.charOrCode==dojo.keys.DOWN_ARROW&&this.open){this.containerNode.focus();e.preventDefault();}}},_onTitleClick:function(){if(this.toggleable){this.toggle();}},setTitle:function(title){dojo.deprecated("dijit.TitlePane.setTitle() is deprecated.  Use set('title', ...) instead.","","2.0");this.set("title",title);}});}if(!dojo._hasResource["dojox.html._base"]){dojo._hasResource["dojox.html._base"]=true;dojo.provide("dojox.html._base");(function(){if(dojo.isIE){var _1547=/(AlphaImageLoader\([^)]*?src=(['"]))(?![a-z]+:|\/)([^\r\n;}]+?)(\2[^)]*\)\s*[;}]?)/g;}var _1548=/(?:(?:@import\s*(['"])(?![a-z]+:|\/)([^\r\n;{]+?)\1)|url\(\s*(['"]?)(?![a-z]+:|\/)([^\r\n;]+?)\3\s*\))([a-z, \s]*[;}]?)/g;var _1549=dojox.html._adjustCssPaths=function(_154a,_154b){if(!_154b||!_154a){return;}if(_1547){_154b=_154b.replace(_1547,function(_154c,pre,delim,url,post){return pre+(new dojo._Url(_154a,"./"+url).toString())+post;});}return _154b.replace(_1548,function(_154d,_154e,_154f,_1550,_1551,media){if(_154f){return "@import \""+(new dojo._Url(_154a,"./"+_154f).toString())+"\""+media;}else{return "url("+(new dojo._Url(_154a,"./"+_1551).toString())+")"+media;}});};var _1552=/(<[a-z][a-z0-9]*\s[^>]*)(?:(href|src)=(['"]?)([^>]*?)\3|style=(['"]?)([^>]*?)\5)([^>]*>)/gi;var _1553=dojox.html._adjustHtmlPaths=function(_1554,cont){var url=_1554||"./";return cont.replace(_1552,function(tag,start,name,delim,_1555,_1556,_1557,end){return start+(name?(name+"="+delim+(new dojo._Url(url,_1555).toString())+delim):("style="+_1556+_1549(url,_1557)+_1556))+end;});};var _1558=dojox.html._snarfStyles=function(_1559,cont,_155a){_155a.attributes=[];return cont.replace(/(?:<style([^>]*)>([\s\S]*?)<\/style>|<link\s+(?=[^>]*rel=['"]?stylesheet)([^>]*?href=(['"])([^>]*?)\4[^>\/]*)\/?>)/gi,function(_155b,_155c,_155d,_155e,delim,href){var i,attr=(_155c||_155e||"").replace(/^\s*([\s\S]*?)\s*$/i,"$1");if(_155d){i=_155a.push(_1559?_1549(_1559,_155d):_155d);}else{i=_155a.push("@import \""+href+"\";");attr=attr.replace(/\s*(?:rel|href)=(['"])?[^\s]*\1\s*/gi,"");}if(attr){attr=attr.split(/\s+/);var atObj={},tmp;for(var j=0,e=attr.length;j<e;j++){tmp=attr[j].split("=");atObj[tmp[0]]=tmp[1].replace(/^\s*['"]?([\s\S]*?)['"]?\s*$/,"$1");}_155a.attributes[i-1]=atObj;}return "";});};var _155f=dojox.html._snarfScripts=function(cont,byRef){byRef.code="";cont=cont.replace(/<[!][-][-](.|\s)*?[-][-]>/g,function(_1560){return _1560.replace(/<(\/?)script\b/ig,"&lt;$1Script");});function _1561(src){if(byRef.downloadRemote){src=src.replace(/&([a-z0-9#]+);/g,function(m,name){switch(name){case "amp":return "&";case "gt":return ">";case "lt":return "<";default:return name.charAt(0)=="#"?String.fromCharCode(name.substring(1)):"&"+name+";";}});dojo.xhrGet({url:src,sync:true,load:function(code){byRef.code+=code+";";},error:byRef.errBack});}};return cont.replace(/<script\s*(?![^>]*type=['"]?(?:dojo\/|text\/html\b))(?:[^>]*?(?:src=(['"]?)([^>]*?)\1[^>]*)?)*>([\s\S]*?)<\/script>/gi,function(_1562,delim,src,code){if(src){_1561(src);}else{byRef.code+=code;}return "";});};var _1563=dojox.html.evalInGlobal=function(code,_1564){_1564=_1564||dojo.doc.body;var n=_1564.ownerDocument.createElement("script");n.type="text/javascript";_1564.appendChild(n);n.text=code;};dojo.declare("dojox.html._ContentSetter",[dojo.html._ContentSetter],{adjustPaths:false,referencePath:".",renderStyles:false,executeScripts:false,scriptHasHooks:false,scriptHookReplacement:null,_renderStyles:function(_1565){this._styleNodes=[];var st,att,_1566,doc=this.node.ownerDocument;var head=doc.getElementsByTagName("head")[0];for(var i=0,e=_1565.length;i<e;i++){_1566=_1565[i];att=_1565.attributes[i];st=doc.createElement("style");st.setAttribute("type","text/css");for(var x in att){st.setAttribute(x,att[x]);}this._styleNodes.push(st);head.appendChild(st);if(st.styleSheet){st.styleSheet.cssText=_1566;}else{st.appendChild(doc.createTextNode(_1566));}}},empty:function(){this.inherited("empty",arguments);this._styles=[];},onBegin:function(){this.inherited("onBegin",arguments);var cont=this.content,node=this.node;var _1567=this._styles;if(dojo.isString(cont)){if(this.adjustPaths&&this.referencePath){cont=_1553(this.referencePath,cont);}if(this.renderStyles||this.cleanContent){cont=_1558(this.referencePath,cont,_1567);}if(this.executeScripts){var _1568=this;var byRef={downloadRemote:true,errBack:function(e){_1568._onError.call(_1568,"Exec","Error downloading remote script in \""+_1568.id+"\"",e);}};cont=_155f(cont,byRef);this._code=byRef.code;}}this.content=cont;},onEnd:function(){var code=this._code,_1569=this._styles;if(this._styleNodes&&this._styleNodes.length){while(this._styleNodes.length){dojo.destroy(this._styleNodes.pop());}}if(this.renderStyles&&_1569&&_1569.length){this._renderStyles(_1569);}if(this.executeScripts&&code){if(this.cleanContent){code=code.replace(/(<!--|(?:\/\/)?-->|<!\[CDATA\[|\]\]>)/g,"");}if(this.scriptHasHooks){code=code.replace(/_container_(?!\s*=[^=])/g,this.scriptHookReplacement);}try{_1563(code,this.node);}catch(e){this._onError("Exec","Error eval script in "+this.id+", "+e.message,e);}}this.inherited("onEnd",arguments);},tearDown:function(){this.inherited(arguments);delete this._styles;if(this._styleNodes&&this._styleNodes.length){while(this._styleNodes.length){dojo.destroy(this._styleNodes.pop());}}delete this._styleNodes;dojo.mixin(this,dojo.getObject(this.declaredClass).prototype);}});dojox.html.set=function(node,cont,_156a){if(!_156a){return dojo.html._setNodeContent(node,cont,true);}else{var op=new dojox.html._ContentSetter(dojo.mixin(_156a,{content:cont,node:node}));return op.set();}};})();}if(!dojo._hasResource["dojox.layout.ContentPane"]){dojo._hasResource["dojox.layout.ContentPane"]=true;dojo.provide("dojox.layout.ContentPane");dojo.declare("dojox.layout.ContentPane",dijit.layout.ContentPane,{adjustPaths:false,cleanContent:false,renderStyles:false,executeScripts:true,scriptHasHooks:false,constructor:function(){this.ioArgs={};this.ioMethod=dojo.xhrGet;},onExecError:function(e){},_setContent:function(cont){var _156b=this._contentSetter;if(!(_156b&&_156b instanceof dojox.html._ContentSetter)){_156b=this._contentSetter=new dojox.html._ContentSetter({node:this.containerNode,_onError:dojo.hitch(this,this._onError),onContentError:dojo.hitch(this,function(e){var _156c=this.onContentError(e);try{this.containerNode.innerHTML=_156c;}catch(e){console.error("Fatal "+this.id+" could not change content due to "+e.message,e);}})});}this._contentSetterParams={adjustPaths:Boolean(this.adjustPaths&&(this.href||this.referencePath)),referencePath:this.href||this.referencePath,renderStyles:this.renderStyles,executeScripts:this.executeScripts,scriptHasHooks:this.scriptHasHooks,scriptHookReplacement:"dijit.byId('"+this.id+"')"};this.inherited("_setContent",arguments);}});}if(!dojo._hasResource["dojox.layout.ResizeHandle"]){dojo._hasResource["dojox.layout.ResizeHandle"]=true;dojo.provide("dojox.layout.ResizeHandle");dojo.experimental("dojox.layout.ResizeHandle");dojo.declare("dojox.layout.ResizeHandle",[dijit._Widget,dijit._Templated],{targetId:"",targetContainer:null,resizeAxis:"xy",activeResize:false,activeResizeClass:"dojoxResizeHandleClone",animateSizing:true,animateMethod:"chain",animateDuration:225,minHeight:100,minWidth:100,constrainMax:false,maxHeight:0,maxWidth:0,fixedAspect:false,intermediateChanges:false,startTopic:"/dojo/resize/start",endTopic:"/dojo/resize/stop",templateString:"<div dojoAttachPoint=\"resizeHandle\" class=\"dojoxResizeHandle\"><div></div></div>",postCreate:function(){this.connect(this.resizeHandle,"onmousedown","_beginSizing");if(!this.activeResize){this._resizeHelper=dijit.byId("dojoxGlobalResizeHelper");if(!this._resizeHelper){this._resizeHelper=new dojox.layout._ResizeHelper({id:"dojoxGlobalResizeHelper"}).placeAt(dojo.body());dojo.addClass(this._resizeHelper.domNode,this.activeResizeClass);}}else{this.animateSizing=false;}if(!this.minSize){this.minSize={w:this.minWidth,h:this.minHeight};}if(this.constrainMax){this.maxSize={w:this.maxWidth,h:this.maxHeight};}this._resizeX=this._resizeY=false;var _156d=dojo.partial(dojo.addClass,this.resizeHandle);switch(this.resizeAxis.toLowerCase()){case "xy":this._resizeX=this._resizeY=true;_156d("dojoxResizeNW");break;case "x":this._resizeX=true;_156d("dojoxResizeW");break;case "y":this._resizeY=true;_156d("dojoxResizeN");break;}},_beginSizing:function(e){if(this._isSizing){return false;}dojo.publish(this.startTopic,[this]);this.targetWidget=dijit.byId(this.targetId);this.targetDomNode=this.targetWidget?this.targetWidget.domNode:dojo.byId(this.targetId);if(this.targetContainer){this.targetDomNode=this.targetContainer;}if(!this.targetDomNode){return false;}if(!this.activeResize){var c=dojo.position(this.targetDomNode,true);this._resizeHelper.resize({l:c.x,t:c.y,w:c.w,h:c.h});this._resizeHelper.show();}this._isSizing=true;this.startPoint={x:e.clientX,y:e.clientY};var mb=this.targetWidget?dojo.marginBox(this.targetDomNode):dojo.contentBox(this.targetDomNode);this.startSize={w:mb.w,h:mb.h};if(this.fixedAspect){var max,val;if(mb.w>mb.h){max="w";val=mb.w/mb.h;}else{max="h";val=mb.h/mb.w;}this._aspect={prop:max};this._aspect[max]=val;}this._pconnects=[];this._pconnects.push(dojo.connect(dojo.doc,"onmousemove",this,"_updateSizing"));this._pconnects.push(dojo.connect(dojo.doc,"onmouseup",this,"_endSizing"));dojo.stopEvent(e);},_updateSizing:function(e){if(this.activeResize){this._changeSizing(e);}else{var tmp=this._getNewCoords(e);if(tmp===false){return;}this._resizeHelper.resize(tmp);}e.preventDefault();},_getNewCoords:function(e){try{if(!e.clientX||!e.clientY){return false;}}catch(e){return false;}this._activeResizeLastEvent=e;var dx=(this.isLeftToRight()?this.startPoint.x-e.clientX:e.clientX-this.startPoint.x),dy=this.startPoint.y-e.clientY,newW=this.startSize.w-(this._resizeX?dx:0),newH=this.startSize.h-(this._resizeY?dy:0);return this._checkConstraints(newW,newH);},_checkConstraints:function(newW,newH){if(this.minSize){var tm=this.minSize;if(newW<tm.w){newW=tm.w;}if(newH<tm.h){newH=tm.h;}}if(this.constrainMax&&this.maxSize){var ms=this.maxSize;if(newW>ms.w){newW=ms.w;}if(newH>ms.h){newH=ms.h;}}if(this.fixedAspect){var ta=this._aspect[this._aspect.prop];if(newW<newH){newH=newW*ta;}else{if(newH<newW){newW=newH*ta;}}}return {w:newW,h:newH};},_changeSizing:function(e){var tmp=this._getNewCoords(e);if(tmp===false){return;}if(this.targetWidget&&dojo.isFunction(this.targetWidget.resize)){this.targetWidget.resize(tmp);}else{if(this.animateSizing){var anim=dojo.fx[this.animateMethod]([dojo.animateProperty({node:this.targetDomNode,properties:{width:{start:this.startSize.w,end:tmp.w}},duration:this.animateDuration}),dojo.animateProperty({node:this.targetDomNode,properties:{height:{start:this.startSize.h,end:tmp.h}},duration:this.animateDuration})]);anim.play();}else{dojo.style(this.targetDomNode,{width:tmp.w+"px",height:tmp.h+"px"});}}if(this.intermediateChanges){this.onResize(e);}},_endSizing:function(e){dojo.forEach(this._pconnects,dojo.disconnect);var pub=dojo.partial(dojo.publish,this.endTopic,[this]);if(!this.activeResize){this._resizeHelper.hide();this._changeSizing(e);setTimeout(pub,this.animateDuration+15);}else{pub();}this._isSizing=false;this.onResize(e);},onResize:function(e){}});dojo.declare("dojox.layout._ResizeHelper",dijit._Widget,{show:function(){dojo.fadeIn({node:this.domNode,duration:120,beforeBegin:function(n){dojo.style(n,"display","");}}).play();},hide:function(){dojo.fadeOut({node:this.domNode,duration:250,onEnd:function(n){dojo.style(n,"display","none");}}).play();},resize:function(dim){dojo.marginBox(this.domNode,dim);}});}if(!dojo._hasResource["dojox.layout.FloatingPane"]){dojo._hasResource["dojox.layout.FloatingPane"]=true;dojo.provide("dojox.layout.FloatingPane");dojo.experimental("dojox.layout.FloatingPane");dojo.declare("dojox.layout.FloatingPane",[dojox.layout.ContentPane,dijit._Templated],{closable:true,dockable:true,resizable:false,maxable:false,resizeAxis:"xy",title:"",dockTo:"",duration:400,contentClass:"dojoxFloatingPaneContent",_showAnim:null,_hideAnim:null,_dockNode:null,_restoreState:{},_allFPs:[],_startZ:100,templateString:dojo.cache("dojox.layout","resources/FloatingPane.html","<div class=\"dojoxFloatingPane\" id=\"${id}\">\n\t<div tabindex=\"0\" role=\"button\" class=\"dojoxFloatingPaneTitle\" dojoAttachPoint=\"focusNode\">\n\t\t<span dojoAttachPoint=\"closeNode\" dojoAttachEvent=\"onclick: close\" class=\"dojoxFloatingCloseIcon\"></span>\n\t\t<span dojoAttachPoint=\"maxNode\" dojoAttachEvent=\"onclick: maximize\" class=\"dojoxFloatingMaximizeIcon\">&thinsp;</span>\n\t\t<span dojoAttachPoint=\"restoreNode\" dojoAttachEvent=\"onclick: _restore\" class=\"dojoxFloatingRestoreIcon\">&thinsp;</span>\t\n\t\t<span dojoAttachPoint=\"dockNode\" dojoAttachEvent=\"onclick: minimize\" class=\"dojoxFloatingMinimizeIcon\">&thinsp;</span>\n\t\t<span dojoAttachPoint=\"titleNode\" class=\"dijitInline dijitTitleNode\"></span>\n\t</div>\n\t<div dojoAttachPoint=\"canvas\" class=\"dojoxFloatingPaneCanvas\">\n\t\t<div dojoAttachPoint=\"containerNode\" role=\"region\" tabindex=\"-1\" class=\"${contentClass}\">\n\t\t</div>\n\t\t<span dojoAttachPoint=\"resizeHandle\" class=\"dojoxFloatingResizeHandle\"></span>\n\t</div>\n</div>\n"),attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{title:{type:"innerHTML",node:"titleNode"}}),postCreate:function(){this.inherited(arguments);new dojo.dnd.Moveable(this.domNode,{handle:this.focusNode});if(!this.dockable){this.dockNode.style.display="none";}if(!this.closable){this.closeNode.style.display="none";}if(!this.maxable){this.maxNode.style.display="none";this.restoreNode.style.display="none";}if(!this.resizable){this.resizeHandle.style.display="none";}else{this.domNode.style.width=dojo.marginBox(this.domNode).w+"px";}this._allFPs.push(this);this.domNode.style.position="absolute";this.bgIframe=new dijit.BackgroundIframe(this.domNode);this._naturalState=dojo.coords(this.domNode);},startup:function(){if(this._started){return;}this.inherited(arguments);if(this.resizable){if(dojo.isIE){this.canvas.style.overflow="auto";}else{this.containerNode.style.overflow="auto";}this._resizeHandle=new dojox.layout.ResizeHandle({targetId:this.id,resizeAxis:this.resizeAxis},this.resizeHandle);}if(this.dockable){var _156e=this.dockTo;if(this.dockTo){this.dockTo=dijit.byId(this.dockTo);}else{this.dockTo=dijit.byId("dojoxGlobalFloatingDock");}if(!this.dockTo){var tmpId,_156f;if(_156e){tmpId=_156e;_156f=dojo.byId(_156e);}else{_156f=dojo.create("div",null,dojo.body());dojo.addClass(_156f,"dojoxFloatingDockDefault");tmpId="dojoxGlobalFloatingDock";}this.dockTo=new dojox.layout.Dock({id:tmpId,autoPosition:"south"},_156f);this.dockTo.startup();}if((this.domNode.style.display=="none")||(this.domNode.style.visibility=="hidden")){this.minimize();}}this.connect(this.focusNode,"onmousedown","bringToTop");this.connect(this.domNode,"onmousedown","bringToTop");this.resize(dojo.coords(this.domNode));this._started=true;},setTitle:function(title){dojo.deprecated("pane.setTitle","Use pane.set('title', someTitle)","2.0");this.set("title",title);},close:function(){if(!this.closable){return;}dojo.unsubscribe(this._listener);this.hide(dojo.hitch(this,function(){this.destroyRecursive();}));},hide:function(_1570){dojo.fadeOut({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,function(){this.domNode.style.display="none";this.domNode.style.visibility="hidden";if(this.dockTo&&this.dockable){this.dockTo._positionDock(null);}if(_1570){_1570();}})}).play();},show:function(_1571){var anim=dojo.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:dojo.hitch(this,function(){this.domNode.style.display="";this.domNode.style.visibility="visible";if(this.dockTo&&this.dockable){this.dockTo._positionDock(null);}if(typeof _1571=="function"){_1571();}this._isDocked=false;if(this._dockNode){this._dockNode.destroy();this._dockNode=null;}})}).play();this.resize(dojo.coords(this.domNode));this._onShow();},minimize:function(){if(!this._isDocked){this.hide(dojo.hitch(this,"_dock"));}},maximize:function(){if(this._maximized){return;}this._naturalState=dojo.position(this.domNode);if(this._isDocked){this.show();setTimeout(dojo.hitch(this,"maximize"),this.duration);}dojo.addClass(this.focusNode,"floatingPaneMaximized");this.resize(dojo.window.getBox());this._maximized=true;},_restore:function(){if(this._maximized){this.resize(this._naturalState);dojo.removeClass(this.focusNode,"floatingPaneMaximized");this._maximized=false;}},_dock:function(){if(!this._isDocked&&this.dockable){this._dockNode=this.dockTo.addNode(this);this._isDocked=true;}},resize:function(dim){dim=dim||this._naturalState;this._currentState=dim;var dns=this.domNode.style;if("t" in dim){dns.top=dim.t+"px";}if("l" in dim){dns.left=dim.l+"px";}dns.width=dim.w+"px";dns.height=dim.h+"px";var _1572={l:0,t:0,w:dim.w,h:(dim.h-this.focusNode.offsetHeight)};dojo.marginBox(this.canvas,_1572);this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){this._singleChild.resize(_1572);}},bringToTop:function(){var _1573=dojo.filter(this._allFPs,function(i){return i!==this;},this);_1573.sort(function(a,b){return a.domNode.style.zIndex-b.domNode.style.zIndex;});_1573.push(this);dojo.forEach(_1573,function(w,x){w.domNode.style.zIndex=this._startZ+(x*2);dojo.removeClass(w.domNode,"dojoxFloatingPaneFg");},this);dojo.addClass(this.domNode,"dojoxFloatingPaneFg");},destroy:function(){this._allFPs.splice(dojo.indexOf(this._allFPs,this),1);if(this._resizeHandle){this._resizeHandle.destroy();}this.inherited(arguments);}});dojo.declare("dojox.layout.Dock",[dijit._Widget,dijit._Templated],{templateString:"<div class=\"dojoxDock\"><ul dojoAttachPoint=\"containerNode\" class=\"dojoxDockList\"></ul></div>",_docked:[],_inPositioning:false,autoPosition:false,addNode:function(_1574){var div=dojo.create("li",null,this.containerNode),node=new dojox.layout._DockNode({title:_1574.title,paneRef:_1574},div);node.startup();return node;},startup:function(){if(this.id=="dojoxGlobalFloatingDock"||this.isFixedDock){this.connect(window,"onresize","_positionDock");this.connect(window,"onscroll","_positionDock");if(dojo.isIE){this.connect(this.domNode,"onresize","_positionDock");}}this._positionDock(null);this.inherited(arguments);},_positionDock:function(e){if(!this._inPositioning){if(this.autoPosition=="south"){setTimeout(dojo.hitch(this,function(){this._inPositiononing=true;var _1575=dojo.window.getBox();var s=this.domNode.style;s.left=_1575.l+"px";s.width=(_1575.w-2)+"px";s.top=(_1575.h+_1575.t)-this.domNode.offsetHeight+"px";this._inPositioning=false;}),125);}}}});dojo.declare("dojox.layout._DockNode",[dijit._Widget,dijit._Templated],{title:"",paneRef:null,templateString:"<li dojoAttachEvent=\"onclick: restore\" class=\"dojoxDockNode\">"+"<span dojoAttachPoint=\"restoreNode\" class=\"dojoxDockRestoreButton\" dojoAttachEvent=\"onclick: restore\"></span>"+"<span class=\"dojoxDockTitleNode\" dojoAttachPoint=\"titleNode\">${title}</span>"+"</li>",restore:function(){this.paneRef.show();this.paneRef.bringToTop();this.destroy();}});}if(!dojo._hasResource["misys.layout.FloatingPane"]){dojo._hasResource["misys.layout.FloatingPane"]=true;dojo.provide("misys.layout.FloatingPane");dojo.experimental("misys.layout.FloatingPane");dojo.declare("misys.layout.FloatingPane",[dojox.layout.FloatingPane],{templateString:dojo.cache("misys.layout","resources/CollaborationFloatingPane.html","<div class=\"dojoxFloatingPane\" id=\"${id}\" dojoAttachPoint=\"floatingWindow\">\n <div tabindex=\"0\" waiRole=\"button\" class=\"dojoxFloatingPaneTitle\" dojoAttachPoint=\"titleBarNode,focusNode\">\n  <span dojoAttachPoint=\"pinNode\" dojoAttachEvent=\"onclick: pin\" class=\"pinButton\"></span>\n  <img src=\"${_blankGif}\" dojoAttachEvent=\"onclick:toggle\" alt=\"\" dojoAttachPoint=\"arrowNode\" class=\"dijitArrowNode\" waiRole=\"presentation\">\n  <span dojoAttachPoint=\"arrowNodeInner\" dojoAttachEvent=\"onclick:toggle\" class=\"dijitArrowNodeInner\"></span>\n  <span dojoAttachPoint=\"titleNode\" dojoAttachEvent=\"onclick:toggle\" class=\"dijitInline dijitTitleNode\"></span>\n </div>\n <div dojoAttachPoint=\"canvas,collabContentNode\" class=\"dojoxFloatingPaneCanvas\" id=\"collaborationWindowContent\">\n  <div dojoAttachPoint=\"containerNode\" waiRole=\"region\" tabindex=\"-1\" class=\"${contentClass}\"></div>\n  <span dojoAttachPoint=\"resizeHandle\" class=\"dojoxFloatingResizeHandle\"></span>\n </div>\n <!-- These are needed by the inherited class, but we don't use them -->\n <span style=\"display:none\">\n  <span dojoAttachPoint=\"closeNode\" class=\"dojoxFloatingCloseIcon\"></span>\n  <span dojoAttachPoint=\"maxNode\" class=\"dojoxFloatingMaximizeIcon\"></span>\n  <span dojoAttachPoint=\"restoreNode\" class=\"dojoxFloatingRestoreIcon\"></span>    \n  <span dojoAttachPoint=\"dockNode\" class=\"dojoxFloatingMinimizeIcon\"></span>\n </span>\n</div>\n"),open:false,pinned:true,_pinnedReference:null,_windowHeight:null,duration:dijit.defaultDuration,_blankGif:misys.getContextualURL("/content/js/dojo/resources/blank.gif"),postCreate:function(){this.inherited(arguments);this.moveable=new dojo.dnd.move.parentConstrainedMoveable(this.domNode,{handle:this.focusNode,constraints:{l:0,t:20,w:window.innerWidth,h:window.innerHeight},within:true});var _1576=this.collabContentNode,_1577=this.floatingWindow;if(this.open){_1576.style.height="auto";_1577.style.height="auto";dojo.style(this.domNode,"height","auto");}else{_1576.style.display="none";dojo.style(this.domNode,"height","30px");}this._setCss();dojo.setSelectable(this.titleNode,false);dijit.setWaiState(this.containerNode,"labelledby",this.titleNode.id);dijit.setWaiState(this.focusNode,"haspopup","true");this._showPanes=function(){_1576.style.height="auto";_1577.style.height="auto";};this._hidePanes=function(){this._windowHeight=dojo.style("collaborationWindowContent","height");_1577.style.height="auto";_1576.style.height="0";};if(!dojo.isIE||dojo.isIE>6){this._fadeOut=dojo.fadeOut({node:_1576,duration:this.duration,onEnd:function(){_1576.style.display="none";}});}else{this._fadeOut=function(){_1576.style.display="none";};}if(!dojo.isIE||dojo.isIE>6){this._fadeIn=dojo.fadeIn({node:_1576,duration:this.duration,beforeBegin:function(){_1576.style.display="inherit";}});}else{this._fadeIn=function(){_1576.style.display="block";};}this.pin();},toggle:function(){var _1578=this[this.open?"_fadeOut":"_fadeIn"];var _1579=this[this.open?"_hidePanes":"_showPanes"];if(_1578&&_1579){_1579();if(_1578.play){_1578.play();}else{_1578();}}else{this.collabContentNode.style.display=this.open?"":"none";}this.open=!(this.open);this._onShow();this._setCss();},pin:function(){if(!this.pinned){this.pinNode.style.background="url('"+misys.getContextualURL("/content/images/pic_pinup.gif")+"')";this._pinnedReference=dojo.connect(window,"onscroll",this,"_positionWindow");misys.connections.push(this._pinnedReference);}else{this.pinNode.style.background="url('"+misys.getContextualURL("/content/images/pic_pindown.gif")+"')";if(this._pinnedReference){dojo.disconnect(this._pinnedReference);}}this.pinned=!this.pinned;},resize:function(dim){dim=dim||this._naturalState;this._currentState=dim;var dns=this.domNode.style;var c=dojo.coords(this.domNode);if("t" in dim){dns.top=c.t+"px";}if("l" in dim){dns.left=c.l+"px";}dns.width=dim.w+"px";dns.height=(this.open)?dim.h+"px":"auto";var _157a=(this.open)?(dim.h-this.focusNode.offsetHeight):0;var _157b={l:0,t:0,w:dim.w,h:_157a};dojo.marginBox(this.canvas,_157b);this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){this._singleChild.resize(_157b);}},bringToTop:function(){return;},_config:{timer:null,heightOffset:null},_positionWindow:function(){if(this._config.timer){clearTimeout(this.timer);}if(!this._config.heightOffset){var _157c=dojo.query(".header");this._config.heightOffset=(_157c.length===1)?dojo.coords(_157c[0]).h:0;}var _157d=dijit.getViewport(),_157e=this.domNode;this.timer=setTimeout(dojo.hitch(this,function(){dojo.fx.slideTo({node:_157e,top:_157d.t+(_157e.offsetHeight/2)+this._config.heightOffset,right:_157e.style.right,left:_157e.style.left,unit:"px"}).play();}),300);},_setCss:function(){var _157f=["dijitClosed","dijitOpen"];var _1580=this.open;var node=this.titleBarNode||this.focusNode;dojo.removeClass(node,_157f[!_1580+0]);node.className+=" "+_157f[_1580+0];this.arrowNodeInner.innerHTML=this.open?"-":"+";}});}if(!dojo._hasResource["misys.widget.Collaboration"]){dojo._hasResource["misys.widget.Collaboration"]=true;dojo.provide("misys.widget.Collaboration");(function(d,dj,m){function _1581(type){var _1582,id;do{m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetTaskId"),sync:true,load:function(_1583,args){id=_1583;},error:function(_1584){throw {name:"CollaborationError",message:"An error occurred when retrieving a Collaboration "+"task ID "+_1584};}});if(id==="false"||id===_1582){throw {name:"CollaborationError",message:"An error occurred when retrieving a Collaboration "+"task ID "+response};}_1582=id;}while(d.byId(type+"_row_"+id));return id;};function _1585(type,id,_1586,_1587){var _1588=dj.byId("public_task_details_assignee_type_nosend_1"),_1589=dj.byId("public_task_details_assignee_type_nosend_2"),_158a=dj.byId("public_task_details_assignee_type_nosend_3"),_158b=dj.byId("public_task_details_assignee_type_nosend_4"),xml;_1586=_1586?_1586:"N";type=type.toLowerCase();var tnxId=dj.byId("tnx_id"),refId=dj.byId("ref_id"),_158c=dj.byId("old_inp_dttm"),_158d=dj.byId("todo_list_id").get("value"),_158e=[dj.byId("sentence_posted_by").get("value")," ",dj.byId("sentence_you").get("value")," "],_158f="01",_1590=d.byId(type+"_master_list"),_1591,_1592,li,text;if(!tnxId||!refId||!_158c){m.dialog.show("ERROR",m.getLocalization("generalCollaborationError"));return false;}switch(type){case "private_tasks":_1591=_1593(id);_1592=dj.byId("private_description_nosend").get("value");break;case "public_tasks":_1591=_1594(id);_158f="02";if(dj.byId("public_task_details_type_nosend_3").get("checked")){_158f="03";}_1592=dj.byId("public_task_details_description_nosend").get("value");break;default:_1591=_1595(id);_158f="03";_158e.push(dj.byId("sentence_to").get("value")," ");_158e.push(dj.byId("notification_task_details_other_user_assignee_login_id_nosend").get("value")," ");_1592=dj.byId("notification_description_nosend").get("value");break;}var _1596;if(d.byId(id+"_container")){_1596=d.byId(id+"_container");}else{_1596=d.create("div",{id:id+"_container"});}_1591.push({name:"task_id",id:"task_id_"+id,value:id},{name:"tnx_id",id:"tnx_id_"+id,value:tnxId.get("value")},{name:"ref_id",id:"ref_id_"+id,value:refId.get("value")},{name:"todo_list_id",id:"todo_list_id_"+id,value:_158d},{name:"old_inp_dttm",id:"old_inp_dttm_"+id,value:_158c.get("value")},{name:"postSave",id:"postSave_"+id,value:_1586});if(_1587){d.forEach(_1591,function(_1597){if(dj.byId(_1597.id||_1597.name)){dj.byId(_1597.id||_1597.name).destroy();}});}d.forEach(_1591,function(_1598){new dj.form.TextBox({id:_1598.id||_1598.name,name:_1598.name,readOnly:true,value:_1598.value,type:"hidden"}).placeAt(_1596);});dojo.place(_1596,dojo.byId(type+"_form"));xml=m.formToXML({selector:"#"+type+"_form",xmlRoot:type,ignoreDisabled:true});m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/SaveTask"),content:{xml_string:xml}});if(_158f==="03"){_158e.push(dj.byId("sentence_to").get("value")," ");if(_1588&&_1588.get("checked")){_158e.push(dj.byId("public_task_details_other_user_assignee_login_id_nosend").get("value")," ");}else{if(_1589&&_1589.get("checked")){_158e.push(dj.byId("public_task_details_bank_assignee_name_nosend").get("value")," ");_158e.push(dj.byId("public_task_details_bank_assignee_abbv_name_nosend").get("value")," ");}else{if(_158a&&_158a.get("checked")){_158e.push(dj.byId("public_task_details_counterparty_assignee_name_nosend").get("value")," ");_158e.push(dj.byId("public_task_details_counterparty_assignee_abbv_name_nosend").get("value")," ");}else{if(_158b&&_158b.get("checked")){_158e.push(dj.byId("public_details_bank_other_user_assignee_first_name_nosend").get("value")," ");_158e.push(dj.byId("public_details_bank_other_user_assignee_last_name_nosend").get("value")," ");}}}}}if(d.style(_1590,"display")==="none"||d.style(_1590,"opacity")===0){d.style(_1590,"opacity",0);m.animate("fadeIn",_1590);}text=["<label for='",type,"_dismiss_",id,"' id='",type,"_dismiss_",id,"_label'>","<span id='",type,"_desc_",id,"'>",m.grid.sanitizeHTMLDataForUI(_1592),"</span></label>","<span class='taskInfo'>",_158e.join(""),"</span>","<span class='commentInfo' id='","task_edit_",id,"'>"," | ","<a href=\"javascript:void(0)\" onClick=\"misys.openTaskForUpdate(",id,")\">",m.getLocalization("Edit"),"</a></span>","<span class='commentInfo'>"," | ","<a href=\"javascript:void(0)\" onClick=\"misys.openCollaborationComment('",type,"',",id,")\">",m.getLocalization("comments")," (<span id=\"",type,"_comment_count_",id,"\">0</span>)</a></span>"];if(!_1587){li=d.create("li",{id:type+"_item_"+id,style:"display:none;opacity:0",innerHTML:text.join("")},_1590);}else{dj.byId(type+"_dismiss_"+id).destroy();li=d.byId(type+"_item_"+id);li.innerHTML=text.join("");}new dj.form.CheckBox({id:type+"_dismiss_"+id,name:type+"_dismiss_"+id,onClick:function(){m.finishCollaborationTask(this,type,id);}}).placeAt(type+"_dismiss_"+id+"_label","first");if(!_1587){var ol=d.create("ol",{id:type+"_comments_"+id,style:"display:none"},type+"_comment_fields","first");d.addClass(ol,"comment-list");}m.animate("fadeIn",li,function(){d.style(d.byId(type+"_notice"),"display","none");});d.forEach(dijit.findWidgets(_1596),function(w){if(w){w.destroyRecursive();}});return true;};function _1599(){var _159a=dj.byId("entity");if(_159a&&!_159a.get("value")){m.dialog.show("ERROR",m.getLocalization("mandatoryEntityMessage"));return false;}return true;};function _159b(){var _159c=dj.byId("public_task_details_assignee_type_nosend_1"),_159d=dj.byId("public_task_details_assignee_type_nosend_2"),_159e=dj.byId("public_task_details_assignee_type_nosend_3"),_159f=dj.byId("public_task_details_type_nosend_3"),_15a0=(_159f)?_159f.get("checked"):false,_15a1=d.byId("assigneeTypeFields");m.toggleFields(_15a0,["public_task_details_assignee_type_nosend_1","public_task_details_assignee_type_nosend_2","public_task_details_assignee_type_nosend_3","public_task_details_assignee_type_nosend_4"]);if(_15a0){var _15a2=[{id:"public_task_details_assignee_type_nosend_1",description:"user_to_user"},{id:"public_task_details_assignee_type_nosend_2",description:"user_to_bank"},{id:"public_task_details_assignee_type_nosend_3",description:"counterparty"},{id:"public_task_details_assignee_type_nosend_4",description:"bank"}];m.preDisplayAssigneeType=m.preDisplayAssigneeType||function(){return true;};m.preDisplayAssigneeType(_15a2);}if(_15a0){m.animate("fadeIn",_15a1,function(){_15c8();_15a3();_1599();},false,{duration:20});}else{m.animate("fadeOut",_15a1,function(){if(_159c){_159c.set("checked",false);}if(_159d){_159d.set("checked",false);}if(_159e){_159e.set("checked",false);}_15a3();},false,{duration:20});}};function _15a3(){var _15a4=dj.byId("public_task_details_assignee_type_nosend_1")?dj.byId("public_task_details_assignee_type_nosend_1").get("checked"):false,_15a5=dj.byId("public_task_details_assignee_type_nosend_2")?dj.byId("public_task_details_assignee_type_nosend_2").get("checked"):false,_15a6=dj.byId("public_task_details_assignee_type_nosend_3")?dj.byId("public_task_details_assignee_type_nosend_3").get("checked"):false,_15a7=dj.byId("public_task_details_assignee_type_nosend_4")?dj.byId("public_task_details_assignee_type_nosend_4").get("checked"):false,_15a8=d.byId("notifyBankFields"),_15a9=d.byId("notifyUserFields"),_15aa=d.byId("notifyCounterpartyFields"),_15ab=d.byId("bankAssigneeTasks");m.toggleFields(_15a4,null,["public_task_details_other_user_assignee_login_id_nosend"]);m.toggleFields(_15a5,null,["public_task_details_bank_assignee_name_nosend"],true,true);m.toggleFields(_15a6,null,["public_task_details_counterparty_assignee_name_nosend"],true,true);m.toggleFields(_15a7,null,["public_task_details_bank_other_user_assignee_login_id_nosend","public_task_details_bank_other_user_assignee_email_nosend"],true,true);dj.byId("public_task_details_other_user_assignee_login_id_nosend").set("readonly",true);dj.byId("public_task_details_other_user_assignee_login_id_nosend").set("disabled",true);m.animate("fadeOut",[_15a8,_15a9,_15aa],function(){if(_15a4){m.animate("fadeIn",_15a9);}else{if(_15a5){m.animate("fadeIn",_15a8,function(){var _15ac=dj.byId("public_task_details_assignee_type_nosend_2").get("checked");if(_15ac){dj.byId("public_task_details_bank_assignee_name_nosend").set("readonly",true);dj.byId("public_task_details_bank_assignee_name_nosend").set("disabled",true);}},false,{duration:1});}else{if(_15a6){m.animate("fadeIn",_15aa);var _15ad=dj.byId("access_opened"),_15ae=dj.byId("public_task_details_counterparty_assignee_name_nosend"),_15af=dj.byId("product_code").get("value"),_15b0=null,_15b1=dj.byId("counterparty_email_id_hidden"),_15b2=dj.byId("public_task_details_counterparty_assignee_abbv_name_nosend");if(_15af&&(_15af==="IP"||_15af==="CR")){_15b0=dj.byId("seller_name")?dj.byId("seller_name"):dj.byId("seller_abbv_name");}else{if(_15af&&(_15af==="IN"||_15af==="CN")){_15b0=dj.byId("buyer_name")?dj.byId("buyer_name"):dj.byId("buyer_abbv_name");}}if(_15ad&&_15b0){if(_15b0.get("value")!==""){if(_15ad.get("value")==="Y"){_15ae.set("value",_15b0.get("value"));_15b1.set("value",dj.byId("transaction_counterparty_email").get("value"));_15b2.set("value",dj.byId("ben_company_abbv_name").get("value"));}else{_15ae.set("value","");_15b2.set("value","");m.dialog.show("ERROR",m.getLocalization("errorCounterpartyCollaborationNotEnabled"));m.animate("fadeOut",_15aa);}}else{_15ae.set("value","");_15b2.set("value","");m.dialog.show("ERROR",m.getLocalization("errorSelectCounterpartyCollaboration"));m.animate("fadeOut",_15aa);}}}else{if(_15a7){m.animate("fadeIn",_15ab);}}}}_15b3();_15b4();},false,{duration:20});};function _15b5(){var _15b6=[{name:"public_task_details_description_nosend",value:""}];if(dj.byId("public_task_details_email_notification_nosend").get("checked")){_15b6.push({name:"public_task_details_email_nosend",value:""});}if(dj.byId("public_task_details_assignee_type_nosend_1").get("checked")){_15b6.push({name:"public_task_details_other_user_assignee_login_id_nosend",value:""});}if(dj.byId("public_task_details_assignee_type_nosend_2")&&dj.byId("public_task_details_assignee_type_nosend_2").get("checked")){_15b6.push({name:"public_task_details_bank_assignee_name_nosend",value:""});}if(dj.byId("public_task_details_assignee_type_nosend_3")&&dj.byId("public_task_details_assignee_type_nosend_3").get("checked")){_15b6.push({name:"public_task_details_counterparty_assignee_name_nosend",value:""});if(dj.byId("public_task_details_counterparty_assignee_email_notification_nosend").get("checked")){_15b6.push({name:"public_task_details_counterparty_assignee_email_nosend",value:""});}}if(dj.byId("public_task_details_assignee_type_nosend_4")&&dj.byId("public_task_details_assignee_type_nosend_4").get("checked")){_15b6.push({name:"public_task_details_bank_other_user_assignee_login_id_nosend",value:""});if(dj.byId("public_task_details_bank_other_user_assignee_email_notification_nosend").get("checked")){_15b6.push({name:"public_task_details_bank_other_user_assignee_email_nosend",value:""});}}return _15b6;};function _15b7(){var _15b8=[{name:"notification_task_details_other_user_assignee_login_id_nosend",value:""},{name:"notification_description_nosend",value:""}];if(dj.byId("notification_task_details_email_notification_nosend").get("checked")){_15b8.push({name:"notification_task_details_email_nosend",value:""});}return _15b8;};function _15b9(){return [{name:"private_description_nosend",value:""}];};function _1594(id){var _15ba="N",_15bb="02",_15bc="N",_15bd="N",_15be="N",_15bf;if(dj.byId("public_task_details_email_notification_nosend")&&dj.byId("public_task_details_email_notification_nosend").get("checked")){_15ba="Y";}if(dj.byId("public_task_details_type_nosend_3")&&dj.byId("public_task_details_type_nosend_3").get("checked")){_15bb="03";}if(dj.byId("public_task_details_counterparty_assignee_email_notification_nosend")&&dj.byId("public_task_details_counterparty_assignee_email_notification_nosend").get("checked")){_15bc="Y";}if(dj.byId("public_task_details_other_user_assignee_email_notification_nosend")&&dj.byId("public_task_details_other_user_assignee_email_notification_nosend").get("checked")){_15bd="Y";}if(dj.byId("public_task_details_assignee_type_nosend_1")&&dj.byId("public_task_details_assignee_type_nosend_1").get("checked")){_15bf="01";}else{if(dj.byId("public_task_details_assignee_type_nosend_2")&&dj.byId("public_task_details_assignee_type_nosend_2").get("checked")){_15bf="02";}else{if(dj.byId("public_task_details_assignee_type_nosend_3")&&dj.byId("public_task_details_assignee_type_nosend_3").get("checked")){_15bf="03";}else{if(dj.byId("public_task_details_assignee_type_nosend_4")&&dj.byId("public_task_details_assignee_type_nosend_4").get("checked")){_15bf="04";}}}}if(dj.byId("public_task_details_bank_assignee_email_notification_nosend")&&dj.byId("public_task_details_bank_assignee_email_notification_nosend").get("checked")){_15be="Y";}var _15c0=[{name:"public_task_details_task_id_"+id,value:id},{name:"public_task_details_issue_user_id_"+id,value:dj.byId("connected_user_id").get("value")},{name:"public_task_details_issue_company_abbv_name_"+id,value:dj.byId("connected_company_abbv_name").get("value")},{name:"public_task_details_description_"+id,value:dj.byId("public_task_details_description_nosend").get("value")},{name:"public_task_details_email_notification_"+id,value:_15ba},{name:"public_task_details_email_"+id,value:dj.byId("public_task_details_email_nosend").get("value")},{name:"public_task_details_type_"+id,id:"",value:_15bb},{name:"public_task_details_assignee_type_"+id,id:"",value:_15bf},{name:"public_task_details_counterparty_assignee_name_"+id,value:dj.byId("public_task_details_counterparty_assignee_name_nosend").get("value")},{name:"public_task_details_counterparty_assignee_abbv_name_"+id,value:dj.byId("public_task_details_counterparty_assignee_abbv_name_nosend").get("value")},{name:"public_task_details_counterparty_assignee_email_notification_"+id,value:_15bc},{name:"public_task_details_counterparty_assignee_email_"+id,value:dj.byId("public_task_details_counterparty_assignee_email_nosend").get("value")},{name:"public_task_details_other_user_assignee_login_id_"+id,value:dj.byId("public_task_details_other_user_assignee_login_id_nosend").get("value")},{name:"public_task_details_other_user_assignee_user_id_"+id,value:dj.byId("public_task_details_other_user_assignee_user_id_nosend").get("value")},{name:"public_task_details_other_user_assignee_email_notification_"+id,value:_15bd},{name:"public_task_details_other_user_assignee_email_"+id,value:dj.byId("public_task_details_other_user_assignee_email_nosend").get("value")},{name:"public_task_details_bank_assignee_name_"+id,value:dj.byId("public_task_details_bank_assignee_name_nosend").get("value")},{name:"public_task_details_bank_assignee_abbv_name_"+id,value:dj.byId("public_task_details_bank_assignee_abbv_name_nosend").get("value")},{name:"public_task_details_bank_assignee_email_notification_"+id,value:_15be},{name:"public_tasks_details_issue_date_"+id,value:""},{name:"public_tasks_details_bank_other_user_assignee_user_id_"+id,value:""}];if(_15bf=="04"){_15c0.push({name:"public_task_details_bank_other_user_assignee_login_id_"+id,value:dj.byId("public_task_details_bank_other_user_assignee_login_id_nosend").get("value")});var _15c1="N";if(dj.byId("public_task_details_bank_other_user_assignee_email_notification_nosend")&&dj.byId("public_task_details_bank_other_user_assignee_email_notification_nosend").get("checked")){_15c1="Y";}_15c0.push({name:"public_task_details_bank_other_user_assignee_email_notification_"+id,value:_15c1});_15c0.push({name:"public_task_details_bank_other_user_assignee_email_"+id,value:dj.byId("public_task_details_bank_other_user_assignee_email_nosend").get("value")});}return _15c0;};function _1595(id){var _15c2="N",_15c3="01",_15c4="03";if(dj.byId("notification_task_details_email_notification_nosend")&&dj.byId("notification_task_details_email_notification_nosend").get("checked")){_15c2="Y";}var _15c5=[{name:"public_task_details_task_id_"+id,id:"",value:id},{name:"public_task_details_issue_user_id_"+id,id:"",value:dj.byId("connected_user_id").get("value")},{name:"public_task_details_issue_company_abbv_name_"+id,id:"",value:dj.byId("connected_company_abbv_name").get("value")},{name:"public_task_details_description_"+id,id:"public_task_details_description_nosend",value:dj.byId("notification_description_nosend").get("value")},{name:"public_task_details_email_notification_"+id,id:"",value:_15c2},{name:"public_task_details_email_"+id,id:"public_task_details_email_nosend",value:dj.byId("notification_task_details_email_nosend").get("value")},{name:"public_task_details_type_"+id,id:"",value:_15c4},{name:"public_task_details_assignee_type_"+id,id:"",value:_15c3},{name:"public_task_details_other_user_assignee_login_id_"+id,id:"public_task_details_other_user_assignee_login_id_nosend",value:dj.byId("notification_task_details_other_user_assignee_login_id_nosend").get("value")},{name:"public_tasks_details_issue_date_"+id,id:"",value:""},{name:"public_tasks_details_bank_other_user_assignee_user_id_"+id,id:"public_tasks_details_bank_other_user_assignee_user_id_nosend",value:dj.byId("notification_task_details_other_user_assignee_user_id_nosend").get("value")}];return _15c5;};function _1593(id){var _15c6="01";var _15c7=[{name:"private_task_details_task_id_"+id,id:"",value:id},{name:"public_tasks_details_issue_date_"+id,id:"",value:""},{name:"private_task_details_issue_user_id_"+id,id:"",value:dj.byId("connected_user_id").get("value")},{name:"private_task_details_issue_company_abbv_name_"+id,id:"",value:dj.byId("connected_company_abbv_name").get("value")},{name:"private_task_details_description_"+id,id:"private_task_details_description_nosend",value:dj.byId("private_description_nosend").get("value")},{name:"public_task_details_type_"+id,id:"",value:_15c6}];return _15c7;};function _15c8(){var _15c9=dj.byId("public_task_details_assignee_type_nosend_1"),_15ca=dj.byId("public_task_details_assignee_type_nosend_2"),_15cb=dj.byId("public_task_details_assignee_type_nosend_3");if(!_15c9){_15c9.set("checked",false);if(_15ca){_15ca.set("checked",true);_15c9.set("checked",false);if(_15cb){_15cb.set("checked",false);}}else{if(_15cb){_15cb.set("checked",true);_15c9.set("checked",false);}else{_15c9.set("checked",false);}}}else{_15c9.set("checked",true);if(_15ca){_15ca.set("checked",false);}if(_15cb){_15cb.set("checked",false);}}};function _15cc(_15cd,_15ce,_15cf,_15d0){var email=dj.byId(_15d0).get("value");if(dj.byId(_15cd).get("checked")){m.animate("fadeIn",d.byId(_15cf),function(){if(email){dj.byId(_15ce).set("value",email);dj.byId(_15ce).set("readonly",true);dj.byId(_15ce).set("disabled",true);}},false,{duration:20});}else{m.animate("fadeOut",_15cf,function(){dj.byId(_15ce).set("value","");},false,{duration:20});}};function _15b3(){var _15d1,_15d2,_15d3,_15d4;if(dj.byId("public_task_details_assignee_type_nosend_2")&&dj.byId("public_task_details_assignee_type_nosend_2").get("checked")){if(dj.byId("bank_abbv_name_widget_id_hidden")&&dj.byId("bank_name_widget_id_hidden")){_15d1=dj.byId("bank_abbv_name_widget_id_hidden").get("value");_15d3=dj.byId("bank_name_widget_id_hidden").get("value");if(dj.byId(_15d1)){_15d2=dj.byId(_15d1);dj.byId("public_task_details_bank_assignee_abbv_name_nosend").set("value",_15d2.get("value"));}if(dj.byId(_15d3)){_15d4=dj.byId(_15d3);dj.byId("public_task_details_bank_assignee_name_nosend").set("value",_15d4.get("value"));}}}else{dj.byId("public_task_details_bank_assignee_name_nosend").set("value","");dj.byId("public_task_details_bank_assignee_abbv_name_nosend").set("value","");}};function _15b4(){var _15d5=dj.byId("public_task_details_type_nosend_2"),_15d6=dj.byId("public_task_details_type_nosend_3"),_15d7=dj.byId("public_task_details_assignee_type_nosend_1"),_15d8=dj.byId("public_task_details_assignee_type_nosend_2"),_15d9=dj.byId("public_task_details_assignee_type_nosend_3");if(_15d5.get("checked")){m.animate("fadeOut",[d.byId("counterparty_email_input_field_div"),d.byId("other_user_email_input_field_div")],function(){dj.byId("public_task_details_other_user_assignee_login_id_nosend").reset();dj.byId("public_task_details_other_user_assignee_email_notification_nosend").set("checked",false);dj.byId("other_user_email_id_hidden").reset();dj.byId("public_task_details_other_user_assignee_user_id_nosend").reset();dj.byId("public_task_details_other_user_assignee_email_nosend").reset();dj.byId("public_task_details_counterparty_assignee_name_nosend").reset();dj.byId("public_task_details_counterparty_assignee_abbv_name_nosend").reset();dj.byId("public_task_details_counterparty_assignee_email_notification_nosend").set("checked",false);dj.byId("counterparty_email_id_hidden").reset();dj.byId("public_task_details_counterparty_assignee_email_nosend").reset();dj.byId("public_task_details_bank_assignee_email_notification_nosend").set("checked",false);dj.byId("public_task_details_bank_assignee_name_nosend").reset();},false,{duration:20});}else{if(_15d7&&!_15d7.get("checked")){m.animate("fadeOut",d.byId("other_user_email_input_field_div"),function(){dj.byId("public_task_details_other_user_assignee_login_id_nosend").reset();dj.byId("public_task_details_other_user_assignee_email_notification_nosend").set("checked",false);dj.byId("public_task_details_other_user_assignee_user_id_nosend").reset();dj.byId("other_user_email_id_hidden").reset();dj.byId("public_task_details_other_user_assignee_email_nosend").reset();});}if(_15d8&&!_15d8.get("checked")){dj.byId("public_task_details_bank_assignee_email_notification_nosend").set("checked",false);dj.byId("public_task_details_bank_assignee_name_nosend").reset();}if(_15d9&&!_15d9.get("checked")){m.animate("fadeOut",d.byId("counterparty_email_input_field_div"),function(){dj.byId("public_task_details_counterparty_assignee_name_nosend").reset();dj.byId("public_task_details_counterparty_assignee_email_notification_nosend").set("checked",false);dj.byId("counterparty_email_id_hidden").reset();dj.byId("public_task_details_counterparty_assignee_abbv_name_nosend").reset();dj.byId("public_task_details_counterparty_assignee_email_nosend").reset();});}}};function _15da(_15db){var _15dc=null;if(dj.byId(_15db)){var _15dd=dj.byId(_15db).get("value");if((_15dd.indexOf("<")!=-1)||(_15dd.indexOf(">")!=-1)){_15dc=m.getLocalization("invalidContent");dj.byId(_15db).set("state","Error");dj.hideTooltip(dj.byId(_15db).domNode);dj.showTooltip(_15dc,dj.byId(_15db).domNode,0);}}};var _15de=[];d.mixin(m,{bindCollaboration:function(){m.setValidation("public_task_details_email_nosend",m.validateEmailAddr);m.setValidation("public_task_details_bank_other_user_assignee_email_nosend",m.validateEmailAddr);m.setValidation("public_task_details_counterparty_assignee_email_nosend",m.validateEmailAddr);m.connect("public_task_details_email_notification_nosend","onClick",function(){m.toggleFields(this.get("checked"),null,["public_task_details_email_nosend"]);_15cc(this,"public_task_details_email_nosend","email_input_field_div","user_email_id_hidden");});m.connect("notification_task_details_email_notification_nosend","onClick",function(){m.toggleFields(this.get("checked"),null,["notification_task_details_email_nosend"]);});m.connect("public_task_details_counterparty_assignee_email_notification_nosend","onClick",function(){m.toggleFields(this.get("checked"),null,["public_task_details_counterparty_assignee_email_nosend"]);if(!dj.byId("public_task_details_counterparty_assignee_name_nosend").get("value")){dj.byId("counterparty_email_id_hidden").set("value","");dj.byId("public_task_details_counterparty_assignee_email_notification_nosend").set("checked",false);}else{_15cc(this,"public_task_details_counterparty_assignee_email_nosend","counterparty_email_input_field_div","counterparty_email_id_hidden");}});m.connect("public_task_details_other_user_assignee_email_notification_nosend","onClick",function(){m.toggleFields(this.get("checked"),null,["public_task_details_other_user_assignee_email_nosend"]);if(!dj.byId("public_task_details_other_user_assignee_login_id_nosend").get("value")){dj.byId("other_user_email_id_hidden").set("value","");dj.byId("public_task_details_other_user_assignee_email_notification_nosend").set("checked",false);}else{_15cc(this,"public_task_details_other_user_assignee_email_nosend","other_user_email_input_field_div","other_user_email_id_hidden");}});_15de.push(m.connect("public_task_details_type_nosend_2","onClick",_159b));_15de.push(m.connect("public_task_details_type_nosend_3","onClick",_159b));_15de.push(m.connect("public_task_details_assignee_type_nosend_1","onClick",_1599));_15de.push(m.connect("public_task_details_assignee_type_nosend_1","onClick",_15a3));_15de.push(m.connect("public_task_details_assignee_type_nosend_2","onClick",_15a3));_15de.push(m.connect("public_task_details_assignee_type_nosend_3","onClick",_15a3));_15de.push(m.connect("public_task_details_assignee_type_nosend_4","onClick",_15a3));m.connect("public_task_details_description_nosend","onBlur",function(){_15da("public_task_details_description_nosend");});m.connect("private_description_nosend","onBlur",function(){_15da("private_description_nosend");});m.connect("public_tasks_description_nosend","onBlur",function(){_15da("public_tasks_description_nosend");});m.connect("private_tasks_description_nosend","onBlur",function(){_15da("private_tasks_description_nosend");});m.connect("notification_description_nosend","onBlur",function(){_15da("notification_description_nosend");});m.connect("notification_tasks_description_nosend","onBlur",function(){_15da("notification_tasks_description_nosend");});m.connect("public_task_details_description_nosend","onBlur",function(){_15da("public_task_details_description_nosend");});},cancelCollaborationTask:function(type){if(dj.byId("public_task_id_nosend")){dj.byId("public_task_id_nosend").set("value","");}dj.byId("public_tasks_dialog").hide();},addCollaborationTask:function(type,_15df){if(dj.byId(type+"_description_nosend")&&dj.byId(type+"_description_nosend").state!=="Error"){var _15e0=[],_15e1=false,id="",_15e2=true,_15e3=dj.byId(type+"_dialog"),field,_15e4,value;type=type.toLowerCase();switch(type){case "private_tasks":_15e0=_15b9();id=dj.byId("private_task_id_nosend").get("value");break;case "public_tasks":_15e0=_15b5();id=dj.byId("public_task_id_nosend").get("value");break;default:_15e0=_15b7();id=dj.byId("notification_task_id_nosend").get("value");break;}if(id===""){id=_1581(type);_15e2=false;}_15e1=d.every(_15e0,function(_15e5){field=dj.byId(_15e5.name);if(field){_15e4=field.declaredClass;value=field.get("displayedValue");if(/NumberTextBox/.test(_15e4)||(/CurrencyTextBox/.test(_15e4))){value=field.get("value");value=isNaN(value)?"":value;}else{if(field.id){_15da(field.id);}}if(type==="private_tasks"&&field.state==="Error"){return false;}if(!value||field.state==="Error"){m.showTooltip(field.invalidMessage,field.domNode);m.setFieldState(field,false);return false;}}return true;});if(!_15e1){return false;}_1585(type,id,_15df,_15e2);if(_15e3){_15e3.hide();}d.query("#"+type+"_fields *[id^="+type+"]").forEach(function(node){var field=dj.byId(node.id);if(field){field.reset();}});m._config.taskEditMode=false;m._config.currentTaskID="";if(_15e2){switch(type){case "private_tasks":if(dj.byId("private_task_id_nosend")){dj.byId("private_task_id_nosend").set("value","");}break;case "public_tasks":if(dj.byId("public_task_id_nosend")){dj.byId("public_task_id_nosend").set("value","");}break;default:if(dj.byId("notification_task_id_nosend")){dj.byId("notification_task_id_nosend").set("value","");}break;}}return true;}},finishCollaborationTask:function(node,type,id){var _15e6=dj.byId(node),_15e7=d.byId("old_inp_dttm")?d.byId("old_inp_dttm").value:"",_15e8=_15e6.get("checked"),_15e9;if(d.byId("task_edit_"+id)){var _15ea=d.byId("task_edit_"+id);d.style(_15ea,"display",_15e8?"none":"inline");}m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/SetPerformed?taskid="+id+"&performed="+(_15e8?"Y":"N")+"&inputdate="+_15e7),load:function(_15eb,args){_15e9=d.byId(type+"_desc_"+id);if(_15e8){d.style(_15e9,"textDecoration","line-through");d.style(_15e9,"color","#999");}else{d.style(_15e9,"textDecoration","none");d.style(_15e9,"color","black");}}});},openCollaborationComment:function(type,id){var _15ec=dj.byId(type+"_comments_dialog"),_15ed,oldId;if(!_15ec){d.parser.parse(type+"_comments_div");_15ec=dj.byId(type+"_comments_dialog");m.bindCollaboration();}_15ed=dj.byId(type+"_comments_current_id_nosend");dj.byId(type+"_description_nosend").set("value","");oldId=_15ed.get("value");if(oldId){d.style(d.byId(type+"_comments_"+oldId),"display","none");}_15ed.set("value",id);_15ec.show();d.style(d.byId(type+"_comments_"+id),"display","block");d.style(d.byId(type+"_comments_"+id),"width","425px");d.style(d.byId(type+"_comments_"+id),"height","173px");d.style(d.byId(type+"_comments_"+id),"overflow","auto");},addCollaborationComment:function(type){if(dj.byId(type+"_description_nosend")&&dj.byId(type+"_description_nosend").state!=="Error"){var _15ee=dj.byId(type+"_description_nosend").get("value"),xml=["<?xml version='1.0' encoding='UTF-8'?><comment>"],_15ef=dj.byId("old_inp_dttm").get("value"),_15f0,id;if((_15ee)&&(_15ee.length<=204)){id=dj.byId(type+"_comments_current_id_nosend").get("value");xml.push("<description>",m.grid.sanitizeHTMLDataForUI(dj.byId(type+"_description_nosend").get("value")),"</description>");xml.push("<task_id>",id,"</task_id>");xml.push("<old_inp_dttm>",_15ef,"</old_inp_dttm></comment>");xml=xml.join("");m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/SaveComment"),content:{xml_string:xml},load:function(_15f1,args){var _15f2=d.byId(type+"_comments_"+id),_15f3=_15f2.getElementsByTagName("li").length,desc=dj.byId(type+"_description_nosend"),_15f4=dj.byId("sentence_posted_by").get("value")+" "+dj.byId("sentence_you").get("value");d.create("li",{id:type+"_comment_"+id+"_"+_15f3,innerHTML:desc.get("value")+"<br><div class='taskInfo'>"+_15f4+"</div>"},_15f2);var count=parseInt(d.byId(type+"_comment_count_"+id).innerHTML,10);count++;d.byId(type+"_comment_count_"+id).innerHTML=count;desc.set("value","");},error:function(_15f5,args){console.error("[collaboration] Technical error while saving Comment");console.error(_15f5);}});}}},openPublicTaskDialog:function(){var _15f6=dj.byId("public_tasks_dialog");if(!_15f6){d.parser.parse("public-tasks-fields");_15f6=dj.byId("public_tasks_dialog");m.bindCollaboration();}var nodes=[];nodes.push(d.byId("collaboration_type_view_div"));nodes.push(d.byId("email_input_field_div"));nodes.push(d.byId("counterparty_email_input_field_div"));nodes.push(d.byId("other_user_email_input_field_div"));m.animate("fadeOut",nodes,function(){_15f6.show();},false,{duration:20});dj.byId("public_task_details_description_nosend").reset();dj.byId("public_task_details_other_user_assignee_user_id_nosend").reset();dj.byId("public_task_details_email_nosend").reset();dj.byId("public_task_details_email_notification_nosend").set("checked",false);if(dj.byId("public_task_details_email_notification_nosend")){m.toggleFields(dj.byId("public_task_details_email_notification_nosend").get("checked"),null,["public_task_details_email_nosend"]);}dj.byId("public_task_details_type_nosend_2").set("checked",true);dj.byId("public_task_details_type_nosend_3").set("checked",false);_159b();dj.byId("public_task_details_other_user_assignee_login_id_nosend").reset();dj.byId("public_task_details_bank_assignee_name_nosend").reset();dj.byId("public_task_details_bank_assignee_abbv_name_nosend").reset();dj.byId("public_task_details_bank_assignee_email_notification_nosend").set("checked",false);dj.byId("public_task_details_counterparty_assignee_name_nosend").reset();dj.byId("public_task_details_counterparty_assignee_email_notification_nosend").set("checked",false);dj.byId("public_task_details_counterparty_assignee_email_nosend").set("disabled",true);},openNotificationTaskDialog:function(){var _15f7=dj.byId("notification_tasks_dialog");if(!_15f7){d.parser.parse("notification-task-fields");_15f7=dj.byId("notification_tasks_dialog");m.bindCollaboration();}if(dj.byId("notification_task_details_email_notification_nosend")){m.toggleFields(dj.byId("notification_task_details_email_notification_nosend").get("checked"),null,["notification_task_details_email_nosend"]);}dj.byId("notification_task_details_other_user_assignee_login_id_nosend").reset();dj.byId("notification_description_nosend").reset();_15f7.show();},openPrivateTaskDialog:function(){var _15f8=dj.byId("private_tasks_dialog");if(!_15f8){d.parser.parse("private-task-fields");_15f8=dj.byId("private_tasks_dialog");m.bindCollaboration();}_15f8.show();dj.byId("private_description_nosend").reset();},openTaskForUpdate:function(_15f9){m.xhrPost({url:m.getServletURL("/screen/AjaxScreen/action/GetTask?taskid="+_15f9),load:function(_15fa,args){_15fa=d.fromJson(_15fa);if(_15fa.type[1]==="01"){m.openPrivateTaskDialog();dj.byId("private_task_id_nosend").set("value",_15fa.task_id);dj.byId("private_description_nosend").set("value",_15fa.description);}else{_159b=function(){};_15a3=function(){};m.openPublicTaskDialog();d.forEach(_15de,function(_15fb){d.disconnect(_15fb);});dj.byId("public_task_id_nosend").set("value",_15fa.task_id);dj.byId("public_task_details_description_nosend").set("value",_15fa.description);dj.byId("public_task_details_email_notification_nosend").set("checked",_15fa.email_notification==="Y");dj.byId("public_task_details_email_nosend").set("value",_15fa.email);dj.byId("public_task_details_type_nosend_2").set("checked",_15fa.type[1]==="02");dj.byId("public_task_details_type_nosend_3").set("checked",_15fa.type[1]==="03");if(_15fa.type[1]==="03"){m.toggleFields(true,["public_task_details_assignee_type_nosend_1","public_task_details_assignee_type_nosend_2","public_task_details_assignee_type_nosend_3"]);d.style("assigneeTypeFields","display","block");if(dj.byId("public_task_details_assignee_type_nosend_1")){dj.byId("public_task_details_assignee_type_nosend_1").set("checked",_15fa.assignee_type[1]==="01");}if(dj.byId("public_task_details_assignee_type_nosend_2")){dj.byId("public_task_details_assignee_type_nosend_2").set("checked",_15fa.assignee_type[1]==="02");}if(dj.byId("public_task_details_assignee_type_nosend_3")){dj.byId("public_task_details_assignee_type_nosend_3").set("checked",_15fa.assignee_type[1]==="03");}if(_15fa.assignee_type[1]==="01"){d.style("notifyUserFields","display","block");dj.byId("public_task_details_other_user_assignee_login_id_nosend").set("value",_15fa.dest_user_login_id);dj.byId("public_task_details_other_user_assignee_user_id_nosend").set("value",_15fa.dest_user_id);dj.byId("public_task_details_other_user_assignee_email_notification_nosend").set("value",_15fa.dest_user_email_notif==="Y");dj.byId("public_task_details_other_user_assignee_email_nosend").set("value",_15fa.dest_user_email);dj.byId("other_user_email_id_hidden").set("value",_15fa.dest_user_email);if(_15fa.dest_user_email_notif==="Y"){d.style("other_user_email_input_field_div","display","block");m.toggleFields(true,null,["public_task_details_other_user_assignee_email_nosend"]);_15cc(dj.byId("public_task_details_other_user_assignee_email_notification_nosend"),"public_task_details_other_user_assignee_email_nosend","other_user_email_input_field_div","other_user_email_id_hidden");}}if(_15fa.assignee_type[1]==="02"){d.style("notifyBankFields","display","block");dj.byId("public_task_details_bank_assignee_name_nosend").set("value",_15fa.dest_company_name);dj.byId("public_task_details_bank_assignee_abbv_name_nosend").set("value",_15fa.dest_company_abbv_name);dj.byId("public_task_details_bank_assignee_email_notification_nosend").set("checked",_15fa.dest_company_email_notif==="Y");}if(_15fa.assignee_type[1]==="03"){d.style("notifyCounterpartyFields","display","block");dj.byId("public_task_details_counterparty_assignee_name_nosend").set("value",_15fa.dest_company_name);dj.byId("public_task_details_counterparty_assignee_abbv_name_nosend").set("value",_15fa.dest_company_abbv_name);dj.byId("public_task_details_counterparty_assignee_email_notification_nosend").set("checked",_15fa.dest_company_email_notif==="Y");}var _15fc=dj.byId("public_task_details_assignee_type_nosend_1"),_15fd=dj.byId("public_task_details_assignee_type_nosend_2"),_15fe=dj.byId("public_task_details_assignee_type_nosend_3"),_15ff=dj.byId("public_task_details_type_nosend_3"),_1600=(_15ff)?_15ff.get("checked"):false,_1601=d.byId("assigneeTypeFields");if(_1600){var _1602=[{id:"public_task_details_assignee_type_nosend_1",description:"user_to_user"},{id:"public_task_details_assignee_type_nosend_2",description:"user_to_bank"},{id:"public_task_details_assignee_type_nosend_3",description:"counterparty"},{id:"public_task_details_assignee_type_nosend_4",description:"bank"}];m.preDisplayAssigneeType=m.preDisplayAssigneeType||function(){return true;};m.preDisplayAssigneeType(_1602);}}_159b=function(){var _1603=dj.byId("public_task_details_assignee_type_nosend_1"),_15fd=dj.byId("public_task_details_assignee_type_nosend_2"),_15fe=dj.byId("public_task_details_assignee_type_nosend_3"),_15ff=dj.byId("public_task_details_type_nosend_3"),_1600=(_15ff)?_15ff.get("checked"):false,_1601=d.byId("assigneeTypeFields");m.toggleFields(_1600,["public_task_details_assignee_type_nosend_1","public_task_details_assignee_type_nosend_2","public_task_details_assignee_type_nosend_3","public_task_details_assignee_type_nosend_4"]);if(_1600){var _1604=[{id:"public_task_details_assignee_type_nosend_1",description:"user_to_user"},{id:"public_task_details_assignee_type_nosend_2",description:"user_to_bank"},{id:"public_task_details_assignee_type_nosend_3",description:"counterparty"},{id:"public_task_details_assignee_type_nosend_4",description:"bank"}];m.preDisplayAssigneeType=m.preDisplayAssigneeType||function(){return true;};m.preDisplayAssigneeType(_1604);}if(_1600){m.animate("fadeIn",_1601,function(){if(_15fd&&_15fd.get("checked")){_15fd.set("checked",true);m.animate("fadeOut",d.byId("notifyUserFields"),function(){},false,{duration:20});m.animate("fadeOut",d.byId("notifyCounterpartyFields"),function(){},false,{duration:20});m.animate("fadeIn",d.byId("notifyBankFields"));}else{if(_1603&&_1603.get("checked")){_1603.set("checked",true);m.animate("fadeOut",d.byId("notifyBankFields"),function(){},false,{duration:20});m.animate("fadeOut",d.byId("notifyCounterpartyFields"),function(){},false,{duration:20});m.animate("fadeIn",d.byId("notifyUserFields"));}else{if(_15fe&&_15fe.get("checked")){_15fe.set("checked",true);m.animate("fadeOut",d.byId("notifyUserFields"),function(){},false,{duration:20});m.animate("fadeOut",d.byId("notifyBankFields"),function(){},false,{duration:20});m.animate("fadeIn",d.byId("notifyCounterpartyFields"));}else{_1603.set("checked",true);m.animate("fadeOut",d.byId("notifyBankFields"),function(){},false,{duration:20});m.animate("fadeOut",d.byId("notifyCounterpartyFields"),function(){},false,{duration:20});m.animate("fadeIn",d.byId("notifyUserFields"));}}}},false,{duration:20});}else{m.animate("fadeOut",_1601,function(){if(_1603){_1603.set("checked",false);}if(_15fd){_15fd.set("checked",false);}if(_15fe){_15fe.set("checked",false);}_15a3();},false,{duration:20});}};_15a3=function(){var _1605=dj.byId("public_task_details_assignee_type_nosend_1")?dj.byId("public_task_details_assignee_type_nosend_1").get("checked"):false,_1606=dj.byId("public_task_details_assignee_type_nosend_2")?dj.byId("public_task_details_assignee_type_nosend_2").get("checked"):false,_1607=dj.byId("public_task_details_assignee_type_nosend_3")?dj.byId("public_task_details_assignee_type_nosend_3").get("checked"):false,_1608=dj.byId("public_task_details_assignee_type_nosend_4")?dj.byId("public_task_details_assignee_type_nosend_4").get("checked"):false,_1609=d.byId("notifyBankFields"),_160a=d.byId("notifyUserFields"),_160b=d.byId("notifyCounterpartyFields"),_160c=d.byId("bankAssigneeTasks");m.toggleFields(_1605,null,["public_task_details_other_user_assignee_login_id_nosend"]);m.toggleFields(_1606,null,["public_task_details_bank_assignee_name_nosend"],true,true);m.toggleFields(_1607,null,["public_task_details_counterparty_assignee_name_nosend"],true,true);m.toggleFields(_1608,null,["public_task_details_bank_other_user_assignee_login_id_nosend","public_task_details_bank_other_user_assignee_email_nosend"],true,true);dj.byId("public_task_details_other_user_assignee_login_id_nosend").set("readonly",true);dj.byId("public_task_details_other_user_assignee_login_id_nosend").set("disabled",true);m.animate("fadeOut",[_1609,_160a,_160b],function(){if(_1605){m.animate("fadeIn",_160a);}else{if(_1606){m.animate("fadeIn",_1609);}else{if(_1607){m.animate("fadeIn",_160b);var _160d=dj.byId("access_opened"),_160e=dj.byId("public_task_details_counterparty_assignee_name_nosend"),_160f=dj.byId("product_code").get("value"),_1610=null,_1611=dj.byId("counterparty_email_id_hidden"),_1612=dj.byId("public_task_details_counterparty_assignee_abbv_name_nosend");if(_160f&&_160f=="IP"){_1610=dj.byId("seller_name")?dj.byId("seller_name"):dj.byId("seller_abbv_name");}else{if(_160f&&_160f=="IN"){_1610=dj.byId("buyer_name")?dj.byId("buyer_name"):dj.byId("buyer_abbv_name");}}if(_160d&&_1610){if(_1610.get("value")!==""){if(_160d.get("value")==="Y"){_160e.set("value",_1610.get("value"));_1611.set("value",dj.byId("transaction_counterparty_email").get("value"));_1612.set("value",dj.byId("ben_company_abbv_name").get("value"));}else{_160e.set("value","");_1612.set("value","");m.dialog.show("ERROR",m.getLocalization("errorCounterpartyCollaborationNotEnabled"));m.animate("fadeOut",_160b);}}else{_160e.set("value","");_1612.set("value","");m.dialog.show("ERROR",m.getLocalization("errorSelectCounterpartyCollaboration"));m.animate("fadeOut",_160b);}}}else{if(_1608){m.animate("fadeIn",_160c);}}}}_15b3();_15b4();},false,{duration:20});};_15de=[];_15de.push(m.connect("public_task_details_type_nosend_2","onClick",_159b));_15de.push(m.connect("public_task_details_type_nosend_3","onClick",_159b));_15de.push(m.connect("public_task_details_assignee_type_nosend_1","onClick",_1599));_15de.push(m.connect("public_task_details_assignee_type_nosend_1","onClick",_15a3));_15de.push(m.connect("public_task_details_assignee_type_nosend_2","onClick",_15a3));_15de.push(m.connect("public_task_details_assignee_type_nosend_3","onClick",_15a3));_15de.push(m.connect("public_task_details_assignee_type_nosend_4","onClick",_15a3));if(_15fa.type[1]==="02"){dj.byId("public_task_details_type_nosend_2").onClick();}else{dj.byId("public_task_details_type_nosend_3").onClick();}}}});},showCollaborationTaskDetails:function(){m.animate("fadeIn",d.byId("collaboration-more-tasks"),function(){m.animate("fadeOut",d.byId("show-tasks-details-link"),false,{duration:20});},false,{duration:20});}});})(dojo,dijit,misys);}if(!dojo._hasResource["dijit.MenuBar"]){dojo._hasResource["dijit.MenuBar"]=true;dojo.provide("dijit.MenuBar");dojo.declare("dijit.MenuBar",dijit._MenuBase,{templateString:dojo.cache("dijit","templates/MenuBar.html","<div class=\"dijitMenuBar dijitMenuPassive\" dojoAttachPoint=\"containerNode\"  role=\"menubar\" tabIndex=\"${tabIndex}\" dojoAttachEvent=\"onkeypress: _onKeyPress\"></div>\n"),baseClass:"dijitMenuBar",_isMenuBar:true,postCreate:function(){var k=dojo.keys,l=this.isLeftToRight();this.connectKeyNavHandlers(l?[k.LEFT_ARROW]:[k.RIGHT_ARROW],l?[k.RIGHT_ARROW]:[k.LEFT_ARROW]);this._orient=this.isLeftToRight()?{BL:"TL"}:{BR:"TR"};},focusChild:function(item){var _1613=this.focusedChild,_1614=_1613&&_1613.popup&&_1613.popup.isShowingNow;this.inherited(arguments);if(_1614&&item.popup&&!item.disabled){this._openPopup();}},_onKeyPress:function(evt){if(evt.ctrlKey||evt.altKey){return;}switch(evt.charOrCode){case dojo.keys.DOWN_ARROW:this._moveToPopup(evt);dojo.stopEvent(evt);}},onItemClick:function(item,evt){if(item.popup&&item.popup.isShowingNow){item.popup.onCancel();}else{this.inherited(arguments);}}});}if(!dojo._hasResource["dijit.MenuBarItem"]){dojo._hasResource["dijit.MenuBarItem"]=true;dojo.provide("dijit.MenuBarItem");dojo.declare("dijit._MenuBarItemMixin",null,{templateString:dojo.cache("dijit","templates/MenuBarItem.html","<div class=\"dijitReset dijitInline dijitMenuItem dijitMenuItemLabel\" dojoAttachPoint=\"focusNode\" role=\"menuitem\" tabIndex=\"-1\"\n\t\tdojoAttachEvent=\"onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick\">\n\t<span dojoAttachPoint=\"containerNode\"></span>\n</div>\n"),attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{label:{node:"containerNode",type:"innerHTML"}})});dojo.declare("dijit.MenuBarItem",[dijit.MenuItem,dijit._MenuBarItemMixin],{});}if(!dojo._hasResource["dijit.PopupMenuBarItem"]){dojo._hasResource["dijit.PopupMenuBarItem"]=true;dojo.provide("dijit.PopupMenuBarItem");dojo.declare("dijit.PopupMenuBarItem",[dijit.PopupMenuItem,dijit._MenuBarItemMixin],{});}if(!dojo._hasResource["misys.widget.BookmarkMenu"]){dojo._hasResource["misys.widget.BookmarkMenu"]=true;dojo.provide("misys.widget.BookmarkMenu");(function(d,dj,m){function _1615(link,_1616,_1617){var text="";var _1618=["<?xml version=\"1.0\" encoding=\"UTF-8\"?><bookmark>"];var _1619=dijit.byId("sendBookmark");dojo.forEach(_1619.getDescendants(),function(field){_1618.push("<",field.get("name"),">",field.get("value"),"</",field.get("name"),">");});if(dijit.byId("bookmarkName")){_1618.push("<bookmark_name>",dijit.byId("bookmarkName").get("value"),"</bookmark_name>");}_1618.push("<bookmark_url>","**","</bookmark_url>");_1618.push("<bookmark_source>","**","</bookmark_source>");_1618.push("<bookmark_id>",link,"</bookmark_id>");_1618.push("<action>",link,"</action></bookmark>");var _161a=misys.xhrPost({url:misys.getServletURL("/screen/BookmarkMenuScreen"),handleAs:"json",content:{formContent:_1618.join(""),bookmarkAction:"SAVE",currentActionCode:_1616,currentScreen:_1617},load:function(_161b){text=_161b.content[0];}});_161a.then(function(){var _161c=dojo.byId("favorites");if(!dijit.byId("sendBookmark")){dojo.parser.parse(dojo.byId("favorites"));}misys.animate("wipeOut",_161c,function(){dijit.byId("sendBookmark").destroyRecursive(true);var _161d=dj.findWidgets(dojo.byId("favorites"));dojo.forEach(_161d,function(w){w.destroyRecursive(false);});dojo.empty("favorites");_161c.innerHTML=text.substring(20,text.length-6);dojo.parser.parse(dojo.byId("favorites"));misys.animate("wipeIn",_161c);});});return _161a;};function _161e(id,_161f,_1620,_1621){var _1622=["<?xml version=\"1.0\" encoding=\"UTF-8\"?><bookmark>"];var _1623=dijit.byId("sendBookmark");dojo.forEach(_1623.getDescendants(),function(field){if(field.id!=="bookmark_"+id&&field.id!=="bookmark_name_"+id&&field.id!=="bookmark_source_"+id&&field.id!=="bookmark_url_"+id){_1622.push("<",field.get("name"),">",field.get("value"),"</",field.get("name"),">");}});_1622.push("<action>",_161f,"</action></bookmark>");var text="";var _1624=misys.xhrPost({url:misys.getServletURL("/screen/BookmarkMenuScreen"),handleAs:"json",content:{formContent:_1622.join(""),bookmarkAction:"DELETE",currentActionCode:_1620,currentScreen:_1621},load:function(_1625){text=_1625.content[0];}});_1624.then(function(){var _1626=dojo.byId("favorites");if(!dijit.byId("sendBookmark")){dojo.parser.parse(dojo.byId("favorites"));}misys.animate("wipeOut",_1626,function(){dijit.byId("sendBookmark").destroyRecursive(true);var _1627=dj.findWidgets(dojo.byId("favorites"));dojo.forEach(_1627,function(w){w.destroyRecursive(false);});dojo.empty("favorites");_1626.innerHTML=text.substring(20,text.length-6);dojo.parser.parse(dojo.byId("favorites"));misys.animate("wipeIn",_1626);});});return _1624;};d.mixin(m,{doBookmarkAction:function(type,_1628,id,_1629,_162a){if(!dijit.byId("sendBookmark")){dojo.parser.parse("favorites");}if(type==="SAVE"){_1615(_1628,_1629,_162a);}else{_161e(id,_1628,_1629,_162a);}}});})(dojo,dijit,misys);}if(!dojo._hasResource["dojo.DeferredList"]){dojo._hasResource["dojo.DeferredList"]=true;dojo.provide("dojo.DeferredList");dojo.DeferredList=function(list,_162b,_162c,_162d,_162e){var _162f=[];dojo.Deferred.call(this);var self=this;if(list.length===0&&!_162b){this.resolve([0,[]]);}var _1630=0;dojo.forEach(list,function(item,i){item.then(function(_1631){if(_162b){self.resolve([i,_1631]);}else{_1632(true,_1631);}},function(error){if(_162c){self.reject(error);}else{_1632(false,error);}if(_162d){return null;}throw error;});function _1632(_1633,_1634){_162f[i]=[_1633,_1634];_1630++;if(_1630===list.length){self.resolve(_162f);}};});};dojo.DeferredList.prototype=new dojo.Deferred();dojo.DeferredList.prototype.gatherResults=function(_1635){var d=new dojo.DeferredList(_1635,false,true,false);d.addCallback(function(_1636){var ret=[];dojo.forEach(_1636,function(_1637){ret.push(_1637[1]);});return ret;});return d;};}if(!dojo._hasResource["dijit.tree.TreeStoreModel"]){dojo._hasResource["dijit.tree.TreeStoreModel"]=true;dojo.provide("dijit.tree.TreeStoreModel");dojo.declare("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:false,constructor:function(args){dojo.mixin(this,args);this.connects=[];var store=this.store;if(!store.getFeatures()["dojo.data.api.Identity"]){throw new Error("dijit.Tree: store must support dojo.data.Identity");}if(store.getFeatures()["dojo.data.api.Notification"]){this.connects=this.connects.concat([dojo.connect(store,"onNew",this,"onNewItem"),dojo.connect(store,"onDelete",this,"onDeleteItem"),dojo.connect(store,"onSet",this,"onSetItem")]);}},destroy:function(){dojo.forEach(this.connects,dojo.disconnect);},getRoot:function(_1638,_1639){if(this.root){_1638(this.root);}else{this.store.fetch({query:this.query,onComplete:dojo.hitch(this,function(items){if(items.length!=1){throw new Error(this.declaredClass+": query "+dojo.toJson(this.query)+" returned "+items.length+" items, but must return exactly one item");}this.root=items[0];_1638(this.root);}),onError:_1639});}},mayHaveChildren:function(item){return dojo.some(this.childrenAttrs,function(attr){return this.store.hasAttribute(item,attr);},this);},getChildren:function(_163a,_163b,_163c){var store=this.store;if(!store.isItemLoaded(_163a)){var _163d=dojo.hitch(this,arguments.callee);store.loadItem({item:_163a,onItem:function(_163e){_163d(_163e,_163b,_163c);},onError:_163c});return;}var _163f=[];for(var i=0;i<this.childrenAttrs.length;i++){var vals=store.getValues(_163a,this.childrenAttrs[i]);_163f=_163f.concat(vals);}var _1640=0;if(!this.deferItemLoadingUntilExpand){dojo.forEach(_163f,function(item){if(!store.isItemLoaded(item)){_1640++;}});}if(_1640==0){_163b(_163f);}else{dojo.forEach(_163f,function(item,idx){if(!store.isItemLoaded(item)){store.loadItem({item:item,onItem:function(item){_163f[idx]=item;if(--_1640==0){_163b(_163f);}},onError:_163c});}});}},isItem:function(_1641){return this.store.isItem(_1641);},fetchItemByIdentity:function(_1642){this.store.fetchItemByIdentity(_1642);},getIdentity:function(item){return this.store.getIdentity(item);},getLabel:function(item){if(this.labelAttr){return this.store.getValue(item,this.labelAttr);}else{return this.store.getLabel(item);}},newItem:function(args,_1643,_1644){var pInfo={parent:_1643,attribute:this.childrenAttrs[0]},_1645;if(this.newItemIdAttr&&args[this.newItemIdAttr]){this.fetchItemByIdentity({identity:args[this.newItemIdAttr],scope:this,onItem:function(item){if(item){this.pasteItem(item,null,_1643,true,_1644);}else{_1645=this.store.newItem(args,pInfo);if(_1645&&(_1644!=undefined)){this.pasteItem(_1645,_1643,_1643,false,_1644);}}}});}else{_1645=this.store.newItem(args,pInfo);if(_1645&&(_1644!=undefined)){this.pasteItem(_1645,_1643,_1643,false,_1644);}}},pasteItem:function(_1646,_1647,_1648,bCopy,_1649){var store=this.store,_164a=this.childrenAttrs[0];if(_1647){dojo.forEach(this.childrenAttrs,function(attr){if(store.containsValue(_1647,attr,_1646)){if(!bCopy){var _164b=dojo.filter(store.getValues(_1647,attr),function(x){return x!=_1646;});store.setValues(_1647,attr,_164b);}_164a=attr;}});}if(_1648){if(typeof _1649=="number"){var _164c=store.getValues(_1648,_164a).slice();_164c.splice(_1649,0,_1646);store.setValues(_1648,_164a,_164c);}else{store.setValues(_1648,_164a,store.getValues(_1648,_164a).concat(_1646));}}},onChange:function(item){},onChildrenChange:function(_164d,_164e){},onDelete:function(_164f,_1650){},onNewItem:function(item,_1651){if(!_1651){return;}this.getChildren(_1651.item,dojo.hitch(this,function(_1652){this.onChildrenChange(_1651.item,_1652);}));},onDeleteItem:function(item){this.onDelete(item);},onSetItem:function(item,_1653,_1654,_1655){if(dojo.indexOf(this.childrenAttrs,_1653)!=-1){this.getChildren(item,dojo.hitch(this,function(_1656){this.onChildrenChange(item,_1656);}));}else{this.onChange(item);}}});}if(!dojo._hasResource["dijit.tree.ForestStoreModel"]){dojo._hasResource["dijit.tree.ForestStoreModel"]=true;dojo.provide("dijit.tree.ForestStoreModel");dojo.declare("dijit.tree.ForestStoreModel",dijit.tree.TreeStoreModel,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(_1657){this.root={store:this,root:true,id:_1657.rootId,label:_1657.rootLabel,children:_1657.rootChildren};},mayHaveChildren:function(item){return item===this.root||this.inherited(arguments);},getChildren:function(_1658,_1659,_165a){if(_1658===this.root){if(this.root.children){_1659(this.root.children);}else{this.store.fetch({query:this.query,onComplete:dojo.hitch(this,function(items){this.root.children=items;_1659(items);}),onError:_165a});}}else{this.inherited(arguments);}},isItem:function(_165b){return (_165b===this.root)?true:this.inherited(arguments);},fetchItemByIdentity:function(_165c){if(_165c.identity==this.root.id){var scope=_165c.scope?_165c.scope:dojo.global;if(_165c.onItem){_165c.onItem.call(scope,this.root);}}else{this.inherited(arguments);}},getIdentity:function(item){return (item===this.root)?this.root.id:this.inherited(arguments);},getLabel:function(item){return (item===this.root)?this.root.label:this.inherited(arguments);},newItem:function(args,_165d,_165e){if(_165d===this.root){this.onNewRootItem(args);return this.store.newItem(args);}else{return this.inherited(arguments);}},onNewRootItem:function(args){},pasteItem:function(_165f,_1660,_1661,bCopy,_1662){if(_1660===this.root){if(!bCopy){this.onLeaveRoot(_165f);}}dijit.tree.TreeStoreModel.prototype.pasteItem.call(this,_165f,_1660===this.root?null:_1660,_1661===this.root?null:_1661,bCopy,_1662);if(_1661===this.root){this.onAddToRoot(_165f);}},onAddToRoot:function(item){},onLeaveRoot:function(item){},_requeryTop:function(){var _1663=this.root.children||[];this.store.fetch({query:this.query,onComplete:dojo.hitch(this,function(_1664){this.root.children=_1664;if(_1663.length!=_1664.length||dojo.some(_1663,function(item,idx){return _1664[idx]!=item;})){this.onChildrenChange(this.root,_1664);}})});},onNewItem:function(item,_1665){this._requeryTop();this.inherited(arguments);},onDeleteItem:function(item){if(dojo.indexOf(this.root.children,item)!=-1){this._requeryTop();}this.inherited(arguments);},onSetItem:function(item,_1666,_1667,_1668){this._requeryTop();this.inherited(arguments);}});}if(!dojo._hasResource["dijit.tree._dndContainer"]){dojo._hasResource["dijit.tree._dndContainer"]=true;dojo.provide("dijit.tree._dndContainer");dojo.getObject("tree",true,dojo);dijit.tree._compareNodes=function(n1,n2){if(n1===n2){return 0;}if("sourceIndex" in document.documentElement){return n1.sourceIndex-n2.sourceIndex;}else{if("compareDocumentPosition" in document.documentElement){return n1.compareDocumentPosition(n2)&2?1:-1;}else{if(document.createRange){var r1=doc.createRange();r1.setStartBefore(n1);var r2=doc.createRange();r2.setStartBefore(n2);return r1.compareBoundaryPoints(r1.END_TO_END,r2);}else{throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");}}}};dojo.declare("dijit.tree._dndContainer",null,{constructor:function(tree,_1669){this.tree=tree;this.node=tree.domNode;dojo.mixin(this,_1669);this.map={};this.current=null;this.containerState="";dojo.addClass(this.node,"dojoDndContainer");this.events=[dojo.connect(this.node,"onmouseenter",this,"onOverEvent"),dojo.connect(this.node,"onmouseleave",this,"onOutEvent"),dojo.connect(this.tree,"_onNodeMouseEnter",this,"onMouseOver"),dojo.connect(this.tree,"_onNodeMouseLeave",this,"onMouseOut"),dojo.connect(this.node,"ondragstart",dojo,"stopEvent"),dojo.connect(this.node,"onselectstart",dojo,"stopEvent")];},getItem:function(key){var _166a=this.selection[key],ret={data:_166a,type:["treeNode"]};return ret;},destroy:function(){dojo.forEach(this.events,dojo.disconnect);this.node=this.parent=null;},onMouseOver:function(_166b,evt){this.current=_166b;},onMouseOut:function(_166c,evt){this.current=null;},_changeState:function(type,_166d){var _166e="dojoDnd"+type;var state=type.toLowerCase()+"State";dojo.replaceClass(this.node,_166e+_166d,_166e+this[state]);this[state]=_166d;},_addItemClass:function(node,type){dojo.addClass(node,"dojoDndItem"+type);},_removeItemClass:function(node,type){dojo.removeClass(node,"dojoDndItem"+type);},onOverEvent:function(){this._changeState("Container","Over");},onOutEvent:function(){this._changeState("Container","");}});}if(!dojo._hasResource["dijit.tree._dndSelector"]){dojo._hasResource["dijit.tree._dndSelector"]=true;dojo.provide("dijit.tree._dndSelector");dojo.declare("dijit.tree._dndSelector",dijit.tree._dndContainer,{constructor:function(tree,_166f){this.selection={};this.anchor=null;dijit.setWaiState(this.tree.domNode,"multiselect",!this.singular);this.events.push(dojo.connect(this.tree.domNode,"onmousedown",this,"onMouseDown"),dojo.connect(this.tree.domNode,"onmouseup",this,"onMouseUp"),dojo.connect(this.tree.domNode,"onmousemove",this,"onMouseMove"));},singular:false,getSelectedTreeNodes:function(){var nodes=[],sel=this.selection;for(var i in sel){nodes.push(sel[i]);}return nodes;},selectNone:function(){this.setSelection([]);return this;},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null;},addTreeNode:function(node,_1670){this.setSelection(this.getSelectedTreeNodes().concat([node]));if(_1670){this.anchor=node;}return node;},removeTreeNode:function(node){this.setSelection(this._setDifference(this.getSelectedTreeNodes(),[node]));return node;},isTreeNodeSelected:function(node){return node.id&&!!this.selection[node.id];},setSelection:function(_1671){var _1672=this.getSelectedTreeNodes();dojo.forEach(this._setDifference(_1672,_1671),dojo.hitch(this,function(node){node.setSelected(false);if(this.anchor==node){delete this.anchor;}delete this.selection[node.id];}));dojo.forEach(this._setDifference(_1671,_1672),dojo.hitch(this,function(node){node.setSelected(true);this.selection[node.id]=node;}));this._updateSelectionProperties();},_setDifference:function(xs,ys){dojo.forEach(ys,function(y){y.__exclude__=true;});var ret=dojo.filter(xs,function(x){return !x.__exclude__;});dojo.forEach(ys,function(y){delete y["__exclude__"];});return ret;},_updateSelectionProperties:function(){var _1673=this.getSelectedTreeNodes();var paths=[],nodes=[];dojo.forEach(_1673,function(node){nodes.push(node);paths.push(node.getTreePath());});var items=dojo.map(nodes,function(node){return node.item;});this.tree._set("paths",paths);this.tree._set("path",paths[0]||[]);this.tree._set("selectedNodes",nodes);this.tree._set("selectedNode",nodes[0]||null);this.tree._set("selectedItems",items);this.tree._set("selectedItem",items[0]||null);},onMouseDown:function(e){if(!this.current||this.tree.isExpandoNode(e.target,this.current)){return;}if(e.button==dojo.mouseButtons.RIGHT){return;}dojo.stopEvent(e);var _1674=this.current,copy=dojo.isCopyKey(e),id=_1674.id;if(!this.singular&&!e.shiftKey&&this.selection[id]){this._doDeselect=true;return;}else{this._doDeselect=false;}this.userSelect(_1674,copy,e.shiftKey);},onMouseUp:function(e){if(!this._doDeselect){return;}this._doDeselect=false;this.userSelect(this.current,dojo.isCopyKey(e),e.shiftKey);},onMouseMove:function(e){this._doDeselect=false;},userSelect:function(node,multi,range){if(this.singular){if(this.anchor==node&&multi){this.selectNone();}else{this.setSelection([node]);this.anchor=node;}}else{if(range&&this.anchor){var cr=dijit.tree._compareNodes(this.anchor.rowNode,node.rowNode),begin,end,_1675=this.anchor;if(cr<0){begin=_1675;end=node;}else{begin=node;end=_1675;}nodes=[];while(begin!=end){nodes.push(begin);begin=this.tree._getNextNode(begin);}nodes.push(end);this.setSelection(nodes);}else{if(this.selection[node.id]&&multi){this.removeTreeNode(node);}else{if(multi){this.addTreeNode(node,true);}else{this.setSelection([node]);this.anchor=node;}}}}},forInSelectedItems:function(f,o){o=o||dojo.global;for(var id in this.selection){f.call(o,this.getItem(id),id,this);}}});}if(!dojo._hasResource["dijit.Tree"]){dojo._hasResource["dijit.Tree"]=true;dojo.provide("dijit.Tree");dojo.declare("dijit._TreeNode",[dijit._Widget,dijit._Templated,dijit._Container,dijit._Contained,dijit._CssStateMixin],{item:null,isTreeNode:true,label:"",isExpandable:null,isExpanded:false,state:"UNCHECKED",templateString:dojo.cache("dijit","templates/TreeNode.html","<div class=\"dijitTreeNode\" role=\"presentation\"\n\t><div dojoAttachPoint=\"rowNode\" class=\"dijitTreeRow\" role=\"presentation\" dojoAttachEvent=\"onmouseenter:_onMouseEnter, onmouseleave:_onMouseLeave, onclick:_onClick, ondblclick:_onDblClick\"\n\t\t><img src=\"${_blankGif}\" alt=\"\" dojoAttachPoint=\"expandoNode\" class=\"dijitTreeExpando\" role=\"presentation\"\n\t\t/><span dojoAttachPoint=\"expandoNodeText\" class=\"dijitExpandoText\" role=\"presentation\"\n\t\t></span\n\t\t><span dojoAttachPoint=\"contentNode\"\n\t\t\tclass=\"dijitTreeContent\" role=\"presentation\">\n\t\t\t<img src=\"${_blankGif}\" alt=\"\" dojoAttachPoint=\"iconNode\" class=\"dijitIcon dijitTreeIcon\" role=\"presentation\"\n\t\t\t/><span dojoAttachPoint=\"labelNode\" class=\"dijitTreeLabel\" role=\"treeitem\" tabindex=\"-1\" aria-selected=\"false\" dojoAttachEvent=\"onfocus:_onLabelFocus\"></span>\n\t\t</span\n\t></div>\n\t<div dojoAttachPoint=\"containerNode\" class=\"dijitTreeContainer\" role=\"presentation\" style=\"display: none;\"></div>\n</div>\n"),baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow",labelNode:"dijitTreeLabel"},attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{label:{node:"labelNode",type:"innerText"},tooltip:{node:"rowNode",type:"attribute",attribute:"title"}}),buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);if(this.isExpandable){dijit.setWaiState(this.labelNode,"expanded",this.isExpanded);}this.setSelected(false);},_setIndentAttr:function(_1676){var _1677=(Math.max(_1676,0)*this.tree._nodePixelIndent)+"px";dojo.style(this.domNode,"backgroundPosition",_1677+" 0px");dojo.style(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",_1677);dojo.forEach(this.getChildren(),function(child){child.set("indent",_1676+1);});this._set("indent",_1676);},markProcessing:function(){this.state="LOADING";this._setExpando(true);},unmarkProcessing:function(){this._setExpando(false);},_updateItemClasses:function(item){var tree=this.tree,model=tree.model;if(tree._v10Compat&&item===model.root){item=null;}this._applyClassAndStyle(item,"icon","Icon");this._applyClassAndStyle(item,"label","Label");this._applyClassAndStyle(item,"row","Row");},_applyClassAndStyle:function(item,lower,upper){var _1678="_"+lower+"Class";var _1679=lower+"Node";var _167a=this[_1678];this[_1678]=this.tree["get"+upper+"Class"](item,this.isExpanded);dojo.replaceClass(this[_1679],this[_1678]||"",_167a||"");dojo.style(this[_1679],this.tree["get"+upper+"Style"](item,this.isExpanded)||{});},_updateLayout:function(){var _167b=this.getParent();if(!_167b||_167b.rowNode.style.display=="none"){dojo.addClass(this.domNode,"dijitTreeIsRoot");}else{dojo.toggleClass(this.domNode,"dijitTreeIsLast",!this.getNextSibling());}},_setExpando:function(_167c){var _167d=["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"],_167e=["*","-","+","*"],idx=_167c?0:(this.isExpandable?(this.isExpanded?1:2):3);dojo.replaceClass(this.expandoNode,_167d[idx],_167d);this.expandoNodeText.innerHTML=_167e[idx];},expand:function(){if(this._expandDeferred){return this._expandDeferred;}this._wipeOut&&this._wipeOut.stop();this.isExpanded=true;dijit.setWaiState(this.labelNode,"expanded","true");if(this.tree.showRoot||this!==this.tree.rootNode){dijit.setWaiRole(this.containerNode,"group");}dojo.addClass(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);if(this==this.tree.rootNode){dijit.setWaiState(this.tree.domNode,"expanded","true");}var def,_167f=dojo.fx.wipeIn({node:this.containerNode,duration:dijit.defaultDuration,onEnd:function(){def.callback(true);}});def=(this._expandDeferred=new dojo.Deferred(function(){_167f.stop();}));_167f.play();return def;},collapse:function(){if(!this.isExpanded){return;}if(this._expandDeferred){this._expandDeferred.cancel();delete this._expandDeferred;}this.isExpanded=false;dijit.setWaiState(this.labelNode,"expanded","false");if(this==this.tree.rootNode){dijit.setWaiState(this.tree.domNode,"expanded","false");}dojo.removeClass(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);if(!this._wipeOut){this._wipeOut=dojo.fx.wipeOut({node:this.containerNode,duration:dijit.defaultDuration});}this._wipeOut.play();},indent:0,setChildItems:function(items){var tree=this.tree,model=tree.model,defs=[];dojo.forEach(this.getChildren(),function(child){dijit._Container.prototype.removeChild.call(this,child);},this);this.state="LOADED";if(items&&items.length>0){this.isExpandable=true;dojo.forEach(items,function(item){var id=model.getIdentity(item),_1680=tree._itemNodesMap[id],node;if(_1680){for(var i=0;i<_1680.length;i++){if(_1680[i]&&!_1680[i].getParent()){node=_1680[i];node.set("indent",this.indent+1);break;}}}if(!node){node=this.tree._createTreeNode({item:item,tree:tree,isExpandable:model.mayHaveChildren(item),label:tree.getLabel(item),tooltip:tree.getTooltip(item),dir:tree.dir,lang:tree.lang,indent:this.indent+1});if(_1680){_1680.push(node);}else{tree._itemNodesMap[id]=[node];}}this.addChild(node);if(this.tree.autoExpand||this.tree._state(item)){defs.push(tree._expandNode(node));}},this);dojo.forEach(this.getChildren(),function(child,idx){child._updateLayout();});}else{this.isExpandable=false;}if(this._setExpando){this._setExpando(false);}this._updateItemClasses(this.item);if(this==tree.rootNode){var fc=this.tree.showRoot?this:this.getChildren()[0];if(fc){fc.setFocusable(true);tree.lastFocused=fc;}else{tree.domNode.setAttribute("tabIndex","0");}}return new dojo.DeferredList(defs);},getTreePath:function(){var node=this;var path=[];while(node&&node!==this.tree.rootNode){path.unshift(node.item);node=node.getParent();}path.unshift(this.tree.rootNode.item);return path;},getIdentity:function(){return this.tree.model.getIdentity(this.item);},removeChild:function(node){this.inherited(arguments);var _1681=this.getChildren();if(_1681.length==0){this.isExpandable=false;this.collapse();}dojo.forEach(_1681,function(child){child._updateLayout();});},makeExpandable:function(){this.isExpandable=true;this._setExpando(false);},_onLabelFocus:function(evt){this.tree._onNodeFocus(this);},setSelected:function(_1682){dijit.setWaiState(this.labelNode,"selected",_1682);dojo.toggleClass(this.rowNode,"dijitTreeRowSelected",_1682);},setFocusable:function(_1683){this.labelNode.setAttribute("tabIndex",_1683?"0":"-1");},_onClick:function(evt){this.tree._onClick(this,evt);},_onDblClick:function(evt){this.tree._onDblClick(this,evt);},_onMouseEnter:function(evt){this.tree._onNodeMouseEnter(this,evt);},_onMouseLeave:function(evt){this.tree._onNodeMouseLeave(this,evt);}});dojo.declare("dijit.Tree",[dijit._Widget,dijit._Templated],{store:null,model:null,query:null,label:"",showRoot:true,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:false,openOnDblClick:false,templateString:dojo.cache("dijit","templates/Tree.html","<div class=\"dijitTree dijitTreeContainer\" role=\"tree\"\n\tdojoAttachEvent=\"onkeypress:_onKeyPress\">\n\t<div class=\"dijitInline dijitTreeIndent\" style=\"position: absolute; top: -9999px\" dojoAttachPoint=\"indentDetector\"></div>\n</div>\n"),persist:true,autoExpand:false,dndController:"dijit.tree._dndSelector",dndParams:["onDndDrop","itemCreator","onDndCancel","checkAcceptance","checkItemAcceptance","dragThreshold","betweenThreshold"],onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(_1684,_1685){dojo.publish(this.id,[dojo.mixin({tree:this,event:_1684},_1685||{})]);},postMixInProperties:function(){this.tree=this;if(this.autoExpand){this.persist=false;}this._itemNodesMap={};if(!this.cookieName){this.cookieName=this.id+"SaveStateCookie";}this._loadDeferred=new dojo.Deferred();this.inherited(arguments);},postCreate:function(){this._initState();if(!this.model){this._store2model();}this.connect(this.model,"onChange","_onItemChange");this.connect(this.model,"onChildrenChange","_onItemChildrenChange");this.connect(this.model,"onDelete","_onItemDelete");this._load();this.inherited(arguments);if(this.dndController){if(dojo.isString(this.dndController)){this.dndController=dojo.getObject(this.dndController);}var _1686={};for(var i=0;i<this.dndParams.length;i++){if(this[this.dndParams[i]]){_1686[this.dndParams[i]]=this[this.dndParams[i]];}}this.dndController=new this.dndController(this,_1686);}},_store2model:function(){this._v10Compat=true;dojo.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var _1687={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};if(this.params.mayHaveChildren){_1687.mayHaveChildren=dojo.hitch(this,"mayHaveChildren");}if(this.params.getItemChildren){_1687.getChildren=dojo.hitch(this,function(item,_1688,_1689){this.getItemChildren((this._v10Compat&&item===this.model.root)?null:item,_1688,_1689);});}this.model=new dijit.tree.ForestStoreModel(_1687);this.showRoot=Boolean(this.label);},onLoad:function(){},_load:function(){this.model.getRoot(dojo.hitch(this,function(item){var rn=(this.rootNode=this.tree._createTreeNode({item:item,tree:this,isExpandable:true,label:this.label||this.getLabel(item),indent:this.showRoot?0:-1}));if(!this.showRoot){rn.rowNode.style.display="none";dijit.setWaiRole(this.domNode,"presentation");dijit.setWaiRole(rn.labelNode,"presentation");dijit.setWaiRole(rn.containerNode,"tree");}this.domNode.appendChild(rn.domNode);var _168a=this.model.getIdentity(item);if(this._itemNodesMap[_168a]){this._itemNodesMap[_168a].push(rn);}else{this._itemNodesMap[_168a]=[rn];}rn._updateLayout();this._expandNode(rn).addCallback(dojo.hitch(this,function(){this._loadDeferred.callback(true);this.onLoad();}));}),function(err){console.error(this,": error loading root: ",err);});},getNodesByItem:function(item){if(!item){return [];}var _168b=dojo.isString(item)?item:this.model.getIdentity(item);return [].concat(this._itemNodesMap[_168b]);},_setSelectedItemAttr:function(item){this.set("selectedItems",[item]);},_setSelectedItemsAttr:function(items){var tree=this;this._loadDeferred.addCallback(dojo.hitch(this,function(){var _168c=dojo.map(items,function(item){return (!item||dojo.isString(item))?item:tree.model.getIdentity(item);});var nodes=[];dojo.forEach(_168c,function(id){nodes=nodes.concat(tree._itemNodesMap[id]||[]);});this.set("selectedNodes",nodes);}));},_setPathAttr:function(path){if(path.length){return this.set("paths",[path]);}else{return this.set("paths",[]);}},_setPathsAttr:function(paths){var tree=this;return new dojo.DeferredList(dojo.map(paths,function(path){var d=new dojo.Deferred();path=dojo.map(path,function(item){return dojo.isString(item)?item:tree.model.getIdentity(item);});if(path.length){tree._loadDeferred.addCallback(function(){_168d(path,[tree.rootNode],d);});}else{d.errback("Empty path");}return d;})).addCallback(_168e);function _168d(path,nodes,def){var _168f=path.shift();var _1690=dojo.filter(nodes,function(node){return node.getIdentity()==_168f;})[0];if(!!_1690){if(path.length){tree._expandNode(_1690).addCallback(function(){_168d(path,_1690.getChildren(),def);});}else{def.callback(_1690);}}else{def.errback("Could not expand path at "+_168f);}};function _168e(_1691){tree.set("selectedNodes",dojo.map(dojo.filter(_1691,function(x){return x[0];}),function(x){return x[1];}));};},_setSelectedNodeAttr:function(node){this.set("selectedNodes",[node]);},_setSelectedNodesAttr:function(nodes){this._loadDeferred.addCallback(dojo.hitch(this,function(){this.dndController.setSelection(nodes);}));},mayHaveChildren:function(item){},getItemChildren:function(_1692,_1693){},getLabel:function(item){return this.model.getLabel(item);},getIconClass:function(item,_1694){return (!item||this.model.mayHaveChildren(item))?(_1694?"dijitFolderOpened":"dijitFolderClosed"):"dijitLeaf";},getLabelClass:function(item,_1695){},getRowClass:function(item,_1696){},getIconStyle:function(item,_1697){},getLabelStyle:function(item,_1698){},getRowStyle:function(item,_1699){},getTooltip:function(item){return "";},_onKeyPress:function(e){if(e.altKey){return;}var dk=dojo.keys;var _169a=dijit.getEnclosingWidget(e.target);if(!_169a){return;}var key=e.charOrCode;if(typeof key=="string"&&key!=" "){if(!e.altKey&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey){this._onLetterKeyNav({node:_169a,key:key.toLowerCase()});dojo.stopEvent(e);}}else{if(this._curSearch){clearTimeout(this._curSearch.timer);delete this._curSearch;}var map=this._keyHandlerMap;if(!map){map={};map[dk.ENTER]="_onEnterKey";map[dk.SPACE]=map[" "]="_onEnterKey";map[this.isLeftToRight()?dk.LEFT_ARROW:dk.RIGHT_ARROW]="_onLeftArrow";map[this.isLeftToRight()?dk.RIGHT_ARROW:dk.LEFT_ARROW]="_onRightArrow";map[dk.UP_ARROW]="_onUpArrow";map[dk.DOWN_ARROW]="_onDownArrow";map[dk.HOME]="_onHomeKey";map[dk.END]="_onEndKey";this._keyHandlerMap=map;}if(this._keyHandlerMap[key]){this[this._keyHandlerMap[key]]({node:_169a,item:_169a.item,evt:e});dojo.stopEvent(e);}}},_onEnterKey:function(_169b){this._publish("execute",{item:_169b.item,node:_169b.node});this.dndController.userSelect(_169b.node,dojo.isCopyKey(_169b.evt),_169b.evt.shiftKey);this.onClick(_169b.item,_169b.node,_169b.evt);},_onDownArrow:function(_169c){var node=this._getNextNode(_169c.node);if(node&&node.isTreeNode){this.focusNode(node);}},_onUpArrow:function(_169d){var node=_169d.node;var _169e=node.getPreviousSibling();if(_169e){node=_169e;while(node.isExpandable&&node.isExpanded&&node.hasChildren()){var _169f=node.getChildren();node=_169f[_169f.length-1];}}else{var _16a0=node.getParent();if(!(!this.showRoot&&_16a0===this.rootNode)){node=_16a0;}}if(node&&node.isTreeNode){this.focusNode(node);}},_onRightArrow:function(_16a1){var node=_16a1.node;if(node.isExpandable&&!node.isExpanded){this._expandNode(node);}else{if(node.hasChildren()){node=node.getChildren()[0];if(node&&node.isTreeNode){this.focusNode(node);}}}},_onLeftArrow:function(_16a2){var node=_16a2.node;if(node.isExpandable&&node.isExpanded){this._collapseNode(node);}else{var _16a3=node.getParent();if(_16a3&&_16a3.isTreeNode&&!(!this.showRoot&&_16a3===this.rootNode)){this.focusNode(_16a3);}}},_onHomeKey:function(){var node=this._getRootOrFirstNode();if(node){this.focusNode(node);}},_onEndKey:function(_16a4){var node=this.rootNode;while(node.isExpanded){var c=node.getChildren();node=c[c.length-1];}if(node&&node.isTreeNode){this.focusNode(node);}},multiCharSearchDuration:250,_onLetterKeyNav:function(_16a5){var cs=this._curSearch;if(cs){cs.pattern=cs.pattern+_16a5.key;clearTimeout(cs.timer);}else{cs=this._curSearch={pattern:_16a5.key,startNode:_16a5.node};}var self=this;cs.timer=setTimeout(function(){delete self._curSearch;},this.multiCharSearchDuration);var node=cs.startNode;do{node=this._getNextNode(node);if(!node){node=this._getRootOrFirstNode();}}while(node!==cs.startNode&&(node.label.toLowerCase().substr(0,cs.pattern.length)!=cs.pattern));if(node&&node.isTreeNode){if(node!==cs.startNode){this.focusNode(node);}}},isExpandoNode:function(node,_16a6){return dojo.isDescendant(node,_16a6.expandoNode);},_onClick:function(_16a7,e){var _16a8=e.target,_16a9=this.isExpandoNode(_16a8,_16a7);if((this.openOnClick&&_16a7.isExpandable)||_16a9){if(_16a7.isExpandable){this._onExpandoClick({node:_16a7});}}else{this._publish("execute",{item:_16a7.item,node:_16a7,evt:e});this.onClick(_16a7.item,_16a7,e);this.focusNode(_16a7);}dojo.stopEvent(e);},_onDblClick:function(_16aa,e){var _16ab=e.target,_16ac=(_16ab==_16aa.expandoNode||_16ab==_16aa.expandoNodeText);if((this.openOnDblClick&&_16aa.isExpandable)||_16ac){if(_16aa.isExpandable){this._onExpandoClick({node:_16aa});}}else{this._publish("execute",{item:_16aa.item,node:_16aa,evt:e});this.onDblClick(_16aa.item,_16aa,e);this.focusNode(_16aa);}dojo.stopEvent(e);},_onExpandoClick:function(_16ad){var node=_16ad.node;var _16ae=true;if(window.preventTableHeaderFocus||window.isToPreventTableHeaderFocusAlways||window.isTopElementToBeFocussed){_16ae=!(window.preventTableHeaderFocus||window.isToPreventTableHeaderFocusAlways||window.isTopElementToBeFocussed);}if(_16ae){this.focusNode(node);}if(node.isExpanded){this._collapseNode(node);}else{this._expandNode(node);}},onClick:function(item,node,evt){},onDblClick:function(item,node,evt){},onOpen:function(item,node){},onClose:function(item,node){},_getNextNode:function(node){if(node.isExpandable&&node.isExpanded&&node.hasChildren()){return node.getChildren()[0];}else{while(node&&node.isTreeNode){var _16af=node.getNextSibling();if(_16af){return _16af;}node=node.getParent();}return null;}},_getRootOrFirstNode:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0];},_collapseNode:function(node){if(node._expandNodeDeferred){delete node._expandNodeDeferred;}if(node.isExpandable){if(node.state=="LOADING"){return;}node.collapse();this.onClose(node.item,node);if(node.item){this._state(node.item,false);this._saveState();}}},_expandNode:function(node,_16b0){if(node._expandNodeDeferred&&!_16b0){return node._expandNodeDeferred;}var model=this.model,item=node.item,_16b1=this;switch(node.state){case "UNCHECKED":node.markProcessing();var def=(node._expandNodeDeferred=new dojo.Deferred());model.getChildren(item,function(items){node.unmarkProcessing();var scid=node.setChildItems(items);var ed=_16b1._expandNode(node,true);scid.addCallback(function(){ed.addCallback(function(){def.callback();});});},function(err){console.error(_16b1,": error loading root children: ",err);});break;default:def=(node._expandNodeDeferred=node.expand());this.onOpen(node.item,node);if(item){this._state(item,true);this._saveState();}}return def;},focusNode:function(node){dijit.focus(node.labelNode);},_onNodeFocus:function(node){if(node&&node!=this.lastFocused){if(this.lastFocused&&!this.lastFocused._destroyed){this.lastFocused.setFocusable(false);}node.setFocusable(true);this.lastFocused=node;}},_onNodeMouseEnter:function(node){},_onNodeMouseLeave:function(node){},_onItemChange:function(item){var model=this.model,_16b2=model.getIdentity(item),nodes=this._itemNodesMap[_16b2];if(nodes){var label=this.getLabel(item),_16b3=this.getTooltip(item);dojo.forEach(nodes,function(node){node.set({item:item,label:label,tooltip:_16b3});node._updateItemClasses(item);});}},_onItemChildrenChange:function(_16b4,_16b5){var model=this.model,_16b6=model.getIdentity(_16b4),_16b7=this._itemNodesMap[_16b6];if(_16b7){dojo.forEach(_16b7,function(_16b8){_16b8.setChildItems(_16b5);});}},_onItemDelete:function(item){var model=this.model,_16b9=model.getIdentity(item),nodes=this._itemNodesMap[_16b9];if(nodes){dojo.forEach(nodes,function(node){this.dndController.removeTreeNode(node);var _16ba=node.getParent();if(_16ba){_16ba.removeChild(node);}node.destroyRecursive();},this);delete this._itemNodesMap[_16b9];}},_initState:function(){if(this.persist){var _16bb=dojo.cookie(this.cookieName);this._openedItemIds={};if(_16bb){dojo.forEach(_16bb.split(","),function(item){this._openedItemIds[item]=true;},this);}}},_state:function(item,_16bc){if(!this.persist){return false;}var id=this.model.getIdentity(item);if(arguments.length===1){return this._openedItemIds[id];}if(_16bc){this._openedItemIds[id]=true;}else{delete this._openedItemIds[id];}},_saveState:function(){if(!this.persist){return;}var ary=[];for(var id in this._openedItemIds){ary.push(id);}dojo.cookie(this.cookieName,ary.join(","),{expires:365});},destroy:function(){if(this._curSearch){clearTimeout(this._curSearch.timer);delete this._curSearch;}if(this.rootNode){this.rootNode.destroyRecursive();}if(this.dndController&&!dojo.isString(this.dndController)){this.dndController.destroy();}this.rootNode=null;this.inherited(arguments);},destroyRecursive:function(){this.destroy();},resize:function(_16bd){if(_16bd){dojo.marginBox(this.domNode,_16bd);}this._nodePixelIndent=dojo._getMarginSize(this.tree.indentDetector).w;if(this.tree.rootNode){this.tree.rootNode.set("indent",this.showRoot?0:-1);}},_createTreeNode:function(args){return new dijit._TreeNode(args);}});}if(!dojo._hasResource["misys.widget.Tree"]){dojo._hasResource["misys.widget.Tree"]=true;dojo.provide("misys.widget.Tree");dojo.experimental("misys.widget.Tree");dojo.declare("misys.widget.Tree",[dijit.Tree],{onLoadId:0,parentId:"",childId:"",rootIdTree:"",onLoad:function(){this.onLoadOpen();},onLoadOpen:function(){if(this.onLoadId>0){var _16be=this._itemNodesMap[this.onLoadId];var _16bf=_16be[0].domNode;if(_16be[0].isExpandable){this._onExpandoClick({node:_16be[0]});}}if(this.parentId!==null&&this.parentId!==""){var array=[];var _16c0=[];_16c0.push(this.rootIdTree);_16c0.push(this.parentId);if(this.childId!=="0"){_16c0.push(this.childId);}array.push(_16c0);this.set("paths",array);}},onClick:function(item,node,evt){if(item.url){document.location.href=item.url;}else{if(node.isExpanded){this._collapseNode(node);}else{this._expandNode(node);}}},_onClick:function(_16c1,e){var evt=e;var _16c2=_16c1.item.url;if(_16c2!==""&&_16c2!=undefined){if(misys.isPopupRequired()){dojo.stopEvent(evt);misys.showUnsavedDataDialog();var _16c3=dojo.connect(misys,"setUnsavedDataOption",function(){if(misys.unsavedDataOption!=="notset"){var _16c4="";if(misys.unsavedDataOption=="save"){misys.saveAsync(_16c2);this.inherited(arguments);}else{if(_16c2!==""&&_16c4===""&&misys.unsavedDataOption=="nosave"){location.href=_16c2;this.inherited(arguments);}}}dojo.disconnect(_16c3);});}else{this.inherited(arguments);}}else{this.inherited(arguments);}}});}dojo.i18n._preloadLocalizations("dojo.nls.misys_common",["ROOT","ar","ar-ar","de","de-de","en","en-gb","en-us","fr","fr-fr","pt","pt-br","th","th-th","xx","zh","zh-cn"]);
